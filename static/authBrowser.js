(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (process,global){(function (){
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";!function(t){var e,n,a,r,i,o,s,u,c,h;function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return t="string"!=typeof t?String(t):t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function g(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function y(t){var e=new FileReader,n=g(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(a&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&a&&s(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var t,e,n=v(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=g(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(t,e){var n,r=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<c.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function I(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,a="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,(i="ArrayBuffer"in t)&&(o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))}),d.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},I.error=function(){var t=new I(null,{status:0,statusText:""});return t.type="error",t},h=[301,302,303,307,308],I.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new I(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=_,t.Response=I,t.fetch=function(n,o){return new Promise(function(r,t){var e=new _(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new I(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&a&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){var e={exports:{}};return t(e,e.exports),e.exports}function g(t){try{return!!t()}catch(t){return!0}}function v(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function r(t){return d.call(t).slice(8,-1)}function a(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function u(t){return w(a(t))}function y(t){return"object"==typeof t?null!==t:"function"==typeof t}function i(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function c(t,e){return I.call(t,e)}function n(t){return E?T.createElement(t):{}}function m(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t}function h(e,n){try{R(b,e,n)}catch(t){b[e]=n}return n}var o=function(t){return t&&t.Math==Math&&t},b=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||function(){return this}()||Function("return this")(),f=!g(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),s={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,p={f:l&&!s.call({1:2},1)?function(t){t=l(this,t);return!!t&&t.enumerable}:s},d={}.toString,_="".split,w=g(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==r(t)?_.call(t,""):Object(t)}:Object,I={}.hasOwnProperty,T=b.document,E=y(T)&&y(T.createElement),S=!f&&!g(function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}),C=Object.getOwnPropertyDescriptor,k={f:f?C:function(t,e){if(t=u(t),e=i(e,!0),S)try{return C(t,e)}catch(t){}if(c(t,e))return v(!p.f.call(t,e),t[e])}},N=Object.defineProperty,A={f:f?N:function(t,e,n){if(m(t),e=i(e,!0),m(n),S)try{return N(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},R=f?function(t,e,n){return A.f(t,e,v(1,n))}:function(t,e,n){return t[e]=n,t},P="__core-js_shared__",O=b[P]||h(P,{}),D=Function.toString;"function"!=typeof O.inspectSource&&(O.inspectSource=function(t){return D.call(t)});function x(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Q+Y).toString(36)}var L,M,F,U,j,q,V,B,K=O.inspectSource,W=b.WeakMap,H="function"==typeof W&&/native code/.test(K(W)),G=!1,z=e(function(t){(t.exports=function(t,e){return O[t]||(O[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),Q=0,Y=Math.random(),X=z("keys"),J=function(t){return X[t]||(X[t]=x(t))},$={},Z=b.WeakMap;V=H?(L=O.state||(O.state=new Z),M=L.get,F=L.has,U=L.set,j=function(t,e){return e.facade=t,U.call(L,t,e),e},q=function(t){return M.call(L,t)||{}},function(t){return F.call(L,t)}):(B=J("state"),$[B]=!0,j=function(t,e){return e.facade=t,R(t,B,e),e},q=function(t){return c(t,B)?t[B]:{}},function(t){return c(t,B)});function tt(t){return"function"==typeof t?t:void 0}function et(t,e){return arguments.length<2?tt(pt[t])||tt(b[t]):pt[t]&&pt[t][e]||b[t]&&b[t][e]}function nt(t){return isNaN(t=+t)?0:(0<t?vt:dt)(t)}function rt(t){return 0<t?gt(nt(t),9007199254740991):0}function it(t,e){var n,r=u(t),i=0,o=[];for(n in r)!c($,n)&&c(r,n)&&o.push(n);for(;e.length>i;)c(r,n=e[i++])&&(~_t(o,n)||o.push(n));return o}function ot(t,e){for(var n=St(e),r=A.f,i=k.f,o=0;o<n.length;o++){var a=n[o];c(t,a)||r(t,a,i(e,a))}}function at(t,e){var n,r,i,o=t.target,a=t.global,s=t.stat,u=a?b:s?b[o]||h(o,{}):(b[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Ot(u,n))&&i.value:u[n],!Pt(a?n:o+(s?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;ot(r,i)}(t.sham||i&&i.sham)&&R(r,"sham",!0),ft(u,n,r,t)}}function st(t){return Object(a(t))}function ut(){}function ct(t){return"<script>"+t+"</"+Vt+">"}var ht,lt={set:j,get:q,has:V,enforce:function(t){return V(t)?q(t):j(t,{})},getterFor:function(n){return function(t){var e;if(!y(t)||(e=q(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},ft=e(function(t){var e=lt.get,s=lt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||c(n,"name")||R(n,"name",e),(r=s(n)).source||(r.source=u.join("string"==typeof e?e:""))),t!==b?(i?!a&&t[e]&&(o=!0):delete t[e],o?t[e]=n:R(t,e,n)):o?t[e]=n:h(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||K(this)})}),pt=b,dt=Math.ceil,vt=Math.floor,gt=Math.min,yt=Math.max,mt=Math.min,bt=function(s){return function(t,e,n){var r,i=u(t),o=rt(i.length),a=function(t,e){t=nt(t);return t<0?yt(t+e,0):mt(t,e)}(n,o);if(s&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===e)return s||a||0;return!s&&-1}},_t={includes:bt(!0),indexOf:bt(!1)}.indexOf,wt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],It=wt.concat("length","prototype"),Tt={f:Object.getOwnPropertyNames||function(t){return it(t,It)}},Et={f:Object.getOwnPropertySymbols},St=et("Reflect","ownKeys")||function(t){var e=Tt.f(m(t)),n=Et.f;return n?e.concat(n(t)):e},Ct=/#|\.prototype\./,o=function(t,e){t=Nt[kt(t)];return t==Rt||t!=At&&("function"==typeof e?g(e):!!e)},kt=o.normalize=function(t){return String(t).replace(Ct,".").toLowerCase()},Nt=o.data={},At=o.NATIVE="N",Rt=o.POLYFILL="P",Pt=o,Ot=k.f,t=!g(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Dt=J("IE_PROTO"),xt=Object.prototype,Lt=t?Object.getPrototypeOf:function(t){return t=st(t),c(t,Dt)?t[Dt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?xt:null},Mt=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return m(t),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Ft=Object.keys||function(t){return it(t,wt)},Ut=f?Object.defineProperties:function(t,e){m(t);for(var n,r=Ft(e),i=r.length,o=0;o<i;)A.f(t,n=r[o++],e[n]);return t},jt=et("document","documentElement"),qt="prototype",Vt="script",Bt=J("IE_PROTO"),Kt=function(){try{ht=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;Kt=ht?function(t){t.write(ct("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ht):((t=n("iframe")).style.display="none",jt.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ct("document.F=Object")),t.close(),t.F);for(var e=wt.length;e--;)delete Kt[qt][wt[e]];return Kt()};$[Bt]=!0;function Wt(t){return c(Xt,t)||(Yt&&c(Jt,t)?Xt[t]=Jt[t]:Xt[t]=$t("Symbol."+t)),Xt[t]}function Ht(t){return void 0!==t&&(Zt.Array===t||ee[te]===t)}function Gt(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function zt(r,i,t){if(Gt(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}var Qt=Object.create||function(t,e){var n;return null!==t?(ut[qt]=m(t),n=new ut,ut[qt]=null,n[Bt]=t):n=Kt(),void 0===e?n:Ut(n,e)},Yt=!!Object.getOwnPropertySymbols&&!g(function(){return!String(Symbol())}),s=Yt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Xt=z("wks"),Jt=b.Symbol,$t=s?Jt:Jt&&Jt.withoutSetter||x,Zt={},te=Wt("iterator"),ee=Array.prototype,P={};P[Wt("toStringTag")]="z";function ne(t){if(null!=t)return t[ce]||t["@@iterator"]||Zt[ue(t)]}function re(t){var e=t.return;return void 0!==e&&m(e.call(t)).value}function ie(t,e){this.stopped=t,this.result=e}function oe(t,e,n){function r(t){return o&&re(o),new ie(!0,t)}function i(t){return f?(m(t),d?v(t[0],t[1],r):v(t[0],t[1])):d?v(t,r):v(t)}var o,a,s,u,c,h,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=zt(e,l,1+f+d);if(p)o=t;else{if("function"!=typeof(p=ne(t)))throw TypeError("Target is not iterable");if(Ht(p)){for(a=0,s=rt(t.length);a<s;a++)if((u=i(t[a]))&&u instanceof ie)return u;return new ie(!1)}o=p.call(t)}for(c=o.next;!(h=c.call(o)).done;){try{u=i(h.value)}catch(t){throw re(o),t}if("object"==typeof u&&u&&u instanceof ie)return u}return new ie(!1)}var W="[object z]"===String(P),ae=Wt("toStringTag"),se="Arguments"==r(function(){return arguments}()),ue=W?r:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ae))?t:se?r(e):"Object"==(t=r(e))&&"function"==typeof e.callee?"Arguments":t},ce=Wt("iterator"),he=function(t,e){var n=this;if(!(n instanceof he))return new he(t,e);Mt&&(n=Mt(new Error(void 0),Lt(n))),void 0!==e&&R(n,"message",String(e));e=[];return oe(t,e.push,{that:e}),R(n,"errors",e),n};he.prototype=Qt(Error.prototype,{constructor:v(5,he),message:v(5,""),name:v(5,"AggregateError")}),at({global:!0},{AggregateError:he});H=W?{}.toString:function(){return"[object "+ue(this)+"]"};W||ft(Object.prototype,"toString",H,{unsafe:!0});function le(t,e,n){for(var r in e)ft(t,r,e[r],n);return t}function fe(t,e,n){t&&!c(t=n?t:t.prototype,ye)&&ge(t,ye,{configurable:!0,value:e})}function pe(t){var e=et(t),t=A.f;f&&e&&!e[me]&&t(e,me,{configurable:!0,get:function(){return this}})}function de(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}var ve=b.Promise,ge=A.f,ye=Wt("toStringTag"),me=Wt("species"),be=Wt("iterator"),_e=!1;try{var we=0,Ie={next:function(){return{done:!!we++}},return:function(){_e=!0}};Ie[be]=function(){return this},Array.from(Ie,function(){throw 2})}catch(qa){}function Te(t,e){if(!e&&!_e)return!1;var n=!1;try{var r={};r[be]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Ee(t,e){var n;return void 0===(t=m(t).constructor)||null==(n=m(t)[Ne])?e:Gt(n)}function Se(t){var e;xe.hasOwnProperty(t)&&(e=xe[t],delete xe[t],e())}function Ce(t){return function(){Se(t)}}var ke,Ne=Wt("species"),Z=et("navigator","userAgent")||"",bt=/(iphone|ipod|ipad).*applewebkit/i.test(Z),Ae="process"==r(b.process),Re=b.location,o=b.setImmediate,t=b.clearImmediate,Pe=b.process,P=b.MessageChannel,Oe=b.Dispatch,De=0,xe={},Le="onreadystatechange",W=function(t){Se(t.data)},H=function(t){b.postMessage(t+"",Re.protocol+"//"+Re.host)};o&&t||(o=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return xe[++De]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},ke(De),De},t=function(t){delete xe[t]},Ae?ke=function(t){Pe.nextTick(Ce(t))}:Oe&&Oe.now?ke=function(t){Oe.now(Ce(t))}:P&&!bt?(We=(P=new P).port2,P.port1.onmessage=W,ke=zt(We.postMessage,We,1)):b.addEventListener&&"function"==typeof postMessage&&!b.importScripts&&Re&&"file:"!==Re.protocol&&!g(H)?(ke=H,b.addEventListener("message",W,!1)):ke=Le in n("script")?function(t){jt.appendChild(n("script"))[Le]=function(){jt.removeChild(this),Se(t)}}:function(t){setTimeout(Ce(t),0)});var Me,Fe,Ue,je,qe,Ve,Be,Ke,We={set:o,clear:t},H=k.f,He=We.set,W=b.MutationObserver||b.WebKitMutationObserver,o=b.document,Ge=b.process,t=b.Promise,H=H(b,"queueMicrotask"),H=H&&H.value;H||(Me=function(){var t,e;for(Ae&&(t=Ge.domain)&&t.exit();Fe;){e=Fe.fn,Fe=Fe.next;try{e()}catch(t){throw Fe?je():Ue=void 0,t}}Ue=void 0,t&&t.enter()},je=!bt&&!Ae&&W&&o?(qe=!0,Ve=o.createTextNode(""),new W(Me).observe(Ve,{characterData:!0}),function(){Ve.data=qe=!qe}):t&&t.resolve?(Be=t.resolve(void 0),Ke=Be.then,function(){Ke.call(Be,Me)}):Ae?function(){Ge.nextTick(Me)}:function(){He.call(b,Me)});function ze(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Gt(n),this.reject=Gt(r)}function Qe(t,e){return m(t),y(e)&&e.constructor===t?e:((0,(t=Je.f(t)).resolve)(e),t.promise)}function Ye(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var Xe=H||function(t){t={fn:t,next:void 0};Ue&&(Ue.next=t),Fe||(Fe=t,je()),Ue=t},Je={f:function(t){return new ze(t)}},H=b.process,H=H&&H.versions,H=H&&H.v8;H?Pn=(Sn=H.split("."))[0]+Sn[1]:Z&&(!(Sn=Z.match(/Edge\/(\d+)/))||74<=Sn[1])&&(Sn=Z.match(/Chrome\/(\d+)/))&&(Pn=Sn[1]);function $e(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e}function Ze(l,f){var p;l.notified||(l.notified=!0,p=l.reactions,Xe(function(){for(var t=l.value,e=1==l.state,n=0;p.length>n;){var r,i,o,a=p[n++],s=e?a.ok:a.fail,u=a.resolve,c=a.reject,h=a.domain;try{s?(e||(2===l.rejection&&Nn(l),l.rejection=1),!0===s?r=t:(h&&h.enter(),r=s(t),h&&(h.exit(),o=!0)),r===a.promise?c(gn("Promise-chain cycle")):(i=$e(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}l.reactions=[],l.notified=!1,f&&!l.rejection&&Cn(l)}))}function tn(t,e,n){var r,i;In?((r=yn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),b.dispatchEvent(r)):r={promise:e,reason:n},!Tn&&(i=b["on"+t])?i(r):t===En&&function(t,e){var n=b.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function en(e,n,r){return function(t){e(n,t,r)}}function nn(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=2,Ze(t,!0))}var rn,on,an,sn,un=Pn&&+Pn,cn=We.set,hn=Wt("species"),ln="Promise",fn=lt.get,pn=lt.set,dn=lt.getterFor(ln),vn=ve,gn=b.TypeError,yn=b.document,mn=b.process,bn=et("fetch"),_n=Je.f,wn=_n,In=!!(yn&&yn.createEvent&&b.dispatchEvent),Tn="function"==typeof PromiseRejectionEvent,En="unhandledrejection",Z=Pt(ln,function(){if(!(K(vn)!==String(vn))){if(66===un)return!0;if(!Ae&&!Tn)return!0}if(51<=un&&/native code/.test(vn))return!1;function t(t){t(function(){},function(){})}var e=vn.resolve(1);return(e.constructor={})[hn]=t,!(e.then(function(){})instanceof t)}),Sn=Z||!Te(function(t){vn.all(t).catch(function(){})}),Cn=function(i){cn.call(b,function(){var t,e=i.facade,n=i.value,r=kn(i);if(r&&(t=Ye(function(){Ae?mn.emit("unhandledRejection",n,e):tn(En,e,n)}),i.rejection=Ae||kn(i)?2:1,t.error))throw t.value})},kn=function(t){return 1!==t.rejection&&!t.parent},Nn=function(e){cn.call(b,function(){var t=e.facade;Ae?mn.emit("rejectionHandled",t):tn("rejectionhandled",t,e.value)})},An=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw gn("Promise can't be resolved itself");var r=$e(t);r?Xe(function(){var e={done:!1};try{r.call(t,en(An,e,n),en(nn,e,n))}catch(t){nn(e,t,n)}}):(n.value=t,n.state=1,Ze(n,!1))}catch(t){nn({done:!1},t,n)}}};Z&&(vn=function(t){de(this,vn,ln),Gt(t),rn.call(this);var e=fn(this);try{t(en(An,e),en(nn,e))}catch(t){nn(e,t)}},(rn=function(t){pn(this,{type:ln,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=le(vn.prototype,{then:function(t,e){var n=dn(this),r=_n(Ee(this,vn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Ae?mn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ze(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),on=function(){var t=new rn,e=fn(t);this.promise=t,this.resolve=en(An,e),this.reject=en(nn,e)},Je.f=_n=function(t){return t===vn||t===an?new on:wn(t)},"function"==typeof ve&&(sn=ve.prototype.then,ft(ve.prototype,"then",function(t,e){var n=this;return new vn(function(t,e){sn.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof bn&&at({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Qe(vn,bn.apply(b,arguments))}}))),at({global:!0,wrap:!0,forced:Z},{Promise:vn}),fe(vn,ln,!1),pe(ln),an=et(ln),at({target:ln,stat:!0,forced:Z},{reject:function(t){var e=_n(this);return e.reject.call(void 0,t),e.promise}}),at({target:ln,stat:!0,forced:Z},{resolve:function(t){return Qe(this,t)}}),at({target:ln,stat:!0,forced:Sn},{all:function(t){var s=this,e=_n(s),u=e.resolve,c=e.reject,n=Ye(function(){var r=Gt(s.resolve),i=[],o=0,a=1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),a++,r.call(s,t).then(function(t){n||(n=!0,i[e]=t,--a||u(i))},c)}),--a||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=_n(n),i=r.reject,e=Ye(function(){var e=Gt(n.resolve);oe(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),at({target:"Promise",stat:!0},{allSettled:function(t){var s=this,e=Je.f(s),u=e.resolve,n=e.reject,r=Ye(function(){var r=Gt(s.resolve),i=[],o=0,a=1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),a++,r.call(s,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--a||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--a||u(i))})}),--a||u(i)});return r.error&&n(r.value),e.promise}});var Rn="No one promise resolved";at({target:"Promise",stat:!0},{any:function(t){var u=this,e=Je.f(u),c=e.resolve,h=e.reject,n=Ye(function(){var r=Gt(u.resolve),i=[],o=0,a=1,s=!1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),a++,r.call(u,t).then(function(t){n||s||(s=!0,c(t))},function(t){n||s||(n=!0,i[e]=t,--a||h(new(et("AggregateError"))(i,Rn)))})}),--a||h(new(et("AggregateError"))(i,Rn))});return n.error&&h(n.value),e.promise}});var Pn=!!ve&&g(function(){ve.prototype.finally.call({then:function(){}},function(){})});at({target:"Promise",proto:!0,real:!0,forced:Pn},{finally:function(e){var n=Ee(this,et("Promise")),t="function"==typeof e;return this.then(t?function(t){return Qe(n,e()).then(function(){return t})}:e,t?function(t){return Qe(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof ve||ve.prototype.finally||ft(ve.prototype,"finally",et("Promise").prototype.finally);We=function(o){return function(t,e){var n,r=String(a(t)),i=nt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},Z={codeAt:We(!1),charAt:We(!0)},Sn=Wt("iterator"),Pn=!1;[].keys&&("next"in(Qn=[].keys())?(lr=Lt(Lt(Qn)))!==Object.prototype&&(dr=lr):Pn=!0),c(dr=null==dr?{}:dr,Sn)||R(dr,Sn,function(){return this});function On(){return this}function Dn(){return this}function xn(t,e,n,r,i,o,a){function s(t){if(t===i&&d)return d;if(!Fn&&t in f)return f[t];switch(t){case"keys":case jn:case qn:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator";t.prototype=Qt(Ln,{next:v(1,n)}),fe(t,e,!1),Zt[e]=On}(n,e,r);var u,c,h=e+" Iterator",l=!1,f=t.prototype,p=f[Un]||f["@@iterator"]||i&&f[i],d=!Fn&&p||s(i);if((r="Array"==e&&f.entries||p)&&(t=Lt(r.call(new t)),Mn!==Object.prototype&&t.next&&(Lt(t)!==Mn&&(Mt?Mt(t,Mn):"function"!=typeof t[Un]&&R(t,Un,Dn)),fe(t,h,!0))),i==jn&&p&&p.name!==jn&&(l=!0,d=function(){return p.call(this)}),f[Un]!==d&&R(f,Un,d),Zt[e]=d,i)if(u={values:s(jn),keys:o?d:s("keys"),entries:s(qn)},a)for(c in u)!Fn&&!l&&c in f||ft(f,c,u[c]);else at({target:e,proto:!0,forced:Fn||l},u);return u}var We={IteratorPrototype:dr,BUGGY_SAFARI_ITERATORS:Pn},Ln=We.IteratorPrototype,Mn=We.IteratorPrototype,Fn=We.BUGGY_SAFARI_ITERATORS,Un=Wt("iterator"),jn="values",qn="entries",Vn=Z.charAt,Bn="String Iterator",Kn=lt.set,Wn=lt.getterFor(Bn);xn(String,"String",function(t){Kn(this,{type:Bn,string:String(t),index:0})},function(){var t=Wn(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=Vn(e,n),t.index+=n.length,{value:n,done:!1})});var Hn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Gn=Wt("unscopables"),zn=Array.prototype;null==zn[Gn]&&A.f(zn,Gn,{configurable:!0,value:Qt(null)});var Qn=function(t){zn[Gn][t]=!0},Yn="Array Iterator",Xn=lt.set,Jn=lt.getterFor(Yn),$n=xn(Array,"Array",function(t,e){Xn(this,{type:Yn,target:u(t),index:0,kind:e})},function(){var t=Jn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Zt.Arguments=Zt.Array,Qn("keys"),Qn("values"),Qn("entries");var Zn,tr=Wt("iterator"),er=Wt("toStringTag"),nr=$n.values;for(Zn in Hn){var rr=b[Zn],ir=rr&&rr.prototype;if(ir){if(ir[tr]!==nr)try{R(ir,tr,nr)}catch(qa){ir[tr]=nr}if(ir[er]||R(ir,er,Zn),Hn[Zn])for(var or in $n)if(ir[or]!==$n[or])try{R(ir,or,$n[or])}catch(qa){ir[or]=$n[or]}}}pt.Promise;at({target:"Promise",stat:!0},{try:function(t){var e=Je.f(this),t=Ye(t);return(t.error?e.reject:e.resolve)(t.value),e.promise}});function ar(t,e){var n;return new(void 0===(n=ur(t)&&("function"==typeof(n=t.constructor)&&(n===Array||ur(n.prototype))||y(n)&&null===(n=n[cr]))?void 0:n)?Array:n)(0===e?0:e)}function sr(t){throw t}var ur=Array.isArray||function(t){return"Array"==r(t)},cr=Wt("species"),hr=[].push,lr=function(f){var p=1==f,d=2==f,v=3==f,g=4==f,y=6==f,m=7==f,b=5==f||y;return function(t,e,n,r){for(var i,o,a=st(t),s=w(a),u=zt(e,n,3),c=rt(s.length),h=0,r=r||ar,l=p?r(t,c):d||m?r(t,0):void 0;h<c;h++)if((b||h in s)&&(o=u(i=s[h],h,a),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:hr.call(l,i)}else switch(f){case 4:return!1;case 7:hr.call(l,i)}return y?-1:v||g?g:l}},Sn={forEach:lr(0),map:lr(1),filter:lr(2),some:lr(3),every:lr(4),find:lr(5),findIndex:lr(6),filterOut:lr(7)},fr=Object.defineProperty,pr={},dr=function(t,e){if(c(pr,t))return pr[t];var n=[][t],r=!!c(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=c(e,0)?e[0]:sr,o=c(e,1)?e[1]:void 0;return pr[t]=!!n&&!g(function(){if(r&&!f)return 1;var t={length:-1};r?fr(t,1,{enumerable:!0,get:sr}):t[1]=1,n.call(t,i,o)})},vr=Sn.find,Pn="find",gr=!0,We=dr(Pn);Pn in[]&&Array(1)[Pn](function(){gr=!1}),at({target:"Array",proto:!0,forced:gr||!We},{find:function(t){return vr(this,t,1<arguments.length?arguments[1]:void 0)}}),Qn(Pn);var yr=Function.call,Z=function(t,e,n){return zt(yr,b[t].prototype[e],n)},mr=(Z("Array","find"),Sn.findIndex),lr="findIndex",br=!0,We=dr(lr);lr in[]&&Array(1)[lr](function(){br=!1}),at({target:"Array",proto:!0,forced:br||!We},{findIndex:function(t){return mr(this,t,1<arguments.length?arguments[1]:void 0)}}),Qn(lr);function _r(t,e,n){(e=i(e))in t?A.f(t,e,v(0,n)):t[e]=n}Z("Array","findIndex");Pn=!Te(function(t){Array.from(t)});at({target:"Array",stat:!0,forced:Pn},{from:function(t){var e,n,r,i,o,a,s=st(t),u="function"==typeof this?this:Array,c=arguments.length,h=1<c?arguments[1]:void 0,l=void 0!==h,t=ne(s),f=0;if(l&&(h=zt(h,2<c?arguments[2]:void 0,2)),null==t||u==Array&&Ht(t))for(n=new u(e=rt(s.length));f<e;f++)a=l?h(s[f],f):s[f],_r(n,f,a);else for(o=(i=t.call(s)).next,n=new u;!(r=o.call(i)).done;f++)a=l?function(e,t,n,r){try{return r?t(m(n)[0],n[1]):t(n)}catch(t){throw re(e),t}}(i,h,[r.value,f],!0):r.value,_r(n,f,a);return n.length=f,n}});pt.Array.from;var wr,Ir,Tr=Sn.some,We=!!(Ir=[]["some"])&&g(function(){Ir.call(null,wr||function(){throw 1},1)}),Qn=dr("some");at({target:"Array",proto:!0,forced:!We||!Qn},{some:function(t){return Tr(this,t,1<arguments.length?arguments[1]:void 0)}});Z("Array","some");function Er(t){return!!y(t)&&(t=ue(t),c(Or,t)||c(Dr,t))}var Sr,lr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Pn=A.f,Cr=b.Int8Array,kr=Cr&&Cr.prototype,dr=b.Uint8ClampedArray,We=dr&&dr.prototype,Nr=Cr&&Lt(Cr),Ar=kr&&Lt(kr),Qn=Object.prototype,dr=(Qn.isPrototypeOf,Wt("toStringTag")),Rr=x("TYPED_ARRAY_TAG"),Pr=lr&&!!Mt&&"Opera"!==ue(b.opera),lr=!1,Or={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Dr={BigInt64Array:8,BigUint64Array:8};for(Sr in Or)b[Sr]||(Pr=!1);if((!Pr||"function"!=typeof Nr||Nr===Function.prototype)&&(Nr=function(){throw TypeError("Incorrect invocation")},Pr))for(Sr in Or)b[Sr]&&Mt(b[Sr],Nr);if((!Pr||!Ar||Ar===Qn)&&(Ar=Nr.prototype,Pr))for(Sr in Or)b[Sr]&&Mt(b[Sr].prototype,Ar);if(Pr&&Lt(We)!==Ar&&Mt(We,Ar),f&&!c(Ar,dr))for(Sr in lr=!0,Pn(Ar,dr,{get:function(){return y(this)?this[Rr]:void 0}}),Or)b[Sr]&&R(b[Sr],Rr,Sr);var We=function(t){if(Er(t))return t;throw TypeError("Target is not a typed array")},Pn=function(t,e,n){if(f){if(n)for(var r in Or){r=b[r];r&&c(r.prototype,t)&&delete r.prototype[t]}Ar[t]&&!n||ft(Ar,t,!n&&Pr&&kr[t]||e)}},dr=Wt("iterator"),lr=b.Uint8Array,xr=$n.values,Lr=$n.keys,Mr=$n.entries,Fr=We,We=Pn,Pn=lr&&lr.prototype[dr],lr=!!Pn&&("values"==Pn.name||null==Pn.name),Pn=function(){return xr.call(Fr(this))};We("entries",function(){return Mr.call(Fr(this))}),We("keys",function(){return Lr.call(Fr(this))}),We("values",Pn,!lr),We(dr,Pn,!lr);var Ur=Object.assign,jr=Object.defineProperty,Pn=!Ur||g(function(){if(f&&1!==Ur({b:1},Ur(jr({},"a",{enumerable:!0,get:function(){jr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Ur({},t)[n]||Ft(Ur({},e)).join("")!=r})?function(t,e){for(var n=st(t),r=arguments.length,i=1,o=Et.f,a=p.f;i<r;)for(var s,u=w(arguments[i++]),c=o?Ft(u).concat(o(u)):Ft(u),h=c.length,l=0;l<h;)s=c[l++],f&&!a.call(u,s)||(n[s]=u[s]);return n}:Ur;at({target:"Object",stat:!0,forced:Object.assign!==Pn},{assign:Pn});pt.Object.assign;var qr=p.f,lr=function(s){return function(t){for(var e,n=u(t),r=Ft(n),i=r.length,o=0,a=[];o<i;)e=r[o++],f&&!qr.call(n,e)||a.push(s?[e,n[e]]:n[e]);return a}},Pn={entries:lr(!0),values:lr(!1)},Vr=Pn.entries;at({target:"Object",stat:!0},{entries:function(t){return Vr(t)}});pt.Object.entries;var Br=Pn.values;at({target:"Object",stat:!0},{values:function(t){return Br(t)}});pt.Object.values;function Kr(t){if(y(e=t)&&(void 0!==(n=e[Wr])?!!n:"RegExp"==r(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}var Wr=Wt("match"),Hr=Wt("match"),lr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Hr]=!1,"/./"[e](n)}catch(t){}}return!1};at({target:"String",proto:!0,forced:!lr("includes")},{includes:function(t){return!!~String(a(this)).indexOf(Kr(t),1<arguments.length?arguments[1]:void 0)}});Z("String","includes");var Gr,Pn=k.f,zr="".startsWith,Qr=Math.min,lr=lr("startsWith"),Gr=!(lr||(!(Gr=Pn(String.prototype,"startsWith"))||Gr.writable));at({target:"String",proto:!0,forced:!Gr&&!lr},{startsWith:function(t){var e=String(a(this));Kr(t);var n=rt(Qr(1<arguments.length?arguments[1]:void 0,e.length)),t=String(t);return zr?zr.call(e,t,n):e.slice(n,n+t.length)===t}});Z("String","startsWith");at({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(a(this)),n="",r=nt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});Z("String","repeat");var Yr,Xr=Wt("species"),Jr=Wt("isConcatSpreadable"),$r=9007199254740991,Zr="Maximum allowed index exceeded",lr=51<=un||!g(function(){var t=[];return t[Jr]=!1,t.concat()[0]!==t}),Z=(Yr="concat",51<=un||!g(function(){var t=[];return(t.constructor={})[Xr]=function(){return{foo:1}},1!==t[Yr](Boolean).foo}));at({target:"Array",proto:!0,forced:!lr||!Z},{concat:function(t){for(var e,n,r,i=st(this),o=ar(i,0),a=0,s=-1,u=arguments.length;s<u;s++)if(function(t){if(!y(t))return!1;var e=t[Jr];return void 0!==e?!!e:ur(t)}(r=-1===s?i:arguments[s])){if(n=rt(r.length),$r<a+n)throw TypeError(Zr);for(e=0;e<n;e++,a++)e in r&&_r(o,a,r[e])}else{if($r<=a)throw TypeError(Zr);_r(o,a++,r)}return o.length=a,o}});function ti(t){var e=pt.Symbol||(pt.Symbol={});c(e,t)||si(e,t,{value:ai.f(t)})}function ei(t,e){var n=wi[t]=Qt(vi[li]);return fi(n,{type:hi,tag:t,description:e}),f||(n.description=e),n}function ni(e,t){m(e);var n=u(t),t=Ft(n).concat(Ri(n));return ui(t,function(t){f&&!Ai.call(n,t)||Ni(e,t,n[t])}),e}var ri=Tt.f,ii={}.toString,oi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Z={f:function(t){return oi&&"[object Window]"==ii.call(t)?function(t){try{return ri(t)}catch(t){return oi.slice()}}(t):ri(u(t))}},ai={f:Wt},si=A.f,ui=Sn.forEach,ci=J("hidden"),hi="Symbol",li="prototype",Sn=Wt("toPrimitive"),fi=lt.set,pi=lt.getterFor(hi),di=Object[li],vi=b.Symbol,gi=et("JSON","stringify"),yi=k.f,mi=A.f,bi=Z.f,_i=p.f,wi=z("symbols"),Ii=z("op-symbols"),Ti=z("string-to-symbol-registry"),Ei=z("symbol-to-string-registry"),J=z("wks"),z=b.QObject,Si=!z||!z[li]||!z[li].findChild,Ci=f&&g(function(){return 7!=Qt(mi({},"a",{get:function(){return mi(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=yi(di,e);r&&delete di[e],mi(t,e,n),r&&t!==di&&mi(di,e,r)}:mi,ki=s?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof vi},Ni=function(t,e,n){t===di&&Ni(Ii,e,n),m(t);e=i(e,!0);return m(n),c(wi,e)?(n.enumerable?(c(t,ci)&&t[ci][e]&&(t[ci][e]=!1),n=Qt(n,{enumerable:v(0,!1)})):(c(t,ci)||mi(t,ci,v(1,{})),t[ci][e]=!0),Ci(t,e,n)):mi(t,e,n)},Ai=function(t){var e=i(t,!0),t=_i.call(this,e);return!(this===di&&c(wi,e)&&!c(Ii,e))&&(!(t||!c(this,e)||!c(wi,e)||c(this,ci)&&this[ci][e])||t)},z=function(t,e){var n=u(t),t=i(e,!0);if(n!==di||!c(wi,t)||c(Ii,t)){e=yi(n,t);return!e||!c(wi,t)||c(n,ci)&&n[ci][t]||(e.enumerable=!0),e}},s=function(t){var t=bi(u(t)),e=[];return ui(t,function(t){c(wi,t)||c($,t)||e.push(t)}),e},Ri=function(t){var e=t===di,t=bi(e?Ii:u(t)),n=[];return ui(t,function(t){!c(wi,t)||e&&!c(di,t)||n.push(wi[t])}),n};Yt||(ft((vi=function(){if(this instanceof vi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=x(t),n=function(t){this===di&&n.call(Ii,t),c(this,ci)&&c(this[ci],e)&&(this[ci][e]=!1),Ci(this,e,v(1,t))};return f&&Si&&Ci(di,e,{configurable:!0,set:n}),ei(e,t)})[li],"toString",function(){return pi(this).tag}),ft(vi,"withoutSetter",function(t){return ei(x(t),t)}),p.f=Ai,A.f=Ni,k.f=z,Tt.f=Z.f=s,Et.f=Ri,ai.f=function(t){return ei(Wt(t),t)},f&&(mi(vi[li],"description",{configurable:!0,get:function(){return pi(this).description}}),ft(di,"propertyIsEnumerable",Ai,{unsafe:!0}))),at({global:!0,wrap:!0,forced:!Yt,sham:!Yt},{Symbol:vi}),ui(Ft(J),function(t){ti(t)}),at({target:hi,stat:!0,forced:!Yt},{for:function(t){var e=String(t);if(c(Ti,e))return Ti[e];t=vi(e);return Ti[e]=t,Ei[t]=e,t},keyFor:function(t){if(!ki(t))throw TypeError(t+" is not a symbol");if(c(Ei,t))return Ei[t]},useSetter:function(){Si=!0},useSimple:function(){Si=!1}}),at({target:"Object",stat:!0,forced:!Yt,sham:!f},{create:function(t,e){return void 0===e?Qt(t):ni(Qt(t),e)},defineProperty:Ni,defineProperties:ni,getOwnPropertyDescriptor:z}),at({target:"Object",stat:!0,forced:!Yt},{getOwnPropertyNames:s,getOwnPropertySymbols:Ri}),at({target:"Object",stat:!0,forced:g(function(){Et.f(1)})},{getOwnPropertySymbols:function(t){return Et.f(st(t))}}),gi&&(Ki=!Yt||g(function(){var t=vi();return"[null]"!=gi([t])||"{}"!=gi({a:t})||"{}"!=gi(Object(t))}),at({target:"JSON",stat:!0,forced:Ki},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((y(r=e)||void 0!==t)&&!ki(t))return ur(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ki(e))return e}),i[1]=e,gi.apply(null,i)}})),vi[li][Sn]||R(vi[li],Sn,vi[li].valueOf),fe(vi,hi),$[ci]=!0,ti("asyncIterator");var Pi,Oi,Di,xi,Li,z=A.f,Mi=b.Symbol;!f||"function"!=typeof Mi||"description"in Mi.prototype&&void 0===Mi().description||(Pi={},ot(Oi=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Oi?new Mi(t):void 0===t?Mi():Mi(t);return""===t&&(Pi[e]=!0),e},Mi),(Gi=Oi.prototype=Mi.prototype).constructor=Oi,Di=Gi.toString,xi="Symbol(test)"==String(Mi("test")),Li=/^Symbol\((.*)\)[^)]+$/,z(Gi,"description",{configurable:!0,get:function(){var t=y(this)?this.valueOf():this,e=Di.call(t);if(c(Pi,t))return"";e=xi?e.slice(7,-1):e.replace(Li,"$1");return""===e?void 0:e}}),at({global:!0,forced:!0},{Symbol:Oi})),ti("hasInstance"),ti("isConcatSpreadable"),ti("iterator"),ti("match"),ti("matchAll"),ti("replace"),ti("search"),ti("species"),ti("split"),ti("toPrimitive"),ti("toStringTag"),ti("unscopables"),fe(b.JSON,"JSON",!0),fe(Math,"Math",!0),at({global:!0},{Reflect:{}}),fe(b.Reflect,"Reflect",!0);pt.Symbol;ti("asyncDispose"),ti("dispose"),ti("observable"),ti("patternMatch"),ti("replaceAll");ai.f("iterator");var Fi=!g(function(){return Object.isExtensible(Object.preventExtensions({}))}),Ui=e(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=A.f,r=x("meta"),i=0,o=Object.isExtensible||function(){return!0},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!c(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return Fi&&a.REQUIRED&&o(t)&&!c(t,r)&&n(t),t}};$[r]=!0}),s=function(a,t,e){function n(t){var n=p[t];ft(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!y(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!y(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!y(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,s,u,c=-1!==a.indexOf("Map"),h=-1!==a.indexOf("Weak"),l=c?"set":"add",f=b[a],p=f&&f.prototype,d=f,v={};return Pt(a,"function"!=typeof f||!(h||p.forEach&&!g(function(){(new f).entries().next()})))?(d=e.getConstructor(t,a,c,l),Ui.REQUIRED=!0):Pt(a,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=g(function(){r.has(1)}),s=Te(function(t){new f(t)}),u=!h&&g(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),s||(((d=t(function(t,e){de(t,d,a);var n,r,i,o,n=(n=new f,r=t,t=d,Mt&&"function"==typeof(i=r.constructor)&&i!==t&&y(o=i.prototype)&&o!==t.prototype&&Mt(n,o),n);return null!=e&&oe(e,n[l],{that:n,AS_ENTRIES:c}),n})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),v[a]=d,at({global:!0,forced:d!=f},v),fe(d,a),h||e.setStrong(d,a,c),d},ji=A.f,qi=Ui.fastKey,Vi=lt.set,Bi=lt.getterFor,Ki={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=s(t),o=u(t,e);return o?o.value=n:(i.last=o={index:r=qi(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),f?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var a=t(function(t,e){de(t,a,n),Vi(t,{type:n,index:Qt(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=e&&oe(e,t[i],{that:t,AS_ENTRIES:r})}),s=Bi(n),u=function(t,e){var n,r=s(t),t=qi(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return le(a.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e,n=s(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),f?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=s(this),r=zt(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),le(a.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),f&&ji(a.prototype,"size",{get:function(){return s(this).size}}),a},setStrong:function(t,e,n){var r=e+" Iterator",i=Bi(e),o=Bi(r);xn(t,e,function(t,e){Vi(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),pe(e)}},Sn=(s("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Ki),pt.Map,function(t){var e,n,r,i,o=arguments.length,a=1<o?arguments[1]:void 0;return Gt(this),(e=void 0!==a)&&Gt(a),null==t?new this:(n=[],e?(r=0,i=zt(a,2<o?arguments[2]:void 0,2),oe(t,function(t){n.push(i(t,r++))})):oe(t,n.push,{that:n}),new this(n))});at({target:"Map",stat:!0},{from:Sn});z=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)};at({target:"Map",stat:!0},{of:z});function Wi(){for(var t,e=m(this),n=Gt(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}at({target:"Map",proto:!0,real:!0,forced:G},{deleteAll:function(){return Wi.apply(this,arguments)}});at({target:"Map",proto:!0,real:!0,forced:G},{emplace:function(t,e){var n=m(this),e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n);return n.set(t,e),e}});function Hi(t){return Map.prototype.entries.call(t)}at({target:"Map",proto:!0,real:!0,forced:G},{every:function(t){var r=m(this),e=Hi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return!oe(e,function(t,e,n){if(!i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Map",proto:!0,real:!0,forced:G},{filter:function(t){var n=m(this),e=Hi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Ee(n,et("Map"))),o=Gt(i.set);return oe(e,function(t,e){r(e,t,n)&&o.call(i,t,e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),at({target:"Map",proto:!0,real:!0,forced:G},{find:function(t){var r=m(this),e=Hi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),at({target:"Map",proto:!0,real:!0,forced:G},{findKey:function(t){var r=m(this),e=Hi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),at({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Gt(n);var i=Gt(r.has),o=Gt(r.get),a=Gt(r.set);return oe(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):a.call(r,e,[t])}),r}});at({target:"Map",proto:!0,real:!0,forced:G},{includes:function(i){return oe(Hi(m(this)),function(t,e,n){if((r=e)===(e=i)||r!=r&&e!=e)return n();var r},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Gt(e);var r=Gt(n.set);return oe(t,function(t){r.call(n,e(t),t)}),n}}),at({target:"Map",proto:!0,real:!0,forced:G},{keyOf:function(r){return oe(Hi(m(this)),function(t,e,n){if(e===r)return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),at({target:"Map",proto:!0,real:!0,forced:G},{mapKeys:function(t){var n=m(this),e=Hi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Ee(n,et("Map"))),o=Gt(i.set);return oe(e,function(t,e){o.call(i,r(e,t,n),e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),at({target:"Map",proto:!0,real:!0,forced:G},{mapValues:function(t){var n=m(this),e=Hi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Ee(n,et("Map"))),o=Gt(i.set);return oe(e,function(t,e){o.call(i,t,r(e,t,n))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),at({target:"Map",proto:!0,real:!0,forced:G},{merge:function(t){for(var e=m(this),n=Gt(e.set),r=0;r<arguments.length;)oe(arguments[r++],n,{that:e,AS_ENTRIES:!0});return e}}),at({target:"Map",proto:!0,real:!0,forced:G},{reduce:function(n){var r=m(this),t=Hi(r),i=arguments.length<2,o=i?void 0:arguments[1];if(Gt(n),oe(t,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty map with no initial value");return o}}),at({target:"Map",proto:!0,real:!0,forced:G},{some:function(t){var r=m(this),e=Hi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Map",proto:!0,real:!0,forced:G},{update:function(t,e){var n=m(this),r=arguments.length;Gt(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");r=i?n.get(t):Gt(2<r?arguments[2]:void 0)(t,n);return n.set(t,e(r,t,n)),n}});var Gi=function(t,e){var n,r=m(this),i=2<arguments.length?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof i)throw TypeError("At least one callback required");return r.has(t)?(n=r.get(t),"function"==typeof e&&(n=e(n),r.set(t,n))):"function"==typeof i&&(n=i(),r.set(t,n)),n};at({target:"Map",proto:!0,real:!0,forced:G},{upsert:Gi}),at({target:"Map",proto:!0,real:!0,forced:G},{updateOrInsert:Gi});s("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Ki),pt.Set;at({target:"Set",stat:!0},{from:Sn}),at({target:"Set",stat:!0},{of:z});at({target:"Set",proto:!0,real:!0,forced:G},{addAll:function(){return function(){for(var t=m(this),e=Gt(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),at({target:"Set",proto:!0,real:!0,forced:G},{deleteAll:function(){return Wi.apply(this,arguments)}});function zi(t){return Set.prototype.values.call(t)}at({target:"Set",proto:!0,real:!0,forced:G},{every:function(t){var n=m(this),e=zi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3);return!oe(e,function(t,e){if(!r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Set",proto:!0,real:!0,forced:G},{difference:function(t){var e=m(this),n=new(Ee(e,et("Set")))(e),r=Gt(n.delete);return oe(t,function(t){r.call(n,t)}),n}}),at({target:"Set",proto:!0,real:!0,forced:G},{filter:function(t){var e=m(this),n=zi(e),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Ee(e,et("Set"))),o=Gt(i.add);return oe(n,function(t){r(t,t,e)&&o.call(i,t)},{IS_ITERATOR:!0}),i}}),at({target:"Set",proto:!0,real:!0,forced:G},{find:function(t){var n=m(this),e=zi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e){if(r(t,t,n))return e(t)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),at({target:"Set",proto:!0,real:!0,forced:G},{intersection:function(t){var e=m(this),n=new(Ee(e,et("Set"))),r=Gt(e.has),i=Gt(n.add);return oe(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),at({target:"Set",proto:!0,real:!0,forced:G},{isDisjointFrom:function(t){var n=m(this),r=Gt(n.has);return!oe(t,function(t,e){if(!0===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),at({target:"Set",proto:!0,real:!0,forced:G},{isSubsetOf:function(t){var e=function(t){var e=ne(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return m(e.call(t))}(this),n=m(t),r=n.has;return"function"!=typeof r&&(n=new(et("Set"))(t),r=Gt(n.has)),!oe(e,function(t,e){if(!1===r.call(n,t))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Set",proto:!0,real:!0,forced:G},{isSupersetOf:function(t){var n=m(this),r=Gt(n.has);return!oe(t,function(t,e){if(!1===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),at({target:"Set",proto:!0,real:!0,forced:G},{join:function(t){var e=m(this),n=zi(e),e=void 0===t?",":String(t),t=[];return oe(n,t.push,{that:t,IS_ITERATOR:!0}),t.join(e)}}),at({target:"Set",proto:!0,real:!0,forced:G},{map:function(t){var e=m(this),n=zi(e),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Ee(e,et("Set"))),o=Gt(i.add);return oe(n,function(t){o.call(i,r(t,t,e))},{IS_ITERATOR:!0}),i}}),at({target:"Set",proto:!0,real:!0,forced:G},{reduce:function(e){var n=m(this),t=zi(n),r=arguments.length<2,i=r?void 0:arguments[1];if(Gt(e),oe(t,function(t){i=r?(r=!1,t):e(i,t,t,n)},{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return i}}),at({target:"Set",proto:!0,real:!0,forced:G},{some:function(t){var n=m(this),e=zi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e){if(r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Set",proto:!0,real:!0,forced:G},{symmetricDifference:function(t){var e=m(this),n=new(Ee(e,et("Set")))(e),r=Gt(n.delete),i=Gt(n.add);return oe(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),at({target:"Set",proto:!0,real:!0,forced:G},{union:function(t){var e=m(this),e=new(Ee(e,et("Set")))(e);return oe(t,Gt(e.add),{that:e}),e}});var Qi=Math.floor;at({target:"Number",stat:!0},{isInteger:function(t){return!y(t)&&isFinite(t)&&Qi(t)===t}});pt.Number.isInteger;at({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});pt.Number.isNaN;var Yi=function(t,e){return(Yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Xi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Yi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ji=function(){return(Ji=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function $i(t,a,s,u){return new(s=s||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((u=u.apply(t,a||[])).next())})}function Zi(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function to(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function no(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function ro(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function io(t){try{return uo.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var oo={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ao=function(t,e){if(!t)throw so(e)},so=function(t){return new Error("Firebase Database ("+oo.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},uo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,o=(3&o)<<4|s>>4,s=(15&s)<<2|c>>6,c=63&c;u||(c=64,a||(s=64)),r.push(n[h],n[o],n[s],n[c])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ro(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,a,s=t[n++];s<128?e[r++]=String.fromCharCode(s):191<s&&s<224?(o=t[n++],e[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(i=((7&s)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],a=t[n++],e[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();o=o<<2|a>>4;r.push(o),64!==s&&(a=a<<4&240|s>>2,r.push(a),64!==u&&(u=s<<6&192|u,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function co(t){return ho(void 0,t)}function ho(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ho(t[n],e[n]));return t}var lo=(fo.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},fo);function fo(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function po(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,e=t.sub||t.user_id;if(!e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");t=Ji({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:e,user_id:e,firebase:{sign_in_provider:"custom",identities:{}}},t);return[uo.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),uo.encodeString(JSON.stringify(t),!1),""].join(".")}function vo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function go(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vo())}function yo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function mo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bo(){return!0===oo.NODE_ADMIN}function _o(){return"indexedDB"in self&&null!=indexedDB}function wo(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function Io(){return!(!navigator||!navigator.cookieEnabled)}var To,Eo="FirebaseError",So=(Xi(Co,To=Error),Co);function Co(t,e,n){e=To.call(this,e)||this;return e.code=t,e.customData=n,e.name=Eo,Object.setPrototypeOf(e,Co.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,ko.prototype.create),e}var ko=(No.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(Ao,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new So(o,t,i)},No);function No(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ao=/\{\$([^}]+)}/g;function Ro(t){return JSON.parse(t)}function Po(t){return JSON.stringify(t)}function Oo(t){var e={},n={},r={},i="";try{var o=t.split("."),e=Ro(io(o[0])||""),n=Ro(io(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Do(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Lo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mo(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Fo(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}var Uo=(jo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},jo.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],h=this.chain_[4],r=0;r<80;r++)var l=r<40?r<20?(o=c^s&(u^c),1518500249):(o=s^u^c,1859775393):r<60?(o=s&u|c&(s|u),2400959708):(o=s^u^c,3395469782),i=(a<<5|a>>>27)+o+h+l+n[r]&4294967295,h=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},jo.prototype.update=function(t,e){if(null!=t){for(var n=(e=void 0===e?t.length:e)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},jo.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},jo);function jo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function qo(t,e){e=new Vo(t,e);return e.subscribe.bind(e)}var Vo=(Bo.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},Bo.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},Bo.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},Bo.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Ko),void 0===r.error&&(r.error=Ko),void 0===r.complete&&(r.complete=Ko);n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},Bo.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Bo.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},Bo.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},Bo.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},Bo);function Bo(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function Ko(){}function Wo(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Ho(t,e){return t+" failed: "+e+" argument "}function Go(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Ho(t,e)+"must be a valid function.")}function zo(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Ho(t,e)+"must be a valid context object.")}function Qo(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var Yo=1e3,Xo=2,Jo=144e5,$o=.5;function Zo(t,e,n){void 0===n&&(n=Xo);n=(e=void 0===e?Yo:e)*Math.pow(n,t),t=Math.round($o*n*(Math.random()-.5)*2);return Math.min(Jo,n+t)}function ta(t){return t&&t._delegate?t._delegate:t}var ea=(na.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},na.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},na.prototype.setServiceProps=function(t){return this.serviceProps=t,this},na.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},na);function na(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var ra="[DEFAULT]",ia=(oa.prototype.get=function(t){void 0===t&&(t=ra);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new lo;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},oa.prototype.getImmediate=function(t){var e=Ji({identifier:ra,optional:!1},t),t=e.identifier,e=e.optional,n=this.normalizeInstanceIdentifier(t);if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(e)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(e)return null;throw t}},oa.prototype.getComponent=function(){return this.component},oa.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ra})}catch(t){}try{for(var r=to(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=eo(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},oa.prototype.clearInstance=function(t){void 0===t&&(t=ra),this.instancesDeferred.delete(t),this.instances.delete(t)},oa.prototype.delete=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(no(no([],eo(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),eo(e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return t.sent(),[2]}})})},oa.prototype.isComponentSet=function(){return null!=this.component},oa.prototype.isInitialized=function(t){return void 0===t&&(t=ra),this.instances.has(t)},oa.prototype.initialize=function(t){var e,n,r=(t=void 0===t?{}:t).instanceIdentifier,r=void 0===r?ra:r,t=t.options,t=void 0===t?{}:t,i=this.normalizeInstanceIdentifier(r);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:t});try{for(var a=to(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var u=eo(s.value,2),c=u[0],u=u[1];i===this.normalizeInstanceIdentifier(c)&&u.resolve(o)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(o,i),o},oa.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},oa.prototype.invokeOnInitCallbacks=function(t,e){var n,r;try{for(var i=to(this.onInitCallbacks),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},oa.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,t=void 0===n?{}:n,r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e)===ra?void 0:n,options:t}),this.instances.set(e,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(t){}return r||null},oa.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:ra},oa.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},oa);function oa(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}var aa=(sa.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},sa.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},sa.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ia(t,this);return this.providers.set(t,e),e},sa.prototype.getProviders=function(){return Array.from(this.providers.values())},sa);function sa(t){this.name=t,this.providers=new Map}var ua,ca=[];(Sn=ua=ua||{})[Sn.DEBUG=0]="DEBUG",Sn[Sn.VERBOSE=1]="VERBOSE",Sn[Sn.INFO=2]="INFO",Sn[Sn.WARN=3]="WARN",Sn[Sn.ERROR=4]="ERROR",Sn[Sn.SILENT=5]="SILENT";function ha(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=pa[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,no(["["+i+"]  "+t.name+":"],n))}}var la={debug:ua.DEBUG,verbose:ua.VERBOSE,info:ua.INFO,warn:ua.WARN,error:ua.ERROR,silent:ua.SILENT},fa=ua.INFO,pa=((z={})[ua.DEBUG]="log",z[ua.VERBOSE]="log",z[ua.INFO]="info",z[ua.WARN]="warn",z[ua.ERROR]="error",z),da=(Object.defineProperty(va.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ua))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),va.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?la[t]:t},Object.defineProperty(va.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(va.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),va.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ua.DEBUG],t)),this._logHandler.apply(this,no([this,ua.DEBUG],t))},va.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ua.VERBOSE],t)),this._logHandler.apply(this,no([this,ua.VERBOSE],t))},va.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ua.INFO],t)),this._logHandler.apply(this,no([this,ua.INFO],t))},va.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ua.WARN],t)),this._logHandler.apply(this,no([this,ua.WARN],t))},va.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ua.ERROR],t)),this._logHandler.apply(this,no([this,ua.ERROR],t))},va);function va(t){this.name=t,this._logLevel=fa,this._logHandler=ha,this._userLogHandler=null,ca.push(this)}function ga(e){ca.forEach(function(t){t.setLogLevel(e)})}function ya(a,e){for(var t=0,n=ca;t<n.length;t++)!function(t){var o=null;e&&e.level&&(o=la[e.level]),t.userLogHandler=null===a?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&a({level:ua[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}var Sn=((G={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",G["bad-app-name"]="Illegal App name: '{$appName}",G["duplicate-app"]="Firebase App named '{$appName}' already exists",G["app-deleted"]="Firebase App named '{$appName}' already deleted",G["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",G["invalid-log-argument"]="First argument to `onLog` must be null or a function.",G),ma=new ko("app","Firebase",Sn),ba="@firebase/app",_a="[DEFAULT]",wa=((z={})[ba]="fire-core",z["@firebase/analytics"]="fire-analytics",z["@firebase/app-check"]="fire-app-check",z["@firebase/auth"]="fire-auth",z["@firebase/database"]="fire-rtdb",z["@firebase/functions"]="fire-fn",z["@firebase/installations"]="fire-iid",z["@firebase/messaging"]="fire-fcm",z["@firebase/performance"]="fire-perf",z["@firebase/remote-config"]="fire-rc",z["@firebase/storage"]="fire-gcs",z["@firebase/firestore"]="fire-fst",z["fire-js"]="fire-js",z["firebase-wrapper"]="fire-js-all",z),Ia=new da("@firebase/app"),Ta=(Object.defineProperty(Ea.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ea.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Ea.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Ea.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Ea.prototype._getService=function(t,e){return void 0===e&&(e=_a),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Ea.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=_a),this.container.getProvider(t).clearInstance(e)},Ea.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Ia.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Ea.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Ea.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Ea.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ma.create("app-deleted",{appName:this.name_})},Ea);function Ea(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=co(t),this.container=new aa(e.name),this._addComponent(new ea("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}Ta.prototype.name&&Ta.prototype.options||Ta.prototype.delete||console.log("dc");var Sa="8.5.0";function Ca(a){var s={},u=new Map,c={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});"object"==typeof e&&null!==e||(e={name:e});var n=e;void 0===n.name&&(n.name=_a);e=n.name;if("string"!=typeof e||!e)throw ma.create("bad-app-name",{appName:String(e)});if(Do(s,e))throw ma.create("duplicate-app",{appName:e});n=new a(t,n,c);return s[e]=n},app:h,registerVersion:function(t,e,n){var r=null!==(i=wa[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t){n=['Unable to register library "'+r+'" with version "'+e+'":'];return i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Ia.warn(n.join(" "))}o(new ea(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:ga,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw ma.create("invalid-log-argument");ya(t,e)},apps:null,SDK_VERSION:Sa,INTERNAL:{registerComponent:o,removeApp:function(t){delete s[t]},components:u,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function h(t){if(!Do(s,t=t||_a))throw ma.create("no-app",{appName:t});return s[t]}function o(n){var t,r=n.name;if(u.has(r))return Ia.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?c[r]:null;u.set(r,n),"PUBLIC"===n.type&&(t=function(t){if("function"!=typeof(t=void 0===t?h():t)[r])throw ma.create("invalid-app-argument",{appName:r});return t[r]()},void 0!==n.serviceProps&&ho(t,n.serviceProps),c[r]=t,a.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])});for(var e=0,i=Object.keys(s);e<i.length;e++){var o=i[e];s[o]._addComponent(n)}return"PUBLIC"===n.type?c[r]:null}return c.default=c,Object.defineProperty(c,"apps",{get:function(){return Object.keys(s).map(function(t){return s[t]})}}),h.App=a,c}var G=function t(){var e=Ca(Ta);return e.INTERNAL=Ji(Ji({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ho(e,t)},createSubscribe:qo,ErrorFactory:ko,deepExtend:ho}),e}(),ka=(Na.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){t=t.getComponent();return"VERSION"===(null==t?void 0:t.type)}(t)){t=t.getImmediate();return t.library+"/"+t.version}return null}).filter(function(t){return t}).join(" ")},Na);function Na(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Ia.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(Qs=self.firebase.SDK_VERSION)&&0<=Qs.indexOf("LITE")&&Ia.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var Aa=G.initializeApp;G.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Ia.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Aa.apply(void 0,t)};var Ra,Pa,Xl=G;(Ra=Xl).INTERNAL.registerComponent(new ea("platform-logger",function(t){return new ka(t)},"PRIVATE")),Ra.registerVersion(ba,"0.6.21",Pa),Ra.registerVersion("fire-js","");Xl.registerVersion("firebase","8.5.0","app");!function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function a(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function s(e){return e instanceof a?e:new a(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},a.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},a.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof a)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.v(t):this.h(t)}},a.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},a.prototype.g=function(t){this.i(2,t)},a.prototype.h=function(t){this.i(1,t)},a.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},a.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return a.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},a.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},a.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new a(function(t,e){r=t,i=e});return this.Qa(n(t,r),n(e,i)),o},a.prototype.catch=function(t){return this.then(void 0,t)},a.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},a.resolve=s,a.reject=function(n){return new a(function(t,e){e(n)})},a.race=function(i){return new a(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())s(r.value).Qa(t,e)})},a.all=function(t){var e=c(t),o=e.next();return o.done?s([]):new a(function(n,t){for(var r=[],i=0;r.push(void 0),i++,s(o.value).Qa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),o=e.next(),!o.done;);})},a});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,s=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function a(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function y(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:y).apply(null,arguments)}function b(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(t){return t}function I(t,e,n){this.code=S+t,this.message=e||C[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new I(e.substring(S.length),t.message,t.serverResponse):null}_(I,Error),I.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.w()};var E,S="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},k={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in k)if(k[e].id===t)return t=k[e],{firebaseEndpoint:t.Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function R(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,R):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function O(t){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function x(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}E=N("__EID__")?"__EID__":void 0,_(R,Error),R.prototype.name="CustomError",_(P,R),P.prototype.name="AssertionError",D.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var M=new D(function(){return new F},function(t){t.reset()});function F(){this.next=this.b=this.a=null}L.prototype.add=function(t,e){var n=M.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},j=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,a="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in a&&(n=a[s],e.call(void 0,n,s,t)&&(i[o++]=n));return i},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},B=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=U(t,e)}function W(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function G(){return Array.prototype.concat.apply([],arguments)}function z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,J=/</g,$=/>/g,Z=/"/g,tt=/'/g,et=/\x00/g,nt=/[\x00&<>"']/;function rt(t,e){return-1!=t.indexOf(e)}function it(t,e){return t<e?-1:e<t?1:0}t:{var ot=l.navigator;if(ot){ot=ot.userAgent;if(ot){Q=ot;break t}}Q=""}function at(t){return rt(Q,t)}function st(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ht.length;i++)e=ht[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,n=n&&(n.defaultView||n.parentWindow);if((n=n||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(g(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function pt(t,e){this.a=t===yt&&e||"",this.b=gt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===gt?t.a:(O("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.sa=!0,pt.prototype.ra=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var vt,gt={},yt={};function mt(){if(void 0===vt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:w,createScript:w,createScriptURL:w})}catch(t){l.console&&l.console.error(t.message)}vt=t}else vt=t}return vt}function bt(t,e){this.a=e===Et?t:""}function _t(t){return t instanceof bt&&t.constructor===bt?t.a:(O("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function wt(t,n){var e,r=dt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(It,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),e=t,t=mt(),new bt(e=t?t.createScriptURL(e):e,Et)}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Et={};function St(t,e){this.a=e===Ot?t:""}function Ct(t){return t instanceof St&&t.constructor===St?t.a:(O("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}St.prototype.sa=!0,St.prototype.ra=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var kt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Nt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,At=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){return t instanceof St?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=At.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Nt))&&kt.test(e[1])?new St(t,Ot):null);var e}function Pt(t){return t instanceof St?t:(t="object"==typeof t&&t.sa?t.ra():String(t),new St(t=!At.test(t)?"about:invalid#zClosurez":t,Ot))}var Ot={},Dt=new St("about:invalid#zClosurez",Ot);function xt(t,e,n){this.a=n===Lt?t:""}xt.prototype.sa=!0,xt.prototype.ra=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Lt={};function Mt(t,e,n,r){return t=t instanceof St?t:Pt(t),e=e||l,n=n instanceof pt?dt(n):n||"",e.open(Ct(t),n,r,void 0)}function Ft(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Ut(t){return nt.test(t)&&(-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=t.indexOf("&")?t.replace(X,"&amp;"):t).indexOf("<")?t.replace(J,"&lt;"):t).indexOf(">")?t.replace($,"&gt;"):t).indexOf('"')?t.replace(Z,"&quot;"):t).indexOf("'")?t.replace(tt,"&#39;"):t).indexOf("\0")&&(t=t.replace(et,"&#0;"))),t}function jt(t){return jt[" "](t),t}jt[" "]=a;var qt,Vt=at("Opera"),Bt=at("Trident")||at("MSIE"),Kt=at("Edge"),Wt=Kt||Bt,Ht=at("Gecko")&&!(rt(Q.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Gt=rt(Q.toLowerCase(),"webkit")&&!at("Edge");function zt(){var t=l.document;return t?t.documentMode:void 0}t:{var Qt="",Yt=(Yt=Q,Ht?/rv:([^\);]+)(\)|;)/.exec(Yt):Kt?/Edge\/([\d\.]+)/.exec(Yt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Yt):Gt?/WebKit\/(\S+)/.exec(Yt):Vt?/(?:Version)[ \/]?(\S+)/.exec(Yt):void 0);if(Yt&&(Qt=Yt?Yt[1]:""),Bt){Yt=zt();if(null!=Yt&&Yt>parseFloat(Qt)){qt=String(Yt);break t}}qt=Qt}var Xt={};function Jt(s){return t=s,e=function(){for(var t=0,e=Y(String(qt)).split("."),n=Y(String(s)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",a=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],(0!=o[0].length||0!=a[0].length)&&(t=it(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||it(0==o[2].length,0==a[2].length)||it(o[2],a[2]),o=o[3],a=a[3],0==t););return 0<=t},n=Xt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var $t=l.document&&Bt&&(zt()||parseInt(qt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var Zt=!Bt||9<=Number($t);function te(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ee(n,t){st(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:ie.hasOwnProperty(e)?n.setAttribute(ie[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var ne,re,ie={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function oe(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!Zt&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Ut(i.name),'"'),i.type&&(r.push(' type="',Ut(i.type),'"'),lt(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ae(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ee(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){a="function"==typeof o.item;break t}}a=!1}j(a?z(o):o,r)}}}(n,r,e),r}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function se(t){l.setTimeout(function(){throw t},0)}function ue(t,e){re||function(){{var t;re=l.Promise&&l.Promise.resolve?(t=l.Promise.resolve(void 0),function(){t.then(le)}):function(){var t=le;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!at("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ne=ne||function(){var t=l.MessageChannel;if(void 0===(t=void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")?function(){var t=ae(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}:t)||at("Trident")||at("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Gb,n.Gb=null,t())},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}}}(),ce||(re(),ce=!0),he.add(t,e)}var ce=!1,he=new L;function le(){for(var t,e,n;n=e=void 0,n=null,(e=he).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){se(t)}x(M,t)}ce=!1}function fe(t,e){if(this.a=pe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){Se(n,de,t)},function(t){if(!(t instanceof Oe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Se(n,ve,t)})}catch(t){Se(this,ve,t)}}var pe=0,de=2,ve=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ye=new D(function(){return new ge},function(t){t.reset()});function me(t,e,n){var r=ye.get();return r.g=t,r.b=e,r.f=n,r}function be(t){if(t instanceof fe)return t;var e=new fe(a);return Se(e,de,t),e}function _e(n){return new fe(function(t,e){e(n)})}function we(t,e,n){Ce(t,e,n,null)||ue(b(e,t))}function Ie(n){return new fe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Pb:!0,value:n}:{Pb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)we(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Te(t,e){t.b||t.a!=de&&t.a!=ve||ke(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ee(t,i,o,a){var e=me(null,null,null);return e.a=new fe(function(n,r){e.g=i?function(t){try{var e=i.call(a,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(a,t);void 0===e&&t instanceof Oe?r(t):n(e)}catch(t){r(t)}}:r}),Te(e.a.c=t,e),e.a}function Se(t,e,n){var r,i;t.a==pe&&(t===n&&(e=ve,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ce(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,ke(t),e!=ve||n instanceof Oe||(i=n,(r=t).g=!0,ue(function(){r.g&&Pe.call(null,i)}))))}function Ce(t,e,n,r){if(t instanceof fe)return Te(t,me(e||a,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(g(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function ke(t){t.h||(t.h=!0,ue(t.gc,t))}function Ne(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ae(t,e,n,r){if(n==ve&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Re(e,n,r);else try{e.c?e.g.call(e.f):Re(e,n,r)}catch(t){Pe.call(null,t)}x(ye,e)}function Re(t,e,n){e==de?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}fe.prototype.then=function(t,e,n){return Ee(this,v(t)?t:null,v(e)?e:null,n)},fe.prototype.$goog_Thenable=!0,(t=fe.prototype).oa=function(t,e){return(t=me(t,t,e)).c=!0,Te(this,t),this},t.o=function(t,e){return Ee(this,null,t,e)},t.cancel=function(t){var e;this.a==pe&&(e=new Oe(t),ue(function(){!function t(e,n){if(e.a==pe)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,!((o=s.a==e?s:o)&&1<i)));s=s.next)o||(a=s);o&&(r.a==pe&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Ne(r),Ae(r,o,ve,n)))}e.c=null}else Se(e,ve,n)}(this,e)},this))},t.$c=function(t){this.a=pe,Se(this,de,t)},t.ad=function(t){this.a=pe,Se(this,ve,t)},t.gc=function(){for(var t;t=Ne(this);)Ae(this,t,this.a,this.i);this.h=!1};var Pe=se;function Oe(t){R.call(this,t)}function De(){this.xa=this.xa,this.pa=this.pa}_(Oe,R);var xe=0;function Le(t){t.xa||(t.xa=!0,t.Da(),0==xe)||(t=t,Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r))}De.prototype.xa=!(Oe.prototype.name="cancel"),De.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Me=Object.freeze||function(t){return t},Fe=!Bt||9<=Number($t),Ue=Bt&&!Jt("9"),je=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",a,e),l.removeEventListener("test",a,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ve(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ht){t:{try{jt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Be[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Ve,qe);var Be=Me({2:"touch",3:"pen",4:"mouse"});Ve.prototype.preventDefault=function(){Ve.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ue)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Ve.prototype.g=function(){return this.a};var Ke="closure_listenable_"+(1e6*Math.random()|0),We=0;function He(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++We,this.va=this.Pa=!1}function Ge(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function ze(t){this.src=t,this.a={},this.b=0}function Qe(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ge(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Ye(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}ze.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Ye(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new He(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var Xe="closure_lm_"+(1e6*Math.random()|0),Je={};function $e(t,e,n,r,i){if(r&&r.once)tn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else n=hn(n),t&&t[Ke]?fn(t,e,n,g(r)?!!r.capture:!!r,i):Ze(t,e,n,!1,r,i)}function Ze(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a,s,u=g(i)?!!i.capture:!!i,c=un(t);if(c||(t[Xe]=c=new ze(t)),!(n=c.add(e,n,r,u,o)).proxy)if(a=sn,r=s=Fe?function(t){return a.call(s.src,s.listener,t)}:function(t){if(!(t=a.call(s.src,s.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=!je?u:i)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function tn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else n=hn(n),t&&t[Ke]?pn(t,e,n,g(r)?!!r.capture:!!r,i):Ze(t,e,n,!0,r,i)}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=hn(n),t&&t[Ke]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=Ye(o=t.a[e],n,r,i))&&(Ge(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&un(t))&&(e=t.a[e.toString()],(n=(t=-1)<(t=e?Ye(e,n,r,i):t)?e[t]:null)&&nn(n))}function nn(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[Ke]?Qe(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=un(e))?(Qe(n,t),0==n.b&&(n.src=null,e[Xe]=null)):Ge(t)))}function rn(t){return t in Je?Je[t]:Je[t]="on"+t}function on(t,e,n,r){var i=!0;if((t=un(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=an(o,r),i=i&&!1!==o)}return i}function an(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&nn(t),n.call(r,e)}function sn(t,e){if(t.va)return!0;if(Fe)return an(t,new Ve(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ve(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=on(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=on(r[i],t,!1,e),n=n&&o}return n}function un(t){return(t=t[Xe])instanceof ze?t:null}var cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function hn(e){return v(e)?e:(e[cn]||(e[cn]=function(t){return e.handleEvent(t)}),e[cn])}function ln(){De.call(this),this.v=new ze(this),(this.ac=this).gb=null}function fn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function pn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function dn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.va&&u.capture==n&&(a=u.listener,s=u.Va||u.src,u.Pa&&Qe(t.v,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}function vn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function gn(n){var r=null;return new fe(function(t,e){-1==(r=vn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function yn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function mn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function bn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof bn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function _n(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];wn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)wn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(ln,De),ln.prototype[Ke]=!0,ln.prototype.addEventListener=function(t,e,n,r){$e(this,t,e,n,r)},ln.prototype.removeEventListener=function(t,e,n,r){en(this,t,e,n,r)},ln.prototype.dispatchEvent=function(t){var e;if(n=this.gb)for(e=[];n;n=n.gb)e.push(n);var n=this.ac,r=t.type||t;if("string"==typeof t?t=new qe(t,n):t instanceof qe?t.target=t.target||n:(a=t,lt(t=new qe(r,n),a)),a=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],a=dn(o,r,!0,t)&&a;if(a=dn(o=t.b=n,r,!0,t)&&a,a=dn(o,r,!1,t)&&a,e)for(i=0;i<e.length;i++)a=dn(o=t.b=e[i],r,!1,t)&&a;return a},ln.prototype.Da=function(){if(ln.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ge(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=bn.prototype).W=function(){_n(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return _n(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return wn(this.b,t)?this.b[t]:e},t.set=function(t,e){wn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var In=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Tn?(this.i=void 0!==e?e:t.i,En(this,t.c),this.l=t.l,this.a=t.a,Sn(this,t.g),this.f=t.f,Cn(this,Hn(t.b)),this.h=t.h):t&&(n=String(t).match(In))?(this.i=!!e,En(this,n[1]||"",!0),this.l=Pn(n[2]||""),this.a=Pn(n[3]||"",!0),Sn(this,n[4]),this.f=Pn(n[5]||"",!0),Cn(this,n[6]||"",!0),this.h=Pn(n[7]||"")):(this.i=!!e,this.b=new jn(null,this.i))}function En(t,e,n){t.c=n?Pn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Sn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Cn(t,e,n){var r,i;e instanceof jn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(qn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Bn(this,e),Wn(this,n,t))},r)),r.f=i):(n||(e=On(e,Fn)),t.b=new jn(e,t.i))}function kn(t,e,n){t.b.set(e,n)}function Nn(t,e){return t.b.get(e)}function An(t){return t instanceof Tn?new Tn(t):new Tn(t,void 0)}function Rn(t,e,n,r){var i=new Tn(null,void 0);return t&&En(i,t),e&&(i.a=e),n&&Sn(i,n),r&&(i.f=r),i}function Pn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function On(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Dn),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Dn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(On(e,xn,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(On(e,xn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(On(n,"/"==n.charAt(0)?Mn:Ln,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",On(n,Un)),t.join("")},Tn.prototype.resolve=function(t){var e=new Tn(this),n=!!t.c;n?En(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Sn(e,t.g);else if(n=!!t.f)if("/"!=r.charAt(0)&&(this.a&&!this.f?r="/"+r:-1!=(i=e.f.lastIndexOf("/"))&&(r=e.f.substr(0,i+1)+r)),".."==(i=r)||"."==i)r="";else if(rt(i,"./")||rt(i,"/.")){for(var r=0==i.lastIndexOf("/",0),i=i.split("/"),o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i;return n?e.f=r:n=""!==t.b.toString(),n?Cn(e,Hn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var xn=/[#\/\?@]/g,Ln=/[#\?:]/g,Mn=/[#\?]/g,Fn=/[#\?@]/g,Un=/#/g;function jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(n){n.a||(n.a=new bn,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Vn(t){var e=mn(t);if(void 0===e)throw Error("Keys are undefined");var n=new jn(null,void 0);t=yn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Wn(n,i,o):n.add(i,o)}return n}function Bn(t,e){qn(t),e=Gn(t,e),wn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,wn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&_n(t)))}function Kn(t,e){return qn(t),e=Gn(t,e),wn(t.a.b,e)}function Wn(t,e,n){Bn(t,e),0<n.length&&(t.c=null,t.a.set(Gn(t,e),z(n)),t.b+=n.length)}function Hn(t){var e=new jn;return e.c=t.c,t.a&&(e.a=new bn(t.a),e.b=t.b),e}function Gn(t,e){return e=String(e),e=t.f?e.toLowerCase():e}function zn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(a=n[i],"function"!=typeof a&&(r.push(o),Jn(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Jn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,t,e),e.join("")}function Qn(){}(t=jn.prototype).add=function(t,e){qn(this),this.c=null,t=Gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){qn(this),this.a.forEach(function(t,e){j(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){qn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){qn(this);var e=[];if("string"==typeof t)Kn(this,t)&&(e=G(e,this.a.get(Gn(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,Kn(this,t=Gn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.W(r),o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.c=t.join("&")};var Yn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Xn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Jn(t,e){e.push('"',t.replace(Xn,function(t){var e=Yn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Yn[t]=e),e}),'"')}function $n(){var t=yr();return Bt&&$t&&11==$t||/Edge\/\d+/.test(t)}function Zn(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function tr(t,e){e=e||l.window;var n="about:blank";t&&(n=Ct(Rt(t)||Dt)),e.location.href=n}function er(t){return!!((t=(t||yr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function nr(t){t=t||l.window;try{t.close()}catch(t){}}function rr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=yr().toLowerCase(),r&&(e.target=r,rt(n,"crios/")&&(e.target="_blank")),dr(yr())==fr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:Rt(void 0!==n.href?n.href:String(n))||Dt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(a=ae(document,"A"),"HTMLAnchorElement"),e=e instanceof St?e:Pt(e),a.href=Ct(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Mt("",r,n,a),t=Ct(e),a&&(Wt&&rt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">',t=new xt(t=(r=mt())?r.createHTML(t):t,0,Lt),r=a.document)&&(r.write((o=t)instanceof xt&&o.constructor===xt?o.a:(O("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(a=Mt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,or=/^[^@]+@[^@]+$/;function ar(){var e=null;return new fe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},tn(window,"load",e))}).o(function(t){throw en(window,"load",e),t})}function sr(t){return t=t||yr(),!("file:"!==Ir()&&"ionic:"!==Ir()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ur(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function cr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function hr(){return Xl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Xl.INTERNAL.hasOwnProperty("node")?"Node":cr()?"Worker":"Browser"}function lr(){var t=hr();return"ReactNative"===t||"Node"===t}var fr="Firefox",pr="Chrome";function dr(t){var e=t.toLowerCase();return rt(e,"opera/")||rt(e,"opr/")||rt(e,"opios/")?"Opera":rt(e,"iemobile")?"IEMobile":rt(e,"msie")||rt(e,"trident/")?"IE":rt(e,"edge/")?"Edge":rt(e,"firefox/")?fr:rt(e,"silk/")?"Silk":rt(e,"blackberry")?"Blackberry":rt(e,"webos")?"Webos":!rt(e,"safari/")||rt(e,"chrome/")||rt(e,"crios/")||rt(e,"android")?!rt(e,"chrome/")&&!rt(e,"crios/")||rt(e,"edge/")?rt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":pr:"Safari"}var vr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function gr(t,e){e=e||[];var n,r=[],i={};for(n in vr)i[vr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=hr())?r=dr(i=yr()):"Worker"===r&&(r=dr(i=yr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function yr(){return l.navigator&&l.navigator.userAgent||""}function mr(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return e=n!=t.length?void 0:e}function br(){try{var t=l.localStorage,e=kr();if(t)return t.setItem(e,"1"),t.removeItem(e),!$n()||!!l.indexedDB}catch(t){return cr()&&!!l.indexedDB}return!1}function _r(){return(wr()||"chrome-extension:"===Ir()||sr())&&!lr()&&br()&&!cr()}function wr(){return"http:"===Ir()||"https:"===Ir()}function Ir(){return l.location&&l.location.protocol||null}function Tr(t){return!er(t=t||yr())&&dr(t)!=fr}function Er(t){return void 0===t?null:zn(t)}function Sr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Cr(t){if(null!==t)return JSON.parse(t)}function kr(t){return t||Math.floor(1e9*Math.random()).toString()}function Nr(t){return"Safari"!=dr(t=t||yr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ar(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Rr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=yr(),e=hr(),this.b=er(t)||"ReactNative"===e}function Pr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Or(){var e=l.document,n=null;return Pr()||!e?be():new fe(function(t){n=function(){Pr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t})}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function xr(){return mr("fireauth.oauthhelper",l)||mr("fireauth.iframe",l)}Rr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!wr()&&"chrome-extension:"!==Ir()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Lr,Mr={};function Fr(t){Mr[t]||(Mr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Ur={};Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:2}),Lr=2==Ur.abcd}catch(t){Lr=!1}function jr(t,e,n){Lr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&jr(t,n,e[n])}function Vr(t){var e={};return qr(e,t),e}function Br(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)jr(e,n,Br(t[n]));return e}function Kr(t){var e=t&&(t[Qr]?"phone":null);if(!(e&&t&&t[zr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");jr(this,"uid",t[zr]),jr(this,"displayName",t[Hr]||null);var n=null;jr(this,"enrollmentTime",n=t[Gr]?new Date(t[Gr]).toUTCString():n),jr(this,"factorId",e)}function Wr(t){try{var e=new Yr(t)}catch(t){e=null}return e}Kr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Hr="displayName",Gr="enrolledAt",zr="mfaEnrollmentId",Qr="phoneInfo";function Yr(t){Kr.call(this,t),jr(this,"phoneNumber",t[Qr])}function Xr(t){var e={},n=t[ti],r=t[ni],i=t[ri];if(t=Wr(t[ei]),!i||i!=$r&&i!=Zr&&!n||i==Zr&&!r||i==Jr&&!t)throw Error("Invalid checkActionCode response!");i==Zr?(e[oi]=n||null,e[si]=n||null,e[ii]=r):(e[oi]=r||null,e[si]=r||null,e[ii]=n||null),e[ai]=t||null,jr(this,ci,i),jr(this,ui,Br(e))}_(Yr,Kr),Yr.prototype.w=function(){var t=Yr.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Jr="REVERT_SECOND_FACTOR_ADDITION",$r="EMAIL_SIGNIN",Zr="VERIFY_AND_CHANGE_EMAIL",ti="email",ei="mfaInfo",ni="newEmail",ri="requestType",ii="email",oi="fromEmail",ai="multiFactorInfo",si="previousEmail",ui="data",ci="operation";function hi(t){var e=Nn(t=An(t),li)||null,n=Nn(t,fi)||null,r=(r=Nn(t,vi)||null)&&yi[r]||null;if(!e||!n||!r)throw new I("argument-error",li+", "+fi+"and "+vi+" are required in a valid action code URL.");qr(this,{apiKey:e,operation:r,code:n,continueUrl:Nn(t,pi)||null,languageCode:Nn(t,di)||null,tenantId:Nn(t,gi)||null})}var li="apiKey",fi="oobCode",pi="continueUrl",di="languageCode",vi="mode",gi="tenantId",yi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Jr,signIn:$r,verifyAndChangeEmail:Zr,verifyEmail:"VERIFY_EMAIL"};function mi(t){try{return new hi(t)}catch(t){return null}}function bi(t){if(void 0===(e=t[Ei]))throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[_i])&&"object"==typeof r){var e=r[ki],n=r[Si],r=r[Ci];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new I("argument-error",Si+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new I("argument-error",Ci+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new I("argument-error",ki+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new I("missing-android-pkg-name")}}else if(void 0!==r)throw new I("argument-error",_i+" property must be a non null object when specified.");if(this.f=null,(e=t[Ti])&&"object"==typeof e){if("string"==typeof(e=e[Ni])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",Ni+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",Ti+" property must be a non null object when specified.");if(void 0!==(e=t[Ii])&&"boolean"!=typeof e)throw new I("argument-error",Ii+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[wi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",wi+" property must be a non empty string when specified.");this.i=t||null}var _i="android",wi="dynamicLinkDomain",Ii="handleCodeInApp",Ti="iOS",Ei="url",Si="installApp",Ci="minimumVersion",ki="packageName",Ni="bundleId";function Ai(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Ri=null;function Pi(t){var e=[];return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Ri[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Ri){Ri={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ri[o]&&(Ri[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),a=e(64),s=e(64);if(64===s&&-1===n)break;t(n<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(t,function(t){e.push(t)}),e}function Oi(t){var e=xi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Di(t){try{return new Oi(t)}catch(t){return null}}function xi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Pi(t);for(t=[],n=e=0;e<r.length;){var i,o,a,s=r[e++];s<128?t[n++]=String.fromCharCode(s):191<s&&s<224?(i=r[e++],t[n++]=String.fromCharCode((31&s)<<6|63&i)):239<s&&s<365?(a=((7&s)<<18|(63&(i=r[e++]))<<12|(63&(o=r[e++]))<<6|63&r[e++])-65536,t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))):(i=r[e++],o=r[e++],t[n++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o))}return JSON.parse(t.join(""))}catch(t){}return null}Oi.prototype.T=function(){return this.f},Oi.prototype.l=function(){return this.c},Oi.prototype.toString=function(){return this.h};var Li="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Mi=["client_id","response_type","scope","redirect_uri","state"],Fi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Mi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Mi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Mi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Li},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Ui(t){for(var e in Fi)if(Fi[e].fa==t)return Fi[e];return null}function ji(t){var e={};e["facebook.com"]=Wi,e["google.com"]=Gi,e["github.com"]=Hi,e["twitter.com"]=zi;var n=t&&t[Vi];try{if(n)return new(e[n]||Ki)(t);if(void 0!==t[qi])return new Bi(t)}catch(t){}return null}var qi="idToken",Vi="providerId";function Bi(t){var e,n=t[Vi];if(n||!t[qi]||(e=Di(t[qi]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),jr(this,"providerId",n),jr(this,"isNewUser",e)}function Ki(t){Bi.call(this,t),jr(this,"profile",Br((t=Cr(t.rawUserInfo||"{}"))||{}))}function Wi(t){if(Ki.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Hi(t){if(Ki.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",this.profile&&this.profile.login||null)}function Gi(t){if(Ki.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(Ki.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",t.screenName||null)}function Qi(t){var e=Nn(r=An(t),"link"),n=Nn(An(e),"link"),r=Nn(r,"deep_link_id");return Nn(An(r),"link")||r||n||e||t}function Yi(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Xi:Ji}_(Ki,Bi),_(Wi,Ki),_(Hi,Ki),_(Gi,Ki),_(zi,Ki);var Xi="enroll",Ji="signin";function $i(){}function Zi(t,n){return t.then(function(t){if(t[Ba]){var e=Di(t[Ba]);if(!e||n!=e.i)throw new I("user-mismatch");return t}throw new I("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==S+"user-not-found"?new I("user-mismatch"):t})}function to(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,jr(this,"providerId",t),jr(this,"signInMethod",t)}function eo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function no(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new to(t.providerId,t.pendingToken)}catch(t){}return null}function ro(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&jr(this,"idToken",e.idToken),e.accessToken&&jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");jr(this,"accessToken",e.oauthToken),jr(this,"secret",e.oauthTokenSecret)}jr(this,"providerId",t),jr(this,"signInMethod",n)}function io(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Vn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function oo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ro(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ao(t,e){this.Qc=e||[],qr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Ui(t)||{}).Ja||null,this.ob=null}function so(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');ao.call(this,t,[])}function uo(t){ao.call(this,t,Mi),this.a=[]}function co(){uo.call(this,"facebook.com")}function ho(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new co).credential({accessToken:e})}function lo(){uo.call(this,"github.com")}function fo(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new lo).credential({accessToken:e})}function po(){uo.call(this,"google.com"),this.Ca("profile")}function vo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new po).credential({idToken:n,accessToken:e})}function go(){ao.call(this,"twitter.com",Li)}function yo(t,e){var n=t;if(!(n=!g(n)?{oauthToken:t,oauthTokenSecret:e}:n).oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ro("twitter.com",n,"twitter.com")}function mo(t,e,n){this.a=t,this.f=e,jr(this,"providerId","password"),jr(this,"signInMethod",n===_o.EMAIL_LINK_SIGN_IN_METHOD?_o.EMAIL_LINK_SIGN_IN_METHOD:_o.EMAIL_PASSWORD_SIGN_IN_METHOD)}function bo(t){return t&&t.email&&t.password?new mo(t.email,t.password,t.signInMethod):null}function _o(){qr(this,{providerId:"password",isOAuthProvider:!1})}function wo(t,e){if(!(e=Io(e)))throw new I("argument-error","Invalid email link!");return new mo(t,e.code,_o.EMAIL_LINK_SIGN_IN_METHOD)}function Io(t){return(t=mi(t=Qi(t)))&&t.operation===$r?t:null}function To(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new I("internal-error");this.a=t,jr(this,"providerId","phone"),this.fa="phone",jr(this,"signInMethod","phone")}function Eo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return j(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new To(n)}return null}function So(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Co(t){try{this.a=t||Xl.auth()}catch(t){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}qr(this,{providerId:"phone",isOAuthProvider:!1})}function ko(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new To({eb:t,cb:e})}function No(t){if(t.temporaryProof&&t.phoneNumber)return new To({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return vo(o,n);case"facebook.com":return ho(n);case"github.com":return fo(n);case"twitter.com":return yo(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new to(e,a):new ro(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new uo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ao(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function Ro(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Po(t){return(t=t||{}).type?new Ro(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function Oo(){this.b=null,this.a=[]}Yi.prototype.Ha=function(){return this.a?be(this.a):be(this.b)},Yi.prototype.w=function(){return this.type==Xi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},$i.prototype.ka=function(){},$i.prototype.b=function(){},$i.prototype.c=function(){},$i.prototype.w=function(){},to.prototype.ka=function(t){return hs(t,eo(this))},to.prototype.b=function(t,e){var n=eo(this);return n.idToken=e,ls(t,n)},to.prototype.c=function(t,e){return Zi(fs(t,eo(this)),e)},to.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ro.prototype.ka=function(t){return hs(t,io(this))},ro.prototype.b=function(t,e){var n=io(this);return n.idToken=e,ls(t,n)},ro.prototype.c=function(t,e){return Zi(fs(t,io(this)),e)},ro.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ao.prototype.Ka=function(t){return this.Ib=ct(t),this},_(so,ao),_(uo,ao),uo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},uo.prototype.Qb=function(){return z(this.a)},uo.prototype.credential=function(t,e){e=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!e.idToken&&!e.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new ro(this.providerId,e,this.providerId)},_(co,uo),jr(co,"PROVIDER_ID","facebook.com"),jr(co,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(lo,uo),jr(lo,"PROVIDER_ID","github.com"),jr(lo,"GITHUB_SIGN_IN_METHOD","github.com"),_(po,uo),jr(po,"PROVIDER_ID","google.com"),jr(po,"GOOGLE_SIGN_IN_METHOD","google.com"),_(go,ao),jr(go,"PROVIDER_ID","twitter.com"),jr(go,"TWITTER_SIGN_IN_METHOD","twitter.com"),mo.prototype.ka=function(t){return this.signInMethod==_o.EMAIL_LINK_SIGN_IN_METHOD?zs(t,_s,{email:this.a,oobCode:this.f}):zs(t,Bs,{email:this.a,password:this.f})},mo.prototype.b=function(t,e){return this.signInMethod==_o.EMAIL_LINK_SIGN_IN_METHOD?zs(t,ws,{idToken:e,email:this.a,oobCode:this.f}):zs(t,xs,{idToken:e,email:this.a,password:this.f})},mo.prototype.c=function(t,e){return Zi(this.ka(t),e)},mo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},qr(_o,{PROVIDER_ID:"password"}),qr(_o,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),qr(_o,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),To.prototype.ka=function(t){return t.fb(So(this))},To.prototype.b=function(t,e){var n=So(this);return n.idToken=e,zs(t,Ws,n)},To.prototype.c=function(t,e){var n=So(this);return n.operation="REAUTH",Zi(t=zs(t,Hs,n),e)},To.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Co.prototype.fb=function(r,i){var o=this.a.a;return be(i.verify()).then(function(n){if("string"!=typeof n)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=g(r)?r.session:null,e=g(r)?r.phoneNumber:r,t=t&&t.type==Xi?t.Ha().then(function(t){return zs(o,Ms,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Ji?t.Ha().then(function(t){return e=o,t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},zs(e,Fs,t).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):zs(o,Os,{phoneNumber:e,recaptchaToken:n});return t.then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},qr(Co,{PROVIDER_ID:"phone"}),qr(Co,{PHONE_SIGN_IN_METHOD:"phone"}),Ro.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ro.prototype.T=function(){return this.h},Ro.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Do,xo=null;function Lo(t){var e="unauthorized-domain",n=void 0,r=An(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function Mo(t,e,n){I.call(this,t,n),(t=e||{}).Jb&&jr(this,"email",t.Jb),t.ea&&jr(this,"phoneNumber",t.ea),t.credential&&jr(this,"credential",t.credential),t.Zb&&jr(this,"tenantId",t.Zb)}function Fo(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:No(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new Mo(e,n,t.message)}return null}function Uo(){}function jo(t){return t.c||(t.c=t.b())}function qo(){}function Vo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Bo(){}function Ko(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.qc,this),this.a.onerror=m(this.Sb,this),this.a.onprogress=m(this.rc,this),this.a.ontimeout=m(this.vc,this)}function Wo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ho(t,e,n){this.reset(t,e,n,void 0,void 0)}function Go(t){this.f=t,this.b=this.c=this.a=null}function zo(t,e){this.name=t,this.value=e}_(Lo,I),_(Mo,I),Mo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&lt(t,e),t},Mo.prototype.toJSON=function(){return this.w()},Uo.prototype.c=null,_(qo,Uo),qo.prototype.a=function(){var t=Vo(this);return t?new ActiveXObject(t):new XMLHttpRequest},qo.prototype.b=function(){var t={};return Vo(this)&&(t[0]=!0,t[1]=!0),t},Do=new qo,_(Bo,Uo),Bo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ko;throw Error("Unsupported browser")},Bo.prototype.b=function(){return{}},(t=Ko.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Wo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Wo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Wo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ho.prototype.a=null,Ho.prototype.reset=function(t,e,n,r,i){delete this.a},zo.prototype.toString=function(){return this.name};var Qo=new zo("SEVERE",1e3),Yo=new zo("WARNING",900),Xo=new zo("CONFIG",700),Jo=new zo("FINE",500);Go.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(O("Root logger has no level set."),null))}(this).value)for(v(e)&&(e=e()),t=new Ho(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var $o,Zo={},ta=null;function ea(t){var e,n,r;return ta||(ta=new Go(""),(Zo[""]=ta).c=Xo),(e=Zo[t])||(e=new Go(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=ea(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Zo[t]=e),e}function na(t,e){t&&t.log(Jo,e,void 0)}function ra(t){this.f=t}function ia(t){ln.call(this),this.u=t,this.h=void 0,this.readyState=oa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ea("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(ra,Uo),ra.prototype.a=function(){return new ia(this.f)},ra.prototype.b=($o={},function(){return $o}),_(ia,ln);var oa=0;function aa(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function sa(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ua(t)}function ua(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ca(t){ln.call(this),this.headers=new bn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ha,this.u=this.S=!1}(t=ia.prototype).open=function(t,e){if(this.readyState!=oa)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ua(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,sa(this)),this.readyState=oa},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ua(this)),this.a&&(this.readyState=3,ua(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,aa(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?sa:ua)(this),3==this.readyState&&aa(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,sa(this))},t.sc=function(t){this.a&&(this.response=t,sa(this))},t.Ua=function(t){var e=this.i;e&&e.log(Yo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&sa(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Yo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Yo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}for(var t=[],e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ia.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),_(ca,ln);var ha="";ca.prototype.b=ea("goog.net.XhrIo");var la=/^https?$/i,fa=["POST","PUT"];function pa(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=(e.D||Do).a(),e.C=e.D?jo(e.D):jo(Do),e.a.onreadystatechange=m(e.Vb,e);try{na(e.b,Ia(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return na(e.b,Ia(e,"Error opening Xhr: "+t.message)),void va(e,t)}t=r||"";var o,a=new bn(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)j(t,e,void 0);else for(var n=mn(t),r=yn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){a.set(e,t)}),i=function(t){t:{for(var e=da,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(a.Y()),r=l.FormData&&t instanceof l.FormData,!K(fa,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{ba(e),0<e.g&&(e.u=(o=e.a,Bt&&Jt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),na(e.b,Ia(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ma,e)):e.s=vn(e.Ma,e.g,e)),na(e.b,Ia(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){na(e.b,Ia(e,"Send error: "+t.message)),va(e,t)}}function da(t){return"content-type"==t.toLowerCase()}function va(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ga(t),ma(t)}function ga(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ya(e){if(e.c&&void 0!==h)if(e.C[1]&&4==_a(e)&&2==wa(e))na(e.b,Ia(e,"Local request error detected and ignored"));else if(e.i&&4==_a(e))vn(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==_a(e)){na(e.b,Ia(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=wa(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break t;default:a=!1}if((t=a)||((n=0===o)&&(!(i=String(e.l).match(In)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!la.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<_a(e)?e.a.statusText:""}catch(t){na(e.b,"Can not get status: "+t.message),s=""}e.h=s+" ["+wa(e)+"]",ga(e)}}finally{ma(e)}}}function ma(e,t){if(e.a){ba(e);var n=e.a,r=e.C[0]?a:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Qo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function ba(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function _a(t){return t.a?t.a.readyState:0}function wa(t){try{return 2<_a(t)?t.a.status:-1}catch(t){return-1}}function Ia(t,e){return e+" ["+t.R+" "+t.l+" "+wa(t)+"]"}function Ta(t){var e=xa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ea(t,e,n){t.a=!0,t.c=n,t.f=!e,Na(t)}function Sa(t){if(t.a){if(!t.v)throw new Aa;t.v=!1}}function Ca(t,e,n,r){t.g.push([e,n,r]),t.a&&Na(t)}function ka(t){return B(t.g,function(t){return v(t[1])})}function Na(e){var n;e.h&&e.a&&ka(e)&&(r=e.h,(n=Oa[r])&&(l.clearTimeout(n.a),delete Oa[r]),e.h=0),e.b&&(e.b.l--,delete e.b);for(var r=e.c,t=n=!1;e.g.length&&!e.i;){var i=(a=e.g.shift())[0],o=a[1],a=a[2];if(i=e.f?o:i)try{var s=i.call(a||e.s,r);void 0!==s&&(e.f=e.f&&(s==r||s instanceof Error),e.c=r=s),(A(r)||"function"==typeof l.Promise&&r instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){r=t,e.f=!0,ka(e)||(n=!0)}}e.c=r,t&&(s=m(e.m,e,!0),t=m(e.m,e,!1),r instanceof Ta?(Ca(r,s,t),r.C=!0):r.then(s,t)),n&&(r=new Pa(r),Oa[r.a]=r,e.h=r.a)}function Aa(){R.call(this)}function Ra(){R.call(this)}function Pa(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=ca.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",na(this.b,Ia(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(na(this.b,Ia(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ma(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ma(this,!0)),ca.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?ya(this):this.Jc())},t.Jc=function(){ya(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ha:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Qo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return na(this.b,"Can not get response: "+t.message),null}},Ta.prototype.cancel=function(t){var e;this.a?this.c instanceof Ta&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ra,Sa(this),Ea(this,!1,t)))},Ta.prototype.m=function(t,e){this.i=!1,Ea(this,t,e)},Ta.prototype.then=function(t,e,n){var r,i,o=new fe(function(t,e){r=t,i=e});return Ca(this,r,function(t){t instanceof Ra?o.cancel():i(t)}),o.then(t,e,n)},Ta.prototype.$goog_Thenable=!0,_(Aa,R),Aa.prototype.message="Deferred has already fired",Aa.prototype.name="AlreadyCalledError",_(Ra,R),Ra.prototype.message="Deferred was canceled",Ra.prototype.name="CanceledError",Pa.prototype.c=function(){throw delete Oa[this.a],this.b};var Oa={};function Da(t){var e=document,n=_t(t).toString(),r=ae(document,"SCRIPT"),i={Wb:r,Ma:void 0},o=new Ta(i),a=window.setTimeout(function(){La(r,!0);var t=new Ua(Fa,"Timeout reached for loading script "+n);Sa(o),Ea(o,!1,t)},5e3);return i.Ma=a,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(La(r,!1,a),Sa(o),Ea(o,!0,null))},r.onerror=function(){La(r,!0,a);var t=new Ua(Ma,"Error while loading script "+n);Sa(o),Ea(o,!1,t)},lt(i={},{type:"text/javascript",charset:"UTF-8"}),ee(r,i),i=t,ft(t=r,"HTMLScriptElement"),t.src=_t(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):s=null===s?f(l.document):s)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function xa(){var t;this&&this.Wb&&((t=this.Wb)&&"SCRIPT"==t.tagName&&La(t,!0,this.Ma))}function La(t,e,n){null!=n&&l.clearTimeout(n),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ma=0,Fa=1;function Ua(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function ja(t){this.f=t}function qa(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ka,this.g=ct(t.secureTokenHeaders||Wa),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ha,this.a=ct(t.firebaseHeaders||Ga),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==hr(),!(n=l.XMLHttpRequest||n&&Xl.INTERNAL.node&&Xl.INTERNAL.node.XMLHttpRequest)&&!cr())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,cr()?this.f=new ra(self):lr()?this.f=new ja(n):this.f=new Bo,this.b=null}_(Ua,R),_(ja,Uo),ja.prototype.a=function(){return new this.f},ja.prototype.b=function(){return{}};var Va,Ba="idToken",Ka=new Rr(3e4,6e4),Wa={"Content-Type":"application/x-www-form-urlencoded"},Ha=new Rr(3e4,6e4),Ga={"Content-Type":"application/json"};function za(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Qa(t,e){e&&(t.l=Ya("https://securetoken.googleapis.com/v1/token",e),t.h=Ya("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ya("https://identitytoolkit.googleapis.com/v2/",e))}function Ya(t,e){return t=An(t),e=An(e.url),t.f=t.a+t.f,En(t,e.c),t.a=e.a,Sn(t,e.g),t.toString()}function Xa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Ja(t,e,n,r,i,o,a){var s;(t=((s=dr(s=yr())==pr&&(s=s.match(/\sChrome\/(\d+)/i))&&2==s.length?parseInt(s[1],10):null)&&s<30||Bt&&$t&&!(9<$t))&&!cr()?(Va=Va||new fe(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(l[Za]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},function(t,e){Ca(t,null,e,void 0)}(Da(wt($a,{onload:Za})),function(){r(Error("CORS_UNSUPPORTED"))}))}),m(t.s,t)):m(t.u,t))(e,n,r,i,o,a)}qa.prototype.T=function(){return this.b},qa.prototype.u=function(t,n,e,r,i,o){if(cr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a,s=new ca(this.f);o&&(s.g=Math.max(0,o),a=setTimeout(function(){s.dispatchEvent("timeout")},o)),fn(s,"complete",function(){a&&clearTimeout(a);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return na(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),pn(s,"ready",function(){a&&clearTimeout(a),Le(this)}),pn(s,"timeout",function(){a&&clearTimeout(a),Le(this),n&&n(null)}),pa(s,t,e,r,i)};var $a=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),Za="__fcb"+Math.floor(1e6*Math.random()).toString();function ts(t,e,n,r,i,o,a){var s=An(e+n);kn(s,"key",t.c),a&&kn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&kn(s,c,i[c]);return new fe(function(e,n){Ja(t,s.toString(),function(t){t?t.error?n(Ys(t,o||{})):e(t):n(new I("network-request-failed"))},r,u?void 0:zn(Sr(i)),t.a,t.v.get())})}function es(t){if("string"!=typeof(t=t.email)||!or.test(t))throw new I("invalid-email")}function ns(t){"email"in t&&es(t)}function rs(t){if(!t[Ba]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ct(t));throw new I("internal-error")}}function is(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}qa.prototype.s=function(t,n,r,i,o){var a=this;Va.then(function(){window.gapi.client.setApiKey(a.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},qa.prototype.zb=function(){return zs(this,Ls,{})},qa.prototype.Bb=function(t,e){return zs(this,Ds,{idToken:t,email:e})},qa.prototype.Cb=function(t,e){return zs(this,xs,{idToken:t,password:e})};var os={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function as(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function ss(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function us(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Kn(t=new jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function cs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Fo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Fo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Fo(t)):t.errorMessage&&(e=Qs(t.errorMessage)),e)throw e;rs(t)}function hs(t,e){return e.returnIdpCredential=!0,zs(t,Us,e)}function ls(t,e){return e.returnIdpCredential=!0,zs(t,qs,e)}function fs(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,zs(t,js,e)}function ps(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=qa.prototype).Db=function(t,r){var i={idToken:t},o=[];return st(os,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),zs(this,Ds,i)},t.vb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),zs(this,Ns,t)},t.wb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),zs(this,Ss,t)},t.ub=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),zs(this,Cs,t)},t.Eb=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),zs(this,ks,t)},t.fb=function(t){return zs(this,Ks,t)},t.nb=function(t,e){return zs(this,Ps,{oobCode:t,newPassword:e})},t.Ra=function(t){return zs(this,vs,{oobCode:t})},t.jb=function(t){return zs(this,ds,{oobCode:t})};var ds={endpoint:"setAccountInfo",A:ps,Z:"email",B:!0},vs={endpoint:"resetPassword",A:ps,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},B:!0},gs={endpoint:"signupNewUser",A:function(t){if(es(t),!t.password)throw new I("weak-password")},G:rs,V:!0,B:!0},ys={endpoint:"createAuthUri",B:!0},ms={endpoint:"deleteAccount",N:["idToken"]},bs={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new I("internal-error")}},_s={endpoint:"emailLinkSignin",N:["email","oobCode"],A:es,G:rs,V:!0,B:!0},ws={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:es,G:rs,V:!0},Is={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:as,G:rs,B:!0,Na:!0},Ts={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:as,G:rs,B:!0,Na:!0},Es={endpoint:"getAccountInfo"},Ss={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");es(t)},Z:"email",B:!0},Cs={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},ks={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},Ns={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");es(t)},Z:"email",B:!0},As={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Rs={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Ps={endpoint:"resetPassword",A:ps,Z:"email",B:!0},Os={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ds={endpoint:"setAccountInfo",N:["idToken"],A:ns,V:!0},xs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ns(t),!t.password)throw new I("weak-password")},G:rs,V:!0},Ls={endpoint:"signupNewUser",G:rs,V:!0,B:!0},Ms={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Fs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Us={endpoint:"verifyAssertion",A:ss,Ya:us,G:cs,V:!0,B:!0},js={endpoint:"verifyAssertion",A:ss,Ya:us,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw Qs(t.errorMessage);rs(t)},V:!0,B:!0},qs={endpoint:"verifyAssertion",A:function(t){if(ss(t),!t.idToken)throw new I("internal-error")},Ya:us,G:cs,V:!0},Vs={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new I("invalid-custom-token")},G:rs,V:!0,B:!0},Bs={endpoint:"verifyPassword",A:function(t){if(es(t),!t.password)throw new I("wrong-password")},G:rs,V:!0,B:!0},Ks={endpoint:"verifyPhoneNumber",A:is,G:rs,B:!0},Ws={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new I("internal-error");is(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Fo(t);rs(t)}},Hs={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:is,G:rs,B:!0},Gs={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ba]^!!t.refreshToken)throw new I("internal-error")},B:!0,Na:!0};function zs(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.N))return _e(new I("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return be(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ts(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new I("internal-error");return r[e.Z]})}function Qs(t){return Ys({error:{errors:[{message:t}],code:400,message:t}})}function Ys(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new I(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",lt(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new I(i[n],e);return new I("internal-error",e=!e&&t?Er(t):e)}function Xs(t){var o;this.b=t,this.a=null,this.rb=(o=this,(tu=tu||new fe(function(t,e){function n(){Ar(),mr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ar(),e(Error("Network Error"))},timeout:$s.get()})}var r;mr("gapi.iframes.Iframe")?t():mr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){mr("gapi.load")?n():e(Error("Network Error"))},be(Da(r=wt(Js,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw tu=null,t})).then(function(){return new fe(function(r,i){mr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Zs.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Js=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),$s=new Rr(3e4,6e4),Zs=new Rr(5e3,15e3),tu=null;function eu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Rn((t=An(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Rn("https",this.l,null,"/__/auth/iframe"),this.a=t,kn(this.a,"apiKey",this.h),kn(this.a,"appName",this.i),this.b=null,this.c=[]}function nu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function ru(t){try{return Xl.app(t).auth().Ga()}catch(t){return[]}}function iu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function ou(t){var s=Zn();return zs(t,As,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=An(s)).c,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,a=e;if(o=0==i.indexOf("chrome-extension://")?An(i).a==o&&"chrome-extension"==a:("http"==a||"https"==a)&&(ir.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Lo(Zn())})}function au(i){return i.m||(i.m=ar().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=ru(i.b),(r=new eu(i.s,i.g,i.b,i.f)).f=t,r.b=e,r.c=z(n||[]),i.u=r.toString()),i.v=new Xs(i.u),function(r){if(!r.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.v,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Po(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",be(e)}return e.status="ERROR",be(e)})}(i)}),i.m)}function su(t){return t.l||(t.C=t.c?gr(t.c,ru(t.b)):null,t.l=new qa(t.g,N(t.i),t.C),t.f&&Qa(t.l,t.f)),t.l}function uu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new nu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=ct(u||null),t.f=c,t.yb(h).toString()}function cu(t){if(this.a=t||Xl.INTERNAL.reactNative&&Xl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function hu(t){this.b=t,this.a={},this.f=m(this.c,this)}eu.prototype.toString=function(){return this.f?kn(this.a,"v",this.f):Bn(this.a.b,"v"),this.b?kn(this.a,"eid",this.b):Bn(this.a.b,"eid"),this.c.length?kn(this.a,"fw",this.c.join(",")):Bn(this.a.b,"fw"),this.a.toString()},nu.prototype.yb=function(t){return this.h=t,this},nu.prototype.toString=function(){var t;if(kn(t=this.v?Rn((t=An(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):Rn("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),kn(t,"appName",this.c),kn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Xl.app(this.c).auth().la()}catch(t){n=null}for(r in e.ob=n,kn(t,"providerId",this.a.providerId),e=Sr((n=this.a).Ib))e[r]=e[r].toString();for(var r=n.Qc,e=ct(e),i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),ut(e)||kn(t,"customParameters",Er(e))}if("function"==typeof this.a.Qb&&((n=this.a.Qb()).length&&kn(t,"scopes",n.join(","))),this.l?kn(t,"redirectUrl",this.l):Bn(t.b,"redirectUrl"),this.g?kn(t,"eventId",this.g):Bn(t.b,"eventId"),this.i?kn(t,"v",this.i):Bn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Nn(t,a)&&kn(t,a,this.b[a]);return this.h?kn(t,"tid",this.h):Bn(t.b,"tid"),this.f?kn(t,"eid",this.f):Bn(t.b,"eid"),(a=ru(this.c)).length&&kn(t,"fw",a.join(",")),t.toString()},(t=iu.prototype).Ob=function(e,n,t){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,a=!1;return this.ma().then(function(){var t,r;r={type:"webStorageSupport"},au(t=o).then(function(){return e=t.v,n=r,e.rb.then(function(){return new fe(function(t){e.a.send(n.type,n,t,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&nr(e),n(i),a=!0)})}).o(function(){}).then(function(){if(!a)return n=e,new fe(function(e){return function t(){gn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!a)return gn(t).then(function(){n(r)})})},t.Xb=function(){var t=yr();return!Tr(t)&&!Nr(t)},t.Tb=function(){return!1},t.Mb=function(e,t,n,r,i,o,a,s){if(!e)return _e(new I("popup-blocked"));if(a&&!Tr())return this.ma().o(function(t){nr(e),i(t)}),r(),be();this.a||(this.a=ou(su(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw nr(e),i(t),t});return r(),t}).then(function(){Ao(n),a||tr(uu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=ou(su(this)));var i=this;return this.a.then(function(){Ao(e),tr(uu(i.s,i.g,i.b,t,e,Zn(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return au(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new I("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(e){H(this.h,function(t){return t==e})},(t=cu.prototype).get=function(t){return be(this.a.getItem(t)).then(function(t){return t&&Cr(t)})},t.set=function(t,e){return be(this.a.setItem(t,Er(e)))},t.U=function(t){return be(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var lu,fu=[];function pu(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function du(t){this.a=t}function vu(t){this.c=t,this.b=!1,this.a=[]}function gu(r,t,e,n){var i,o,a,s,u=e||{},c=null;if(r.b)return _e(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new fe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return yu(r,c),t}).o(function(t){throw yu(r,c),t})}function yu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,function(t){return t==e}))}function mu(){if(!Iu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;cr()&&self?(this.v=(n=cr()?self:null,j(fu,function(t){t.b==n&&(e=t)}),e||(e=new hu(n),fu.push(e)),e),pu(this.v,"keyChanged",function(t,n){return ku(r).then(function(e){return 0<e.length&&j(r.a,function(t){t(e)}),{keyProcessed:K(e,n.key)}})}),pu(this.v,"ping",function(){return be(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?be().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):be(null)).then(function(t){(r.h=t)&&(r.g=new vu(new du(t)),gu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&K(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function bu(i){return new fe(function(e,n){var t=i.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new fe(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return bu(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function _u(t){return t.i||(t.i=bu(t)),t.i}function wu(i,t){var o=0;return new fe(function e(n,r){_u(i).then(t).then(n).o(function(t){return 3<++o?void r(t):_u(i).then(function(t){return t.close(),i.i=void 0,e(n,r)}).o(function(t){r(t)})})})}function Iu(){try{return l.indexedDB}catch(t){return}}function Tu(t){return t.objectStore("firebaseLocalStorage")}function Eu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Su(t){return new fe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Cu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?gu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):be();var n}function ku(r){return _u(r).then(function(t){var i=Tu(Eu(t,!1));return i.getAll?Su(i.getAll()):new fe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Nu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Au(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=be().then(function(){if(Iu()){var e=kr(),n="__sak"+e;return lu=lu||new mu,(i=lu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.U(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){j(r.a,function(t){t(e)})}),t})}function Ru(){this.a={},this.type="inMemory"}function Pu(){if(!function(){var t="Node"==hr();if(!(t=Ou()||t&&Xl.INTERNAL.node&&Xl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==hr())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Ou()||Xl.INTERNAL.node.localStorage,this.type="localStorage"}function Ou(){try{var t=l.localStorage,e=kr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Du(){this.type="nullStorage"}function xu(){if(!function(){var t="Node"==hr();if(!(t=Lu()||t&&Xl.INTERNAL.node&&Xl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==hr())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Lu()||Xl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Lu(){try{var t=l.sessionStorage,e=kr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Mu(){var t={};t.Browser=ju,t.Node=qu,t.ReactNative=Vu,t.Worker=Bu,this.a=t[hr()]}hu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],j(t,function(t){e.push(be().then(function(){return t(n.origin,n.data.data)}))}),Ie(e).then(function(t){var e=[];j(t,function(t){e.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),j(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},du.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},vu.prototype.close=function(){for(;0<this.a.length;)yu(this,this.a[0]);this.b=!0},(t=mu.prototype).set=function(r,i){var o=this,a=!1;return wu(this,function(t){return Su((t=Tu(Eu(t,!0))).get(r))}).then(function(n){return wu(o,function(t){if(t=Tu(Eu(t,!0)),n)return n.value=i,Su(t.put(n));o.b++,a=!0;var e={};return e.fbase_key=r,e.value=i,Su(t.add(e))})}).then(function(){return o.c[r]=i,Cu(o,r)}).oa(function(){a&&o.b--})},t.get=function(e){return wu(this,function(t){return Su(Tu(Eu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.U=function(e){var n=this,r=!1;return wu(this,function(t){return r=!0,n.b++,Su(Tu(Eu(t,!0)).delete(e))}).then(function(){return delete n.c[e],Cu(n,e)}).oa(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(Nu(n=this),function e(){n.f=setTimeout(function(){n.l=ku(n).then(function(e){0<e.length&&j(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){H(this.a,function(t){return t==e}),0==this.a.length&&Nu(this)},(t=Au.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.U=function(e){return this.b.then(function(t){return t.U(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){H(this.a,function(t){return t==e})},(t=Ru.prototype).get=function(t){return be(this.a[t])},t.set=function(t,e){return this.a[t]=e,be()},t.U=function(t){return delete this.a[t],be()},t.ca=function(){},t.ia=function(){},(t=Pu.prototype).get=function(t){var e=this;return be().then(function(){return Cr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Er(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&$e(l.window,"storage",t)},t.ia=function(t){l.window&&en(l.window,"storage",t)},(t=Du.prototype).get=function(){return be(null)},t.set=function(){return be()},t.U=function(){return be()},t.ca=function(){},t.ia=function(){},(t=xu.prototype).get=function(t){var e=this;return be().then(function(){return Cr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Er(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Fu,Uu,ju={F:Pu,bb:xu},qu={F:Pu,bb:xu},Vu={F:cu,bb:Du},Bu={F:Pu,bb:Du},Ku={rd:"local",NONE:"none",td:"session"};function Wu(){var t=!(Nr(yr())||!ur()),e=Tr(),n=br();this.m=t,this.h=e,this.l=n,this.a={},t=Fu=Fu||new Mu;try{this.g=!$n()&&xr()||!l.indexedDB?new t.a.F:new Au(new(cr()?Ru:t.a.F))}catch(t){this.g=new Ru,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Ru}this.v=new Ru,this.f=m(this.Yb,this),this.b={}}function Hu(){return Uu=Uu||new Wu}function Gu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function zu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Qu(t,e,n){return n=zu(e,n),"local"==e.F&&(t.b[n]=null),Gu(t,e.F).U(n)}function Yu(t){t.c&&(clearInterval(t.c),t.c=null)}function Xu(t){this.a=t,this.b=Hu()}(t=Wu.prototype).get=function(t,e){return Gu(this,t.F).get(zu(t,e))},t.set=function(e,t,n){var r=zu(e,n),i=this,o=Gu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=zu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(Gu(this,"local").ca(this.f),this.h||($n()||!xr())&&l.indexedDB||!this.l||(Yu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Ve({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Yb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=zu(t,e),this.a[t]&&(H(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(Gu(this,"local").ia(this.f),Yu(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Gu(this,"local").ia(this.f):Yu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.mb(e))};Bt&&$t&&10==$t&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else j(t,m(this.mb,this))},t.mb=function(t){this.a[t]&&j(this.a[t],function(t){t()})};var Ju,$u={name:"authEvent",F:"local"};function Zu(){this.a=Hu()}function tc(t,e){this.b=ec,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Ju&&(Ju=l.Int32Array?new Int32Array(uc):uc),this.reset()}_(tc,function(){this.b=-1});for(var ec=64,nc=ec-1,rc=[],ic=0;ic<nc;ic++)rc[ic]=0;var oc=G(128,rc);function ac(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){var i=0|n[e-15],r=0|n[e-2],o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|Ju[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function sc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ac(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ac(t),i=0)}}t.c=i,t.g+=n}tc.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):z(this.h)};var uc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function cc(){tc.call(this,8,hc)}_(cc,tc);var hc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function lc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new Zu,this.g=new Xu(this.h),this.f=null,this.b=[],this.a=this.c=null}function fc(t){return new I("invalid-cordova-configuration",t)}function pc(t){var e=new cc;sc(e,t),t=[];var n=8*e.g;e.c<56?sc(e,oc,56-e.c):sc(e,oc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ac(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function dc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function vc(s){return s.f||(s.f=s.ma().then(function(){return new fe(function(n){function e(r){t=!0,a&&a.cancel(),gc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,n=(e=-1!=(n=Qi(r.url)).indexOf("/__/auth/callback")?(e="object"==typeof(e=Cr(Nn(e=An(n),"firebaseError")||null))?T(e):null)?new Ro(t.c,t.b,null,null,e,null,t.T()):new Ro(t.c,t.b,n,t.f,null,null,t.T()):e)||o),dc(i,n)})}var i,o,t,a,r;s.Ea(function t(e){return n(e),s.Sa(t),!1}),i=s,o=new Ro("unknown",null,null,null,new I("no-auth-event")),t=!1,a=gn(500).then(function(){return gc(i).then(function(){t||dc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(mr("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},xo=xo||new Oo,function(t){var n=xo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=mr("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),s.f}function gc(e){var t,n=null;return(t=e.g).b.get($u,t.a).then(Po).then(function(t){return n=t,Qu((t=e.g).b,$u,t.a)}).then(function(){return n})}function yc(t){this.a=t,this.b=Hu()}(t=lc.prototype).ma=function(){return this.Ia||(this.Ia=(sr(void 0)?ar().then(function(){return new fe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):_e(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof mr("universalLinks.subscribe",l))throw fc("cordova-universal-links-plugin-fix is not installed");if(void 0===mr("BuildInfo.packageName",l))throw fc("cordova-plugin-buildinfo is not installed");if("function"!=typeof mr("cordova.plugins.browsertab.openUrl",l))throw fc("cordova-plugin-browsertab is not installed");if("function"!=typeof mr("cordova.InAppBrowser.open",l))throw fc("cordova-plugin-inappbrowser is not installed")},function(){throw new I("cordova-not-ready")}))},t.Ob=function(t,e){return e(new I("operation-not-supported-in-this-environment")),be()},t.Mb=function(){return _e(new I("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return _e(new I("redirect-operation-pending"));var i=this,o=l.document,a=null,s=null,u=null,c=null;return this.c=be().then(function(){return Ao(e),vc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Ro(t,r,null,o,new I("no-auth-event"),null,i),s=mr("BuildInfo.packageName",l);if("string"!=typeof s)throw new I("invalid-cordova-configuration");var u=mr("BuildInfo.displayName",l),c={};if(yr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!yr().toLowerCase().match(/android/))return _e(new I("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=pc(o),c.sessionId=o;var h=uu(n.v,n.i,n.l,t,e,null,r,n.m,c,n.u,i,n.s);return n.ma().then(function(){var t=n.h;return n.C.a.set($u,a.w(),t)}).then(function(){var t=mr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new I("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=mr("cordova.plugins.browsertab.openUrl",l)))throw new I("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=mr("cordova.InAppBrowser.open",l)))throw new I("invalid-cordova-configuration");t=yr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new fe(function(e,t){s=function(){var t=mr("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),u=function(){a=a||gn(2e3).then(function(){t(new I("redirect-cancelled-by-user"))})},c=function(){Pr()&&u()},o.addEventListener("resume",u,!1),yr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return gc(i).then(function(){throw t})})}).oa(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Sa(s),i.c=null})},t.Ea=function(e){this.b.push(e),vc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Ro("unknown",null,null,null,new I("no-auth-event")),e(t))})},t.Sa=function(e){H(this.b,function(t){return t==e})};var mc={name:"pendingRedirect",F:"session"};function bc(t){return Qu(t.b,mc,t.a)}function _c(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Lc,this.C=new qc,this.g=new yc(Dc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=wc(this.D,this.v,this.m,E,this.J)}function wc(t,e,n,r,i){var o=Xl.SDK_VERSION||null;return new(sr()?lc:iu)(t,e,n,o,r,i)}function Ic(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.ma().o(function(t){throw e.a==n&&e.reset(),t})}function Tc(n){n.a.Xb()&&Ic(n).o(function(t){var e=new Ro("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Ac(t)&&n.s(e)}),n.a.Tb()||Mc(n.b)}function Ec(n,t){K(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(mc,t.a).then(function(t){return"pending"==t}).then(function(t){t?bc(n.g).then(function(){Ic(n).o(function(t){var e=new Ro("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Ac(t)&&n.s(e)})}):Tc(n)}).o(function(){Tc(n)})}function Sc(t,e){H(t.h,function(t){return t==e})}_c.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=wc(this.D,this.v,this.m,null,this.J),this.i={}},_c.prototype.s=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Mc(this.b),e};var Cc=new Rr(2e3,1e4),kc=new Rr(3e4,6e4);function Nc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,a)}function Ac(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Rc(e,t,n,r,i){var o,a;return(a=e.g).b.set(mc,"pending",a.a).then(function(){return e.a.Nb(t,n,r,i).o(function(t){if(Ac(t))throw new I("operation-not-supported-in-this-environment");return o=t,bc(e.g).then(function(){throw o})}).then(function(){return e.a.$b()?new fe(function(){}):bc(e.g).then(function(){return e.qa()}).then(function(){}).o(function(){})})})}function Pc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},Cc.get())}_c.prototype.qa=function(){return this.b.qa()};var Oc={};function Dc(t,e,n){return t=t+":"+e,t=n?t+":"+n.url:t}function xc(t,e,n,r){var i=Dc(e,n,r);return Oc[i]||(Oc[i]=new _c(t,e,n,r)),Oc[i]}function Lc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Mc(t){t.g||(t.g=!0,jc(t,!1,null,null))}function Fc(t){t.g&&!t.i&&jc(t,!1,null,null)}function Uc(t,e){if(t.b=function(){return be(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function jc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return _e(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Uc(t,n):Uc(t,{user:null}),t.f=[],t.c=[]}function qc(){}function Vc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Bc(t,e){this.a=e,jr(this,"verificationId",t)}function Kc(t,e,n,r){return new Co(t).fb(e,n).then(function(t){return new Bc(t,r)})}function Wc(t){var e=xi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");qr(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Hc(t,e,n){var r=e&&e[zc];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Yi(null,r),this.b=[];var i=this;j(e[Gc]||[],function(t){(t=Wr(t))&&i.b.push(t)}),jr(this,"auth",this.a),jr(this,"session",this.c),jr(this,"hints",this.b)}Lc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Lc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(jc(this,!0,null,t.a),be()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then(function(t){jc(e,s,t,null)}).o(function(t){jc(e,s,null,t)})}(this,t,e):_e(new I("invalid-auth-event")):(jc(this,!1,null,null),be())):_e(new I("invalid-auth-event"))},Lc.prototype.qa=function(){var i=this;return new fe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new I("timeout"),n.a&&n.a.cancel(),n.a=gn(kc.get()).then(function(){n.b||(n.g=!0,jc(n,!0,null,r))}))})},qc.prototype.h=function(t,e){var n,r,i,o,a;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),be()):e.Fa(n,r)?(i=e,o=(t=t).b,a=t.c,i.Fa(a,o)(t.g,t.f,t.T(),t.i).then(function(t){i.na(a,t,null,o)}).o(function(t){i.na(a,null,t,o)})):_e(new I("invalid-auth-event"))):_e(new I("invalid-auth-event"))},Bc.prototype.confirm=function(t){return t=ko(this.verificationId,t),this.a(t)};var Gc="mfaInfo",zc="mfaPendingCredential";function Qc(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new Hc(t,e,n),jr(this,"resolver",this.b)}function Yc(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Qc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Xc(){}function Jc(t){jr(this,"factorId",t.fa),this.a=t}function $c(t){if(Jc.call(this,t),this.a.fa!=Co.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Zc(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function th(t,e){this.a=t,this.b=[],this.c=m(this.yc,this),$e(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&j(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[zr]=t.uid),t.displayName&&(n[Hr]=t.displayName),t.enrollmentTime&&(n[Gr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Qr]=t.phoneNumber);try{e=new Yr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),eh(this,r)}function eh(t,e){t.b=e,jr(t,"enrolledFactors",e)}function nh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function rh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function ih(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function oh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function ah(t,e){t.b=Di(e[Ba]||""),t.a=e.refreshToken,oh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function sh(e,t){return r=e.f,i=t,new fe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Ja(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ys(t)):t.access_token&&t.refresh_token?e(t):n(new I("internal-error")):n(new I("network-request-failed"))},"POST",Vn(i).toString(),r.g,r.m.get()):n(new I("internal-error"))}).then(function(t){return e.b=Di(t.access_token),e.a=t.refresh_token,oh(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function uh(t,e){this.a=t||null,this.b=e||null,qr(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function ch(t,e,n,r,i,o){qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function hh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=Xl.SDK_VERSION?gr(Xl.SDK_VERSION):null;this.a=new qa(this.l,N(E),i),t.emulatorConfig&&Qa(this.a,t.emulatorConfig),this.b=new ih(this.a),mh(this,e[Ba]),ah(this.b,e),jr(this,"refreshToken",this.b.a),wh(this,n||{}),ln.call(this),this.R=!1,this.s&&_r()&&(this.i=xc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=(r=this,new nh(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=r.b.c-Date.now()-3e5;return 0<t?t:0})),this.aa=m(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Qa(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){ph(o,t.f)},this.ba=null,this.O=new th(this,n),jr(this,"multiFactor",this.O)}function lh(t,e){t.ja&&en(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&$e(e,"languageCodeChanged",t.Oa)}function fh(t,e){t.X&&en(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&$e(e,"emulatorConfigChanged",t.Aa)}function ph(t,e){t.$=e,Xa(t.a,Xl.SDK_VERSION?gr(Xl.SDK_VERSION,t.$):null)}function dh(t,e){t.ba&&en(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&$e(e,"frameworkChanged",t.Ba)}function vh(e){try{return Xl.app(e.m).auth()}catch(t){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function gh(t){t.D||t.u.b||(t.u.start(),en(t,"tokenChanged",t.aa),$e(t,"tokenChanged",t.aa))}function yh(t){en(t,"tokenChanged",t.aa),t.u.stop()}function mh(t,e){t.za=e,jr(t,"_lat",e)}function bh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ie(e).then(function(){return t})}function _h(t){t.i&&!t.R&&(t.R=!0,Ec(t.i,t))}function wh(t,e){qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new uh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ih(){}function Th(t){return be().then(function(){if(t.D)throw new I("app-deleted")})}function Eh(t){return V(t.providerData,function(t){return t.providerId})}function Sh(t,e){e&&(Ch(t,e.providerId),t.providerData.push(e))}function Ch(t,e){H(t.providerData,function(t){return t.providerId==e})}function kh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&jr(t,e,n)}function Nh(e,t){var n,r;e!=t&&(qr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?jr(e,"metadata",new uh((r=t.metadata).a,r.b)):jr(e,"metadata",new uh),j(t.providerData,function(t){Sh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,n.c=r.c,jr(e,"refreshToken",e.b.a),eh(e.O,t.O.b))}function Ah(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,zs((e=i).a,Es,{idToken:n}).then(m(e.Kc,e)).then(function(){return r||kh(i,"isAnonymous",!1),t})})}function Rh(t,e){e[Ba]&&t.za!=e[Ba]&&(ah(t.b,e),t.dispatchEvent(new Zc("tokenChanged")),mh(t,e[Ba]),kh(t,"refreshToken",t.b.a))}function Ph(t,e){return Ah(t).then(function(){if(K(Eh(t),e))return bh(t).then(function(){throw new I("provider-already-linked")})})}function Oh(t,e,n){return Vr({user:t,credential:No(e),additionalUserInfo:e=ji(e),operationType:n})}function Dh(t,e){return Rh(t,e),t.reload().then(function(){return t})}function xh(n,r,t,e,i){if(!_r())return _e(new I("operation-not-supported-in-this-environment"));if(n.h&&!i)return _e(n.h);var o=Ui(t.providerId),a=kr(n.uid+":::"),s=null,u=rr(s=(!Tr()||ur())&&n.s&&t.isOAuthProvider?uu(n.s,n.l,n.m,r,t,null,a,Xl.SDK_VERSION||null,null,null,n.tenantId):s,o&&o.ua,o&&o.ta);return e=e().then(function(){if(Mh(n),!i)return n.I().then(function(){})}).then(function(){return Nc(n.i,u,r,t,a,!!s,n.tenantId)}).then(function(){return new fe(function(t,e){n.na(r,null,new I("cancelled-popup-request"),n.g||null),n.f=t,n.C=e,n.g=a,n.c=Pc(n.i,n,r,u,a)})}).then(function(t){return u&&nr(u),t?Vr(t):null}).o(function(t){throw u&&nr(u),t}),Fh(n,e,i)}function Lh(e,t,n,r,i){if(!_r())return _e(new I("operation-not-supported-in-this-environment"));if(e.h&&!i)return _e(e.h);var o=null,a=kr(e.uid+":::");return r=r().then(function(){if(Mh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=a,bh(e)}).then(function(t){return t=e.ha?(t=e.ha).b.set(qh,e.w(),t.a):t}).then(function(){return Rc(e.i,t,n,a,e.tenantId)}).o(function(t){if(o=t,e.ha)return Vh(e.ha);throw o}).then(function(){if(o)throw o}),Fh(e,r,i)}function Mh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Fh(n,t,e){var r,i=(t=t,e=e,(r=n).h&&!e?(t.cancel(),_e(r.h)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Zc("userInvalidated")),r.h=t),t}));return n.J.push(i),i.oa(function(){W(n.J,i)}),i.o(function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Yc(t.w(),vh(n),m(n.jc,n)):e)||t})}function Uh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ba]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new hh(e,n,t);return t.providerData&&j(t.providerData,function(t){t&&Sh(i,Vr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function jh(t){this.a=t,this.b=Hu()}Hc.prototype.Rc=function(t){var n=this;return t.sb(this.a.a,this.c).then(function(t){var e=ct(n.f);return delete e[Gc],delete e[zc],lt(e,t),n.g(e)})},_(Qc,I),Xc.prototype.sb=function(t,e,n){return e.type==Xi?(o=this,a=t,s=n,e.Ha().then(function(t){return t={idToken:t},void 0!==s&&(t.displayName=s),lt(t,{phoneVerificationInfo:So(o.a)}),zs(a,Is,t)})):(r=this,i=t,e.Ha().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:So(r.a)}),zs(i,Ts,t)}));var r,i,o,a,s},_(Jc,Xc),_($c,Jc),_(Zc,qe),(t=th.prototype).yc=function(t){var e;eh(this,(t=t.hd,e=[],j(t.mfaInfo||[],function(t){(t=Wr(t))&&e.push(t)}),e))},t.Rb=function(){return this.a.I().then(function(t){return new Yi(t,null)})},t.fc=function(e,n){var r=this,i=this.a.a;return this.Rb().then(function(t){return e.sb(i,t,n)}).then(function(t){return Rh(r.a,t),r.a.reload()})},t.bd=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return zs(e,Gs,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return eh(n,e),Rh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.w()})}}},nh.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=gn(rh(n,t)).then(Or).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},nh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ih.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ih.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?_e(new I("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?sh(this,{grant_type:"refresh_token",refresh_token:this.a}):be(null):be({accessToken:this.b.toString(),refreshToken:this.a})},uh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(hh,ln),hh.prototype.wa=function(t){this.ya=t,za(this.a,t)},hh.prototype.la=function(){return this.ya},hh.prototype.Ga=function(){return z(this.$)},hh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},jr(hh.prototype,"providerId","firebase"),(t=hh.prototype).reload=function(){var t=this;return Fh(this,Th(this).then(function(){return Ah(t).then(function(){return bh(t)}).then(Ih)}))},t.oc=function(t){return this.I(t).then(function(t){return new Wc(t)})},t.I=function(t){var e=this;return Fh(this,Th(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.za&&(mh(e,t.accessToken),e.dispatchEvent(new Zc("tokenChanged"))),kh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");wh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?V(e,function(t){return new ch(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Sh(this,n[r]);kh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Zc("userReloaded",{hd:t}))},t.Lc=function(t){return Fr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Fh(this,t.c(this.a,this.uid).then(function(t){return Rh(e,t),n=Oh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Fr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(e){var n=this,r=null;return Fh(this,Ph(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Oh(n,t,"link"),Dh(n,t)}).then(function(){return r}))},t.Dc=function(t,e){var n=this;return Fh(this,Ph(this,"phone").then(function(){return Kc(vh(n),t,e,m(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Fh(this,be().then(function(){return Kc(vh(n),t,e,m(n.tb,n))}),!0)},t.Bb=function(e){var n=this;return Fh(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return Rh(n,t),n.reload()}))},t.ed=function(e){var n=this;return Fh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Rh(n,t),n.reload()}))},t.Cb=function(e){var n=this;return Fh(this,this.I().then(function(t){return n.a.Cb(t,e)}).then(function(t){return Rh(n,t),n.reload()}))},t.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Th(this);var n=this;return Fh(this,this.I().then(function(t){return n.a.Db(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Rh(n,t),kh(n,"displayName",t.displayName||null),kh(n,"photoURL",t.photoUrl||null),j(n.providerData,function(t){"password"===t.providerId&&(jr(t,"displayName",n.displayName),jr(t,"photoURL",n.photoURL))}),bh(n)}).then(Ih))},t.cd=function(e){var n=this;return Fh(this,Ah(this).then(function(t){return K(Eh(n),e)?zs(n.a,bs,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return j(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),j(Eh(n),function(t){e[t]||Ch(n,t)}),e[Co.PROVIDER_ID]||jr(n,"phoneNumber",null),bh(n)}):bh(n).then(function(){throw new I("no-such-provider")})}))},t.delete=function(){var e=this;return Fh(this,this.I().then(function(t){return zs(e.a,ms,{idToken:t})}).then(function(){e.dispatchEvent(new Zc("userDeleted"))})).then(function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");lh(e,null),fh(e,null),dh(e,null),e.J=[],e.D=!0,yh(e),jr(e,"refreshToken",null),e.i&&Sc(e.i,e)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Lb,this):null},t.Ec=function(t){var e=this;return xh(this,"linkViaPopup",t,function(){return Ph(e,t.providerId).then(function(){return bh(e)})},!1)},t.Nc=function(t){return xh(this,"reauthViaPopup",t,function(){return be()},!0)},t.Fc=function(t){var e=this;return Lh(this,"linkViaRedirect",t,function(){return Ph(e,t.providerId)},!1)},t.Oc=function(t){return Lh(this,"reauthViaRedirect",t,function(){return be()},!0)},t.Kb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return ls(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Oh(i,t,"link"),Dh(i,t)}).then(function(){return o}),Fh(this,t)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Fh(this,be().then(function(){return Zi(fs(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Oh(i,t,"reauthenticate"),Rh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(e){var n=this,r=null;return Fh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:Ai(new bi(e))}).then(function(t){return n.a.ub(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Eb=function(e,n){var r=this,i=null;return Fh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:Ai(new bi(n))}).then(function(t){return r.a.Eb(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Fh(this,t=Zi(be(t),n.uid).then(function(t){return e=Oh(n,t,"reauthenticate"),Rh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&lt(e,this.metadata.w()),j(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.w()),e};var qh={name:"redirectUser",F:"session"};function Vh(t){return Qu(t.b,qh,t.a)}function Bh(t){var e,n,r,i;this.a=t,this.b=Hu(),this.c=null,this.f=(n=Hh("local"),r=Hh("session"),i=Hh("none"),function(n,r,i){var o=zu(r,i),a=Gu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=Cr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=a.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Wh,e.a).then(function(t){return t?Hh(t):n})})})}).then(function(t){return e.c=t,Kh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Hh("local"),this.a,m(this.g,this))}function Kh(t,e){var n,s,r=[];for(n in Ku)Ku[n]!==e&&r.push(Qu(t.b,Hh(Ku[n]),t.a));return r.push(Qu(t.b,Wh,t.a)),s=r,new fe(function(n,e){var r=s.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},a=0;a<s.length;a++)we(s[a],b(t,a),o);else n(i)})}Bh.prototype.g=function(){var e=this,n=Hh("local");Yh(this,function(){return be().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Kh(e,"local").then(function(){e.c=n})})})};var Wh={name:"persistence",F:"session"};function Hh(t){return{name:"authUser",F:t}}function Gh(t,e){return Yh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function zh(t){return Yh(t,function(){return Qu(t.b,t.c,t.a)})}function Qh(t,e,n){return Yh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Uh(t||{})})})}function Yh(t,e){return t.f=t.f.then(e,e),t.f}function Xh(t){if(this.l=!1,jr(this,"settings",new Vc),jr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new I("invalid-api-key");var n,e,r,i,o,a;t=Xl.SDK_VERSION?gr(Xl.SDK_VERSION):null,this.a=new qa(this.app.options&&this.app.options.apiKey,N(E),t),this.R=[],this.s=[],this.O=[],this.hb=Xl.INTERNAL.createSubscribe(m(this.zc,this)),this.X=void 0,this.bc=Xl.INTERNAL.createSubscribe(m(this.Ac,this)),rl(this,null),this.i=new Bh(this.app.options.apiKey+":"+this.app.name),this.D=new jh(this.app.options.apiKey+":"+this.app.name),this.$=ul(this,(e=(n=this).app.options.authDomain,t=function(e){var t=function(t,e){return t.b.get(qh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Uh(t||{})})}(e.D,e.app.options.authDomain).then(function(t){return(e.m=t)&&(t.ha=e.D),Vh(e.D)});return ul(e,t)}(n).then(function(){return Qh(n.i,e,n.P)}).then(function(e){return e?(e.ha=n.D,n.m&&(n.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Gh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:zh(n.i)})):null}).then(function(t){rl(n,t||null)}),ul(n,t))),this.h=ul(this,(r=this).$.then(function(){return el(r)}).o(function(){}).then(function(){if(!r.l)return r.ja()}).o(function(){}).then(function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(Hh("local"),t.a,r.ja))})),this.ba=!1,this.ja=m(this.Zc,this),this.Ba=m(this.da,this),this.ya=m(this.mc,this),this.za=m(this.wc,this),this.Aa=m(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,a=i.app.options.apiKey,o&&_r()&&(i.Oa=i.$.then(function(){var t;if(!i.l)return i.b=xc(o,a,i.app.name,i.P),Ec(i.b,i),ol(i)&&_h(ol(i)),i.m&&(_h(i.m),(t=i.m).wa(i.la()),lh(t,i),ph(t=i.m,i.J),dh(t,i),Qa((t=i.m).a,i.P),fh(t,i),i.m=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Gc,this),this.u=0,ln.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return t=this.P?Vr({protocol:(t=An(this.P.url)).c,host:t.a,port:t.g,options:Vr({disableWarnings:this.P.ec})}):null},enumerable:!1}),this.J=[],this.P=null}function Jh(t){qe.call(this,"languageCodeChanged"),this.h=t}function $h(t){qe.call(this,"emulatorConfigChanged"),this.c=t}function Zh(t){qe.call(this,"frameworkChanged"),this.f=t}function tl(t){return t.Oa||_e(new I("auth-domain-config-required"))}function el(t){if(!_r())return _e(new I("operation-not-supported-in-this-environment"));var e=tl(t).then(function(){return t.b.qa()}).then(function(t){return t?Vr(t):null});return ul(t,e)}function nl(o,a){var s={};return s.apiKey=o.app.options.apiKey,s.authDomain=o.app.options.authDomain,s.appName=o.app.name,o.P&&(s.emulatorConfig=o.P),o.$.then(function(){return t=s,e=a,n=o.D,r=o.Ga(),i=new hh(t,e),n&&(i.ha=n),r&&ph(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return ol(o)&&t.uid==ol(o).uid?Nh(ol(o),t):(rl(o,t),_h(t)),o.da(t)}).then(function(){sl(o)})}function rl(t,e){var n,r;ol(t)&&(n=ol(t),r=t.Ba,H(n.S,function(t){return t==r}),en(ol(t),"tokenChanged",t.ya),en(ol(t),"userDeleted",t.za),en(ol(t),"userInvalidated",t.Aa),yh(ol(t))),e&&(e.S.push(t.Ba),$e(e,"tokenChanged",t.ya),$e(e,"userDeleted",t.za),$e(e,"userInvalidated",t.Aa),0<t.u&&gh(e)),jr(t,"currentUser",e),e&&(e.wa(t.la()),lh(e,t),ph(e,t.J),dh(e,t),Qa(e.a,t.P),fh(e,t))}function il(n,t){var e=null,r=null;return ul(n,t.then(function(t){return e=No(t),r=ji(t),nl(n,t)},function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Yc(t.w(),n,m(n.kc,n)):e)||t}).then(function(){return Vr({user:ol(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function ol(t){return t.currentUser}function al(t){return ol(t)&&ol(t)._lat||null}function sl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](al(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](al(t))}}function ul(t,e){return t.R.push(e),e.oa(function(){W(t.R,e)}),e}function cl(){}function hl(){this.a={},this.b=1e12}Bh.prototype.xb=function(e){var n=null,r=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Ku)if(Ku[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(hr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Iu()&&"none"!==t)throw n;break;default:if(!br()&&"none"!==t)throw n}}(e),Yh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Kh(r,e)}).then(function(){if(r.c=Hh(e),n)return r.b.set(r.c,n,r.a)}):be()})},_(Xh,ln),_(Jh,qe),_($h,qe),_(Zh,qe),(t=Xh.prototype).xb=function(t){return t=this.i.xb(t),ul(this,t)},t.wa=function(t){this.aa===t||this.l||(this.aa=t,za(this.a,this.aa),this.dispatchEvent(new Jh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,n=e,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!n&&ar().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.P={url:t,ec:e},this.settings.ib=!0,Qa(this.a,this.P),this.dispatchEvent(new $h(this.P))}var n},t.Gc=function(t){this.J.push(t),Xa(this.a,Xl.SDK_VERSION?gr(Xl.SDK_VERSION,this.J):null),this.dispatchEvent(new Zh(this.J))},t.Ga=function(){return z(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:ol(this)&&ol(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return il(i,hs(i.a,o))})},t.Xc=function(e){if(!_r())return _e(new I("operation-not-supported-in-this-environment"));var n=this,t=Ui(e.providerId),r=kr(),i=null,o=rr(i=(!Tr()||ur())&&this.app.options.authDomain&&e.isOAuthProvider?uu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Xl.SDK_VERSION||null,null,null,this.T(),this.P):i,t&&t.ua,t&&t.ta);return ul(this,t=tl(this).then(function(t){return Nc(t,o,"signInViaPopup",e,r,!!i,n.T())}).then(function(){return new fe(function(t,e){n.na("signInViaPopup",null,new I("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=r,n.c=Pc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&nr(o),t?Vr(t):null}).o(function(t){throw o&&nr(o),t}))},t.Yc=function(t){if(!_r())return _e(new I("operation-not-supported-in-this-environment"));var e=this;return ul(this,tl(this).then(function(){return Yh(t=e.i,function(){return t.b.set(Wh,t.c.F,t.a)});var t}).then(function(){return Rc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var e=this;return el(this).then(function(t){return e.b&&Fc(e.b.b),t}).o(function(t){throw e.b&&Fc(e.b.b),t})},t.dd=function(t){if(!t)return _e(new I("null-user"));if(this.S!=t.tenantId)return _e(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,a,s,u=(r=t,i=n,o=e.D,a=e.Ga(),s=r.b,(n={})[Ba]=s.b&&s.b.toString(),n.refreshToken=s.a,i=new hh(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),a&&ph(i,a),Nh(i,r),i);return ul(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return ol(e)&&t.uid==ol(e).uid?(Nh(ol(e),t),e.da(t)):(rl(e,u),_h(u),e.da(u))}).then(function(){sl(e)}))},t.Ab=function(){var t=this,e=this.h.then(function(){return t.b&&Fc(t.b.b),ol(t)?(rl(t,null),zh(t.i).then(function(){sl(t)})):be()});return ul(this,e)},t.Zc=function(){var r=this;return Qh(this.i,this.app.options.authDomain).then(function(t){if(!r.l){var e,n;if((e=ol(r)&&t)&&(e=ol(r).uid,n=t.uid,e=null!=e&&""!==e&&null!=n&&""!==n&&e==n),e)return Nh(ol(r),t),ol(r).I();(ol(r)||t)&&(rl(r,t),t&&(_h(t),t.ha=r.D),r.b&&Ec(r.b,r),sl(r))}})},t.da=function(t){return Gh(this.i,t)},t.mc=function(){sl(this),this.da(ol(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return il(e,be(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(ol(e))})},t.Ac=function(t){var e,n,r=this;n=function(){t.next(ol(r))},(e=this).O.push(n),ul(e,e.h.then(function(){!e.l&&K(e.O,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n(al(e)))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(ol(r)):"function"==typeof t.next&&t.next(ol(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(ol(r)):"function"==typeof t.next&&t.next(ol(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this,n=this.h.then(function(){return ol(e)?ol(e).I(t).then(function(t){return{accessToken:t}}):null});return ul(this,n)},t.Tc=function(t){var n=this;return this.h.then(function(){return il(n,zs(n.a,Vs,{token:t}))}).then(function(t){var e=t.user;return kh(e,"isAnonymous",!1),n.da(e),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return il(n,zs(n.a,Bs,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return il(n,zs(n.a,gs,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return il(e,t.ka(e.a))})},t.Sc=function(t){return Fr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var n=this;return this.h.then(function(){var t=ol(n);if(t&&t.isAnonymous){var e=Vr({providerId:null,isNewUser:!1});return Vr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return il(n,n.a.zb()).then(function(t){var e=t.user;return kh(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return ol(this)&&ol(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ol(this)&&gh(ol(this))},t.Pc=function(e){var n=this;j(this.s,function(t){t==e&&n.u--}),this.u<0&&(this.u=0),0==this.u&&ol(this)&&yh(ol(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ul(this,this.h.then(function(){e.l||K(e.s,t)&&t(al(e))}))},t.removeAuthTokenListener=function(e){H(this.s,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Hh("local"),t.a,this.ja),this.b&&(Sc(this.b,this),Fc(this.b.b)),Promise.resolve()},t.hc=function(t){return ul(this,zs(this.a,ys,{identifier:t,continueUri:wr()?Zn():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Bc=function(t){return!!Io(t)},t.wb=function(e,n){var r=this;return ul(this,be().then(function(){var t=new bi(n);if(!t.c)throw new I("argument-error",Ii+" must be true when sending sign in link to email");return Ai(t)}).then(function(t){return r.a.wb(e,t)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return ul(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return ul(this,this.a.Ra(t).then(function(t){return new Xr(t)}))},t.jb=function(t){return ul(this,this.a.jb(t).then(function(){}))},t.vb=function(e,t){var n=this;return ul(this,be().then(function(){return void 0===t||ut(t)?{}:Ai(new bi(t))}).then(function(t){return n.a.vb(e,t)}).then(function(){}))},t.Wc=function(t,e){return ul(this,Kc(this,t,e,m(this.$a,this)))},t.Vc=function(n,r){var i=this;return ul(this,be().then(function(){var t=r||Zn(),e=wo(n,t);if(!(t=Io(t)))throw new I("argument-error","Invalid email link!");if(t.tenantId!==i.T())throw new I("tenant-id-mismatch");return i.$a(e)}))},cl.prototype.render=function(){},cl.prototype.reset=function(){},cl.prototype.getResponse=function(){},cl.prototype.execute=function(){};var ll=null;function fl(t,e){return(e=pl(e))&&t.a[e]||null}function pl(t){return(t=void 0===t?1e12:t)?t.toString():null}function dl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=te(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():$e(this.f,"click",this.i)}function vl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function gl(){}function yl(){}hl.prototype.render=function(t,e){return this.a[this.b.toString()]=new dl(t,e),this.b++},hl.prototype.reset=function(t){var e=fl(this,t);t=pl(t),e&&t&&(e.delete(),delete this.a[t])},hl.prototype.getResponse=function(t){return(t=fl(this,t))?t.getResponse():null},hl.prototype.execute=function(t){(t=fl(this,t))&&t.execute()},dl.prototype.getResponse=function(){return vl(this),this.b},dl.prototype.execute=function(){vl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},dl.prototype.delete=function(){vl(this),this.g=!0,clearTimeout(this.a),this.a=null,en(this.f,"click",this.i)},jr(gl,"FACTOR_ID","phone"),yl.prototype.g=function(){return be(ll=ll||new hl)},yl.prototype.c=function(){};var ml=null;function bl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var _l=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),wl=new Rr(3e4,6e4);bl.prototype.g=function(i){var o=this;return new fe(function(t,e){var r=setTimeout(function(){e(new I("network-request-failed"))},wl.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new I("internal-error"))),delete l[o.a]},be(Da(wt(_l,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},bl.prototype.c=function(){this.b--};var Il=null;function Tl(t,e,n,r,i,o,a){if(jr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a=a?ml=ml||new yl:Il=Il||new bl,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Cl])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[kl],!l.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!te(e)||!this.i&&te(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new qa(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var u=this.a[El];this.a[El]=function(t){var e;Nl(s,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=mr(u,l))&&e(t)};var c=this.a[Sl];this.a[Sl]=function(){var t;Nl(s,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=mr(c,l))&&t()}}var El="callback",Sl="expired-callback",Cl="sitekey",kl="size";function Nl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Al(t,e){return t.h.push(e),e.oa(function(){W(t.h,e)}),e}function Rl(t){if(t.D)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function Pl(t,e,n){var r=!1;try{this.b=n||Xl.app()}catch(t){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Xl.SDK_VERSION?gr(Xl.SDK_VERSION,o):null,Tl.call(this,n,t,e,function(){try{var e=i.b.auth().la()}catch(t){e=null}return e},o,N(E),r)}function Ol(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Dl.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Dl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=Tl.prototype).Ia=function(){var e=this;return this.f||(this.f=Al(this,be().then(function(){if(wr()&&!cr())return ar();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,zs(e.s,Rs,{})}).then(function(t){e.a[Cl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t})))},t.render=function(){Rl(this);var n=this;return Al(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.v,n.i||(t=te(e),e=oe("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Rl(this);var i=this;return Al(this,this.render().then(function(e){return new fe(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,H(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Rl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Rl(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=te(this.v);for(;t=e.firstChild;)e.removeChild(t)}},_(Pl,Tl);var Dl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function xl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Ll(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Ml(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Fl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Ul(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function jl(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ka||!e)}}}function ql(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}}function Vl(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Bl(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Kl(t){return g(t)&&"string"==typeof t.uid}function Wl(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Hl(e,n,t,r){return{name:t||"",K:e.K+" or "+n.K,optional:!!r,M:function(t){return e.M(t)||n.M(t)}}}function Gl(t,e){for(var n in e){var r=e[n].name;t[r]=Yl(r,t[n],e[n].j)}}function zl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){Ol(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Ql(t,e,n,r){t[e]=Yl(e,n,r)}function Yl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Ol(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Gl(Xh.prototype,{jb:{name:"applyActionCode",j:[xl("code")]},Ra:{name:"checkActionCode",j:[xl("code")]},nb:{name:"confirmPasswordReset",j:[xl("code"),xl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[xl("email"),xl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[xl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[xl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Hl(Ml(),Fl(),"nextOrObserver"),Fl("opt_error",!0),Fl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Hl(Ml(),Fl(),"nextOrObserver"),Fl("opt_error",!0),Fl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[xl("email"),Hl(Ml("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[xl("email"),Ml("actionCodeSettings")]},xb:{name:"setPersistence",j:[xl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[jl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[jl()]},Tc:{name:"signInWithCustomToken",j:[xl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[xl("email"),xl("password")]},Vc:{name:"signInWithEmailLink",j:[xl("email"),xl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[xl("phoneNumber"),Wl()]},Xc:{name:"signInWithPopup",j:[Vl()]},Yc:{name:"signInWithRedirect",j:[Vl()]},dd:{name:"updateCurrentUser",j:[Hl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof hh)}},Ul(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[xl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[xl("url"),Ml("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[xl("code")]}}),zl(Xh.prototype,{lc:{name:"languageCode",kb:Hl(xl(),Ul(),"languageCode")},ti:{name:"tenantId",kb:Hl(xl(),Ul(),"tenantId")}}),(Xh.Persistence=Ku).LOCAL="local",Xh.Persistence.SESSION="session",Xh.Persistence.NONE="none",Gl(hh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Ll("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ll("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[jl()]},qb:{name:"linkWithCredential",j:[jl()]},Dc:{name:"linkWithPhoneNumber",j:[xl("phoneNumber"),Wl()]},Ec:{name:"linkWithPopup",j:[Vl()]},Fc:{name:"linkWithRedirect",j:[Vl()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[jl()]},tb:{name:"reauthenticateWithCredential",j:[jl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[xl("phoneNumber"),Wl()]},Nc:{name:"reauthenticateWithPopup",j:[Vl()]},Oc:{name:"reauthenticateWithRedirect",j:[Vl()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Hl(Ml("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[xl(null,!0)]},cd:{name:"unlink",j:[xl("provider")]},Bb:{name:"updateEmail",j:[xl("email")]},Cb:{name:"updatePassword",j:[xl("password")]},ed:{name:"updatePhoneNumber",j:[jl("phone")]},Db:{name:"updateProfile",j:[Ml("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[xl("email"),Hl(Ml("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]}}),Gl(hl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Gl(cl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Gl(fe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),zl(Vc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Ll("appVerificationDisabledForTesting")}}),Gl(Bc.prototype,{confirm:{name:"confirm",j:[xl("verificationCode")]}}),Ql($i,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[oo,bo,Eo,no],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Hl(xl(),Ml(),"json")]),Ql(_o,"credential",function(t,e){return new mo(t,e)},[xl("email"),xl("password")]),Gl(mo.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Gl(co.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(co,"credential",ho,[Hl(xl(),Ml(),"token")]),Ql(_o,"credentialWithLink",wo,[xl("email"),xl("emailLink")]),Gl(lo.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(lo,"credential",fo,[Hl(xl(),Ml(),"token")]),Gl(po.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(po,"credential",vo,[Hl(xl(),Hl(Ml(),Ul()),"idToken"),Hl(xl(),Ul(),"accessToken",!0)]),Gl(go.prototype,{Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(go,"credential",yo,[Hl(xl(),Ml(),"token"),xl("secret",!0)]),Gl(uo.prototype,{Ca:{name:"addScope",j:[xl("scope")]},credential:{name:"credential",j:[Hl(xl(),Hl(Ml(),Ul()),"optionsOrIdToken"),Hl(xl(),Ul(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Gl(ro.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Gl(to.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Ql(Co,"credential",ko,[xl("verificationId"),xl("verificationCode")]),Gl(Co.prototype,{fb:{name:"verifyPhoneNumber",j:[Hl(xl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Bl(t.session,Xi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Bl(t.session,Ji)&&Kl(t.multiFactorHint):t.session&&t.multiFactorUid?Bl(t.session,Ji)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Wl()]}}),Gl(To.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Gl(I.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Gl(Mo.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Gl(Lo.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Gl(Qc.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Gl(Hc.prototype,{Rc:{name:"resolveSignIn",j:[ql()]}}),Gl(th.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[ql(),xl("displayName",!0)]},bd:{name:"unenroll",j:[Hl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Kl},xl(),"multiFactorInfoIdentifier")]}}),Gl(Pl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ql(hi,"parseLink",mi,[xl("link")]),Ql(gl,"assertion",function(t){return new $c(t)},[jl("phone")]),function(){if(void 0===Xl||!Xl.INTERNAL||!Xl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$r,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Jr,VERIFY_AND_CHANGE_EMAIL:Zr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Xh,AuthCredential:$i,Error:I};Ql(t,"EmailAuthProvider",_o,[]),Ql(t,"FacebookAuthProvider",co,[]),Ql(t,"GithubAuthProvider",lo,[]),Ql(t,"GoogleAuthProvider",po,[]),Ql(t,"TwitterAuthProvider",go,[]),Ql(t,"OAuthProvider",uo,[xl("providerId")]),Ql(t,"SAMLAuthProvider",so,[xl("providerId")]),Ql(t,"PhoneAuthProvider",Co,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Xh)}}]),Ql(t,"RecaptchaVerifier",Pl,[Hl(xl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ml("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Xl.app.App)}}]),Ql(t,"ActionCodeURL",hi,[]),Ql(t,"PhoneMultiFactorGenerator",gl,[]),Xl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Xh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Xl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.nc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Xl.registerVersion("@firebase/auth","0.16.5"),Xl.INTERNAL.extendNamespace({User:hh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Oa="";function Da(t){Oa=t}var xa=(La.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Po(e))},La.prototype.get=function(t){t=this.domStorage_.getItem(this.prefixedName_(t));return null==t?null:Ro(t)},La.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},La.prototype.prefixedName_=function(t){return this.prefix_+t},La.prototype.toString=function(){return this.domStorage_.toString()},La);function La(t){this.domStorage_=t,this.prefix_="firebase:"}var Ma=(Fa.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Fa.prototype.get=function(t){return Do(this.cache_,t)?this.cache_[t]:null},Fa.prototype.remove=function(t){delete this.cache_[t]},Fa);function Fa(){this.cache_={},this.isInMemoryStorage=!0}function Ua(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,ao(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new Uo).update(e),t=t.digest(),uo.encodeByteArray(t)}function ja(t,e){ao(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Qa.logLevel=ua.VERBOSE,Ja=Qa.log.bind(Qa),e&&za.set("logging_enabled",!0)):"function"==typeof t?Ja=t:(Ja=null,za.remove("logging_enabled"))}function qa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Xa.apply(void 0,no([],eo(t)));Qa.error(n)}function Va(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Ba(t,e){return t===e?0:t<e?-1:1}function Ka(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Po(e))}function Wa(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Ha,Sn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xa(e)}}catch(t){}return new Ma},Ga=Sn("localStorage"),za=Sn("sessionStorage"),Qa=new da("@firebase/database"),Ya=(Ha=1,function(){return Ha++}),Xa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Xa.apply(null,i):n+="object"==typeof i?Po(i):i,n+=" "}return n},Ja=null,$a=!0,Za=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===$a&&($a=!1,null===Ja&&!0===za.get("logging_enabled")&&ja(!0)),Ja&&(t=Xa.apply(null,e),Ja(t))},ts=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Za.apply(void 0,no([n],eo(t)))}},es=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Xa.apply(void 0,no([],eo(t)));throw Qa.error(n),new Error(n)},ns=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Xa.apply(void 0,no([],eo(t)));Qa.warn(n)},rs="[MIN_NAME]",is="[MAX_NAME]",os=function(t,e){if(t===e)return 0;if(t===rs||e===is)return-1;if(e===rs||t===is)return 1;var n=ps(t),r=ps(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},as=function(t){if("object"!=typeof t||null===t)return Po(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Po(n[i]),r+=":",r+=as(t[n[i]]);return r+="}"};function ss(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function us(t){var e,n,r,i;ao(!Va(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],a=52;a;--a)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;--a)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var s=o.join(""),u="";for(a=0;a<64;a+=8){var c=parseInt(s.substr(a,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function cs(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var hs=new RegExp("^-?(0*)\\d{1,10}$"),ls=-2147483648,fs=2147483647,ps=function(t){if(hs.test(t)){t=Number(t);if(ls<=t&&t<=fs)return t}return null},ds=function(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw ns("Exception was thrown by user callback.",t),e},Math.floor(0))}},vs=(gs.prototype.getToken=function(t){return this.appCheck?this.appCheck.getToken(t):Promise.resolve(null)},gs.prototype.addTokenChangeListener=function(e){var t;null!==(t=this.appCheckProvider)&&void 0!==t&&t.get().then(function(t){return t.addTokenListener(e)})},gs.prototype.notifyForInvalidToken=function(){ns('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},gs);function gs(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null!=e&&e.get().then(function(t){return n.appCheck=t})}var ys=(ms.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(Za("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},ms.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},ms.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},ms.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ns(t)},ms);function ms(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}var bs=(_s.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},_s.prototype.addTokenChangeListener=function(t){t(this.accessToken)},_s.prototype.removeTokenChangeListener=function(t){},_s.prototype.notifyForInvalidToken=function(){},_s.OWNER="owner",_s);function _s(t){this.accessToken=t}var ws=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Is="websocket",Ts="long_polling",Es=(Ss.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Ss.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(Ss.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ga.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),Ss.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Ss.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},Ss);function Ss(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ga.get("host:"+t)||this._host}function Cs(t,e,n){var r;if(ao("string"==typeof e,"typeof type must == string"),ao("object"==typeof n,"typeof params must == object"),e===Is)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Ts)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}((e=t).host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=t.namespace);var i=[];return ss(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var ks=(Ns.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Do(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Ns.prototype.get=function(){return co(this.counters_)},Ns);function Ns(){this.counters_={}}var As={},Rs={};function Ps(t){t=t.toString();return As[t]||(As[t]=new ks),As[t]}var Os=(Ds.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Ds.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];)if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&ds(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break},Ds);function Ds(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var xs="pLPCommand",Ls="pRTLPCB",Ms=(Fs.prototype.open=function(t,e){var n,r,i,a=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Os(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){a.log_("Timed out trying to connect."),a.onClosed_(),a.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;a.isClosed_||(a.scriptTagHolder=new Us(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=eo(t,5),r=n[0],i=n[1],o=n[2];n[3],n[4];if(a.incrementIncomingBytes_(t),a.scriptTagHolder)if(a.connectTimeoutTimer_&&(clearTimeout(a.connectTimeoutTimer_),a.connectTimeoutTimer_=null),a.everConnected_=!0,"start"===r)a.id=i,a.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(a.scriptTagHolder.sendNewPolls=!1,a.myPacketOrderer.closeAfter(i,function(){a.onClosed_()})):a.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=eo(t,2),r=n[0],n=n[1];a.incrementIncomingBytes_(t),a.myPacketOrderer.handleResponse(r,n)},function(){a.onClosed_()},a.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),a.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=a.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",a.transportSessionId&&(t.s=a.transportSessionId),a.lastSessionId&&(t.ls=a.lastSessionId),a.applicationId&&(t.p=a.applicationId),a.appCheckToken&&(t.ac=a.appCheckToken),"undefined"!=typeof location&&location.hostname&&ws.test(location.hostname)&&(t.r="f"),t=a.urlFn(t),a.log_("Connecting via long-poll to "+t),a.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},Fs.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Fs.forceAllow=function(){Fs.forceAllow_=!0},Fs.forceDisallow=function(){Fs.forceDisallow_=!0},Fs.isAvailable=function(){return!!Fs.forceAllow_||!(Fs.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Fs.prototype.markConnectionHealthy=function(){},Fs.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Fs.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Fs.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Fs.prototype.send=function(t){t=Po(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var t=function(t){t=ro(t);return uo.encodeByteArray(t,!0)}(t),e=Wa(t,1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},Fs.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Fs.prototype.incrementIncomingBytes_=function(t){t=Po(t).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Fs);function Fs(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ts(t),this.stats_=Ps(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),Cs(e,Ts,t)}}var Us=(js.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Za("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},js.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},js.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},js.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},js.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},js.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},js.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){Za("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},js);function js(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Ya(),window[xs+this.uniqueCallbackIdentifier]=t,window[Ls+this.uniqueCallbackIdentifier]=e,this.myIFrame=js.createIFrame_();var e="",i="<html><body>"+(e=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':e)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){Za("frame writing exception"),t.stack&&Za(t.stack),Za(t)}}var qs=null;"undefined"!=typeof MozWebSocket?qs=MozWebSocket:"undefined"!=typeof WebSocket&&(qs=WebSocket);var Vs=(Bs.connectionURL_=function(t,e,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&ws.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Cs(t,Is,i)},Bs.prototype.open=function(e,t){var n,r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ga.set("previous_websocket_failure",!0);try{bo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}},this.mySock=new qs(this.connURL,[],n))}catch(t){this.log_("Error instantiating WebSocket.");e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");t=t.message||t.data;t&&r.log_(t),r.onClosed_()}},Bs.prototype.start=function(){},Bs.forceDisallow=function(){Bs.forceDisallow_=!0},Bs.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==qs&&!Bs.forceDisallow_},Bs.previouslyFailed=function(){return Ga.isInMemoryStorage||!0===Ga.get("previous_websocket_failure")},Bs.prototype.markConnectionHealthy=function(){Ga.remove("previous_websocket_failure")},Bs.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=Ro(t),this.onMessage(t))},Bs.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Bs.prototype.extractFrameCount_=function(t){if(ao(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Bs.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(t):null!==(t=this.extractFrameCount_(t))&&this.appendFrame_(t))},Bs.prototype.send=function(t){this.resetKeepAlive();t=Po(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=Wa(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},Bs.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Bs.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Bs.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Bs.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},Bs.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Bs.responsesRequiredToBeHealthy=2,Bs.healthyTimeout=3e4,Bs);function Bs(t,e,n,r,i,o,a){this.connId=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ts(this.connId),this.stats_=Ps(e),this.connURL=Bs.connectionURL_(e,o,a,r),this.nodeAdmin=e.nodeAdmin}var Ks=(Object.defineProperty(Ws,"ALL_TRANSPORTS",{get:function(){return[Ms,Vs]},enumerable:!1,configurable:!0}),Ws.prototype.initTransports_=function(t){var e,n,r=Vs&&Vs.isAvailable(),i=r&&!Vs.previouslyFailed();if(t.webSocketOnly&&(r||ns("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Vs];else{var o=this.transports_=[];try{for(var a=to(Ws.ALL_TRANSPORTS),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}},Ws.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Ws.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Ws);function Ws(t){this.initTransports_(t)}var Hs=(Gs.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=cs(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},Gs.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Gs.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},Gs.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},Gs.prototype.sendRequest=function(t){t={t:"d",d:t};this.sendData_(t)},Gs.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Gs.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Gs.prototype.onSecondaryMessageReceived_=function(t){var e=Ka("t",t),t=Ka("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},Gs.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Gs.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Gs.prototype.onPrimaryMessageReceived_=function(t){var e=Ka("t",t),t=Ka("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},Gs.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Gs.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Gs.prototype.onControl_=function(t){var e=Ka("t",t);if("d"in t){t=t.d;if("h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?qa("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qa("Unknown control packet command: "+e)}},Gs.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&ns("Protocol version mismatch detected"),this.tryStartUpgrade_())},Gs.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Gs.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),cs(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},Gs.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},Gs.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cs(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Gs.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Gs.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Gs.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ga.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Gs.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Gs.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Gs.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Gs.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Gs);function Gs(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ts("c:"+this.id+":"),this.transportManager_=new Ks(e),this.log_("Connection created"),this.start_()}zs.prototype.put=function(t,e,n,r){},zs.prototype.merge=function(t,e,n,r){},zs.prototype.refreshAuthToken=function(t){},zs.prototype.refreshAppCheckToken=function(t){},zs.prototype.onDisconnectPut=function(t,e,n){},zs.prototype.onDisconnectMerge=function(t,e,n){},zs.prototype.onDisconnectCancel=function(t,e){},zs.prototype.reportStats=function(t){},z=zs;function zs(){}var Qs=(Ys.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=no([],eo(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Ys.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});t=this.getInitialEvent(t);t&&e.apply(n,t)},Ys.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Ys.prototype.validateEventType_=function(e){ao(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},Ys);function Ys(t){this.allowedEvents_=t,this.listeners_={},ao(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Xs,Js=(Xi($s,Xs=Qs),$s.getInstance=function(){return new $s},$s.prototype.getInitialEvent=function(t){return ao("online"===t,"Unknown event type: "+t),[this.online_]},$s.prototype.currentlyOnline=function(){return this.online_},$s);function $s(){var t=Xs.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||go()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Zs=32,tu=768,eu=(nu.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},nu);function nu(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function ru(){return new eu("")}function iu(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ou(t){return t.pieces_.length-t.pieceNum_}function au(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new eu(t.pieces_,e)}function su(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function uu(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function cu(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new eu(e,0)}function hu(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof eu)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)0<i[r].length&&n.push(i[r]);return new eu(n,0)}function lu(t){return t.pieceNum_>=t.pieces_.length}function fu(t,e){var n=iu(t),r=iu(e);if(null===n)return e;if(n===r)return fu(au(t),au(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pu(t,e){for(var n=uu(t,0),r=uu(e,0),i=0;i<n.length&&i<r.length;i++){var o=os(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function du(t,e){if(ou(t)!==ou(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function vu(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ou(t)>ou(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var gu=function(t,e){this.errorPrefix_=e,this.parts_=uu(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Qo(this.parts_[n]);yu(this)};function yu(t){if(t.byteLength_>tu)throw new Error(t.errorPrefix_+"has a key path longer than "+tu+" bytes ("+t.byteLength_+").");if(t.parts_.length>Zs)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zs+") or object contains a cycle "+mu(t))}function mu(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var bu,_u=(Xi(wu,bu=Qs),wu.getInstance=function(){return new wu},wu.prototype.getInitialEvent=function(t){return ao("visible"===t,"Unknown event type: "+t),[this.visible_]},wu);function wu(){var e,t,n=bu.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Iu,Tu=1e3,Eu=3e5,Su=(Xi(Cu,Iu=z),Cu.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Po(e)),ao(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},Cu.prototype.get=function(t){var n=this,r=new lo,i={p:t._path.toString(),q:t._queryObject},e={action:"g",request:i,onComplete:function(t){var e=t.d;"ok"===t.s?(n.onDataUpdate_(i.p,e,!1,null),r.resolve(e)):r.reject(e)}};this.outstandingGets_.push(e),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=n.outstandingGets_[o];void 0!==t&&e===t&&(delete n.outstandingGets_[o],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),n.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),r.promise},Cu.prototype.listen=function(t,e,n,r){var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ao(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ao(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");n={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},Cu.prototype.sendGet_=function(e){var n=this,r=this.outstandingGets_[e];this.sendRequest("g",r.request,function(t){delete n.outstandingGets_[e],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),r.onComplete&&r.onComplete(t)})},Cu.prototype.sendListen_=function(r){var i=this,o=r.query,a=o._path.toString(),s=o._queryIdentifier;this.log_("Listen on "+a+" for "+s);var t={p:a};r.tag&&(t.q=o._queryObject,t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;Cu.warnOnListenWarnings_(e,o),(i.listens.get(a)&&i.listens.get(a).get(s))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(a,s),r.onComplete&&r.onComplete(n,e))})},Cu.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Do(t,"w")&&(t=xo(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',e=e._path.toString(),ns("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},Cu.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},Cu.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){t=Oo(t).claims;return"object"==typeof t&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Cu.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},Cu.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=function(t){t=Oo(t).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(n=this.authToken_)?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},Cu.prototype.tryAppCheck=function(){var n=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(t){var e=t.s,t=t.d||"error";"ok"===e?n.invalidAppCheckTokenCount_=0:n.onAppCheckRevoked_(e,t)})},Cu.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ao(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},Cu.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);t={p:t};r&&(t.q=n,t.t=r),this.sendRequest("n",t)},Cu.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Cu.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Cu.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Cu.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},Cu.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Cu.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Cu.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n};void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++;r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},Cu.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},Cu.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},Cu.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Po(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Cu.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):qa("Unrecognized action received from server: "+Po(t)+"\nAre you using the latest client?")},Cu.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Cu.prototype.scheduleConnect_=function(t){var e=this;ao(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},Cu.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Cu.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Cu.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Tu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Cu.prototype.establishConnection_=function(){return $i(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,h,l=this;return Zi(this,function(t){switch(t.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Cu.nextConnectionId_++,h=this.lastSessionId,o=!1,a=null,s=function(){a?a.close():(o=!0,r())},c=function(t){ao(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)},this.realtime_={close:s,sendRequest:c},u=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)])];case 2:return c=eo.apply(void 0,[t.sent(),2]),u=c[0],c=c[1],o?Za("getToken() completed but was canceled"):(Za("getToken() completed. Creating connection."),this.authToken_=u&&u.accessToken,this.appCheckToken_=c&&c.token,a=new Hs(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,function(t){ns(t+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},h)),[3,4];case 3:return h=t.sent(),this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&ns(h),s()),[3,4];case 4:return[2]}})})},Cu.prototype.interrupt=function(t){Za("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Cu.prototype.resume=function(t){Za("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Lo(this.interruptReasons_)&&(this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0))},Cu.prototype.handleTimestamp_=function(t){t-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},Cu.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Cu.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return as(t)}).join("$"):"default",e=this.removeListen_(t,e);e&&e.onComplete&&e.onComplete("permission_denied")},Cu.prototype.removeListen_=function(t,e){var n,r=new eu(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},Cu.prototype.onAuthRevoked_=function(t,e){Za("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Cu.prototype.onAppCheckRevoked_=function(t,e){Za("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,3<=this.invalidAppCheckTokenCount_&&this.appCheckTokenProvider_.notifyForInvalidToken())},Cu.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Cu.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=to(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,to(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},Cu.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Oa.replace(/\./g,"-")]=1,go()?t["framework.cordova"]=1:mo()&&(t["framework.reactnative"]=1),this.reportStats(t)},Cu.prototype.shouldReconnect_=function(){var t=Js.getInstance().currentlyOnline();return Lo(this.interruptReasons_)&&t},Cu.nextPersistentConnectionId_=0,Cu.nextConnectionId_=0,Cu);function Cu(t,e,n,r,i,o,a,s){var u=Iu.call(this)||this;if(u.repoInfo_=t,u.applicationId_=e,u.onDataUpdate_=n,u.onConnectStatus_=r,u.onServerInfoUpdate_=i,u.authTokenProvider_=o,u.appCheckTokenProvider_=a,u.authOverride_=s,u.id=Cu.nextPersistentConnectionId_++,u.log_=ts("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingGets_=[],u.outstandingPutCount_=0,u.outstandingGetCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=Tu,u.maxReconnectDelay_=Eu,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.appCheckToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.invalidAppCheckTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!bo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),_u.getInstance().on("visible",u.onVisible_,u),-1===t.host.indexOf("fblocal")&&Js.getInstance().on("online",u.onOnline_,u),u}var ku=(Nu.Wrap=function(t,e){return new Nu(t,e)},Nu);function Nu(t,e){this.name=t,this.node=e}var Au,G=(Ru.prototype.getCompare=function(){return this.compare.bind(this)},Ru.prototype.indexedValueChanged=function(t,e){t=new ku(rs,t),e=new ku(rs,e);return 0!==this.compare(t,e)},Ru.prototype.minPost=function(){return ku.MIN},Ru);function Ru(){}var Pu,Sn=(Xi(Ou,Pu=G),Object.defineProperty(Ou,"__EMPTY_NODE",{get:function(){return Au},set:function(t){Au=t},enumerable:!1,configurable:!0}),Ou.prototype.compare=function(t,e){return os(t.name,e.name)},Ou.prototype.isDefinedOn=function(t){throw so("KeyIndex.isDefinedOn not expected to be called.")},Ou.prototype.indexedValueChanged=function(t,e){return!1},Ou.prototype.minPost=function(){return ku.MIN},Ou.prototype.maxPost=function(){return new ku(is,Au)},Ou.prototype.makePost=function(t,e){return ao("string"==typeof t,"KeyIndex indexValue must always be a string."),new ku(t,Au)},Ou.prototype.toString=function(){return".key"},Ou);function Ou(){return null!==Pu&&Pu.apply(this,arguments)||this}var Du=new Sn,xu=(Lu.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Lu.prototype.hasNext=function(){return 0<this.nodeStack_.length},Lu.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Lu);function Lu(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Mu=(Fu.prototype.copy=function(t,e,n,r,i){return new Fu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Fu.prototype.count=function(){return this.left.count()+1+this.right.count()},Fu.prototype.isEmpty=function(){return!1},Fu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Fu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Fu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Fu.prototype.minKey=function(){return this.min_().key},Fu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Fu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Fu.prototype.removeMin_=function(){if(this.left.isEmpty())return qu.EMPTY_NODE;var t=this;return(t=(t=!t.left.isRed_()&&!t.left.left.isRed_()?t.moveRedLeft_():t).copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Fu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=!(r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_())?r.moveRedLeft_():r).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=!((r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_())?r.moveRedRight_():r).key)){if(r.right.isEmpty())return qu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Fu.prototype.isRed_=function(){return this.color},Fu.prototype.fixUp_=function(){var t=this;return t=(t=(t=t.right.isRed_()&&!t.left.isRed_()?t.rotateLeft_():t).left.isRed_()&&t.left.left.isRed_()?t.rotateRight_():t).left.isRed_()&&t.right.isRed_()?t.colorFlip_():t},Fu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t=t.right.left.isRed_()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_():t},Fu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t=t.left.left.isRed_()?(t=t.rotateRight_()).colorFlip_():t},Fu.prototype.rotateLeft_=function(){var t=this.copy(null,null,Fu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Fu.prototype.rotateRight_=function(){var t=this.copy(null,null,Fu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Fu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Fu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Fu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Fu.RED=!0,Fu.BLACK=!1,Fu);function Fu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Fu.RED,this.left=null!=r?r:qu.EMPTY_NODE,this.right=null!=i?i:qu.EMPTY_NODE}Uu.prototype.copy=function(t,e,n,r,i){return this},Uu.prototype.insert=function(t,e,n){return new Mu(t,e,null)},Uu.prototype.remove=function(t,e){return this},Uu.prototype.count=function(){return 0},Uu.prototype.isEmpty=function(){return!0},Uu.prototype.inorderTraversal=function(t){return!1},Uu.prototype.reverseTraversal=function(t){return!1},Uu.prototype.minKey=function(){return null},Uu.prototype.maxKey=function(){return null},Uu.prototype.check_=function(){return 0},Uu.prototype.isRed_=function(){return!1},Qs=Uu;function Uu(){}var ju,qu=(Vu.prototype.insert=function(t,e){return new Vu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Mu.BLACK,null,null))},Vu.prototype.remove=function(t){return new Vu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Mu.BLACK,null,null))},Vu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Vu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Vu.prototype.isEmpty=function(){return this.root_.isEmpty()},Vu.prototype.count=function(){return this.root_.count()},Vu.prototype.minKey=function(){return this.root_.minKey()},Vu.prototype.maxKey=function(){return this.root_.maxKey()},Vu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Vu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Vu.prototype.getIterator=function(t){return new xu(this.root_,null,this.comparator_,!1,t)},Vu.prototype.getIteratorFrom=function(t,e){return new xu(this.root_,t,this.comparator_,!1,e)},Vu.prototype.getReverseIteratorFrom=function(t,e){return new xu(this.root_,t,this.comparator_,!0,e)},Vu.prototype.getReverseIterator=function(t){return new xu(this.root_,null,this.comparator_,!0,t)},Vu.EMPTY_NODE=new Qs,Vu);function Vu(t,e){void 0===e&&(e=Vu.EMPTY_NODE),this.comparator_=t,this.root_=e}function Bu(t,e){return os(t.name,e.name)}function Ku(t,e){return os(t,e)}function Wu(t){return"number"==typeof t?"number:"+us(t):"string:"+t}var Hu,Gu,zu,Qu,Yu=function(t){var e;t.isLeafNode()?(e=t.val(),ao("string"==typeof e||"number"==typeof e||"object"==typeof e&&Do(e,".sv"),"Priority must be a string or number.")):ao(t===ju||t.isEmpty(),"priority of unexpected type."),ao(t===ju||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Xu=(Object.defineProperty(Ju,"__childrenNodeConstructor",{get:function(){return Hu},set:function(t){Hu=t},enumerable:!1,configurable:!0}),Ju.prototype.isLeafNode=function(){return!0},Ju.prototype.getPriority=function(){return this.priorityNode_},Ju.prototype.updatePriority=function(t){return new Ju(this.value_,t)},Ju.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Ju.__childrenNodeConstructor.EMPTY_NODE},Ju.prototype.getChild=function(t){return lu(t)?this:".priority"===iu(t)?this.priorityNode_:Ju.__childrenNodeConstructor.EMPTY_NODE},Ju.prototype.hasChild=function(){return!1},Ju.prototype.getPredecessorChildName=function(t,e){return null},Ju.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Ju.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Ju.prototype.updateChild=function(t,e){var n=iu(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(ao(".priority"!==n||1===ou(t),".priority must be the last token in a path"),this.updateImmediateChild(n,Ju.__childrenNodeConstructor.EMPTY_NODE.updateChild(au(t),e)))},Ju.prototype.isEmpty=function(){return!1},Ju.prototype.numChildren=function(){return 0},Ju.prototype.forEachChild=function(t,e){return!1},Ju.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Ju.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Wu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?us(this.value_):this.value_,this.lazyHash_=Ua(t)),this.lazyHash_},Ju.prototype.getValue=function(){return this.value_},Ju.prototype.compareTo=function(t){return t===Ju.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ju.__childrenNodeConstructor?-1:(ao(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Ju.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Ju.VALUE_TYPE_ORDER.indexOf(e),i=Ju.VALUE_TYPE_ORDER.indexOf(n);return ao(0<=r,"Unknown leaf type: "+e),ao(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Ju.prototype.withIndex=function(){return this},Ju.prototype.isIndexed=function(){return!0},Ju.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},Ju.VALUE_TYPE_ORDER=["object","boolean","number","string"],Ju);function Ju(t,e){void 0===e&&(e=Ju.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,ao(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Yu(this.priorityNode_)}function $u(){return null!==Qu&&Qu.apply(this,arguments)||this}var Zu=new(Xi($u,Qu=G),$u.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),r=n.compareTo(r);return 0===r?os(t.name,e.name):r},$u.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},$u.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},$u.prototype.minPost=function(){return ku.MIN},$u.prototype.maxPost=function(){return new ku(is,new Xu("[PRIORITY-POST]",zu))},$u.prototype.makePost=function(t,e){t=Gu(t);return new ku(e,new Xu("[PRIORITY-POST]",t))},$u.prototype.toString=function(){return".priority"},$u),tc=Math.log(2),ec=(nc.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},nc);function nc(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/tc,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var rc,ic,oc=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return r=c[t],i=h?h(r):r,new Mu(i,r.node,Mu.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new Mu(i,r.node,Mu.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t;t=l(1+n,r),r=c[n],n=h?h(r):r;o(new Mu(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},a=0;a<t.count;++a){var s=t.nextBitIsOne(),u=Math.pow(2,t.count-(a+1));s?r(u,Mu.BLACK):(r(u,Mu.BLACK),r(u,Mu.RED))}return n}(new ec(c.length));return new qu(e||t,n)},ac={},sc=(Object.defineProperty(uc,"Default",{get:function(){return ao(Zu,"ChildrenNode.ts has not been loaded"),rc=rc||new uc({".priority":ac},{".priority":Zu})},enumerable:!1,configurable:!0}),uc.prototype.get=function(t){var e=xo(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof qu?e:null},uc.prototype.hasIndex=function(t){return Do(this.indexSet_,t.toString())},uc.prototype.addIndex=function(t,e){ao(t!==Du,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,i=e.getIterator(ku.Wrap),o=i.getNext();o;)r=r||t.isDefinedOn(o.node),n.push(o),o=i.getNext();var a=r?oc(n,t.getCompare()):ac,s=t.toString(),u=Ji({},this.indexSet_);u[s]=t;e=Ji({},this.indexes_);return e[s]=a,new uc(e,u)},uc.prototype.addToIndexes=function(a,s){var u=this;return new uc(Mo(this.indexes_,function(t,e){var n=xo(u.indexSet_,e);if(ao(n,"Missing index implementation for "+e),t===ac){if(n.isDefinedOn(a.node)){for(var r=[],i=s.getIterator(ku.Wrap),o=i.getNext();o;)o.name!==a.name&&r.push(o),o=i.getNext();return r.push(a),oc(r,n.getCompare())}return ac}n=s.get(a.name);return(t=n?t.remove(new ku(a.name,n)):t).insert(a,a.node)}),this.indexSet_)},uc.prototype.removeFromIndexes=function(n,r){return new uc(Mo(this.indexes_,function(t){if(t===ac)return t;var e=r.get(n.name);return e?t.remove(new ku(n.name,e)):t}),this.indexSet_)},uc);function uc(t,e){this.indexes_=t,this.indexSet_=e}var cc,hc=(Object.defineProperty(lc,"EMPTY_NODE",{get:function(){return ic=ic||new lc(new qu(Ku),null,sc.Default)},enumerable:!1,configurable:!0}),lc.prototype.isLeafNode=function(){return!1},lc.prototype.getPriority=function(){return this.priorityNode_||ic},lc.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new lc(this.children_,t,this.indexMap_)},lc.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();t=this.children_.get(t);return null===t?ic:t},lc.prototype.getChild=function(t){var e=iu(t);return null===e?this:this.getImmediateChild(e).getChild(au(t))},lc.prototype.hasChild=function(t){return null!==this.children_.get(t)},lc.prototype.updateImmediateChild=function(t,e){if(ao(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new ku(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?ic:this.priorityNode_;return new lc(r,n,i)},lc.prototype.updateChild=function(t,e){var n=iu(t);if(null===n)return e;ao(".priority"!==iu(t)||1===ou(t),".priority must be the last token in a path");e=this.getImmediateChild(n).updateChild(au(t),e);return this.updateImmediateChild(n,e)},lc.prototype.isEmpty=function(){return this.children_.isEmpty()},lc.prototype.numChildren=function(){return this.children_.count()},lc.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,a=!0;if(this.forEachChild(Zu,function(t,e){r[t]=e.val(n),i++,a&&lc.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):a=!1}),!n&&a&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},lc.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+Wu(this.getPriority().val())+":"),this.forEachChild(Zu,function(t,e){e=e.hash();""!==e&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":Ua(n)),this.lazyHash_},lc.prototype.getPredecessorChildName=function(t,e,n){n=this.resolveIndex_(n);if(n){e=n.getPredecessorKey(new ku(t,e));return e?e.name:null}return this.children_.getPredecessorKey(t)},lc.prototype.getFirstChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.minKey();return t&&t.name}return this.children_.minKey()},lc.prototype.getFirstChild=function(t){t=this.getFirstChildName(t);return t?new ku(t,this.children_.get(t)):null},lc.prototype.getLastChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.maxKey();return t&&t.name}return this.children_.maxKey()},lc.prototype.getLastChild=function(t){t=this.getLastChildName(t);return t?new ku(t,this.children_.get(t)):null},lc.prototype.forEachChild=function(t,e){t=this.resolveIndex_(t);return t?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},lc.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},lc.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,ku.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},lc.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},lc.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,ku.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},lc.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===pc?-1:0},lc.prototype.withIndex=function(t){if(t===Du||this.indexMap_.hasIndex(t))return this;t=this.indexMap_.addIndex(t,this.children_);return new lc(this.children_,this.priorityNode_,t)},lc.prototype.isIndexed=function(t){return t===Du||this.indexMap_.hasIndex(t)},lc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Zu),n=t.getIterator(Zu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},lc.prototype.resolveIndex_=function(t){return t===Du?null:this.indexMap_.get(t.toString())},lc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,lc);function lc(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Yu(this.priorityNode_),this.children_.isEmpty()&&ao(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function fc(){return cc.call(this,new qu(Ku),hc.EMPTY_NODE,sc.Default)||this}var pc=new(Xi(fc,cc=hc),fc.prototype.compareTo=function(t){return t===this?0:1},fc.prototype.equals=function(t){return t===this},fc.prototype.getPriority=function(){return this},fc.prototype.getImmediateChild=function(t){return hc.EMPTY_NODE},fc.prototype.isEmpty=function(){return!1},fc);Object.defineProperties(ku,{MIN:{value:new ku(rs,hc.EMPTY_NODE)},MAX:{value:new ku(is,pc)}}),Sn.__EMPTY_NODE=hc.EMPTY_NODE,Xu.__childrenNodeConstructor=hc,ju=pc,zu=pc;var dc=!0;function vc(n,t){if(void 0===t&&(t=null),null===n)return hc.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),ao(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Xu(n,vc(t));if(n instanceof Array||!dc){var r=hc.EMPTY_NODE;return ss(n,function(t,e){Do(n,t)&&"."!==t.substring(0,1)&&(!(e=vc(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(vc(t))}var i=[],o=!1;if(ss(n,function(t,e){"."!==t.substring(0,1)&&((e=vc(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new ku(t,e))))}),0===i.length)return hc.EMPTY_NODE;var e=oc(i,Bu,function(t){return t.name},Ku);if(o){var a=oc(i,Zu.getCompare());return new hc(e,vc(t),new sc({".priority":a},{".priority":Zu}))}return new hc(e,vc(t),sc.Default)}Gu=vc;var gc,yc,mc=(Xi(bc,gc=G),bc.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},bc.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},bc.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),r=n.compareTo(r);return 0===r?os(t.name,e.name):r},bc.prototype.makePost=function(t,e){t=vc(t),t=hc.EMPTY_NODE.updateChild(this.indexPath_,t);return new ku(e,t)},bc.prototype.maxPost=function(){var t=hc.EMPTY_NODE.updateChild(this.indexPath_,pc);return new ku(is,t)},bc.prototype.toString=function(){return uu(this.indexPath_,0).join("/")},bc);function bc(t){var e=gc.call(this)||this;return e.indexPath_=t,ao(!lu(t)&&".priority"!==iu(t),"Can't create PathIndex with empty path or .priority key"),e}function _c(){return null!==yc&&yc.apply(this,arguments)||this}function wc(t){if(t===""+fs)return"-";var e=ps(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?is:(e=n[i],e=Cc.charAt(Cc.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function Ic(t){if(t===""+ls)return rs;var e=ps(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+fs:(delete n[n.length-1],n.join("")):(n[n.length-1]=Cc.charAt(Cc.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var Tc,Ec,Sc=new(Xi(_c,yc=G),_c.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?os(t.name,e.name):n},_c.prototype.isDefinedOn=function(t){return!0},_c.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},_c.prototype.minPost=function(){return ku.MIN},_c.prototype.maxPost=function(){return ku.MAX},_c.prototype.makePost=function(t,e){t=vc(t);return new ku(e,t)},_c.prototype.toString=function(){return".value"},_c),Cc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",kc=(Tc=0,Ec=[],function(t){var e=t===Tc;Tc=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Cc.charAt(t%64),t=Math.floor(t/64);ao(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Ec[r];r--)Ec[r]=0;Ec[r]++}else for(r=0;r<12;r++)Ec[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Cc.charAt(Ec[r]);return ao(20===i.length,"nextPushId: Length should be 20."),i});function Nc(t){return{type:"value",snapshotNode:t}}function Ac(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Rc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Pc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Oc=(Dc.prototype.updateChild=function(t,e,n,r,i,o){ao(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Rc(e,a)):ao(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ac(e,n)):o.trackChildChange(Pc(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Dc.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Zu,function(t,e){n.hasChild(t)||i.trackChildChange(Rc(t,e))}),n.isLeafNode()||n.forEachChild(Zu,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Pc(t,e,n)):i.trackChildChange(Ac(t,e))})),n.withIndex(this.index_)},Dc.prototype.updatePriority=function(t,e){return t.isEmpty()?hc.EMPTY_NODE:t.updatePriority(e)},Dc.prototype.filtersNodes=function(){return!1},Dc.prototype.getIndexedFilter=function(){return this},Dc.prototype.getIndex=function(){return this.index_},Dc);function Dc(t){this.index_=t}var xc=(Lc.prototype.getStartPost=function(){return this.startPost_},Lc.prototype.getEndPost=function(){return this.endPost_},Lc.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Lc.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new ku(e,n))||(n=hc.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Lc.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=hc.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(hc.EMPTY_NODE),i=this;return e.forEachChild(Zu,function(t,e){i.matches(new ku(t,e))||(r=r.updateImmediateChild(t,hc.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Lc.prototype.updatePriority=function(t,e){return t},Lc.prototype.filtersNodes=function(){return!0},Lc.prototype.getIndexedFilter=function(){return this.indexedFilter_},Lc.prototype.getIndex=function(){return this.index_},Lc.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Lc.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Lc);function Lc(t){this.indexedFilter_=new Oc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Lc.getStartPost_(t),this.endPost_=Lc.getEndPost_(t)}var Mc=(Fc.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new ku(e,n))||(n=hc.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Fc.prototype.updateFullNode=function(t,e,n){if(e.isLeafNode()||e.isEmpty())r=hc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){var r=hc.EMPTY_NODE.withIndex(this.index_),i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(hc.EMPTY_NODE);var s,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),s=this.index_.getCompare(),function(t,e){return s(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){a=i.getNext();(l=!l&&h(u,a)<=0?!0:l)&&o<this.limit_&&h(a,c)<=0?o++:r=r.updateImmediateChild(a.name,hc.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Fc.prototype.updatePriority=function(t,e){return t},Fc.prototype.filtersNodes=function(){return!0},Fc.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Fc.prototype.getIndex=function(){return this.index_},Fc.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,a;a=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var s=t;ao(s.numChildren()===this.limit_,"");var u=new ku(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var l=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:a(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Pc(e,n,l)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Rc(e,l));l=s.updateImmediateChild(e,hc.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Ac(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l}return!n.isEmpty()&&h&&0<=a(c,u)?(null!=i&&(i.trackChildChange(Rc(c.name,c.node)),i.trackChildChange(Ac(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,hc.EMPTY_NODE)):t},Fc);function Fc(t){this.rangedFilter_=new xc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Uc=(jc.prototype.hasStart=function(){return this.startSet_},jc.prototype.hasStartAfter=function(){return this.startAfterSet_},jc.prototype.hasEndBefore=function(){return this.endBeforeSet_},jc.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},jc.prototype.getIndexStartValue=function(){return ao(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},jc.prototype.getIndexStartName=function(){return ao(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rs},jc.prototype.hasEnd=function(){return this.endSet_},jc.prototype.getIndexEndValue=function(){return ao(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},jc.prototype.getIndexEndName=function(){return ao(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:is},jc.prototype.hasLimit=function(){return this.limitSet_},jc.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},jc.prototype.getLimit=function(){return ao(this.limitSet_,"Only valid if limit has been set"),this.limit_},jc.prototype.getIndex=function(){return this.index_},jc.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},jc.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Zu},jc.prototype.copy=function(){var t=new jc;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},jc);function jc(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zu}function qc(t,e,n){t=t.copy();return t.startSet_=!0,void 0===e&&(e=null),t.indexStartValue_=e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function Vc(t,e,n){t=t.copy();return t.endSet_=!0,void 0===e&&(e=null),t.indexEndValue_=e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function Bc(t,e){t=t.copy();return t.index_=e,t}function Kc(t){var e,n={};return t.isDefault()||(e=t.index_===Zu?"$priority":t.index_===Sc?"$value":t.index_===Du?"$key":(ao(t.index_ instanceof mc,"Unrecognized index type!"),t.index_.toString()),n.orderBy=Po(e),t.startSet_&&(n.startAt=Po(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Po(t.indexStartName_))),t.endSet_&&(n.endAt=Po(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Po(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Wc(t){var e,n={};return t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_&&(n.l=t.limit_,""===(e=t.viewFrom_)&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e),t.index_!==Zu&&(n.i=t.index_.toString()),n}var Hc,Gc=(Xi(zc,Hc=z),zc.prototype.reportStats=function(t){throw new Error("Method not implemented.")},zc.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(ao(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},zc.prototype.listen=function(t,e,n,r){var i=this,o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);var a=zc.getListenId_(t,n),s={};this.listens_[a]=s;t=Kc(t._queryParams);this.restRequest_(o+".json",t,function(t,e){null===(t=404===t?e=null:t)&&i.onDataUpdate_(o,e,!1,n),xo(i.listens_,a)===s&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},zc.prototype.unlisten=function(t,e){e=zc.getListenId_(t,e);delete this.listens_[e]},zc.prototype.get=function(t){var n=this,e=Kc(t._queryParams),r=t._path.toString(),i=new lo;return this.restRequest_(r+".json",e,function(t,e){null===(t=404===t?e=null:t)?(n.onDataUpdate_(r,e,!1,null),i.resolve(e)):i.reject(new Error(e))}),i.promise},zc.prototype.refreshAuthToken=function(t){},zc.prototype.restRequest_=function(i,o,a){var s=this;return(o=void 0===o?{}:o).format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(t){var e=eo(t,2),t=e[0],e=e[1];t&&t.accessToken&&(o.auth=t.accessToken),e&&e.token&&(o.ac=e.token);var n=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+i+"?ns="+s.repoInfo_.namespace+Fo(o);s.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(a&&4===r.readyState){s.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=Ro(r.responseText)}catch(t){ns("Failed to parse JSON response for "+n+": "+r.responseText)}a(null,t)}else 401!==r.status&&404!==r.status&&ns("Got unsuccessful REST response for "+n+" Status: "+r.status),a(r.status);a=null}},r.open("GET",n,!0),r.send()})},zc);function zc(t,e,n,r){var i=Hc.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=e,i.authTokenProvider_=n,i.appCheckTokenProvider_=r,i.log_=ts("p:rest:"),i.listens_={},i}var Qc=(Yc.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Yc.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Yc);function Yc(){this.rootNode_=hc.EMPTY_NODE}function Xc(){return{value:null,children:new Map}}function Jc(t,e,n){var r;lu(e)?(t.value=n,t.children.clear()):null!==t.value?t.value=t.value.updateChild(e,n):(r=iu(e),t.children.has(r)||t.children.set(r,Xc()),Jc(t.children.get(r),e=au(e),n))}function $c(t,n,r){var i;null!==t.value?r(n,t.value):(i=function(t,e){$c(e,new eu(n.toString()+"/"+t),r)},t.children.forEach(function(t,e){i(e,t)}))}var Zc=(th.prototype.get=function(){var t=this.collection_.get(),n=Ji({},t);return this.last_&&ss(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},th);function th(t){this.collection_=t,this.last_=null}var eh,nh=(rh.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;ss(t,function(t,e){0<e&&Do(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),cs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},rh);function rh(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Zc(t);t=1e4+2e4*Math.random();cs(this.reportStats_.bind(this),Math.floor(t))}function ih(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function oh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ah(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}(Qs=eh=eh||{})[Qs.OVERWRITE=0]="OVERWRITE",Qs[Qs.MERGE=1]="MERGE",Qs[Qs.ACK_USER_WRITE=2]="ACK_USER_WRITE",Qs[Qs.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var sh=(uh.prototype.operationForChild=function(t){if(lu(this.path)){if(null!=this.affectedTree.value)return ao(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new eu(t));return new uh(ru(),e,this.revert)}return ao(iu(this.path)===t,"operationForChild called for unrelated child."),new uh(au(this.path),this.affectedTree,this.revert)},uh);function uh(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=eh.ACK_USER_WRITE,this.source=ih()}var ch=(hh.prototype.operationForChild=function(t){return lu(this.path)?new hh(this.source,ru()):new hh(this.source,au(this.path))},hh);function hh(t,e){this.source=t,this.path=e,this.type=eh.LISTEN_COMPLETE}var lh=(fh.prototype.operationForChild=function(t){return lu(this.path)?new fh(this.source,ru(),this.snap.getImmediateChild(t)):new fh(this.source,au(this.path),this.snap)},fh);function fh(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=eh.OVERWRITE}var ph=(dh.prototype.operationForChild=function(t){if(lu(this.path)){var e=this.children.subtree(new eu(t));return e.isEmpty()?null:e.value?new lh(this.source,ru(),e.value):new dh(this.source,ru(),e)}return ao(iu(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new dh(this.source,au(this.path),this.children)},dh.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},dh);function dh(t,e,n){this.source=t,this.path=e,this.children=n,this.type=eh.MERGE}var vh=(gh.prototype.isFullyInitialized=function(){return this.fullyInitialized_},gh.prototype.isFiltered=function(){return this.filtered_},gh.prototype.isCompleteForPath=function(t){if(lu(t))return this.isFullyInitialized()&&!this.filtered_;t=iu(t);return this.isCompleteForChild(t)},gh.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},gh.prototype.getNode=function(){return this.node_},gh);function gh(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var yh,mh=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function bh(n,t,e,r){var i=[],o=[];return t.forEach(function(t){var e;"child_changed"===t.type&&n.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((e=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:e}))}),_h(n,i,"child_removed",t,r,e),_h(n,i,"child_added",t,r,e),_h(n,i,"child_moved",o,r,e),_h(n,i,"child_changed",t,r,e),_h(n,i,"value",t,r,e),i}function _h(o,a,e,t,s,u){t=t.filter(function(t){return t.type===e});t.sort(function(t,e){return function(t,e,n){if(null==e.childName||null==n.childName)throw so("Should only compare child_ events.");e=new ku(e.childName,e.snapshotNode),n=new ku(n.childName,n.snapshotNode);return t.index_.compare(e,n)}(o,t,e)}),t.forEach(function(e){var t,n,r,i=(t=o,r=u,"value"===(n=e).type||"child_removed"===n.type||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,t.index_)),n);s.forEach(function(t){t.respondsTo(e.type)&&a.push(t.createEvent(i,o.query_))})})}function wh(t,e){return{eventCache:t,serverCache:e}}function Ih(t,e,n,r){return wh(new vh(e,n,r),t.serverCache)}function Th(t,e,n,r){return wh(t.eventCache,new vh(e,n,r))}function Eh(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Sh(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ch=(kh.fromObject=function(t){var n=new kh(null);return ss(t,function(t,e){n=n.set(new eu(t),e)}),n},kh.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},kh.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ru(),value:this.value};if(lu(t))return null;var n=iu(t),r=this.children.get(n);if(null===r)return null;e=r.findRootMostMatchingPathAndValue(au(t),e);return null==e?null:{path:hu(new eu(n),e.path),value:e.value}},kh.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},kh.prototype.subtree=function(t){if(lu(t))return this;var e=iu(t),e=this.children.get(e);return null!==e?e.subtree(au(t)):new kh(null)},kh.prototype.set=function(t,e){if(lu(t))return new kh(e,this.children);var n=iu(t),e=(this.children.get(n)||new kh(null)).set(au(t),e),e=this.children.insert(n,e);return new kh(this.value,e)},kh.prototype.remove=function(t){if(lu(t))return this.children.isEmpty()?new kh(null):new kh(null,this.children);var e=iu(t),n=this.children.get(e);if(n){n=n.remove(au(t)),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n);return null===this.value&&t.isEmpty()?new kh(null):new kh(this.value,t)}return this},kh.prototype.get=function(t){if(lu(t))return this.value;var e=iu(t),e=this.children.get(e);return e?e.get(au(t)):null},kh.prototype.setTree=function(t,e){if(lu(t))return e;var n=iu(t),t=(this.children.get(n)||new kh(null)).setTree(au(t),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new kh(this.value,e)},kh.prototype.fold=function(t){return this.fold_(ru(),t)},kh.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(hu(n,t),r)}),r(n,this.value,i)},kh.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ru(),e)},kh.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(lu(t))return null;var i=iu(t),r=this.children.get(i);return r?r.findOnPath_(au(t),hu(e,i),n):null},kh.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ru(),e)},kh.prototype.foreachOnPath_=function(t,e,n){if(lu(t))return this;this.value&&n(e,this.value);var r=iu(t),i=this.children.get(r);return i?i.foreachOnPath_(au(t),hu(e,r),n):new kh(null)},kh.prototype.foreach=function(t){this.foreach_(ru(),t)},kh.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(hu(n,t),r)}),this.value&&r(n,this.value)},kh.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},kh);function kh(t,e){void 0===e&&(e=yh=yh||new qu(Ba)),this.value=t,this.children=e}var Nh=(Ah.empty=function(){return new Ah(new Ch(null))},Ah);function Ah(t){this.writeTree_=t}function Rh(t,e,n){if(lu(e))return new Nh(new Ch(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,r=fu(i,e),o=o.updateChild(r,n);return new Nh(t.writeTree_.set(i,o))}n=new Ch(n),n=t.writeTree_.setTree(e,n);return new Nh(n)}function Ph(t,n,e){var r=t;return ss(e,function(t,e){r=Rh(r,hu(n,t),e)}),r}function Oh(t,e){if(lu(e))return Nh.empty();e=t.writeTree_.setTree(e,new Ch(null));return new Nh(e)}function Dh(t,e){return null!=xh(t,e)}function xh(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(fu(n.path,e)):null}function Lh(t){var n=[],e=t.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Zu,function(t,e){n.push(new ku(t,e))}):t.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new ku(t,e.value))}),n}function Mh(t,e){if(lu(e))return t;var n=xh(t,e);return new Nh(null!=n?new Ch(n):t.writeTree_.subtree(e))}function Fh(t){return t.writeTree_.isEmpty()}function Uh(t,e){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(ao(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(hu(r,t),e,i)}),i=!i.getChild(r).isEmpty()&&null!==o?i.updateChild(hu(r,".priority"),o):i}}(ru(),t.writeTree_,e)}function jh(t,e){return Jh(e,t)}function qh(e,n){var t=e.allWrites.findIndex(function(t){return t.writeId===n});ao(0<=t,"removeWrite called with nonexistent writeId.");var r=e.allWrites[t];e.allWrites.splice(t,1);for(var i,o=r.visible,a=!1,s=e.allWrites.length-1;o&&0<=s;){var u=e.allWrites[s];u.visible&&(t<=s&&function(t,e){{if(t.snap)return vu(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&vu(hu(t.path,n),e))return!0;return!1}}(u,r.path)?o=!1:vu(r.path,u.path)&&(a=!0)),s--}return!!o&&(a?((i=e).visibleWrites=Bh(i.allWrites,Vh,ru()),0<i.allWrites.length?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1):r.snap?e.visibleWrites=Oh(e.visibleWrites,r.path):ss(r.children,function(t){e.visibleWrites=Oh(e.visibleWrites,hu(r.path,t))}),!0)}function Vh(t){return t.visible}function Bh(t,e,n){for(var r=Nh.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)vu(n,a)?r=Rh(r,s=fu(n,a),o.snap):vu(a,n)&&(s=fu(a,n),r=Rh(r,ru(),o.snap.getChild(s)));else{if(!o.children)throw so("WriteRecord should have .snap or .children");vu(n,a)?r=Ph(r,s=fu(n,a),o.children):vu(a,n)&&(lu(s=fu(a,n))?r=Ph(r,ru(),o.children):(o=xo(o.children,iu(s)))&&(s=o.getChild(au(s)),r=Rh(r,ru(),s)))}}}return r}function Kh(t,e,n,r,i){if(r||i){var o=Mh(t.visibleWrites,e);if(!i&&Fh(o))return n;if(i||null!=n||Dh(o,ru()))return Uh(Bh(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(vu(t.path,e)||vu(e,t.path))},e),n||hc.EMPTY_NODE);return null}o=xh(t.visibleWrites,e);if(null!=o)return o;t=Mh(t.visibleWrites,e);return Fh(t)?n:null!=n||Dh(t,ru())?Uh(t,n||hc.EMPTY_NODE):null}function Wh(t,e,n,r){return Kh(t.writeTree,t.treePath,e,n,r)}function Hh(t,e){return function(t,e,n){var r=hc.EMPTY_NODE,i=xh(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Zu,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=Mh(t.visibleWrites,e);return n.forEachChild(Zu,function(t,e){e=Uh(Mh(o,new eu(t)),e);r=r.updateImmediateChild(t,e)}),Lh(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return Lh(Mh(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function Gh(t,e,n,r){return i=t.writeTree,t=t.treePath,e=e,r=r,ao(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=hu(t,e),Dh(i.visibleWrites,t)?null:Fh(t=Mh(i.visibleWrites,t))?r.getChild(e):Uh(t,r.getChild(e));var i}function zh(t,e){return n=t.writeTree,e=hu(t.treePath,e),xh(n.visibleWrites,e);var n}function Qh(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,t=Mh(t.visibleWrites,e);if(null!=(e=xh(t,ru())))s=e;else{if(null==n)return[];s=Uh(t,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=a.getCompare(),h=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),l=h.getNext();l&&u.length<i;)0!==c(l,r)&&u.push(l),l=h.getNext();return u}(t.writeTree,t.treePath,e,n,r,i,o)}function Yh(t,e,n){return r=t.writeTree,i=t.treePath,t=n,e=hu(i,n=e),null!=(i=xh(r.visibleWrites,e))?i:t.isCompleteForChild(n)?Uh(Mh(r.visibleWrites,e),t.getNode().getImmediateChild(n)):null;var r,i}function Xh(t,e){return Jh(hu(t.treePath,e),t.writeTree)}function Jh(t,e){return{treePath:t,writeTree:e}}var $h=(Zh.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;ao("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),ao(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Pc(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Rc(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Ac(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw so("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Pc(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Zh.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Zh);function Zh(){this.changeMap=new Map}function tl(){}var el=new(tl.prototype.getCompleteChild=function(t){return null},tl.prototype.getChildAfterChild=function(t,e,n){return null},tl),nl=(rl.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);e=null!=this.optCompleteServerCache_?new vh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yh(this.writes_,t,e)},rl.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Sh(this.viewCache_),t=Qh(this.writes_,r,e,1,n,t);return 0===t.length?null:t[0]},rl);function rl(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function il(t,e,n,r,i){var o,a,s,u,c,h,l,f,p=new $h;if(n.type===eh.OVERWRITE)var d=n,v=d.source.fromUser?sl(t,e,d.path,d.snap,r,i,p):(ao(d.source.fromServer,"Unknown source."),o=d.source.tagged||e.serverCache.isFiltered()&&!lu(d.path),al(t,e,d.path,d.snap,r,i,o,p));else if(n.type===eh.MERGE){var g=n;v=g.source.fromUser?(a=t,s=e,u=g.path,d=g.children,c=r,h=i,l=p,f=s,d.foreach(function(t,e){t=hu(u,t);ul(s,iu(t))&&(f=sl(a,f,t,e,c,h,l))}),d.foreach(function(t,e){t=hu(u,t);ul(s,iu(t))||(f=sl(a,f,t,e,c,h,l))}),f):(ao(g.source.fromServer,"Unknown source."),o=g.source.tagged||e.serverCache.isFiltered(),hl(t,e,g.path,g.children,r,i,o,p))}else if(n.type===eh.ACK_USER_WRITE){var y=n;v=y.revert?function(t,e,n,r,i,o){var a;{if(null!=zh(r,n))return e;var s,u,c=new nl(r,e,i),h=e.eventCache.getNode(),i=void 0;return lu(n)||".priority"===iu(n)?(u=void 0,u=e.serverCache.isFullyInitialized()?Wh(r,Sh(e)):(s=e.serverCache.getNode(),ao(s instanceof hc,"serverChildren would be complete if leaf node"),Hh(r,s)),i=t.filter.updateFullNode(h,u,o)):(s=iu(n),null==(u=Yh(r,s,e.serverCache))&&e.serverCache.isCompleteForChild(s)&&(u=h.getImmediateChild(s)),(i=null!=u?t.filter.updateChild(h,s,u,au(n),c,o):e.eventCache.getNode().hasChild(s)?t.filter.updateChild(h,s,hc.EMPTY_NODE,au(n),c,o):h).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Wh(r,Sh(e))).isLeafNode()&&(i=t.filter.updateFullNode(i,a,o))),a=e.serverCache.isFullyInitialized()||null!=zh(r,ru()),Ih(e,i,a,t.filter.filtersNodes())}}(t,e,y.path,r,i,p):function(t,e,r,n,i,o,a){if(null!=zh(i,r))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;{if(null!=n.value){if(lu(r)&&u.isFullyInitialized()||u.isCompleteForPath(r))return al(t,e,r,u.getNode().getChild(r),i,o,s,a);if(lu(r)){var c=new Ch(null);return u.getNode().forEachChild(Du,function(t,e){c=c.set(new eu(t),e)}),hl(t,e,r,c,i,o,s,a)}return e}var h=new Ch(null);return n.foreach(function(t,e){var n=hu(r,t);u.isCompleteForPath(n)&&(h=h.set(t,u.getNode().getChild(n)))}),hl(t,e,r,h,i,o,s,a)}}(t,e,y.path,y.affectedTree,r,i,p)}else{if(n.type!==eh.LISTEN_COMPLETE)throw so("Unknown operation type: "+n.type);o=t,y=e,i=n.path,t=r,n=p,r=y.serverCache,r=Th(y,r.getNode(),r.isFullyInitialized()||lu(i),r.isFiltered()),v=ol(o,r,i,t,el,n)}p=p.getChanges();return function(t,e,n){var r=e.eventCache;{var i,o;r.isFullyInitialized()&&(i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Eh(t),(0<n.length||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Nc(Eh(e))))}}(e,v,p),{viewCache:v,changes:p}}function ol(t,e,n,r,i,o){var a=e.eventCache;if(null!=zh(r,n))return e;var s,u,c,h,l=void 0,f=void 0;return l=lu(n)?(ao(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()?(s=Hh(r,(s=Sh(e))instanceof hc?s:hc.EMPTY_NODE),t.filter.updateFullNode(e.eventCache.getNode(),s,o)):(u=Wh(r,Sh(e)),t.filter.updateFullNode(e.eventCache.getNode(),u,o))):".priority"===(u=iu(n))?(ao(1===ou(n),"Can't have a priority with additional path components"),null!=(h=Gh(r,n,c=a.getNode(),f=e.serverCache.getNode()))?t.filter.updatePriority(c,h):a.getNode()):(c=au(n),h=void 0,null!=(h=a.isCompleteForChild(u)?(f=e.serverCache.getNode(),null!=(f=Gh(r,n,a.getNode(),f))?a.getNode().getImmediateChild(u).updateChild(c,f):a.getNode().getImmediateChild(u)):Yh(r,u,e.serverCache))?t.filter.updateChild(a.getNode(),u,h,c,i,o):a.getNode()),Ih(e,l,a.isFullyInitialized()||lu(n),t.filter.filtersNodes())}function al(t,e,n,r,i,o,a,s){var u=e.serverCache,c=a?t.filter:t.filter.getIndexedFilter();if(lu(n))l=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered())var h=u.getNode().updateChild(n,r),l=c.updateFullNode(u.getNode(),h,null);else{a=iu(n);if(!u.isCompleteForPath(n)&&1<ou(n))return e;h=au(n),r=u.getNode().getImmediateChild(a).updateChild(h,r);l=".priority"===a?c.updatePriority(u.getNode(),r):c.updateChild(u.getNode(),a,r,h,el,null)}c=Th(e,l,u.isFullyInitialized()||lu(n),c.filtersNodes());return ol(t,c,n,i,new nl(i,c,o),s)}function sl(t,e,n,r,i,o,a){var s,u,c=e.eventCache,h=new nl(i,e,o);return lu(n)?(u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),Ih(e,u,!0,t.filter.filtersNodes())):".priority"===(s=iu(n))?(u=t.filter.updatePriority(e.eventCache.getNode(),r),Ih(e,u,c.isFullyInitialized(),c.isFiltered())):(i=au(n),o=c.getNode().getImmediateChild(s),u=void 0,u=lu(i)?r:null!=(n=h.getCompleteChild(s))?".priority"===su(i)&&n.getChild(cu(i)).isEmpty()?n:n.updateChild(i,r):hc.EMPTY_NODE,o.equals(u)?e:Ih(e,t.filter.updateChild(c.getNode(),s,u,i,h,a),c.isFullyInitialized(),t.filter.filtersNodes()))}function ul(t,e){return t.eventCache.isCompleteForChild(e)}function cl(t,n,e){return e.foreach(function(t,e){n=n.updateChild(t,e)}),n}function hl(r,i,t,e,o,a,s,u){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;var c=i,e=lu(t)?e:new Ch(null).setTree(t,e),h=i.serverCache.getNode();return e.children.inorderTraversal(function(t,e){h.hasChild(t)&&(e=cl(0,i.serverCache.getNode().getImmediateChild(t),e),c=al(r,c,new eu(t),e,o,a,s,u))}),e.children.inorderTraversal(function(t,e){var n=!i.serverCache.isCompleteForChild(t)&&void 0===e.value;h.hasChild(t)||n||(e=cl(0,i.serverCache.getNode().getImmediateChild(t),e),c=al(r,c,new eu(t),e,o,a,s,u))}),c}var ll,fl=(Object.defineProperty(pl.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),pl);function pl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new Oc(n.getIndex()),i=(o=n).loadsAllData()?new Oc(o.getIndex()):new(o.hasLimit()?Mc:xc)(o);this.processor_={filter:i};var t=e.serverCache,n=e.eventCache,o=r.updateFullNode(hc.EMPTY_NODE,t.getNode(),null),e=i.updateFullNode(hc.EMPTY_NODE,n.getNode(),null),r=new vh(o,t.isFullyInitialized(),r.filtersNodes()),i=new vh(e,n.isFullyInitialized(),i.filtersNodes());this.viewCache_=wh(i,r),this.eventGenerator_=new mh(this.query_)}function dl(t){return 0===t.eventRegistrations_.length}function vl(t,e,n){var r,i=[];if(n&&(ao(null==e,"A cancel should cancel all event registrations."),r=t.query._path,t.eventRegistrations_.forEach(function(t){t=t.createCancelEvent(n,r);t&&i.push(t)})),e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function gl(t,e,n,r){e.type===eh.MERGE&&null!==e.source.queryId&&(ao(Sh(t.viewCache_),"We should always have a full cache before handling merges"),ao(Eh(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_,e=il(t.processor_,i,e,n,r);return n=t.processor_,r=e.viewCache,ao(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ao(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed"),ao(e.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=e.viewCache,yl(t,e.changes,e.viewCache.eventCache.getNode(),null)}function yl(t,e,n,r){r=r?[r]:t.eventRegistrations_;return bh(t.eventGenerator_,e,n,r)}var ml,bl=function(){this.views=new Map};function _l(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var s=t.views.get(a);return ao(null!=s,"SyncTree gave us an op for an invalid query."),gl(s,e,n,r)}var u=[];try{for(var c=to(t.views.values()),h=c.next();!h.done;h=c.next())s=h.value,u=u.concat(gl(s,e,n,r))}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function wl(t,e,n,r,i){var o=e._queryIdentifier,t=t.views.get(o);if(t)return t;o=Wh(n,i?r:null),t=!1,t=!!o||(o=r instanceof hc?Hh(n,r):hc.EMPTY_NODE,!1),i=wh(new vh(o,t,!1),new vh(r,i,!1));return new fl(e,i)}function Il(t,e,n,r,i,o){var a,o=wl(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),e=n,o.eventRegistrations_.push(e),e=n,o=(n=o).viewCache_.eventCache,a=[],o.getNode().isLeafNode()||o.getNode().forEachChild(Zu,function(t,e){a.push(Ac(t,e))}),o.isFullyInitialized()&&a.push(Nc(o.getNode())),yl(n,a,o.getNode(),e)}function Tl(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],c=Nl(t);if("default"===a)try{for(var h=to(t.views.entries()),l=h.next();!l.done;l=h.next()){var f=eo(l.value,2),p=f[0],d=f[1],u=u.concat(vl(d,n,r));dl(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||s.push(d.query))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=t.views.get(a))&&(u=u.concat(vl(d,n,r)),dl(d)&&(t.views.delete(a),d.query._queryParams.loadsAllData()||s.push(d.query)));return c&&!Nl(t)&&s.push((ao(ll,"Reference.ts has not been loaded"),new ll(e._repo,e._path))),{removed:s,events:u}}function El(t){var e,n,r=[];try{for(var i=to(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Sl(t,e){var n,r,i,o,a=null;try{for(var s=to(t.views.values()),u=s.next();!u.done;u=s.next())var c=u.value,a=a||(i=e,o=void 0,(o=Sh((c=c).viewCache_))&&(c.query._queryParams.loadsAllData()||!lu(i)&&!o.getImmediateChild(iu(i)).isEmpty())?o.getChild(i):null)}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a}function Cl(t,e){if(e._queryParams.loadsAllData())return Al(t);e=e._queryIdentifier;return t.views.get(e)}function kl(t,e){return null!=Cl(t,e)}function Nl(t){return null!=Al(t)}function Al(t){var e,n;try{for(var r=to(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Rl=1,Pl=function(t){this.listenProvider_=t,this.syncPointTree_=new Ch(null),this.pendingWriteTree_={visibleWrites:Nh.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Ol(t,e,n,r,i){var o,a,s,u;return o=t.pendingWriteTree_,a=e,s=n,u=i,ao((r=r)>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===u&&(u=!0),o.allWrites.push({path:a,snap:s,writeId:r,visible:u}),u&&(o.visibleWrites=Rh(o.visibleWrites,a,s)),o.lastWriteId=r,i?ql(t,new lh(ih(),e,n)):[]}function Dl(t,e,n,r){var i,o,a;i=t.pendingWriteTree_,o=e,a=n,ao((r=r)>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:o,children:a,writeId:r,visible:!0}),i.visibleWrites=Ph(i.visibleWrites,o,a),i.lastWriteId=r;n=Ch.fromObject(n);return ql(t,new ph(ih(),e,n))}function xl(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(qh(t.pendingWriteTree_,e)){var i=new Ch(null);return null!=r.snap?i=i.set(ru(),!0):ss(r.children,function(t){i=i.set(new eu(t),!0)}),ql(t,new sh(r.path,i,n))}return[]}function Ll(t,e,n){return ql(t,new lh(oh(),e,n))}function Ml(n,t,e,r){var i=t._path,o=n.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||kl(o,t))){var s=Tl(o,t,e,r);0===o.views.size&&(n.syncPointTree_=n.syncPointTree_.remove(i));e=s.removed,a=s.events,o=-1!==e.findIndex(function(t){return t._queryParams.loadsAllData()}),s=n.syncPointTree_.findOnPath(i,function(t,e){return Nl(e)});if(o&&!s){i=n.syncPointTree_.subtree(i);if(!i.isEmpty())for(var u=i.fold(function(t,e,n){if(e&&Nl(e))return[Al(e)];var r=[];return e&&(r=El(e)),ss(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var h=u[c],l=h.query,h=Bl(n,h);n.listenProvider_.startListening(Ql(l),Kl(n,l),h.hashFn,h.onComplete)}}!s&&0<e.length&&!r&&(o?n.listenProvider_.stopListening(Ql(t),null):e.forEach(function(t){var e=n.queryToTagMap.get(Wl(t));n.listenProvider_.stopListening(Ql(t),e)})),function(t,e){for(var n=0;n<e.length;++n){var r,i=e[n];i._queryParams.loadsAllData()||(r=Wl(i),i=t.queryToTagMap.get(r),t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i))}}(n,e)}return a}function Fl(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){t=fu(t,r);i=i||Sl(e,t),o=o||Nl(e)});var a=t.syncPointTree_.get(r);a?(o=o||Nl(a),i=i||Sl(a,ru())):(a=new bl,t.syncPointTree_=t.syncPointTree_.set(r,a)),null!=i?h=!0:(h=!1,i=hc.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){e=Sl(e,ru());e&&(i=i.updateImmediateChild(t,e))}));var s,u,c=kl(a,e);c||e._queryParams.loadsAllData()||(s=Wl(e),ao(!t.queryToTagMap.has(s),"View does not exist, but we have a tag"),u=Rl++,t.queryToTagMap.set(s,u),t.tagToQueryMap.set(u,s));var h=Il(a,e,n,jh(t.pendingWriteTree_,r),i,h);return c||o||(a=Cl(a,e),h=h.concat(function(t,e,n){var r=e._path,i=Kl(t,e),n=Bl(t,n),n=t.listenProvider_.startListening(Ql(e),i,n.hashFn,n.onComplete),r=t.syncPointTree_.subtree(r);if(i)ao(!Nl(r.value),"If we're adding a query, it shouldn't be shadowed");else for(var o=r.fold(function(t,e,n){if(!lu(t)&&e&&Nl(e))return[Al(e).query];var r=[];return e&&(r=r.concat(El(e).map(function(t){return t.query}))),ss(n,function(t,e){r=r.concat(e)}),r}),a=0;a<o.length;++a){var s=o[a];t.listenProvider_.stopListening(Ql(s),Kl(t,s))}return n}(t,e,a))),h}function Ul(t,n,e){var r=t.pendingWriteTree_,t=t.syncPointTree_.findOnPath(n,function(t,e){t=Sl(e,fu(t,n));if(t)return t});return Kh(r,n,t,e,!0)}function jl(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){t=fu(t,n);r=r||Sl(e,t)});var i=t.syncPointTree_.get(n);i?r=r||Sl(i,ru()):(i=new bl,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new vh(r,!0,!1):null,o=wl(i,e,jh(t.pendingWriteTree_,e._path),o?a.getNode():hc.EMPTY_NODE,o);return Eh(o.viewCache_)}function ql(t,e){return function t(e,n,r,i){{if(lu(e.path))return Vl(e,n,r,i);var o=n.get(ru());null==r&&null!=o&&(r=Sl(o,ru()));var a=[],s=iu(e.path),u=e.operationForChild(s),c=n.children.get(s);return c&&u&&(n=r?r.getImmediateChild(s):null,s=Xh(i,s),a=a.concat(t(u,c,n,s))),a=o?a.concat(_l(o,e,i,r)):a}}(e,t.syncPointTree_,null,jh(t.pendingWriteTree_,ru()))}function Vl(i,t,o,a){var e=t.get(ru());null==o&&null!=e&&(o=Sl(e,ru()));var s=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=Xh(a,t),t=i.operationForChild(t);t&&(s=s.concat(Vl(t,e,n,r)))}),s=e?s.concat(_l(e,i,a,o)):s}function Bl(r,t){var i=t.query,o=Kl(r,i);return{hashFn:function(){return(t.viewCache_.serverCache.getNode()||hc.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return o?function(t,e,n){var r=Hl(t,n);if(r){n=Gl(r),r=n.path,n=n.queryId,e=fu(r,e);return zl(t,r,new ch(ah(n),e))}return[]}(r,i._path,o):(e=r,n=i._path,ql(e,new ch(oh(),n)));var e,n,n=(n="Unknown Error","too_big"===(t=t)?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable"),(n=new Error(t+" at "+i._path.toString()+": "+n)).code=t.toUpperCase(),n);return Ml(r,i,null,n)}}}function Kl(t,e){e=Wl(e);return t.queryToTagMap.get(e)}function Wl(t){return t._path.toString()+"$"+t._queryIdentifier}function Hl(t,e){return t.tagToQueryMap.get(e)}function Gl(t){var e=t.indexOf("$");return ao(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new eu(t.substr(0,e))}}function zl(t,e,n){var r=t.syncPointTree_.get(e);return ao(r,"Missing sync point for query tag that we're tracking"),_l(r,n,jh(t.pendingWriteTree_,e),null)}function Ql(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?(ao(ml,"Reference.ts has not been loaded"),new ml(t._repo,t._path)):t}var Yl=(Jl.prototype.getImmediateChild=function(t){return new Jl(this.node_.getImmediateChild(t))},Jl.prototype.node=function(){return this.node_},Jl);function Jl(t){this.node_=t}var $l=(Zl.prototype.getImmediateChild=function(t){t=hu(this.path_,t);return new Zl(this.syncTree_,t)},Zl.prototype.node=function(){return Ul(this.syncTree_,this.path_)},Zl);function Zl(t,e){this.syncTree_=t,this.path_=e}var tf=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},ef=function(t,e,n){return t&&"object"==typeof t?(ao(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?nf(t[".sv"],e,n):"object"==typeof t[".sv"]?rf(t[".sv"],e):void ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},nf=function(t,e,n){if("timestamp"===t)return n.timestamp;ao(!1,"Unexpected server value: "+t)},rf=function(t,e,n){t.hasOwnProperty("increment")||ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2));t=t.increment;"number"!=typeof t&&ao(!1,"Unexpected increment value: "+t);e=e.node();if(ao(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return t;e=e.getValue();return"number"!=typeof e?t:e+t},of=function(t,e,n,r){return sf(e,new $l(n,t),r)},af=function(t,e,n){return sf(t,new Yl(e),n)};function sf(t,r,i){var e=t.getPriority().val(),n=ef(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,e=ef(o.getValue(),r,i);return e!==o.getValue()||n!==o.getPriority().val()?new Xu(e,vc(n)):t}var t=t,a=t;return n!==t.getPriority().val()&&(a=a.updatePriority(new Xu(n))),t.forEachChild(Zu,function(t,e){var n=sf(e,r.getImmediateChild(t),i);n!==e&&(a=a.updateImmediateChild(t,n))}),a}var uf=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function cf(t,e){for(var n=e instanceof eu?e:new eu(e),r=t,i=iu(n);null!==i;)var o=xo(r.node.children,i)||{children:{},childCount:0},r=new uf(i,r,o),i=iu(n=au(n));return r}function hf(t){return t.node.value}function lf(t,e){t.node.value=e,vf(t)}function ff(t){return 0<t.node.childCount}function pf(n,r){ss(n.node.children,function(t,e){r(new uf(t,n,e))})}function df(t){return new eu(null===t.parent?t.name:df(t.parent)+"/"+t.name)}function vf(t){var e,n,r,i;null!==t.parent&&(e=t.parent,n=t.name,i=function(t){return void 0===hf(t)&&!ff(t)}(r=t),t=Do(e.node.children,n),i&&t?(delete e.node.children[n],e.node.childCount--,vf(e)):i||t||(e.node.children[n]=r.node,e.node.childCount++,vf(e)))}function gf(t){return"string"==typeof t&&0!==t.length&&!wf.test(t)}function yf(t){return"string"==typeof t&&0!==t.length&&!If.test(t)}function mf(t,e,n,r){if(!r||void 0!==e){var i=Ho(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];ss(e,function(t,e){t=new eu(t);if(Cf(i,e,hu(n,t)),".priority"===su(t)&&!Ef(e))throw new Error(i+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(t)}),function(t,e){for(var n=0;n<e.length;n++)for(var r,i=uu(r=e[n]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!gf(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(pu);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&vu(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}}function bf(t,e,n){if(!n||void 0!==e){if(Va(e))throw new Error(Ho(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ef(e))throw new Error(Ho(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function _f(t,e,n,r){if(!(r&&void 0===n||gf(n)))throw new Error(Ho(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}var wf=/[\[\].#$\/\u0000-\u001F\u007F]/,If=/[\[\].#$\u0000-\u001F\u007F]/,Tf=10485760,Ef=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Va(t)||t&&"object"==typeof t&&Do(t,".sv")},Sf=function(t,e,n,r){r&&void 0===e||Cf(Ho(t,"value"),e,n)},Cf=function(r,t,e){var i=e instanceof eu?new gu(e,r):e;if(void 0===t)throw new Error(r+"contains undefined "+mu(i));if("function"==typeof t)throw new Error(r+"contains a function "+mu(i)+" with contents = "+t.toString());if(Va(t))throw new Error(r+"contains "+t.toString()+" "+mu(i));if("string"==typeof t&&t.length>Tf/3&&Qo(t)>Tf)throw new Error(r+"contains a string greater than "+Tf+" utf8 bytes "+mu(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var o=!1,a=!1;if(ss(t,function(t,e){if(".value"===t)o=!0;else if(".priority"!==t&&".sv"!==t&&(a=!0,!gf(t)))throw new Error(r+" contains an invalid key ("+t+") "+mu(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var n;n=t,0<(t=i).parts_.length&&(t.byteLength_+=1),t.parts_.push(n),t.byteLength_+=Qo(n),yu(t),Cf(r,e,i),e=(t=i).parts_.pop(),t.byteLength_-=Qo(e),0<t.parts_.length&&--t.byteLength_}),o&&a)throw new Error(r+' contains ".value" child '+mu(i)+" in addition to actual children.")}},kf=function(t,e,n,r){if(!(r&&void 0===n||yf(n)))throw new Error(Ho(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Nf=function(t,e,n,r){n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),kf(t,e,n,r)},Af=function(t,e){if(".info"===iu(e))throw new Error(t+" failed = Can't modify data under /.info/")},Rf=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!gf(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&(n=(n=n)&&n.replace(/^\/*\.info(\/|$)/,"/"),!yf(n)))throw new Error(Ho(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Pf=function(){this.eventLists_=[],this.recursionDepth_=0};function Of(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||du(o,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&t.eventLists_.push(n)}function Df(t,e,n){Of(t,n),Lf(t,function(t){return du(t,e)})}function xf(t,e,n){Of(t,n),Lf(t,function(t){return vu(t,e)||vu(e,t)})}function Lf(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(var e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),Ja&&Za("event: "+r.toString()),ds(n))}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}var Mf="repo_interrupt",Ff=25,Uf=(jf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},jf);function jf(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xc(),this.transactionQueueTree_=new uf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function qf(a,t,e){if(a.stats_=Ps(a.repoInfo_),a.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))a.server_=new Gc(a.repoInfo_,function(t,e,n,r){Kf(a,t,e,n,r)},a.authTokenProvider_,a.appCheckProvider_),setTimeout(function(){return Wf(a,!0)},0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Po(e)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}a.persistentConnection_=new Su(a.repoInfo_,t,function(t,e,n,r){Kf(a,t,e,n,r)},function(t){Wf(a,t)},function(t){var n;n=a,ss(t,function(t,e){Hf(n,t,e)})},a.authTokenProvider_,a.appCheckProvider_,e),a.server_=a.persistentConnection_}var n;a.authTokenProvider_.addTokenChangeListener(function(t){a.server_.refreshAuthToken(t)}),a.appCheckProvider_.addTokenChangeListener(function(t){a.server_.refreshAppCheckToken(t.token)}),a.statsReporter_=(n=a.repoInfo_,t=function(){return new nh(a.stats_,a.server_)},n=n.toString(),Rs[n]||(Rs[n]=t()),Rs[n]),a.infoData_=new Qc,a.infoSyncTree_=new Pl({startListening:function(t,e,n,r){var i=[],o=a.infoData_.getNode(t._path);return o.isEmpty()||(i=Ll(a.infoSyncTree_,t._path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),Hf(a,"connected",!1),a.serverSyncTree_=new Pl({startListening:function(n,t,e,r){return a.server_.listen(n,e,t,function(t,e){e=r(t,e);xf(a.eventQueue_,n._path,e)}),[]},stopListening:function(t,e){a.server_.unlisten(t,e)}})}function Vf(t){t=t.infoData_.getNode(new eu(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Bf(t){return tf({timestamp:Vf(t)})}function Kf(t,e,n,r,i){t.dataUpdateCount++;var o=new eu(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a,s,u,c=[],h=o;0<(c=i?r?(a=Mo(n,function(t){return vc(t)}),function(t,e,n,r){var i=Hl(t,r);if(i){r=Gl(i),i=r.path,r=r.queryId,e=fu(i,e),n=Ch.fromObject(n);return zl(t,i,new ph(ah(r),e,n))}return[]}(t.serverSyncTree_,o,a,i)):(e=vc(n),a=t.serverSyncTree_,s=o,u=e,null==(i=Hl(a,e=i))?[]:(e=Gl(i),i=e.path,e=e.queryId,s=fu(i,s),zl(a,i,new lh(ah(e),s,u)))):r?(s=Mo(n,function(t){return vc(t)}),u=t.serverSyncTree_,r=o,s=s,s=Ch.fromObject(s),ql(u,new ph(oh(),r,s))):(n=vc(n),Ll(t.serverSyncTree_,o,n))).length&&(h=np(t,o)),xf(t.eventQueue_,h,c)}function Wf(t,e){Hf(t,"connected",e),!1===e&&function(n){$f(n,"onDisconnectEvents");var r=Bf(n),i=Xc();$c(n.onDisconnect_,ru(),function(t,e){e=of(t,e,n.serverSyncTree_,r);Jc(i,t,e)});var o=[];$c(i,ru(),function(t,e){o=o.concat(Ll(n.serverSyncTree_,t,e));t=ap(n,t);np(n,t)}),n.onDisconnect_=Xc(),xf(n.eventQueue_,ru(),o)}(t)}function Hf(t,e,n){e=new eu("/.info/"+e),n=vc(n);t.infoData_.updateSnapshot(e,n);n=Ll(t.infoSyncTree_,e,n);xf(t.eventQueue_,e,n)}function Gf(t){return t.nextWriteId_++}function zf(r,i,t,e,o){$f(r,"set",{path:i.toString(),value:t,priority:e});var n=Bf(r),t=vc(t,e),e=Ul(r.serverSyncTree_,i),n=af(t,e,n),a=Gf(r),n=Ol(r.serverSyncTree_,i,n,a,!0);Of(r.eventQueue_,n),r.server_.put(i.toString(),t.val(!0),function(t,e){var n="ok"===t;n||ns("set at "+i+" failed: "+t);n=xl(r.serverSyncTree_,a,!n);xf(r.eventQueue_,i,n),Zf(0,o,t,e)});t=ap(r,i);np(r,t),xf(r.eventQueue_,t,[])}function Qf(n,r,i){n.server_.onDisconnectCancel(r.toString(),function(t,e){"ok"===t&&!function t(n,e){if(lu(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;var r=n.value;return n.value=null,r.forEachChild(Zu,function(t,e){Jc(n,new eu(t),e)}),t(n,e)}if(0<n.children.size)return r=iu(e),e=au(e),n.children.has(r)&&t(n.children.get(r),e)&&n.children.delete(r),0===n.children.size;return!0}(n.onDisconnect_,r),Zf(0,i,t,e)})}function Yf(n,r,t,i){var o=vc(t);n.server_.onDisconnectPut(r.toString(),o.val(!0),function(t,e){"ok"===t&&Jc(n.onDisconnect_,r,o),Zf(0,i,t,e)})}function Xf(t,e,n){n=".info"===iu(e._path)?Ml(t.infoSyncTree_,e,n):Ml(t.serverSyncTree_,e,n);Df(t.eventQueue_,e._path,n)}function Jf(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Mf)}function $f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Za.apply(void 0,no([r],eo(e)))}function Zf(t,n,r,i){n&&ds(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})}function tp(t,e,n){return Ul(t.serverSyncTree_,e,n)||hc.EMPTY_NODE}function ep(e,t){var n;(t=void 0===t?e.transactionQueueTree_:t)||op(e,t),hf(t)?(n=ip(e,t),ao(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(i,o,a){for(var t=a.map(function(t){return t.currentWriteId}),e=tp(i,o,t),n=e,t=e.hash(),r=0;r<a.length;r++){var s=a[r];ao(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var u=fu(o,s.path);n=n.updateChild(u,s.currentOutputSnapshotRaw)}var e=n.val(!0),c=o;i.server_.put(c.toString(),e,function(t){$f(i,"transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<a.length;r++)!function(t){a[t].status=2,e=e.concat(xl(i.serverSyncTree_,a[t].currentWriteId)),a[t].onComplete&&n.push(function(){return a[t].onComplete(null,!0,a[t].currentOutputSnapshotResolved)}),a[t].unwatcher()}(r);op(i,cf(i.transactionQueueTree_,o)),ep(i,i.transactionQueueTree_),xf(i.eventQueue_,o,e);for(r=0;r<n.length;r++)ds(n[r])}else{if("datastale"===t)for(r=0;r<a.length;r++)3===a[r].status?a[r].status=4:a[r].status=0;else{ns("transaction at "+c.toString()+" failed: "+t);for(r=0;r<a.length;r++)a[r].status=4,a[r].abortReason=t}np(i,o)}},t)}(e,df(t),n)):ff(t)&&pf(t,function(t){ep(e,t)})}function np(t,e){var n=rp(t,e),e=df(n);return function(u,c,h){if(0===c.length)return;for(var l=[],f=[],p=c.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),t=0;t<c.length;t++)!function(t){var e,n,r,i,o=c[t],a=fu(h,o.path),s=!1;ao(null!==a,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status?(s=!0,e=o.abortReason,f=f.concat(xl(u.serverSyncTree_,o.currentWriteId,!0))):0===o.status&&(f=o.retryCount>=Ff?(s=!0,e="maxretry",f.concat(xl(u.serverSyncTree_,o.currentWriteId,!0))):(n=tp(u,o.path,p),o.currentInputSnapshot=n,void 0!==(i=c[t].update(n.val()))?(Cf("transaction failed: Data returned ",i,o.path),r=vc(i),"object"==typeof i&&null!=i&&Do(i,".priority")||(r=r.updatePriority(n.getPriority())),a=o.currentWriteId,i=Bf(u),i=af(r,n,i),o.currentOutputSnapshotRaw=r,o.currentOutputSnapshotResolved=i,o.currentWriteId=Gf(u),p.splice(p.indexOf(a),1),(f=f.concat(Ol(u.serverSyncTree_,o.path,i,o.currentWriteId,o.applyLocally))).concat(xl(u.serverSyncTree_,a,!0))):(s=!0,e="nodata",f.concat(xl(u.serverSyncTree_,o.currentWriteId,!0))))),xf(u.eventQueue_,h,f),f=[],s&&(c[t].status=2,s=c[t].unwatcher,setTimeout(s,Math.floor(0)),c[t].onComplete&&("nodata"===e?l.push(function(){return c[t].onComplete(null,!1,c[t].currentInputSnapshot)}):l.push(function(){return c[t].onComplete(new Error(e),!1,null)})))}(t);op(u,u.transactionQueueTree_);for(t=0;t<l.length;t++)ds(l[t]);ep(u,u.transactionQueueTree_)}(t,ip(t,n),e),e}function rp(t,e){for(var n=t.transactionQueueTree_,r=iu(e);null!==r&&void 0===hf(n);)n=cf(n,r),r=iu(e=au(e));return n}function ip(t,e){var n=[];return function e(n,t,r){var i=hf(t);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);pf(t,function(t){e(n,t,r)})}(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function op(e,t){var n=hf(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,lf(t,0<n.length?n:void 0)}pf(t,function(t){op(e,t)})}function ap(e,t){var n=df(rp(e,t)),t=cf(e.transactionQueueTree_,t);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return;r=r.parent}}(t,function(t){sp(e,t)}),sp(e,t),function e(t,n,r,i){r&&!i&&n(t),pf(t,function(t){e(t,n,!0,i)}),r&&i&&n(t)}(t,function(t){sp(e,t)}),n}function sp(t,e){var n=hf(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(ao(o===a-1,"All SENT items should be at beginning of queue."),n[o=a].status=3,n[a].abortReason="set"):(ao(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(xl(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?lf(e,void 0):n.length=o+1,xf(t.eventQueue_,df(e),i);for(a=0;a<r.length;a++)ds(r[a])}}var up=function(t,e){var n=cp(t),r=n.namespace;"firebase.com"===n.domain&&es(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||es("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ns("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");t="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Es(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new eu(n.pathString)}},cp=function(t){var e,n,r,i="",o="",a="",s="",u="",c=!0,h="https",l=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(s=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=to(t.split("&")),o=i.next();!o.done;o=i.next()){var a,s=o.value;0!==s.length&&(2===(a=s.split("=")).length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):ns("Invalid query segment '"+s+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),a=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=a),"ns"in n&&(u=n.ns)),{host:i,port:l,domain:o,subdomain:a,secure:c,scheme:h,pathString:s,namespace:u}},hp=(lp.prototype.getPath=function(){var t=this.snapshot.ref;return("value"===this.eventType?t:t.parent)._path},lp.prototype.getEventType=function(){return this.eventType},lp.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},lp.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Po(this.snapshot.exportVal())},lp);function lp(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var fp=(pp.prototype.getPath=function(){return this.path},pp.prototype.getEventType=function(){return"cancel"},pp.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},pp.prototype.toString=function(){return this.path.toString()+":cancel"},pp);function pp(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var dp=(vp.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},vp.prototype.onCancel=function(t){return ao(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(vp.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),vp.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},vp);function vp(t,e){this.snapshotCallback=t,this.cancelCallback=e}var gp=(yp.prototype.cancel=function(){var t=new lo;return Qf(this._repo,this._path,t.wrapCallback(function(){})),t.promise},yp.prototype.remove=function(){Af("OnDisconnect.remove",this._path);var t=new lo;return Yf(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},yp.prototype.set=function(t){Af("OnDisconnect.set",this._path),Sf("OnDisconnect.set",t,this._path,!1);var e=new lo;return Yf(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},yp.prototype.setWithPriority=function(t,e){Af("OnDisconnect.setWithPriority",this._path),Sf("OnDisconnect.setWithPriority",t,this._path,!1),bf("OnDisconnect.setWithPriority",e,!1);var n,r,i,o,a=new lo;return n=this._repo,r=this._path,t=t,e=e,i=a.wrapCallback(function(){}),o=vc(t,e),n.server_.onDisconnectPut(r.toString(),o.val(!0),function(t,e){"ok"===t&&Jc(n.onDisconnect_,r,o),Zf(0,i,t,e)}),a.promise},yp.prototype.update=function(t){Af("OnDisconnect.update",this._path),mf("OnDisconnect.update",t,this._path,!1);var e=new lo;return function(n,r,i,o){if(Lo(i))return Za("onDisconnect().update() called with empty data.  Don't do anything."),Zf(0,o,"ok",void 0);n.server_.onDisconnectMerge(r.toString(),i,function(t,e){"ok"===t&&ss(i,function(t,e){e=vc(e);Jc(n.onDisconnect_,hu(r,t),e)}),Zf(0,o,t,e)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},yp);function yp(t,e){this._repo=t,this._path=e}var mp=(Object.defineProperty(bp.prototype,"key",{get:function(){return lu(this._path)?null:su(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(bp.prototype,"ref",{get:function(){return new Ep(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(bp.prototype,"_queryIdentifier",{get:function(){var t=Wc(this._queryParams),t=as(t);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(bp.prototype,"_queryObject",{get:function(){return Wc(this._queryParams)},enumerable:!1,configurable:!0}),bp.prototype.isEqual=function(t){if(!((t=ta(t))instanceof bp))return!1;var e=this._repo===t._repo,n=du(this._path,t._path),t=this._queryIdentifier===t._queryIdentifier;return e&&n&&t},bp.prototype.toJSON=function(){return this.toString()},bp.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},bp);function bp(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}function _p(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function wp(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Du){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==rs)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==is)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Zu){if(null!=e&&!Ef(e)||null!=n&&!Ef(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ao(t.getIndex()instanceof mc||t.getIndex()===Sc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ip(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Tp,Ep=(Xi(Sp,Tp=mp),Object.defineProperty(Sp.prototype,"parent",{get:function(){var t=cu(this._path);return null===t?null:new Sp(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(Sp.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),Sp);function Sp(t,e){return Tp.call(this,t,e,new Uc,!1)||this}var Cp=(Object.defineProperty(kp.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(kp.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(kp.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),kp.prototype.child=function(t){var e=new eu(t),t=Rp(this.ref,t);return new kp(this._node.getChild(e),t,Zu)},kp.prototype.exists=function(){return!this._node.isEmpty()},kp.prototype.exportVal=function(){return this._node.val(!0)},kp.prototype.forEach=function(n){var r=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(t,e){return n(new kp(e,Rp(r.ref,t),Zu))})},kp.prototype.hasChild=function(t){t=new eu(t);return!this._node.getChild(t).isEmpty()},kp.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},kp.prototype.toJSON=function(){return this.exportVal()},kp.prototype.val=function(){return this._node.val()},kp);function kp(t,e,n){this._node=t,this.ref=e,this._index=n}function Np(t,e){return(t=ta(t))._checkNotDeleted("ref"),void 0!==e?Rp(t._root,e):t._root}function Ap(t,e){(t=ta(t))._checkNotDeleted("refFromURL");var n=up(e,t._repo.repoInfo_.nodeAdmin);Rf("refFromURL",n);e=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||e.host===t._repo.repoInfo_.host||es("refFromURL: Host name does not match the current database: (found "+e.host+" but expected "+t._repo.repoInfo_.host+")"),Np(t,n.path.toString())}function Rp(t,e){return(null===iu((t=ta(t))._path)?Nf:kf)("child","path",e,!1),new Ep(t._repo,hu(t._path,e))}function Pp(t,e){t=ta(t),Af("set",t._path),Sf("set",e,t._path,!1);var n=new lo;return zf(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Op(t,e){mf("update",e,t._path,!1);var n=new lo;return function(i,o,t,a){$f(i,"update",{path:o.toString(),value:t});var s,e,n=!0,r=Bf(i),u={};ss(t,function(t,e){n=!1,u[t]=of(hu(o,t),vc(e),i.serverSyncTree_,r)}),n?(Za("update() called with empty data.  Don't do anything."),Zf(0,a,"ok",void 0)):(s=Gf(i),e=Dl(i.serverSyncTree_,o,u,s),Of(i.eventQueue_,e),i.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||ns("update at "+o+" failed: "+t);var r=xl(i.serverSyncTree_,s,!n),n=0<r.length?np(i,o):o;xf(i.eventQueue_,n,r),Zf(0,a,t,e)}),ss(t,function(t){t=ap(i,hu(o,t));np(i,t)}),xf(i.eventQueue_,o,[]))}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}function Dp(e){return e=ta(e),n=e._repo,r=e,(null!=(t=jl(n.serverSyncTree_,r))?Promise.resolve(t):n.server_.get(r).then(function(t){var e=vc(t),t=Ll(n.serverSyncTree_,r._path,e);return Df(n.eventQueue_,r._path,t),Promise.resolve(e)},function(t){return $f(n,"get for query "+Po(r)+" failed: "+t),Promise.reject(new Error(t))})).then(function(t){return new Cp(t,new Ep(e._repo,e._path),e._queryParams.getIndex())});var n,r,t}var xp=(Lp.prototype.respondsTo=function(t){return"value"===t},Lp.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new hp("value",this,new Cp(t.snapshotNode,new Ep(e._repo,e._path),n))},Lp.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},Lp.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new fp(this,t,e):null},Lp.prototype.matches=function(t){return t instanceof Lp&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},Lp.prototype.hasAnyCallback=function(){return null!==this.callbackContext},Lp);function Lp(t){this.callbackContext=t}var Mp=(Fp.prototype.respondsTo=function(t){t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t;return this.eventType===t},Fp.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new fp(this,t,e):null},Fp.prototype.createEvent=function(t,e){ao(null!=t.childName,"Child events should have a childName.");var n=Rp(new Ep(e._repo,e._path),t.childName),e=e._queryParams.getIndex();return new hp(t.type,this,new Cp(t.snapshotNode,n,e),t.prevName)},Fp.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},Fp.prototype.matches=function(t){return t instanceof Fp&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))},Fp.prototype.hasAnyCallback=function(){return!!this.callbackContext},Fp);function Fp(t,e){this.eventType=t,this.callbackContext=e}function Up(n,t,e,r,i){var o;"object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce&&((i=function(t,e){o(t,e),Xf(n._repo,n,s)}).userCallback=(o=e).userCallback,i.context=e.context,e=i);var a,e=new dp(e,a||void 0),s="value"===t?new xp(e):new Mp(t,e);return a=n._repo,t=s,t=".info"===iu((e=n)._path)?Fl(a.infoSyncTree_,e,t):Fl(a.serverSyncTree_,e,t),Df(a.eventQueue_,e._path,t),function(){return Xf(n._repo,n,s)}}function jp(t,e,n,r){return Up(t,"value",e,n,r)}function qp(t,e,n,r){return Up(t,"child_added",e,n,r)}function Vp(t,e,n,r){return Up(t,"child_changed",e,n,r)}function Bp(t,e,n,r){return Up(t,"child_moved",e,n,r)}function Kp(t,e,n,r){return Up(t,"child_removed",e,n,r)}function Wp(t,e,n){var r=null,n=n?new dp(n):null;"value"===e?r=new xp(n):e&&(r=new Mp(e,n)),Xf(t._repo,t,r)}var Hp,Sn=function(){},Gp=(Xi(zp,Hp=Sn),zp.prototype._apply=function(t){Sf("endAt",this._value,t._path,!0);var e=Vc(t._queryParams,this._value,this._key);if(Ip(e),wp(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mp(t._repo,t._path,e,t._orderByCalled)},zp);function zp(t,e){var n=Hp.call(this)||this;return n._value=t,n._key=e,n}var Qp,Yp=(Xi(Xp,Qp=Sn),Xp.prototype._apply=function(t){Sf("endBefore",this._value,t._path,!1);var e,n,r,r=(e=t._queryParams,n=this._value,r=this._key,(r=e.index_===Du?Vc(e,n="string"==typeof n?Ic(n):n,r):Vc(e,n,null==r?rs:Ic(r))).endBeforeSet_=!0,r);if(Ip(r),wp(r),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mp(t._repo,t._path,r,t._orderByCalled)},Xp);function Xp(t,e){var n=Qp.call(this)||this;return n._value=t,n._key=e,n}var Jp,$p=(Xi(Zp,Jp=Sn),Zp.prototype._apply=function(t){Sf("startAt",this._value,t._path,!0);var e=qc(t._queryParams,this._value,this._key);if(Ip(e),wp(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new mp(t._repo,t._path,e,t._orderByCalled)},Zp);function Zp(t,e){var n=Jp.call(this)||this;return n._value=t,n._key=e,n}var td,ed=(Xi(nd,td=Sn),nd.prototype._apply=function(t){Sf("startAfter",this._value,t._path,!1);var e,n,r,r=(e=t._queryParams,n=this._value,r=this._key,(r=e.index_===Du?qc(e,n="string"==typeof n?wc(n):n,r):qc(e,n,null==r?is:wc(r))).startAfterSet_=!0,r);if(Ip(r),wp(r),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new mp(t._repo,t._path,r,t._orderByCalled)},nd);function nd(t,e){var n=td.call(this)||this;return n._value=t,n._key=e,n}var rd,id=(Xi(od,rd=Sn),od.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new mp(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="l",e),t._orderByCalled);var e,n},od);function od(t){var e=rd.call(this)||this;return e._limit=t,e}var ad,sd=(Xi(ud,ad=Sn),ud.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new mp(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="r",e),t._orderByCalled);var e,n},ud);function ud(t){var e=ad.call(this)||this;return e._limit=t,e}var cd,hd=(Xi(ld,cd=Sn),ld.prototype._apply=function(t){_p(t,"orderByChild");var e=new eu(this._path);if(lu(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");e=new mc(e),e=Bc(t._queryParams,e);return wp(e),new mp(t._repo,t._path,e,!0)},ld);function ld(t){var e=cd.call(this)||this;return e._path=t,e}var fd,pd=(Xi(dd,fd=Sn),dd.prototype._apply=function(t){_p(t,"orderByKey");var e=Bc(t._queryParams,Du);return wp(e),new mp(t._repo,t._path,e,!0)},dd);function dd(){return null!==fd&&fd.apply(this,arguments)||this}var vd,gd=(Xi(yd,vd=Sn),yd.prototype._apply=function(t){_p(t,"orderByPriority");var e=Bc(t._queryParams,Zu);return wp(e),new mp(t._repo,t._path,e,!0)},yd);function yd(){return null!==vd&&vd.apply(this,arguments)||this}var md,bd=(Xi(_d,md=Sn),_d.prototype._apply=function(t){_p(t,"orderByValue");var e=Bc(t._queryParams,Sc);return wp(e),new mp(t._repo,t._path,e,!0)},_d);function _d(){return null!==md&&md.apply(this,arguments)||this}var wd,Id,Td,Ed=(Xi(Sd,wd=Sn),Sd.prototype._apply=function(t){if(Sf("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gp(this._value,this._key)._apply(new $p(this._value,this._key)._apply(t))},Sd);function Sd(t,e){var n=wd.call(this)||this;return n._value=t,n._key=e,n}function Cd(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=ta(t);try{for(var a=to(r),s=a.next();!s.done;s=a.next())o=s.value._apply(o)}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}Id=Ep,ao(!ll,"__referenceConstructor has already been defined"),ll=Id,Td=Ep,ao(!ml,"__referenceConstructor has already been defined"),ml=Td;var kd="FIREBASE_DATABASE_EMULATOR_HOST",Nd={},Ad=!1;function Rd(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||es("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Za("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=up(o,i),u=s.repoInfo,r=void 0;(r="undefined"!=typeof process?process.env[kd]:r)?(a=!0,o="http://"+r+"?ns="+u.namespace,u=(s=up(o,i)).repoInfo):a=!s.repoInfo.secure;e=i&&a?new bs(bs.OWNER):new ys(t.name,t.options,e);Rf("Invalid Firebase Database URL",s),lu(s.path)||es("Database URL must point to the root of a Firebase Database (not including a child path).");n=function(t,e,n,r){var i=Nd[e.name];i||(i={},Nd[e.name]=i);e=i[t.toURLString()];e&&es("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return e=new Uf(t,Ad,n,r),i[t.toURLString()]=e}(u,t,e,new vs(t.name,n));return new Pd(n,t)}var Pd=(Object.defineProperty(Od.prototype,"_repo",{get:function(){return this._instanceStarted||(qf(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(Od.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ep(this._repo,ru())),this._rootInternal},enumerable:!1,configurable:!0}),Od.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,e=this.app.name,(n=Nd[e])&&n[t.key]===t||es("Database "+e+"("+t.repoInfo_+") has already been deleted."),Jf(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},Od.prototype._checkNotDeleted=function(t){null===this._rootInternal&&es("Cannot call "+t+" on a deleted database.")},Od);function Od(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}function Dd(t,e,n,r){void 0===r&&(r={}),(t=ta(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&es("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;i.repoInfo_.nodeAdmin?(r.mockUserToken&&es('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new bs(bs.OWNER)):r.mockUserToken&&(t=po(r.mockUserToken,t.app.options.projectId),o=new bs(t)),e=e,n=n,o=o,(i=i).repoInfo_=new Es(e+":"+n,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),o&&(i.authTokenProvider_=o)}function xd(t){(t=ta(t))._checkNotDeleted("goOnline"),(t=t._repo).persistentConnection_&&t.persistentConnection_.resume(Mf)}var Ld={".sv":"timestamp"};var Md=(Fd.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},Fd);function Fd(t,e){this.committed=t,this.snapshot=e}function Ud(i,t,e){if(i=ta(i),Af("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";var e=null===(n=null==e?void 0:e.applyLocally)||void 0===n||n,o=new lo,n=jp(i,function(){});return function(t,e,n,r,i,o){$f(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:Ya(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},n=tp(t,e,void 0);a.currentInputSnapshot=n,void 0===(r=a.update(n.val()))?(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot)):(Cf("transaction failed: Data returned ",r,a.path),a.status=0,(i=hf(o=cf(t.transactionQueueTree_,e))||[]).push(a),lf(o,i),o=void 0,"object"==typeof r&&null!==r&&Do(r,".priority")?(o=xo(r,".priority"),ao(Ef(o),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):o=(Ul(t.serverSyncTree_,e)||hc.EMPTY_NODE).getPriority().val(),i=Bf(t),o=vc(r,o),i=af(o,n,i),a.currentOutputSnapshotRaw=o,a.currentOutputSnapshotResolved=i,a.currentWriteId=Gf(t),a=Ol(t.serverSyncTree_,e,i,a.currentWriteId,a.applyLocally),xf(t.eventQueue_,e,a),ep(t,t.transactionQueueTree_))}(i._repo,i._path,t,function(t,e,n){var r;t?o.reject(t):(r=new Cp(n,new Ep(i._repo,i._path),Zu),o.resolve(new Md(e,r)))},n,e),o.promise}var jd=(qd.prototype.cancel=function(e){Wo("OnDisconnect.cancel",0,1,arguments.length),Go("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},qd.prototype.remove=function(e){Wo("OnDisconnect.remove",0,1,arguments.length),Go("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},qd.prototype.set=function(t,e){Wo("OnDisconnect.set",1,2,arguments.length),Go("OnDisconnect.set","onComplete",e,!0);t=this._delegate.set(t);return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},qd.prototype.setWithPriority=function(t,e,n){Wo("OnDisconnect.setWithPriority",2,3,arguments.length),Go("OnDisconnect.setWithPriority","onComplete",n,!0);e=this._delegate.setWithPriority(t,e);return n&&e.then(function(){return n(null)},function(t){return n(t)}),e},qd.prototype.update=function(t,e){if(Wo("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ns("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Go("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},qd);function qd(t){this._delegate=t}var Vd=(Bd.prototype.toJSON=function(){return Wo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},Bd);function Bd(t,e){this.committed=t,this.snapshot=e}var Kd=(Wd.prototype.val=function(){return Wo("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},Wd.prototype.exportVal=function(){return Wo("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},Wd.prototype.toJSON=function(){return Wo("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},Wd.prototype.exists=function(){return Wo("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},Wd.prototype.child=function(t){return Wo("DataSnapshot.child",0,1,arguments.length),t=String(t),kf("DataSnapshot.child","path",t,!1),new Wd(this._database,this._delegate.child(t))},Wd.prototype.hasChild=function(t){return Wo("DataSnapshot.hasChild",1,1,arguments.length),kf("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},Wd.prototype.getPriority=function(){return Wo("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},Wd.prototype.forEach=function(e){var n=this;return Wo("DataSnapshot.forEach",1,1,arguments.length),Go("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(t){return e(new Wd(n._database,t))})},Wd.prototype.hasChildren=function(){return Wo("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(Wd.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),Wd.prototype.numChildren=function(){return Wo("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},Wd.prototype.getRef=function(){return Wo("DataSnapshot.ref",0,0,arguments.length),new Qd(this._database,this._delegate.ref)},Object.defineProperty(Wd.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Wd);function Wd(t,e){this._database=t,this._delegate=e}var Hd=(Gd.prototype.on=function(t,n,e,r){var i=this;Wo("Query.on",2,4,arguments.length),Go("Query.on","callback",n,!1);function o(t,e){n.call(a.context,new Kd(i.database,t),e)}var a=Gd.getCancelAndContextArgs_("Query.on",e,r);o.userCallback=n,o.context=a.context;var s=null===(r=a.cancel)||void 0===r?void 0:r.bind(a.context);switch(t){case"value":return jp(this._delegate,o,s),n;case"child_added":return qp(this._delegate,o,s),n;case"child_removed":return Kp(this._delegate,o,s),n;case"child_changed":return Vp(this._delegate,o,s),n;case"child_moved":return Bp(this._delegate,o,s),n;default:throw new Error(Ho("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Gd.prototype.off=function(t,e,n){var r;Wo("Query.off",0,3,arguments.length),function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ho(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",t,!0),Go("Query.off","callback",e,!0),zo("Query.off","context",n,!0),e?((r=function(){}).userCallback=e,r.context=n,Wp(this._delegate,t,r)):Wp(this._delegate,t)},Gd.prototype.get=function(){var e=this;return Dp(this._delegate).then(function(t){return new Kd(e.database,t)})},Gd.prototype.once=function(t,n,e,r){var i=this;Wo("Query.once",1,4,arguments.length),Go("Query.once","callback",n,!0);function o(t,e){t=new Kd(i.database,t),n&&n.call(a.context,t,e),s.resolve(t)}var a=Gd.getCancelAndContextArgs_("Query.on",e,r),s=new lo;o.userCallback=n,o.context=a.context;function u(t){a.cancel&&a.cancel.call(a.context,t),s.reject(t)}switch(t){case"value":jp(this._delegate,o,u,{onlyOnce:!0});break;case"child_added":qp(this._delegate,o,u,{onlyOnce:!0});break;case"child_removed":Kp(this._delegate,o,u,{onlyOnce:!0});break;case"child_changed":Vp(this._delegate,o,u,{onlyOnce:!0});break;case"child_moved":Bp(this._delegate,o,u,{onlyOnce:!0});break;default:throw new Error(Ho("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},Gd.prototype.limitToFirst=function(t){return Wo("Query.limitToFirst",1,1,arguments.length),new Gd(this.database,Cd(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new id(t)}(t)))},Gd.prototype.limitToLast=function(t){return Wo("Query.limitToLast",1,1,arguments.length),new Gd(this.database,Cd(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new sd(t)}(t)))},Gd.prototype.orderByChild=function(t){return Wo("Query.orderByChild",1,1,arguments.length),new Gd(this.database,Cd(this._delegate,function(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return kf("orderByChild","path",t,!1),new hd(t)}(t)))},Gd.prototype.orderByKey=function(){return Wo("Query.orderByKey",0,0,arguments.length),new Gd(this.database,Cd(this._delegate,new pd))},Gd.prototype.orderByPriority=function(){return Wo("Query.orderByPriority",0,0,arguments.length),new Gd(this.database,Cd(this._delegate,new gd))},Gd.prototype.orderByValue=function(){return Wo("Query.orderByValue",0,0,arguments.length),new Gd(this.database,Cd(this._delegate,new bd))},Gd.prototype.startAt=function(t,e){return void 0===t&&(t=null),Wo("Query.startAt",0,2,arguments.length),new Gd(this.database,Cd(this._delegate,(void 0===(t=t)&&(t=null),_f("startAt","key",e=e,!0),new $p(t,e))))},Gd.prototype.startAfter=function(t,e){return void 0===t&&(t=null),Wo("Query.startAfter",0,2,arguments.length),new Gd(this.database,Cd(this._delegate,(t=t,_f("startAfter","key",e=e,!0),new ed(t,e))))},Gd.prototype.endAt=function(t,e){return void 0===t&&(t=null),Wo("Query.endAt",0,2,arguments.length),new Gd(this.database,Cd(this._delegate,(t=t,_f("endAt","key",e=e,!0),new Gp(t,e))))},Gd.prototype.endBefore=function(t,e){return void 0===t&&(t=null),Wo("Query.endBefore",0,2,arguments.length),new Gd(this.database,Cd(this._delegate,(t=t,_f("endBefore","key",e=e,!0),new Yp(t,e))))},Gd.prototype.equalTo=function(t,e){return Wo("Query.equalTo",1,2,arguments.length),new Gd(this.database,Cd(this._delegate,(t=t,_f("equalTo","key",e=e,!0),new Ed(t,e))))},Gd.prototype.toString=function(){return Wo("Query.toString",0,0,arguments.length),this._delegate.toString()},Gd.prototype.toJSON=function(){return Wo("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},Gd.prototype.isEqual=function(t){if(Wo("Query.isEqual",1,1,arguments.length),t instanceof Gd)return this._delegate.isEqual(t._delegate);throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")},Gd.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Go(t,"cancel",r.cancel,!0),r.context=n,zo(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Ho(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Gd.prototype,"ref",{get:function(){return new Qd(this.database,new Ep(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),Gd);function Gd(t,e){this.database=t,this._delegate=e}var zd,Qd=(Xi(Yd,zd=Hd),Yd.prototype.getKey=function(){return Wo("Reference.key",0,0,arguments.length),this._delegate.key},Yd.prototype.child=function(t){return Wo("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Yd(this.database,Rp(this._delegate,t))},Yd.prototype.getParent=function(){Wo("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new Yd(this.database,t):null},Yd.prototype.getRoot=function(){return Wo("Reference.root",0,0,arguments.length),new Yd(this.database,this._delegate.root)},Yd.prototype.set=function(t,e){Wo("Reference.set",1,2,arguments.length),Go("Reference.set","onComplete",e,!0);t=Pp(this._delegate,t);return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Yd.prototype.update=function(t,e){if(Wo("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ns("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Af("Reference.update",this._delegate._path),Go("Reference.update","onComplete",e,!0);var i=Op(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},Yd.prototype.setWithPriority=function(t,e,n){Wo("Reference.setWithPriority",2,3,arguments.length),Go("Reference.setWithPriority","onComplete",n,!0);e=function(t,e,n){if(Af("setWithPriority",t._path),Sf("setWithPriority",e,t._path,!1),bf("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new lo;return zf(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}(this._delegate,t,e);return n&&e.then(function(){return n(null)},function(t){return n(t)}),e},Yd.prototype.remove=function(e){Wo("Reference.remove",0,1,arguments.length),Go("Reference.remove","onComplete",e,!0);var t,t=(t=this._delegate,Af("remove",t._path),Pp(t,null));return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Yd.prototype.transaction=function(t,e,n){var r=this;Wo("Reference.transaction",1,3,arguments.length),Go("Reference.transaction","transactionUpdate",t,!1),Go("Reference.transaction","onComplete",e,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Ho(t,e)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);n=Ud(this._delegate,t,{applyLocally:n}).then(function(t){return new Vd(t.committed,new Kd(r.database,t.snapshot))});return e&&n.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),n},Yd.prototype.setPriority=function(t,e){Wo("Reference.setPriority",1,2,arguments.length),Go("Reference.setPriority","onComplete",e,!0);t=function(t,e){t=ta(t),Af("setPriority",t._path),bf("setPriority",e,!1);var n=new lo;return zf(t._repo,hu(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}(this._delegate,t);return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Yd.prototype.push=function(t,e){var n=this;Wo("Reference.push",0,2,arguments.length),Go("Reference.push","onComplete",e,!0);var r=function(t,e){t=ta(t),Af("push",t._path),Sf("push",e,t._path,!0);var n=Vf(t._repo),r=kc(n),n=Rp(t,r),i=Rp(t,r),e=null!=e?Pp(i,e).then(function(){return i}):Promise.resolve(i);return n.then=e.then.bind(e),n.catch=e.then.bind(e,void 0),n}(this._delegate,t),t=r.then(function(t){return new Yd(n.database,t)});e&&t.then(function(){return e(null)},function(t){return e(t)});r=new Yd(this.database,r);return r.then=t.then.bind(t),r.catch=t.catch.bind(t,void 0),r},Yd.prototype.onDisconnect=function(){return Af("Reference.onDisconnect",this._delegate._path),new jd(new gp(this._delegate._repo,this._delegate._path))},Object.defineProperty(Yd.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Yd.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Yd.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Yd);function Yd(t,e){var n=zd.call(this,t,new mp(e._repo,e._path,new Uc,!1))||this;return n.database=t,n._delegate=e,n}var Xd=(Jd.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Dd(this._delegate,t,e,n)},Jd.prototype.ref=function(t){if(Wo("database.ref",0,1,arguments.length),t instanceof Qd){var e=Ap(this._delegate,t.toString());return new Qd(this,e)}e=Np(this._delegate,t);return new Qd(this,e)},Jd.prototype.refFromURL=function(t){Wo("database.refFromURL",1,1,arguments.length);t=Ap(this._delegate,t);return new Qd(this,t)},Jd.prototype.goOffline=function(){var t;Wo("database.goOffline",0,0,arguments.length),(t=ta(t=this._delegate))._checkNotDeleted("goOffline"),Jf(t._repo)},Jd.prototype.goOnline=function(){return Wo("database.goOnline",0,0,arguments.length),xd(this._delegate)},Jd.ServerValue={TIMESTAMP:Ld,increment:function(t){return{".sv":{increment:t}}}},Jd);function Jd(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var $d=Object.freeze({__proto__:null,forceLongPolling:function(){Vs.forceDisallow(),Ms.forceAllow()},forceWebSockets:function(){Ms.forceDisallow()},isWebSocketsAvailable:function(){return Vs.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){var i;t=t._delegate._repo,void 0===(e=e)&&(e=!1),"undefined"!=typeof console&&(t=e?(t.statsListener_||(t.statsListener_=new Zc(t.stats_)),t.statsListener_.get()):t.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),ss(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},statsIncrementCounter:function(t,e){t=t._delegate._repo,e=e,t.stats_.incrementCounter(e),t=t.statsReporter_,e=e,t.statsToReport_[e]=!0},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){t=t._delegate._repo,e=e,t.interceptServerDataCallback_=e},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return Da(r),(r=new ia("auth-internal",new aa("database-standalone"))).setComponent(new ea("auth-internal",function(){return i},"PRIVATE")),{instance:new Xd(Rd(e,r,void 0,n,t),e),namespace:o}}}),G=Su;Su.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Su.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Zd,tv=Object.freeze({__proto__:null,DataConnection:G,RealTimeConnection:Hs,hijackHash:function(i){var o=Su.prototype.put;return Su.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Su.prototype.put=o}},ConnectionTarget:Es,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){Ad=t}}),ev=Xd.ServerValue;Da((Zd=Xl).SDK_VERSION),Zd.INTERNAL.registerComponent(new ea("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),e=t.getProvider("auth-internal"),t=t.getProvider("app-check-internal");return new Xd(Rd(r,e,t,n),r)},"PUBLIC").setServiceProps({Reference:Qd,Query:Hd,Database:Xd,DataSnapshot:Kd,enableLogging:ja,INTERNAL:$d,ServerValue:ev,TEST_ACCESS:tv}).setMultipleInstances(!0)),Zd.registerVersion("@firebase/database","0.10.0");var nv=function(t,e){return(nv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function rv(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},iv={},ov=z||self;function av(){}function sv(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function uv(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var cv="closure_uid_"+(1e9*Math.random()>>>0),hv=0;function lv(t,e,n){return t.call.apply(t.bind,arguments)}function fv(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function pv(t,e,n){return(pv=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lv:fv).apply(null,arguments)}function dv(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function vv(){return Date.now()}function gv(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function yv(){this.j=this.j,this.i=this.i}yv.prototype.j=!1,yv.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,cv)&&t[cv]||(t[cv]=++hv))},yv.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var mv=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},bv=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function _v(){return Array.prototype.concat.apply([],arguments)}function wv(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Iv(t){return/^[\s\xa0]*$/.test(t)}var Tv,Ev=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Sv(t,e){return-1!=t.indexOf(e)}function Cv(t,e){return t<e?-1:e<t?1:0}t:{var kv=ov.navigator;if(kv){kv=kv.userAgent;if(kv){Tv=kv;break t}}Tv=""}function Nv(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Av(t){var e,n={};for(e in t)n[e]=t[e];return n}var Rv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pv(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Rv.length;i++)e=Rv[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Ov(t){return Ov[" "](t),t}Ov[" "]=av;var Dv,xv=Sv(Tv,"Opera"),Lv=Sv(Tv,"Trident")||Sv(Tv,"MSIE"),Mv=Sv(Tv,"Edge"),Fv=Mv||Lv,Uv=Sv(Tv,"Gecko")&&!(Sv(Tv.toLowerCase(),"webkit")&&!Sv(Tv,"Edge"))&&!(Sv(Tv,"Trident")||Sv(Tv,"MSIE"))&&!Sv(Tv,"Edge"),jv=Sv(Tv.toLowerCase(),"webkit")&&!Sv(Tv,"Edge");function qv(){var t=ov.document;return t?t.documentMode:void 0}t:{var Vv="",Bv=(Bv=Tv,Uv?/rv:([^\);]+)(\)|;)/.exec(Bv):Mv?/Edge\/([\d\.]+)/.exec(Bv):Lv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Bv):jv?/WebKit\/(\S+)/.exec(Bv):xv?/(?:Version)[ \/]?(\S+)/.exec(Bv):void 0);if(Bv&&(Vv=Bv?Bv[1]:""),Lv){Bv=qv();if(null!=Bv&&Bv>parseFloat(Vv)){Dv=String(Bv);break t}}Dv=Vv}var Kv={};function Wv(s){return t=s,e=function(){for(var t=0,e=Ev(String(Dv)).split("."),n=Ev(String(s)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",a=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],(0!=o[0].length||0!=a[0].length)&&(t=Cv(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Cv(0==o[2].length,0==a[2].length)||Cv(o[2],a[2]),o=o[3],a=a[3],0==t););return 0<=t},n=Kv,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Hv=ov.document&&Lv&&(qv()||parseInt(Dv,10))||void 0,Gv=!Lv||9<=Number(Hv),zv=Lv&&!Wv("9"),Qv=function(){if(!ov.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ov.addEventListener("test",av,e),ov.removeEventListener("test",av,e)}catch(t){}return t}();function Yv(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Xv(t,e){if(Yv.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Uv){t:{try{Ov(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Jv[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Yv.prototype.b=function(){this.defaultPrevented=!0},gv(Xv,Yv);var Jv={2:"touch",3:"pen",4:"mouse"};Xv.prototype.b=function(){Xv.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,zv)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var $v="closure_listenable_"+(1e6*Math.random()|0),Zv=0;function tg(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Zv,this.Y=this.Z=!1}function eg(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ng(t){this.src=t,this.a={},this.b=0}function rg(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=mv(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(eg(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function ig(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ng.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ig(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new tg(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var og="closure_lm_"+(1e6*Math.random()|0),ag={};function sg(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}r=vg(r);return e&&e[$v]?e.wa(n,r,uv(i)?!!i.capture:!!i,o):ug(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)sg(t,e[o],n,r,i);return null}return n=vg(n),t&&t[$v]?t.va(e,n,uv(r)?!!r.capture:!!r,i):ug(t,e,n,!1,r,i)}function ug(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=uv(i)?!!i.capture:!!i;if(a&&!Gv)return null;var s,u,c=pg(t);if(c||(t[og]=c=new ng(t)),(n=c.add(e,n,r,a,o)).proxy)return n;if(s=fg,r=u=Gv?function(t){return s.call(u.src,u.listener,t)}:function(t){if(!(t=s.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=!Qv?a:i)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(hg(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function cg(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[$v]?rg(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(hg(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=pg(e))?(rg(n,t),0==n.b&&(n.src=null,e[og]=null)):eg(t)))}function hg(t){return t in ag?ag[t]:ag[t]="on"+t}function lg(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&cg(t),n.call(r,e)}function fg(t,e){if(t.Y)return!0;if(Gv)return lg(t,new Xv(e,this));if(!e)t:{e=["window","event"];for(var n=ov,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return lg(t,e=new Xv(e,this))}function pg(t){return(t=t[og])instanceof ng?t:null}var dg="__closure_events_fn_"+(1e9*Math.random()>>>0);function vg(e){return"function"==typeof e?e:(e[dg]||(e[dg]=function(t){return e.handleEvent(t)}),e[dg])}function gg(){yv.call(this),this.c=new ng(this),(this.J=this).C=null}function yg(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new Yv(e,t):e instanceof Yv?e.target=e.target||t:(a=e,Pv(e=new Yv(r,t),a)),a=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],a=mg(o,r,!0,e)&&a;if(a=mg(o=e.a=t,r,!0,e)&&a,a=mg(o,r,!1,e)&&a,n)for(i=0;i<n.length;i++)a=mg(o=e.a=n[i],r,!1,e)&&a}function mg(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.Y&&u.capture==n&&(a=u.listener,s=u.ca||u.src,u.Z&&rg(t.c,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}gv(gg,yv),gg.prototype[$v]=!0,(Qs=gg.prototype).addEventListener=function(t,e,n,r){sg(this,t,e,n,r)},Qs.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=uv(i)?!!i.capture:!!i,r=vg(r),e&&e[$v]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=ig(a=e.a[n],r,i,o))&&(eg(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):(e=e&&pg(e))&&(n=e.a[n.toString()],(r=(e=-1)<(e=n?ig(n,r,i,o):e)?n[e]:null)&&cg(r))}(this,t,e,n,r)},Qs.G=function(){if(gg.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)eg(n[r]);delete e.a[t],e.b--}}this.C=null},Qs.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Qs.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var bg=ov.JSON.stringify;function _g(){this.b=this.a=null}var wg,Ig=(Tg.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Tg(function(){return new Eg},function(t){t.reset()}));function Tg(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Eg(){this.next=this.b=this.a=null}function Sg(t,e){var n;wg||(n=ov.Promise.resolve(void 0),wg=function(){n.then(Ng)}),Cg||(wg(),Cg=!0),kg.add(t,e)}_g.prototype.add=function(t,e){var n=Ig.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Eg.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Cg=!(Eg.prototype.reset=function(){this.next=this.b=this.a=null}),kg=new _g;function Ng(){for(var t,e;n=e=void 0,n=null,(e=kg).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){ov.setTimeout(function(){throw t},0)}(t)}var n=Ig;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}Cg=!1}function Ag(t,e){gg.call(this),this.b=t||1,this.a=e||ov,this.f=pv(this.Za,this),this.g=vv()}function Rg(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Pg(t,e,n){if("function"==typeof t)n&&(t=pv(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=pv(t.handleEvent,t)}return 2147483647<Number(e)?-1:ov.setTimeout(t,e||0)}gv(Ag,gg),(Qs=Ag.prototype).aa=!1,Qs.M=null,Qs.Za=function(){var t;this.aa&&(0<(t=vv()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),yg(this,"tick"),this.aa&&(Rg(this),this.start())))},Qs.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=vv())},Qs.G=function(){Ag.X.G.call(this),Rg(this),delete this.a};var Og,Dg,xg,Lg=(nv(Dg=Fg,xg=Og=yv),Dg.prototype=null===xg?Object.create(xg):(Mg.prototype=xg.prototype,new Mg),Fg.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Pg(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},Fg.prototype.G=function(){Og.prototype.G.call(this),this.a&&(ov.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},Fg);function Mg(){this.constructor=Dg}function Fg(t,e){var n=Og.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function Ug(t){yv.call(this),this.b=t,this.a={}}gv(Ug,yv);var jg=[];function qg(t,e,n,r){Array.isArray(n)||(n&&(jg[0]=n.toString()),n=jg);for(var i=0;i<n.length;i++){var o=sg(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Vg(t){Nv(t.a,function(t,e){this.a.hasOwnProperty(e)&&cg(t)},t),t.a={}}function Bg(){this.a=!0}function Kg(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return bg(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}Ug.prototype.G=function(){Ug.X.G.call(this),Vg(this)},Ug.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bg.prototype.info=function(){};var Wg={},Hg=null;function Gg(){return Hg=Hg||new gg}function zg(t){Yv.call(this,Wg.Fa,t)}function Qg(t){var e=Gg();yg(e,new zg(e))}function Yg(t,e){Yv.call(this,Wg.STAT_EVENT,t),this.stat=e}function Xg(t){var e=Gg();yg(e,new Yg(e,t))}function Jg(t){Yv.call(this,Wg.Ga,t)}function $g(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ov.setTimeout(function(){t()},e)}Wg.Fa="serverreachability",gv(zg,Yv),Wg.STAT_EVENT="statevent",gv(Yg,Yv),Wg.Ga="timingevent",gv(Jg,Yv);Sn={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},G={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Zg(){}function ty(t){var e;return e=!(e=t.a)?t.a={}:e}function ey(){}Zg.prototype.a=null;z={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ny(){Yv.call(this,"d")}function ry(){Yv.call(this,"c")}function iy(){}function oy(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ug(this),this.P=sy,t=Fv?125:void 0,this.R=new Ag(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}gv(ny,Yv),gv(ry,Yv),gv(iy,Zg);var ay=new iy,sy=45e3,uy={},cy={};function hy(t,e,n){t.H=1,t.i=Py(Sy(e)),t.j=n,t.I=!0,ly(t,null)}function ly(t,e){t.u=vv(),py(t),t.l=Sy(t.i);var a,s,u,c,h,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Wy(n.b,"t",r),t.D=0,t.a=Fm(t.g,t.g.C?e:null),0<t.O&&(t.F=new Lg(pv(t.Ca,t,t.a),t.O)),qg(t.J,t.a,"readystatechange",t.Xa),e=t.B?Av(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Qg(1),a=t.c,s=t.m,u=t.l,c=t.f,h=t.S,l=t.j,a.info(function(){if(a.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+s+"\n"+u+"\n"+t})}function fy(t,e,n){for(var r,i,o,a=!0;!t.A&&t.D<n.length;){var s=(s=n,o=i=void 0,i=(r=t).D,-1==(o=s.indexOf("\n",i))?cy:(i=Number(s.substring(i,o)),isNaN(i)?uy:(o+=1)+i>s.length?cy:(s=s.substr(o,i),r.D=o+i,s)));if(s==cy){4==e&&(t.h=4,Xg(14),a=!1),Kg(t.c,t.f,null,"[Incomplete Response]");break}if(s==uy){t.h=4,Xg(15),Kg(t.c,t.f,n,"[Invalid Chunk]"),a=!1;break}Kg(t.c,t.f,s,null),my(t,s)}4==e&&0==n.length&&(t.h=1,Xg(16),a=!1),t.b=t.b&&a,a?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Am(e),e.F=!0,Xg(11))):(Kg(t.c,t.f,n,"[Invalid Chunked Response]"),yy(t),gy(t))}function py(t){t.T=vv()+t.P,dy(t,t.P)}function dy(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=$g(pv(t.Va,t),e)}function vy(t){t.o&&(ov.clearTimeout(t.o),t.o=null)}function gy(t){0==t.g.v||t.A||Om(t.g,t)}function yy(t){vy(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Rg(t.R),Vg(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function my(t,e){try{var n,r,i,o,a,s=t.g;if(0!=s.v&&(s.a==t||Jy(s.b,t)))if(s.I=t.N,!t.C&&Jy(s.b,t)&&3==s.v){try{var u=s.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!s.j){if(s.a){if(!(s.a.u+3e3<t.u))break t;Pm(s),_m(s)}Nm(s),Xg(18)}}else s.oa=c[1],0<s.oa-s.P&&c[2]<37500&&s.H&&0==s.o&&!s.m&&(s.m=$g(pv(s.Sa,s),6e3));if(Xy(s.b)<=1&&s.ea){try{s.ea()}catch(t){}s.ea=void 0}}else xm(s,11)}else if(!t.C&&s.a!=t||Pm(s),!Iv(e))for(e=u=s.ka.a.parse(e),u=0;u<e.length;u++)c=e[u],s.P=c[0],c=c[1],2==s.v?"c"==c[0]?(s.J=c[1],s.ga=c[2],null!=(r=c[3])&&(s.ha=r,s.c.info("VER="+s.ha)),null!=(o=c[4])&&(s.pa=o,s.c.info("SVER="+s.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,s.D=n,s.c.info("backChannelRequestTimeoutMs_="+n)),n=s,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(Sv(r,"spdy")||Sv(r,"quic")||Sv(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&($y(i,i.b),i.b=null)),!n.A||(a=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=a,Ry(n.B,n.A,a))),s.v=3,s.f&&s.f.ta(),s.U&&(s.N=vv()-t.u,s.c.info("Handshake RTT: "+s.N+"ms")),i=t,(n=s).la=Mm(n,n.C?n.ga:null,n.fa),i.C?(Zy(n.b,i),o=i,(a=n.D)&&o.setTimeout(a),o.o&&(vy(o),py(o)),n.a=i):km(n),0<s.g.length&&Tm(s)):"stop"!=c[0]&&"close"!=c[0]||xm(s,7):3==s.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?xm(s,7):bm(s):"noop"!=c[0]&&s.f&&s.f.sa(c),s.o=0);Qg(4)}catch(t){}}function by(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(sv(t)||"string"==typeof t)bv(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(sv(t)||"string"==typeof t)for(var n=[],r=t.length,i=0;i<r;i++)n.push(i);else for(i in n=[],r=0,t)n[r++]=i;for(var i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(sv(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function _y(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _y)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function wy(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Iy(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Iy(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Iy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Qs=oy.prototype).setTimeout=function(t){this.P=t},Qs.Xa=function(t){t=t.target;var e=this.F;e&&3==vm(t)?e.f():this.Ca(t)},Qs.Ca=function(t){try{if(t==this.a)t:{var e=vm(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!Fv&&!this.a.$())){this.A||4!=e||7==n||Qg(8==n||r<=0?3:2),vy(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,r=this.c,u=this.m,c=this.l,h=this.f,l=this.S,f=e,p=i,r.info(function(){return"XMLHTTP RESP ("+h+") [ attempt "+l+"]: "+u+"\n"+c+"\n"+f+" "+p}),this.b){if(this.U&&!this.C){e:{if(this.a){var a=this.a;if((a=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Iv(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.h=3,Xg(12),yy(this),gy(this);break t}Kg(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,my(this,s)}this.I?(fy(this,e,o),Fv&&this.b&&3==e&&(qg(this.J,this.R,"tick",this.Wa),this.R.start())):(Kg(this.c,this.f,o,null),my(this,o)),4==e&&yy(this),this.b&&!this.A&&(4==e?Om(this.g,this):(this.b=!1,py(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Xg(12)):(this.h=0,Xg(13)),yy(this),gy(this)}}}catch(t){}var u,c,h,l,f,p},Qs.Wa=function(){var t,e;this.a&&(t=vm(this.a),e=this.a.$(),this.D<e.length&&(vy(this),fy(this,t,e),this.b&&4!=t&&py(this)))},Qs.cancel=function(){this.A=!0,yy(this)},Qs.Va=function(){this.o=null;var t,e,n=vv();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(Qg(3),Xg(17)),yy(this),this.h=2,gy(this)):dy(this,this.T-n)},(Qs=_y.prototype).K=function(){wy(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Qs.L=function(){return wy(this),this.a.concat()},Qs.get=function(t,e){return Iy(this.b,t)?this.b[t]:e},Qs.set=function(t,e){Iy(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Qs.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ty=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ey(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ey?(this.a=void 0!==e?e:t.a,Cy(this,t.f),this.j=t.j,ky(this,t.c),Ny(this,t.h),this.g=t.g,e=t.b,(n=new qy).c=e.c,e.a&&(n.a=new _y(e.a),n.b=e.b),Ay(this,n),this.i=t.i):t&&(n=String(t).match(Ty))?(this.a=!!e,Cy(this,n[1]||"",!0),this.j=Oy(n[2]||""),ky(this,n[3]||"",!0),Ny(this,n[4]),this.g=Oy(n[5]||"",!0),Ay(this,n[6]||"",!0),this.i=Oy(n[7]||"")):(this.a=!!e,this.b=new qy(null,this.a))}function Sy(t){return new Ey(t)}function Cy(t,e,n){t.f=n?Oy(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ky(t,e,n){t.c=n?Oy(e,!0):e}function Ny(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ay(t,e,n){var r,i;e instanceof qy?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(Vy(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(By(this,e),Wy(this,n,t))},r)),r.f=i):(n||(e=Dy(e,Uy)),t.b=new qy(e,t.a))}function Ry(t,e,n){t.b.set(e,n)}function Py(t){return Ry(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^vv()).toString(36)),t}function Oy(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dy(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xy),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function xy(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ey.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Dy(e,Ly,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Dy(e,Ly,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Dy(n,"/"==n.charAt(0)?Fy:My,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Dy(n,jy)),t.join("")};var Ly=/[#\/\?@]/g,My=/[#\?:]/g,Fy=/[#\?]/g,Uy=/[#\?@]/g,jy=/#/g;function qy(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Vy(n){n.a||(n.a=new _y,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function By(t,e){Vy(t),e=Hy(t,e),Iy(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Iy((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&wy(t)))}function Ky(t,e){return Vy(t),e=Hy(t,e),Iy(t.a.b,e)}function Wy(t,e,n){By(t,e),0<n.length&&(t.c=null,t.a.set(Hy(t,e),wv(n)),t.b+=n.length)}function Hy(t,e){return e=String(e),e=t.f?e.toLowerCase():e}(Qs=qy.prototype).add=function(t,e){Vy(this),this.c=null,t=Hy(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Qs.forEach=function(n,r){Vy(this),this.a.forEach(function(t,e){bv(t,function(t){n.call(r,t,e,this)},this)},this)},Qs.L=function(){Vy(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Qs.K=function(t){Vy(this);var e=[];if("string"==typeof t)Ky(this,t)&&(e=_v(e,this.a.get(Hy(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=_v(e,t[n])}return e},Qs.set=function(t,e){return Vy(this),this.c=null,Ky(this,t=Hy(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Qs.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Qs.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.c=t.join("&")};var Gy=function(t,e){this.b=t,this.a=e};function zy(t){this.g=t||Qy,t=ov.PerformanceNavigationTiming?0<(t=ov.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ov.ia&&ov.ia.ya&&ov.ia.ya()&&ov.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Qy=10;function Yy(t){return t.b||t.a&&t.a.size>=t.f}function Xy(t){return t.b?1:t.a?t.a.size:0}function Jy(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function $y(t,e){t.a?t.a.add(e):t.b=e}function Zy(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function tm(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return wv(t.c);var r=t.c;try{for(var i=rv(t.a.values()),o=i.next();!o.done;o=i.next())var a=o.value,r=r.concat(a.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function em(){}function nm(){this.a=new em}function rm(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}zy.prototype.cancel=function(){var e,t;if(this.c=tm(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=rv(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},em.prototype.stringify=function(t){return ov.JSON.stringify(t,void 0)},em.prototype.parse=function(t){return ov.JSON.parse(t,void 0)};var im=ov.JSON.parse;function om(t){gg.call(this),this.headers=new _y,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=am,this.D=this.F=!1}gv(om,gg);var am="",sm=/^https?$/i,um=["POST","PUT"];function cm(t){return"content-type"==t.toLowerCase()}function hm(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,lm(t),pm(t)}function lm(t){t.u||(t.u=!0,yg(t,"complete"),yg(t,"error"))}function fm(t){if(t.b&&void 0!==iv&&(!t.s[1]||4!=vm(t)||2!=t.W()))if(t.l&&4==vm(t))Pg(t.za,0,t);else if(yg(t,"readystatechange"),4==vm(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break t;default:a=!1}(e=a)||((n=0===o)&&(!(i=String(t.B).match(Ty)[1]||null)&&ov.self&&ov.self.location&&(i=(r=ov.self.location.protocol).substr(0,r.length-1)),n=!sm.test(i?i.toLowerCase():"")),e=n);if(e)yg(t,"complete"),yg(t,"success");else{t.h=6;try{var s=2<vm(t)?t.a.statusText:""}catch(o){s=""}t.f=s+" ["+t.W()+"]",lm(t)}}finally{pm(t)}}}function pm(t,e){if(t.a){dm(t);var n=t.a,r=t.s[0]?av:null;t.a=null,t.s=null,e||yg(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function dm(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ov.clearTimeout(t.m),t.m=null)}function vm(t){return t.a?t.a.readyState:0}function gm(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Nv(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ry(t,e,n))}function ym(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function mm(t){this.pa=0,this.g=[],this.c=new Bg,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=ym("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=ym("baseRetryDelayMs",5e3,t),this.Ra=ym("retryDelaySeedMs",1e4,t),this.Ma=ym("forwardChannelMaxRetries",2,t),this.ma=ym("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new zy(t&&t.concurrentRequestLimit),this.ka=new nm,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function bm(t){var e,n;wm(t),3==t.v&&(e=t.R++,Ry(n=Sy(t.B),"SID",t.J),Ry(n,"RID",e),Ry(n,"TYPE","terminate"),Sm(t,n),(e=new oy(t,t.c,e,void 0)).H=2,e.i=Py(Sy(n)),n=!1,!(n=ov.navigator&&ov.navigator.sendBeacon?ov.navigator.sendBeacon(e.i.toString(),""):n)&&ov.Image&&((new Image).src=e.i,n=!0),n||(e.a=Fm(e.g,null),e.a.ba(e.i)),e.u=vv(),py(e)),Lm(t)}function _m(t){t.a&&(Am(t),t.a.cancel(),t.a=null)}function wm(t){_m(t),t.j&&(ov.clearTimeout(t.j),t.j=null),Pm(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ov.clearTimeout(t.h),t.h=null)}function Im(t,e){t.g.push(new Gy(t.Oa++,e)),3==t.v&&Tm(t)}function Tm(t){Yy(t.b)||t.h||(t.h=!0,Sg(t.Ba,t),t.u=0)}function Em(t,e){var n=e?e.f:t.R++,r=Sy(t.B);Ry(r,"SID",t.J),Ry(r,"RID",n),Ry(r,"AID",t.P),Sm(t,r),t.i&&t.l&&gm(r,t.i,t.l),n=new oy(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Cm(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),$y(t.b,n),hy(n,r,e)}function Sm(t,n){t.f&&by({},function(t,e){Ry(n,e,t)})}function Cm(t,e,n){n=Math.min(t.g.length,n);var r=t.f?pv(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{!function(t,r,e){var i=e||"";try{by(t,function(t,e){var n=t;uv(t)&&(n=bg(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function km(t){t.a||t.j||(t.T=1,Sg(t.Aa,t),t.o=0)}function Nm(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=$g(pv(t.Aa,t),Dm(t,t.o)),t.o++,1)}function Am(t){null!=t.s&&(ov.clearTimeout(t.s),t.s=null)}function Rm(t){t.a=new oy(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Sy(t.la);Ry(e,"RID","rpc"),Ry(e,"SID",t.J),Ry(e,"CI",t.H?"0":"1"),Ry(e,"AID",t.P),Sm(t,e),Ry(e,"TYPE","xmlhttp"),t.i&&t.l&&gm(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Py(Sy(e)),n.j=null,n.I=!0,ly(n,t)}function Pm(t){null!=t.m&&(ov.clearTimeout(t.m),t.m=null)}function Om(t,e){var n,r,i,o=null;if(t.a==e){Pm(t),Am(t),t.a=null;var a=2}else{if(!Jy(t.b,e))return;o=e.s,Zy(t.b,e),a=1}if(t.I=e.N,0!=t.v)if(e.b)1==a?(o=e.j?e.j.length:0,e=vv()-e.u,n=t.u,yg(a=Gg(),new Jg(a)),Tm(t)):km(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=a||(i=e,Xy((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.La?0:r.Ma)||(r.h=$g(pv(r.Ba,r,i),Dm(r,r.u)),r.u++,0))))&&(2!=a||!Nm(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:xm(t,5);break;case 4:xm(t,10);break;case 3:xm(t,6);break;default:xm(t,2)}}function Dm(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function xm(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=pv(t.Ya,t),r||(r=new Ey("//www.google.com/images/cleardot.gif"),ov.location&&"http"==ov.location.protocol||Cy(r,"https"),Py(r)),n=r.toString(),r=o,o=new Bg,ov.Image?((i=new Image).onload=dv(rm,o,i,"TestLoadImage: loaded",!0,r),i.onerror=dv(rm,o,i,"TestLoadImage: error",!1,r),i.onabort=dv(rm,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=dv(rm,o,i,"TestLoadImage: timeout",!1,r),ov.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):Xg(2),t.v=0,t.f&&t.f.ra(e),Lm(t),wm(t)}function Lm(t){t.v=0,t.I=-1,t.f&&(0==tm(t.b).length&&0==t.g.length||(t.b.c.length=0,wv(t.g),t.g.length=0),t.f.qa())}function Mm(t,e,n){var r,i,o,a,s,u=(a=n)instanceof Ey?Sy(a):new Ey(a,void 0);return""!=u.c?(e&&ky(u,e+"."+u.c),Ny(u,u.h)):(s=ov.location,r=s.protocol,i=e?e+"."+s.hostname:s.hostname,o=+s.port,a=n,s=new Ey(null,void 0),r&&Cy(s,r),i&&ky(s,i),o&&Ny(s,o),a&&(s.g=a),u=s),t.V&&Nv(t.V,function(t,e){Ry(u,e,t)}),e=t.A,n=t.na,e&&n&&Ry(u,e,n),Ry(u,"VER",t.ha),Sm(t,u),u}function Fm(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new om(t.Na)).F=t.C,e}function Um(){}function jm(){if(Lv&&!(10<=Number(Hv)))throw Error("Environmental error: no available transport.")}function qm(t,e){gg.call(this),this.a=new mm(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Iv(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Iv(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Km(this)}function Vm(t){ny.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Bm(){ry.call(this),this.status=1}function Km(t){this.a=t}(Qs=om.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ty(this.H):ty(ay),this.a.onreadystatechange=pv(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void hm(this,t)}t=n||"";var i,o=new _y(this.headers);r&&by(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=cm,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=ov.FormData&&t instanceof ov.FormData,0<=mv(um,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{dm(this),0<this.o&&((this.D=(i=this.a,Lv&&Wv(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=pv(this.xa,this)):this.m=Pg(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){hm(this,t)}},Qs.xa=function(){void 0!==iv&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,yg(this,"timeout"),this.abort(8))},Qs.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,yg(this,"complete"),yg(this,"abort"),pm(this))},Qs.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),pm(this,!0)),om.X.G.call(this)},Qs.za=function(){this.j||(this.A||this.l||this.g?fm(this):this.Ua())},Qs.Ua=function(){fm(this)},Qs.W=function(){try{return 2<vm(this)?this.a.status:-1}catch(t){return-1}},Qs.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Qs.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),im(e)}},Qs.ua=function(){return this.h},Qs.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Qs=mm.prototype).ha=8,Qs.v=1,Qs.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new oy(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Pv(r=Av(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Cm(this,n,e),Ry(i=Sy(this.B),"RID",t),Ry(i,"CVER",22),this.A&&Ry(i,"X-HTTP-Session-Id",this.A),Sm(this,i),this.i&&r&&gm(i,this.i,r),$y(this.b,n),this.Ia&&Ry(i,"TYPE","init"),this.da?(Ry(i,"$req",e),Ry(i,"SID","null"),n.U=!0,hy(n,i,null)):hy(n,i,e),this.v=2}}else 3==this.v&&(t?Em(this,t):0==this.g.length||Yy(this.b)||Em(this))},Qs.Aa=function(){var t;this.j=null,Rm(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=$g(pv(this.Ta,this),t))},Qs.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Xg(10),_m(this),Rm(this))},Qs.Sa=function(){null!=this.m&&(this.m=null,_m(this),Nm(this),Xg(19))},Qs.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Xg(2)):(this.c.info("Failed to ping google.com"),Xg(1))},(Qs=Um.prototype).ta=function(){},Qs.sa=function(){},Qs.ra=function(){},Qs.qa=function(){},Qs.Ja=function(){},jm.prototype.a=function(t,e){return new qm(t,e)},gv(qm,gg),qm.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Xg(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Mm(t,null,t.fa),Tm(t)},qm.prototype.close=function(){bm(this.a)},qm.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,Im(this.a,e)):this.l?((e={}).__data__=bg(t),Im(this.a,e)):Im(this.a,t)},qm.prototype.G=function(){this.a.f=null,delete this.f,bm(this.a),delete this.a,qm.X.G.call(this)},gv(Vm,ny),gv(Bm,ry),gv(Km,Um),Km.prototype.ta=function(){yg(this.a,"a")},Km.prototype.sa=function(t){yg(this.a,new Vm(t))},Km.prototype.ra=function(t){yg(this.a,new Bm)},Km.prototype.qa=function(){yg(this.a,"b")},jm.prototype.createWebChannel=jm.prototype.a,qm.prototype.send=qm.prototype.h,qm.prototype.open=qm.prototype.g,Sn.NO_ERROR=0,Sn.TIMEOUT=8,Sn.HTTP_ERROR=6,G.COMPLETE="complete",(ey.EventType=z).OPEN="a",z.CLOSE="b",z.ERROR="c",z.MESSAGE="d",gg.prototype.listen=gg.prototype.va,om.prototype.listenOnce=om.prototype.wa,om.prototype.getLastError=om.prototype.Qa,om.prototype.getLastErrorCode=om.prototype.ua,om.prototype.getStatus=om.prototype.W,om.prototype.getResponseJson=om.prototype.Pa,om.prototype.getResponseText=om.prototype.$,om.prototype.send=om.prototype.ba;var Wm=Gg,Hm=Sn,Gm=G,zm=Wg,Qm=10,Ym=11,Xm=ey,Jm=om,$m=(Zm.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Zm.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},Zm);function Zm(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}$m.o=-1;var tb,eb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},nb=(Xi(ib,tb=Error),ib),rb=new da("@firebase/firestore");function ib(t,e){var n=this;return(n=tb.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function ob(){return rb.logLevel}function ab(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];rb.logLevel<=ua.DEBUG&&(e=n.map(cb),rb.debug.apply(rb,no(["Firestore (8.5.0): "+t],e)))}function sb(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];rb.logLevel<=ua.ERROR&&(e=n.map(cb),rb.error.apply(rb,no(["Firestore (8.5.0): "+t],e)))}function ub(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];rb.logLevel<=ua.WARN&&(e=n.map(cb),rb.warn.apply(rb,no(["Firestore (8.5.0): "+t],e)))}function cb(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function hb(t){t="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+(t=void 0===t?"Unexpected state":t);throw sb(t),new Error(t)}function lb(t){t||hb()}var fb=(pb.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},pb);function pb(){}function db(t,e){return t<e?-1:e<t?1:0}function vb(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function gb(t){return t+"\0"}var yb=(_b.now=function(){return _b.fromMillis(Date.now())},_b.fromDate=function(t){return _b.fromMillis(t.getTime())},_b.fromMillis=function(t){var e=Math.floor(t/1e3);return new _b(e,Math.floor(1e6*(t-1e3*e)))},_b.prototype.toDate=function(){return new Date(this.toMillis())},_b.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},_b.prototype._compareTo=function(t){return this.seconds===t.seconds?db(this.nanoseconds,t.nanoseconds):db(this.seconds,t.seconds)},_b.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},_b.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},_b.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},_b.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},_b),mb=(bb.fromTimestamp=function(t){return new bb(t)},bb.min=function(){return new bb(new yb(0,0))},bb.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},bb.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},bb.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},bb.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},bb.prototype.toTimestamp=function(){return this.timestamp},bb);function bb(t){this.timestamp=t}function _b(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new nb(eb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new nb(eb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new nb(eb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new nb(eb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function wb(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Ib(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Tb(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Eb,Sb,Sn=(Object.defineProperty(Lb.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),Lb.prototype.isEqual=function(t){return 0===Lb.comparator(this,t)},Lb.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Lb?t.forEach(function(t){e.push(t)}):e.push(t),this.construct(e)},Lb.prototype.limit=function(){return this.offset+this.length},Lb.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},Lb.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},Lb.prototype.firstSegment=function(){return this.segments[this.offset]},Lb.prototype.lastSegment=function(){return this.get(this.length-1)},Lb.prototype.get=function(t){return this.segments[this.offset+t]},Lb.prototype.isEmpty=function(){return 0===this.length},Lb.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Lb.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Lb.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Lb.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Lb.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Lb),Cb=(Xi(xb,Sb=Sn),xb.prototype.construct=function(t,e,n){return new xb(t,e,n)},xb.prototype.canonicalString=function(){return this.toArray().join("/")},xb.prototype.toString=function(){return this.canonicalString()},xb.fromString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new nb(eb.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new xb(n)},xb.emptyPath=function(){return new xb([])},xb),kb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Nb=(Xi(Db,Eb=Sn),Db.prototype.construct=function(t,e,n){return new Db(t,e,n)},Db.isValidIdentifier=function(t){return kb.test(t)},Db.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t=!Db.isValidIdentifier(t)?"`"+t+"`":t}).join(".")},Db.prototype.toString=function(){return this.canonicalString()},Db.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},Db.keyField=function(){return new Db(["__name__"])},Db.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new nb(eb.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new nb(eb.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new nb(eb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new nb(eb.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Db(e)},Db.emptyPath=function(){return new Db([])},Db),Ab=(Ob.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},Ob.prototype.isEqual=function(t){return vb(this.fields,t.fields,function(t,e){return t.isEqual(e)})},Ob),Rb=(Pb.fromBase64String=function(t){return new Pb(atob(t))},Pb.fromUint8Array=function(t){return new Pb(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Pb.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},Pb.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},Pb.prototype.approximateByteSize=function(){return 2*this.binaryString.length},Pb.prototype.compareTo=function(t){return db(this.binaryString,t.binaryString)},Pb.prototype.isEqual=function(t){return this.binaryString===t.binaryString},Pb);function Pb(t){this.binaryString=t}function Ob(t){(this.fields=t).sort(Nb.comparator)}function Db(){return null!==Eb&&Eb.apply(this,arguments)||this}function xb(){return null!==Sb&&Sb.apply(this,arguments)||this}function Lb(t,e,n){void 0===e?e=0:e>t.length&&hb(),void 0===n?n=t.length-e:n>t.length-e&&hb(),this.segments=t,this.offset=e,this.len=n}Rb.EMPTY_BYTE_STRING=new Rb("");var Mb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fb(t){if(lb(!!t),"string"!=typeof t)return{seconds:Ub(t.seconds),nanos:Ub(t.nanos)};var e=0,n=Mb.exec(t);lb(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Ub(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function jb(t){return"string"==typeof t?Rb.fromBase64String(t):Rb.fromUint8Array(t)}function qb(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Vb(t){t=Fb(t.mapValue.fields.__local_write_time__.timestampValue);return new yb(t.seconds,t.nanos)}function Bb(t){return null==t}function Kb(t){return 0===t&&1/t==-1/0}function Wb(t){return"number"==typeof t&&Number.isInteger(t)&&!Kb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Hb=(Gb.fromPath=function(t){return new Gb(Cb.fromString(t))},Gb.fromName=function(t){return new Gb(Cb.fromString(t).popFirst(5))},Gb.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Gb.prototype.isEqual=function(t){return null!==t&&0===Cb.comparator(this.path,t.path)},Gb.prototype.toString=function(){return this.path.toString()},Gb.comparator=function(t,e){return Cb.comparator(t.path,e.path)},Gb.isDocumentKey=function(t){return t.length%2==0},Gb.fromSegments=function(t){return new Gb(new Cb(t.slice()))},Gb);function Gb(t){this.path=t}function zb(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qb(t)?4:10:hb()}function Qb(r,i){var t,e,n=zb(r);if(n!==zb(i))return!1;switch(n){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Vb(r).isEqual(Vb(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=Fb(r.timestampValue),t=Fb(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return e=i,jb(r.bytesValue).isEqual(jb(e.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return t=i,Ub((e=r).geoPointValue.latitude)===Ub(t.geoPointValue.latitude)&&Ub(e.geoPointValue.longitude)===Ub(t.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ub(t.integerValue)===Ub(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=Ub(t.doubleValue),e=Ub(e.doubleValue);return t===e?Kb(t)===Kb(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return vb(r.arrayValue.values||[],i.arrayValue.values||[],Qb);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(wb(e)!==wb(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Qb(e[t],n[t])))return!1;return!0}();default:return hb()}}function Yb(t,e){return void 0!==(t.values||[]).find(function(t){return Qb(t,e)})}function Xb(t,e){var n,r,i,o=zb(t),a=zb(e);if(o!==a)return db(o,a);switch(o){case 0:return 0;case 1:return db(t.booleanValue,e.booleanValue);case 2:return r=e,i=Ub(t.integerValue||t.doubleValue),r=Ub(r.integerValue||r.doubleValue),i<r?-1:r<i?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1;case 3:return Jb(t.timestampValue,e.timestampValue);case 4:return Jb(Vb(t),Vb(e));case 5:return db(t.stringValue,e.stringValue);case 6:return function(t,e){t=jb(t),e=jb(e);return t.compareTo(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=db(n[i],r[i]);if(0!==o)return o}return db(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=db(Ub(n.latitude),Ub(i.latitude)))?r:db(Ub(n.longitude),Ub(i.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Xb(n[i],r[i]);if(o)return o}return db(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=db(r[a],o[a]);if(0!==s)return s;s=Xb(n[r[a]],i[o[a]]);if(0!==s)return s}return db(r.length,o.length)}(t.mapValue,e.mapValue);default:throw hb()}}function Jb(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return db(t,e);var n=Fb(t),t=Fb(e),e=db(n.seconds,t.seconds);return 0!==e?e:db(n.nanos,t.nanos)}function $b(t){return function a(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=Fb(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?jb(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,Hb.fromName(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=a(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+a(t.fields[o])}return e+"}"}(t.mapValue):hb();var e}(t)}function Zb(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function t_(t){return t&&"integerValue"in t}function e_(t){return!!t&&"arrayValue"in t}function n_(t){return t&&"nullValue"in t}function r_(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function i_(t){return t&&"mapValue"in t}var o_=(a_.empty=function(){return new a_({mapValue:{}})},a_.prototype.field=function(t){return a_.extractNestedValue(this.buildProto(),t)},a_.prototype.toProto=function(){return this.field(Nb.emptyPath())},a_.prototype.set=function(t,e){this.setOverlay(t,e)},a_.prototype.setAll=function(t){var n=this;t.forEach(function(t,e){t?n.set(e,t):n.delete(e)})},a_.prototype.delete=function(t){this.setOverlay(t,null)},a_.prototype.isEqual=function(t){return Qb(this.buildProto(),t.buildProto())},a_.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===zb(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.lastSegment(),e)},a_.prototype.applyOverlay=function(r,t){var i=this,o=!1,e=a_.extractNestedValue(this.partialValue,r),a=i_(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.applyOverlay(r.child(e),t))&&(a[e]=n,o=!0):null!==t?(a[e]=t,o=!0):a.hasOwnProperty(e)&&(delete a[e],o=!0)}),o?{mapValue:{fields:a}}:null},a_.prototype.buildProto=function(){var t=this.applyOverlay(Nb.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},a_.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!i_(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},a_.prototype.clone=function(){return new a_(this.buildProto())},a_);function a_(t){this.overlayMap=new Map,this.partialValue=t}var s_=(c_.newInvalidDocument=function(t){return new c_(t,0,mb.min(),o_.empty(),0)},c_.newFoundDocument=function(t,e,n){return new c_(t,1,e,n,0)},c_.newNoDocument=function(t,e){return new c_(t,2,e,o_.empty(),0)},c_.newUnknownDocument=function(t,e){return new c_(t,3,e,o_.empty(),2)},c_.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},c_.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=o_.empty(),this.documentState=0,this},c_.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=o_.empty(),this.documentState=2,this},c_.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},c_.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(c_.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(c_.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(c_.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),c_.prototype.isValidDocument=function(){return 0!==this.documentType},c_.prototype.isFoundDocument=function(){return 1===this.documentType},c_.prototype.isNoDocument=function(){return 2===this.documentType},c_.prototype.isUnknownDocument=function(){return 3===this.documentType},c_.prototype.isEqual=function(t){return t instanceof c_&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},c_.prototype.clone=function(){return new c_(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},c_.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},c_),u_=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function c_(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}function h_(t,e,n,r,i,o,a){return new u_(t,e=void 0===e?null:e,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,a=void 0===a?null:a)}function l_(t){var e=t;return null===e.h&&(t=e.path.canonicalString(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.canonicalString()+t.op.toString()+$b(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.canonicalString()+t.dir}).join(","),Bb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=q_(e.startAt)),e.endAt&&(t+="|ub:",t+=q_(e.endAt)),e.h=t),e.h}function f_(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,a,s=0;s<t.filters.length;s++)if(o=t.filters[s],a=e.filters[s],o.op!==a.op||!o.field.isEqual(a.field)||!Qb(o.value,a.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!K_(t.startAt,e.startAt)&&K_(t.endAt,e.endAt)}function p_(t){return Hb.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var d_,v_=(Xi(g_,d_=function(){}),g_.create=function(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.l(t,e,n):new __(t,e,n):"array-contains"===e?new P_(t,n):"in"===e?new O_(t,n):"not-in"===e?new D_(t,n):"array-contains-any"===e?new x_(t,n):new g_(t,e,n)},g_.l=function(t,e,n){return new("in"===e?w_:I_)(t,n)},g_.prototype.matches=function(t){t=t.data.field(this.field);return"!="===this.op?null!==t&&this.m(Xb(t,this.value)):null!==t&&zb(this.value)===zb(t)&&this.m(Xb(t,this.value))},g_.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return hb()}},g_.prototype.g=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},g_);function g_(t,e,n){var r=this;return(r=d_.call(this)||this).field=t,r.op=e,r.value=n,r}var y_,m_,b_,__=(Xi(S_,b_=v_),S_.prototype.matches=function(t){t=Hb.comparator(t.key,this.key);return this.m(t)},S_),w_=(Xi(E_,m_=v_),E_.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},E_),I_=(Xi(T_,y_=v_),T_.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},T_);function T_(t,e){var n=this;return(n=y_.call(this,t,"not-in",e)||this).keys=C_(0,e),n}function E_(t,e){var n=this;return(n=m_.call(this,t,"in",e)||this).keys=C_(0,e),n}function S_(t,e,n){var r=this;return(r=b_.call(this,t,e,n)||this).key=Hb.fromName(n.referenceValue),r}function C_(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return Hb.fromName(t.referenceValue)})}var k_,N_,A_,R_,P_=(Xi(j_,R_=v_),j_.prototype.matches=function(t){t=t.data.field(this.field);return e_(t)&&Yb(t.arrayValue,this.value)},j_),O_=(Xi(U_,A_=v_),U_.prototype.matches=function(t){t=t.data.field(this.field);return null!==t&&Yb(this.value.arrayValue,t)},U_),D_=(Xi(F_,N_=v_),F_.prototype.matches=function(t){if(Yb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.data.field(this.field);return null!==t&&!Yb(this.value.arrayValue,t)},F_),x_=(Xi(M_,k_=v_),M_.prototype.matches=function(t){var e=this,t=t.data.field(this.field);return!(!e_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return Yb(e.value.arrayValue,t)})},M_),L_=function(t,e){this.position=t,this.before=e};function M_(t,e){return k_.call(this,t,"array-contains-any",e)||this}function F_(t,e){return N_.call(this,t,"not-in",e)||this}function U_(t,e){return A_.call(this,t,"in",e)||this}function j_(t,e){return R_.call(this,t,"array-contains",e)||this}function q_(t){return(t.before?"b":"a")+":"+t.position.map($b).join(",")}var V_=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function B_(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i],r=o.field.isKeyField()?Hb.comparator(Hb.fromName(a.referenceValue),n.key):Xb(a,n.data.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function K_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Qb(t.position[n],e.position[n]))return!1;return!0}var W_=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function H_(t,e,n,r,i,o,a,s){return new W_(t,e,n,r,i,o,a,s)}function G_(t){return new W_(t)}function z_(t){return!Bb(t.limit)&&"F"===t.limitType}function Q_(t){return!Bb(t.limit)&&"L"===t.limitType}function Y_(t){return 0<t.explicitOrderBy.length?t.explicitOrderBy[0].field:null}function X_(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function J_(t){return null!==t.collectionGroup}function $_(t){var e=t;if(null===e.p){e.p=[];var n=X_(e),t=Y_(e);if(null!==n&&null===t)n.isKeyField()||e.p.push(new V_(n)),e.p.push(new V_(Nb.keyField(),"asc"));else{for(var r=!1,i=0,o=e.explicitOrderBy;i<o.length;i++){var a=o[i];e.p.push(a),a.field.isKeyField()&&(r=!0)}r||(n=0<e.explicitOrderBy.length?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",e.p.push(new V_(Nb.keyField(),n)))}}return e.p}function Z_(t){var e=t;if(!e.T)if("F"===e.limitType)e.T=h_(e.path,e.collectionGroup,$_(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=$_(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new V_(o.field,a))}var s=e.endAt?new L_(e.endAt.position,!e.endAt.before):null,t=e.startAt?new L_(e.startAt.position,!e.startAt.before):null;e.T=h_(e.path,e.collectionGroup,n,e.filters,e.limit,s,t)}return e.T}function tw(t,e,n){return new W_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ew(t,e){return f_(Z_(t),Z_(e))&&t.limitType===e.limitType}function nw(t){return l_(Z_(t))+"|lt:"+t.limitType}function rw(t){return"Query(target="+(e=Z_(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.canonicalString()+" "+t.op+" "+$b(t.value)}).join(", ")+"]"),Bb(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.canonicalString()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+q_(e.startAt)),e.endAt&&(n+=", endAt: "+q_(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function iw(i,t){return t.isFoundDocument()&&(e=i,n=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Hb.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n))&&function(t){for(var e=0,n=i.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.data.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||B_(t.startAt,$_(t),n))&&(!t.endAt||!B_(t.endAt,$_(t),n)));var e,n}function ow(s){return function(t,e){for(var n=!1,r=0,i=$_(s);r<i.length;r++){var o=i[r],a=function(t,r,e){var n=t.field.isKeyField()?Hb.comparator(r.key,e.key):function(t,e){var n=r.data.field(t),t=e.data.field(t);return null!==n&&null!==t?Xb(n,t):hb()}(t.field,e);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return hb()}}(o,t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return 0}}function aw(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kb(e)?"-0":e}}function sw(t){return{integerValue:""+t}}function uw(t,e){return Wb(e)?sw(e):aw(t,e)}G=function(){this._=void 0};function cw(t,e){return t instanceof Iw?t_(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var hw,lw,fw=(Xi(vw,lw=G),vw),pw=(Xi(dw,hw=G),dw);function dw(t){var e=this;return(e=hw.call(this)||this).elements=t,e}function vw(){return null!==lw&&lw.apply(this,arguments)||this}function gw(t,e){for(var n=Sw(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Qb(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var yw,mw=(Xi(bw,yw=G),bw);function bw(t){var e=this;return(e=yw.call(this)||this).elements=t,e}function _w(t,e){for(var n=Sw(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Qb(t,e)})}(i[r]);return{arrayValue:{values:n}}}var ww,Iw=(Xi(Tw,ww=G),Tw);function Tw(t,e){var n=this;return(n=ww.call(this)||this).R=t,n.A=e,n}function Ew(t){return Ub(t.integerValue||t.doubleValue)}function Sw(t){return e_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Cw(t,e){this.version=t,this.transformResults=e}var kw=function(t,e){this.field=t,this.transform=e},Nw=(Aw.none=function(){return new Aw},Aw.exists=function(t){return new Aw(void 0,t)},Aw.updateTime=function(t){return new Aw(t)},Object.defineProperty(Aw.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Aw.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Aw);function Aw(t,e){this.updateTime=t,this.exists=e}function Rw(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}Sn=function(){};function Pw(t,e,n){var r,i,o,a;t instanceof Mw?(i=e,o=n,Rw((r=t).precondition,i)&&(a=r.value.clone(),o=Bw(r.fieldTransforms,o,i),a.setAll(o),i.convertToFoundDocument(Dw(i),a).setHasLocalMutations())):t instanceof Fw?(o=e,i=n,Rw((a=t).precondition,o)&&(n=Bw(a.fieldTransforms,i,o),(i=o.data).setAll(qw(a)),i.setAll(n),o.convertToFoundDocument(Dw(o),i).setHasLocalMutations())):(e=e,Rw(t.precondition,e)&&e.convertToNoDocument(mb.min()))}function Ow(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&vb(n,r,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof pw&&e instanceof pw||t instanceof mw&&e instanceof mw?vb(t.elements,e.elements,Qb):t instanceof Iw&&e instanceof Iw?Qb(t.A,e.A):t instanceof fw&&e instanceof fw)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function Dw(t){return t.isFoundDocument()?t.version:mb.min()}var xw,Lw,Mw=(Xi(jw,Lw=Sn),jw),Fw=(Xi(Uw,xw=Sn),Uw);function Uw(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=xw.call(this)||this).key=t,o.data=e,o.fieldMask=n,o.precondition=r,o.fieldTransforms=i,o.type=1,o}function jw(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=Lw.call(this)||this).key=t,i.value=e,i.precondition=n,i.fieldTransforms=r,i.type=0,i}function qw(n){var r=new Map;return n.fieldMask.fields.forEach(function(t){var e;t.isEmpty()||(e=n.data.field(t),r.set(t,e))}),r}function Vw(t,e,n){var r=new Map;lb(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,(o=a,a=s,s=n[i],o instanceof pw?gw(o,a):o instanceof mw?_w(o,a):s))}return r}function Bw(t,e,n){for(var r,i=new Map,o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=n.data.field(s.field);i.set(s.field,(r=c,s=e,c=void 0,(u=u)instanceof fw?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof pw?gw(u,r):u instanceof mw?_w(u,r):(u=cw(c=u,r),r=Ew(u)+Ew(c.A),t_(u)&&t_(c.A)?sw(r):aw(c.R,r))))}return i}function Kw(t){this.count=t}var Ww,Hw,Gw,zw=(Xi(Xw,Gw=Sn),Xw),Qw=(Xi(Yw,Hw=Sn),Yw);function Yw(t,e){var n=this;return(n=Hw.call(this)||this).key=t,n.precondition=e,n.type=3,n.fieldTransforms=[],n}function Xw(t,e){var n=this;return(n=Gw.call(this)||this).key=t,n.precondition=e,n.type=2,n.fieldTransforms=[],n}function Jw(t){switch(t){case eb.OK:return hb(),0;case eb.CANCELLED:case eb.UNKNOWN:case eb.DEADLINE_EXCEEDED:case eb.RESOURCE_EXHAUSTED:case eb.INTERNAL:case eb.UNAVAILABLE:case eb.UNAUTHENTICATED:return;case eb.INVALID_ARGUMENT:case eb.NOT_FOUND:case eb.ALREADY_EXISTS:case eb.PERMISSION_DENIED:case eb.FAILED_PRECONDITION:case eb.ABORTED:case eb.OUT_OF_RANGE:case eb.UNIMPLEMENTED:case eb.DATA_LOSS:return 1;default:return hb(),0}}function $w(t){if(void 0===t)return sb("GRPC error has no .code"),eb.UNKNOWN;switch(t){case Ww.OK:return eb.OK;case Ww.CANCELLED:return eb.CANCELLED;case Ww.UNKNOWN:return eb.UNKNOWN;case Ww.DEADLINE_EXCEEDED:return eb.DEADLINE_EXCEEDED;case Ww.RESOURCE_EXHAUSTED:return eb.RESOURCE_EXHAUSTED;case Ww.INTERNAL:return eb.INTERNAL;case Ww.UNAVAILABLE:return eb.UNAVAILABLE;case Ww.UNAUTHENTICATED:return eb.UNAUTHENTICATED;case Ww.INVALID_ARGUMENT:return eb.INVALID_ARGUMENT;case Ww.NOT_FOUND:return eb.NOT_FOUND;case Ww.ALREADY_EXISTS:return eb.ALREADY_EXISTS;case Ww.PERMISSION_DENIED:return eb.PERMISSION_DENIED;case Ww.FAILED_PRECONDITION:return eb.FAILED_PRECONDITION;case Ww.ABORTED:return eb.ABORTED;case Ww.OUT_OF_RANGE:return eb.OUT_OF_RANGE;case Ww.UNIMPLEMENTED:return eb.UNIMPLEMENTED;case Ww.DATA_LOSS:return eb.DATA_LOSS;default:return hb()}}(G=Ww=Ww||{})[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";var Zw=(iI.prototype.insert=function(t,e){return new iI(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,eI.BLACK,null,null))},iI.prototype.remove=function(t){return new iI(this.comparator,this.root.remove(t,this.comparator).copy(null,null,eI.BLACK,null,null))},iI.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},iI.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},iI.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(iI.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),iI.prototype.minKey=function(){return this.root.minKey()},iI.prototype.maxKey=function(){return this.root.maxKey()},iI.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},iI.prototype.forEach=function(n){this.inorderTraversal(function(t,e){return n(t,e),!1})},iI.prototype.toString=function(){var n=[];return this.inorderTraversal(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},iI.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},iI.prototype.getIterator=function(){return new tI(this.root,null,this.comparator,!1)},iI.prototype.getIteratorFrom=function(t){return new tI(this.root,t,this.comparator,!1)},iI.prototype.getReverseIterator=function(){return new tI(this.root,null,this.comparator,!0)},iI.prototype.getReverseIteratorFrom=function(t){return new tI(this.root,t,this.comparator,!0)},iI),tI=(rI.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},rI.prototype.hasNext=function(){return 0<this.nodeStack.length},rI.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},rI),eI=(nI.prototype.copy=function(t,e,n,r,i){return new nI(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},nI.prototype.isEmpty=function(){return!1},nI.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},nI.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},nI.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},nI.prototype.minKey=function(){return this.min().key},nI.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},nI.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},nI.prototype.removeMin=function(){if(this.left.isEmpty())return nI.EMPTY;var t=this;return(t=(t=!t.left.isRed()&&!t.left.left.isRed()?t.moveRedLeft():t).copy(null,null,null,t.left.removeMin(),null)).fixUp()},nI.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=!(r.left.isEmpty()||r.left.isRed()||r.left.left.isRed())?r.moveRedLeft():r).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=!((r=r.left.isRed()?r.rotateRight():r).right.isEmpty()||r.right.isRed()||r.right.left.isRed())?r.moveRedRight():r).key)){if(r.right.isEmpty())return nI.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},nI.prototype.isRed=function(){return this.color},nI.prototype.fixUp=function(){var t=this;return t=(t=(t=t.right.isRed()&&!t.left.isRed()?t.rotateLeft():t).left.isRed()&&t.left.left.isRed()?t.rotateRight():t).left.isRed()&&t.right.isRed()?t.colorFlip():t},nI.prototype.moveRedLeft=function(){var t=this.colorFlip();return t=t.right.left.isRed()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip():t},nI.prototype.moveRedRight=function(){var t=this.colorFlip();return t=t.left.left.isRed()?(t=t.rotateRight()).colorFlip():t},nI.prototype.rotateLeft=function(){var t=this.copy(null,null,nI.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},nI.prototype.rotateRight=function(){var t=this.copy(null,null,nI.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},nI.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},nI.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},nI.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw hb();if(this.right.isRed())throw hb();var t=this.left.check();if(t!==this.right.check())throw hb();return t+(this.isRed()?0:1)},nI);function nI(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:nI.RED,this.left=null!=r?r:nI.EMPTY,this.right=null!=i?i:nI.EMPTY,this.size=this.left.size+1+this.right.size}function rI(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}function iI(t,e){this.comparator=t,this.root=e||eI.EMPTY}function oI(){this.size=0}eI.EMPTY=null,eI.RED=!0,eI.BLACK=!1,eI.EMPTY=(Object.defineProperty(oI.prototype,"key",{get:function(){throw hb()},enumerable:!1,configurable:!0}),Object.defineProperty(oI.prototype,"value",{get:function(){throw hb()},enumerable:!1,configurable:!0}),Object.defineProperty(oI.prototype,"color",{get:function(){throw hb()},enumerable:!1,configurable:!0}),Object.defineProperty(oI.prototype,"left",{get:function(){throw hb()},enumerable:!1,configurable:!0}),Object.defineProperty(oI.prototype,"right",{get:function(){throw hb()},enumerable:!1,configurable:!0}),oI.prototype.copy=function(t,e,n,r,i){return this},oI.prototype.insert=function(t,e,n){return new eI(t,e)},oI.prototype.remove=function(t,e){return this},oI.prototype.isEmpty=function(){return!0},oI.prototype.inorderTraversal=function(t){return!1},oI.prototype.reverseTraversal=function(t){return!1},oI.prototype.minKey=function(){return null},oI.prototype.maxKey=function(){return null},oI.prototype.isRed=function(){return!1},oI.prototype.checkMaxDepth=function(){return!0},oI.prototype.check=function(){return 0},new oI);var aI=(hI.prototype.has=function(t){return null!==this.data.get(t)},hI.prototype.first=function(){return this.data.minKey()},hI.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(hI.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),hI.prototype.indexOf=function(t){return this.data.indexOf(t)},hI.prototype.forEach=function(n){this.data.inorderTraversal(function(t,e){return n(t),!1})},hI.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},hI.prototype.forEachWhile=function(t,e){for(var n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},hI.prototype.firstAfterOrEqual=function(t){t=this.data.getIteratorFrom(t);return t.hasNext()?t.getNext().key:null},hI.prototype.getIterator=function(){return new sI(this.data.getIterator())},hI.prototype.getIteratorFrom=function(t){return new sI(this.data.getIteratorFrom(t))},hI.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},hI.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},hI.prototype.isEmpty=function(){return this.data.isEmpty()},hI.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},hI.prototype.isEqual=function(t){if(!(t instanceof hI))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},hI.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},hI.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},hI.prototype.copy=function(t){var e=new hI(this.comparator);return e.data=t,e},hI),sI=(cI.prototype.getNext=function(){return this.iter.getNext().key},cI.prototype.hasNext=function(){return this.iter.hasNext()},cI),uI=new Zw(Hb.comparator);function cI(t){this.iter=t}function hI(t){this.comparator=t,this.data=new Zw(this.comparator)}var lI=new Zw(Hb.comparator);var fI=new Zw(Hb.comparator);var pI=new aI(Hb.comparator);function dI(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=pI,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var vI=new aI(db);var gI=(CI.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n=new Map;return n.set(t,yI.createSynthesizedTargetChangeForCurrentChange(t,e)),new CI(mb.min(),n,vI,uI,dI())},CI),yI=(SI.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new SI(Rb.EMPTY_BYTE_STRING,e,dI(),dI(),dI())},SI),mI=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},bI=function(t,e){this.targetId=t,this.V=e},_I=function(t,e,n,r){void 0===n&&(n=Rb.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},wI=(Object.defineProperty(EI.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(EI.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(EI.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(EI.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),EI.prototype.$=function(t){0<t.approximateByteSize()&&(this.F=!0,this.C=t)},EI.prototype.M=function(){var n=dI(),r=dI(),i=dI();return this.D.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:hb()}}),new yI(this.C,this.N,n,r,i)},EI.prototype.L=function(){this.F=!1,this.D=NI()},EI.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},EI.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},EI.prototype.U=function(){this.S+=1},EI.prototype.K=function(){--this.S},EI.prototype.j=function(){this.F=!0,this.N=!0},EI),II=(TI.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},TI.prototype.et=function(n){var r=this;this.forEachTarget(n,function(t){var e=r.nt(t);switch(n.state){case 0:r.st(t)&&e.$(n.resumeToken);break;case 1:e.K(),e.k||e.L(),e.$(n.resumeToken);break;case 2:e.K(),e.k||r.removeTarget(t);break;case 3:r.st(t)&&(e.j(),e.$(n.resumeToken));break;case 4:r.st(t)&&(r.it(t),e.$(n.resumeToken));break;default:hb()}})},TI.prototype.forEachTarget=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.G.forEach(function(t,e){r.st(e)&&n(e)})},TI.prototype.rt=function(t){var e=t.targetId,n=t.V.count,t=this.ot(e);t&&(p_(t=t.target)?0===n?(t=new Hb(t.path),this.tt(e,t,s_.newNoDocument(t,mb.min()))):lb(1===n):this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e)))},TI.prototype.ut=function(r){var i=this,o=new Map;this.G.forEach(function(t,e){var n=i.ot(e);n&&(t.current&&p_(n.target)&&(n=new Hb(n.target.path),null!==i.H.get(n)||i.at(e,n)||i.tt(e,n,s_.newNoDocument(n,r))),t.O&&(o.set(e,t.M()),t.L()))});var a=dI();this.J.forEach(function(t,e){var n=!0;e.forEachWhile(function(t){t=i.ot(t);return!t||2===t.purpose||(n=!1)}),n&&(a=a.add(t))});var t=new gI(r,o,this.Y,this.H,a);return this.H=uI,this.J=kI(),this.Y=new aI(db),t},TI.prototype.Z=function(t,e){var n;this.st(t)&&(n=this.at(t,e.key)?2:0,this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t)))},TI.prototype.tt=function(t,e,n){var r;this.st(t)&&(r=this.nt(t),this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n)))},TI.prototype.removeTarget=function(t){this.G.delete(t)},TI.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},TI.prototype.U=function(t){this.nt(t).U()},TI.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new wI,this.G.set(t,e)),e},TI.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new aI(db),this.J=this.J.insert(t,e)),e},TI.prototype.st=function(t){var e=null!==this.ot(t);return e||ab("WatchChangeAggregator","Detected inactive target",t),e},TI.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},TI.prototype.it=function(e){var n=this;this.G.set(e,new wI),this.W.getRemoteKeysForTarget(e).forEach(function(t){n.tt(e,t,null)})},TI.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},TI);function TI(t){this.W=t,this.G=new Map,this.H=uI,this.J=kI(),this.Y=new aI(db)}function EI(){this.S=0,this.D=NI(),this.C=Rb.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}function SI(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function CI(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function kI(){return new Zw(Hb.comparator)}function NI(){return new Zw(Hb.comparator)}var AI={asc:"ASCENDING",desc:"DESCENDING"},RI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PI=function(t,e){this.databaseId=t,this.I=e};function OI(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function DI(t,e){return t.I?e.toBase64():e.toUint8Array()}function xI(t){return lb(!!t),mb.fromTimestamp((t=Fb(t),new yb(t.seconds,t.nanos)))}function LI(t,e){return new Cb(["projects",t.projectId,"databases",t.database]).child("documents").child(e).canonicalString()}function MI(t){t=Cb.fromString(t);return lb(nT(t)),t}function FI(t,e){return LI(t.databaseId,e.path)}function UI(t,e){e=MI(e);if(e.get(1)!==t.databaseId.projectId)throw new nb(eb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new nb(eb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new Hb(BI(e))}function jI(t,e){return LI(t.databaseId,e)}function qI(t){t=MI(t);return 4===t.length?Cb.emptyPath():BI(t)}function VI(t){return new Cb(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BI(t){return lb(4<t.length&&"documents"===t.get(4)),t.popFirst(5)}function KI(t,e,n){return{name:FI(t,e),fields:n.toProto().mapValue.fields}}function WI(t,e,n){var r=UI(t,e.name),t=xI(e.updateTime),e=new o_({mapValue:{fields:e.fields}}),e=s_.newFoundDocument(r,t,e);return n&&e.setHasCommittedMutations(),n?e.setHasCommittedMutations():e}function HI(t,e){var n,r,i;if(e instanceof Mw)n={update:KI(t,e.key,e.value)};else if(e instanceof zw)n={delete:FI(t,e.key)};else if(e instanceof Fw)n={update:KI(t,e.key,e.data),updateMask:(i=e.fieldMask,r=[],i.fields.forEach(function(t){return r.push(t.canonicalString())}),{fieldPaths:r})};else{if(!(e instanceof Qw))return hb();n={verify:FI(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof fw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(e instanceof pw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:e.elements}};if(e instanceof mw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:e.elements}};if(e instanceof Iw)return{fieldPath:t.field.canonicalString(),increment:e.A};throw hb()})),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:(e=t,t=i.updateTime,OI(e,t.toTimestamp()))}:void 0!==i.exists?{exists:i.exists}:hb()),n}function GI(e,t){var n=t.currentDocument?void 0!==(a=t.currentDocument).updateTime?Nw.updateTime(xI(a.updateTime)):void 0!==a.exists?Nw.exists(a.exists):Nw.none():Nw.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?(lb("REQUEST_TIME"===e.setToServerValue),r=new fw):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new pw(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new mw(n)):"increment"in e?r=new Iw(t,e.increment):hb();e=Nb.fromServerFormat(e.fieldPath);return new kw(e,r)}(e,t)}):[];if(t.update){t.update.name;var i=UI(e,t.update.name),o=new o_({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=(a=t.updateMask.fieldPaths||[],new Ab(a.map(function(t){return Nb.fromServerFormat(t)})));return new Fw(i,o,a,n,r)}return new Mw(i,o,n,r)}if(t.delete){r=UI(e,t.delete);return new zw(r,n)}if(t.verify){t=UI(e,t.verify);return new Qw(t,n)}return hb()}function zI(t,e){return{documents:[jI(t,e.path)]}}function QI(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=jI(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=jI(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(r_(t.value))return{unaryFilter:{field:$I(t.field),op:"IS_NAN"}};if(n_(t.value))return{unaryFilter:{field:$I(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(r_(t.value))return{unaryFilter:{field:$I(t.field),op:"IS_NOT_NAN"}};if(n_(t.value))return{unaryFilter:{field:$I(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$I(t.field),op:(e=t.op,RI[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:$I((t=t).field),direction:(t=t.dir,AI[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.I||Bb(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=XI(e.startAt)),e.endAt&&(n.structuredQuery.endAt=XI(e.endAt)),n}function YI(t){var e=qI(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(lb(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[eT(t)]:void 0!==t.fieldFilter?[tT(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):hb():[]}(n.where));var a=[],t=null,r=null,s=null;return H_(e,i,a=n.orderBy?n.orderBy.map(function(t){return new V_(ZI((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}):a,o,t=n.limit?Bb(o="object"==typeof(o=n.limit)?o.value:o)?null:o:t,"F",r=n.startAt?JI(n.startAt):r,s=n.endAt?JI(n.endAt):s)}function XI(t){return{before:t.before,values:t.position}}function JI(t){var e=!!t.before,t=t.values||[];return new L_(t,e)}function $I(t){return{fieldPath:t.canonicalString()}}function ZI(t){return Nb.fromServerFormat(t.fieldPath)}function tT(t){return v_.create(ZI(t.fieldFilter.field),function(){switch(t.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return hb()}}(),t.fieldFilter.value)}function eT(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ZI(t.unaryFilter.field);return v_.create(e,"==",{doubleValue:NaN});case"IS_NULL":e=ZI(t.unaryFilter.field);return v_.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=ZI(t.unaryFilter.field);return v_.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":n=ZI(t.unaryFilter.field);return v_.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return hb()}}function nT(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function rT(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=iT(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return iT(e)}function iT(t){return t+""}function oT(t){var e=t.length;if(lb(2<=e),2===e)return lb(""===t.charAt(0)&&""===t.charAt(1)),Cb.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||n<a)&&hb(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:hb()}o=a+2}return new Cb(r)}function aT(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var sT=function(t,e){this.seconds=t,this.nanoseconds=e};aT.store="owner",aT.key="owner";function uT(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}uT.store="mutationQueues",uT.keyPath="userId";function cT(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}cT.store="mutations",cT.keyPath="batchId",cT.userMutationsIndex="userMutationsIndex",cT.userMutationsKeyPath=["userId","batchId"];var hT=(lT.prefixForUser=function(t){return[t]},lT.prefixForPath=function(t,e){return[t,rT(e)]},lT.key=function(t,e,n){return[t,rT(e),n]},lT);function lT(){}hT.store="documentMutations",hT.PLACEHOLDER=new hT;function fT(t,e){this.path=t,this.readTime=e}function pT(t,e){this.path=t,this.version=e}var dT=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};dT.store="remoteDocuments",dT.readTimeIndex="readTimeIndex",dT.readTimeIndexPath="readTime",dT.collectionReadTimeIndex="collectionReadTimeIndex",dT.collectionReadTimeIndexPath=["parentPath","readTime"];function vT(t){this.byteSize=t}vT.store="remoteDocumentGlobal",vT.key="remoteDocumentGlobalKey";function gT(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}gT.store="targets",gT.keyPath="targetId",gT.queryTargetsIndexName="queryTargetsIndex",gT.queryTargetsKeyPath=["canonicalId","targetId"];var yT=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};yT.store="targetDocuments",yT.keyPath=["targetId","path"],yT.documentTargetsIndex="documentTargetsIndex",yT.documentTargetsKeyPath=["path","targetId"];function mT(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}mT.key="targetGlobalKey",mT.store="targetGlobal";function bT(t,e){this.collectionId=t,this.parent=e}bT.store="collectionParents",bT.keyPath=["collectionId","parent"];function _T(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}_T.store="clientMetadata",_T.keyPath="clientId";function wT(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}wT.store="bundles",wT.keyPath="bundleId";function IT(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}IT.store="namedQueries",IT.keyPath="name";var TT,ET=no(no([],no(no([],no(no([],no(no([],[uT.store,cT.store,hT.store,dT.store,gT.store,aT.store,mT.store,yT.store]),[_T.store])),[vT.store])),[bT.store])),[wT.store,IT.store]),ST="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sn=(FT.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},FT.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},FT),CT=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},kT=(MT.prototype.catch=function(t){return this.next(void 0,t)},MT.prototype.next=function(r,i){var o=this;return this.callbackAttached&&hb(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new MT(function(e,n){o.nextCallback=function(t){o.wrapSuccess(r,t).next(e,n)},o.catchCallback=function(t){o.wrapFailure(i,t).next(e,n)}})},MT.prototype.toPromise=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},MT.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof MT?e:MT.resolve(e)}catch(t){return MT.reject(t)}},MT.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):MT.resolve(e)},MT.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):MT.reject(e)},MT.resolve=function(n){return new MT(function(t,e){t(n)})},MT.reject=function(n){return new MT(function(t,e){e(n)})},MT.waitFor=function(t){return new MT(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},MT.or=function(t){for(var n=MT.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?MT.resolve(t):e()})}(r[e]);return n},MT.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.waitFor(i)},MT),NT=(LT.open=function(t,e,n,r){try{return new LT(e,t.transaction(r,n))}catch(t){throw new PT(e,t)}},Object.defineProperty(LT.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),LT.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(ab("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},LT.prototype.store=function(t){t=this.transaction.objectStore(t);return new jT(t)},LT),AT=(xT.delete=function(t){return ab("SimpleDb","Removing database:",t),VT(window.indexedDB.deleteDatabase(t)).toPromise()},xT.yt=function(){if("undefined"==typeof indexedDB)return!1;if(xT.gt())return!0;var t=vo(),e=xT._t(t),n=0<e&&e<10,e=xT.Et(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},xT.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},xT.It=function(t,e){return t.store(e)},xT._t=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},xT.Et=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},xT.prototype.At=function(o){return $i(this,void 0,void 0,function(){var e,i=this;return Zi(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(ab("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new PT(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new nb(eb.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new PT(o,t))},r.onupgradeneeded=function(t){ab("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.wt.Rt(e,r.transaction,t.oldVersion,i.version).next(function(){ab("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return i.bt(t)}),this.db)]}})})},xT.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},xT.prototype.runTransaction=function(s,n,u,c){return $i(this,void 0,void 0,function(){var i,o,a,e;return Zi(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,a.At(s)];case 2:return a.db=t.sent(),e=NT.open(a.db,s,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),kT.reject(t)}).toPromise(),r={},n.catch(function(){}),[4,e.dt];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,ab("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),a.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},a=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},xT.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},xT),RT=(Object.defineProperty(DT.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(DT.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(DT.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),DT.prototype.done=function(){this.Vt=!0},DT.prototype.Ct=function(t){this.St=t},DT.prototype.delete=function(){return VT(this.Pt.delete())},DT),PT=(Xi(OT,TT=nb),OT);function OT(t,e){var n=this;return(n=TT.call(this,eb.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function DT(t){this.Pt=t,this.Vt=!1,this.St=null}function xT(t,e,n){this.name=t,this.version=e,this.wt=n,12.2===xT._t(vo())&&sb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function LT(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new CT,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new PT(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){t=KT(t.target.error);n.ft.reject(new PT(e,t))}}function MT(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}function FT(){this.onCommittedListeners=[]}function UT(t){return"IndexedDbTransactionError"===t.name}var jT=(qT.prototype.put=function(t,e){t=void 0!==e?(ab("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(ab("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return VT(t)},qT.prototype.add=function(t){return ab("SimpleDb","ADD",this.store.name,t,t),VT(this.store.add(t))},qT.prototype.get=function(e){var n=this;return VT(this.store.get(e)).next(function(t){return void 0===t&&(t=null),ab("SimpleDb","GET",n.store.name,e,t),t})},qT.prototype.delete=function(t){return ab("SimpleDb","DELETE",this.store.name,t),VT(this.store.delete(t))},qT.prototype.count=function(){return ab("SimpleDb","COUNT",this.store.name),VT(this.store.count())},qT.prototype.Nt=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.xt(e,function(t,e){n.push(e)}).next(function(){return n})},qT.prototype.Ft=function(t,e){ab("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.kt=!1;e=this.cursor(e);return this.xt(e,function(t,e,n){return n.delete()})},qT.prototype.Ot=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.xt(n,e)},qT.prototype.$t=function(r){var t=this.cursor({});return new kT(function(n,e){t.onerror=function(t){t=KT(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},qT.prototype.xt=function(t,i){var o=[];return new kT(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new RT(n),(t=i(n.primaryKey,n.value,e))instanceof kT&&(t=t.catch(function(t){return e.done(),kT.reject(t)}),o.push(t)),e.isDone?r():null===e.Dt?n.continue():n.continue(e.Dt)):r()}}).next(function(){return kT.waitFor(o)})},qT.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},qT.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},qT);function qT(t){this.store=t}function VT(t){return new kT(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=KT(t.target.error);n(t)}})}var BT=!1;function KT(t){var e=AT._t(vo());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new nb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return BT||(BT=!0,setTimeout(function(){throw n},0)),n}}return t}var WT,HT=(Xi(GT,WT=Sn),GT);function GT(t,e){var n=this;return(n=WT.call(this)||this).Mt=t,n.currentSequenceNumber=e,n}function zT(t,e){return AT.It(t.Mt,e)}var QT=(tE.prototype.applyToRemoteDocument=function(t,e){for(var n,r,i,o,a,s,u=e.mutationResults,c=0;c<this.mutations.length;c++){var h=this.mutations[c];h.key.isEqual(t.key)&&(n=h,r=t,i=u[c],h=s=a=o=void 0,n instanceof Mw?(a=r,s=i,h=(o=n).value.clone(),o=Vw(o.fieldTransforms,a,s.transformResults),h.setAll(o),a.convertToFoundDocument(s.version,h).setHasCommittedMutations()):n instanceof Fw?(o=r,a=i,Rw((s=n).precondition,o)?(h=Vw(s.fieldTransforms,o,a.transformResults),(n=o.data).setAll(qw(s)),n.setAll(h),o.convertToFoundDocument(a.version,n).setHasCommittedMutations()):o.convertToUnknownDocument(a.version)):r.convertToNoDocument(i.version).setHasCommittedMutations())}},tE.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(r=n[e]).key.isEqual(t.key)&&Pw(r,t,this.localWriteTime);for(var r,i=0,o=this.mutations;i<o.length;i++)(r=o[i]).key.isEqual(t.key)&&Pw(r,t,this.localWriteTime)},tE.prototype.applyToLocalDocumentSet=function(n){var r=this;this.mutations.forEach(function(t){var e=n.get(t.key),t=e;r.applyToLocalView(t),e.isValidDocument()||t.convertToNoDocument(mb.min())})},tE.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},dI())},tE.prototype.isEqual=function(t){return this.batchId===t.batchId&&vb(this.mutations,t.mutations,Ow)&&vb(this.baseMutations,t.baseMutations,Ow)},tE),YT=(ZT.from=function(t,e,n){lb(t.mutations.length===n.length);for(var r=fI,i=t.mutations,o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new ZT(t,e,n,r)},ZT),XT=($T.prototype.withSequenceNumber=function(t){return new $T(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},$T.prototype.withResumeToken=function(t,e){return new $T(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},$T.prototype.withLastLimboFreeSnapshotVersion=function(t){return new $T(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},$T),JT=function(t){this.Lt=t};function $T(t,e,n,r,i,o,a){void 0===i&&(i=mb.min()),void 0===o&&(o=mb.min()),void 0===a&&(a=Rb.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}function ZT(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}function tE(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}function eE(t,e){if(e.document)return WI(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Hb.fromSegments(e.noDocument.path),r=aE(e.noDocument.readTime),n=s_.newNoDocument(n,r);return e.hasCommittedMutations?n.setHasCommittedMutations():n}if(e.unknownDocument){n=Hb.fromSegments(e.unknownDocument.path),r=aE(e.unknownDocument.version);return s_.newUnknownDocument(n,r)}return hb()}function nE(t,e,n){var r=rE(n),n=e.key.path.popLast().toArray();if(e.isFoundDocument()){var i={name:FI(o=t.Lt,(a=e).key),fields:a.data.toProto().mapValue.fields,updateTime:OI(o,a.version.toTimestamp())},o=e.hasCommittedMutations;return new dT(null,null,i,o,r,n)}if(e.isNoDocument()){var a=e.key.path.toArray(),i=oE(e.version),o=e.hasCommittedMutations;return new dT(null,new fT(a,i),null,o,r,n)}if(e.isUnknownDocument()){o=e.key.path.toArray(),e=oE(e.version);return new dT(new pT(o,e),null,null,!0,r,n)}return hb()}function rE(t){t=t.toTimestamp();return[t.seconds,t.nanoseconds]}function iE(t){t=new yb(t[0],t[1]);return mb.fromTimestamp(t)}function oE(t){t=t.toTimestamp();return new sT(t.seconds,t.nanoseconds)}function aE(t){t=new yb(t.seconds,t.nanoseconds);return mb.fromTimestamp(t)}function sE(e,t){for(var n=(t.baseMutations||[]).map(function(t){return GI(e.Lt,t)}),r=0;r<t.mutations.length-1;++r){var i,o=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i=t.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var a=t.mutations.map(function(t){return GI(e.Lt,t)}),s=yb.fromMillis(t.localWriteTimeMs);return new QT(t.batchId,s,n,a)}function uE(t){var e=aE(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?aE(t.lastLimboFreeSnapshotVersion):mb.min(),r=void 0!==t.query.documents?(lb(1===(r=t.query).documents.length),Z_(G_(qI(r.documents[0])))):Z_(YI(t.query));return new XT(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Rb.fromBase64String(t.resumeToken))}function cE(t,e){var n=oE(e.snapshotVersion),r=oE(e.lastLimboFreeSnapshotVersion),i=(p_(e.target)?zI:QI)(t.Lt,e.target),t=e.resumeToken.toBase64();return new gT(e.targetId,l_(e.target),n,t,e.sequenceNumber,r,i)}function hE(t){var e=YI({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?tw(e,e.limit,"L"):e}var lE=(fE.prototype.getBundleMetadata=function(t,e){return pE(t).get(e).next(function(t){if(t)return{id:(t=t).bundleId,createTime:aE(t.createTime),version:t.version}})},fE.prototype.saveBundleMetadata=function(t,e){return pE(t).put({bundleId:(e=e).id,createTime:oE(xI(e.createTime)),version:e.version})},fE.prototype.getNamedQuery=function(t,e){return dE(t).get(e).next(function(t){if(t)return{name:(t=t).name,query:hE(t.bundledQuery),readTime:aE(t.readTime)}})},fE.prototype.saveNamedQuery=function(t,e){return dE(t).put({name:(e=e).name,readTime:oE(xI(e.readTime)),bundledQuery:e.bundledQuery})},fE);function fE(){}function pE(t){return zT(t,wT.store)}function dE(t){return zT(t,IT.store)}var vE=(_E.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),kT.resolve()},_E.prototype.getCollectionParents=function(t,e){return kT.resolve(this.Bt.getEntries(e))},_E),gE=(bE.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new aI(Cb.comparator),t=!r.has(n);return this.index[e]=r.add(n),t},bE.prototype.has=function(t){var e=t.lastSegment(),t=t.popLast(),e=this.index[e];return e&&e.has(t)},bE.prototype.getEntries=function(t){return(this.index[t]||new aI(Cb.comparator)).toArray()},bE),yE=(mE.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(this.qt.has(e))return kT.resolve();var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});i={collectionId:r,parent:rT(i)};return wE(t).put(i)},mE.prototype.getCollectionParents=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[gb(i),""],!1,!0);return wE(t).Nt(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(oT(r.parent))}return o})},mE);function mE(){this.qt=new gE}function bE(){this.index={}}function _E(){this.Bt=new gE}function wE(t){return zT(t,bT.store)}var IE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TE=(EE.withCacheSize=function(t){return new EE(t,EE.DEFAULT_COLLECTION_PERCENTILE,EE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},EE);function EE(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}function SE(t,e,n){var r=t.store(cT.store),i=t.store(hT.store),o=[],t=IDBKeyRange.only(n.batchId),a=0,t=r.Ot({range:t},function(t,e,n){return a++,n.delete()});o.push(t.next(function(){lb(1===a)}));for(var s=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=hT.key(e,h.key.path,n.batchId);o.push(i.delete(l)),s.push(h.key)}return kT.waitFor(o).next(function(){return s})}function CE(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw hb();e=t.noDocument}return JSON.stringify(e).length}TE.DEFAULT_COLLECTION_PERCENTILE=10,TE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,TE.DEFAULT=new TE(41943040,TE.DEFAULT_COLLECTION_PERCENTILE,TE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),TE.DISABLED=new TE(-1,0,0);var kE=(NE.Kt=function(t,e,n,r){return lb(""!==t.uid),new NE(t.isAuthenticated()?t.uid:"",e,n,r)},NE.prototype.checkEmpty=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return RE(t).Ot({index:cT.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},NE.prototype.addMutationBatch=function(d,v,g,y){var m=this,b=PE(d),_=RE(d);return _.add({}).next(function(t){lb("number"==typeof t);for(var e,n,r,i,o,a=new QT(t,v,g,y),s=(e=m.R,n=m.userId,i=(r=a).baseMutations.map(function(t){return HI(e.Lt,t)}),o=r.mutations.map(function(t){return HI(e.Lt,t)}),new cT(n,r.batchId,r.localWriteTime.toMillis(),i,o)),u=[],c=new aI(function(t,e){return db(t.canonicalString(),e.canonicalString())}),h=0,l=y;h<l.length;h++){var f=l[h],p=hT.key(m.userId,f.key.path,t),c=c.add(f.key.path.popLast());u.push(_.put(s)),u.push(b.put(p,hT.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Ut.addToCollectionParentIndex(d,t))}),d.addOnCommittedListener(function(){m.Qt[t]=a.keys()}),kT.waitFor(u).next(function(){return a})})},NE.prototype.lookupMutationBatch=function(t,e){var n=this;return RE(t).get(e).next(function(t){return t?(lb(t.userId===n.userId),sE(n.R,t)):null})},NE.prototype.jt=function(t,e){var n=this;return this.Qt[e]?kT.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){t=t.keys();return n.Qt[e]=t}return null})},NE.prototype.getNextMutationBatchAfterBatchId=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return RE(t).Ot({index:cT.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(lb(e.batchId>=i),o=sE(r.R,e)),n.done()}).next(function(){return o})},NE.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return RE(t).Ot({index:cT.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},NE.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return RE(t).Nt(cT.userMutationsIndex,n).next(function(t){return t.map(function(t){return sE(e.R,t)})})},NE.prototype.getAllMutationBatchesAffectingDocumentKey=function(o,a){var s=this,t=hT.prefixForPath(this.userId,a.path),t=IDBKeyRange.lowerBound(t),u=[];return PE(o).Ot({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=oT(i);if(r===s.userId&&a.path.isEqual(i))return RE(o).get(t).next(function(t){if(!t)throw hb();lb(t.userId===s.userId),u.push(sE(s.R,t))});n.done()}).next(function(){return u})},NE.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var a=this,s=new aI(db),n=[];return t.forEach(function(o){var t=hT.prefixForPath(a.userId,o.path),t=IDBKeyRange.lowerBound(t),t=PE(e).Ot({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=oT(i);r===a.userId&&o.path.isEqual(i)?s=s.add(t):n.done()});n.push(t)}),kT.waitFor(n).next(function(){return a.Wt(e,s)})},NE.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var o=this,a=e.path,s=a.length+1,e=hT.prefixForPath(this.userId,a),e=IDBKeyRange.lowerBound(e),u=new aI(db);return PE(t).Ot({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=oT(i);r===o.userId&&a.isPrefixOf(i)?i.length===s&&(u=u.add(t)):n.done()}).next(function(){return o.Wt(t,u)})},NE.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(RE(e).get(t).next(function(t){if(null===t)throw hb();lb(t.userId===n.userId),r.push(sE(n.R,t))}))}),kT.waitFor(i).next(function(){return r})},NE.prototype.removeMutationBatch=function(e,n){var r=this;return SE(e.Mt,this.userId,n).next(function(t){return e.addOnCommittedListener(function(){r.Gt(n.batchId)}),kT.forEach(t,function(t){return r.referenceDelegate.markPotentiallyOrphaned(e,t)})})},NE.prototype.Gt=function(t){delete this.Qt[t]},NE.prototype.performConsistencyCheck=function(e){var i=this;return this.checkEmpty(e).next(function(t){if(!t)return kT.resolve();var t=IDBKeyRange.lowerBound(hT.prefixForUser(i.userId)),r=[];return PE(e).Ot({range:t},function(t,e,n){t[0]===i.userId?(t=oT(t[1]),r.push(t)):n.done()}).next(function(){lb(0===r.length)})})},NE.prototype.containsKey=function(t,e){return AE(t,this.userId,e)},NE.prototype.zt=function(t){var e=this;return OE(t).get(this.userId).next(function(t){return t||new uT(e.userId,-1,"")})},NE);function NE(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}function AE(t,o,e){var e=hT.prefixForPath(o,e.path),a=e[1],e=IDBKeyRange.lowerBound(e),s=!1;return PE(t).Ot({range:e,kt:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===a&&(s=!0),n.done()}).next(function(){return s})}function RE(t){return zT(t,cT.store)}function PE(t){return zT(t,hT.store)}function OE(t){return zT(t,uT.store)}var DE=(ME.prototype.next=function(){return this.Ht+=2,this.Ht},ME.Jt=function(){return new ME(0)},ME.Yt=function(){return new ME(-1)},ME),xE=(LE.prototype.allocateTargetId=function(n){var r=this;return this.Xt(n).next(function(t){var e=new DE(t.highestTargetId);return t.highestTargetId=e.next(),r.Zt(n,t).next(function(){return t.highestTargetId})})},LE.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return mb.fromTimestamp(new yb(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},LE.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},LE.prototype.setTargetsMetadata=function(e,n,r){var i=this;return this.Xt(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.toTimestamp()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Zt(e,t)})},LE.prototype.addTargetData=function(e,n){var r=this;return this.te(e,n).next(function(){return r.Xt(e).next(function(t){return t.targetCount+=1,r.ee(n,t),r.Zt(e,t)})})},LE.prototype.updateTargetData=function(t,e){return this.te(t,e)},LE.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return FE(e).delete(t.targetId)}).next(function(){return n.Xt(e)}).next(function(t){return lb(0<t.targetCount),--t.targetCount,n.Zt(e,t)})},LE.prototype.removeTargets=function(n,r,i){var o=this,a=0,s=[];return FE(n).Ot(function(t,e){e=uE(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(a++,s.push(o.removeTargetData(n,e)))}).next(function(){return kT.waitFor(s)}).next(function(){return a})},LE.prototype.forEachTarget=function(t,n){return FE(t).Ot(function(t,e){e=uE(e);n(e)})},LE.prototype.Xt=function(t){return UE(t).get(mT.key).next(function(t){return lb(null!==t),t})},LE.prototype.Zt=function(t,e){return UE(t).put(mT.key,e)},LE.prototype.te=function(t,e){return FE(t).put(cE(this.R,e))},LE.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},LE.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},LE.prototype.getTargetData=function(t,r){var e=l_(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return FE(t).Ot({range:e,index:gT.queryTargetsIndexName},function(t,e,n){e=uE(e);f_(r,e.target)&&(i=e,n.done())}).next(function(){return i})},LE.prototype.addMatchingKeys=function(n,t,r){var i=this,o=[],a=jE(n);return t.forEach(function(t){var e=rT(t.path);o.push(a.put(new yT(r,e))),o.push(i.referenceDelegate.addReference(n,r,t))}),kT.waitFor(o)},LE.prototype.removeMatchingKeys=function(n,t,r){var i=this,o=jE(n);return kT.forEach(t,function(t){var e=rT(t.path);return kT.waitFor([o.delete([r,e]),i.referenceDelegate.removeReference(n,r,t)])})},LE.prototype.removeMatchingKeysForTargetId=function(t,e){t=jE(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},LE.prototype.getMatchingKeysForTargetId=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=jE(t),r=dI();return t.Ot({range:e,kt:!0},function(t,e,n){t=oT(t[1]),t=new Hb(t);r=r.add(t)}).next(function(){return r})},LE.prototype.containsKey=function(t,e){var e=rT(e.path),e=IDBKeyRange.bound([e],[gb(e)],!1,!0),i=0;return jE(t).Ot({index:yT.documentTargetsIndex,kt:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},LE.prototype.lt=function(t,e){return FE(t).get(e).next(function(t){return t?uE(t):null})},LE);function LE(t,e){this.referenceDelegate=t,this.R=e}function ME(t){this.Ht=t}function FE(t){return zT(t,gT.store)}function UE(t){return zT(t,mT.store)}function jE(t){return zT(t,yT.store)}function qE(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){if(e.code!==eb.FAILED_PRECONDITION||e.message!==ST)throw e;return ab("LocalStore","Unexpectedly lost primary lease"),[2]})})}function VE(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=db(n,t);return 0===t?db(r,e):t}var BE=(YE.prototype.ie=function(){return++this.se},YE.prototype.re=function(t){var e=[t,this.ie()];this.buffer.size<this.ne?this.buffer=this.buffer.add(e):VE(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(YE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),YE),KE=(QE.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},QE.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(QE.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),QE.prototype.ue=function(n){var t=this,e=this.oe?3e5:6e4;ab("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:this.ce=null,this.oe=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.collectGarbage(this.garbageCollector)];case 2:return t.sent(),[3,7];case 3:return UT(e=t.sent())?(ab("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,qE(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.ue(n)];case 8:return t.sent(),[2]}})})})},QE),WE=(zE.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},zE.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return kT.resolve($m.o);var r=new BE(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},zE.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},zE.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},zE.prototype.collect=function(e,n){var r=this;return-1===this.params.cacheSizeCollectionThreshold?(ab("LruGarbageCollector","Garbage collection skipped; disabled"),kT.resolve(IE)):this.getCacheSize(e).next(function(t){return t<r.params.cacheSizeCollectionThreshold?(ab("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),IE):r.fe(e,n)})},zE.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},zE.prototype.fe=function(e,n){var r,i,o,a,s,u,c,h=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return i=t>h.params.maximumSequenceNumbersToCollect?(ab("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+t),h.params.maximumSequenceNumbersToCollect):t,a=Date.now(),h.nthSequenceNumber(e,i)}).next(function(t){return r=t,s=Date.now(),h.removeTargets(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.removeOrphanedDocuments(e,r)}).next(function(t){return c=Date.now(),ob()<=ua.DEBUG&&ab("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-l)+"ms\n\tDetermined least recently used "+i+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),kT.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})})},zE),HE=(GE.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(e){return n.next(function(t){return e+t})})},GE.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},GE.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},GE.prototype.le=function(t,n){return this.we(t,function(t,e){return n(e)})},GE.prototype.addReference=function(t,e,n){return XE(t,n)},GE.prototype.removeReference=function(t,e,n){return XE(t,n)},GE.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},GE.prototype.markPotentiallyOrphaned=XE,GE.prototype._e=function(t,e){return r=e,i=!1,OE(n=t).$t(function(t){return AE(n,t,r).next(function(t){return t&&(i=!0),kT.resolve(!t)})}).next(function(){return i});var n,r,i},GE.prototype.removeOrphanedDocuments=function(n,r){var i=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[],s=0;return this.we(n,function(e,t){t<=r&&(t=i._e(n,e).next(function(t){if(!t)return s++,o.getEntry(n,e).next(function(){return o.removeEntry(e),jE(n).delete([0,rT(e.path)])})}),a.push(t))}).next(function(){return kT.waitFor(a)}).next(function(){return o.apply(n)}).next(function(){return s})},GE.prototype.removeTarget=function(t,e){e=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,e)},GE.prototype.updateLimboDocument=XE,GE.prototype.we=function(t,r){var i,t=jE(t),o=$m.o;return t.Ot({index:yT.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==$m.o&&r(new Hb(oT(i)),o),o=e,i=t):o=$m.o}).next(function(){o!==$m.o&&r(new Hb(oT(i)),o)})},GE.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},GE);function GE(t,e){this.db=t,this.garbageCollector=new WE(this,e)}function zE(t,e){this.ae=t,this.params=e}function QE(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}function YE(t){this.ne=t,this.buffer=new aI(VE),this.se=0}function XE(t,e){return jE(t).put((t=t.currentSequenceNumber,new yT(0,rT(e.path),t)))}var JE,$E=(iS.prototype.get=function(t){var e=this.mapKeyFn(t),e=this.inner[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.equalsFn(o,t))return i}},iS.prototype.has=function(t){return void 0!==this.get(t)},iS.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},iS.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},iS.prototype.forEach=function(a){Ib(this.inner,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];a(o,i)}})},iS.prototype.isEmpty=function(){return Tb(this.inner)},iS),G=(rS.prototype.getReadTime=function(t){t=this.changes.get(t);return t?t.readTime:mb.min()},rS.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},rS.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:s_.newInvalidDocument(t),readTime:e})},rS.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?kT.resolve(n.document):this.getFromCache(t,e)},rS.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},rS.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},rS.prototype.assertNotApplied=function(){},rS),ZE=(nS.prototype.addEntry=function(t,e,n){return aS(t).put(sS(e),n)},nS.prototype.removeEntry=function(t,e){t=aS(t),e=sS(e);return t.delete(e)},nS.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.me(e,t)})},nS.prototype.getEntry=function(t,e){var n=this;return aS(t).get(sS(e)).next(function(t){return n.ye(e,t)})},nS.prototype.ge=function(t,e){var n=this;return aS(t).get(sS(e)).next(function(t){return{document:n.ye(e,t),size:CE(t)}})},nS.prototype.getEntries=function(t,e){var n=this,r=uI;return this.pe(t,e,function(t,e){e=n.ye(t,e);r=r.insert(t,e)}).next(function(){return r})},nS.prototype.Ee=function(t,e){var r=this,i=uI,o=new Zw(Hb.comparator);return this.pe(t,e,function(t,e){var n=r.ye(t,e);i=i.insert(t,n),o=o.insert(t,CE(e))}).next(function(){return{documents:i,Te:o}})},nS.prototype.pe=function(t,e,i){if(e.isEmpty())return kT.resolve();var n=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),o=e.getIterator(),a=o.getNext();return aS(t).Ot({range:n},function(t,e,n){for(var r=Hb.fromSegments(t);a&&Hb.comparator(a,r)<0;)i(a,null),a=o.getNext();a&&a.isEqual(r)&&(i(a,e),a=o.hasNext()?o.getNext():null),a?n.Ct(a.path.toArray()):n.done()}).next(function(){for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})},nS.prototype.getDocumentsMatchingQuery=function(t,r,e){var n,i=this,o=uI,a=r.path.length+1,s={};return e.isEqual(mb.min())?(n=r.path.toArray(),s.range=IDBKeyRange.lowerBound(n)):(n=r.path.toArray(),e=rE(e),s.range=IDBKeyRange.lowerBound([n,e],!0),s.index=dT.collectionReadTimeIndex),aS(t).Ot(s,function(t,e,n){t.length===a&&(e=eE(i.R,e),r.path.isPrefixOf(e.key.path)?iw(r,e)&&(o=o.insert(e.key,e)):n.done())}).next(function(){return o})},nS.prototype.newChangeBuffer=function(t){return new tS(this,!!t&&t.trackRemovals)},nS.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},nS.prototype.getMetadata=function(t){return oS(t).get(vT.key).next(function(t){return lb(!!t),t})},nS.prototype.me=function(t,e){return oS(t).put(vT.key,e)},nS.prototype.ye=function(t,e){if(e){e=eE(this.R,e);if(!e.isNoDocument()||!e.version.isEqual(mb.min()))return e}return s_.newInvalidDocument(t)},nS),tS=(Xi(eS,JE=G),eS.prototype.applyChanges=function(i){var o=this,a=[],s=0,u=new aI(function(t,e){return db(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(t,e){var n,r=o.Ae.get(t);e.document.isValidDocument()?(n=nE(o.Ie.R,e.document,o.getReadTime(t)),u=u.add(t.path.popLast()),e=CE(n),s+=e-r,a.push(o.Ie.addEntry(i,t,n))):(s-=r,o.trackRemovals?(r=nE(o.Ie.R,s_.newNoDocument(t,mb.min()),o.getReadTime(t)),a.push(o.Ie.addEntry(i,t,r))):a.push(o.Ie.removeEntry(i,t)))}),u.forEach(function(t){a.push(o.Ie.Ut.addToCollectionParentIndex(i,t))}),a.push(this.Ie.updateMetadata(i,s)),kT.waitFor(a)},eS.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},eS.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},eS);function eS(t,e){var n=this;return(n=JE.call(this)||this).Ie=t,n.trackRemovals=e,n.Ae=new $E(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function nS(t,e){this.R=t,this.Ut=e}function rS(){this.changes=new $E(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}function iS(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}function oS(t){return zT(t,vT.store)}function aS(t){return zT(t,dT.store)}function sS(t){return t.path.toArray()}var uS=(cS.prototype.Rt=function(e,n,t,r){var i=this;lb(t<r&&0<=t&&r<=11);var o=new NT("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(aT.store),(a=e).createObjectStore(uT.store,{keyPath:uT.keyPath}),a.createObjectStore(cT.store,{keyPath:cT.keyPath,autoIncrement:!0}).createIndex(cT.userMutationsIndex,cT.userMutationsKeyPath,{unique:!0}),a.createObjectStore(hT.store),hS(e),e.createObjectStore(dT.store));var a,s=kT.resolve();return t<3&&3<=r&&(0!==t&&((a=e).deleteObjectStore(yT.store),a.deleteObjectStore(gT.store),a.deleteObjectStore(mT.store),hS(e)),s=s.next(function(){return t=o.store(mT.store),e=new mT(0,0,mb.min().toTimestamp(),0),t.put(mT.key,e);var t,e})),t<4&&4<=r&&(s=(s=0!==t?s.next(function(){return n=e,(r=o).store(cT.store).Nt().next(function(t){n.deleteObjectStore(cT.store),n.createObjectStore(cT.store,{keyPath:cT.keyPath,autoIncrement:!0}).createIndex(cT.userMutationsIndex,cT.userMutationsKeyPath,{unique:!0});var e=r.store(cT.store),t=t.map(function(t){return e.put(t)});return kT.waitFor(t)});var n,r}):s).next(function(){e.createObjectStore(_T.store,{keyPath:_T.keyPath})})),t<5&&5<=r&&(s=s.next(function(){return i.Re(o)})),t<6&&6<=r&&(s=s.next(function(){return e.createObjectStore(vT.store),i.be(o)})),t<7&&7<=r&&(s=s.next(function(){return i.ve(o)})),t<8&&8<=r&&(s=s.next(function(){return i.Pe(e,o)})),t<9&&9<=r&&(s=s.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(dT.store)).createIndex(dT.readTimeIndex,dT.readTimeIndexPath,{unique:!1}),t.createIndex(dT.collectionReadTimeIndex,dT.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(s=s.next(function(){return i.Ve(o)})),s=t<11&&11<=r?s.next(function(){e.createObjectStore(wT.store,{keyPath:wT.keyPath}),e.createObjectStore(IT.store,{keyPath:IT.keyPath})}):s},cS.prototype.be=function(e){var n=0;return e.store(dT.store).Ot(function(t,e){n+=CE(e)}).next(function(){var t=new vT(n);return e.store(vT.store).put(vT.key,t)})},cS.prototype.Re=function(n){var r=this,t=n.store(uT.store),i=n.store(cT.store);return t.Nt().next(function(t){return kT.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.Nt(cT.userMutationsIndex,t).next(function(t){return kT.forEach(t,function(t){lb(t.userId===e.userId);t=sE(r.R,t);return SE(n,e.userId,t).next(function(){})})})})})},cS.prototype.ve=function(t){var o=t.store(yT.store),e=t.store(dT.store);return t.store(mT.store).get(mT.key).next(function(r){var i=[];return e.Ot(function(t,e){var n=new Cb(t),t=[0,rT(n)];i.push(o.get(t).next(function(t){return t?kT.resolve():o.put(new yT(0,rT(n),r.highestListenSequenceNumber))}))}).next(function(){return kT.waitFor(i)})})},cS.prototype.Pe=function(t,e){t.createObjectStore(bT.store,{keyPath:bT.keyPath});function r(t){if(i.add(t)){var e=t.lastSegment(),t=t.popLast();return n.put({collectionId:e,parent:rT(t)})}}var n=e.store(bT.store),i=new gE;return e.store(dT.store).Ot({kt:!0},function(t,e){t=new Cb(t);return r(t.popLast())}).next(function(){return e.store(hT.store).Ot({kt:!0},function(t,e){t[0];var n=t[1],n=(t[2],oT(n));return r(n.popLast())})})},cS.prototype.Ve=function(t){var n=this,r=t.store(gT.store);return r.Ot(function(t,e){e=uE(e),e=cE(n.R,e);return r.put(e)})},cS);function cS(t){this.R=t}function hS(t){t.createObjectStore(yT.store,{keyPath:yT.keyPath}).createIndex(yT.documentTargetsIndex,yT.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(gT.store,{keyPath:gT.keyPath}).createIndex(gT.queryTargetsIndexName,gT.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(mT.store)}var lS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fS=(pS.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new nb(eb.FAILED_PRECONDITION,lS);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qe.getHighestSequenceNumber(t)})}).then(function(t){e.Ne=new $m(t,e.De)}).then(function(){e.xe=!0}).catch(function(t){return e.Be&&e.Be.close(),Promise.reject(t)})},pS.prototype.He=function(n){var t=this;return this.Me=function(e){return $i(t,void 0,void 0,function(){return Zi(this,function(t){return this.started?[2,n(e)]:[2]})})},n(this.isPrimary)},pS.prototype.setDatabaseDeletedListener=function(n){var t=this;this.Be.vt(function(e){return $i(t,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},pS.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},pS.prototype.je=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return vS(e).put(new _T(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.Je(e).next(function(t){t||(n.isPrimary=!1,n.Se.enqueueRetryable(function(){return n.Me(!1)}))})}).next(function(){return n.Ye(e)}).next(function(t){return n.isPrimary&&!t?n.Xe(e).next(function(){return!1}):!!t&&n.Ze(e).next(function(){return!0})})}).catch(function(t){if(UT(t))return ab("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return ab("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Se.enqueueRetryable(function(){return n.Me(t)}),n.isPrimary=t})},pS.prototype.Je=function(t){var e=this;return dS(t).get(aT.key).next(function(t){return kT.resolve(e.tn(t))})},pS.prototype.en=function(t){return vS(t).delete(this.clientId)},pS.prototype.nn=function(){return $i(this,void 0,void 0,function(){var e,n,r,i,o=this;return Zi(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=zT(t,_T.store);return r.Nt().next(function(t){var e=o.rn(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return kT.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Ke)for(n=0,r=e;n<r.length;n++)i=r[n],this.Ke.removeItem(this.on(i.clientId));t.label=2;case 2:return[2]}})})},pS.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},pS.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},pS.prototype.Ye=function(e){var r=this;return this.Ce?kT.resolve(!0):dS(e).get(aT.key).next(function(t){if(null!==t&&r.sn(t.leaseTimestampMs,5e3)&&!r.cn(t.ownerId)){if(r.tn(t)&&r.networkEnabled)return!0;if(!r.tn(t)){if(!t.allowTabSynchronization)throw new nb(eb.FAILED_PRECONDITION,lS);return!1}}return!(!r.networkEnabled||!r.inForeground)||vS(e).Nt().next(function(t){return void 0===r.rn(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&ab("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},pS.prototype.shutdown=function(){return $i(this,void 0,void 0,function(){var n=this;return Zi(this,function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[aT.store,_T.store],function(t){var e=new HT(t,$m.o);return n.Xe(e).next(function(){return n.en(e)})})];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}})})},pS.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},pS.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return vS(t).Nt().next(function(t){return e.rn(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(pS.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),pS.prototype.getMutationQueue=function(t){return kE.Kt(t,this.R,this.Ut,this.referenceDelegate)},pS.prototype.getTargetCache=function(){return this.qe},pS.prototype.getRemoteDocumentCache=function(){return this.Ue},pS.prototype.getIndexManager=function(){return this.Ut},pS.prototype.getBundleCache=function(){return this.Qe},pS.prototype.runTransaction=function(e,n,r){var i=this;ab("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.Be.runTransaction(e,t,ET,function(t){return o=new HT(t,i.Ne?i.Ne.next():$m.o),"readwrite-primary"===n?i.Je(o).next(function(t){return!!t||i.Ye(o)}).next(function(t){if(!t)throw sb("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new nb(eb.FAILED_PRECONDITION,ST);return r(o)}).next(function(t){return i.Ze(o).next(function(){return t})}):i.dn(o).next(function(){return r(o)})}).then(function(t){return o.raiseOnCommittedEvent(),t})},pS.prototype.dn=function(t){var e=this;return dS(t).get(aT.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new nb(eb.FAILED_PRECONDITION,lS)})},pS.prototype.Ze=function(t){var e=new aT(this.clientId,this.allowTabSynchronization,Date.now());return dS(t).put(aT.key,e)},pS.yt=function(){return AT.yt()},pS.prototype.Xe=function(t){var e=this,n=dS(t);return n.get(aT.key).next(function(t){return e.tn(t)?(ab("IndexedDbPersistence","Releasing primary lease."),n.delete(aT.key)):kT.resolve()})},pS.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(sb("Detected an update time that is in the future: "+t+" > "+n),1))},pS.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},pS.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},pS.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},pS.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},pS.prototype.cn=function(t){try{var e=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return ab("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return sb("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},pS.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){sb("Failed to set zombie client id.",t)}},pS.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},pS.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},pS);function pS(t,e,n,r,i,o,a,s,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Se=i,this.window=o,this.document=a,this.De=u,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!pS.yt())throw new nb(eb.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HE(this,r),this.Le=e+"main",this.R=new JT(s),this.Be=new AT(this.Le,11,new uS(this.R)),this.qe=new xE(this.referenceDelegate,this.R),this.Ut=new yE,this.Ue=(e=this.R,s=this.Ut,new ZE(e,s)),this.Qe=new lE,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===c&&sb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function dS(t){return zT(t,aT.store)}function vS(t){return zT(t,_T.store)}function gS(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function yS(t,e){this.progress=t,this.wn=e}var mS=(SS.prototype.mn=function(e,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(t){return r.yn(e,n,t)})},SS.prototype.yn=function(t,e,r){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,n=r;e<n.length;e++)n[e].applyToLocalView(t);return t})},SS.prototype.gn=function(t,i){t.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)r[n].applyToLocalView(e)})},SS.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next(function(t){return n.En(e,t).next(function(){return t})})},SS.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},SS.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Hb.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):J_(e)?this.In(t,e,n):this.An(t,e,n);var r},SS.prototype.Tn=function(t,e){return this.mn(t,new Hb(e)).next(function(t){var e=lI;return e=t.isFoundDocument()?e.insert(t.key,t):e})},SS.prototype.In=function(n,r,i){var o=this,a=r.collectionGroup,s=lI;return this.Ut.getCollectionParents(n,a).next(function(t){return kT.forEach(t,function(t){var e,e=(e=r,t=t.child(a),new W_(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.An(n,e,i).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},SS.prototype.An=function(e,n,t){var c,h,r=this;return this.Ue.getDocumentsMatchingQuery(e,n,t).next(function(t){return c=t,r._n.getAllMutationBatchesAffectingQuery(e,n)}).next(function(t){return h=t,r.Rn(e,h,c).next(function(t){c=t;for(var e=0,n=h;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var a=o[i],s=a.key,u=c.get(s);null==u&&(u=s_.newInvalidDocument(s),c=c.insert(s,u)),Pw(a,u,r.localWriteTime),u.isFoundDocument()||(c=c.remove(s))}})}).next(function(){return c.forEach(function(t,e){iw(n,e)||(c=c.remove(t))}),c})},SS.prototype.Rn=function(t,e,n){for(var r=dI(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Fw&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},SS),bS=(ES.Pn=function(t,e){for(var n=dI(),r=dI(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}}return new ES(t,e.fromCache,n,r)},ES),_S=(TS.prototype.Vn=function(t){this.Sn=t},TS.prototype.getDocumentsMatchingQuery=function(e,r,i,o){var a=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())||i.isEqual(mb.min())?this.Dn(e,r):this.Sn.pn(e,o).next(function(t){var n=a.Cn(r,t);return(z_(r)||Q_(r))&&a.Nn(r.limitType,n,o,i)?a.Dn(e,r):(ob()<=ua.DEBUG&&ab("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rw(r)),a.Sn.getDocumentsMatchingQuery(e,r,i).next(function(e){return n.forEach(function(t){e=e.insert(t.key,t)}),e}))})},TS.prototype.Cn=function(n,t){var r=new aI(ow(n));return t.forEach(function(t,e){iw(n,e)&&(r=r.add(e))}),r},TS.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version.compareTo(r))},TS.prototype.Dn=function(t,e){return ob()<=ua.DEBUG&&ab("QueryEngine","Using full collection scan to execute query:",rw(e)),this.Sn.getDocumentsMatchingQuery(t,e,mb.min())},TS),wS=(IS.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.collect(t,n.Fn)})},IS);function IS(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Zw(db),this.kn=new $E(l_,f_),this.On=mb.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new mS(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}function TS(){}function ES(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}function SS(t,e,n){this.Ue=t,this._n=e,this.Ut=n}function CS(t,e,n,r){return new wS(t,e,n,r)}function kS(i,o){return $i(this,void 0,void 0,function(){var e,n,m,r;return Zi(this,function(t){switch(t.label){case 0:return n=(e=i)._n,m=e.Mn,[4,e.persistence.runTransaction("Handle user change","readonly",function(g){var y;return e._n.getAllMutationBatches(g).next(function(t){return y=t,n=e.persistence.getMutationQueue(o),m=new mS(e.$n,n,e.persistence.getIndexManager()),n.getAllMutationBatches(g)}).next(function(t){for(var e=[],n=[],r=dI(),i=0,o=y;i<o.length;i++){var a=o[i];e.push(a.batchId);for(var s=0,u=a.mutations;s<u.length;s++)var c=u[s],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.pn(g,r).next(function(t){return{Ln:t,removedBatchIds:e,addedBatchIds:n}})})})];case 1:return r=t.sent(),[2,(e._n=n,e.Mn=m,e.xn.Vn(e.Mn),r)]}})})}function NS(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,a,n,s,u=h.batch.keys(),c=l.$n.newChangeBuffer({trackRemovals:!0});return e=l,r=t,o=c,a=(i=h).batch,n=a.keys(),s=kT.resolve(),n.forEach(function(n){s=s.next(function(){return o.getEntry(r,n)}).next(function(t){var e=i.docVersions.get(n);lb(null!==e),t.version.compareTo(e)<0&&(a.applyToRemoteDocument(t,i),t.isValidDocument()&&o.addEntry(t,i.commitVersion))})}),s.next(function(){return e._n.removeMutationBatch(r,a)}).next(function(){return c.apply(t)}).next(function(){return l._n.performConsistencyCheck(t)}).next(function(){return l.Mn.pn(t,u)})})}function AS(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function RS(t,r){var u=t,c=r.snapshotVersion,h=u.Fn;return u.persistence.runTransaction("Apply remote event","readwrite-primary",function(a){var t=u.$n.newChangeBuffer({trackRemovals:!0});h=u.Fn;var s=[];r.targetChanges.forEach(function(t,e){var n,r,i,o=h.get(e);o&&(s.push(u.qe.removeMatchingKeys(a,t.removedDocuments,e).next(function(){return u.qe.addMatchingKeys(a,t.addedDocuments,e)})),0<(i=t.resumeToken).approximateByteSize()&&(n=o.withResumeToken(i,c).withSequenceNumber(a.currentSequenceNumber),h=h.insert(e,n),r=o,i=t,lb(0<(o=n).resumeToken.approximateByteSize()),(0===r.resumeToken.approximateByteSize()||3e8<=o.snapshotVersion.toMicroseconds()-r.snapshotVersion.toMicroseconds()||0<i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size)&&s.push(u.qe.updateTargetData(a,n))))});var e,n=uI;return r.documentUpdates.forEach(function(t,e){r.resolvedLimboDocuments.has(t)&&s.push(u.persistence.referenceDelegate.updateLimboDocument(a,t))}),s.push(PS(a,t,r.documentUpdates,c,void 0).next(function(t){n=t})),c.isEqual(mb.min())||(e=u.qe.getLastRemoteSnapshotVersion(a).next(function(t){return u.qe.setTargetsMetadata(a,a.currentSequenceNumber,c)}),s.push(e)),kT.waitFor(s).next(function(){return t.apply(a)}).next(function(){return u.Mn.En(a,n)}).next(function(){return n})}).then(function(t){return u.Fn=h,t})}function PS(t,a,e,s,u){var n=dI();return e.forEach(function(t){return n=n.add(t)}),a.getEntries(t,n).next(function(i){var o=uI;return e.forEach(function(t,e){var n=i.get(t),r=(null==u?void 0:u.get(t))||s;e.isNoDocument()&&e.version.isEqual(mb.min())?(a.removeEntry(t,r),o=o.insert(t,e)):!n.isValidDocument()||0<e.version.compareTo(n.version)||0===e.version.compareTo(n.version)&&n.hasPendingWrites?(a.addEntry(e,r),o=o.insert(t,e)):ab("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o})}function OS(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.qe.getTargetData(e,r).next(function(t){return t?(n=t,kT.resolve(n)):i.qe.allocateTargetId(e).next(function(t){return n=new XT(r,t,0,e.currentSequenceNumber),i.qe.addTargetData(e,n).next(function(){return n})})})}).then(function(t){var e=i.Fn.get(t.targetId);return(null===e||0<t.snapshotVersion.compareTo(e.snapshotVersion))&&(i.Fn=i.Fn.insert(t.targetId,t),i.kn.set(r,t.targetId)),t})}function DS(i,o,a){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:n=(e=i).Fn.get(o),r=a?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),a?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.referenceDelegate.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!UT(r=t.sent()))throw r;return ab("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Fn=e.Fn.remove(o),e.kn.delete(n.target),[2]}})})}function xS(t,o,a){var s=t,u=mb.min(),c=dI();return s.persistence.runTransaction("Execute query","readonly",function(e){return t=s,n=e,r=Z_(o),(void 0!==(t=(i=t).kn.get(r))?kT.resolve(i.Fn.get(t)):i.qe.getTargetData(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,s.qe.getMatchingKeysForTargetId(e,t.targetId).next(function(t){c=t})}).next(function(){return s.xn.getDocumentsMatchingQuery(e,o,a?u:mb.min(),a?c:dI())}).next(function(t){return{documents:t,Bn:c}});var t,n,r,i})}function LS(t,e){var n=t,r=n.qe,t=n.Fn.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function MS(t){var a=t;return a.persistence.runTransaction("Get new document changes","readonly",function(t){return e=a.$n,n=t,t=a.On,r=e,i=uI,o=rE(t),t=aS(n),n=IDBKeyRange.lowerBound(o,!0),t.Ot({index:dT.readTimeIndex,range:n},function(t,e){var n=eE(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:iE(o)}});var e,n,r,i,o}).then(function(t){var e=t.wn,t=t.readTime;return a.On=t,e})}function FS(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=aS(t),r=mb.min(),t.Ot({index:dT.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=iE(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.On=t})]})})}var US,jS,qS=(sC.prototype.getBundleMetadata=function(t,e){return kT.resolve(this.Kn.get(e))},sC.prototype.saveBundleMetadata=function(t,e){return this.Kn.set(e.id,{id:e.id,version:e.version,createTime:xI(e.createTime)}),kT.resolve()},sC.prototype.getNamedQuery=function(t,e){return kT.resolve(this.jn.get(e))},sC.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(e=e).name,query:hE(e.bundledQuery),readTime:xI(e.readTime)}),kT.resolve()},sC),VS=(aC.prototype.isEmpty=function(){return this.Wn.isEmpty()},aC.prototype.addReference=function(t,e){e=new BS(t,e);this.Wn=this.Wn.add(e),this.zn=this.zn.add(e)},aC.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},aC.prototype.removeReference=function(t,e){this.Yn(new BS(t,e))},aC.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},aC.prototype.Zn=function(t){var e=this,n=new Hb(new Cb([])),r=new BS(n,t),t=new BS(n,t+1),i=[];return this.zn.forEachInRange([r,t],function(t){e.Yn(t),i.push(t.key)}),i},aC.prototype.ts=function(){var e=this;this.Wn.forEach(function(t){return e.Yn(t)})},aC.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},aC.prototype.es=function(t){var e=new Hb(new Cb([])),n=new BS(e,t),t=new BS(e,t+1),r=dI();return this.zn.forEachInRange([n,t],function(t){r=r.add(t.key)}),r},aC.prototype.containsKey=function(t){var e=new BS(t,0),e=this.Wn.firstAfterOrEqual(e);return null!==e&&t.isEqual(e.key)},aC),BS=(oC.Gn=function(t,e){return Hb.comparator(t.key,e.key)||db(t.ns,e.ns)},oC.Hn=function(t,e){return db(t.ns,e.ns)||Hb.comparator(t.key,e.key)},oC),KS=(iC.prototype.checkEmpty=function(t){return kT.resolve(0===this._n.length)},iC.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,0<this._n.length&&this._n[this._n.length-1];n=new QT(i,e,n,r);this._n.push(n);for(var o=0,a=r;o<a.length;o++){var s=a[o];this.rs=this.rs.add(new BS(s.key,i)),this.Ut.addToCollectionParentIndex(t,s.key.path.popLast())}return kT.resolve(n)},iC.prototype.lookupMutationBatch=function(t,e){return kT.resolve(this.os(e))},iC.prototype.getNextMutationBatchAfterBatchId=function(t,e){e+=1,e=this.cs(e),e=e<0?0:e;return kT.resolve(this._n.length>e?this._n[e]:null)},iC.prototype.getHighestUnacknowledgedBatchId=function(){return kT.resolve(0===this._n.length?-1:this.ss-1)},iC.prototype.getAllMutationBatches=function(t){return kT.resolve(this._n.slice())},iC.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new BS(e,0),e=new BS(e,Number.POSITIVE_INFINITY),i=[];return this.rs.forEachInRange([r,e],function(t){t=n.os(t.ns);i.push(t)}),kT.resolve(i)},iC.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new aI(db);return e.forEach(function(t){var e=new BS(t,0),t=new BS(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,t],function(t){r=r.add(t.ns)})}),kT.resolve(this.us(r))},iC.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,e=n;Hb.isDocumentKey(e)||(e=e.child(""));var e=new BS(new Hb(e),0),i=new aI(db);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(i=i.add(t.ns)),!0)},e),kT.resolve(this.us(i))},iC.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){t=e.os(t);null!==t&&n.push(t)}),n},iC.prototype.removeMutationBatch=function(n,r){var i=this;lb(0===this.hs(r.batchId,"removed")),this._n.shift();var o=this.rs;return kT.forEach(r.mutations,function(t){var e=new BS(t.key,r.batchId);return o=o.delete(e),i.referenceDelegate.markPotentiallyOrphaned(n,t.key)}).next(function(){i.rs=o})},iC.prototype.Gt=function(t){},iC.prototype.containsKey=function(t,e){var n=new BS(e,0),n=this.rs.firstAfterOrEqual(n);return kT.resolve(e.isEqual(n&&n.key))},iC.prototype.performConsistencyCheck=function(t){return this._n.length,kT.resolve()},iC.prototype.hs=function(t,e){return this.cs(t)},iC.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},iC.prototype.os=function(t){t=this.cs(t);return t<0||t>=this._n.length?null:this._n[t]},iC),WS=(rC.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:i,readTime:n}),this.size+=i-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},rC.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},rC.prototype.getEntry=function(t,e){var n=this.docs.get(e);return kT.resolve(n?n.document.clone():s_.newInvalidDocument(e))},rC.prototype.getEntries=function(t,e){var n=this,r=uI;return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():s_.newInvalidDocument(t))}),kT.resolve(r)},rC.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=uI,i=new Hb(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,a=u.document,u=u.readTime;if(!e.path.isPrefixOf(s.path))break;u.compareTo(n)<=0||iw(e,a)&&(r=r.insert(a.key,a.clone()))}return kT.resolve(r)},rC.prototype.fs=function(t,e){return kT.forEach(this.docs,function(t){return e(t)})},rC.prototype.newChangeBuffer=function(t){return new HS(this)},rC.prototype.getSize=function(t){return kT.resolve(this.size)},rC),HS=(Xi(nC,jS=G),nC.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(t,e){e.document.isValidDocument()?i.push(r.Ie.addEntry(n,e.document,r.getReadTime(t))):r.Ie.removeEntry(t)}),kT.waitFor(i)},nC.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},nC.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},nC),GS=(eC.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(t,e){return n(e)}),kT.resolve()},eC.prototype.getLastRemoteSnapshotVersion=function(t){return kT.resolve(this.lastRemoteSnapshotVersion)},eC.prototype.getHighestSequenceNumber=function(t){return kT.resolve(this.ws)},eC.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),kT.resolve(this.highestTargetId)},eC.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),kT.resolve()},eC.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new DE(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},eC.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,kT.resolve()},eC.prototype.updateTargetData=function(t,e){return this.te(e),kT.resolve()},eC.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),--this.targetCount,kT.resolve()},eC.prototype.removeTargets=function(n,r,i){var o=this,a=0,s=[];return this.ds.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.ds.delete(t),s.push(o.removeMatchingKeysForTargetId(n,e.targetId)),a++)}),kT.waitFor(s).next(function(){return a})},eC.prototype.getTargetCount=function(t){return kT.resolve(this.targetCount)},eC.prototype.getTargetData=function(t,e){e=this.ds.get(e)||null;return kT.resolve(e)},eC.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),kT.resolve()},eC.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),kT.waitFor(i)},eC.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),kT.resolve()},eC.prototype.getMatchingKeysForTargetId=function(t,e){e=this._s.es(e);return kT.resolve(e)},eC.prototype.containsKey=function(t,e){return kT.resolve(this._s.containsKey(e))},eC),zS=(tC.prototype.start=function(){return Promise.resolve()},tC.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(tC.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),tC.prototype.setDatabaseDeletedListener=function(){},tC.prototype.setNetworkEnabled=function(){},tC.prototype.getIndexManager=function(){return this.Ut},tC.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new KS(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},tC.prototype.getTargetCache=function(){return this.qe},tC.prototype.getRemoteDocumentCache=function(){return this.Ue},tC.prototype.getBundleCache=function(){return this.Qe},tC.prototype.runTransaction=function(t,e,n){var r=this;ab("MemoryPersistence","Starting transaction:",t);var i=new QS(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},tC.prototype.Is=function(e,n){return kT.or(Object.values(this.gs).map(function(t){return function(){return t.containsKey(e,n)}}))},tC),QS=(Xi(ZS,US=Sn),ZS),YS=($S.bs=function(t){return new $S(t)},Object.defineProperty($S.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw hb()},enumerable:!1,configurable:!0}),$S.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),kT.resolve()},$S.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),kT.resolve()},$S.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),kT.resolve()},$S.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},$S.prototype.Es=function(){this.Rs=new Set},$S.prototype.Ts=function(n){var r=this,i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return kT.forEach(this.vs,function(t){var e=Hb.fromPath(t);return r.Ps(n,e).next(function(t){t||i.removeEntry(e)})}).next(function(){return r.Rs=null,i.apply(n)})},$S.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},$S.prototype.ps=function(t){return 0},$S.prototype.Ps=function(t,e){var n=this;return kT.or([function(){return kT.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},$S),XS=(JS.prototype.isAuthenticated=function(){return null!=this.uid},JS.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},JS.prototype.isEqual=function(t){return t.uid===this.uid},JS);function JS(t){this.uid=t}function $S(t){this.persistence=t,this.As=new VS,this.Rs=null}function ZS(t){var e=this;return(e=US.call(this)||this).currentSequenceNumber=t,e}function tC(t,e){var n=this;this.gs={},this.Ne=new $m(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new GS(this),this.Ut=new vE,this.Ue=(t=this.Ut,new WS(t,function(t){return n.referenceDelegate.ps(t)})),this.R=new JT(e),this.Qe=new qS(this.R)}function eC(t){this.persistence=t,this.ds=new $E(l_,f_),this.lastRemoteSnapshotVersion=mb.min(),this.highestTargetId=0,this.ws=0,this._s=new VS,this.targetCount=0,this.ys=DE.Jt()}function nC(t){var e=this;return(e=jS.call(this)||this).Ie=t,e}function rC(t,e){this.Ut=t,this.ls=e,this.docs=new Zw(Hb.comparator),this.size=0}function iC(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new aI(BS.Gn)}function oC(t,e){this.key=t,this.ns=e}function aC(){this.Wn=new aI(BS.Gn),this.zn=new aI(BS.Hn)}function sC(t){this.R=t,this.Kn=new Map,this.jn=new Map}function uC(t,e){return"firestore_clients_"+t+"_"+e}function cC(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(n+="_"+e.uid),n}function hC(t,e){return"firestore_targets_"+t+"_"+e}XS.UNAUTHENTICATED=new XS(null),XS.GOOGLE_CREDENTIALS=new XS("google-credentials-uid"),XS.FIRST_PARTY=new XS("first-party-uid");var lC,fC=(LC.Vs=function(t,e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new nb(i.error.code,i.error.message)),o?new LC(t,e,i.state,r):(sb("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},LC.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},LC),pC=(xC.Vs=function(t,e){var n,r=JSON.parse(e),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new nb(r.error.code,r.error.message)),i?new xC(t,r.state,n):(sb("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},xC.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},xC),dC=(DC.Vs=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=vI,o=0;r&&o<n.activeTargetIds.length;++o)r=Wb(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new DC(t,i):(sb("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},DC),vC=(OC.Vs=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new OC(e.clientId,e.onlineState):(sb("SharedClientState","Failed to parse online state: "+t),null)},OC),gC=(PC.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},PC.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},PC.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},PC),yC=(RC.yt=function(t){return!(!t||!t.localStorage)},RC.prototype.start=function(){return $i(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,h,l=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.fn()];case 1:for(a=t.sent(),e=0,n=a;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(uC(this.persistenceKey,r)))&&(o=dC.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)h=c[u],this.Fs(h);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},RC.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},RC.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},RC.prototype.isActiveQueryTarget=function(n){var r=!1;return this.ks.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},RC.prototype.addPendingMutation=function(t){this.zs(t,"pending")},RC.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},RC.prototype.addLocalQueryTarget=function(t){var e,n="not-current";return this.isActiveQueryTarget(t)&&(!(e=this.storage.getItem(hC(this.persistenceKey,t)))||(e=pC.Vs(t,e))&&(n=e.state)),this.Js.Ds(t),this.Ks(),n},RC.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},RC.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},RC.prototype.clearQueryState=function(t){this.removeItem(hC(this.persistenceKey,t))},RC.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},RC.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},RC.prototype.setOnlineState=function(t){this.Xs(t)},RC.prototype.notifyBundleLoaded=function(){this.Zs()},RC.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},RC.prototype.getItem=function(t){var e=this.storage.getItem(t);return ab("SharedClientState","READ",t,e),e},RC.prototype.setItem=function(t,e){ab("SharedClientState","SET",t,e),this.storage.setItem(t,e)},RC.prototype.removeItem=function(t){ab("SharedClientState","REMOVE",t),this.storage.removeItem(t)},RC.prototype.Fs=function(t){var e=this,o=t;o.storageArea===this.storage&&(ab("SharedClientState","EVENT",o.key,o.newValue),o.key!==this.$s?this.Se.enqueueRetryable(function(){return $i(e,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){if(this.started){if(null!==o.key)if(this.Ls.test(o.key)){if(null==o.newValue)return e=this.ti(o.key),[2,this.ei(e,null)];if(e=this.ni(o.key,o.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(o.key)){if(null!==o.newValue&&(n=this.si(o.key,o.newValue)))return[2,this.ii(n)]}else if(this.qs.test(o.key)){if(null!==o.newValue&&(r=this.ri(o.key,o.newValue)))return[2,this.oi(r)]}else if(o.key===this.Us){if(null!==o.newValue&&(i=this.js(o.newValue)))return[2,this.Ws(i)]}else if(o.key===this.Ms)(i=function(t){var e=$m.o;if(null!=t)try{var n=JSON.parse(t);lb("number"==typeof n),e=n}catch(t){sb("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==$m.o&&this.sequenceNumberHandler(i);else if(o.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(o);return[2]})})}):sb("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(RC.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),RC.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},RC.prototype.zs=function(t,e,n){n=new fC(this.currentUser,t,e,n),t=cC(this.persistenceKey,this.currentUser,t);this.setItem(t,n.Ss())},RC.prototype.Hs=function(t){t=cC(this.persistenceKey,this.currentUser,t);this.removeItem(t)},RC.prototype.Xs=function(t){t={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(t))},RC.prototype.Ys=function(t,e,n){var r=hC(this.persistenceKey,t),n=new pC(t,e,n);this.setItem(r,n.Ss())},RC.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},RC.prototype.ti=function(t){t=this.Ls.exec(t);return t?t[1]:null},RC.prototype.ni=function(t,e){t=this.ti(t);return dC.Vs(t,e)},RC.prototype.si=function(t,e){var n=this.Bs.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return fC.Vs(new XS(n),t,e)},RC.prototype.ri=function(t,e){t=this.qs.exec(t),t=Number(t[1]);return pC.Vs(t,e)},RC.prototype.js=function(t){return vC.Vs(t)},RC.prototype.ii=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(ab("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},RC.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},RC.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach(function(t){i.has(t)||a.push(t)}),i.forEach(function(t){o.has(t)||s.push(t)}),this.syncEngine.hi(a,s).then(function(){n.ks=r})},RC.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},RC.prototype.Gs=function(t){var n=vI;return t.forEach(function(t,e){n=n.unionWith(e.activeTargetIds)}),n},RC),mC=(AC.prototype.addPendingMutation=function(t){},AC.prototype.updateMutationState=function(t,e,n){},AC.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},AC.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},AC.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},AC.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},AC.prototype.clearQueryState=function(t){delete this.fi[t]},AC.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},AC.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},AC.prototype.start=function(){return this.li=new gC,Promise.resolve()},AC.prototype.handleUserChange=function(t,e,n){},AC.prototype.setOnlineState=function(t){},AC.prototype.shutdown=function(){},AC.prototype.writeSequenceNumber=function(t){},AC.prototype.notifyBundleLoaded=function(){},AC),bC=(NC.prototype.di=function(t){},NC.prototype.shutdown=function(){},NC),_C=(kC.prototype.di=function(t){this.gi.push(t)},kC.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},kC.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},kC.prototype._i=function(){ab("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},kC.prototype.yi=function(){ab("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},kC.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},kC),wC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},IC=(CC.prototype.Ii=function(t){this.Ai=t},CC.prototype.Ri=function(t){this.bi=t},CC.prototype.onMessage=function(t){this.vi=t},CC.prototype.close=function(){this.Ti()},CC.prototype.send=function(t){this.Ei(t)},CC.prototype.Pi=function(){this.Ai()},CC.prototype.Vi=function(t){this.bi(t)},CC.prototype.Si=function(t){this.vi(t)},CC),TC=(SC.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);ab("RestConnection","Sending: ",i,n);t={};return this.Fi(t,r),this.ki(e,i,t,n).then(function(t){return ab("RestConnection","Received: ",t),t},function(t){throw ub("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},SC.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},SC.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},SC.prototype.xi=function(t,e){t=wC[t];return this.Di+"/v1/"+e+":"+t},Xi(EC,lC=SC),EC.prototype.ki=function(o,e,a,s){return new Promise(function(n,r){var i=new Jm;i.listenOnce(Gm.COMPLETE,function(){try{switch(i.getLastErrorCode()){case Hm.NO_ERROR:var t=i.getResponseJson();ab("Connection","XHR received:",JSON.stringify(t)),n(t);break;case Hm.TIMEOUT:ab("Connection",'RPC "'+o+'" timed out'),r(new nb(eb.DEADLINE_EXCEEDED,"Request time out"));break;case Hm.HTTP_ERROR:var e=i.getStatus();ab("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace(/_/g,"-"),e=0<=Object.values(eb).indexOf(e)?e:eb.UNKNOWN,r(new nb(e,t.message))):r(new nb(eb.UNKNOWN,"Server responded with status "+i.getStatus())):r(new nb(eb.UNAVAILABLE,"Connection failed."));break;default:hb()}}finally{ab("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(s);i.send(e,"POST",t,a,15)})},EC.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new jm,i=Wm(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(t.initMessageHeaders,e),go()||mo()||0<=vo().indexOf("Electron/")||(0<=(e=vo()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))||0<=vo().indexOf("MSAppHost/")||yo()||(t.httpHeadersOverwriteParam="$httpHeaders");n=n.join("");ab("Connection","Creating WebChannel: "+n,t);var o=r.createWebChannel(n,t),a=!1,s=!1,u=new IC({Ei:function(t){s?ab("Connection","Not sending because WebChannel is closed:",t):(a||(ab("Connection","Opening WebChannel transport."),o.open(),a=!0),ab("Connection","WebChannel sending:",t),o.send(t))},Ti:function(){return o.close()}}),t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(o,Xm.EventType.OPEN,function(){s||ab("Connection","WebChannel transport opened.")}),t(o,Xm.EventType.CLOSE,function(){s||(s=!0,ab("Connection","WebChannel transport closed"),u.Vi())}),t(o,Xm.EventType.ERROR,function(t){s||(s=!0,ub("Connection","WebChannel transport errored:",t),u.Vi(new nb(eb.UNAVAILABLE,"The operation could not be completed")))}),t(o,Xm.EventType.MESSAGE,function(t){var e,n,r,i;s||(lb(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(ab("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=Ww[r];if(void 0!==t)return $w(t)}(),i=n.message,void 0===t&&(t=eb.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,u.Vi(new nb(t,i)),o.close()):(ab("Connection","WebChannel received:",e),u.Si(e)))}),t(i,zm.STAT_EVENT,function(t){t.stat===Qm?ab("Connection","Detected buffering proxy"):t.stat===Ym&&ab("Connection","Detected no buffering proxy")}),setTimeout(function(){u.Pi()},0),u},EC);function EC(t){var e=this;return(e=lC.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.autoDetectLongPolling=t.autoDetectLongPolling,e}function SC(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}function CC(t){this.Ei=t.Ei,this.Ti=t.Ti}function kC(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}function NC(){}function AC(){this.li=new gC,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}function RC(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Zw(db),this.started=!1,this.Os=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=uC(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new gC),this.Ls=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Qs="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}function PC(){this.activeTargetIds=vI}function OC(t,e){this.clientId=t,this.onlineState=e}function DC(t,e){this.clientId=t,this.activeTargetIds=e}function xC(t,e,n){this.targetId=t,this.state=e,this.error=n}function LC(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function MC(){return"undefined"!=typeof window?window:null}function FC(){return"undefined"!=typeof document?document:null}function UC(t){return new PI(t,!0)}function jC(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return $i(o,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return uk(this)?(ab("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=n).$r.add(4),[4,ek(e)];case 1:return t.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,tk(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new zC(n,r)}var qC,VC,BC,KC=(ZC.prototype.reset=function(){this.qi=0},ZC.prototype.Ki=function(){this.qi=this.Bi},ZC.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);0<i&&ab("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},ZC.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},ZC.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},ZC.prototype.Wi=function(){return(Math.random()-.5)*this.qi},ZC),G=($C.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},$C.prototype.er=function(){return 2===this.state},$C.prototype.start=function(){3!==this.state?this.auth():this.nr()},$C.prototype.stop=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},$C.prototype.sr=function(){this.state=0,this.Zi.reset()},$C.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},$C.prototype.cr=function(t){this.ur(),this.stream.send(t)},$C.prototype.rr=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},$C.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},$C.prototype.close=function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():n&&n.code===eb.RESOURCE_EXHAUSTED?(sb(n.toString()),sb("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):n&&n.code===eb.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(n)];case 1:return t.sent(),[2]}})})},$C.prototype.ar=function(){},$C.prototype.auth=function(){var n=this;this.state=1;var t=this.hr(this.Yi),e=this.Yi;this.Ji.getToken().then(function(t){n.Yi===e&&n.lr(t)},function(e){t(function(){var t=new nb(eb.UNKNOWN,"Fetching auth token failed: "+e.message);return n.dr(t)})})},$C.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},$C.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return $i(t,void 0,void 0,function(){return Zi(this,function(t){return this.state=0,this.start(),[2]})})})},$C.prototype.dr=function(t){return ab("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},$C.prototype.hr=function(e){var n=this;return function(t){n.Se.enqueueAndForget(function(){return n.Yi===e?t():(ab("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},$C),WC=(Xi(JC,BC=G),JC.prototype.wr=function(t){return this.Hi.$i("Listen",t)},JC.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:hb(),r=e.targetChange.targetIds||[],i=(a=e.targetChange.resumeToken,t.I?(lb(void 0===a||"string"==typeof a),Rb.fromBase64String(a||"")):(lb(void 0===a||a instanceof Uint8Array),Rb.fromUint8Array(a||new Uint8Array))),o=(s=e.targetChange.cause)&&(u=void 0===(c=s).code?eb.UNKNOWN:$w(c.code),new nb(u,c.message||"")),a=new _I(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime;var r=UI(t,n.document.name),i=xI(n.document.updateTime),s=new o_({mapValue:{fields:n.document.fields}}),u=(o=s_.newFoundDocument(r,i,s),n.targetIds||[]),c=n.removedTargetIds||[];a=new mI(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=UI(t,n.document),i=n.readTime?xI(n.readTime):mb.min(),s=s_.newNoDocument(r,i),o=n.removedTargetIds||[],a=new mI([],o,s.key,s);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=UI(t,n.document),i=n.removedTargetIds||[],a=new mI([],i,r,null);else{if(!("filter"in e))return hb();e.filter;e=e.filter;e.targetId,n=e.count||0,r=new Kw(n),i=e.targetId,a=new bI(i,r)}return a}(this.R,t),t=function(t){if(!("targetChange"in t))return mb.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?xI(t.readTime):mb.min()}(t);return this.listener._r(e,t)},JC.prototype.mr=function(t){var e,n,r,i={};i.database=VI(this.R),i.addTarget=(e=this.R,(r=p_(r=(n=t).target)?{documents:zI(e,r)}:{query:QI(e,r)}).targetId=n.targetId,0<n.resumeToken.approximateByteSize()?r.resumeToken=DI(e,n.resumeToken):0<n.snapshotVersion.compareTo(mb.min())&&(r.readTime=OI(e,n.snapshotVersion.toTimestamp())),r);var o,t=(this.R,o=t,null==(t=function(){switch(o.purpose){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return hb()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.cr(i)},JC.prototype.yr=function(t){var e={};e.database=VI(this.R),e.removeTarget=t,this.cr(e)},JC),HC=(Xi(XC,VC=G),Object.defineProperty(XC.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),XC.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,VC.prototype.start.call(this)},XC.prototype.ar=function(){this.gr&&this.Er([])},XC.prototype.wr=function(t){return this.Hi.$i("Write",t)},XC.prototype.onMessage=function(t){if(lb(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(lb(void 0!==r),n.map(function(t){return n=r,(t=(e=t).updateTime?xI(e.updateTime):xI(n)).isEqual(mb.min())&&(t=xI(n)),new Cw(t,e.transformResults||[]);var e,n})):[]),n=xI(t.commitTime);return this.listener.Tr(n,e)}var n,r;return lb(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},XC.prototype.Ar=function(){var t={};t.database=VI(this.R),this.cr(t)},XC.prototype.Er=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return HI(e.R,t)})};this.cr(t)},XC),GC=(Xi(YC,qC=function(){}),YC.prototype.br=function(){if(this.Rr)throw new nb(eb.FAILED_PRECONDITION,"The client has already been terminated.")},YC.prototype.Ni=function(e,n,r){var i=this;return this.br(),this.credentials.getToken().then(function(t){return i.Hi.Ni(e,n,r,t)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===eb.UNAUTHENTICATED&&i.credentials.invalidateToken(),t):new nb(eb.UNKNOWN,t.toString())})},YC.prototype.Oi=function(e,n,r){var i=this;return this.br(),this.credentials.getToken().then(function(t){return i.Hi.Oi(e,n,r,t)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===eb.UNAUTHENTICATED&&i.credentials.invalidateToken(),t):new nb(eb.UNKNOWN,t.toString())})},YC.prototype.terminate=function(){this.Rr=!0},YC),zC=(QC.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},QC.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,1<=this.vr&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},QC.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},QC.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},QC.prototype.Cr=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(sb(t),this.Vr=!1):ab("OnlineStateTracker",t)},QC.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},QC);function QC(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}function YC(t,e,n){var r=this;return(r=qC.call(this)||this).credentials=t,r.Hi=e,r.R=n,r.Rr=!1,r}function XC(t,e,n,r,i){var o=this;return(o=VC.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).R=r,o.gr=!1,o}function JC(t,e,n,r,i){var o=this;return(o=BC.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).R=r,o}function $C(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new KC(t,e)}function ZC(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}function tk(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:if(!uk(r))return[3,4];e=0,n=r.Mr,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ek(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:e=0,n=r.Mr,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function nk(t,e){t.Or.has(e.targetId)||(t.Or.set(e.targetId,e),sk(t)?ak(t):yk(t).er()&&ik(t,e))}function rk(t,e){var n=t,t=yk(n);n.Or.delete(e),t.er()&&ok(n,e),0===n.Or.size&&(t.er()?t.ir():uk(n)&&n.Br.set("Unknown"))}function ik(t,e){t.qr.U(e.targetId),yk(t).mr(e)}function ok(t,e){t.qr.U(e),yk(t).yr(e)}function ak(e){e.qr=new II({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.Or.get(t)||null}}),yk(e).start(),e.Br.Sr()}function sk(t){return uk(t)&&!yk(t).tr()&&0<t.Or.size}function uk(t){return 0===t.$r.size}function ck(t){t.qr=void 0}function hk(a,s,u){return $i(this,void 0,void 0,function(){var n,o;return Zi(this,function(t){switch(t.label){case 0:if(a.Br.set("Online"),!(s instanceof _I&&2===s.state&&s.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,a){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:e=a.cause,n=0,r=a.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.Or.has(i)?[4,o.remoteSyncer.rejectListen(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.Or.delete(i),o.qr.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(a,s)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),ab("RemoteStore","Failed to remove targets %s: %s ",s.targetIds.join(","),n),[4,lk(a,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(s instanceof mI?a.qr.X(s):s instanceof bI?a.qr.rt(s):a.qr.et(s),u.isEqual(mb.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,AS(a.localStore)];case 8:return o=t.sent(),0<=u.compareTo(o)?[4,(i=u,(e=(r=a).qr.ut(i)).targetChanges.forEach(function(t,e){var n;0<t.resumeToken.approximateByteSize()&&((n=r.Or.get(e))&&r.Or.set(e,n.withResumeToken(t.resumeToken,i)))}),e.targetMismatches.forEach(function(t){var e=r.Or.get(t);e&&(r.Or.set(t,e.withResumeToken(Rb.EMPTY_BYTE_STRING,e.snapshotVersion)),ok(r,t),e=new XT(e.target,t,1,e.sequenceNumber),ik(r,e))}),r.remoteSyncer.applyRemoteEvent(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return ab("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,lk(a,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function lk(n,r,i){return $i(this,void 0,void 0,function(){var e=this;return Zi(this,function(t){switch(t.label){case 0:if(!UT(r))throw r;return n.$r.add(1),[4,ek(n)];case 1:return t.sent(),n.Br.set("Offline"),i=i||function(){return AS(n.localStore)},n.asyncQueue.enqueueRetryable(function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return ab("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.$r.delete(1),[4,tk(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function fk(e,n){return n().catch(function(t){return lk(e,t,n)})}function pk(u){return $i(this,void 0,void 0,function(){var i,o,a,s;return Zi(this,function(t){switch(t.label){case 0:o=mk(i=u),a=0<i.kr.length?i.kr[i.kr.length-1].batchId:-1,t.label=1;case 1:if(!(uk(i)&&i.kr.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.localStore,n=a,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r._n.getNextMutationBatchAfterBatchId(t,n)}))];case 3:return null===(s=t.sent())?(0===i.kr.length&&o.ir(),[3,7]):(a=s.batchId,function(t,e){t.kr.push(e);t=mk(t);t.er()&&t.pr&&t.Er(e.mutations)}(i,s),[3,6]);case 4:return s=t.sent(),[4,lk(i,s)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return dk(i)&&vk(i),[2]}var e,n,r})})}function dk(t){return uk(t)&&!mk(t).tr()&&0<t.kr.length}function vk(t){mk(t).start()}function gk(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=n,r?(e.$r.delete(2),[4,tk(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.$r.add(2),[4,ek(e)]);case 3:t.sent(),e.Br.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function yk(n){var t,e,r,i=this;return n.Ur||(n.Ur=(t=n.datastore,e=n.asyncQueue,r={Ii:function(n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return n.Or.forEach(function(t,e){ik(n,t)}),[2]})})}.bind(null,n),Ri:function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return ck(e),sk(e)?(e.Br.Nr(n),ak(e)):e.Br.set("Unknown"),[2]})})}.bind(null,n),_r:hk.bind(null,n)},t.br(),new WC(e,t.Hi,t.credentials,t.R,r)),n.Mr.push(function(e){return $i(i,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e?(n.Ur.sr(),sk(n)?ak(n):n.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Ur.stop()];case 2:t.sent(),ck(n),t.label=3;case 3:return[2]}})})})),n.Ur}function mk(n){var t,e,r,i=this;return n.Qr||(n.Qr=(t=n.datastore,e=n.asyncQueue,r={Ii:function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return mk(e).Ar(),[2]})})}.bind(null,n),Ri:function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return n&&mk(e).pr?[4,function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return Jw(n=i.code)&&n!==eb.ABORTED?(e=r.kr.shift(),mk(r).sr(),[4,fk(r,function(){return r.remoteSyncer.rejectFailedWrite(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,pk(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return dk(e)&&vk(e),[2]}})})}.bind(null,n),Ir:function(o){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){for(e=mk(o),n=0,r=o.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]})})}.bind(null,n),Tr:function(r,i,o){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=r.kr.shift(),n=YT.from(e,i,o),[4,fk(r,function(){return r.remoteSyncer.applySuccessfulWrite(n)})];case 1:return t.sent(),[4,pk(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.br(),new HC(e,t.Hi,t.credentials,t.R,r)),n.Mr.push(function(e){return $i(i,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e?(n.Qr.sr(),[4,pk(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Qr.stop()];case 3:t.sent(),0<n.kr.length&&(ab("RemoteStore","Stopping write stream with "+n.kr.length+" pending writes"),n.kr=[]),t.label=4;case 4:return[2]}})})})),n.Qr}var bk=(_k.createAndSchedule=function(t,e,n,r,i){i=new _k(t,e,Date.now()+n,r,i);return i.start(n),i},_k.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},_k.prototype.skipDelay=function(){return this.handleDelayElapsed()},_k.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nb(eb.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},_k.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},_k.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},_k);function _k(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new CT,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}function wk(t,e){if(sb("AsyncQueue",e+": "+t),UT(t))return new nb(eb.UNAVAILABLE,e+": "+t);throw t}function Ik(){this.queries=new $E(nw,ew),this.onlineState="Unknown",this.Gr=new Set}var Tk=(Ak.emptySet=function(t){return new Ak(t.comparator)},Ak.prototype.has=function(t){return null!=this.keyedMap.get(t)},Ak.prototype.get=function(t){return this.keyedMap.get(t)},Ak.prototype.first=function(){return this.sortedSet.minKey()},Ak.prototype.last=function(){return this.sortedSet.maxKey()},Ak.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},Ak.prototype.indexOf=function(t){t=this.keyedMap.get(t);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(Ak.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),Ak.prototype.forEach=function(n){this.sortedSet.inorderTraversal(function(t,e){return n(t),!1})},Ak.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},Ak.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},Ak.prototype.isEqual=function(t){if(!(t instanceof Ak))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},Ak.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Ak.prototype.copy=function(t,e){var n=new Ak;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},Ak),Ek=(Nk.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);!n||0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):hb()},Nk.prototype.jr=function(){var n=[];return this.Kr.inorderTraversal(function(t,e){n.push(e)}),n},Nk),Sk=(kk.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new kk(t,e,Tk.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(kk.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),kk.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ew(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},kk),Ck=function(){this.Wr=void 0,this.listeners=[]};function kk(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}function Nk(){this.Kr=new Zw(Hb.comparator)}function Ak(n){this.comparator=n?function(t,e){return n(t,e)||Hb.comparator(t.key,e.key)}:function(t,e){return Hb.comparator(t.key,e.key)},this.keyedMap=lI,this.sortedSet=new Zw(this.comparator)}function Rk(a,s){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:if(e=a,n=s.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new Ck),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.onListen(n)];case 2:return o.Wr=t.sent(),[3,4];case 3:return o=t.sent(),o=wk(o,"Initialization of query '"+rw(s.query)+"' failed"),[2,void s.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(s),s.zr(e.onlineState),i.Wr&&s.Hr(i.Wr)&&Ok(e),[2]}})})}function Pk(a,s){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){return e=a,n=s.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(s))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.onUnlisten(n))]:[2]})})}function Ok(t){t.Gr.forEach(function(t){t.next()})}var Dk=(qk.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Sk(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},qk.prototype.onError=function(t){this.Jr.error(t)},qk.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},qk.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},qk.prototype.Zr=function(t){if(0<t.docChanges.length)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},qk.prototype.no=function(t){t=Sk.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},qk),xk=(jk.prototype.io=function(){return"metadata"in this.payload},jk),Lk=(Uk.prototype.qn=function(t){return UI(this.R,t)},Uk.prototype.Un=function(t){return t.metadata.exists?WI(this.R,t.document,!1):s_.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},Uk.prototype.Qn=xI,Uk),Mk=(Fk.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},Fk.prototype.co=function(t){for(var e=new Map,n=new Lk(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||dI()).add(a);e.set(c,h)}}return e},Fk.prototype.complete=function(){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,function(l,f,p,d){return $i(this,void 0,void 0,function(){var n,r,i,o,e,a,s,u,c,h;return Zi(this,function(t){switch(t.label){case 0:for(n=l,r=dI(),i=uI,o=fI,e=0,a=p;e<a.length;e++)s=a[e],u=f.qn(s.metadata.name),s.document&&(r=r.add(u)),i=i.insert(u,f.Un(s)),o=o.insert(u,f.Qn(s.metadata.readTime));return c=n.$n.newChangeBuffer({trackRemovals:!0}),[4,OS(n,Z_(G_(Cb.fromString("__bundle__/docs/"+d))))];case 1:return h=t.sent(),[2,n.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return PS(e,c,i,mb.min(),o).next(function(t){return c.apply(e),t}).next(function(t){return n.qe.removeMatchingKeysForTargetId(e,h.targetId).next(function(){return n.qe.addMatchingKeys(e,r,h.targetId)}).next(function(){return n.Mn.En(e,t)}).next(function(){return t})})})]}})})}(this.localStore,new Lk(this.R),this.documents,this.ro.id)];case 1:e=t.sent(),n=this.co(this.documents),r=0,i=this.queries,t.label=2;case 2:return r<i.length?(i=i[r],[4,function(e,i,o){return void 0===o&&(o=dI()),$i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,OS(e,Z_(hE(i.bundledQuery)))];case 1:return n=t.sent(),[2,(r=e).persistence.runTransaction("Save named query","readwrite",function(t){var e=xI(i.readTime);if(0<=n.snapshotVersion.compareTo(e))return r.Qe.saveNamedQuery(t,i);e=n.withResumeToken(Rb.EMPTY_BYTE_STRING,e);return r.Fn=r.Fn.insert(e.targetId,e),r.qe.updateTargetData(t,e).next(function(){return r.qe.removeMatchingKeysForTargetId(t,n.targetId)}).next(function(){return r.qe.addMatchingKeys(t,o,n.targetId)}).next(function(){return r.Qe.saveNamedQuery(t,i)})})]}})})}(this.localStore,i,n.get(i.name))]):[3,5];case 3:t.sent(),t.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new yS(Object.assign({},this.progress),e))]}})})},Fk);function Fk(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Vk(t)}function Uk(t){this.R=t}function jk(t,e){this.payload=t,this.byteLength=e}function qk(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}function Vk(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Bk=function(t){this.key=t},Kk=function(t){this.key=t},Wk=(Object.defineProperty(Yk.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),Yk.prototype._o=function(t,e){var a=this,s=e?e.mo:new Ek,u=(e||this).fo,c=(e||this).mutatedKeys,h=u,l=!1,f=z_(this.query)&&u.size===this.query.limit?u.last():null,p=Q_(this.query)&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal(function(t,e){var n=u.get(t),r=iw(a.query,e)?e:null,i=!!n&&a.mutatedKeys.has(n.key),o=!!r&&(r.hasLocalMutations||a.mutatedKeys.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data.isEqual(r.data)?i!==o&&(s.track({type:3,doc:r}),e=!0):a.yo(n,r)||(s.track({type:2,doc:r}),e=!0,(f&&0<a.lo(r,f)||p&&a.lo(r,p)<0)&&(l=!0)):!n&&r?(s.track({type:0,doc:r}),e=!0):n&&!r&&(s.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),z_(this.query)||Q_(this.query))for(;h.size>this.query.limit;){var n=z_(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);s.track({type:1,doc:n})}return{fo:h,mo:s,Nn:l,mutatedKeys:c}},Yk.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},Yk.prototype.applyChanges=function(t,e,n){var o=this,r=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var i=t.mo.jr();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.lo(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hb()}}var r,i}),this.po(n);var a=e?this.Eo():[],n=0===this.ho.size&&this.current?1:0,e=n!==this.ao;return this.ao=n,0!==i.length||e?{snapshot:new Sk(this.query,t.fo,r,i,t.mutatedKeys,0==n,e,!1),To:a}:{To:a}},Yk.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ek,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},Yk.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},Yk.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},Yk.prototype.Eo=function(){var e=this;if(!this.current)return[];var n=this.ho;this.ho=dI(),this.fo.forEach(function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))});var r=[];return n.forEach(function(t){e.ho.has(t)||r.push(new Kk(t))}),this.ho.forEach(function(t){n.has(t)||r.push(new Bk(t))}),r},Yk.prototype.Ao=function(t){this.uo=t.Bn,this.ho=dI();t=this._o(t.documents);return this.applyChanges(t,!0)},Yk.prototype.Ro=function(){return Sk.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},Yk),Hk=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Gk=function(t){this.key=t,this.bo=!1},zk=(Object.defineProperty(Qk.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),Qk);function Qk(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new $E(nw,ew),this.Vo=new Map,this.So=new Set,this.Do=new Zw(Hb.comparator),this.Co=new Map,this.No=new VS,this.xo={},this.Fo=new Map,this.ko=DE.Yt(),this.onlineState="Unknown",this.Oo=void 0}function Yk(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=dI(),this.mutatedKeys=dI(),this.lo=ow(t),this.fo=new Tk(this.lo)}function Xk(i,o,a,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return i.$o=function(t,e,n){return function(r,i,o,a){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return(e=i.view._o(o)).Nn?[4,xS(r.localStore,i.query,!1).then(function(t){t=t.documents;return i.view._o(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=a&&a.targetChanges.get(i.targetId),n=i.view.applyChanges(e,r.isPrimaryClient,n),[2,(aN(r,i.targetId,n.To),n.snapshot)]}})})}(i,t,e,n)},[4,xS(i.localStore,o,!0)];case 1:return n=t.sent(),r=new Wk(o,n.Bn),e=r._o(n.documents),n=yI.createSynthesizedTargetChangeForCurrentChange(a,s&&"Offline"!==i.onlineState),n=r.applyChanges(e,i.isPrimaryClient,n),aN(i,a,n.To),r=new Hk(o,a,r),[2,(i.Po.set(o,r),i.Vo.has(a)?i.Vo.get(a).push(o):i.Vo.set(a,[o]),n.snapshot)]}})})}function Jk(f,p,d){return $i(this,void 0,void 0,function(){var a,l;return Zi(this,function(t){switch(t.label){case 0:l=vN(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=l.localStore,s=p,c=i,h=yb.now(),o=s.reduce(function(t,e){return t.add(e.key)},dI()),c.persistence.runTransaction("Locally write mutations","readwrite",function(a){return c.Mn.pn(a,o).next(function(t){u=t;for(var e=[],n=0,r=s;n<r.length;n++){var i=r[n],o=function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),a=cw(o.transform,a||null);null!=a&&(n=null==n?o_.empty():n).set(o.field,a)}return n||null}(i,u.get(i.key));null!=o&&e.push(new Fw(i.key,o,function a(t){var s=[];return Ib(t.fields||{},function(t,e){var n=new Nb([t]);if(i_(e))if(0===(e=a(e.mapValue).fields).length)s.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];s.push(n.child(o))}else s.push(n)}),new Ab(s)}(o.toProto().mapValue),Nw.exists(!0)))}return c._n.addMutationBatch(a,h,e,s)})}).then(function(t){return t.applyToLocalDocumentSet(u),{batchId:t.batchId,changes:u}}))];case 2:return a=t.sent(),l.sharedClientState.addPendingMutation(a.batchId),e=l,n=a.batchId,r=d,i=(i=(i=e.xo[e.currentUser.toKey()])||new Zw(db)).insert(n,r),e.xo[e.currentUser.toKey()]=i,[4,uN(l,a.changes)];case 3:return t.sent(),[4,pk(l.remoteStore)];case 4:return t.sent(),[3,6];case 5:return l=t.sent(),l=wk(l,"Failed to persist write"),d.reject(l),[3,6];case 6:return[2]}var e,n,r,i,s,u,c,h,o})})}function $k(r,i){return $i(this,void 0,void 0,function(){var n,e;return Zi(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,RS(n.localStore,i)];case 2:return e=t.sent(),i.targetChanges.forEach(function(t,e){e=n.Co.get(e);e&&(lb(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),0<t.addedDocuments.size?e.bo=!0:0<t.modifiedDocuments.size?lb(e.bo):0<t.removedDocuments.size&&(lb(e.bo),e.bo=!1))}),[4,uN(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,qE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function Zk(t,n,e){var r,t=t;(t.isPrimaryClient&&0===e||!t.isPrimaryClient&&1===e)&&(r=[],t.Po.forEach(function(t,e){e=e.view.zr(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].zr(i)&&(o=!0)}),o&&Ok(t)}(t.eventManager,n),r.length&&t.vo._r(r),t.onlineState=n,t.isPrimaryClient&&t.sharedClientState.setOnlineState(n))}function tN(a,s,u){return $i(this,void 0,void 0,function(){var n,o;return Zi(this,function(t){switch(t.label){case 0:n=a,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.localStore,r=s,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i._n.lookupMutationBatch(e,r).next(function(t){return lb(null!==t),n=t.keys(),i._n.removeMutationBatch(e,t)}).next(function(){return i._n.performConsistencyCheck(e)}).next(function(){return i.Mn.pn(e,n)})}))];case 2:return o=t.sent(),rN(n,s,u),nN(n,s),n.sharedClientState.updateMutationState(s,"rejected",u),[4,uN(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,qE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function eN(o,a){return $i(this,void 0,void 0,function(){var n,r,i;return Zi(this,function(t){switch(t.label){case 0:uk((n=o).remoteStore)||ab("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})];case 2:return-1===(r=t.sent())?[2,void a.resolve()]:((i=n.Fo.get(r)||[]).push(a),n.Fo.set(r,i),[3,4]);case 3:return i=t.sent(),i=wk(i,"Initialization of waitForPendingWrites() operation failed"),a.reject(i),[3,4];case 4:return[2]}var e})})}function nN(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function rN(t,e,n){var r=t,i=r.xo[r.currentUser.toKey()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i)}function iN(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(t){e.No.containsKey(t)||oN(e,t)})}function oN(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(rk(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),sN(t))}function aN(t,e,n){for(var r,i,o,a=0,s=n;a<s.length;a++){var u=s[a];u instanceof Bk?(t.No.addReference(u.key,e),r=t,o=void 0,i=(o=(i=u).key).path.canonicalString(),r.Do.get(o)||r.So.has(i)||(ab("SyncEngine","New document in limbo: "+o),r.So.add(i),sN(r))):u instanceof Kk?(ab("SyncEngine","Document no longer in limbo: "+u.key),t.No.removeReference(u.key,e),t.No.containsKey(u.key)||oN(t,u.key)):hb()}}function sN(t){for(;0<t.So.size&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Hb(Cb.fromString(e)),e=t.ko.next();t.Co.set(e,new Gk(n)),t.Do=t.Do.insert(n,e),nk(t.remoteStore,new XT(Z_(G_(n.path)),e,2,$m.o))}}function uN(e,a,s){return $i(this,void 0,void 0,function(){var n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Po.isEmpty()?[3,3]:(n.Po.forEach(function(t,e){o.push(n.$o(e,a,s).then(function(t){t&&(n.isPrimaryClient&&n.sharedClientState.updateQueryState(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=bS.Pn(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.vo._r(r),[4,function(u,c){return $i(this,void 0,void 0,function(){var r,e,n,i,o,a,s;return Zi(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return kT.forEach(c,function(e){return kT.forEach(e.bn,function(t){return r.persistence.referenceDelegate.addReference(n,e.targetId,t)}).next(function(){return kT.forEach(e.vn,function(t){return r.persistence.referenceDelegate.removeReference(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!UT(e=t.sent()))throw e;return ab("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)s=i[n],o=s.targetId,s.fromCache||(a=r.Fn.get(o),s=a.snapshotVersion,s=a.withLastLimboFreeSnapshotVersion(s),r.Fn=r.Fn.insert(o,s));return[2]}})})}(n.localStore,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function cN(i,o){return $i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(ab("SyncEngine","User change. New user:",o.toKey()),[4,kS(n.localStore,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Fo.forEach(function(t){t.forEach(function(t){t.reject(new nb(eb.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Fo.clear(),n.sharedClientState.handleUserChange(o,r.removedBatchIds,r.addedBatchIds),[4,uN(n,r.Ln)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function hN(s,u,c,h){return $i(this,void 0,void 0,function(){var o,a;return Zi(this,function(t){switch(t.label){case 0:return[4,(e=(o=s).localStore,n=u,i=(r=e)._n,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.jt(e,n).next(function(t){return t?r.Mn.pn(e,t):kT.resolve(null)})}))];case 1:return null===(a=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,pk(o.remoteStore)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(rN(o,u,h||null),nN(o,u),o.localStore._n.Gt(u)):hb(),t.label=4;case 4:return[4,uN(o,a)];case 5:return t.sent(),[3,7];case 6:ab("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function lN(h,l){return $i(this,void 0,void 0,function(){var r,e,i,o,a,s,u,c;return Zi(this,function(t){switch(t.label){case 0:return dN(r=h),vN(r),!0!==l||!0===r.Oo?[3,3]:(e=r.sharedClientState.getAllActiveQueryTargets(),[4,fN(r,e.toArray())]);case 1:return i=t.sent(),r.Oo=!0,[4,gk(r.remoteStore,!0)];case 2:for(t.sent(),o=0,a=i;o<a.length;o++)s=a[o],nk(r.remoteStore,s);return[3,7];case 3:return!1!==l||!1===r.Oo?[3,7]:(u=[],c=Promise.resolve(),r.Vo.forEach(function(t,e){r.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then(function(){return iN(r,e),DS(r.localStore,e,!0)}),rk(r.remoteStore,e)}),[4,c]);case 4:return t.sent(),[4,fN(r,u)];case 5:return t.sent(),(n=r).Co.forEach(function(t,e){rk(n.remoteStore,e)}),n.No.ts(),n.Co=new Map,n.Do=new Zw(Hb.comparator),r.Oo=!1,[4,gk(r.remoteStore,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function fN(p,d){return $i(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,h,l,f;return Zi(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(a=o[i],s=void 0,(u=e.Vo.get(a))&&0!==u.length?[4,OS(e.localStore,Z_(u[0]))]:[3,7]):[3,13];case 2:s=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.Po.get(l),[4,function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,xS((e=r).localStore,i.query,!0)];case 1:return n=t.sent(),n=i.view.Ao(n),[2,(e.isPrimaryClient&&aN(e,i.targetId,n.To),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,LS(e.localStore,a)];case 8:return f=t.sent(),[4,OS(e.localStore,f)];case 9:return s=t.sent(),[4,Xk(e,pN(f),a,!1)];case 10:t.sent(),t.label=11;case 11:n.push(s),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.vo._r(r),n)]}})})}function pN(t){return H_(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dN(t){return t.remoteStore.remoteSyncer.applyRemoteEvent=$k.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(t,e){var n=t;if((t=n.Co.get(e))&&t.bo)return dI().add(t.key);var r=dI();if(!(e=n.Vo.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var a=o[i],a=n.Po.get(a),r=r.unionWith(a.view.wo);return r}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(o,a,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return(e=o).sharedClientState.updateQueryState(a,"rejected",s),i=e.Co.get(a),(n=i&&i.key)?(r=(r=new Zw(Hb.comparator)).insert(n,s_.newNoDocument(n,mb.min())),i=dI().add(n),i=new gI(mb.min(),new Map,new aI(db),r,i),[4,$k(e,i)]):[3,2];case 1:return t.sent(),e.Do=e.Do.remove(n),e.Co.delete(a),sN(e),[3,4];case 2:return[4,DS(e.localStore,a,!1).then(function(){return iN(e,a,s)}).catch(qE)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.vo._r=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,s=n.queries.get(s);if(s){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&Ok(n)}.bind(null,t.eventManager),t.vo.Mo=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.eventManager),t}function vN(t){return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,NS(e.localStore,o)];case 2:return r=t.sent(),rN(e,n,null),nN(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),[4,uN(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,qE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tN.bind(null,t),t}function gN(t,e,n){var r=t;!function(f,p,d){return $i(this,void 0,void 0,function(){var s,u,c,h,l;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,14,,15]),[4,p.getMetadata()];case 1:return s=t.sent(),[4,(r=f.localStore,o=r,a=xI((i=s).createTime),o.persistence.runTransaction("hasNewerBundle","readonly",function(t){return o.Qe.getBundleMetadata(t,i.id)}).then(function(t){return!!t&&0<=t.createTime.compareTo(a)}))];case 2:return t.sent()?[4,p.close()]:[3,4];case 3:return[2,(t.sent(),void d._completeWith({taskState:"Success",documentsLoaded:s.totalDocuments,bytesLoaded:s.totalBytes,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}))];case 4:return d._updateProgress(Vk(s)),u=new Mk(s,f.localStore,p.R),[4,p.Lo()];case 5:c=t.sent(),t.label=6;case 6:return c?[4,u.oo(c)]:[3,10];case 7:return(h=t.sent())&&d._updateProgress(h),[4,p.Lo()];case 8:c=t.sent(),t.label=9;case 9:return[3,6];case 10:return[4,u.complete()];case 11:return l=t.sent(),[4,uN(f,l.wn,void 0)];case 12:return t.sent(),[4,(r=f.localStore,e=s,(n=r).persistence.runTransaction("Save bundle","readwrite",function(t){return n.Qe.saveBundleMetadata(t,e)}))];case 13:return t.sent(),d._completeWith(l.progress),[3,15];case 14:return ub("SyncEngine","Loading bundle failed with "+(l=t.sent())),d._failWith(l),[3,15];case 15:return[2]}var e,n,r,i,o,a})})}(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var yN,mN,bN=(CN.prototype.initialize=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.R=UC(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Qo(e),[2]}})})},CN.prototype.Uo=function(t){return null},CN.prototype.Qo=function(t){return CS(this.persistence,new _S,t.initialUser,this.R)},CN.prototype.qo=function(t){return new zS(YS.bs,this.R)},CN.prototype.Bo=function(t){return new mC},CN.prototype.terminate=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},CN),_N=(Xi(SN,mN=bN),SN.prototype.initialize=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,mN.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,FS(this.localStore)];case 2:return t.sent(),[4,this.Ko.initialize(this,e)];case 3:return t.sent(),[4,vN(this.Ko.syncEngine)];case 4:return t.sent(),[4,pk(this.Ko.remoteStore)];case 5:return t.sent(),[2]}})})},SN.prototype.Qo=function(t){return CS(this.persistence,new _S,t.initialUser,this.R)},SN.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new KE(e,t.asyncQueue)},SN.prototype.qo=function(t){var e=gS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?TE.withCacheSize(this.cacheSizeBytes):TE.DEFAULT;return new fS(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,MC(),FC(),this.R,this.sharedClientState,!!this.forceOwnership)},SN.prototype.Bo=function(t){return new mC},SN),wN=(Xi(EN,yN=_N),EN.prototype.initialize=function(r){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:return[4,yN.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Ko.syncEngine,this.sharedClientState instanceof yC?(this.sharedClientState.syncEngine={ui:hN.bind(null,e),ai:function(i,o,a,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return(e=i).Oo?(ab("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.Vo.has(o))return[3,8];switch(a){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,MS(e.localStore)];case 3:return n=t.sent(),r=gI.createSynthesizedRemoteEventForCurrentChange(o,"current"===a),[4,uN(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,DS(e.localStore,o,!0)];case 6:return t.sent(),iN(e,o,s),[3,8];case 7:hb(),t.label=8;case 8:return[2]}})})}.bind(null,e),hi:function(c,h,l){return $i(this,void 0,void 0,function(){var n,e,r,i,o,a,s,u;return Zi(this,function(t){switch(t.label){case 0:if(!(n=dN(c)).Oo)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.Vo.has(r)?(ab("SyncEngine","Adding an already active target "+r),[3,5]):[4,LS(n.localStore,r)]):[3,6];case 2:return i=t.sent(),[4,OS(n.localStore,i)];case 3:return o=t.sent(),[4,Xk(n,pN(i),o.targetId,!1)];case 4:t.sent(),nk(n.remoteStore,o),t.label=5;case 5:return e++,[3,1];case 6:a=function(e){return Zi(this,function(t){switch(t.label){case 0:return n.Vo.has(e)?[4,DS(n.localStore,e,!1).then(function(){rk(n.remoteStore,e),iN(n,e)}).catch(qE)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},s=0,u=l,t.label=7;case 7:return s<u.length?(u=u[s],[5,a(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return s++,[3,7];case 10:return[2]}})})}.bind(null,e),fn:function(t){return t.localStore.persistence.fn()}.bind(null,e),ci:function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return[2,MS((e=n).localStore).then(function(t){return uN(e,t)})]})})}.bind(null,e)},[4,this.sharedClientState.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.He(function(e){return $i(n,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,lN(this.Ko.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},EN.prototype.Bo=function(t){var e=MC();if(!yC.yt(e))throw new nb(eb.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=gS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new yC(e,t.asyncQueue,n,t.clientId,t.initialUser)},EN),IN=(TN.prototype.initialize=function(n,r){return $i(this,void 0,void 0,function(){var e=this;return Zi(this,function(t){switch(t.label){case 0:return this.localStore?[3,2]:(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Zk(e.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=cN.bind(null,this.syncEngine),[4,gk(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},TN.prototype.createEventManager=function(t){return new Ik},TN.prototype.createDatastore=function(t){var e=UC(t.databaseInfo.databaseId),n=(n=t.databaseInfo,new TC(n));return t=t.credentials,new GC(t,n,e)},TN.prototype.createRemoteStore=function(t){var e=this,n=this.localStore,r=this.datastore,i=t.asyncQueue,o=function(t){return Zk(e.syncEngine,t,0)},t=new(_C.yt()?_C:bC);return new jC(n,r,i,o,t)},TN.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){o=new zk(t,e,n,r,i,o);return a&&(o.Oo=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},TN.prototype.terminate=function(){return function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=n,ab("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,ek(e)];case 1:return t.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},TN);function TN(){}function EN(t,e){var n=this;return(n=yN.call(this,t,e,!1)||this).Ko=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function SN(t,e,n){var r=this;return(r=mN.call(this)||this).Ko=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function CN(){this.synchronizeTabs=!1}function kN(n,r){void 0===r&&(r=10240);var i=0;return{read:function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return i<n.byteLength?(e={value:n.slice(i,i+r),done:!1},[2,(i+=r,e)]):[2,{done:!0}]})})},cancel:function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var NN=(FN.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},FN.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},FN.prototype.Wo=function(){this.muted=!0},FN.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},FN),AN=(MN.prototype.close=function(){return this.Go.cancel()},MN.prototype.getMetadata=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return[2,this.metadata.promise]})})},MN.prototype.Lo=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},MN.prototype.Ho=function(){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,this.Jo()];case 1:return null===(e=t.sent())?[2,null]:(r=this.zo.decode(e),n=Number(r),isNaN(n)&&this.Yo("length string ("+r+") is not valid number"),[4,this.Xo(n)]);case 2:return r=t.sent(),[2,new xk(JSON.parse(r),e.length+n)]}})})},MN.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},MN.prototype.Jo=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(t.sent())return[3,3];t.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},MN.prototype.Xo=function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return this.buffer.length<n?[4,this.tc()]:[3,3];case 1:t.sent()&&this.Yo("Reached the end of bundle when more is expected."),t.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,n)),[2,(this.buffer=this.buffer.slice(n),e)]}})})},MN.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},MN.prototype.tc=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,this.Go.read()];case 1:return(e=t.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},MN),RN=(LN.prototype.lookup=function(r){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new nb(eb.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(a,s){return $i(this,void 0,void 0,function(){var n,e,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=VI((n=a).R)+"/documents",r={documents:s.map(function(t){return FI(n.R,t)})},[4,n.Oi("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.R,"found"in(t=t)?function(t,e){lb(!!e.found),e.found.name,e.found.updateTime;var n=UI(t,e.found.name),t=xI(e.found.updateTime),e=new o_({mapValue:{fields:e.found.fields}});return s_.newFoundDocument(n,t,e)}(e,t):"missing"in t?function(t,e){lb(!!e.missing),lb(!!e.readTime);t=UI(t,e.missing),e=xI(e.readTime);return s_.newNoDocument(t,e)}(e,t):hb());i.set(t.key.toString(),t)}),o=[],[2,(s.forEach(function(t){t=i.get(t.toString());lb(!!t),o.push(t)}),o)]}})})}(this.datastore,r)];case 1:return[2,((e=t.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},LN.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},LN.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},LN.prototype.delete=function(t){this.write(new zw(t,this.precondition(t))),this.writtenDocs.add(t.toString())},LN.prototype.commit=function(){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=Hb.fromPath(e);n.mutations.push(new Qw(e,n.precondition(e)))}),[4,function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return n=VI((e=i).R)+"/documents",r={writes:o.map(function(t){return HI(e.R,t)})},[4,e.Ni("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},LN.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw hb();e=mb.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new nb(eb.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},LN.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Nw.updateTime(e):Nw.none()},LN.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(this.writtenDocs.has(t.toString())||!e)return Nw.exists(!0);if(e.isEqual(mb.min()))throw new nb(eb.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nw.updateTime(e)},LN.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},LN.prototype.ensureCommitNotCalled=function(){},LN),PN=(xN.prototype.run=function(){this.nc()},xN.prototype.nc=function(){var t=this;this.Zi.ji(function(){return $i(t,void 0,void 0,function(){var e,n,r=this;return Zi(this,function(t){return e=new RN(this.datastore),(n=this.sc(e))&&n.then(function(t){r.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){r.deferred.resolve(t)}).catch(function(t){r.ic(t)})})}).catch(function(t){r.ic(t)}),[2]})})})},xN.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Bb(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},xN.prototype.ic=function(t){var e=this;0<this.ec&&this.rc(t)?(--this.ec,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},xN.prototype.rc=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!Jw(t)},xN),ON=(DN.prototype.getConfiguration=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},DN.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},DN.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new nb(eb.FAILED_PRECONDITION,"The client has already been terminated.")},DN.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new CT;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return e=t.sent(),e=wk(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},DN);function DN(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=XS.UNAUTHENTICATED,this.clientId=fb.u(),this.credentialListener=function(){},this.receivedInitialUser=new CT,this.credentials.setChangeListener(function(t){ab("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}function xN(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new KC(this.asyncQueue,"transaction_retry")}function LN(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function MN(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new CT,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}function FN(t){this.observer=t,this.muted=!1}function UN(i,o){return $i(this,void 0,void 0,function(){var e,n,r=this;return Zi(this,function(t){switch(t.label){case 0:return i.asyncQueue.verifyOperationInProgress(),ab("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return e=t.sent(),[4,o.initialize(e)];case 2:return t.sent(),n=e.initialUser,i.setCredentialChangeListener(function(e){n.isEqual(e)||(n=e,i.asyncQueue.enqueueRetryable(function(){return $i(r,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,kS(o.localStore,e)];case 1:return t.sent(),[2]}})})}))}),o.persistence.setDatabaseDeletedListener(function(){return i.terminate()}),i.offlineComponents=o,[2]}})})}function jN(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return r.asyncQueue.verifyOperationInProgress(),[4,qN(r)];case 1:return e=t.sent(),ab("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.setCredentialChangeListener(function(t){return r.asyncQueue.enqueueRetryable(function(){return function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return(e=r).asyncQueue.verifyOperationInProgress(),ab("RemoteStore","RemoteStore received new credentials"),n=uk(e),e.$r.add(3),[4,ek(e)];case 1:return t.sent(),n&&e.Br.set("Unknown"),[4,e.remoteSyncer.handleCredentialChange(i)];case 2:return t.sent(),e.$r.delete(3),[4,tk(e)];case 3:return t.sent(),[2]}})})}(i.remoteStore,t)})}),r.onlineComponents=i,[2]}})})}function qN(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(ab("FirestoreClient","Using default OfflineComponentProvider"),[4,UN(e,new bN)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function VN(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(ab("FirestoreClient","Using default OnlineComponentProvider"),[4,jN(e,new IN)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function BN(t){return qN(t).then(function(t){return t.persistence})}function KN(t){return qN(t).then(function(t){return t.localStore})}function WN(t){return VN(t).then(function(t){return t.remoteStore})}function HN(t){return VN(t).then(function(t){return t.syncEngine})}function GN(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,VN(r)];case 1:return e=t.sent(),[2,((n=e.eventManager).onListen=function(a,s){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=dN(a),(o=e.Po.get(s))?(n=o.targetId,e.sharedClientState.addLocalQueryTarget(n),r=o.view.Ro(),[3,4]):[3,1];case 1:return[4,OS(e.localStore,Z_(s))];case 2:return i=t.sent(),o=e.sharedClientState.addLocalQueryTarget(i.targetId),n=i.targetId,[4,Xk(e,s,n,"current"===o)];case 3:r=t.sent(),e.isPrimaryClient&&nk(e.remoteStore,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e.syncEngine),n.onUnlisten=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return n=(e=i).Po.get(o),1<(r=e.Vo.get(n.targetId)).length?[2,(e.Vo.set(n.targetId,r.filter(function(t){return!ew(t,o)})),void e.Po.delete(o))]:e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(n.targetId),e.sharedClientState.isActiveQueryTarget(n.targetId)?[3,2]:[4,DS(e.localStore,n.targetId,!1).then(function(){e.sharedClientState.clearQueryState(n.targetId),rk(e.remoteStore,n.targetId),iN(e,n.targetId)}).catch(qE)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return iN(e,n.targetId),[4,DS(e.localStore,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.syncEngine),n)]}})})}function zN(n,r,i){var t=this;void 0===i&&(i={});var o=new CT;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,a){var t=new NN({next:function(t){r.enqueueAndForget(function(){return Pk(n,s)});var e=t.docs.has(i);!e&&t.fromCache?a.reject(new nb(eb.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?a.reject(new nb(eb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(t)},error:function(t){return a.reject(t)}}),s=new Dk(G_(i.path),t,{includeMetadataChanges:!0,so:!0});return Rk(n,s)},[4,GN(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.asyncQueue,r,i,o])]}})})}),o.promise}function QN(n,r,i){var t=this;void 0===i&&(i={});var o=new CT;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new NN({next:function(t){n.enqueueAndForget(function(){return Pk(e,a)}),t.fromCache&&"server"===r.source?i.reject(new nb(eb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),a=new Dk(t,o,{includeMetadataChanges:!0,so:!0});return Rk(e,a)},[4,GN(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.asyncQueue,r,i,o])]}})})}),o.promise}function YN(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}var XN=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},JN=(Object.defineProperty(cA.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),cA.prototype.isEqual=function(t){return t instanceof cA&&t.projectId===this.projectId&&t.database===this.database},cA),$N=new Map,ZN=(uA.prototype.getToken=function(){return Promise.resolve(null)},uA.prototype.invalidateToken=function(){},uA.prototype.setChangeListener=function(t){(this.changeListener=t)(XS.UNAUTHENTICATED)},uA.prototype.removeChangeListener=function(){this.changeListener=null},uA),tA=(sA.prototype.getToken=function(){return Promise.resolve(this.token)},sA.prototype.invalidateToken=function(){},sA.prototype.setChangeListener=function(t){(this.changeListener=t)(this.token.user)},sA.prototype.removeChangeListener=function(){this.changeListener=null},sA),eA=(aA.prototype.getToken=function(){var e=this,n=this.cc,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.cc!==n?(ab("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(lb("string"==typeof t.accessToken),new YN(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},aA.prototype.invalidateToken=function(){this.forceRefresh=!0},aA.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},aA.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},aA.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return lb(null===t||"string"==typeof t),new XS(t)},aA),nA=(Object.defineProperty(oA.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),oA),rA=(iA.prototype.getToken=function(){return Promise.resolve(new nA(this.ac,this.hc,this.lc))},iA.prototype.setChangeListener=function(t){t(XS.FIRST_PARTY)},iA.prototype.removeChangeListener=function(){},iA.prototype.invalidateToken=function(){},iA);function iA(t,e,n){this.ac=t,this.hc=e,this.lc=n}function oA(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=XS.FIRST_PARTY}function aA(t){var e=this;this.oc=null,this.currentUser=XS.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}function sA(t){this.token=t,this.changeListener=null}function uA(){this.changeListener=null}function cA(t,e){this.projectId=t,this.database=e||"(default)"}function hA(t,e,n){if(!n)throw new nb(eb.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function lA(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new nb(eb.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function fA(t,e,n,r){if(!0===e&&!0===r)throw new nb(eb.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function pA(t){if(!Hb.isDocumentKey(t))throw new nb(eb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function dA(t){if(Hb.isDocumentKey(t))throw new nb(eb.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function vA(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":hb();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function gA(t,e){if((t="_delegate"in t?t._delegate:t)instanceof e)return t;if(e.name===t.constructor.name)throw new nb(eb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=vA(t);throw new nb(eb.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function yA(t,e){if(e<=0)throw new nb(eb.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var mA,bA=(NA.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},NA),_A=(Object.defineProperty(kA.prototype,"app",{get:function(){if(!this._app)throw new nb(eb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(kA.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(kA.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),kA.prototype._setSettings=function(t){if(this._settingsFrozen)throw new nb(eb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bA(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ZN;switch(t.type){case"gapi":var e=t.client;return lb(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new rA(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new nb(eb.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},kA.prototype._getSettings=function(){return this._settings},kA.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},kA.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},kA.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},kA.prototype._terminate=function(){return(t=$N.get(this))&&(ab("ComponentProvider","Removing Datastore"),$N.delete(this),t.terminate()),Promise.resolve();var t},kA),wA=(Object.defineProperty(CA.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(CA.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(CA.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(CA.prototype,"parent",{get:function(){return new TA(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),CA.prototype.withConverter=function(t){return new CA(this.firestore,t,this._key)},CA),IA=(SA.prototype.withConverter=function(t){return new SA(this.firestore,t,this._query)},SA),TA=(Xi(EA,mA=IA),Object.defineProperty(EA.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(EA.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(EA.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new wA(this.firestore,null,new Hb(t))},enumerable:!1,configurable:!0}),EA.prototype.withConverter=function(t){return new EA(this.firestore,t,this._path)},EA);function EA(t,e,n){var r=this;return(r=mA.call(this,t,e,G_(n))||this)._path=n,r.type="collection",r}function SA(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}function CA(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}function kA(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bA({}),this._settingsFrozen=!1,t instanceof JN?(this._databaseId=t,this._credentials=new ZN):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new nb(eb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new JN(t.options.projectId)}(t),this._credentials=new eA(e))}function NA(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new nb(eb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new nb(eb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,fA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function AA(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=ta(t),hA("collection","path",e),t instanceof _A)return dA(n=Cb.fromString.apply(Cb,no([e],r))),new TA(t,null,n);if(!(t instanceof wA||t instanceof TA))throw new nb(eb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return dA(n=Cb.fromString.apply(Cb,no([t.path],r)).child(Cb.fromString(e))),new TA(t.firestore,null,n)}function RA(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=ta(t),hA("doc","path",e=1===arguments.length?fb.u():e),t instanceof _A)return pA(n=Cb.fromString.apply(Cb,no([e],r))),new wA(t,null,new Hb(n));if(!(t instanceof wA||t instanceof TA))throw new nb(eb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return pA(n=t._path.child(Cb.fromString.apply(Cb,no([e],r)))),new wA(t.firestore,t instanceof TA?t.converter:null,new Hb(n))}function PA(t,e){return t=ta(t),e=ta(e),(t instanceof wA||t instanceof TA)&&(e instanceof wA||e instanceof TA)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function OA(t,e){return t=ta(t),e=ta(e),t instanceof IA&&e instanceof IA&&t.firestore===e.firestore&&ew(t._query,e._query)&&t.converter===e.converter}var DA=(Object.defineProperty(xA.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),xA.prototype.enqueueAndForget=function(t){this.enqueue(t)},xA.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},xA.prototype.enterRestrictedMode=function(){var t;this.wc||(this.wc=!0,(t=FC())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec))},xA.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},xA.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},xA.prototype.Ac=function(){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(0===this.dc.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return t.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!UT(e=t.sent()))throw e;return ab("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.dc.length&&this.Zi.ji(function(){return n.Ac()}),t.label=5;case 5:return[2]}})})},xA.prototype.Ic=function(t){var r=this,e=this.fc.then(function(){return r.yc=!0,t().catch(function(t){throw r.mc=t,r.yc=!1,sb("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",n=e.stack?e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack:n)),t;var e,n}).then(function(t){return r.yc=!1,t})});return this.fc=e},xA.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),-1<this.gc.indexOf(t)&&(e=0);n=bk.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(n),n},xA.prototype.Tc=function(){this.mc&&hb()},xA.prototype.verifyOperationInProgress=function(){},xA.prototype.bc=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,e=this.fc];case 1:t.sent(),t.label=2;case 2:if(e!==this.fc)return[3,0];t.label=3;case 3:return[2]}})})},xA.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},xA.prototype.Pc=function(r){var i=this;return this.bc().then(function(){i._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var t=0,e=i._c;t<e.length;t++){var n=e[t];if(n.skipDelay(),"all"!==r&&n.timerId===r)break}return i.bc()})},xA.prototype.Vc=function(t){this.gc.push(t)},xA.prototype.Rc=function(t){t=this._c.indexOf(t);this._c.splice(t,1)},xA);function xA(){var e=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new KC(this,"async_queue_retry"),this.Ec=function(){var t=FC();t&&ab("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=FC();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ec)}function LA(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var MA,FA=(qA.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},qA.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},qA.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},qA.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},qA.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},qA.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},qA),UA=(Xi(jA,MA=_A),jA.prototype._terminate=function(){return this._firestoreClient||BA(this),this._firestoreClient.terminate()},jA);function jA(t,e){var n=this;return(n=MA.call(this,t,e)||this).type="firestore",n._queue=new DA,n._persistenceKey="name"in t?t.name:"[DEFAULT]",n}function qA(){this._progressObserver={},this._taskCompletionResolver=new CT,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function VA(t){return t._firestoreClient||BA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function BA(t){var e,n,r,i=t._freezeSettings(),i=(e=t._databaseId,n=(null===(r=t._app)||void 0===r?void 0:r.options.appId)||"",r=t._persistenceKey,new XN(e,n,r,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling));t._firestoreClient=new ON(t._credentials,t._queue,i)}function KA(r,i,o){var t=this,a=new CT;return r.asyncQueue.enqueue(function(){return $i(t,void 0,void 0,function(){var n;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,UN(r,o)];case 1:return t.sent(),[4,jN(r,i)];case 2:return t.sent(),a.resolve(),[3,4];case 3:if(!("FirebaseError"===(e=n=t.sent()).name?e.code===eb.FAILED_PRECONDITION||e.code===eb.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code))throw n;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+n),a.reject(n),[3,4];case 4:return[2]}var e})})}).then(function(){return a.promise})}function WA(t){if(t._initialized||t._terminated)throw new nb(eb.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var HA=(nR.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},nR),GA=(eR.fromBase64String=function(t){try{return new eR(Rb.fromBase64String(t))}catch(t){throw new nb(eb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},eR.fromUint8Array=function(t){return new eR(Rb.fromUint8Array(t))},eR.prototype.toBase64=function(){return this._byteString.toBase64()},eR.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},eR.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},eR.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},eR),zA=function(t){this._methodName=t},QA=(Object.defineProperty(tR.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(tR.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),tR.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},tR.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},tR.prototype._compareTo=function(t){return db(this._lat,t._lat)||db(this._long,t._long)},tR),YA=/^__.*__$/,XA=(ZA.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Fw(t,this.data,this.fieldMask,e,this.fieldTransforms):new Mw(t,this.data,e,this.fieldTransforms)},ZA),JA=($A.prototype.toMutation=function(t,e){return new Fw(t,this.data,this.fieldMask,e,this.fieldTransforms)},$A);function $A(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function ZA(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function tR(t,e){if(!isFinite(t)||t<-90||90<t)throw new nb(eb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new nb(eb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}function eR(t){this._byteString=t}function nR(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new nb(eb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nb(t)}function rR(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw hb()}}var iR=(Object.defineProperty(sR.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(sR.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),sR.prototype.Cc=function(t){return new sR(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},sR.prototype.Nc=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.Cc({path:e,xc:!1});return e.Fc(t),e},sR.prototype.kc=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.Cc({path:t,xc:!1});return t.Sc(),t},sR.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},sR.prototype.$c=function(t){return MR(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},sR.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},sR.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},sR.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(rR(this.Dc)&&YA.test(t))throw this.$c('Document fields cannot begin and end with "__"')},sR),oR=(aR.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new iR({Dc:t,methodName:e,Lc:n,path:Nb.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},aR);function aR(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||UC(t)}function sR(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}function uR(t){var e=t._freezeSettings(),n=UC(t._databaseId);return new oR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cR(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);OR("Data must be an object, but it was:",a,r);var s,u,r=RR(r,a);if(o.merge)s=new Ab(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=DR(e,l[h],n);if(!a.contains(f))throw new nb(eb.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");FR(c,f)||c.push(f)}s=new Ab(c),u=a.fieldTransforms.filter(function(t){return s.covers(t.field)})}else s=null,u=a.fieldTransforms;return new XA(new o_(r),s,u)}var hR,lR=(Xi(fR,hR=zA),fR.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw 1===t.Dc?t.$c(this._methodName+"() can only appear at the top level of your update data"):t.$c(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},fR.prototype.isEqual=function(t){return t instanceof fR},fR);function fR(){return null!==hR&&hR.apply(this,arguments)||this}function pR(t,e,n){return new iR({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var dR,vR,gR,yR,mR=(Xi(SR,yR=zA),SR.prototype._toFieldTransform=function(t){return new kw(t.path,new fw)},SR.prototype.isEqual=function(t){return t instanceof SR},SR),bR=(Xi(ER,gR=zA),ER.prototype._toFieldTransform=function(t){var e=pR(this,t,!0),n=this.qc.map(function(t){return AR(t,e)}),n=new pw(n);return new kw(t.path,n)},ER.prototype.isEqual=function(t){return this===t},ER),_R=(Xi(TR,vR=zA),TR.prototype._toFieldTransform=function(t){var e=pR(this,t,!0),n=this.qc.map(function(t){return AR(t,e)}),n=new mw(n);return new kw(t.path,n)},TR.prototype.isEqual=function(t){return this===t},TR),wR=(Xi(IR,dR=zA),IR.prototype._toFieldTransform=function(t){var e=new Iw(t.R,uw(t.R,this.Uc));return new kw(t.path,e)},IR.prototype.isEqual=function(t){return this===t},IR);function IR(t,e){var n=this;return(n=dR.call(this,t)||this).Uc=e,n}function TR(t,e){var n=this;return(n=vR.call(this,t)||this).qc=e,n}function ER(t,e){var n=this;return(n=gR.call(this,t)||this).qc=e,n}function SR(){return null!==yR&&yR.apply(this,arguments)||this}function CR(t,r,i,e){var o=t.Bc(1,r,i);OR("Data must be an object, but it was:",o,e);var a=[],s=o_.empty();Ib(e,function(t,e){var n=LR(r,t,i);e=ta(e);t=o.kc(n);e instanceof lR?a.push(n):null!=(t=AR(e,t))&&(a.push(n),s.set(n,t))});e=new Ab(a);return new JA(s,e,o.fieldTransforms)}function kR(t,e,n,r,i,o){var a=t.Bc(1,e,n),s=[DR(e,r,n)],u=[i];if(o.length%2!=0)throw new nb(eb.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(DR(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=o_.empty(),v=s.length-1;0<=v;--v)FR(p,s[v])||(h=s[v],l=ta(l=u[v]),f=a.kc(h),l instanceof lR?p.push(h):null!=(f=AR(l,f))&&(p.push(h),d.set(h,f)));i=new Ab(p);return new JA(d,i,a.fieldTransforms)}function NR(t,e,n,r){return void 0===r&&(r=!1),AR(n,t.Bc(r?4:3,e))}function AR(a,t){if(PR(a=ta(a)))return OR("Unsupported field value:",t,a),RR(a,t);if(a instanceof zA)return function(t,e){if(!rR(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");t=t._toFieldTransform(e);t&&e.fieldTransforms.push(t)}(a,t),null;if(void 0===a&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.xc&&4!==t.Dc)throw t.$c("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=a;r<i.length;r++){var o=AR(i[r],t.Oc(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===(t=ta(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return uw(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=yb.fromDate(t);return{timestampValue:OI(e.R,n)}}if(t instanceof yb)return n=new yb(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:OI(e.R,n)};if(t instanceof QA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof GA)return{bytesValue:DI(e.R,t._byteString)};if(t instanceof wA){var n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:LI(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+vA(t))}(a,t)}function RR(t,n){var r={};return Tb(t)?n.path&&0<n.path.length&&n.fieldMask.push(n.path):Ib(t,function(t,e){e=AR(e,n.Nc(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function PR(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof yb||t instanceof QA||t instanceof GA||t instanceof wA||t instanceof zA)}function OR(t,e,n){if(!PR(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=vA(n);throw"an object"===n?e.$c(t+" a custom object"):e.$c(t+" "+n)}var r}function DR(t,e,n){if((e=ta(e))instanceof HA)return e._internalPath;if("string"==typeof e)return LR(t,e);throw MR("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var xR=new RegExp("[~\\*/\\[\\]]");function LR(e,n,r){if(0<=n.search(xR))throw MR("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(HA.bind.apply(HA,no([void 0],n.split(".")))))._internalPath}catch(t){throw MR("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function MR(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||a)&&(n+=" (found",o&&(n+=" in field "+r),a&&(n+=" in document "+i),n+=")"),new nb(eb.INVALID_ARGUMENT,(e+=". ")+t+n)}function FR(t,e){return t.some(function(t){return t.isEqual(e)})}var UR,jR=(Object.defineProperty(BR.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(BR.prototype,"ref",{get:function(){return new wA(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),BR.prototype.exists=function(){return null!==this._document},BR.prototype.data=function(){if(this._document){if(this._converter){var t=new qR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},BR.prototype.get=function(t){if(this._document){t=this._document.data.field(KR("DocumentSnapshot.get",t));if(null!==t)return this._userDataWriter.convertValue(t)}},BR),qR=(Xi(VR,UR=jR),VR.prototype.data=function(){return UR.prototype.data.call(this)},VR);function VR(){return null!==UR&&UR.apply(this,arguments)||this}function BR(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}function KR(t,e){return"string"==typeof e?LR(t,e):(e instanceof HA?e:e._delegate)._internalPath}var WR,HR,GR=(ZR.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},ZR),zR=(Xi($R,HR=jR),$R.prototype.exists=function(){return HR.prototype.exists.call(this)},$R.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new QR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},$R.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){t=this._document.data.field(KR("DocumentSnapshot.get",t));if(null!==t)return this._userDataWriter.convertValue(t,e.serverTimestamps)}},$R),QR=(Xi(JR,WR=zR),JR.prototype.data=function(t){return void 0===t&&(t={}),WR.prototype.data.call(this,t)},JR),YR=(Object.defineProperty(XR.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(XR.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(XR.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),XR.prototype.forEach=function(e,n){var r=this;this._snapshot.docs.forEach(function(t){e.call(n,new QR(r._firestore,r._userDataWriter,t.key,t,new GR(r._snapshot.mutatedKeys.has(t.key),r._snapshot.fromCache),r.query.converter))})},XR.prototype.docChanges=function(t){t=!!(t=void 0===t?{}:t).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nb(eb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,e){if(i._snapshot.oldDocs.isEmpty()){var n=0;return i._snapshot.docChanges.map(function(t){var e=new QR(i._firestore,i._userDataWriter,t.doc.key,t.doc,new GR(i._snapshot.mutatedKeys.has(t.doc.key),i._snapshot.fromCache),i.query.converter);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new QR(i._firestore,i._userDataWriter,t.doc.key,t.doc,new GR(i._snapshot.mutatedKeys.has(t.doc.key),i._snapshot.fromCache),i.query.converter),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hb()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},XR);function XR(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new GR(r.hasPendingWrites,r.fromCache),this.query=n}function JR(){return null!==WR&&WR.apply(this,arguments)||this}function $R(t,e,n,r,i,o){var a=this;return(a=HR.call(this,t,e,n,r,o)||this)._firestore=t,a._firestoreImpl=t,a.metadata=i,a}function ZR(t,e){this.hasPendingWrites=t,this.fromCache=e}function tP(t,e){return t instanceof zR&&e instanceof zR?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof YR&&e instanceof YR&&t._firestore===e._firestore&&OA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function eP(t){if(Q_(t)&&0===t.explicitOrderBy.length)throw new nb(eb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}Sn=function(){};function nP(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r]._apply(t);return t}var rP,iP,oP,aP,sP,uP=(Xi(yP,sP=Sn),yP.prototype._apply=function(t){var e=uR(t.firestore),e=function(t,e,n,r,i,o){if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new nb(eb.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){_P(o,i);for(var a=[],s=0,u=o;s<u.length;s++){var c=u[s];a.push(bP(n,t,c))}h={arrayValue:{values:a}}}else h=bP(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||_P(o,i),h=NR(e,"where",o,"in"===i||"not-in"===i);var h=v_.create(r,i,h);return function(t,e){if(e.g()){var n=X_(t);if(null!==n&&!n.isEqual(e.field))throw new nb(eb.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=Y_(t);null!==n&&wP(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new nb(eb.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new nb(eb.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t._query,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new IA(t.firestore,t.converter,(t=t._query,e=t.filters.concat([e]),new W_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},yP),cP=(Xi(gP,aP=Sn),gP.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new nb(eb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new nb(eb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new V_(e,n);return e=r,null!==Y_(n=t)||null!==(t=X_(n))&&wP(0,t,e.field),r}(t._query,this.Qc,this.Wc);return new IA(t.firestore,t.converter,(t=t._query,e=t.explicitOrderBy.concat([e]),new W_(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},gP),hP=(Xi(vP,oP=Sn),vP.prototype._apply=function(t){return new IA(t.firestore,t.converter,tw(t._query,this.Gc,this.zc))},vP),lP=(Xi(dP,iP=Sn),dP.prototype._apply=function(t){var e=mP(t,this.type,this.Hc,this.Jc);return new IA(t.firestore,t.converter,(t=t._query,e=e,new W_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},dP),fP=(Xi(pP,rP=Sn),pP.prototype._apply=function(t){var e=mP(t,this.type,this.Hc,this.Jc);return new IA(t.firestore,t.converter,(t=t._query,e=e,new W_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},pP);function pP(t,e,n){var r=this;return(r=rP.call(this)||this).type=t,r.Hc=e,r.Jc=n,r}function dP(t,e,n){var r=this;return(r=iP.call(this)||this).type=t,r.Hc=e,r.Jc=n,r}function vP(t,e,n){var r=this;return(r=oP.call(this)||this).type=t,r.Gc=e,r.zc=n,r}function gP(t,e){var n=this;return(n=aP.call(this)||this).Qc=t,n.Wc=e,n.type="orderBy",n}function yP(t,e,n){var r=this;return(r=sP.call(this)||this).Qc=t,r.Kc=e,r.jc=n,r.type="where",r}function mP(t,c,e,n){if(e[0]=ta(e[0]),e[0]instanceof jR)return function(t,e,n,r){if(!n)throw new nb(eb.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,a=$_(t);o<a.length;o++){var s=a[o];if(s.field.isKeyField())i.push(Zb(e,n.key));else{var u=n.data.field(s.field);if(qb(u))throw new nb(eb.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){s=s.field.canonicalString();throw new nb(eb.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+s+"' (used as the orderBy) does not exist.")}i.push(u)}}return new L_(i,r)}(t._query,t.firestore._databaseId,e[0]._document,n);var r=uR(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new nb(eb.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new nb(eb.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!J_(t)&&-1!==c.indexOf("/"))throw new nb(eb.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Cb.fromString(c));if(!Hb.isDocumentKey(h))throw new nb(eb.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new Hb(h);s.push(Zb(e,h))}else{c=NR(n,r,c);s.push(c)}}return new L_(s,o)}(t._query,t.firestore._databaseId,r,c,e,n)}function bP(t,e,n){if("string"==typeof(n=ta(n))){if(""===n)throw new nb(eb.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!J_(e)&&-1!==n.indexOf("/"))throw new nb(eb.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(Cb.fromString(n));if(!Hb.isDocumentKey(e))throw new nb(eb.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Zb(t,new Hb(e))}if(n instanceof wA)return Zb(t,n._key);throw new nb(eb.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+vA(n)+".")}function _P(t,e){if(!Array.isArray(t)||0===t.length)throw new nb(eb.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new nb(eb.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function wP(t,e,n){if(!n.isEqual(e))throw new nb(eb.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}IP.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),zb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ub(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(jb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw hb()}},IP.prototype.convertObject=function(t,n){var r=this,i={};return Ib(t.fields||{},function(t,e){i[t]=r.convertValue(e,n)}),i},IP.prototype.convertGeoPoint=function(t){return new QA(Ub(t.latitude),Ub(t.longitude))},IP.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},IP.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return qb(e)?t(e):e}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Vb(t));default:return null}},IP.prototype.convertTimestamp=function(t){t=Fb(t);return new yb(t.seconds,t.nanos)},IP.prototype.convertDocumentKey=function(t,e){var n=Cb.fromString(t);lb(nT(n));t=new JN(n.get(1),n.get(3)),n=new Hb(n.popFirst(5));return t.isEqual(e)||sb("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},G=IP;function IP(){}function TP(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var EP,SP=(Xi(NP,EP=G),NP.prototype.convertBytes=function(t){return new GA(t)},NP.prototype.convertReference=function(t){t=this.convertDocumentKey(t,this.firestore._databaseId);return new wA(this.firestore,null,t)},NP),CP=(kP.prototype.set=function(t,e,n){this._verifyNotCommitted();t=AP(t,this._firestore),e=TP(t.converter,e,n),n=cR(this._dataReader,"WriteBatch.set",t._key,e,null!==t.converter,n);return this._mutations.push(n.toMutation(t._key,Nw.none())),this},kP.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();t=AP(t,this._firestore),e="string"==typeof(e=ta(e))||e instanceof HA?kR(this._dataReader,"WriteBatch.update",t._key,e,n,r):CR(this._dataReader,"WriteBatch.update",t._key,e);return this._mutations.push(e.toMutation(t._key,Nw.exists(!0))),this},kP.prototype.delete=function(t){this._verifyNotCommitted();t=AP(t,this._firestore);return this._mutations=this._mutations.concat(new zw(t._key,Nw.none())),this},kP.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,0<this._mutations.length?this._commitHandler(this._mutations):Promise.resolve()},kP.prototype._verifyNotCommitted=function(){if(this._committed)throw new nb(eb.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},kP);function kP(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=uR(t)}function NP(t){var e=this;return(e=EP.call(this)||this).firestore=t,e}function AP(t,e){if((t=ta(t)).firestore!==e)throw new nb(eb.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var RP,PP=(Xi(OP,RP=G),OP.prototype.convertBytes=function(t){return new GA(t)},OP.prototype.convertReference=function(t){t=this.convertDocumentKey(t,this.firestore._databaseId);return new wA(this.firestore,null,t)},OP);function OP(t){var e=this;return(e=RP.call(this)||this).firestore=t,e}function DP(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=gA(t,wA);var o=gA(t.firestore,UA),a=uR(o);return LP(o,[("string"==typeof(e=ta(e))||e instanceof HA?kR(a,"updateDoc",t._key,e,n,r):CR(a,"updateDoc",t._key,e)).toMutation(t._key,Nw.exists(!0))])}function xP(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e=ta(e);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||LA(n[i])||(r=n[i],i++);var o,a,s,u,c,h,l={includeMetadataChanges:r.includeMetadataChanges};return LA(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof wA?(s=gA(e.firestore,UA),u=G_(e._key.path),h={next:function(t){n[i]&&n[i](MP(s,e,t))},error:n[i+1],complete:n[i+2]}):(a=gA(e,IA),s=gA(a.firestore,UA),u=a._query,c=new PP(s),h={next:function(t){n[i]&&n[i](new YR(s,c,a,t))},error:n[i+1],complete:n[i+2]},eP(e._query)),function(n,t,e){var r=this,i=new NN(h),o=new Dk(t,i,e);return n.asyncQueue.enqueueAndForget(function(){return $i(r,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=Rk,[4,GN(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.Wo(),n.asyncQueue.enqueueAndForget(function(){return $i(r,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=Pk,[4,GN(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(VA(s),u,l)}function LP(t,e){return function(n,r){var t=this,i=new CT;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=Jk,[4,HN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(VA(t),e)}function MP(t,e,n){var r=n.docs.get(e._key),i=new PP(t);return new zR(t,i,e._key,r,new GR(n.hasPendingWrites,n.fromCache),e.converter)}var FP,UP=(qP.prototype.get=function(t){var e=this,n=AP(t,this._firestore),r=new SP(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return hb();t=t[0];if(t.isFoundDocument())return new jR(e._firestore,r,t.key,t,n.converter);if(t.isNoDocument())return new jR(e._firestore,r,n._key,null,n.converter);throw hb()})},qP.prototype.set=function(t,e,n){t=AP(t,this._firestore),e=TP(t.converter,e,n),n=cR(this._dataReader,"Transaction.set",t._key,e,null!==t.converter,n);return this._transaction.set(t._key,n),this},qP.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=AP(t,this._firestore),e="string"==typeof(e=ta(e))||e instanceof HA?kR(this._dataReader,"Transaction.update",t._key,e,n,r):CR(this._dataReader,"Transaction.update",t._key,e);return this._transaction.update(t._key,e),this},qP.prototype.delete=function(t){t=AP(t,this._firestore);return this._transaction.delete(t._key),this},Xi(jP,FP=qP),jP.prototype.get=function(t){var e=this,n=AP(t,this._firestore),r=new PP(this._firestore);return FP.prototype.get.call(this,t).then(function(t){return new zR(e._firestore,r,n._key,t._document,new GR(!1,!1),n.converter)})},jP);function jP(t,e){var n=this;return(n=FP.call(this,t,e)||this)._firestore=t,n}function qP(t,e){this._firestore=t,this._transaction=e,this._dataReader=uR(t)}function VP(){if("undefined"==typeof Uint8Array)throw new nb(eb.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function BP(){if("undefined"==typeof atob)throw new nb(eb.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var KP,WP=(JP.fromBase64String=function(t){return BP(),new JP(GA.fromBase64String(t))},JP.fromUint8Array=function(t){return VP(),new JP(GA.fromUint8Array(t))},JP.prototype.toBase64=function(){return BP(),this._delegate.toBase64()},JP.prototype.toUint8Array=function(){return VP(),this._delegate.toUint8Array()},JP.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},JP.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},JP),HP=(XP.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){WA(t=gA(t,UA));var n=VA(t),r=t._freezeSettings(),t=new IN;return KA(n,t,new _N(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},XP.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){WA(t=gA(t,UA));var e=VA(t),n=t._freezeSettings(),t=new IN;return KA(e,t,new wN(t,n.cacheSizeBytes))}(t._delegate)},XP.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n._initialized&&!n._terminated)throw new nb(eb.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new CT;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return AT.yt()?(e=n+"main",[4,AT.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(gS(n._databaseId,n._persistenceKey))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t._delegate)},XP),GP=(Object.defineProperty(YP.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),YP.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},YP.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=gA(t,_A))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&ub("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){n=po(r.mockUserToken),r=r.mockUserToken.sub||r.mockUserToken.user_id;if(!r)throw new nb(eb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new tA(new YN(n,new XS(r)))}}(this._delegate,t,e,n)},YP.prototype.enableNetwork=function(){return function(i){var t=this;return i.asyncQueue.enqueue(function(){return $i(t,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,BN(i)];case 1:return n=t.sent(),[4,WN(i)];case 2:return r=t.sent(),[2,(n.setNetworkEnabled(!0),(e=r).$r.delete(0),tk(e))]}var e})})})}(VA(gA(this._delegate,UA)))},YP.prototype.disableNetwork=function(){return function(r){var t=this;return r.asyncQueue.enqueue(function(){return $i(t,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,BN(r)];case 1:return e=t.sent(),[4,WN(r)];case 2:return n=t.sent(),[2,(e.setNetworkEnabled(!1),function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=n).$r.add(0),[4,ek(e)];case 1:return t.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(VA(gA(this._delegate,UA)))},YP.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&fA("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},YP.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},YP.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},YP.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new CT;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=eN,[4,HN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(VA(gA(this._delegate,UA)))},YP.prototype.onSnapshotsInSync=function(t){return e=this._delegate,t=t,function(n,t){var e=this,r=new NN(t);return n.asyncQueue.enqueueAndForget(function(){return $i(e,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Gr.add(e),e.next()},[4,GN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.Wo(),n.asyncQueue.enqueueAndForget(function(){return $i(e,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Gr.delete(e)},[4,GN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(VA(gA(e,UA)),LA(t)?t:{next:t});var e},Object.defineProperty(YP.prototype,"app",{get:function(){if(!this.Xc)throw new nb(eb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),YP.prototype.collection=function(t){try{return new gO(this,AA(this._delegate,t))}catch(t){throw aO(t,"collection()","Firestore.collection()")}},YP.prototype.doc=function(t){try{return new iO(this,RA(this._delegate,t))}catch(t){throw aO(t,"doc()","Firestore.doc()")}},YP.prototype.collectionGroup=function(t){try{return new pO(this,function(t,e){if(t=gA(t,_A),hA("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new nb(eb.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new IA(t,null,(e=e,new W_(Cb.emptyPath(),e)))}(this._delegate,t))}catch(t){throw aO(t,"collectionGroup()","Firestore.collectionGroup()")}},YP.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new CT;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,VN(n).then(function(t){return t.datastore})];case 1:return e=t.sent(),new PN(n.asyncQueue,e,r,i).run(),[2]}})})}),i.promise}(VA(n=this._delegate),function(t){return t=new UP(n,t),e(new $P(r,t))})},YP.prototype.batch=function(){var e=this;return VA(this._delegate),new ZP(new CP(this._delegate,function(t){return LP(e._delegate,t)}))},YP.prototype.loadBundle=function(t){throw new nb(eb.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},YP.prototype.namedQuery=function(t){throw new nb(eb.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},YP),zP=(Xi(QP,KP=G),QP.prototype.convertBytes=function(t){return new WP(new GA(t))},QP.prototype.convertReference=function(t){t=this.convertDocumentKey(t,this.firestore._databaseId);return iO.Zc(t,this.firestore,null)},QP);function QP(t){var e=this;return(e=KP.call(this)||this).firestore=t,e}function YP(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof JN||(this.Xc=t)}function XP(){}function JP(t){this._delegate=t}var $P=(rO.prototype.get=function(t){var e=this,n=TO(t);return this._delegate.get(n).then(function(t){return new lO(e._firestore,new zR(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},rO.prototype.set=function(t,e,n){t=TO(t);return n?(lA("Transaction.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},rO.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=TO(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,no([o,e,n],r)),this},rO.prototype.delete=function(t){t=TO(t);return this._delegate.delete(t),this},rO),ZP=(nO.prototype.set=function(t,e,n){t=TO(t);return n?(lA("WriteBatch.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},nO.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=TO(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,no([o,e,n],r)),this},nO.prototype.delete=function(t){t=TO(t);return this._delegate.delete(t),this},nO.prototype.commit=function(){return this._delegate.commit()},nO),tO=(eO.prototype.fromFirestore=function(t,e){t=new QR(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new fO(this._firestore,t),null!=e?e:{})},eO.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},eO.tu=function(t,e){var n=eO.eu,r=n.get(t);r||(r=new WeakMap,n.set(t,r));n=r.get(e);return n||(n=new eO(t,new zP(t),e),r.set(e,n)),n},eO);function eO(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}function nO(t){this._delegate=t}function rO(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new zP(t)}tO.eu=new WeakMap;var iO=(oO.nu=function(t,e,n){if(t.length%2!=0)throw new nb(eb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new oO(e,new wA(e._delegate,n,new Hb(t)))},oO.Zc=function(t,e,n){return new oO(e,new wA(e._delegate,n,t))},Object.defineProperty(oO.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(oO.prototype,"parent",{get:function(){return new gO(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(oO.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),oO.prototype.collection=function(t){try{return new gO(this.firestore,AA(this._delegate,t))}catch(t){throw aO(t,"collection()","DocumentReference.collection()")}},oO.prototype.isEqual=function(t){return(t=ta(t))instanceof wA&&PA(this._delegate,t)},oO.prototype.set=function(t,e){e=lA("DocumentReference.set",e);try{return function(t,e,n){t=gA(t,wA);var r=gA(t.firestore,UA),e=TP(t.converter,e,n);return LP(r,[cR(uR(r),"setDoc",t._key,e,null!==t.converter,n).toMutation(t._key,Nw.none())])}(this._delegate,t,e)}catch(t){throw aO(t,"setDoc()","DocumentReference.set()")}},oO.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?DP(this._delegate,t):DP.apply(void 0,no([this._delegate,t,e],n))}catch(t){throw aO(t,"updateDoc()","DocumentReference.update()")}},oO.prototype.delete=function(){return LP(gA((t=this._delegate).firestore,UA),[new zw(t._key,Nw.none())]);var t},oO.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=sO(t),i=uO(t,function(t){return new lO(e.firestore,new zR(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return xP(this._delegate,r,i)},oO.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=gA(e,wA);var n=gA(e.firestore,UA),t=VA(n),r=new PP(n);return function(n,r){var t=this,i=new CT;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(o,a,s){return $i(this,void 0,void 0,function(){var r,i;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=a,(n=o).persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)}))];case 1:return(i=t.sent()).isFoundDocument()?s.resolve(i):i.isNoDocument()?s.resolve(null):s.reject(new nb(eb.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),i=wk(r,"Failed to get document '"+a+" from cache"),s.reject(i),[3,3];case 3:return[2]}var e,n})})},[4,KN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e._key).then(function(t){return new zR(n,r,e._key,t,new GR(null!==t&&t.hasLocalMutations,!0),e.converter)})}:"server"===(null==t?void 0:t.source)?function(e){e=gA(e,wA);var n=gA(e.firestore,UA);return zN(VA(n),e._key,{source:"server"}).then(function(t){return MP(n,e,t)})}:function(e){e=gA(e,wA);var n=gA(e.firestore,UA);return zN(VA(n),e._key).then(function(t){return MP(n,e,t)})})(this._delegate).then(function(t){return new lO(e.firestore,new zR(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},oO.prototype.withConverter=function(t){return new oO(this.firestore,t?this._delegate.withConverter(tO.tu(this.firestore,t)):this._delegate.withConverter(null))},oO);function oO(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new zP(t)}function aO(t,e,n){return t.message=t.message.replace(e,n),t}function sO(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!LA(r))return r}return{}}function uO(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=LA(t[0])?t[0]:LA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var cO,hO,lO=(Object.defineProperty(IO.prototype,"ref",{get:function(){return new iO(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(IO.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(IO.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(IO.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),IO.prototype.data=function(t){return this._delegate.data(t)},IO.prototype.get=function(t,e){return this._delegate.get(t,e)},IO.prototype.isEqual=function(t){return tP(this._delegate,t._delegate)},IO),fO=(Xi(wO,hO=lO),wO.prototype.data=function(t){return this._delegate.data(t)},wO),pO=(_O.prototype.where=function(t,e,n){try{return new _O(this.firestore,nP(this._delegate,(r=n,i=e,o=KR("where",t),new uP(o,i,r))))}catch(t){throw aO(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},_O.prototype.orderBy=function(t,e){try{return new _O(this.firestore,nP(this._delegate,(n=void 0===e?"asc":e,r=KR("orderBy",t),new cP(r,n))))}catch(t){throw aO(t,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},_O.prototype.limit=function(t){try{return new _O(this.firestore,nP(this._delegate,(yA("limit",e=t),new hP("limit",e,"F"))))}catch(t){throw aO(t,"limit()","Query.limit()")}var e},_O.prototype.limitToLast=function(t){try{return new _O(this.firestore,nP(this._delegate,(yA("limitToLast",e=t),new hP("limitToLast",e,"L"))))}catch(t){throw aO(t,"limitToLast()","Query.limitToLast()")}var e},_O.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new _O(this.firestore,nP(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lP("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw aO(t,"startAt()","Query.startAt()")}},_O.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new _O(this.firestore,nP(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lP("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw aO(t,"startAfter()","Query.startAfter()")}},_O.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new _O(this.firestore,nP(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fP("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw aO(t,"endBefore()","Query.endBefore()")}},_O.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new _O(this.firestore,nP(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fP("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw aO(t,"endAt()","Query.endAt()")}},_O.prototype.isEqual=function(t){return OA(this._delegate,t._delegate)},_O.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=gA(e,IA);var n=gA(e.firestore,UA),t=VA(n),r=new PP(n);return function(n,r){var t=this,i=new CT;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(i,o,a){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,xS(i,o,!0)];case 1:return r=t.sent(),e=new Wk(o,r.Bn),n=e._o(r.documents),n=e.applyChanges(n,!1),a.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),r=wk(n,"Failed to execute query '"+o+" against cache"),a.reject(r),[3,3];case 3:return[2]}})})},[4,KN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e._query).then(function(t){return new YR(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=gA(e,IA);var n=gA(e.firestore,UA),t=VA(n),r=new PP(n);return QN(t,e._query,{source:"server"}).then(function(t){return new YR(n,r,e,t)})}:function(e){e=gA(e,IA);var n=gA(e.firestore,UA),t=VA(n),r=new PP(n);return eP(e._query),QN(t,e._query).then(function(t){return new YR(n,r,e,t)})})(this._delegate).then(function(t){return new vO(e.firestore,new YR(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},_O.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=sO(t),i=uO(t,function(t){return new vO(e.firestore,new YR(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return xP(this._delegate,r,i)},_O.prototype.withConverter=function(t){return new _O(this.firestore,t?this._delegate.withConverter(tO.tu(this.firestore,t)):this._delegate.withConverter(null))},_O),dO=(Object.defineProperty(bO.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(bO.prototype,"doc",{get:function(){return new fO(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(bO.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(bO.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),bO),vO=(Object.defineProperty(mO.prototype,"query",{get:function(){return new pO(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(mO.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(mO.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(mO.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(mO.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new fO(e._firestore,t)})},enumerable:!1,configurable:!0}),mO.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new dO(e._firestore,t)})},mO.prototype.forEach=function(e,n){var r=this;this._delegate.forEach(function(t){e.call(n,new fO(r._firestore,t))})},mO.prototype.isEqual=function(t){return tP(this._delegate,t._delegate)},mO),gO=(Xi(yO,cO=pO),Object.defineProperty(yO.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(yO.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(yO.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new iO(this.firestore,t):null},enumerable:!1,configurable:!0}),yO.prototype.doc=function(t){try{return new iO(this.firestore,void 0===t?RA(this._delegate):RA(this._delegate,t))}catch(t){throw aO(t,"doc()","CollectionReference.doc()")}},yO.prototype.add=function(t){var e,n,r,i=this;return e=this._delegate,n=t,t=gA(e.firestore,UA),r=RA(e),n=TP(e.converter,n),LP(t,[cR(uR(e.firestore),"addDoc",r._key,n,null!==e.converter,{}).toMutation(r._key,Nw.exists(!1))]).then(function(){return r}).then(function(t){return new iO(i.firestore,t)})},yO.prototype.isEqual=function(t){return PA(this._delegate,t._delegate)},yO.prototype.withConverter=function(t){return new yO(this.firestore,t?this._delegate.withConverter(tO.tu(this.firestore,t)):this._delegate.withConverter(null))},yO);function yO(t,e){var n=this;return(n=cO.call(this,t,e)||this).firestore=t,n._delegate=e,n}function mO(t,e){this._firestore=t,this._delegate=e}function bO(t,e){this._firestore=t,this._delegate=e}function _O(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new zP(t)}function wO(){return null!==hO&&hO.apply(this,arguments)||this}function IO(t,e){this._firestore=t,this._delegate=e}function TO(t){return gA(t,wA)}SO.documentId=function(){return new SO(Nb.keyField().canonicalString())},SO.prototype.isEqual=function(t){return(t=ta(t))instanceof HA&&this._delegate._internalPath.isEqual(t._internalPath)},Sn=SO,EO.serverTimestamp=function(){var t=new mR("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new EO(t)},EO.delete=function(){var t=new lR("deleteField");return t._methodName="FieldValue.delete",new EO(t)},EO.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bR("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new EO(n)},EO.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _R("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new EO(n)},EO.increment=function(t){t=new wR("increment",t);return t._methodName="FieldValue.increment",new EO(t)},EO.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},G=EO;function EO(t){this._delegate=t}function SO(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(HA.bind.apply(HA,no([void 0],t)))}function CO(t){return e=this._delegate,a=t,n=VA(e=gA(e,UA)),t=new FA,function(n,t,r){var e,i=this,o=(e=a,t=UC(t),e=function(t){if(t instanceof Uint8Array)return kN(t,void 0);if(t instanceof ArrayBuffer)return kN(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new AN(e,t));n.asyncQueue.enqueueAndForget(function(){return $i(i,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=gN,[4,HN(n)];case 1:return e.apply(void 0,[t.sent(),o,r]),[2]}})})})}(n,e._databaseId,t),t;var e,a,n}function kO(t){var e=this,n=this._delegate,t=t;return function(n,r){var t=this;return n.asyncQueue.enqueue(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Qe.getNamedQuery(t,e)})},[4,KN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}(VA(n=gA(n,UA)),t).then(function(t){return t?new IA(n,null,t.query):null}).then(function(t){return t?new pO(e,t):null})}var NO,AO,RO={Firestore:GP,GeoPoint:QA,Timestamp:yb,Blob:WP,Transaction:$P,WriteBatch:ZP,DocumentReference:iO,DocumentSnapshot:lO,Query:pO,QueryDocumentSnapshot:fO,QuerySnapshot:vO,CollectionReference:gO,FieldPath:Sn,FieldValue:G,setLogLevel:function(t){rb.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(NO=Xl).INTERNAL.registerComponent(new ea("firestore",function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new GP(e,new UA(e,t),new HP)},"PUBLIC").setServiceProps(Object.assign({},RO))),NO.registerVersion("@firebase/firestore","2.3.0"),(AO=GP).prototype.loadBundle=CO,AO.prototype.namedQuery=kO;var PO,OO={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},DO=(Xi(xO,PO=Error),xO);function xO(t,e,n){e=PO.call(this,e)||this;return Object.setPrototypeOf(e,xO.prototype),e.code=t,e.details=n,e}function LO(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!OO[s])return new DO("internal","internal");r=OO[s],i=s}s=a.message;"string"==typeof s&&(i=s),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new DO(r,i,o)}var MO=(FO.prototype.getAuthToken=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},FO.prototype.getInstanceIdToken=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},FO.prototype.getContext=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},FO);function FO(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function UO(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var jO=(qO.prototype.encode=function(t){var e=this;if(null==t)return null;if("number"==typeof(t=t instanceof Number?t.valueOf():t)&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return UO(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},qO.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?UO(t,function(t){return e.decode(t)}):t},qO);function qO(){}var VO=(Object.defineProperty(BO.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),BO.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},BO.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},BO.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},BO.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},BO.prototype.postJSON=function(i,o,a){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return a["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(e=t.sent())&&(a["X-Firebase-AppCheck"]=e),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.fetchImpl(i,{method:"POST",body:JSON.stringify(o),headers:a})];case 3:return n=t.sent(),[3,5];case 4:return t.sent(),[2,{status:0,json:null}];case 5:r=null,t.label=6;case 6:return t.trys.push([6,8,,9]),[4,n.json()];case 7:return r=t.sent(),[3,9];case 8:return t.sent(),[3,9];case 9:return[2,{status:n.status,json:r}]}})})},BO.prototype.getAppCheckToken=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=this.appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}})})},BO.prototype.call=function(c,h,l){return $i(this,void 0,void 0,function(){var i,o,a,s,u;return Zi(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},a={},[4,this.contextProvider.getContext()];case 1:return(s=t.sent()).authToken&&(a.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=s.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new DO("deadline-exceeded","deadline-exceeded"))},n)}),u=(s={timer:r,promise:e}).timer,s=s.promise,[4,Promise.race([KO(u,this.postJSON(i,o,a)),s,KO(u,this.cancelAllRequests)])];case 2:if(!(s=t.sent()))throw new DO("cancelled","Firebase Functions instance was deleted.");if(u=LO(s.status,s.json,this.serializer))throw u;if(!s.json)throw new DO("internal","Response is not valid JSON object.");if(void 0===(u=void 0===(u=s.json.data)?s.json.result:u))throw new DO("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},BO);function BO(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new jO,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new MO(e,n),this.cancelAllRequests=new Promise(function(t){a.deleteService=function(){return t()}});try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=i}}function KO(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var WO,HO,GO;function zO(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function QO(n,r,i){var o,t=new Promise(function(t,e){zO(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function YO(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function XO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return QO(this[n],t,arguments)})})}function JO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function $O(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=QO(t,n,arguments)).then(function(t){if(t)return new tD(t,e.request)});var t,e})})}function ZO(t){this._index=t}function tD(t,e){this._cursor=t,this._request=e}function eD(t){this._store=t}function nD(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function rD(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new nD(n)}function iD(t){this._db=t}function oD(t,e,n){var e=QO(indexedDB,"open",[t,e]),r=e.request;return r&&(r.onupgradeneeded=function(t){n&&n(new rD(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new iD(t)})}function aD(t){return QO(indexedDB,"deleteDatabase",[t])}WO=Xl,HO=fetch.bind(self),GO={Functions:VO},WO.INTERNAL.registerComponent(new ea("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),e=t.getProvider("app-check-internal"),t=t.getProvider("messaging");return new VO(r,i,t,e,n,HO)},"PUBLIC").setServiceProps(GO).setMultipleInstances(!0)),Xl.registerVersion("@firebase/functions","0.6.8"),YO(ZO,"_index",["name","keyPath","multiEntry","unique"]),XO(ZO,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),$O(ZO,"_index",IDBIndex,["openCursor","openKeyCursor"]),YO(tD,"_cursor",["direction","key","primaryKey","value"]),XO(tD,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(tD.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),zO(e._request).then(function(t){if(t)return new tD(t,e._request)})})})}),eD.prototype.createIndex=function(){return new ZO(this._store.createIndex.apply(this._store,arguments))},eD.prototype.index=function(){return new ZO(this._store.index.apply(this._store,arguments))},YO(eD,"_store",["name","keyPath","indexNames","autoIncrement"]),XO(eD,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),$O(eD,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),JO(eD,"_store",IDBObjectStore,["deleteIndex"]),nD.prototype.objectStore=function(){return new eD(this._tx.objectStore.apply(this._tx,arguments))},YO(nD,"_tx",["objectStoreNames","mode"]),JO(nD,"_tx",IDBTransaction,["abort"]),rD.prototype.createObjectStore=function(){return new eD(this._db.createObjectStore.apply(this._db,arguments))},YO(rD,"_db",["name","version","objectStoreNames"]),JO(rD,"_db",IDBDatabase,["deleteObjectStore","close"]),iD.prototype.transaction=function(){return new nD(this._db.transaction.apply(this._db,arguments))},YO(iD,"_db",["name","version","objectStoreNames"]),JO(iD,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[eD,ZO].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[ZO,eD].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var sD=1e4,uD="w:0.4.26",cD="FIS_v2",hD="https://firebaseinstallations.googleapis.com/v1",lD=36e5,G=((Sn={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Sn["not-registered"]="Firebase Installation is not registered.",Sn["installation-not-found"]="Firebase Installation not found.",Sn["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Sn["app-offline"]="Could not process request. Application offline.",Sn["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Sn),fD=new ko("installations","Installations",G);function pD(t){return t instanceof So&&t.code.includes("request-failed")}function dD(t){t=t.projectId;return hD+"/projects/"+t+"/installations"}function vD(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function gD(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent(),e=e.error,[2,fD.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function yD(t){t=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mD(t,e){e=e.refreshToken,t=yD(t);return t.append("Authorization",cD+" "+e),t}function bD(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function _D(e){return new Promise(function(t){setTimeout(t,e)})}var wD=/^[cdef][\w-]{21}$/,ID="";function TD(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;t=function(t){return btoa(String.fromCharCode.apply(String,no([],eo(t)))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return wD.test(t)?t:ID}catch(t){return ID}}function ED(t){return t.appName+"!"+t.appId}var SD=new Map;function CD(t,e){t=ED(t);kD(t,e),function(t,e){var n=AD();n&&n.postMessage({key:t,fid:e});RD()}(t,e)}function kD(t,e){var n,r,i=SD.get(t);if(i)try{for(var o=to(i),a=o.next();!a.done;a=o.next())(0,a.value)(e)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var ND=null;function AD(){return!ND&&"BroadcastChannel"in self&&((ND=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){kD(t.data.key,t.data.fid)}),ND}function RD(){0===SD.size&&ND&&(ND.close(),ND=null)}var PD,OD="firebase-installations-database",DD=1,xD="firebase-installations-store",LD=null;function MD(){return LD=LD||oD(OD,DD,function(t){0===t.oldVersion&&t.createObjectStore(xD)})}function FD(o,a){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return e=ED(o),[4,MD()];case 1:return r=t.sent(),n=r.transaction(xD,"readwrite"),[4,(r=n.objectStore(xD)).get(e)];case 2:return i=t.sent(),[4,r.put(a,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===a.fid||CD(o,a.fid),[2,a]}})})}function UD(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=ED(r),[4,MD()];case 1:return n=t.sent(),[4,(n=n.transaction(xD,"readwrite")).objectStore(xD).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function jD(a,s){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=ED(a),[4,MD()];case 1:return r=t.sent(),n=r.transaction(xD,"readwrite"),[4,(r=n.objectStore(xD)).get(e)];case 2:return i=t.sent(),void 0!==(o=s(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||CD(a,o.fid),[2,o]}})})}function qD(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,jD(i,function(t){t=BD(t||{fid:TD(),registrationStatus:0}),t=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,VD(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,_D(100)];case 3:return t.sent(),[4,VD(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,qD(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(fD.create("app-offline"));return{installationEntry:e,registrationPromise:n}}e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},t=function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a,t){var s=t.fid;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=dD(a),n=yD(a),o={fid:s,authVersion:cD,appId:a.appId,sdkVersion:uD},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,bD(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,{fid:o.fid||s,registrationStatus:2,refreshToken:o.refreshToken,authToken:vD(o.authToken)}];case 3:return[4,gD("Create Installation",i)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,FD(r,e)];case 2:return pD(n=t.sent())&&409===n.customData.serverCode?[4,UD(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,FD(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,e);return{installationEntry:e,registrationPromise:t}}}(i,t);return e=t.registrationPromise,t.installationEntry})];case 1:return(n=t.sent()).fid!==ID?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=t.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function VD(t){return jD(t,function(t){if(!t)throw fD.create("installation-not-found");return BD(t)})}function BD(t){return 1===(e=t).registrationStatus&&e.registrationTime+sD<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function KD(t,a){var s=t.appConfig,u=t.platformLoggerProvider;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return dD(t)+"/"+e+"/authTokens:generate"}(s,a),n=mD(s,a),(o=u.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),o={installation:{sdkVersion:uD}},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,bD(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,vD(o)];case 3:return[4,gD("Generate Auth Token",i)];case 4:throw t.sent()}})})}function WD(i,o){return void 0===o&&(o=!1),$i(this,void 0,void 0,function(){var r,e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,jD(i.appConfig,function(t){if(!GD(t))throw fD.create("not-registered");var e,n=t.authToken;if(o||2!==(e=n).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+lD}(e)){if(1===n.requestStatus)return r=function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,HD(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,_D(100)];case 3:return t.sent(),[4,HD(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,WD(n,r)]:[2,e]}})})}(i,o),t;if(!navigator.onLine)throw fD.create("app-offline");n=(e=t,n={requestStatus:1,requestTime:Date.now()},Ji(Ji({},e),{authToken:n}));return r=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,KD(i,o)];case 1:return e=t.sent(),r=Ji(Ji({},o),{authToken:e}),[4,FD(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!pD(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,UD(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Ji(Ji({},o),{authToken:{requestStatus:0}}),[4,FD(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return t})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function HD(t){return jD(t,function(t){if(!GD(t))throw fD.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+sD<Date.now()?Ji(Ji({},t),{authToken:{requestStatus:0}}):t})}function GD(t){return void 0!==t&&2===t.registrationStatus}function zD(e,n){return void 0===n&&(n=!1),$i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,qD(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,WD(e,n)];case 2:return[2,t.sent().token]}})})}function QD(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return dD(t)+"/"+e}(i,o),r=mD(i,o),n={method:"DELETE",headers:r},[4,bD(function(){return fetch(e,n)})];case 1:return(r=t.sent()).ok?[3,3]:[4,gD("Delete Installation",r)];case 2:throw t.sent();case 3:return[2]}})})}function YD(t,r){var i=t.appConfig;return function(t,e){AD();var n=ED(t);(t=SD.get(n))||(t=new Set,SD.set(n,t)),t.add(e)}(i,r),function(){var t,e,n;e=r,n=ED(t=i),(t=SD.get(n))&&(t.delete(e),0===t.size&&SD.delete(n),RD())}}function XD(t){return fD.create("missing-app-config-values",{valueName:t})}(PD=Xl).INTERNAL.registerComponent(new ea("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw XD("App Configuration");if(!t.name)throw XD("App Name");try{for(var r=to(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw XD(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,qD(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||WD(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return zD(n,t)},delete:function(){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,jD(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw fD.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw fD.create("app-offline");case 3:return[4,QD(e,n)];case 4:return t.sent(),[4,UD(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return YD(n,t)}}},"PUBLIC")),PD.registerVersion("@firebase/installations","0.4.26");var JD,G=((Sn={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Sn["only-available-in-window"]="This method is available in a Window context.",Sn["only-available-in-sw"]="This method is available in a service worker context.",Sn["permission-default"]="The notification permission was not granted and dismissed instead.",Sn["permission-blocked"]="The notification permission was not granted and blocked instead.",Sn["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Sn["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Sn["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Sn["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Sn["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Sn["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Sn["token-update-no-token"]="FCM returned no token when updating the user to push.",Sn["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Sn["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Sn["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Sn["invalid-vapid-key"]="The public VAPID key must be a string.",Sn["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Sn),$D=new ko("messaging","Messaging",G),ZD="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",tx="https://fcmregistrations.googleapis.com/v1",ex="FCM_MSG",nx="google.c.a.c_id";function rx(t){t=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,no([],eo(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(Sn=JD=JD||{}).PUSH_RECEIVED="push-received",Sn.NOTIFICATION_CLICKED="notification-clicked";var ix="fcm_token_details_db",ox=5,ax="fcm_token_object_Store";function sx(a){return $i(this,void 0,void 0,function(){var e,o,n=this;return Zi(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(ix))return[2,null];t.label=2;case 2:return o=null,[4,oD(ix,ox,function(i){return $i(n,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(ax)?[4,(r=i.transaction.objectStore(ax)).index("fcmSenderId").get(a)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:rx(n.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:rx(n.auth),p256dh:rx(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:rx(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,aD(ix)];case 4:return t.sent(),[4,aD("fcm_vapid_details_db")];case 5:return t.sent(),[4,aD("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(o)?o:null]}})})}var ux="firebase-messaging-database",cx=1,hx="firebase-messaging-store",lx=null;function fx(){return lx=lx||oD(ux,cx,function(t){0===t.oldVersion&&t.createObjectStore(hx)})}function px(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=vx(r),[4,fx()];case 1:return[4,t.sent().transaction(hx).objectStore(hx).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,sx(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,dx(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function dx(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=vx(r),[4,fx()];case 1:return n=t.sent(),[4,(n=n.transaction(hx,"readwrite")).objectStore(hx).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function vx(t){return t.appConfig.appId}function gx(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,mx(r)];case 1:e=t.sent(),e={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(yx(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,$D.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),$D.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function yx(t){t=t.projectId;return tx+"/projects/"+t+"/registrations"}function mx(t){var n=t.appConfig,r=t.installations;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function bx(t){var e=t.p256dh,n=t.auth,r=t.endpoint,t=t.vapidKey,e={web:{endpoint:r,auth:n,p256dh:e}};return t!==ZD&&(e.web.applicationPubKey=t),e}function _x(c,h,l){return $i(this,void 0,void 0,function(){var a,s,u;return Zi(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw $D.create("permission-blocked");return[4,function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(h,l)];case 1:return u=t.sent(),[4,px(c)];case 2:return a=t.sent(),s={vapidKey:l,swScope:h.scope,endpoint:u.endpoint,auth:rx(u.getKey("auth")),p256dh:rx(u.getKey("p256dh"))},a?[3,3]:[2,Ix(c,s)];case 3:if(e=a.subscriptionOptions,r=(n=s).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,e=n.p256dh===e.p256dh,r&&i&&o&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,gx(c,a.token)];case 5:return t.sent(),[3,7];case 6:return u=t.sent(),console.warn(u),[3,7];case 7:return[2,Ix(c,s)];case 8:return Date.now()>=a.createTime+6048e5?[2,function(i,o,a){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,a){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,mx(o)];case 1:e=t.sent(),n=bx(a.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(yx(o.appConfig)+"/"+a.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),$D.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,$D.create("token-update-failed",{errorInfo:i});if(!r.token)throw $D.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=Ji(Ji({},i),{token:e,createTime:Date.now()}),[4,dx(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,wx(o,a)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:a.token,createTime:Date.now(),subscriptionOptions:s},c,h)]:[2,a.token];case 9:return[2]}var e,n,r,i,o})})}function wx(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,px(n)];case 1:return(e=t.sent())?[4,gx(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=vx(r),[4,fx()];case 1:return n=t.sent(),[4,(n=n.transaction(hx,"readwrite")).objectStore(hx).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function Ix(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,function(o,a){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,mx(o)];case 1:e=t.sent(),n=bx(a),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(yx(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),$D.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,$D.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw $D.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e=t.sent(),e={token:e,createTime:Date.now(),subscriptionOptions:r},[4,dx(n,e)];case 2:return t.sent(),[2,e.token]}})})}function Tx(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var n=e.notification.title;n&&(t.notification.title=n);n=e.notification.body;n&&(t.notification.body=n);e=e.notification.image;e&&(t.notification.image=e)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);e=e.fcmOptions.analytics_label;e&&(t.fcmOptions.analyticsLabel=e)}(e,t),e}function Ex(t){return"object"==typeof t&&t&&nx in t}function Sx(e){return new Promise(function(t){setTimeout(t,e)})}var Cx=(Object.defineProperty(kx.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),kx.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw $D.create("invalid-bg-handler");this.bgMessageHandler=t},kx.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},kx.prototype.getToken=function(){var n;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,px(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:ZD,t.label=2;case 2:return[2,_x(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},kx.prototype.deleteToken=function(){return wx(this.firebaseDependencies,self.registration)},kx.prototype.requestPermission=function(){throw $D.create("only-available-in-window")},kx.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw $D.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw $D.create("invalid-vapid-key");this.vapidKey=t},kx.prototype.useServiceWorker=function(){throw $D.create("only-available-in-window")},kx.prototype.onMessage=function(){throw $D.create("only-available-in-window")},kx.prototype.onTokenRefresh=function(){throw $D.create("only-available-in-window")},kx.prototype.onPush=function(s){return $i(this,void 0,void 0,function(){var i,o,a;return Zi(this,function(t){switch(t.label){case 0:return(a=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(s))?[4,Nx()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(i=t.sent(),i.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=JD.PUSH_RECEIVED;try{for(var i=to(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(i,a)]:(o=!1,a.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((r=Ji({},(e=a).notification)).data=((n={})[ex]=e,n),r))]:[3,3]);case 2:t.sent(),o=!0,t.label=3;case 3:return!0===o&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(a=Tx(a),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(a):this.bgMessageHandler.next(a)),[4,Sx(1e3)]);case 4:return t.sent(),[2]}var e,n,r})})},kx.prototype.onSubChange=function(n){var r;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,wx(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,px(this.firebaseDependencies)];case 3:return e=t.sent(),[4,wx(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,_x(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:ZD)];case 5:return t.sent(),[2]}})})},kx.prototype.onNotificationClick=function(a){var s;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return(e=null===(s=null===(s=a.notification)||void 0===s?void 0:s.data)||void 0===s?void 0:s[ex])?a.action?[2]:(a.stopImmediatePropagation(),a.notification.close(),(n=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;if(n)return n;return Ex(t.data)?self.location.origin:null}(e))?(r=new URL(n,self.location.href),i=new URL(self.location.origin),r.host!==i.host?[2]:[4,function(u){return $i(this,void 0,void 0,function(){var e,n,r,i,o,a,s;return Zi(this,function(t){switch(t.label){case 0:return[4,Nx()];case 1:e=t.sent();try{for(n=to(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){a={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}(r)]):[2]):[2];case 1:return(o=t.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return o=t.sent(),[4,Sx(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=t.sent(),t.label=6;case 6:return o?(e.messageType=JD.NOTIFICATION_CLICKED,e.isFirebaseMessaging=!0,[2,o.postMessage(e)]):[2]}})})},kx);function kx(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function Nx(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var Ax=(Object.defineProperty(Rx.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),Rx.prototype.messageEventListener=function(i){return $i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===JD.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),Ex(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},Rx.prototype.getVapidKey=function(){return this.vapidKey},Rx.prototype.getSwReg=function(){return this.swRegistration},Rx.prototype.getToken=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw $D.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,_x(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},Rx.prototype.updateVapidKey=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=ZD),[2]})})},Rx.prototype.updateSwReg=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw $D.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},Rx.prototype.registerDefaultSw=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),$D.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},Rx.prototype.deleteToken=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,wx(this.firebaseDependencies,this.swRegistration)]}})})},Rx.prototype.requestPermission=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?$D.create("permission-blocked"):$D.create("permission-default")}})})},Rx.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw $D.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw $D.create("invalid-vapid-key");this.vapidKey=t},Rx.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw $D.create("invalid-sw-registration");if(this.swRegistration)throw $D.create("use-sw-after-get-token");this.swRegistration=t},Rx.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},Rx.prototype.setBackgroundMessageHandler=function(){throw $D.create("only-available-in-sw")},Rx.prototype.onBackgroundMessage=function(){throw $D.create("only-available-in-sw")},Rx.prototype.onTokenRefresh=function(){return function(){}},Rx.prototype.logEvent=function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case JD.NOTIFICATION_CLICKED:return"notification_open";case JD.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[nx],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},Rx);function Rx(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function Px(t){return $D.create("missing-app-config-values",{valueName:t})}G={isSupported:Ox};function Ox(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Xl.INTERNAL.registerComponent(new ea("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw Px("App Configuration Object");if(!t.name)throw Px("App Name");var r=t.options;try{for(var i=to(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw Px(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Ox())throw $D.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?Cx:Ax)(t)},"PUBLIC").setServiceProps(G));var Dx,xx="firebasestorage.googleapis.com",Lx="storageBucket",Mx=(Xi(Fx,Dx=So),Fx.prototype._codeEquals=function(t){return Ux(t)===this.code},Object.defineProperty(Fx.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),Fx);function Fx(t,e){t=Dx.call(this,Ux(t),"Firebase Storage: "+e+" ("+Ux(t)+")")||this;return t.customData={serverResponse:null},t._baseMessage=t.message,Object.setPrototypeOf(t,Fx.prototype),t}function Ux(t){return"storage/"+t}function jx(){return new Mx("unknown","An unknown error occurred, please check the error payload for server response.")}function qx(){return new Mx("canceled","User canceled the upload/download.")}function Vx(){return new Mx("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Bx(t){return new Mx("invalid-argument",t)}function Kx(){return new Mx("app-deleted","The Firebase app was deleted.")}function Wx(t){return new Mx("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hx(t,e){return new Mx("invalid-format","String does not match format '"+t+"': "+e)}function Gx(t){throw new Mx("internal-error","Internal error: "+t)}var zx={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Qx=function(t,e){this.data=t,this.contentType=e||null};function Yx(t,e){switch(t){case zx.RAW:return new Qx(Xx(e));case zx.BASE64:case zx.BASE64URL:return new Qx(Jx(t,e));case zx.DATA_URL:return new Qx(function(t){t=new $x(t);return t.base64?Jx(zx.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Hx(zx.DATA_URL,"Malformed data URL.")}return Xx(e)}(t.rest)}(e),new $x(e).contentType)}throw jx()}function Xx(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Jx(e,t){switch(e){case zx.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Hx(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case zx.BASE64URL:r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw Hx(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw Hx(e,"Invalid character found")}for(var o=new Uint8Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return o}var $x=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw Hx(zx.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var Zx,tL={STATE_CHANGED:"state_changed"},eL={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function nL(t){switch(t){case"running":case"pausing":case"canceling":return eL.RUNNING;case"paused":return eL.PAUSED;case"success":return eL.SUCCESS;case"canceled":return eL.CANCELED;case"error":default:return eL.ERROR}}(Sn=Zx=Zx||{})[Sn.NO_ERROR=0]="NO_ERROR",Sn[Sn.NETWORK_ERROR=1]="NETWORK_ERROR",Sn[Sn.ABORT=2]="ABORT";var rL=(iL.prototype.send=function(t,e,n,r){if(this.sent_)throw Gx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},iL.prototype.getErrorCode=function(){if(!this.sent_)throw Gx("cannot .getErrorCode() before sending");return this.errorCode_},iL.prototype.getStatus=function(){if(!this.sent_)throw Gx("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},iL.prototype.getResponseText=function(){if(!this.sent_)throw Gx("cannot .getResponseText() before sending");return this.xhr_.responseText},iL.prototype.abort=function(){this.xhr_.abort()},iL.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},iL.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},iL.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},iL);function iL(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Zx.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=Zx.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=Zx.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var oL=(aL.prototype.createXhrIo=function(){return new rL},aL);function aL(){}var sL=(Object.defineProperty(uL.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(uL.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),uL.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},uL.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},uL.makeFromBucketSpec=function(e,t){var n;try{n=uL.makeFromUrl(e,t)}catch(t){return new uL(e,"")}if(""===n.path)return n;throw new Mx("invalid-default-bucket","Invalid default bucket '"+e+"'.")},uL.makeFromUrl=function(t,e){var n=null,r="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=e.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+(e===xx?"(?:storage.googleapis.com|storage.cloud.google.com)":e)+"/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],h=c.regex.exec(t);if(h){n=new uL(h[c.indices.bucket],h[c.indices.path]||"");c.postModify(n);break}}if(null==n)throw new Mx("invalid-url","Invalid URL '"+t+"'.");return n},uL);function uL(t,e){this.bucket=t,this.path_=e}var cL=(hL.prototype.getPromise=function(){return this.promise_},hL.prototype.cancel=function(t){},hL);function hL(t){this.promise_=Promise.reject(t)}function lL(t){return"string"==typeof t||t instanceof String}function fL(t){return pL()&&t instanceof Blob}function pL(){return"undefined"!=typeof Blob}function dL(t,e,n,r){if(r<e)throw Bx("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw Bx("Invalid value for '"+t+"'. Expected "+n+" or less.")}function vL(t,e){var n=e.match(/^(\w+):\/\/.+/);return(null==(null==n?void 0:n[1])?"https://"+e:e)+"/v0"+t}function gL(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&");return r=r.slice(0,-1)}var yL=(mL.prototype.start_=function(){var e,n,t,r,i,o,a,s,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var a=c.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(t){i(t)}else null!==o?((n=jx()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?Kx:qx)()):i(n=new Mx("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function l(){return 2===a}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s||(s=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];s||(t||l()||o?f.call.apply(f,no([null,t],e)):(r<64&&(r*=2),p(1===a?(a=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,s||(null!==i?(t||(a=2),clearTimeout(i),p(0)):t||(a=1)))}this.canceled_?h(0,new bL(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new bL(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===Zx.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new bL(n,t))):(t=t.getErrorCode()===Zx.ABORT,r(!1,new bL(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=s=o=!(r=1),p(a=0),setTimeout(function(){o=!0,v(!0)},t),v)},mL.prototype.getPromise=function(){return this.promise_},mL.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},mL.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},mL);function mL(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var bL=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function _L(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(pL())return new Blob(t);throw new Mx("unsupported-environment","This browser doesn't seem to support creating Blobs")}var wL=(IL.prototype.size=function(){return this.size_},IL.prototype.type=function(){return this.type_},IL.prototype.slice=function(t,e){if(fL(this.data_)){var n=this.data_,r=(i=t,r=e,(n=n).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===r?null:new IL(r)}var i,r;return new IL(new Uint8Array(this.data_.buffer,t,e-t),!0)},IL.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(pL()){var n=t.map(function(t){return t instanceof IL?t.data_:t});return new IL(_L.apply(null,n))}var n=t.map(function(t){return lL(t)?Yx(zx.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new IL(i,!0)},IL.prototype.uploadData=function(){return this.data_},IL);function IL(t,e){var n=0,r="";fL(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}function TL(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function EL(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function SL(t,e){return e}var CL=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||SL},kL=null;function NL(){if(kL)return kL;var t=[];t.push(new CL("bucket")),t.push(new CL("generation")),t.push(new CL("metageneration")),t.push(new CL("name","fullPath",!0));var e=new CL("name");e.xform=function(t,e){return!lL(e=e)||e.length<2?e:EL(e)},t.push(e);e=new CL("size");return e.xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new CL("timeCreated")),t.push(new CL("updated")),t.push(new CL("md5Hash",null,!0)),t.push(new CL("cacheControl",null,!0)),t.push(new CL("contentDisposition",null,!0)),t.push(new CL("contentEncoding",null,!0)),t.push(new CL("contentLanguage",null,!0)),t.push(new CL("contentType",null,!0)),t.push(new CL("metadata","customMetadata",!0)),kL=t}function AL(n,r){Object.defineProperty(n,"ref",{get:function(){var t=n.bucket,e=n.fullPath,e=new sL(t,e);return r._makeStorageReference(e)}})}function RL(t,e,n){e=TL(e);if(null===e)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return AL(r,t),r}(t,e,n)}function PL(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var OL="prefixes",DL="items";function xL(t,e,n){n=TL(n);if(null===n)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[OL])for(var i=0,o=n[OL];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new sL(e,a));r.prefixes.push(s)}if(n[DL])for(var u=0,c=n[DL];u<c.length;u++){var h=c[u],s=t._makeStorageReference(new sL(e,h.name));r.items.push(s)}return r}(t,e,n)}var LL=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function ML(t){if(!t)throw jx()}function FL(n,r){return function(t,e){return ML(null!==(e=RL(n,e,r))),e}}function UL(n,r){return function(t,e){return ML(null!==(e=xL(n,r,e))),e}}function jL(r,i){return function(t,e){var n=RL(r,e,i);return ML(null!==n),function(r,t,i){if(null===(t=TL(t)))return null;if(!lL(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var o=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return vL("/b/"+o(e)+"/o/"+o(n),i)+gL({alt:"media",token:t})})[0]}(n,e,r.host)}}function qL(i){return function(t,e){var n,r=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?new Mx("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Mx("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new Mx("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new Mx("unauthorized","User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function VL(r){var i=qL(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new Mx("object-not-found","Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function BL(t,e,n){var r=vL(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,i=new LL(r,"GET",FL(t,n),i);return i.errorHandler=VL(e),i}function KL(t,e,n){n=Object.assign({},n);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function WL(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=KL(e,r,i),i="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+PL(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",s="\r\n--"+s+"--",r=wL.getBlob(i,r,s);if(null===r)throw Vx();s={name:u.fullPath},u=vL(o,t.host),o=t.maxUploadRetryTime,o=new LL(u,"POST",FL(t,n),o);return o.urlParams=s,o.headers=a,o.body=r.uploadData(),o.errorHandler=qL(e),o}var HL=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function GL(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){ML(!1)}return ML(!!n&&-1!==(e||["active"]).indexOf(n)),n}function zL(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=KL(e,r,i),i={name:a.fullPath},o=vL(o,t.host),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},n=PL(a,n),t=t.maxUploadRetryTime;t=new LL(o,"POST",function(t){var e;GL(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){ML(!1)}return ML(lL(e)),e},t);return t.urlParams=i,t.headers=r,t.body=n,t.errorHandler=qL(e),t}function QL(t,e,n,i){t=t.maxUploadRetryTime,t=new LL(n,"POST",function(t){var e=GL(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){ML(!1)}n||ML(!1);var r=Number(n);return ML(!isNaN(r)),new HL(r,i.size(),"final"===e)},t);return t.headers={"X-Goog-Upload-Command":"query"},t.errorHandler=qL(e),t}function YL(t,o,e,a,n,s,r,i){var u=new HL(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=a.size()),a.size()!==u.total)throw new Mx("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;0<n&&(h=Math.min(h,n));r=u.current,n=r+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},r=a.slice(r,n);if(null===r)throw Vx();n=o.maxUploadRetryTime,n=new LL(e,"POST",function(t,e){var n=GL(t,["active","final"]),r=u.current+h,i=a.size(),e="final"===n?FL(o,s)(t,e):null;return new HL(r,i,"final"===n,e)},n);return n.headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=qL(t),n}var XL=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(t=t,this.next=t.next,this.error=t.error,this.complete=t.complete)};function JL(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var $L=(ZL.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},ZL.prototype._shouldDoResumable=function(t){return 262144<t.size()},ZL.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},ZL.prototype._resolveToken=function(r){var i=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(t){var e=t[0],n=t[1];switch(i._state){case"running":r(e,n);break;case"canceling":i._transition("canceled");break;case"pausing":i._transition("paused")}})},ZL.prototype._createResumable=function(){var r=this;this._resolveToken(function(t,e){var n=zL(r._ref.storage,r._ref._location,r._mappings,r._blob,r._metadata),e=r._ref.storage._makeRequest(n,t,e);(r._request=e).getPromise().then(function(t){r._request=void 0,r._uploadUrl=t,r._needToFetchStatus=!1,r.completeTransitions_()},r._errorHandler)})},ZL.prototype._fetchStatus=function(){var r=this,i=this._uploadUrl;this._resolveToken(function(t,e){var n=QL(r._ref.storage,r._ref._location,i,r._blob),e=r._ref.storage._makeRequest(n,t,e);(r._request=e).getPromise().then(function(t){r._request=void 0,r._updateProgress(t.current),r._needToFetchStatus=!1,t.finalized&&(r._needToFetchMetadata=!0),r.completeTransitions_()},r._errorHandler)})},ZL.prototype._continueUpload=function(){var r=this,i=262144*this._chunkMultiplier,o=new HL(this._transferred,this._blob.size()),a=this._uploadUrl;this._resolveToken(function(t,e){var n;try{n=YL(r._ref._location,r._ref.storage,a,r._blob,i,r._mappings,o,r._makeProgressCallback())}catch(t){return r._error=t,void r._transition("error")}e=r._ref.storage._makeRequest(n,t,e);(r._request=e).getPromise().then(function(t){r._increaseMultiplier(),r._request=void 0,r._updateProgress(t.current),t.finalized?(r._metadata=t.metadata,r._transition("success")):r.completeTransitions_()},r._errorHandler)})},ZL.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},ZL.prototype._fetchMetadata=function(){var r=this;this._resolveToken(function(t,e){var n=BL(r._ref.storage,r._ref._location,r._mappings),e=r._ref.storage._makeRequest(n,t,e);(r._request=e).getPromise().then(function(t){r._request=void 0,r._metadata=t,r._transition("success")},r._metadataErrorHandler)})},ZL.prototype._oneShotUpload=function(){var r=this;this._resolveToken(function(t,e){var n=WL(r._ref.storage,r._ref._location,r._mappings,r._blob,r._metadata),e=r._ref.storage._makeRequest(n,t,e);(r._request=e).getPromise().then(function(t){r._request=void 0,r._metadata=t,r._updateProgress(r._blob.size()),r._transition("success")},r._errorHandler)})},ZL.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},ZL.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=qx(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},ZL.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(ZL.prototype,"snapshot",{get:function(){var t=nL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),ZL.prototype.on=function(t,e,n,r){var i=this,o=new XL(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},ZL.prototype.then=function(t,e){return this._promise.then(t,e)},ZL.prototype.catch=function(t){return this.then(null,t)},ZL.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},ZL.prototype._removeObserver=function(t){t=this._observers.indexOf(t);-1!==t&&this._observers.splice(t,1)},ZL.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},ZL.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(nL(this._state)){case eL.SUCCESS:JL(this._resolve.bind(null,this.snapshot))();break;case eL.CANCELED:case eL.ERROR:JL(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},ZL.prototype._notifyObserver=function(t){switch(nL(this._state)){case eL.RUNNING:case eL.PAUSED:t.next&&JL(t.next.bind(t,this.snapshot))();break;case eL.SUCCESS:t.complete&&JL(t.complete.bind(t))();break;case eL.CANCELED:case eL.ERROR:t.error&&JL(t.error.bind(t,this._error))();break;default:t.error&&JL(t.error.bind(t,this._error))()}},ZL.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},ZL.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},ZL.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},ZL);function ZL(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=NL(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var tM=(eM.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},eM.prototype._newRef=function(t,e){return new eM(t,e)},Object.defineProperty(eM.prototype,"root",{get:function(){var t=new sL(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"name",{get:function(){return EL(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;t=new sL(this._location.bucket,t);return new eM(this._service,t)},enumerable:!1,configurable:!0}),eM.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Wx(t)},eM);function eM(t,e){this._service=t,this._location=e instanceof sL?e:sL.makeFromUrl(e,t.host)}function nM(t){var e={prefixes:[],items:[]};return function r(i,o,a){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,rM(i,{pageToken:a})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(t,e).then(function(){return e})}function rM(u,c){return $i(this,void 0,void 0,function(){var s;return Zi(this,function(t){switch(t.label){case 0:return null!=c&&"number"==typeof c.maxResults&&dL("options.maxResults",1,1e3,c.maxResults),s=c||{},e=u.storage,n=u._location,r="/",i=s.pageToken,o=s.maxResults,a={},n.isRoot?a.prefix="":a.prefix=n.path+"/",r&&0<r.length&&(a.delimiter=r),i&&(a.pageToken=i),o&&(a.maxResults=o),i=vL(n.bucketOnlyServerUrl(),e.host),o=e.maxOperationRetryTime,(o=new LL(i,"GET",UL(e,n.bucket),o)).urlParams=a,o.errorHandler=qL(n),[4,u.storage.makeRequestWithTokens(o)];case 1:return[2,t.sent().getPromise()]}var e,n,r,i,o,a})})}function iM(s,u){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return s._throwIfRoot("updateMetadata"),e=s.storage,n=s._location,r=u,i=NL(),o=vL(n.fullServerUrl(),e.host),a=PL(r,i),r=e.maxOperationRetryTime,(r=new LL(o,"PATCH",FL(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=a,r.errorHandler=VL(n),[4,s.storage.makeRequestWithTokens(r)];case 1:return[2,t.sent().getPromise()]}var e,n,r,i,o,a})})}function oM(a){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return a._throwIfRoot("getDownloadURL"),e=a.storage,n=a._location,r=NL(),i=vL(n.fullServerUrl(),e.host),o=e.maxOperationRetryTime,(o=new LL(i,"GET",jL(e,r),o)).errorHandler=VL(n),[4,a.storage.makeRequestWithTokens(o)];case 1:return[2,t.sent().getPromise().then(function(t){if(null===t)throw new Mx("no-download-url","The given file does not have any download URLs.");return t})]}var e,n,r,i,o})})}function aM(i){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return i._throwIfRoot("deleteObject"),e=i.storage,n=i._location,r=vL(n.fullServerUrl(),e.host),e=e.maxOperationRetryTime,(e=new LL(r,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=VL(n),[4,i.storage.makeRequestWithTokens(e)];case 1:return[2,t.sent().getPromise()]}var e,n,r})})}function sM(t,e){var n,e=(n=t._location.path,e=(e=e).split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new sL(t._location.bucket,e);return new tM(t.storage,e)}function uM(t){return/^[A-Za-z]+:\/\//.test(t)}function cM(t,e){if(t instanceof fM){var n=t;if(null==n._bucket)throw new Mx("no-default-bucket","No default bucket found. Did you set the '"+Lx+"' property when initializing the app?");n=new tM(n,n._bucket);return null!=e?cM(n,e):n}if(void 0===e)return t;if(e.includes(".."))throw Bx('`path` param cannot contain ".."');return sM(t,e)}function hM(t,e){if(e&&uM(e)){if(t instanceof fM)return new tM(t,e);throw Bx("To use ref(service, url), the first argument must be a Storage instance.")}return cM(t,e)}function lM(t,e){e=null==e?void 0:e[Lx];return null==e?null:sL.makeFromBucketSpec(e,t)}var fM=(Object.defineProperty(pM.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=sL.makeFromBucketSpec(this._url,t):this._bucket=lM(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(pM.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){dL("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(pM.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){dL("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),pM.prototype._getAuthToken=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},pM.prototype._getAppCheckToken=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}})})},pM.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},pM.prototype._makeStorageReference=function(t){return new tM(this,t)},pM.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new cL(Kx());var i,o,a,s,u,c,h=(i=t,o=this._appId,a=e,s=n,u=this._pool,c=this._firebaseVersion,t=gL(i.urlParams),e=i.url+t,n=Object.assign({},i.headers),t=n,(o=o)&&(t["X-Firebase-GMPID"]=o),o=n,null!==(a=a)&&0<a.length&&(o.Authorization="Firebase "+a),c=c,n["X-Firebase-Storage-Version"]="webjs/"+(null!=c?c:"AppManager"),c=n,null!==(s=s)&&(c["X-Firebase-AppCheck"]=s),new yL(e,i.method,n,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,u));return this._requests.add(h),h.getPromise().then(function(){return r._requests.delete(h)},function(){return r._requests.delete(h)}),h},pM.prototype.makeRequestWithTokens=function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=t.sent(),e=n[0],n=n[1],[2,this._makeRequest(r,e,n)]}})})},pM);function pM(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=xx,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?sL.makeFromBucketSpec(i,this._host):lM(this._host,this.app.options)}function dM(t,e,n){return t=ta(t),e=e,n=n,(t=t)._throwIfRoot("uploadBytesResumable"),new $L(t,new wL(e),n)}function vM(t){return function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return n._throwIfRoot("getMetadata"),e=BL(n.storage,n._location,NL()),[4,n.storage.makeRequestWithTokens(e)];case 1:return[2,t.sent().getPromise()]}})})}(t=ta(t))}function gM(t,e){return hM(t=ta(t),e)}var yM=(Object.defineProperty(mM.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(mM.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(mM.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(mM.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),mM);function mM(t,e,n){this._delegate=t,this.task=e,this.ref=n}var bM=(Object.defineProperty(_M.prototype,"snapshot",{get:function(){return new yM(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),_M.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new yM(t,n,n._ref))},t)},_M.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new yM(t,i,i._ref))}:{next:e.next?function(t){return e.next(new yM(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},_M);function _M(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var wM=(Object.defineProperty(IM.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new TM(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(IM.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new TM(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(IM.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),IM);function IM(t,e){this._delegate=t,this._service=e}var TM=(Object.defineProperty(EM.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(EM.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(EM.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),EM.prototype.toString=function(){return this._delegate.toString()},EM.prototype.child=function(t){return new EM(sM(this._delegate,t),this.storage)},Object.defineProperty(EM.prototype,"root",{get:function(){return new EM(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(EM.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new EM(t,this.storage)},enumerable:!1,configurable:!0}),EM.prototype.put=function(t,e){return this._throwIfRoot("put"),new bM(dM(this._delegate,t,e),this)},EM.prototype.putString=function(t,e,n){void 0===e&&(e=zx.RAW),this._throwIfRoot("putString");t=Yx(e,t),n=Ji({},n);return null==n.contentType&&null!=t.contentType&&(n.contentType=t.contentType),new bM(new $L(this._delegate,new wL(t.data,!0),n),this)},EM.prototype.listAll=function(){var e=this;return nM(ta(this._delegate)).then(function(t){return new wM(t,e.storage)})},EM.prototype.list=function(t){var e,n=this;return e=this._delegate,t=t||void 0,rM(e=ta(e),t).then(function(t){return new wM(t,n.storage)})},EM.prototype.getMetadata=function(){return vM(this._delegate)},EM.prototype.updateMetadata=function(t){return e=this._delegate,t=t,iM(e=ta(e),t);var e},EM.prototype.getDownloadURL=function(){return oM(ta(this._delegate))},EM.prototype.delete=function(){return this._throwIfRoot("delete"),aM(ta(this._delegate))},EM.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Wx(t)},EM);function EM(t,e){this._delegate=t,this.storage=e}var SM=(Object.defineProperty(CM.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(CM.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),CM.prototype.ref=function(t){if(uM(t))throw Bx("ref() expected a child path but got a URL, use refFromURL instead.");return new TM(gM(this._delegate,t),this)},CM.prototype.refFromURL=function(t){if(!uM(t))throw Bx("refFromURL() expected a full URL but got a child path, use ref() instead.");try{sL.makeFromUrl(t,this._delegate.host)}catch(t){throw Bx("refFromUrl() expected a valid full URL but got an invalid one.")}return new TM(gM(this._delegate,t),this)},CM.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},CM.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},CM.prototype.useEmulator=function(t,e){var n;n=this._delegate,t=t,e=e,n.host="http://"+t+":"+e},CM);function CM(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var kM,NM;function AM(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),e=t.getProvider("auth-internal"),t=t.getProvider("app-check-internal");return new SM(r,new fM(r,e,t,new oL,n,Xl.SDK_VERSION))}NM={TaskState:eL,TaskEvent:tL,StringFormat:zx,Storage:fM,Reference:TM},(kM=Xl).INTERNAL.registerComponent(new ea("storage",AM,"PUBLIC").setServiceProps(NM).setMultipleInstances(!0)),kM.registerVersion("@firebase/storage","0.5.2");var RM,PM,OM="0.4.12",DM="FB-PERF-TRACE-MEASURE",xM="@firebase/performance/config",LM="@firebase/performance/configexpire",G="Performance",Sn=((Sn={})["trace started"]="Trace {$traceName} was started before.",Sn["trace stopped"]="Trace {$traceName} is not running.",Sn["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Sn["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Sn["no window"]="Window is not available.",Sn["no app id"]="App id is not available.",Sn["no project id"]="Project id is not available.",Sn["no api key"]="Api key is not available.",Sn["invalid cc log"]="Attempted to queue invalid cc event",Sn["FB not default"]="Performance can only start when Firebase app instance is the default one.",Sn["RC response not ok"]="RC response is not ok",Sn["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Sn["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Sn["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Sn["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Sn),MM=new ko("performance",G,Sn),FM=new da(G);FM.logLevel=ua.INFO;var UM,jM=(qM.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},qM.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},qM.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},qM.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},qM.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},qM.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},qM.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!_o()||(FM.info("IndexedDB is not supported by current browswer"),!1):(FM.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},qM.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},qM.getInstance=function(){return RM=void 0===RM?new qM(PM):RM},qM);function qM(t){if(!(this.window=t))throw MM.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function VM(t,e){var n=t.length-e.length;if(n<0||1<n)throw MM.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var BM,KM,WM=(HM.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw MM.create("no app id");return t},HM.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw MM.create("no project id");return t},HM.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw MM.create("no api key");return t},HM.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},HM.getInstance=function(){return UM=void 0===UM?new HM:UM},HM);function HM(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=VM("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=VM("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(G=KM=KM||{})[G.UNKNOWN=0]="UNKNOWN",G[G.VISIBLE=1]="VISIBLE",G[G.HIDDEN=2]="HIDDEN";var GM=["firebase_","google_","ga_"],zM=new RegExp("^[a-zA-Z]\\w*$");function QM(){switch(jM.getInstance().document.visibilityState){case"visible":return KM.VISIBLE;case"hidden":return KM.HIDDEN;default:return KM.UNKNOWN}}var YM="0.0.1",XM={loggingEnabled:!0},JM="FIREBASE_INSTALLATIONS_AUTH";function $M(t){var n,e=function(){var t=jM.getInstance().localStorage;if(!t)return;var e=t.getItem(LM);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(xM);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(tF(e),Promise.resolve()):(n=t,function(){var t=WM.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+WM.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+WM.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:JM+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:WM.getInstance().getAppId(),app_version:OM,sdk_version:YM})});return fetch(t).then(function(t){if(t.ok)return t.json();throw MM.create("RC response not ok")})}).catch(function(){FM.info(ZM)}).then(tF).then(function(t){var e=jM.getInstance().localStorage;if(!t||!e)return;e.setItem(xM,JSON.stringify(t)),e.setItem(LM,String(Date.now()+60*WM.getInstance().configTimeToLive*60*1e3))},function(){}))}var ZM="Could not fetch config, will use default configs";function tF(t){if(!t)return t;var e=WM.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):XM.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=eF(e.tracesSamplingRate),e.logNetworkAfterSampling=eF(e.networkRequestsSamplingRate),t}function eF(t){return Math.random()<=t}var nF,rF=1;function iF(){return rF=2,nF=nF||function(){var n=jM.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=WM.getInstance().installationsService.getId()).then(function(t){BM=t}),t;var t}).then($M).then(oF,oF)}function oF(){rF=3}var aF,sF=1e4,uF=5500,cF=3,hF=1e3,lF=cF,fF=[],pF=!1;function dF(t){setTimeout(function(){var t,e;if(0!==lF)return fF.length?(t=fF.splice(0,hF),e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,r){return function(t){var e=WM.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||FM.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=sF;isNaN(e)||(n=Math.max(e,n));t=t.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(fF=no(no([],r),fF),FM.info("Retry transport request later.")),lF=cF,dF(n)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:WM.getInstance().logSource,log_event:e},t).catch(function(){fF=no(no([],t),fF),lF--,FM.info("Tries left: "+lF+"."),dF(sF)})):dF(sF)},t)}function vF(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw MM.create("invalid cc log");fF=no(no([],fF),[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function gF(t,e){(aF=aF||vF(bF))(t,e)}function yF(t){var e=WM.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&jM.getInstance().requiredApisAvailable()&&(t.isAuto&&QM()!==KM.VISIBLE||(3===rF?mF(t):iF().then(function(){return mF(t)},function(){return mF(t)})))}function mF(t){var e;!BM||(e=WM.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return gF(t,1)},0)}function bF(t,e){return(0===e?function(t){t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:_F(),network_request_metric:t};return JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);t=t.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);e={application_info:_F(),trace_metric:e};return JSON.stringify(e)})(t)}function _F(){return{google_app_id:WM.getInstance().getAppId(),app_instance_id:BM,web_app_info:{sdk_version:OM,page_url:jM.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=jM.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:QM(),effective_connection_type:function(){var t=jM.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var wF=["_fp","_fcp","_fid"];var IF=(TF.prototype.start=function(){if(1!==this.state)throw MM.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},TF.prototype.stop=function(){if(2!==this.state)throw MM.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),yF(this)},TF.prototype.record=function(t,e,n){if(t<=0)throw MM.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw MM.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Ji({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}yF(this)},TF.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},TF.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<wF.indexOf(n))&&n.startsWith("_"))throw MM.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&FM.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},TF.prototype.getMetric=function(t){return this.counters[t]||0},TF.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!GM.some(function(t){return n.startsWith(t)})&&!!n.match(zM)),r=0!==(r=e).length&&r.length<=100;if(i&&r)this.customAttributes[t]=e;else{if(!i)throw MM.create("invalid attribute name",{attributeName:t});if(!r)throw MM.create("invalid attribute value",{attributeValue:e})}},TF.prototype.getAttribute=function(t){return this.customAttributes[t]},TF.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},TF.prototype.getAttributes=function(){return Ji({},this.customAttributes)},TF.prototype.setStartTime=function(t){this.startTimeUs=t},TF.prototype.setDuration=function(t){this.durationUs=t},TF.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),t=t&&t[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},TF.createOobTrace=function(t,e,n){var r,i=jM.getInstance().getUrl();i&&(r=new TF("_wt_"+i,!0),i=Math.floor(1e3*jM.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),yF(r))},TF.createUserTimingTrace=function(t){yF(new TF(t,!1,t))},TF);function TF(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=jM.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||DM+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function EF(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=jM.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=WM.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return gF(e,0)},0)))}var SF=5e3;function CF(){BM&&(setTimeout(function(){var t=jM.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){IF.createOobTrace(e,n),r=void 0},SF),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),IF.createOobTrace(e,n,t))})):IF.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=jM.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++)EF(r[n]);t.setupObserver("resource",EF)},0),setTimeout(function(){for(var t=jM.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++)kF(r[n]);t.setupObserver("measure",kF)},0))}function kF(t){t=t.name;t.substring(0,DM.length)!==DM&&IF.createUserTimingTrace(t)}var NF=(AF.prototype.trace=function(t){return new IF(t)},Object.defineProperty(AF.prototype,"instrumentationEnabled",{get:function(){return WM.getInstance().instrumentationEnabled},set:function(t){WM.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(AF.prototype,"dataCollectionEnabled",{get:function(){return WM.getInstance().dataCollectionEnabled},set:function(t){WM.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),AF);function AF(t){this.app=t,jM.getInstance().requiredApisAvailable()&&wo().then(function(t){t&&(pF||(dF(uF),pF=!0),iF().then(CF,CF))}).catch(function(t){FM.info("Environment doesn't support IndexedDB: "+t)})}var RF;function PF(t,e){if("[DEFAULT]"!==t.name)throw MM.create("FB not default");if("undefined"==typeof window)throw MM.create("no window");return PM=window,WM.getInstance().firebaseAppInstance=t,WM.getInstance().installationsService=e,new NF(t)}(RF=Xl).INTERNAL.registerComponent(new ea("performance",function(t){var e=t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate();return PF(e,t)},"PUBLIC")),RF.registerVersion("@firebase/performance","0.4.12");var OF,DF,xF="firebase_id",LF="origin",MF=6e4,FF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",UF="https://www.googletagmanager.com/gtag/js";(G=OF=OF||{}).EVENT="event",G.SET="set",G.CONFIG="config",(G=DF=DF||{}).ADD_SHIPPING_INFO="add_shipping_info",G.ADD_PAYMENT_INFO="add_payment_info",G.ADD_TO_CART="add_to_cart",G.ADD_TO_WISHLIST="add_to_wishlist",G.BEGIN_CHECKOUT="begin_checkout",G.CHECKOUT_PROGRESS="checkout_progress",G.EXCEPTION="exception",G.GENERATE_LEAD="generate_lead",G.LOGIN="login",G.PAGE_VIEW="page_view",G.PURCHASE="purchase",G.REFUND="refund",G.REMOVE_FROM_CART="remove_from_cart",G.SCREEN_VIEW="screen_view",G.SEARCH="search",G.SELECT_CONTENT="select_content",G.SELECT_ITEM="select_item",G.SELECT_PROMOTION="select_promotion",G.SET_CHECKOUT_OPTION="set_checkout_option",G.SHARE="share",G.SIGN_UP="sign_up",G.TIMING_COMPLETE="timing_complete",G.VIEW_CART="view_cart",G.VIEW_ITEM="view_item",G.VIEW_ITEM_LIST="view_item_list",G.VIEW_PROMOTION="view_promotion",G.VIEW_SEARCH_RESULTS="view_search_results";var jF=new da("@firebase/analytics");function qF(o,a,s,u){return function(n,r,i){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==OF.EVENT?[3,2]:[4,function(u,c,h,l,f){return $i(this,void 0,void 0,function(){var n,r,e,i,o,a,s;return Zi(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),n=[],f&&f.send_to)?(s=f.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e}),t=t&&c[t.appId];if(!t)return n=[],"break";n.push(t)},i=0,o=s;i<o.length&&(a=o[i],"break"!==e(a));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(OF.EVENT,l,f||{}),[3,5];case 4:return s=t.sent(),jF.error(s),[3,5];case 5:return[2]}})})}(o,a,s,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==OF.CONFIG?[3,4]:[4,function(r,i,o,a,s,u){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:e=a[s],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return n=t.sent(),(n=n.find(function(t){return t.measurementId===s}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),jF.error(n),[3,8];case 8:return r(OF.CONFIG,s,u),[2]}})})}(o,a,s,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(OF.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),jF.error(e),[3,7];case 7:return[2]}})})}}var G=((G={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",G["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",G["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",G["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",G["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",G["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",G["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",G["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',G["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',G),VF=new ko("analytics","Analytics",G),BF=30;function KF(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var WF=new(KF.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},KF.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},KF.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},KF);function HF(o){var a;return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=FF.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(a=i.error)&&void 0!==a&&a.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw VF.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}function GF(s,u,c){return void 0===u&&(u=WF),$i(this,void 0,void 0,function(){var e,n,r,i,o,a=this;return Zi(this,function(t){if(i=s.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw VF.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new YF,setTimeout(function(){return $i(a,void 0,void 0,function(){return Zi(this,function(t){return o.abort(),[2]})})},void 0!==c?c:MF),[2,function a(s,t,u,c){var h=t.throttleEndTimeMillis,l=t.backoffCount;void 0===c&&(c=WF);return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:e=s.appId,n=s.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,zF(u,h)];case 2:return t.sent(),[3,4];case 3:if(i=t.sent(),n)return jF.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+i.message+"]"),[2,{appId:e,measurementId:n}];throw i;case 4:return t.trys.push([4,6,,7]),[4,HF(s)];case 5:return o=t.sent(),c.deleteThrottleMetadata(e),[2,o];case 6:if(QF(r=t.sent()))return i=503===Number(r.customData.httpStatus)?Zo(l,c.intervalMillis,BF):Zo(l,c.intervalMillis),o={throttleEndTimeMillis:Date.now()+i,backoffCount:l+1},c.setThrottleMetadata(e,o),jF.debug("Calling attemptFetch again in "+i+" millis"),[2,a(s,o,u,c)];if(c.deleteThrottleMetadata(e),n)return jF.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw VF.create("no-api-key")})})}function zF(i,o){return new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(VF.create("fetch-throttle",{throttleEndTimeMillis:o}))})})}function QF(t){if(t instanceof So&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}var YF=(XF.prototype.addEventListener=function(t){this.listeners.push(t)},XF.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},XF);function XF(){this.listeners=[]}function JF(s,u,c,h,l,f){return $i(this,void 0,void 0,function(){var i,o,a;return Zi(this,function(t){switch(t.label){case 0:return(i=GF(s)).then(function(t){c[t.measurementId]=t.appId,s.options.measurementId&&t.measurementId!==s.options.measurementId&&jF.warn("The measurement ID in the local Firebase config ("+s.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return jF.error(t)}),u.push(i),o=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return _o()?[3,1]:(jF.warn(VF.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,wo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),jF.warn(VF.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){if(t)return h.getId()}),[4,Promise.all([i,o])];case 1:return a=t.sent(),i=a[0],o=a[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(UF))return r}}()||(e=f,n=i.measurementId,(r=document.createElement("script")).src=UF+"?l="+e+"&id="+n,r.async=!0,document.head.appendChild(r)),l("js",new Date),(a={})[LF]="firebase",a.update=!0,a=a,null!=o&&(a[xF]=o),l(OF.CONFIG,i.measurementId,a),[2,i.measurementId]}var e,n,r})})}var $F,ZF,tU={},eU=[],nU={},rU="dataLayer",iU="gtag",oU=!1;function aU(t){if(oU)throw VF.create("already-initialized");t.dataLayerName&&(rU=t.dataLayerName),t.gtagName&&(iU=t.gtagName)}function sU(t,e){i=[],yo()&&i.push("This is a browser extension environment."),Io()||i.push("Cookies are not available."),0<i.length&&(i=i.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),i=VF.create("invalid-analytics-context",{errorInfo:i}),jF.warn(i.message));var n,r,i,o,a,s,u=t.options.appId;if(!u)throw VF.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw VF.create("no-api-key");jF.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=tU[u])throw VF.create("already-exists",{id:u});return oU||(a=rU,s=[],Array.isArray(window[a])?s=window[a]:window[a]=s,n=tU,r=eU,i=nU,o=rU,a=iU,s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[o].push(arguments)},window[a]&&"function"==typeof window[a]&&(s=window[a]),window[a]=qF(s,n,r,i),a={gtagCore:s,wrappedGtag:window[a]},ZF=a.wrappedGtag,$F=a.gtagCore,oU=!0),tU[u]=JF(t,eU,nU,e,$F,rU),{app:t,logEvent:function(t,e,n){!function(n,r,i,o,a){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return a&&a.global?(n(OF.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=Ji(Ji({},o),{send_to:e}),n(OF.EVENT,i,e),t.label=3;case 3:return[2]}})})}(ZF,tU[u],t,e,n).catch(function(t){return jF.error(t)})},setCurrentScreen:function(t,e){!function(n,r,i,o){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return o&&o.global?(n(OF.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(OF.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})}(ZF,tU[u],t,e).catch(function(t){return jF.error(t)})},setUserId:function(t,e){!function(n,r,i,o){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return o&&o.global?(n(OF.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(OF.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})}(ZF,tU[u],t,e).catch(function(t){return jF.error(t)})},setUserProperties:function(t,e){!function(a,s,u,c){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return a(OF.SET,e),[2,Promise.resolve()];case 1:return[4,s];case 2:o=t.sent(),a(OF.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})}(ZF,tU[u],t,e).catch(function(t){return jF.error(t)})},setAnalyticsCollectionEnabled:function(t){!function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})}(tU[u],t).catch(function(t){return jF.error(t)})},INTERNAL:{delete:function(){return delete tU[u],Promise.resolve()}}}}var uU,cU="analytics";function hU(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:if(yo())return[2,!1];if(!Io())return[2,!1];if(!_o())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,wo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(uU=Xl).INTERNAL.registerComponent(new ea(cU,function(t){return sU(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:aU,EventName:DF,isSupported:hU})),uU.INTERNAL.registerComponent(new ea("analytics-internal",function(t){try{return{logEvent:t.getProvider(cU).getImmediate().logEvent}}catch(t){throw VF.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),uU.registerVersion("@firebase/analytics","0.6.10");var lU=(fU.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},fU.prototype.fetch=function(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e))?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},fU);function fU(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var G=((G={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",G["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",G["registration-api-key"]="Undefined API key. Check Firebase app initialization.",G["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",G["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",G["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",G["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",G["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",G["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",G["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',G["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',G["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",G["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",G),pU=new ko("remoteconfig","Remote Config",G);var dU=(vU.prototype.fetch=function(f){return $i(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,h,l;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(e=void 0===e?navigator:e).languages&&e.languages[0]||e.language},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),pU.create(o,{originalErrorMessage:i.message});case 6:if(a=l.status,s=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),pU.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?a=500:"NO_CHANGE"===c?a=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==a&&200!==a)throw pU.create("fetch-status",{httpStatus:a});return[2,{status:a,eTag:s,config:u}]}var e})})},vU);function vU(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var gU=(yU.prototype.addEventListener=function(t){this.listeners.push(t)},yU.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},yU);function yU(){this.listeners=[]}var mU=["1","true","t","yes","y","on"],bU=(_U.prototype.asString=function(){return this._value},_U.prototype.asBoolean=function(){return"static"!==this._source&&0<=mU.indexOf(this._value.toLowerCase())},_U.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return t=isNaN(t)?0:t},_U.prototype.getSource=function(){return this._source},_U);function _U(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var wU=(IU.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ua.DEBUG;break;case"silent":this._logger.logLevel=ua.SILENT;break;default:this._logger.logLevel=ua.ERROR}},Object.defineProperty(IU.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(IU.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),IU.prototype.activate=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},IU.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},IU.prototype.fetch=function(){return $i(this,void 0,void 0,function(){var r,i,o,a=this;return Zi(this,function(t){switch(t.label){case 0:r=new gU,setTimeout(function(){return $i(a,void 0,void 0,function(){return Zi(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof So&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},IU.prototype.fetchAndActivate=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},IU.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Ji(Ji({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},IU.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},IU.prototype.getNumber=function(t){return this.getValue(t).asNumber()},IU.prototype.getString=function(t){return this.getValue(t).asString()},IU.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new bU("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new bU("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new bU("static"))},IU);function IU(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function TU(t,e){t=t.target.error||void 0;return pU.create(e,{originalErrorMessage:t&&t.message})}var EU="app_namespace_store",SU="firebase_remote_config",CU=1;var kU=(NU.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},NU.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},NU.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},NU.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},NU.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},NU.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},NU.prototype.getActiveConfig=function(){return this.get("active_config")},NU.prototype.setActiveConfig=function(t){return this.set("active_config",t)},NU.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},NU.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},NU.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},NU.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},NU.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},NU.prototype.get=function(s){return $i(this,void 0,void 0,function(){var o,a=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([EU],"readonly").objectStore(EU),r=a.createCompositeKey(s);try{var i=t.get(r);i.onerror=function(t){n(TU(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)}}catch(t){n(pU.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},NU.prototype.set=function(s,u){return $i(this,void 0,void 0,function(){var o,a=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([EU],"readwrite").objectStore(EU),r=a.createCompositeKey(s);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(TU(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(pU.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},NU.prototype.delete=function(s){return $i(this,void 0,void 0,function(){var o,a=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([EU],"readwrite").objectStore(EU),r=a.createCompositeKey(s);try{var i=n.delete(r);i.onerror=function(t){e(TU(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(pU.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},NU.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},NU);function NU(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(SU,CU);t.onerror=function(t){n(TU(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(EU,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var AU=(RU.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},RU.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},RU.prototype.getActiveConfig=function(){return this.activeConfig},RU.prototype.loadFromStorage=function(){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},RU.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},RU.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},RU.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},RU);function RU(t){this.storage=t}var PU=(OU.prototype.fetch=function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},OU.prototype.attemptFetch=function(r,t){var a=t.throttleEndTimeMillis,s=t.backoffCount;return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,(i=r.signal,o=a,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(pU.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(r)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof So&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}(n=t.sent()))throw n;return n={throttleEndTimeMillis:Date.now()+Zo(s),backoffCount:s+1},[4,this.storage.setThrottleMetadata(n)];case 6:return t.sent(),[2,this.attemptFetch(r,n)];case 7:return[2]}var i,o})})},OU);function OU(t,e){this.client=t,this.storage=e}var DU,xU="@firebase/remote-config";return(DU=Xl).INTERNAL.registerComponent(new ea("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw pU.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw pU.create("registration-project-id");if(!s)throw pU.create("registration-api-key");if(!u)throw pU.create("registration-app-id");n=n||"firebase";e=new kU(u,r.name,n),t=new AU(e),o=new da(xU);o.logLevel=ua.ERROR;u=new dU(i,DU.SDK_VERSION,n,a,s,u),u=new PU(u,e),u=new lU(u,e,t,o),o=new wU(r,u,t,e,o);return o.ensureInitialized(),o},"PUBLIC").setMultipleInstances(!0)),DU.registerVersion(xU,"0.1.37"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Xl.registerVersion("firebase","8.5.0","cdn"),Xl});


}).call(this)}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":2}],2:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],3:[function(require,module,exports){
(function (global){(function (){
var firebase = require('firebase/firebase')
var firebaseConfig = {
    apiKey: "AIzaSyC26TD0pop_oIwDPmWozuHszxWA9g5jjXI",
    authDomain: "monitorva.firebaseapp.com",
    projectId: "monitorva",
    storageBucket: "monitorva.appspot.com",
    messagingSenderId: "765729795514",
    appId: "1:765729795514:web:3e2fb4d1e1eeb0517a4183"
}
var userid = ""
// Initialize Firebase
firebase.initializeApp(firebaseConfig);
function Auth(){
    if(validateEmail($('#email').val()) && $('#psw').val().length>5) {

        firebase.auth().signInWithEmailAndPassword($('#email').val(), $('#psw').val())
            .then(userCredential =>{
                setUserId(userCredential.user.uid)
                getList(true)
                document.getElementById('btnStartStop').style.display = ""
                document.getElementById('btnAdd').style.display = ""
                document.getElementById('btnEdit').style.display = ""
                document.getElementById('btnList').style.display = ""
                document.getElementById('btnMonit').style.display = ""
                document.getElementById('btnMonit').style.display = ""
                document.getElementById('settings').style.display = ""

            })
            .catch((error) => {
                var errorCode = error.code;
                var errorMessage = error.message;
                document.getElementById('errorLabel').innerText=errorMessage+" ("+errorCode+")"
            })
      /*  $.ajax({
            url: '/auth',
            method: 'POST',
            json: true,
            data: {email:$('#email').val(), password:$('#psw').val()},
            success: function (response) {
                getList()
                document.getElementById('btnStartStop').style.display = ""
            }
        })*/
    }
}
function validateEmail(email) {
    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
}
global.Auth = Auth
global.userid = userid
}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"firebase/firebase":1}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZmlyZWJhc2UvZmlyZWJhc2UuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwic3RhdGljL2F1dGguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQUE7QUFDQTtBQUNBOzs7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOih0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6dHx8c2VsZikuZmlyZWJhc2U9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7IWZ1bmN0aW9uKHQpe3ZhciBlLG4sYSxyLGksbyxzLHUsYyxoO2Z1bmN0aW9uIGwodCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQmJih0PVN0cmluZyh0KSksL1teYS16MC05XFwtIyQlJicqKy5cXF5fYHx+XS9pLnRlc3QodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lXCIpO3JldHVybiB0LnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZih0KXtyZXR1cm4gdD1cInN0cmluZ1wiIT10eXBlb2YgdD9TdHJpbmcodCk6dH1mdW5jdGlvbiBwKGUpe3ZhciB0PXtuZXh0OmZ1bmN0aW9uKCl7dmFyIHQ9ZS5zaGlmdCgpO3JldHVybntkb25lOnZvaWQgMD09PXQsdmFsdWU6dH19fTtyZXR1cm4gbiYmKHRbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0fSksdH1mdW5jdGlvbiBkKGUpe3RoaXMubWFwPXt9LGUgaW5zdGFuY2VvZiBkP2UuZm9yRWFjaChmdW5jdGlvbih0LGUpe3RoaXMuYXBwZW5kKGUsdCl9LHRoaXMpOkFycmF5LmlzQXJyYXkoZSk/ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXMuYXBwZW5kKHRbMF0sdFsxXSl9LHRoaXMpOmUmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5hcHBlbmQodCxlW3RdKX0sdGhpcyl9ZnVuY3Rpb24gdih0KXtpZih0LmJvZHlVc2VkKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKFwiQWxyZWFkeSByZWFkXCIpKTt0LmJvZHlVc2VkPSEwfWZ1bmN0aW9uIGcobil7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsZSl7bi5vbmxvYWQ9ZnVuY3Rpb24oKXt0KG4ucmVzdWx0KX0sbi5vbmVycm9yPWZ1bmN0aW9uKCl7ZShuLmVycm9yKX19KX1mdW5jdGlvbiB5KHQpe3ZhciBlPW5ldyBGaWxlUmVhZGVyLG49ZyhlKTtyZXR1cm4gZS5yZWFkQXNBcnJheUJ1ZmZlcih0KSxufWZ1bmN0aW9uIG0odCl7aWYodC5zbGljZSlyZXR1cm4gdC5zbGljZSgwKTt2YXIgZT1uZXcgVWludDhBcnJheSh0LmJ5dGVMZW5ndGgpO3JldHVybiBlLnNldChuZXcgVWludDhBcnJheSh0KSksZS5idWZmZXJ9ZnVuY3Rpb24gYigpe3JldHVybiB0aGlzLmJvZHlVc2VkPSExLHRoaXMuX2luaXRCb2R5PWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2JvZHlJbml0PXQpaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpdGhpcy5fYm9keVRleHQ9dDtlbHNlIGlmKGEmJkJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YodCkpdGhpcy5fYm9keUJsb2I9dDtlbHNlIGlmKHImJkZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHQpKXRoaXMuX2JvZHlGb3JtRGF0YT10O2Vsc2UgaWYoZSYmVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHQpKXRoaXMuX2JvZHlUZXh0PXQudG9TdHJpbmcoKTtlbHNlIGlmKGkmJmEmJnModCkpdGhpcy5fYm9keUFycmF5QnVmZmVyPW0odC5idWZmZXIpLHRoaXMuX2JvZHlJbml0PW5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKTtlbHNle2lmKCFpfHwhQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YodCkmJiF1KHQpKXRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGVcIik7dGhpcy5fYm9keUFycmF5QnVmZmVyPW0odCl9ZWxzZSB0aGlzLl9ib2R5VGV4dD1cIlwiO3RoaXMuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIil8fChcInN0cmluZ1wiPT10eXBlb2YgdD90aGlzLmhlYWRlcnMuc2V0KFwiY29udGVudC10eXBlXCIsXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLThcIik6dGhpcy5fYm9keUJsb2ImJnRoaXMuX2JvZHlCbG9iLnR5cGU/dGhpcy5oZWFkZXJzLnNldChcImNvbnRlbnQtdHlwZVwiLHRoaXMuX2JvZHlCbG9iLnR5cGUpOmUmJlVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0KSYmdGhpcy5oZWFkZXJzLnNldChcImNvbnRlbnQtdHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLThcIikpfSxhJiYodGhpcy5ibG9iPWZ1bmN0aW9uKCl7dmFyIHQ9dih0aGlzKTtpZih0KXJldHVybiB0O2lmKHRoaXMuX2JvZHlCbG9iKXJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpO2lmKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSk7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcihcImNvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYlwiKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5VGV4dF0pKX0sdGhpcy5hcnJheUJ1ZmZlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ib2R5QXJyYXlCdWZmZXI/dih0aGlzKXx8UHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcik6dGhpcy5ibG9iKCkudGhlbih5KX0pLHRoaXMudGV4dD1mdW5jdGlvbigpe3ZhciB0LGUsbj12KHRoaXMpO2lmKG4pcmV0dXJuIG47aWYodGhpcy5fYm9keUJsb2IpcmV0dXJuIHQ9dGhpcy5fYm9keUJsb2IsZT1uZXcgRmlsZVJlYWRlcixuPWcoZSksZS5yZWFkQXNUZXh0KHQpLG47aWYodGhpcy5fYm9keUFycmF5QnVmZmVyKXJldHVybiBQcm9taXNlLnJlc29sdmUoZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBVaW50OEFycmF5KHQpLG49bmV3IEFycmF5KGUubGVuZ3RoKSxyPTA7cjxlLmxlbmd0aDtyKyspbltyXT1TdHJpbmcuZnJvbUNoYXJDb2RlKGVbcl0pO3JldHVybiBuLmpvaW4oXCJcIil9KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpO2lmKHRoaXMuX2JvZHlGb3JtRGF0YSl0aHJvdyBuZXcgRXJyb3IoXCJjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHRcIik7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dCl9LHImJih0aGlzLmZvcm1EYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dCgpLnRoZW4odyl9KSx0aGlzLmpzb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKX0sdGhpc31mdW5jdGlvbiBfKHQsZSl7dmFyIG4scj0oZT1lfHx7fSkuYm9keTtpZih0IGluc3RhbmNlb2YgXyl7aWYodC5ib2R5VXNlZCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQWxyZWFkeSByZWFkXCIpO3RoaXMudXJsPXQudXJsLHRoaXMuY3JlZGVudGlhbHM9dC5jcmVkZW50aWFscyxlLmhlYWRlcnN8fCh0aGlzLmhlYWRlcnM9bmV3IGQodC5oZWFkZXJzKSksdGhpcy5tZXRob2Q9dC5tZXRob2QsdGhpcy5tb2RlPXQubW9kZSxyfHxudWxsPT10Ll9ib2R5SW5pdHx8KHI9dC5fYm9keUluaXQsdC5ib2R5VXNlZD0hMCl9ZWxzZSB0aGlzLnVybD1TdHJpbmcodCk7aWYodGhpcy5jcmVkZW50aWFscz1lLmNyZWRlbnRpYWxzfHx0aGlzLmNyZWRlbnRpYWxzfHxcIm9taXRcIiwhZS5oZWFkZXJzJiZ0aGlzLmhlYWRlcnN8fCh0aGlzLmhlYWRlcnM9bmV3IGQoZS5oZWFkZXJzKSksdGhpcy5tZXRob2Q9KG49ZS5tZXRob2R8fHRoaXMubWV0aG9kfHxcIkdFVFwiLHQ9bi50b1VwcGVyQ2FzZSgpLC0xPGMuaW5kZXhPZih0KT90Om4pLHRoaXMubW9kZT1lLm1vZGV8fHRoaXMubW9kZXx8bnVsbCx0aGlzLnJlZmVycmVyPW51bGwsKFwiR0VUXCI9PT10aGlzLm1ldGhvZHx8XCJIRUFEXCI9PT10aGlzLm1ldGhvZCkmJnIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkJvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzXCIpO3RoaXMuX2luaXRCb2R5KHIpfWZ1bmN0aW9uIHcodCl7dmFyIG49bmV3IEZvcm1EYXRhO3JldHVybiB0LnRyaW0oKS5zcGxpdChcIiZcIikuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZTt0JiYodD0oZT10LnNwbGl0KFwiPVwiKSkuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZyxcIiBcIiksZT1lLmpvaW4oXCI9XCIpLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSxuLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQodCksZGVjb2RlVVJJQ29tcG9uZW50KGUpKSl9KSxufWZ1bmN0aW9uIEkodCxlKXtlPWV8fHt9LHRoaXMudHlwZT1cImRlZmF1bHRcIix0aGlzLnN0YXR1cz12b2lkIDA9PT1lLnN0YXR1cz8yMDA6ZS5zdGF0dXMsdGhpcy5vaz0yMDA8PXRoaXMuc3RhdHVzJiZ0aGlzLnN0YXR1czwzMDAsdGhpcy5zdGF0dXNUZXh0PVwic3RhdHVzVGV4dFwiaW4gZT9lLnN0YXR1c1RleHQ6XCJPS1wiLHRoaXMuaGVhZGVycz1uZXcgZChlLmhlYWRlcnMpLHRoaXMudXJsPWUudXJsfHxcIlwiLHRoaXMuX2luaXRCb2R5KHQpfXQuZmV0Y2h8fChlPVwiVVJMU2VhcmNoUGFyYW1zXCJpbiB0LG49XCJTeW1ib2xcImluIHQmJlwiaXRlcmF0b3JcImluIFN5bWJvbCxhPVwiRmlsZVJlYWRlclwiaW4gdCYmXCJCbG9iXCJpbiB0JiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEJsb2IsITB9Y2F0Y2godCl7cmV0dXJuITF9fSgpLHI9XCJGb3JtRGF0YVwiaW4gdCwoaT1cIkFycmF5QnVmZmVyXCJpbiB0KSYmKG89W1wiW29iamVjdCBJbnQ4QXJyYXldXCIsXCJbb2JqZWN0IFVpbnQ4QXJyYXldXCIsXCJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XVwiLFwiW29iamVjdCBJbnQxNkFycmF5XVwiLFwiW29iamVjdCBVaW50MTZBcnJheV1cIixcIltvYmplY3QgSW50MzJBcnJheV1cIixcIltvYmplY3QgVWludDMyQXJyYXldXCIsXCJbb2JqZWN0IEZsb2F0MzJBcnJheV1cIixcIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiXSxzPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0KX0sdT1BcnJheUJ1ZmZlci5pc1ZpZXd8fGZ1bmN0aW9uKHQpe3JldHVybiB0JiYtMTxvLmluZGV4T2YoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKX0pLGQucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0LGUpe3Q9bCh0KSxlPWYoZSk7dmFyIG49dGhpcy5tYXBbdF07dGhpcy5tYXBbdF09bj9uK1wiLFwiK2U6ZX0sZC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLm1hcFtsKHQpXX0sZC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0PWwodCksdGhpcy5oYXModCk/dGhpcy5tYXBbdF06bnVsbH0sZC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShsKHQpKX0sZC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dGhpcy5tYXBbbCh0KV09ZihlKX0sZC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiB0aGlzLm1hcCl0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuKSYmdC5jYWxsKGUsdGhpcy5tYXBbbl0sbix0aGlzKX0sZC5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3ZhciBuPVtdO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24odCxlKXtuLnB1c2goZSl9KSxwKG4pfSxkLnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UucHVzaCh0KX0pLHAoZSl9LGQucHJvdG90eXBlLmVudHJpZXM9ZnVuY3Rpb24oKXt2YXIgbj1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7bi5wdXNoKFtlLHRdKX0pLHAobil9LG4mJihkLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPWQucHJvdG90eXBlLmVudHJpZXMpLGM9W1wiREVMRVRFXCIsXCJHRVRcIixcIkhFQURcIixcIk9QVElPTlNcIixcIlBPU1RcIixcIlBVVFwiXSxfLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgXyh0aGlzLHtib2R5OnRoaXMuX2JvZHlJbml0fSl9LGIuY2FsbChfLnByb3RvdHlwZSksYi5jYWxsKEkucHJvdG90eXBlKSxJLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgSSh0aGlzLl9ib2R5SW5pdCx7c3RhdHVzOnRoaXMuc3RhdHVzLHN0YXR1c1RleHQ6dGhpcy5zdGF0dXNUZXh0LGhlYWRlcnM6bmV3IGQodGhpcy5oZWFkZXJzKSx1cmw6dGhpcy51cmx9KX0sSS5lcnJvcj1mdW5jdGlvbigpe3ZhciB0PW5ldyBJKG51bGwse3N0YXR1czowLHN0YXR1c1RleHQ6XCJcIn0pO3JldHVybiB0LnR5cGU9XCJlcnJvclwiLHR9LGg9WzMwMSwzMDIsMzAzLDMwNywzMDhdLEkucmVkaXJlY3Q9ZnVuY3Rpb24odCxlKXtpZigtMT09PWguaW5kZXhPZihlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgc3RhdHVzIGNvZGVcIik7cmV0dXJuIG5ldyBJKG51bGwse3N0YXR1czplLGhlYWRlcnM6e2xvY2F0aW9uOnR9fSl9LHQuSGVhZGVycz1kLHQuUmVxdWVzdD1fLHQuUmVzcG9uc2U9SSx0LmZldGNoPWZ1bmN0aW9uKG4sbyl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHIsdCl7dmFyIGU9bmV3IF8obixvKSxpPW5ldyBYTUxIdHRwUmVxdWVzdDtpLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBuLHQ9e3N0YXR1czppLnN0YXR1cyxzdGF0dXNUZXh0Omkuc3RhdHVzVGV4dCxoZWFkZXJzOihlPWkuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl8fFwiXCIsbj1uZXcgZCxlLnJlcGxhY2UoL1xccj9cXG5bXFx0IF0rL2csXCIgXCIpLnNwbGl0KC9cXHI/XFxuLykuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KFwiOlwiKSx0PWUuc2hpZnQoKS50cmltKCk7dCYmKGU9ZS5qb2luKFwiOlwiKS50cmltKCksbi5hcHBlbmQodCxlKSl9KSxuKX07dC51cmw9XCJyZXNwb25zZVVSTFwiaW4gaT9pLnJlc3BvbnNlVVJMOnQuaGVhZGVycy5nZXQoXCJYLVJlcXVlc3QtVVJMXCIpO3ZhciBlPVwicmVzcG9uc2VcImluIGk/aS5yZXNwb25zZTppLnJlc3BvbnNlVGV4dDtyKG5ldyBJKGUsdCkpfSxpLm9uZXJyb3I9ZnVuY3Rpb24oKXt0KG5ldyBUeXBlRXJyb3IoXCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkXCIpKX0saS5vbnRpbWVvdXQ9ZnVuY3Rpb24oKXt0KG5ldyBUeXBlRXJyb3IoXCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkXCIpKX0saS5vcGVuKGUubWV0aG9kLGUudXJsLCEwKSxcImluY2x1ZGVcIj09PWUuY3JlZGVudGlhbHM/aS53aXRoQ3JlZGVudGlhbHM9ITA6XCJvbWl0XCI9PT1lLmNyZWRlbnRpYWxzJiYoaS53aXRoQ3JlZGVudGlhbHM9ITEpLFwicmVzcG9uc2VUeXBlXCJpbiBpJiZhJiYoaS5yZXNwb25zZVR5cGU9XCJibG9iXCIpLGUuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7aS5zZXRSZXF1ZXN0SGVhZGVyKGUsdCl9KSxpLnNlbmQodm9pZCAwPT09ZS5fYm9keUluaXQ/bnVsbDplLl9ib2R5SW5pdCl9KX0sdC5mZXRjaC5wb2x5ZmlsbD0hMCl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dm9pZCAwKTt2YXIgdD1cInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6e307ZnVuY3Rpb24gZSh0KXt2YXIgZT17ZXhwb3J0czp7fX07cmV0dXJuIHQoZSxlLmV4cG9ydHMpLGUuZXhwb3J0c31mdW5jdGlvbiBnKHQpe3RyeXtyZXR1cm4hIXQoKX1jYXRjaCh0KXtyZXR1cm4hMH19ZnVuY3Rpb24gdih0LGUpe3JldHVybntlbnVtZXJhYmxlOiEoMSZ0KSxjb25maWd1cmFibGU6ISgyJnQpLHdyaXRhYmxlOiEoNCZ0KSx2YWx1ZTplfX1mdW5jdGlvbiByKHQpe3JldHVybiBkLmNhbGwodCkuc2xpY2UoOCwtMSl9ZnVuY3Rpb24gYSh0KXtpZihudWxsPT10KXRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uIFwiK3QpO3JldHVybiB0fWZ1bmN0aW9uIHUodCl7cmV0dXJuIHcoYSh0KSl9ZnVuY3Rpb24geSh0KXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdD9udWxsIT09dDpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGkodCxlKXtpZigheSh0KSlyZXR1cm4gdDt2YXIgbixyO2lmKGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49dC50b1N0cmluZykmJiF5KHI9bi5jYWxsKHQpKSlyZXR1cm4gcjtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihuPXQudmFsdWVPZikmJiF5KHI9bi5jYWxsKHQpKSlyZXR1cm4gcjtpZighZSYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LnRvU3RyaW5nKSYmIXkocj1uLmNhbGwodCkpKXJldHVybiByO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX1mdW5jdGlvbiBjKHQsZSl7cmV0dXJuIEkuY2FsbCh0LGUpfWZ1bmN0aW9uIG4odCl7cmV0dXJuIEU/VC5jcmVhdGVFbGVtZW50KHQpOnt9fWZ1bmN0aW9uIG0odCl7aWYoIXkodCkpdGhyb3cgVHlwZUVycm9yKFN0cmluZyh0KStcIiBpcyBub3QgYW4gb2JqZWN0XCIpO3JldHVybiB0fWZ1bmN0aW9uIGgoZSxuKXt0cnl7UihiLGUsbil9Y2F0Y2godCl7YltlXT1ufXJldHVybiBufXZhciBvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lk1hdGg9PU1hdGgmJnR9LGI9byhcIm9iamVjdFwiPT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcyl8fG8oXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93KXx8byhcIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmc2VsZil8fG8oXCJvYmplY3RcIj09dHlwZW9mIHQmJnQpfHxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCksZj0hZyhmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sMSx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSlbMV19KSxzPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLGw9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixwPXtmOmwmJiFzLmNhbGwoezE6Mn0sMSk/ZnVuY3Rpb24odCl7dD1sKHRoaXMsdCk7cmV0dXJuISF0JiZ0LmVudW1lcmFibGV9OnN9LGQ9e30udG9TdHJpbmcsXz1cIlwiLnNwbGl0LHc9ZyhmdW5jdGlvbigpe3JldHVybiFPYmplY3QoXCJ6XCIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApfSk/ZnVuY3Rpb24odCl7cmV0dXJuXCJTdHJpbmdcIj09cih0KT9fLmNhbGwodCxcIlwiKTpPYmplY3QodCl9Ok9iamVjdCxJPXt9Lmhhc093blByb3BlcnR5LFQ9Yi5kb2N1bWVudCxFPXkoVCkmJnkoVC5jcmVhdGVFbGVtZW50KSxTPSFmJiYhZyhmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkobihcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pLEM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixrPXtmOmY/QzpmdW5jdGlvbih0LGUpe2lmKHQ9dSh0KSxlPWkoZSwhMCksUyl0cnl7cmV0dXJuIEModCxlKX1jYXRjaCh0KXt9aWYoYyh0LGUpKXJldHVybiB2KCFwLmYuY2FsbCh0LGUpLHRbZV0pfX0sTj1PYmplY3QuZGVmaW5lUHJvcGVydHksQT17ZjpmP046ZnVuY3Rpb24odCxlLG4pe2lmKG0odCksZT1pKGUsITApLG0obiksUyl0cnl7cmV0dXJuIE4odCxlLG4pfWNhdGNoKHQpe31pZihcImdldFwiaW4gbnx8XCJzZXRcImluIG4pdGhyb3cgVHlwZUVycm9yKFwiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuXCJ2YWx1ZVwiaW4gbiYmKHRbZV09bi52YWx1ZSksdH19LFI9Zj9mdW5jdGlvbih0LGUsbil7cmV0dXJuIEEuZih0LGUsdigxLG4pKX06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0W2VdPW4sdH0sUD1cIl9fY29yZS1qc19zaGFyZWRfX1wiLE89YltQXXx8aChQLHt9KSxEPUZ1bmN0aW9uLnRvU3RyaW5nO1wiZnVuY3Rpb25cIiE9dHlwZW9mIE8uaW5zcGVjdFNvdXJjZSYmKE8uaW5zcGVjdFNvdXJjZT1mdW5jdGlvbih0KXtyZXR1cm4gRC5jYWxsKHQpfSk7ZnVuY3Rpb24geCh0KXtyZXR1cm5cIlN5bWJvbChcIitTdHJpbmcodm9pZCAwPT09dD9cIlwiOnQpK1wiKV9cIisoKytRK1kpLnRvU3RyaW5nKDM2KX12YXIgTCxNLEYsVSxqLHEsVixCLEs9Ty5pbnNwZWN0U291cmNlLFc9Yi5XZWFrTWFwLEg9XCJmdW5jdGlvblwiPT10eXBlb2YgVyYmL25hdGl2ZSBjb2RlLy50ZXN0KEsoVykpLEc9ITEsej1lKGZ1bmN0aW9uKHQpeyh0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gT1t0XXx8KE9bdF09dm9pZCAwIT09ZT9lOnt9KX0pKFwidmVyc2lvbnNcIixbXSkucHVzaCh7dmVyc2lvbjpcIjMuOC4xXCIsbW9kZTpcImdsb2JhbFwiLGNvcHlyaWdodDpcIsKpIDIwMjAgRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSlcIn0pfSksUT0wLFk9TWF0aC5yYW5kb20oKSxYPXooXCJrZXlzXCIpLEo9ZnVuY3Rpb24odCl7cmV0dXJuIFhbdF18fChYW3RdPXgodCkpfSwkPXt9LFo9Yi5XZWFrTWFwO1Y9SD8oTD1PLnN0YXRlfHwoTy5zdGF0ZT1uZXcgWiksTT1MLmdldCxGPUwuaGFzLFU9TC5zZXQsaj1mdW5jdGlvbih0LGUpe3JldHVybiBlLmZhY2FkZT10LFUuY2FsbChMLHQsZSksZX0scT1mdW5jdGlvbih0KXtyZXR1cm4gTS5jYWxsKEwsdCl8fHt9fSxmdW5jdGlvbih0KXtyZXR1cm4gRi5jYWxsKEwsdCl9KTooQj1KKFwic3RhdGVcIiksJFtCXT0hMCxqPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZmFjYWRlPXQsUih0LEIsZSksZX0scT1mdW5jdGlvbih0KXtyZXR1cm4gYyh0LEIpP3RbQl06e319LGZ1bmN0aW9uKHQpe3JldHVybiBjKHQsQil9KTtmdW5jdGlvbiB0dCh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6dm9pZCAwfWZ1bmN0aW9uIGV0KHQsZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8Mj90dChwdFt0XSl8fHR0KGJbdF0pOnB0W3RdJiZwdFt0XVtlXXx8Ylt0XSYmYlt0XVtlXX1mdW5jdGlvbiBudCh0KXtyZXR1cm4gaXNOYU4odD0rdCk/MDooMDx0P3Z0OmR0KSh0KX1mdW5jdGlvbiBydCh0KXtyZXR1cm4gMDx0P2d0KG50KHQpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9ZnVuY3Rpb24gaXQodCxlKXt2YXIgbixyPXUodCksaT0wLG89W107Zm9yKG4gaW4gcikhYygkLG4pJiZjKHIsbikmJm8ucHVzaChuKTtmb3IoO2UubGVuZ3RoPmk7KWMocixuPWVbaSsrXSkmJih+X3QobyxuKXx8by5wdXNoKG4pKTtyZXR1cm4gb31mdW5jdGlvbiBvdCh0LGUpe2Zvcih2YXIgbj1TdChlKSxyPUEuZixpPWsuZixvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciBhPW5bb107Yyh0LGEpfHxyKHQsYSxpKGUsYSkpfX1mdW5jdGlvbiBhdCh0LGUpe3ZhciBuLHIsaSxvPXQudGFyZ2V0LGE9dC5nbG9iYWwscz10LnN0YXQsdT1hP2I6cz9iW29dfHxoKG8se30pOihiW29dfHx7fSkucHJvdG90eXBlO2lmKHUpZm9yKG4gaW4gZSl7aWYocj1lW25dLGk9dC5ub1RhcmdldEdldD8oaT1PdCh1LG4pKSYmaS52YWx1ZTp1W25dLCFQdChhP246bysocz9cIi5cIjpcIiNcIikrbix0LmZvcmNlZCkmJnZvaWQgMCE9PWkpe2lmKHR5cGVvZiByPT10eXBlb2YgaSljb250aW51ZTtvdChyLGkpfSh0LnNoYW18fGkmJmkuc2hhbSkmJlIocixcInNoYW1cIiwhMCksZnQodSxuLHIsdCl9fWZ1bmN0aW9uIHN0KHQpe3JldHVybiBPYmplY3QoYSh0KSl9ZnVuY3Rpb24gdXQoKXt9ZnVuY3Rpb24gY3QodCl7cmV0dXJuXCI8c2NyaXB0PlwiK3QrXCI8L1wiK1Z0K1wiPlwifXZhciBodCxsdD17c2V0OmosZ2V0OnEsaGFzOlYsZW5mb3JjZTpmdW5jdGlvbih0KXtyZXR1cm4gVih0KT9xKHQpOmoodCx7fSl9LGdldHRlckZvcjpmdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU7aWYoIXkodCl8fChlPXEodCkpLnR5cGUhPT1uKXRocm93IFR5cGVFcnJvcihcIkluY29tcGF0aWJsZSByZWNlaXZlciwgXCIrbitcIiByZXF1aXJlZFwiKTtyZXR1cm4gZX19fSxmdD1lKGZ1bmN0aW9uKHQpe3ZhciBlPWx0LmdldCxzPWx0LmVuZm9yY2UsdT1TdHJpbmcoU3RyaW5nKS5zcGxpdChcIlN0cmluZ1wiKTsodC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPSEhciYmISFyLnVuc2FmZSxvPSEhciYmISFyLmVudW1lcmFibGUsYT0hIXImJiEhci5ub1RhcmdldEdldDtcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYoXCJzdHJpbmdcIiE9dHlwZW9mIGV8fGMobixcIm5hbWVcIil8fFIobixcIm5hbWVcIixlKSwocj1zKG4pKS5zb3VyY2V8fChyLnNvdXJjZT11LmpvaW4oXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTpcIlwiKSkpLHQhPT1iPyhpPyFhJiZ0W2VdJiYobz0hMCk6ZGVsZXRlIHRbZV0sbz90W2VdPW46Uih0LGUsbikpOm8/dFtlXT1uOmgoZSxuKX0pKEZ1bmN0aW9uLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzJiZlKHRoaXMpLnNvdXJjZXx8Syh0aGlzKX0pfSkscHQ9YixkdD1NYXRoLmNlaWwsdnQ9TWF0aC5mbG9vcixndD1NYXRoLm1pbix5dD1NYXRoLm1heCxtdD1NYXRoLm1pbixidD1mdW5jdGlvbihzKXtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe3ZhciByLGk9dSh0KSxvPXJ0KGkubGVuZ3RoKSxhPWZ1bmN0aW9uKHQsZSl7dD1udCh0KTtyZXR1cm4gdDwwP3l0KHQrZSwwKTptdCh0LGUpfShuLG8pO2lmKHMmJmUhPWUpe2Zvcig7YTxvOylpZigocj1pW2ErK10pIT1yKXJldHVybiEwfWVsc2UgZm9yKDthPG87YSsrKWlmKChzfHxhIGluIGkpJiZpW2FdPT09ZSlyZXR1cm4gc3x8YXx8MDtyZXR1cm4hcyYmLTF9fSxfdD17aW5jbHVkZXM6YnQoITApLGluZGV4T2Y6YnQoITEpfS5pbmRleE9mLHd0PVtcImNvbnN0cnVjdG9yXCIsXCJoYXNPd25Qcm9wZXJ0eVwiLFwiaXNQcm90b3R5cGVPZlwiLFwicHJvcGVydHlJc0VudW1lcmFibGVcIixcInRvTG9jYWxlU3RyaW5nXCIsXCJ0b1N0cmluZ1wiLFwidmFsdWVPZlwiXSxJdD13dC5jb25jYXQoXCJsZW5ndGhcIixcInByb3RvdHlwZVwiKSxUdD17ZjpPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc3x8ZnVuY3Rpb24odCl7cmV0dXJuIGl0KHQsSXQpfX0sRXQ9e2Y6T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc30sU3Q9ZXQoXCJSZWZsZWN0XCIsXCJvd25LZXlzXCIpfHxmdW5jdGlvbih0KXt2YXIgZT1UdC5mKG0odCkpLG49RXQuZjtyZXR1cm4gbj9lLmNvbmNhdChuKHQpKTplfSxDdD0vI3xcXC5wcm90b3R5cGVcXC4vLG89ZnVuY3Rpb24odCxlKXt0PU50W2t0KHQpXTtyZXR1cm4gdD09UnR8fHQhPUF0JiYoXCJmdW5jdGlvblwiPT10eXBlb2YgZT9nKGUpOiEhZSl9LGt0PW8ubm9ybWFsaXplPWZ1bmN0aW9uKHQpe3JldHVybiBTdHJpbmcodCkucmVwbGFjZShDdCxcIi5cIikudG9Mb3dlckNhc2UoKX0sTnQ9by5kYXRhPXt9LEF0PW8uTkFUSVZFPVwiTlwiLFJ0PW8uUE9MWUZJTEw9XCJQXCIsUHQ9byxPdD1rLmYsdD0hZyhmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPW51bGwsT2JqZWN0LmdldFByb3RvdHlwZU9mKG5ldyB0KSE9PXQucHJvdG90eXBlfSksRHQ9SihcIklFX1BST1RPXCIpLHh0PU9iamVjdC5wcm90b3R5cGUsTHQ9dD9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9c3QodCksYyh0LER0KT90W0R0XTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNvbnN0cnVjdG9yJiZ0IGluc3RhbmNlb2YgdC5jb25zdHJ1Y3Rvcj90LmNvbnN0cnVjdG9yLnByb3RvdHlwZTp0IGluc3RhbmNlb2YgT2JqZWN0P3h0Om51bGx9LE10PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8KFwiX19wcm90b19fXCJpbnt9P2Z1bmN0aW9uKCl7dmFyIG4scj0hMSx0PXt9O3RyeXsobj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5wcm90b3R5cGUsXCJfX3Byb3RvX19cIikuc2V0KS5jYWxsKHQsW10pLHI9dCBpbnN0YW5jZW9mIEFycmF5fWNhdGNoKHQpe31yZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gbSh0KSxmdW5jdGlvbih0KXtpZigheSh0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3Qgc2V0IFwiK1N0cmluZyh0KStcIiBhcyBhIHByb3RvdHlwZVwiKX0oZSkscj9uLmNhbGwodCxlKTp0Ll9fcHJvdG9fXz1lLHR9fSgpOnZvaWQgMCksRnQ9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKHQpe3JldHVybiBpdCh0LHd0KX0sVXQ9Zj9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbih0LGUpe20odCk7Zm9yKHZhciBuLHI9RnQoZSksaT1yLmxlbmd0aCxvPTA7bzxpOylBLmYodCxuPXJbbysrXSxlW25dKTtyZXR1cm4gdH0sanQ9ZXQoXCJkb2N1bWVudFwiLFwiZG9jdW1lbnRFbGVtZW50XCIpLHF0PVwicHJvdG90eXBlXCIsVnQ9XCJzY3JpcHRcIixCdD1KKFwiSUVfUFJPVE9cIiksS3Q9ZnVuY3Rpb24oKXt0cnl7aHQ9ZG9jdW1lbnQuZG9tYWluJiZuZXcgQWN0aXZlWE9iamVjdChcImh0bWxmaWxlXCIpfWNhdGNoKHQpe312YXIgdDtLdD1odD9mdW5jdGlvbih0KXt0LndyaXRlKGN0KFwiXCIpKSx0LmNsb3NlKCk7dmFyIGU9dC5wYXJlbnRXaW5kb3cuT2JqZWN0O3JldHVybiB0PW51bGwsZX0oaHQpOigodD1uKFwiaWZyYW1lXCIpKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGp0LmFwcGVuZENoaWxkKHQpLHQuc3JjPVN0cmluZyhcImphdmFzY3JpcHQ6XCIpLCh0PXQuY29udGVudFdpbmRvdy5kb2N1bWVudCkub3BlbigpLHQud3JpdGUoY3QoXCJkb2N1bWVudC5GPU9iamVjdFwiKSksdC5jbG9zZSgpLHQuRik7Zm9yKHZhciBlPXd0Lmxlbmd0aDtlLS07KWRlbGV0ZSBLdFtxdF1bd3RbZV1dO3JldHVybiBLdCgpfTskW0J0XT0hMDtmdW5jdGlvbiBXdCh0KXtyZXR1cm4gYyhYdCx0KXx8KFl0JiZjKEp0LHQpP1h0W3RdPUp0W3RdOlh0W3RdPSR0KFwiU3ltYm9sLlwiK3QpKSxYdFt0XX1mdW5jdGlvbiBIdCh0KXtyZXR1cm4gdm9pZCAwIT09dCYmKFp0LkFycmF5PT09dHx8ZWVbdGVdPT09dCl9ZnVuY3Rpb24gR3QodCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKHQpK1wiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO3JldHVybiB0fWZ1bmN0aW9uIHp0KHIsaSx0KXtpZihHdChyKSx2b2lkIDA9PT1pKXJldHVybiByO3N3aXRjaCh0KXtjYXNlIDA6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHIuY2FsbChpKX07Y2FzZSAxOnJldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gci5jYWxsKGksdCl9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gci5jYWxsKGksdCxlKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbih0LGUsbil7cmV0dXJuIHIuY2FsbChpLHQsZSxuKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHIuYXBwbHkoaSxhcmd1bWVudHMpfX12YXIgUXQ9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gbnVsbCE9PXQ/KHV0W3F0XT1tKHQpLG49bmV3IHV0LHV0W3F0XT1udWxsLG5bQnRdPXQpOm49S3QoKSx2b2lkIDA9PT1lP246VXQobixlKX0sWXQ9ISFPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzJiYhZyhmdW5jdGlvbigpe3JldHVybiFTdHJpbmcoU3ltYm9sKCkpfSkscz1ZdCYmIVN5bWJvbC5zaGFtJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yLFh0PXooXCJ3a3NcIiksSnQ9Yi5TeW1ib2wsJHQ9cz9KdDpKdCYmSnQud2l0aG91dFNldHRlcnx8eCxadD17fSx0ZT1XdChcIml0ZXJhdG9yXCIpLGVlPUFycmF5LnByb3RvdHlwZSxQPXt9O1BbV3QoXCJ0b1N0cmluZ1RhZ1wiKV09XCJ6XCI7ZnVuY3Rpb24gbmUodCl7aWYobnVsbCE9dClyZXR1cm4gdFtjZV18fHRbXCJAQGl0ZXJhdG9yXCJdfHxadFt1ZSh0KV19ZnVuY3Rpb24gcmUodCl7dmFyIGU9dC5yZXR1cm47cmV0dXJuIHZvaWQgMCE9PWUmJm0oZS5jYWxsKHQpKS52YWx1ZX1mdW5jdGlvbiBpZSh0LGUpe3RoaXMuc3RvcHBlZD10LHRoaXMucmVzdWx0PWV9ZnVuY3Rpb24gb2UodCxlLG4pe2Z1bmN0aW9uIHIodCl7cmV0dXJuIG8mJnJlKG8pLG5ldyBpZSghMCx0KX1mdW5jdGlvbiBpKHQpe3JldHVybiBmPyhtKHQpLGQ/dih0WzBdLHRbMV0scik6dih0WzBdLHRbMV0pKTpkP3YodCxyKTp2KHQpfXZhciBvLGEscyx1LGMsaCxsPW4mJm4udGhhdCxmPSEoIW58fCFuLkFTX0VOVFJJRVMpLHA9ISghbnx8IW4uSVNfSVRFUkFUT1IpLGQ9ISghbnx8IW4uSU5URVJSVVBURUQpLHY9enQoZSxsLDErZitkKTtpZihwKW89dDtlbHNle2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mKHA9bmUodCkpKXRocm93IFR5cGVFcnJvcihcIlRhcmdldCBpcyBub3QgaXRlcmFibGVcIik7aWYoSHQocCkpe2ZvcihhPTAscz1ydCh0Lmxlbmd0aCk7YTxzO2ErKylpZigodT1pKHRbYV0pKSYmdSBpbnN0YW5jZW9mIGllKXJldHVybiB1O3JldHVybiBuZXcgaWUoITEpfW89cC5jYWxsKHQpfWZvcihjPW8ubmV4dDshKGg9Yy5jYWxsKG8pKS5kb25lOyl7dHJ5e3U9aShoLnZhbHVlKX1jYXRjaCh0KXt0aHJvdyByZShvKSx0fWlmKFwib2JqZWN0XCI9PXR5cGVvZiB1JiZ1JiZ1IGluc3RhbmNlb2YgaWUpcmV0dXJuIHV9cmV0dXJuIG5ldyBpZSghMSl9dmFyIFc9XCJbb2JqZWN0IHpdXCI9PT1TdHJpbmcoUCksYWU9V3QoXCJ0b1N0cmluZ1RhZ1wiKSxzZT1cIkFyZ3VtZW50c1wiPT1yKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSksdWU9Vz9yOmZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiB2b2lkIDA9PT10P1wiVW5kZWZpbmVkXCI6bnVsbD09PXQ/XCJOdWxsXCI6XCJzdHJpbmdcIj09dHlwZW9mKHQ9ZnVuY3Rpb24odCxlKXt0cnl7cmV0dXJuIHRbZV19Y2F0Y2godCl7fX0oZT1PYmplY3QodCksYWUpKT90OnNlP3IoZSk6XCJPYmplY3RcIj09KHQ9cihlKSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY2FsbGVlP1wiQXJndW1lbnRzXCI6dH0sY2U9V3QoXCJpdGVyYXRvclwiKSxoZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYoIShuIGluc3RhbmNlb2YgaGUpKXJldHVybiBuZXcgaGUodCxlKTtNdCYmKG49TXQobmV3IEVycm9yKHZvaWQgMCksTHQobikpKSx2b2lkIDAhPT1lJiZSKG4sXCJtZXNzYWdlXCIsU3RyaW5nKGUpKTtlPVtdO3JldHVybiBvZSh0LGUucHVzaCx7dGhhdDplfSksUihuLFwiZXJyb3JzXCIsZSksbn07aGUucHJvdG90eXBlPVF0KEVycm9yLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6dig1LGhlKSxtZXNzYWdlOnYoNSxcIlwiKSxuYW1lOnYoNSxcIkFnZ3JlZ2F0ZUVycm9yXCIpfSksYXQoe2dsb2JhbDohMH0se0FnZ3JlZ2F0ZUVycm9yOmhlfSk7SD1XP3t9LnRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCJbb2JqZWN0IFwiK3VlKHRoaXMpK1wiXVwifTtXfHxmdChPYmplY3QucHJvdG90eXBlLFwidG9TdHJpbmdcIixILHt1bnNhZmU6ITB9KTtmdW5jdGlvbiBsZSh0LGUsbil7Zm9yKHZhciByIGluIGUpZnQodCxyLGVbcl0sbik7cmV0dXJuIHR9ZnVuY3Rpb24gZmUodCxlLG4pe3QmJiFjKHQ9bj90OnQucHJvdG90eXBlLHllKSYmZ2UodCx5ZSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOmV9KX1mdW5jdGlvbiBwZSh0KXt2YXIgZT1ldCh0KSx0PUEuZjtmJiZlJiYhZVttZV0mJnQoZSxtZSx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfWZ1bmN0aW9uIGRlKHQsZSxuKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBUeXBlRXJyb3IoXCJJbmNvcnJlY3QgXCIrKG4/bitcIiBcIjpcIlwiKStcImludm9jYXRpb25cIik7cmV0dXJuIHR9dmFyIHZlPWIuUHJvbWlzZSxnZT1BLmYseWU9V3QoXCJ0b1N0cmluZ1RhZ1wiKSxtZT1XdChcInNwZWNpZXNcIiksYmU9V3QoXCJpdGVyYXRvclwiKSxfZT0hMTt0cnl7dmFyIHdlPTAsSWU9e25leHQ6ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTohIXdlKyt9fSxyZXR1cm46ZnVuY3Rpb24oKXtfZT0hMH19O0llW2JlXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxBcnJheS5mcm9tKEllLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHFhKXt9ZnVuY3Rpb24gVGUodCxlKXtpZighZSYmIV9lKXJldHVybiExO3ZhciBuPSExO3RyeXt2YXIgcj17fTtyW2JlXT1mdW5jdGlvbigpe3JldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6bj0hMH19fX0sdChyKX1jYXRjaCh0KXt9cmV0dXJuIG59ZnVuY3Rpb24gRWUodCxlKXt2YXIgbjtyZXR1cm4gdm9pZCAwPT09KHQ9bSh0KS5jb25zdHJ1Y3Rvcil8fG51bGw9PShuPW0odClbTmVdKT9lOkd0KG4pfWZ1bmN0aW9uIFNlKHQpe3ZhciBlO3hlLmhhc093blByb3BlcnR5KHQpJiYoZT14ZVt0XSxkZWxldGUgeGVbdF0sZSgpKX1mdW5jdGlvbiBDZSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtTZSh0KX19dmFyIGtlLE5lPVd0KFwic3BlY2llc1wiKSxaPWV0KFwibmF2aWdhdG9yXCIsXCJ1c2VyQWdlbnRcIil8fFwiXCIsYnQ9LyhpcGhvbmV8aXBvZHxpcGFkKS4qYXBwbGV3ZWJraXQvaS50ZXN0KFopLEFlPVwicHJvY2Vzc1wiPT1yKGIucHJvY2VzcyksUmU9Yi5sb2NhdGlvbixvPWIuc2V0SW1tZWRpYXRlLHQ9Yi5jbGVhckltbWVkaWF0ZSxQZT1iLnByb2Nlc3MsUD1iLk1lc3NhZ2VDaGFubmVsLE9lPWIuRGlzcGF0Y2gsRGU9MCx4ZT17fSxMZT1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLFc9ZnVuY3Rpb24odCl7U2UodC5kYXRhKX0sSD1mdW5jdGlvbih0KXtiLnBvc3RNZXNzYWdlKHQrXCJcIixSZS5wcm90b2NvbCtcIi8vXCIrUmUuaG9zdCl9O28mJnR8fChvPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoOyllLnB1c2goYXJndW1lbnRzW24rK10pO3JldHVybiB4ZVsrK0RlXT1mdW5jdGlvbigpeyhcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6RnVuY3Rpb24odCkpLmFwcGx5KHZvaWQgMCxlKX0sa2UoRGUpLERlfSx0PWZ1bmN0aW9uKHQpe2RlbGV0ZSB4ZVt0XX0sQWU/a2U9ZnVuY3Rpb24odCl7UGUubmV4dFRpY2soQ2UodCkpfTpPZSYmT2Uubm93P2tlPWZ1bmN0aW9uKHQpe09lLm5vdyhDZSh0KSl9OlAmJiFidD8oV2U9KFA9bmV3IFApLnBvcnQyLFAucG9ydDEub25tZXNzYWdlPVcsa2U9enQoV2UucG9zdE1lc3NhZ2UsV2UsMSkpOmIuYWRkRXZlbnRMaXN0ZW5lciYmXCJmdW5jdGlvblwiPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFiLmltcG9ydFNjcmlwdHMmJlJlJiZcImZpbGU6XCIhPT1SZS5wcm90b2NvbCYmIWcoSCk/KGtlPUgsYi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLFcsITEpKTprZT1MZSBpbiBuKFwic2NyaXB0XCIpP2Z1bmN0aW9uKHQpe2p0LmFwcGVuZENoaWxkKG4oXCJzY3JpcHRcIikpW0xlXT1mdW5jdGlvbigpe2p0LnJlbW92ZUNoaWxkKHRoaXMpLFNlKHQpfX06ZnVuY3Rpb24odCl7c2V0VGltZW91dChDZSh0KSwwKX0pO3ZhciBNZSxGZSxVZSxqZSxxZSxWZSxCZSxLZSxXZT17c2V0Om8sY2xlYXI6dH0sSD1rLmYsSGU9V2Uuc2V0LFc9Yi5NdXRhdGlvbk9ic2VydmVyfHxiLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsbz1iLmRvY3VtZW50LEdlPWIucHJvY2Vzcyx0PWIuUHJvbWlzZSxIPUgoYixcInF1ZXVlTWljcm90YXNrXCIpLEg9SCYmSC52YWx1ZTtIfHwoTWU9ZnVuY3Rpb24oKXt2YXIgdCxlO2ZvcihBZSYmKHQ9R2UuZG9tYWluKSYmdC5leGl0KCk7RmU7KXtlPUZlLmZuLEZlPUZlLm5leHQ7dHJ5e2UoKX1jYXRjaCh0KXt0aHJvdyBGZT9qZSgpOlVlPXZvaWQgMCx0fX1VZT12b2lkIDAsdCYmdC5lbnRlcigpfSxqZT0hYnQmJiFBZSYmVyYmbz8ocWU9ITAsVmU9by5jcmVhdGVUZXh0Tm9kZShcIlwiKSxuZXcgVyhNZSkub2JzZXJ2ZShWZSx7Y2hhcmFjdGVyRGF0YTohMH0pLGZ1bmN0aW9uKCl7VmUuZGF0YT1xZT0hcWV9KTp0JiZ0LnJlc29sdmU/KEJlPXQucmVzb2x2ZSh2b2lkIDApLEtlPUJlLnRoZW4sZnVuY3Rpb24oKXtLZS5jYWxsKEJlLE1lKX0pOkFlP2Z1bmN0aW9uKCl7R2UubmV4dFRpY2soTWUpfTpmdW5jdGlvbigpe0hlLmNhbGwoYixNZSl9KTtmdW5jdGlvbiB6ZSh0KXt2YXIgbixyO3RoaXMucHJvbWlzZT1uZXcgdChmdW5jdGlvbih0LGUpe2lmKHZvaWQgMCE9PW58fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKFwiQmFkIFByb21pc2UgY29uc3RydWN0b3JcIik7bj10LHI9ZX0pLHRoaXMucmVzb2x2ZT1HdChuKSx0aGlzLnJlamVjdD1HdChyKX1mdW5jdGlvbiBRZSh0LGUpe3JldHVybiBtKHQpLHkoZSkmJmUuY29uc3RydWN0b3I9PT10P2U6KCgwLCh0PUplLmYodCkpLnJlc29sdmUpKGUpLHQucHJvbWlzZSl9ZnVuY3Rpb24gWWUodCl7dHJ5e3JldHVybntlcnJvcjohMSx2YWx1ZTp0KCl9fWNhdGNoKHQpe3JldHVybntlcnJvcjohMCx2YWx1ZTp0fX19dmFyIFhlPUh8fGZ1bmN0aW9uKHQpe3Q9e2ZuOnQsbmV4dDp2b2lkIDB9O1VlJiYoVWUubmV4dD10KSxGZXx8KEZlPXQsamUoKSksVWU9dH0sSmU9e2Y6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB6ZSh0KX19LEg9Yi5wcm9jZXNzLEg9SCYmSC52ZXJzaW9ucyxIPUgmJkgudjg7SD9Qbj0oU249SC5zcGxpdChcIi5cIikpWzBdK1NuWzFdOlomJighKFNuPVoubWF0Y2goL0VkZ2VcXC8oXFxkKykvKSl8fDc0PD1TblsxXSkmJihTbj1aLm1hdGNoKC9DaHJvbWVcXC8oXFxkKykvKSkmJihQbj1TblsxXSk7ZnVuY3Rpb24gJGUodCl7dmFyIGU7cmV0dXJuISgheSh0KXx8XCJmdW5jdGlvblwiIT10eXBlb2YoZT10LnRoZW4pKSYmZX1mdW5jdGlvbiBaZShsLGYpe3ZhciBwO2wubm90aWZpZWR8fChsLm5vdGlmaWVkPSEwLHA9bC5yZWFjdGlvbnMsWGUoZnVuY3Rpb24oKXtmb3IodmFyIHQ9bC52YWx1ZSxlPTE9PWwuc3RhdGUsbj0wO3AubGVuZ3RoPm47KXt2YXIgcixpLG8sYT1wW24rK10scz1lP2Eub2s6YS5mYWlsLHU9YS5yZXNvbHZlLGM9YS5yZWplY3QsaD1hLmRvbWFpbjt0cnl7cz8oZXx8KDI9PT1sLnJlamVjdGlvbiYmTm4obCksbC5yZWplY3Rpb249MSksITA9PT1zP3I9dDooaCYmaC5lbnRlcigpLHI9cyh0KSxoJiYoaC5leGl0KCksbz0hMCkpLHI9PT1hLnByb21pc2U/YyhnbihcIlByb21pc2UtY2hhaW4gY3ljbGVcIikpOihpPSRlKHIpKT9pLmNhbGwocix1LGMpOnUocikpOmModCl9Y2F0Y2godCl7aCYmIW8mJmguZXhpdCgpLGModCl9fWwucmVhY3Rpb25zPVtdLGwubm90aWZpZWQ9ITEsZiYmIWwucmVqZWN0aW9uJiZDbihsKX0pKX1mdW5jdGlvbiB0bih0LGUsbil7dmFyIHIsaTtJbj8oKHI9eW4uY3JlYXRlRXZlbnQoXCJFdmVudFwiKSkucHJvbWlzZT1lLHIucmVhc29uPW4sci5pbml0RXZlbnQodCwhMSwhMCksYi5kaXNwYXRjaEV2ZW50KHIpKTpyPXtwcm9taXNlOmUscmVhc29uOm59LCFUbiYmKGk9YltcIm9uXCIrdF0pP2kocik6dD09PUVuJiZmdW5jdGlvbih0LGUpe3ZhciBuPWIuY29uc29sZTtuJiZuLmVycm9yJiYoMT09PWFyZ3VtZW50cy5sZW5ndGg/bi5lcnJvcih0KTpuLmVycm9yKHQsZSkpfShcIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblwiLG4pfWZ1bmN0aW9uIGVuKGUsbixyKXtyZXR1cm4gZnVuY3Rpb24odCl7ZShuLHQscil9fWZ1bmN0aW9uIG5uKHQsZSxuKXt0LmRvbmV8fCh0LmRvbmU9ITAsKHQ9bj9uOnQpLnZhbHVlPWUsdC5zdGF0ZT0yLFplKHQsITApKX12YXIgcm4sb24sYW4sc24sdW49UG4mJitQbixjbj1XZS5zZXQsaG49V3QoXCJzcGVjaWVzXCIpLGxuPVwiUHJvbWlzZVwiLGZuPWx0LmdldCxwbj1sdC5zZXQsZG49bHQuZ2V0dGVyRm9yKGxuKSx2bj12ZSxnbj1iLlR5cGVFcnJvcix5bj1iLmRvY3VtZW50LG1uPWIucHJvY2Vzcyxibj1ldChcImZldGNoXCIpLF9uPUplLmYsd249X24sSW49ISEoeW4mJnluLmNyZWF0ZUV2ZW50JiZiLmRpc3BhdGNoRXZlbnQpLFRuPVwiZnVuY3Rpb25cIj09dHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCxFbj1cInVuaGFuZGxlZHJlamVjdGlvblwiLFo9UHQobG4sZnVuY3Rpb24oKXtpZighKEsodm4pIT09U3RyaW5nKHZuKSkpe2lmKDY2PT09dW4pcmV0dXJuITA7aWYoIUFlJiYhVG4pcmV0dXJuITB9aWYoNTE8PXVuJiYvbmF0aXZlIGNvZGUvLnRlc3Qodm4pKXJldHVybiExO2Z1bmN0aW9uIHQodCl7dChmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9KX12YXIgZT12bi5yZXNvbHZlKDEpO3JldHVybihlLmNvbnN0cnVjdG9yPXt9KVtobl09dCwhKGUudGhlbihmdW5jdGlvbigpe30paW5zdGFuY2VvZiB0KX0pLFNuPVp8fCFUZShmdW5jdGlvbih0KXt2bi5hbGwodCkuY2F0Y2goZnVuY3Rpb24oKXt9KX0pLENuPWZ1bmN0aW9uKGkpe2NuLmNhbGwoYixmdW5jdGlvbigpe3ZhciB0LGU9aS5mYWNhZGUsbj1pLnZhbHVlLHI9a24oaSk7aWYociYmKHQ9WWUoZnVuY3Rpb24oKXtBZT9tbi5lbWl0KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsbixlKTp0bihFbixlLG4pfSksaS5yZWplY3Rpb249QWV8fGtuKGkpPzI6MSx0LmVycm9yKSl0aHJvdyB0LnZhbHVlfSl9LGtuPWZ1bmN0aW9uKHQpe3JldHVybiAxIT09dC5yZWplY3Rpb24mJiF0LnBhcmVudH0sTm49ZnVuY3Rpb24oZSl7Y24uY2FsbChiLGZ1bmN0aW9uKCl7dmFyIHQ9ZS5mYWNhZGU7QWU/bW4uZW1pdChcInJlamVjdGlvbkhhbmRsZWRcIix0KTp0bihcInJlamVjdGlvbmhhbmRsZWRcIix0LGUudmFsdWUpfSl9LEFuPWZ1bmN0aW9uKG4sdCxlKXtpZighbi5kb25lKXtuLmRvbmU9ITAsZSYmKG49ZSk7dHJ5e2lmKG4uZmFjYWRlPT09dCl0aHJvdyBnbihcIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmXCIpO3ZhciByPSRlKHQpO3I/WGUoZnVuY3Rpb24oKXt2YXIgZT17ZG9uZTohMX07dHJ5e3IuY2FsbCh0LGVuKEFuLGUsbiksZW4obm4sZSxuKSl9Y2F0Y2godCl7bm4oZSx0LG4pfX0pOihuLnZhbHVlPXQsbi5zdGF0ZT0xLFplKG4sITEpKX1jYXRjaCh0KXtubih7ZG9uZTohMX0sdCxuKX19fTtaJiYodm49ZnVuY3Rpb24odCl7ZGUodGhpcyx2bixsbiksR3QodCkscm4uY2FsbCh0aGlzKTt2YXIgZT1mbih0aGlzKTt0cnl7dChlbihBbixlKSxlbihubixlKSl9Y2F0Y2godCl7bm4oZSx0KX19LChybj1mdW5jdGlvbih0KXtwbih0aGlzLHt0eXBlOmxuLGRvbmU6ITEsbm90aWZpZWQ6ITEscGFyZW50OiExLHJlYWN0aW9uczpbXSxyZWplY3Rpb246ITEsc3RhdGU6MCx2YWx1ZTp2b2lkIDB9KX0pLnByb3RvdHlwZT1sZSh2bi5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24odCxlKXt2YXIgbj1kbih0aGlzKSxyPV9uKEVlKHRoaXMsdm4pKTtyZXR1cm4gci5vaz1cImZ1bmN0aW9uXCIhPXR5cGVvZiB0fHx0LHIuZmFpbD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLHIuZG9tYWluPUFlP21uLmRvbWFpbjp2b2lkIDAsbi5wYXJlbnQ9ITAsbi5yZWFjdGlvbnMucHVzaChyKSwwIT1uLnN0YXRlJiZaZShuLCExKSxyLnByb21pc2V9LGNhdGNoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLHQpfX0pLG9uPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHJuLGU9Zm4odCk7dGhpcy5wcm9taXNlPXQsdGhpcy5yZXNvbHZlPWVuKEFuLGUpLHRoaXMucmVqZWN0PWVuKG5uLGUpfSxKZS5mPV9uPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09dm58fHQ9PT1hbj9uZXcgb246d24odCl9LFwiZnVuY3Rpb25cIj09dHlwZW9mIHZlJiYoc249dmUucHJvdG90eXBlLnRoZW4sZnQodmUucHJvdG90eXBlLFwidGhlblwiLGZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztyZXR1cm4gbmV3IHZuKGZ1bmN0aW9uKHQsZSl7c24uY2FsbChuLHQsZSl9KS50aGVuKHQsZSl9LHt1bnNhZmU6ITB9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBibiYmYXQoe2dsb2JhbDohMCxlbnVtZXJhYmxlOiEwLGZvcmNlZDohMH0se2ZldGNoOmZ1bmN0aW9uKHQpe3JldHVybiBRZSh2bixibi5hcHBseShiLGFyZ3VtZW50cykpfX0pKSksYXQoe2dsb2JhbDohMCx3cmFwOiEwLGZvcmNlZDpafSx7UHJvbWlzZTp2bn0pLGZlKHZuLGxuLCExKSxwZShsbiksYW49ZXQobG4pLGF0KHt0YXJnZXQ6bG4sc3RhdDohMCxmb3JjZWQ6Wn0se3JlamVjdDpmdW5jdGlvbih0KXt2YXIgZT1fbih0aGlzKTtyZXR1cm4gZS5yZWplY3QuY2FsbCh2b2lkIDAsdCksZS5wcm9taXNlfX0pLGF0KHt0YXJnZXQ6bG4sc3RhdDohMCxmb3JjZWQ6Wn0se3Jlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIFFlKHRoaXMsdCl9fSksYXQoe3RhcmdldDpsbixzdGF0OiEwLGZvcmNlZDpTbn0se2FsbDpmdW5jdGlvbih0KXt2YXIgcz10aGlzLGU9X24ocyksdT1lLnJlc29sdmUsYz1lLnJlamVjdCxuPVllKGZ1bmN0aW9uKCl7dmFyIHI9R3Qocy5yZXNvbHZlKSxpPVtdLG89MCxhPTE7b2UodCxmdW5jdGlvbih0KXt2YXIgZT1vKyssbj0hMTtpLnB1c2godm9pZCAwKSxhKyssci5jYWxsKHMsdCkudGhlbihmdW5jdGlvbih0KXtufHwobj0hMCxpW2VdPXQsLS1hfHx1KGkpKX0sYyl9KSwtLWF8fHUoaSl9KTtyZXR1cm4gbi5lcnJvciYmYyhuLnZhbHVlKSxlLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxyPV9uKG4pLGk9ci5yZWplY3QsZT1ZZShmdW5jdGlvbigpe3ZhciBlPUd0KG4ucmVzb2x2ZSk7b2UodCxmdW5jdGlvbih0KXtlLmNhbGwobix0KS50aGVuKHIucmVzb2x2ZSxpKX0pfSk7cmV0dXJuIGUuZXJyb3ImJmkoZS52YWx1ZSksci5wcm9taXNlfX0pLGF0KHt0YXJnZXQ6XCJQcm9taXNlXCIsc3RhdDohMH0se2FsbFNldHRsZWQ6ZnVuY3Rpb24odCl7dmFyIHM9dGhpcyxlPUplLmYocyksdT1lLnJlc29sdmUsbj1lLnJlamVjdCxyPVllKGZ1bmN0aW9uKCl7dmFyIHI9R3Qocy5yZXNvbHZlKSxpPVtdLG89MCxhPTE7b2UodCxmdW5jdGlvbih0KXt2YXIgZT1vKyssbj0hMTtpLnB1c2godm9pZCAwKSxhKyssci5jYWxsKHMsdCkudGhlbihmdW5jdGlvbih0KXtufHwobj0hMCxpW2VdPXtzdGF0dXM6XCJmdWxmaWxsZWRcIix2YWx1ZTp0fSwtLWF8fHUoaSkpfSxmdW5jdGlvbih0KXtufHwobj0hMCxpW2VdPXtzdGF0dXM6XCJyZWplY3RlZFwiLHJlYXNvbjp0fSwtLWF8fHUoaSkpfSl9KSwtLWF8fHUoaSl9KTtyZXR1cm4gci5lcnJvciYmbihyLnZhbHVlKSxlLnByb21pc2V9fSk7dmFyIFJuPVwiTm8gb25lIHByb21pc2UgcmVzb2x2ZWRcIjthdCh7dGFyZ2V0OlwiUHJvbWlzZVwiLHN0YXQ6ITB9LHthbnk6ZnVuY3Rpb24odCl7dmFyIHU9dGhpcyxlPUplLmYodSksYz1lLnJlc29sdmUsaD1lLnJlamVjdCxuPVllKGZ1bmN0aW9uKCl7dmFyIHI9R3QodS5yZXNvbHZlKSxpPVtdLG89MCxhPTEscz0hMTtvZSh0LGZ1bmN0aW9uKHQpe3ZhciBlPW8rKyxuPSExO2kucHVzaCh2b2lkIDApLGErKyxyLmNhbGwodSx0KS50aGVuKGZ1bmN0aW9uKHQpe258fHN8fChzPSEwLGModCkpfSxmdW5jdGlvbih0KXtufHxzfHwobj0hMCxpW2VdPXQsLS1hfHxoKG5ldyhldChcIkFnZ3JlZ2F0ZUVycm9yXCIpKShpLFJuKSkpfSl9KSwtLWF8fGgobmV3KGV0KFwiQWdncmVnYXRlRXJyb3JcIikpKGksUm4pKX0pO3JldHVybiBuLmVycm9yJiZoKG4udmFsdWUpLGUucHJvbWlzZX19KTt2YXIgUG49ISF2ZSYmZyhmdW5jdGlvbigpe3ZlLnByb3RvdHlwZS5maW5hbGx5LmNhbGwoe3RoZW46ZnVuY3Rpb24oKXt9fSxmdW5jdGlvbigpe30pfSk7YXQoe3RhcmdldDpcIlByb21pc2VcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpQbn0se2ZpbmFsbHk6ZnVuY3Rpb24oZSl7dmFyIG49RWUodGhpcyxldChcIlByb21pc2VcIikpLHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgZTtyZXR1cm4gdGhpcy50aGVuKHQ/ZnVuY3Rpb24odCl7cmV0dXJuIFFlKG4sZSgpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX06ZSx0P2Z1bmN0aW9uKHQpe3JldHVybiBRZShuLGUoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IHR9KX06ZSl9fSksXCJmdW5jdGlvblwiIT10eXBlb2YgdmV8fHZlLnByb3RvdHlwZS5maW5hbGx5fHxmdCh2ZS5wcm90b3R5cGUsXCJmaW5hbGx5XCIsZXQoXCJQcm9taXNlXCIpLnByb3RvdHlwZS5maW5hbGx5KTtXZT1mdW5jdGlvbihvKXtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbixyPVN0cmluZyhhKHQpKSxpPW50KGUpLHQ9ci5sZW5ndGg7cmV0dXJuIGk8MHx8dDw9aT9vP1wiXCI6dm9pZCAwOihlPXIuY2hhckNvZGVBdChpKSk8NTUyOTZ8fDU2MzE5PGV8fGkrMT09PXR8fChuPXIuY2hhckNvZGVBdChpKzEpKTw1NjMyMHx8NTczNDM8bj9vP3IuY2hhckF0KGkpOmU6bz9yLnNsaWNlKGksaSsyKTpuLTU2MzIwKyhlLTU1Mjk2PDwxMCkrNjU1MzZ9fSxaPXtjb2RlQXQ6V2UoITEpLGNoYXJBdDpXZSghMCl9LFNuPVd0KFwiaXRlcmF0b3JcIiksUG49ITE7W10ua2V5cyYmKFwibmV4dFwiaW4oUW49W10ua2V5cygpKT8obHI9THQoTHQoUW4pKSkhPT1PYmplY3QucHJvdG90eXBlJiYoZHI9bHIpOlBuPSEwKSxjKGRyPW51bGw9PWRyP3t9OmRyLFNuKXx8UihkcixTbixmdW5jdGlvbigpe3JldHVybiB0aGlzfSk7ZnVuY3Rpb24gT24oKXtyZXR1cm4gdGhpc31mdW5jdGlvbiBEbigpe3JldHVybiB0aGlzfWZ1bmN0aW9uIHhuKHQsZSxuLHIsaSxvLGEpe2Z1bmN0aW9uIHModCl7aWYodD09PWkmJmQpcmV0dXJuIGQ7aWYoIUZuJiZ0IGluIGYpcmV0dXJuIGZbdF07c3dpdGNoKHQpe2Nhc2VcImtleXNcIjpjYXNlIGpuOmNhc2UgcW46cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzKX19IWZ1bmN0aW9uKHQsZSxuKXtlKz1cIiBJdGVyYXRvclwiO3QucHJvdG90eXBlPVF0KExuLHtuZXh0OnYoMSxuKX0pLGZlKHQsZSwhMSksWnRbZV09T259KG4sZSxyKTt2YXIgdSxjLGg9ZStcIiBJdGVyYXRvclwiLGw9ITEsZj10LnByb3RvdHlwZSxwPWZbVW5dfHxmW1wiQEBpdGVyYXRvclwiXXx8aSYmZltpXSxkPSFGbiYmcHx8cyhpKTtpZigocj1cIkFycmF5XCI9PWUmJmYuZW50cmllc3x8cCkmJih0PUx0KHIuY2FsbChuZXcgdCkpLE1uIT09T2JqZWN0LnByb3RvdHlwZSYmdC5uZXh0JiYoTHQodCkhPT1NbiYmKE10P010KHQsTW4pOlwiZnVuY3Rpb25cIiE9dHlwZW9mIHRbVW5dJiZSKHQsVW4sRG4pKSxmZSh0LGgsITApKSksaT09am4mJnAmJnAubmFtZSE9PWpuJiYobD0hMCxkPWZ1bmN0aW9uKCl7cmV0dXJuIHAuY2FsbCh0aGlzKX0pLGZbVW5dIT09ZCYmUihmLFVuLGQpLFp0W2VdPWQsaSlpZih1PXt2YWx1ZXM6cyhqbiksa2V5czpvP2Q6cyhcImtleXNcIiksZW50cmllczpzKHFuKX0sYSlmb3IoYyBpbiB1KSFGbiYmIWwmJmMgaW4gZnx8ZnQoZixjLHVbY10pO2Vsc2UgYXQoe3RhcmdldDplLHByb3RvOiEwLGZvcmNlZDpGbnx8bH0sdSk7cmV0dXJuIHV9dmFyIFdlPXtJdGVyYXRvclByb3RvdHlwZTpkcixCVUdHWV9TQUZBUklfSVRFUkFUT1JTOlBufSxMbj1XZS5JdGVyYXRvclByb3RvdHlwZSxNbj1XZS5JdGVyYXRvclByb3RvdHlwZSxGbj1XZS5CVUdHWV9TQUZBUklfSVRFUkFUT1JTLFVuPVd0KFwiaXRlcmF0b3JcIiksam49XCJ2YWx1ZXNcIixxbj1cImVudHJpZXNcIixWbj1aLmNoYXJBdCxCbj1cIlN0cmluZyBJdGVyYXRvclwiLEtuPWx0LnNldCxXbj1sdC5nZXR0ZXJGb3IoQm4pO3huKFN0cmluZyxcIlN0cmluZ1wiLGZ1bmN0aW9uKHQpe0tuKHRoaXMse3R5cGU6Qm4sc3RyaW5nOlN0cmluZyh0KSxpbmRleDowfSl9LGZ1bmN0aW9uKCl7dmFyIHQ9V24odGhpcyksZT10LnN0cmluZyxuPXQuaW5kZXg7cmV0dXJuIG4+PWUubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KG49Vm4oZSxuKSx0LmluZGV4Kz1uLmxlbmd0aCx7dmFsdWU6bixkb25lOiExfSl9KTt2YXIgSG49e0NTU1J1bGVMaXN0OjAsQ1NTU3R5bGVEZWNsYXJhdGlvbjowLENTU1ZhbHVlTGlzdDowLENsaWVudFJlY3RMaXN0OjAsRE9NUmVjdExpc3Q6MCxET01TdHJpbmdMaXN0OjAsRE9NVG9rZW5MaXN0OjEsRGF0YVRyYW5zZmVySXRlbUxpc3Q6MCxGaWxlTGlzdDowLEhUTUxBbGxDb2xsZWN0aW9uOjAsSFRNTENvbGxlY3Rpb246MCxIVE1MRm9ybUVsZW1lbnQ6MCxIVE1MU2VsZWN0RWxlbWVudDowLE1lZGlhTGlzdDowLE1pbWVUeXBlQXJyYXk6MCxOYW1lZE5vZGVNYXA6MCxOb2RlTGlzdDoxLFBhaW50UmVxdWVzdExpc3Q6MCxQbHVnaW46MCxQbHVnaW5BcnJheTowLFNWR0xlbmd0aExpc3Q6MCxTVkdOdW1iZXJMaXN0OjAsU1ZHUGF0aFNlZ0xpc3Q6MCxTVkdQb2ludExpc3Q6MCxTVkdTdHJpbmdMaXN0OjAsU1ZHVHJhbnNmb3JtTGlzdDowLFNvdXJjZUJ1ZmZlckxpc3Q6MCxTdHlsZVNoZWV0TGlzdDowLFRleHRUcmFja0N1ZUxpc3Q6MCxUZXh0VHJhY2tMaXN0OjAsVG91Y2hMaXN0OjB9LEduPVd0KFwidW5zY29wYWJsZXNcIiksem49QXJyYXkucHJvdG90eXBlO251bGw9PXpuW0duXSYmQS5mKHpuLEduLHtjb25maWd1cmFibGU6ITAsdmFsdWU6UXQobnVsbCl9KTt2YXIgUW49ZnVuY3Rpb24odCl7em5bR25dW3RdPSEwfSxZbj1cIkFycmF5IEl0ZXJhdG9yXCIsWG49bHQuc2V0LEpuPWx0LmdldHRlckZvcihZbiksJG49eG4oQXJyYXksXCJBcnJheVwiLGZ1bmN0aW9uKHQsZSl7WG4odGhpcyx7dHlwZTpZbix0YXJnZXQ6dSh0KSxpbmRleDowLGtpbmQ6ZX0pfSxmdW5jdGlvbigpe3ZhciB0PUpuKHRoaXMpLGU9dC50YXJnZXQsbj10LmtpbmQscj10LmluZGV4Kys7cmV0dXJuIWV8fHI+PWUubGVuZ3RoP3t2YWx1ZTp0LnRhcmdldD12b2lkIDAsZG9uZTohMH06XCJrZXlzXCI9PW4/e3ZhbHVlOnIsZG9uZTohMX06XCJ2YWx1ZXNcIj09bj97dmFsdWU6ZVtyXSxkb25lOiExfTp7dmFsdWU6W3IsZVtyXV0sZG9uZTohMX19LFwidmFsdWVzXCIpO1p0LkFyZ3VtZW50cz1adC5BcnJheSxRbihcImtleXNcIiksUW4oXCJ2YWx1ZXNcIiksUW4oXCJlbnRyaWVzXCIpO3ZhciBabix0cj1XdChcIml0ZXJhdG9yXCIpLGVyPVd0KFwidG9TdHJpbmdUYWdcIiksbnI9JG4udmFsdWVzO2ZvcihabiBpbiBIbil7dmFyIHJyPWJbWm5dLGlyPXJyJiZyci5wcm90b3R5cGU7aWYoaXIpe2lmKGlyW3RyXSE9PW5yKXRyeXtSKGlyLHRyLG5yKX1jYXRjaChxYSl7aXJbdHJdPW5yfWlmKGlyW2VyXXx8UihpcixlcixabiksSG5bWm5dKWZvcih2YXIgb3IgaW4gJG4paWYoaXJbb3JdIT09JG5bb3JdKXRyeXtSKGlyLG9yLCRuW29yXSl9Y2F0Y2gocWEpe2lyW29yXT0kbltvcl19fX1wdC5Qcm9taXNlO2F0KHt0YXJnZXQ6XCJQcm9taXNlXCIsc3RhdDohMH0se3RyeTpmdW5jdGlvbih0KXt2YXIgZT1KZS5mKHRoaXMpLHQ9WWUodCk7cmV0dXJuKHQuZXJyb3I/ZS5yZWplY3Q6ZS5yZXNvbHZlKSh0LnZhbHVlKSxlLnByb21pc2V9fSk7ZnVuY3Rpb24gYXIodCxlKXt2YXIgbjtyZXR1cm4gbmV3KHZvaWQgMD09PShuPXVyKHQpJiYoXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LmNvbnN0cnVjdG9yKSYmKG49PT1BcnJheXx8dXIobi5wcm90b3R5cGUpKXx8eShuKSYmbnVsbD09PShuPW5bY3JdKSk/dm9pZCAwOm4pP0FycmF5Om4pKDA9PT1lPzA6ZSl9ZnVuY3Rpb24gc3IodCl7dGhyb3cgdH12YXIgdXI9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJBcnJheVwiPT1yKHQpfSxjcj1XdChcInNwZWNpZXNcIiksaHI9W10ucHVzaCxscj1mdW5jdGlvbihmKXt2YXIgcD0xPT1mLGQ9Mj09Zix2PTM9PWYsZz00PT1mLHk9Nj09ZixtPTc9PWYsYj01PT1mfHx5O3JldHVybiBmdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIGksbyxhPXN0KHQpLHM9dyhhKSx1PXp0KGUsbiwzKSxjPXJ0KHMubGVuZ3RoKSxoPTAscj1yfHxhcixsPXA/cih0LGMpOmR8fG0/cih0LDApOnZvaWQgMDtoPGM7aCsrKWlmKChifHxoIGluIHMpJiYobz11KGk9c1toXSxoLGEpLGYpKWlmKHApbFtoXT1vO2Vsc2UgaWYobylzd2l0Y2goZil7Y2FzZSAzOnJldHVybiEwO2Nhc2UgNTpyZXR1cm4gaTtjYXNlIDY6cmV0dXJuIGg7Y2FzZSAyOmhyLmNhbGwobCxpKX1lbHNlIHN3aXRjaChmKXtjYXNlIDQ6cmV0dXJuITE7Y2FzZSA3OmhyLmNhbGwobCxpKX1yZXR1cm4geT8tMTp2fHxnP2c6bH19LFNuPXtmb3JFYWNoOmxyKDApLG1hcDpscigxKSxmaWx0ZXI6bHIoMiksc29tZTpscigzKSxldmVyeTpscig0KSxmaW5kOmxyKDUpLGZpbmRJbmRleDpscig2KSxmaWx0ZXJPdXQ6bHIoNyl9LGZyPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxwcj17fSxkcj1mdW5jdGlvbih0LGUpe2lmKGMocHIsdCkpcmV0dXJuIHByW3RdO3ZhciBuPVtdW3RdLHI9ISFjKGU9ZXx8e30sXCJBQ0NFU1NPUlNcIikmJmUuQUNDRVNTT1JTLGk9YyhlLDApP2VbMF06c3Isbz1jKGUsMSk/ZVsxXTp2b2lkIDA7cmV0dXJuIHByW3RdPSEhbiYmIWcoZnVuY3Rpb24oKXtpZihyJiYhZilyZXR1cm4gMTt2YXIgdD17bGVuZ3RoOi0xfTtyP2ZyKHQsMSx7ZW51bWVyYWJsZTohMCxnZXQ6c3J9KTp0WzFdPTEsbi5jYWxsKHQsaSxvKX0pfSx2cj1Tbi5maW5kLFBuPVwiZmluZFwiLGdyPSEwLFdlPWRyKFBuKTtQbiBpbltdJiZBcnJheSgxKVtQbl0oZnVuY3Rpb24oKXtncj0hMX0pLGF0KHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDpncnx8IVdlfSx7ZmluZDpmdW5jdGlvbih0KXtyZXR1cm4gdnIodGhpcyx0LDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxRbihQbik7dmFyIHlyPUZ1bmN0aW9uLmNhbGwsWj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHp0KHlyLGJbdF0ucHJvdG90eXBlW2VdLG4pfSxtcj0oWihcIkFycmF5XCIsXCJmaW5kXCIpLFNuLmZpbmRJbmRleCksbHI9XCJmaW5kSW5kZXhcIixicj0hMCxXZT1kcihscik7bHIgaW5bXSYmQXJyYXkoMSlbbHJdKGZ1bmN0aW9uKCl7YnI9ITF9KSxhdCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6YnJ8fCFXZX0se2ZpbmRJbmRleDpmdW5jdGlvbih0KXtyZXR1cm4gbXIodGhpcyx0LDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxRbihscik7ZnVuY3Rpb24gX3IodCxlLG4peyhlPWkoZSkpaW4gdD9BLmYodCxlLHYoMCxuKSk6dFtlXT1ufVooXCJBcnJheVwiLFwiZmluZEluZGV4XCIpO1BuPSFUZShmdW5jdGlvbih0KXtBcnJheS5mcm9tKHQpfSk7YXQoe3RhcmdldDpcIkFycmF5XCIsc3RhdDohMCxmb3JjZWQ6UG59LHtmcm9tOmZ1bmN0aW9uKHQpe3ZhciBlLG4scixpLG8sYSxzPXN0KHQpLHU9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcz90aGlzOkFycmF5LGM9YXJndW1lbnRzLmxlbmd0aCxoPTE8Yz9hcmd1bWVudHNbMV06dm9pZCAwLGw9dm9pZCAwIT09aCx0PW5lKHMpLGY9MDtpZihsJiYoaD16dChoLDI8Yz9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSxudWxsPT10fHx1PT1BcnJheSYmSHQodCkpZm9yKG49bmV3IHUoZT1ydChzLmxlbmd0aCkpO2Y8ZTtmKyspYT1sP2goc1tmXSxmKTpzW2ZdLF9yKG4sZixhKTtlbHNlIGZvcihvPShpPXQuY2FsbChzKSkubmV4dCxuPW5ldyB1OyEocj1vLmNhbGwoaSkpLmRvbmU7ZisrKWE9bD9mdW5jdGlvbihlLHQsbixyKXt0cnl7cmV0dXJuIHI/dChtKG4pWzBdLG5bMV0pOnQobil9Y2F0Y2godCl7dGhyb3cgcmUoZSksdH19KGksaCxbci52YWx1ZSxmXSwhMCk6ci52YWx1ZSxfcihuLGYsYSk7cmV0dXJuIG4ubGVuZ3RoPWYsbn19KTtwdC5BcnJheS5mcm9tO3ZhciB3cixJcixUcj1Tbi5zb21lLFdlPSEhKElyPVtdW1wic29tZVwiXSkmJmcoZnVuY3Rpb24oKXtJci5jYWxsKG51bGwsd3J8fGZ1bmN0aW9uKCl7dGhyb3cgMX0sMSl9KSxRbj1kcihcInNvbWVcIik7YXQoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOiFXZXx8IVFufSx7c29tZTpmdW5jdGlvbih0KXtyZXR1cm4gVHIodGhpcyx0LDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwKX19KTtaKFwiQXJyYXlcIixcInNvbWVcIik7ZnVuY3Rpb24gRXIodCl7cmV0dXJuISF5KHQpJiYodD11ZSh0KSxjKE9yLHQpfHxjKERyLHQpKX12YXIgU3IsbHI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgRGF0YVZpZXcsUG49QS5mLENyPWIuSW50OEFycmF5LGtyPUNyJiZDci5wcm90b3R5cGUsZHI9Yi5VaW50OENsYW1wZWRBcnJheSxXZT1kciYmZHIucHJvdG90eXBlLE5yPUNyJiZMdChDciksQXI9a3ImJkx0KGtyKSxRbj1PYmplY3QucHJvdG90eXBlLGRyPShRbi5pc1Byb3RvdHlwZU9mLFd0KFwidG9TdHJpbmdUYWdcIikpLFJyPXgoXCJUWVBFRF9BUlJBWV9UQUdcIiksUHI9bHImJiEhTXQmJlwiT3BlcmFcIiE9PXVlKGIub3BlcmEpLGxyPSExLE9yPXtJbnQ4QXJyYXk6MSxVaW50OEFycmF5OjEsVWludDhDbGFtcGVkQXJyYXk6MSxJbnQxNkFycmF5OjIsVWludDE2QXJyYXk6MixJbnQzMkFycmF5OjQsVWludDMyQXJyYXk6NCxGbG9hdDMyQXJyYXk6NCxGbG9hdDY0QXJyYXk6OH0sRHI9e0JpZ0ludDY0QXJyYXk6OCxCaWdVaW50NjRBcnJheTo4fTtmb3IoU3IgaW4gT3IpYltTcl18fChQcj0hMSk7aWYoKCFQcnx8XCJmdW5jdGlvblwiIT10eXBlb2YgTnJ8fE5yPT09RnVuY3Rpb24ucHJvdG90eXBlKSYmKE5yPWZ1bmN0aW9uKCl7dGhyb3cgVHlwZUVycm9yKFwiSW5jb3JyZWN0IGludm9jYXRpb25cIil9LFByKSlmb3IoU3IgaW4gT3IpYltTcl0mJk10KGJbU3JdLE5yKTtpZigoIVByfHwhQXJ8fEFyPT09UW4pJiYoQXI9TnIucHJvdG90eXBlLFByKSlmb3IoU3IgaW4gT3IpYltTcl0mJk10KGJbU3JdLnByb3RvdHlwZSxBcik7aWYoUHImJkx0KFdlKSE9PUFyJiZNdChXZSxBciksZiYmIWMoQXIsZHIpKWZvcihTciBpbiBscj0hMCxQbihBcixkcix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcyk/dGhpc1tScl06dm9pZCAwfX0pLE9yKWJbU3JdJiZSKGJbU3JdLFJyLFNyKTt2YXIgV2U9ZnVuY3Rpb24odCl7aWYoRXIodCkpcmV0dXJuIHQ7dGhyb3cgVHlwZUVycm9yKFwiVGFyZ2V0IGlzIG5vdCBhIHR5cGVkIGFycmF5XCIpfSxQbj1mdW5jdGlvbih0LGUsbil7aWYoZil7aWYobilmb3IodmFyIHIgaW4gT3Ipe3I9YltyXTtyJiZjKHIucHJvdG90eXBlLHQpJiZkZWxldGUgci5wcm90b3R5cGVbdF19QXJbdF0mJiFufHxmdChBcix0LCFuJiZQciYma3JbdF18fGUpfX0sZHI9V3QoXCJpdGVyYXRvclwiKSxscj1iLlVpbnQ4QXJyYXkseHI9JG4udmFsdWVzLExyPSRuLmtleXMsTXI9JG4uZW50cmllcyxGcj1XZSxXZT1QbixQbj1sciYmbHIucHJvdG90eXBlW2RyXSxscj0hIVBuJiYoXCJ2YWx1ZXNcIj09UG4ubmFtZXx8bnVsbD09UG4ubmFtZSksUG49ZnVuY3Rpb24oKXtyZXR1cm4geHIuY2FsbChGcih0aGlzKSl9O1dlKFwiZW50cmllc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIE1yLmNhbGwoRnIodGhpcykpfSksV2UoXCJrZXlzXCIsZnVuY3Rpb24oKXtyZXR1cm4gTHIuY2FsbChGcih0aGlzKSl9KSxXZShcInZhbHVlc1wiLFBuLCFsciksV2UoZHIsUG4sIWxyKTt2YXIgVXI9T2JqZWN0LmFzc2lnbixqcj1PYmplY3QuZGVmaW5lUHJvcGVydHksUG49IVVyfHxnKGZ1bmN0aW9uKCl7aWYoZiYmMSE9PVVyKHtiOjF9LFVyKGpyKHt9LFwiYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe2pyKHRoaXMsXCJiXCIse3ZhbHVlOjMsZW51bWVyYWJsZTohMX0pfX0pLHtiOjJ9KSkuYilyZXR1cm4gMTt2YXIgdD17fSxlPXt9LG49U3ltYm9sKCkscj1cImFiY2RlZmdoaWprbG1ub3BxcnN0XCI7cmV0dXJuIHRbbl09NyxyLnNwbGl0KFwiXCIpLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT10fSksNyE9VXIoe30sdClbbl18fEZ0KFVyKHt9LGUpKS5qb2luKFwiXCIpIT1yfSk/ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49c3QodCkscj1hcmd1bWVudHMubGVuZ3RoLGk9MSxvPUV0LmYsYT1wLmY7aTxyOylmb3IodmFyIHMsdT13KGFyZ3VtZW50c1tpKytdKSxjPW8/RnQodSkuY29uY2F0KG8odSkpOkZ0KHUpLGg9Yy5sZW5ndGgsbD0wO2w8aDspcz1jW2wrK10sZiYmIWEuY2FsbCh1LHMpfHwobltzXT11W3NdKTtyZXR1cm4gbn06VXI7YXQoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOk9iamVjdC5hc3NpZ24hPT1Qbn0se2Fzc2lnbjpQbn0pO3B0Lk9iamVjdC5hc3NpZ247dmFyIHFyPXAuZixscj1mdW5jdGlvbihzKXtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49dSh0KSxyPUZ0KG4pLGk9ci5sZW5ndGgsbz0wLGE9W107bzxpOyllPXJbbysrXSxmJiYhcXIuY2FsbChuLGUpfHxhLnB1c2gocz9bZSxuW2VdXTpuW2VdKTtyZXR1cm4gYX19LFBuPXtlbnRyaWVzOmxyKCEwKSx2YWx1ZXM6bHIoITEpfSxWcj1Qbi5lbnRyaWVzO2F0KHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwfSx7ZW50cmllczpmdW5jdGlvbih0KXtyZXR1cm4gVnIodCl9fSk7cHQuT2JqZWN0LmVudHJpZXM7dmFyIEJyPVBuLnZhbHVlczthdCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMH0se3ZhbHVlczpmdW5jdGlvbih0KXtyZXR1cm4gQnIodCl9fSk7cHQuT2JqZWN0LnZhbHVlcztmdW5jdGlvbiBLcih0KXtpZih5KGU9dCkmJih2b2lkIDAhPT0obj1lW1dyXSk/ISFuOlwiUmVnRXhwXCI9PXIoZSkpKXRocm93IFR5cGVFcnJvcihcIlRoZSBtZXRob2QgZG9lc24ndCBhY2NlcHQgcmVndWxhciBleHByZXNzaW9uc1wiKTt2YXIgZSxuO3JldHVybiB0fXZhciBXcj1XdChcIm1hdGNoXCIpLEhyPVd0KFwibWF0Y2hcIiksbHI9ZnVuY3Rpb24oZSl7dmFyIG49Ly4vO3RyeXtcIi8uL1wiW2VdKG4pfWNhdGNoKHQpe3RyeXtyZXR1cm4gbltIcl09ITEsXCIvLi9cIltlXShuKX1jYXRjaCh0KXt9fXJldHVybiExfTthdCh7dGFyZ2V0OlwiU3RyaW5nXCIscHJvdG86ITAsZm9yY2VkOiFscihcImluY2x1ZGVzXCIpfSx7aW5jbHVkZXM6ZnVuY3Rpb24odCl7cmV0dXJuISF+U3RyaW5nKGEodGhpcykpLmluZGV4T2YoS3IodCksMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pO1ooXCJTdHJpbmdcIixcImluY2x1ZGVzXCIpO3ZhciBHcixQbj1rLmYsenI9XCJcIi5zdGFydHNXaXRoLFFyPU1hdGgubWluLGxyPWxyKFwic3RhcnRzV2l0aFwiKSxHcj0hKGxyfHwoIShHcj1QbihTdHJpbmcucHJvdG90eXBlLFwic3RhcnRzV2l0aFwiKSl8fEdyLndyaXRhYmxlKSk7YXQoe3RhcmdldDpcIlN0cmluZ1wiLHByb3RvOiEwLGZvcmNlZDohR3ImJiFscn0se3N0YXJ0c1dpdGg6ZnVuY3Rpb24odCl7dmFyIGU9U3RyaW5nKGEodGhpcykpO0tyKHQpO3ZhciBuPXJ0KFFyKDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwLGUubGVuZ3RoKSksdD1TdHJpbmcodCk7cmV0dXJuIHpyP3pyLmNhbGwoZSx0LG4pOmUuc2xpY2UobixuK3QubGVuZ3RoKT09PXR9fSk7WihcIlN0cmluZ1wiLFwic3RhcnRzV2l0aFwiKTthdCh7dGFyZ2V0OlwiU3RyaW5nXCIscHJvdG86ITB9LHtyZXBlYXQ6XCJcIi5yZXBlYXR8fGZ1bmN0aW9uKHQpe3ZhciBlPVN0cmluZyhhKHRoaXMpKSxuPVwiXCIscj1udCh0KTtpZihyPDB8fHI9PTEvMCl0aHJvdyBSYW5nZUVycm9yKFwiV3JvbmcgbnVtYmVyIG9mIHJlcGV0aXRpb25zXCIpO2Zvcig7MDxyOyhyPj4+PTEpJiYoZSs9ZSkpMSZyJiYobis9ZSk7cmV0dXJuIG59fSk7WihcIlN0cmluZ1wiLFwicmVwZWF0XCIpO3ZhciBZcixYcj1XdChcInNwZWNpZXNcIiksSnI9V3QoXCJpc0NvbmNhdFNwcmVhZGFibGVcIiksJHI9OTAwNzE5OTI1NDc0MDk5MSxacj1cIk1heGltdW0gYWxsb3dlZCBpbmRleCBleGNlZWRlZFwiLGxyPTUxPD11bnx8IWcoZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4gdFtKcl09ITEsdC5jb25jYXQoKVswXSE9PXR9KSxaPShZcj1cImNvbmNhdFwiLDUxPD11bnx8IWcoZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4odC5jb25zdHJ1Y3Rvcj17fSlbWHJdPWZ1bmN0aW9uKCl7cmV0dXJue2ZvbzoxfX0sMSE9PXRbWXJdKEJvb2xlYW4pLmZvb30pKTthdCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6IWxyfHwhWn0se2NvbmNhdDpmdW5jdGlvbih0KXtmb3IodmFyIGUsbixyLGk9c3QodGhpcyksbz1hcihpLDApLGE9MCxzPS0xLHU9YXJndW1lbnRzLmxlbmd0aDtzPHU7cysrKWlmKGZ1bmN0aW9uKHQpe2lmKCF5KHQpKXJldHVybiExO3ZhciBlPXRbSnJdO3JldHVybiB2b2lkIDAhPT1lPyEhZTp1cih0KX0ocj0tMT09PXM/aTphcmd1bWVudHNbc10pKXtpZihuPXJ0KHIubGVuZ3RoKSwkcjxhK24pdGhyb3cgVHlwZUVycm9yKFpyKTtmb3IoZT0wO2U8bjtlKyssYSsrKWUgaW4gciYmX3IobyxhLHJbZV0pfWVsc2V7aWYoJHI8PWEpdGhyb3cgVHlwZUVycm9yKFpyKTtfcihvLGErKyxyKX1yZXR1cm4gby5sZW5ndGg9YSxvfX0pO2Z1bmN0aW9uIHRpKHQpe3ZhciBlPXB0LlN5bWJvbHx8KHB0LlN5bWJvbD17fSk7YyhlLHQpfHxzaShlLHQse3ZhbHVlOmFpLmYodCl9KX1mdW5jdGlvbiBlaSh0LGUpe3ZhciBuPXdpW3RdPVF0KHZpW2xpXSk7cmV0dXJuIGZpKG4se3R5cGU6aGksdGFnOnQsZGVzY3JpcHRpb246ZX0pLGZ8fChuLmRlc2NyaXB0aW9uPWUpLG59ZnVuY3Rpb24gbmkoZSx0KXttKGUpO3ZhciBuPXUodCksdD1GdChuKS5jb25jYXQoUmkobikpO3JldHVybiB1aSh0LGZ1bmN0aW9uKHQpe2YmJiFBaS5jYWxsKG4sdCl8fE5pKGUsdCxuW3RdKX0pLGV9dmFyIHJpPVR0LmYsaWk9e30udG9TdHJpbmcsb2k9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLFo9e2Y6ZnVuY3Rpb24odCl7cmV0dXJuIG9pJiZcIltvYmplY3QgV2luZG93XVwiPT1paS5jYWxsKHQpP2Z1bmN0aW9uKHQpe3RyeXtyZXR1cm4gcmkodCl9Y2F0Y2godCl7cmV0dXJuIG9pLnNsaWNlKCl9fSh0KTpyaSh1KHQpKX19LGFpPXtmOld0fSxzaT1BLmYsdWk9U24uZm9yRWFjaCxjaT1KKFwiaGlkZGVuXCIpLGhpPVwiU3ltYm9sXCIsbGk9XCJwcm90b3R5cGVcIixTbj1XdChcInRvUHJpbWl0aXZlXCIpLGZpPWx0LnNldCxwaT1sdC5nZXR0ZXJGb3IoaGkpLGRpPU9iamVjdFtsaV0sdmk9Yi5TeW1ib2wsZ2k9ZXQoXCJKU09OXCIsXCJzdHJpbmdpZnlcIikseWk9ay5mLG1pPUEuZixiaT1aLmYsX2k9cC5mLHdpPXooXCJzeW1ib2xzXCIpLElpPXooXCJvcC1zeW1ib2xzXCIpLFRpPXooXCJzdHJpbmctdG8tc3ltYm9sLXJlZ2lzdHJ5XCIpLEVpPXooXCJzeW1ib2wtdG8tc3RyaW5nLXJlZ2lzdHJ5XCIpLEo9eihcIndrc1wiKSx6PWIuUU9iamVjdCxTaT0henx8IXpbbGldfHwheltsaV0uZmluZENoaWxkLENpPWYmJmcoZnVuY3Rpb24oKXtyZXR1cm4gNyE9UXQobWkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBtaSh0aGlzLFwiYVwiLHt2YWx1ZTo3fSkuYX19KSkuYX0pP2Z1bmN0aW9uKHQsZSxuKXt2YXIgcj15aShkaSxlKTtyJiZkZWxldGUgZGlbZV0sbWkodCxlLG4pLHImJnQhPT1kaSYmbWkoZGksZSxyKX06bWksa2k9cz9mdW5jdGlvbih0KXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdCh0KWluc3RhbmNlb2Ygdml9LE5pPWZ1bmN0aW9uKHQsZSxuKXt0PT09ZGkmJk5pKElpLGUsbiksbSh0KTtlPWkoZSwhMCk7cmV0dXJuIG0obiksYyh3aSxlKT8obi5lbnVtZXJhYmxlPyhjKHQsY2kpJiZ0W2NpXVtlXSYmKHRbY2ldW2VdPSExKSxuPVF0KG4se2VudW1lcmFibGU6digwLCExKX0pKTooYyh0LGNpKXx8bWkodCxjaSx2KDEse30pKSx0W2NpXVtlXT0hMCksQ2kodCxlLG4pKTptaSh0LGUsbil9LEFpPWZ1bmN0aW9uKHQpe3ZhciBlPWkodCwhMCksdD1faS5jYWxsKHRoaXMsZSk7cmV0dXJuISh0aGlzPT09ZGkmJmMod2ksZSkmJiFjKElpLGUpKSYmKCEodHx8IWModGhpcyxlKXx8IWMod2ksZSl8fGModGhpcyxjaSkmJnRoaXNbY2ldW2VdKXx8dCl9LHo9ZnVuY3Rpb24odCxlKXt2YXIgbj11KHQpLHQ9aShlLCEwKTtpZihuIT09ZGl8fCFjKHdpLHQpfHxjKElpLHQpKXtlPXlpKG4sdCk7cmV0dXJuIWV8fCFjKHdpLHQpfHxjKG4sY2kpJiZuW2NpXVt0XXx8KGUuZW51bWVyYWJsZT0hMCksZX19LHM9ZnVuY3Rpb24odCl7dmFyIHQ9YmkodSh0KSksZT1bXTtyZXR1cm4gdWkodCxmdW5jdGlvbih0KXtjKHdpLHQpfHxjKCQsdCl8fGUucHVzaCh0KX0pLGV9LFJpPWZ1bmN0aW9uKHQpe3ZhciBlPXQ9PT1kaSx0PWJpKGU/SWk6dSh0KSksbj1bXTtyZXR1cm4gdWkodCxmdW5jdGlvbih0KXshYyh3aSx0KXx8ZSYmIWMoZGksdCl8fG4ucHVzaCh3aVt0XSl9KSxufTtZdHx8KGZ0KCh2aT1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiB2aSl0aHJvdyBUeXBlRXJyb3IoXCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3JcIik7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP1N0cmluZyhhcmd1bWVudHNbMF0pOnZvaWQgMCxlPXgodCksbj1mdW5jdGlvbih0KXt0aGlzPT09ZGkmJm4uY2FsbChJaSx0KSxjKHRoaXMsY2kpJiZjKHRoaXNbY2ldLGUpJiYodGhpc1tjaV1bZV09ITEpLENpKHRoaXMsZSx2KDEsdCkpfTtyZXR1cm4gZiYmU2kmJkNpKGRpLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6bn0pLGVpKGUsdCl9KVtsaV0sXCJ0b1N0cmluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHBpKHRoaXMpLnRhZ30pLGZ0KHZpLFwid2l0aG91dFNldHRlclwiLGZ1bmN0aW9uKHQpe3JldHVybiBlaSh4KHQpLHQpfSkscC5mPUFpLEEuZj1OaSxrLmY9eixUdC5mPVouZj1zLEV0LmY9UmksYWkuZj1mdW5jdGlvbih0KXtyZXR1cm4gZWkoV3QodCksdCl9LGYmJihtaSh2aVtsaV0sXCJkZXNjcmlwdGlvblwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBpKHRoaXMpLmRlc2NyaXB0aW9ufX0pLGZ0KGRpLFwicHJvcGVydHlJc0VudW1lcmFibGVcIixBaSx7dW5zYWZlOiEwfSkpKSxhdCh7Z2xvYmFsOiEwLHdyYXA6ITAsZm9yY2VkOiFZdCxzaGFtOiFZdH0se1N5bWJvbDp2aX0pLHVpKEZ0KEopLGZ1bmN0aW9uKHQpe3RpKHQpfSksYXQoe3RhcmdldDpoaSxzdGF0OiEwLGZvcmNlZDohWXR9LHtmb3I6ZnVuY3Rpb24odCl7dmFyIGU9U3RyaW5nKHQpO2lmKGMoVGksZSkpcmV0dXJuIFRpW2VdO3Q9dmkoZSk7cmV0dXJuIFRpW2VdPXQsRWlbdF09ZSx0fSxrZXlGb3I6ZnVuY3Rpb24odCl7aWYoIWtpKHQpKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhIHN5bWJvbFwiKTtpZihjKEVpLHQpKXJldHVybiBFaVt0XX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7U2k9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe1NpPSExfX0pLGF0KHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLGZvcmNlZDohWXQsc2hhbTohZn0se2NyZWF0ZTpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lP1F0KHQpOm5pKFF0KHQpLGUpfSxkZWZpbmVQcm9wZXJ0eTpOaSxkZWZpbmVQcm9wZXJ0aWVzOm5pLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjp6fSksYXQoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOiFZdH0se2dldE93blByb3BlcnR5TmFtZXM6cyxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6Uml9KSxhdCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6ZyhmdW5jdGlvbigpe0V0LmYoMSl9KX0se2dldE93blByb3BlcnR5U3ltYm9sczpmdW5jdGlvbih0KXtyZXR1cm4gRXQuZihzdCh0KSl9fSksZ2kmJihLaT0hWXR8fGcoZnVuY3Rpb24oKXt2YXIgdD12aSgpO3JldHVyblwiW251bGxdXCIhPWdpKFt0XSl8fFwie31cIiE9Z2koe2E6dH0pfHxcInt9XCIhPWdpKE9iamVjdCh0KSl9KSxhdCh7dGFyZ2V0OlwiSlNPTlwiLHN0YXQ6ITAsZm9yY2VkOktpfSx7c3RyaW5naWZ5OmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHIsaT1bdF0sbz0xO288YXJndW1lbnRzLmxlbmd0aDspaS5wdXNoKGFyZ3VtZW50c1tvKytdKTtpZigoeShyPWUpfHx2b2lkIDAhPT10KSYmIWtpKHQpKXJldHVybiB1cihlKXx8KGU9ZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYoZT1yLmNhbGwodGhpcyx0LGUpKSwha2koZSkpcmV0dXJuIGV9KSxpWzFdPWUsZ2kuYXBwbHkobnVsbCxpKX19KSksdmlbbGldW1NuXXx8Uih2aVtsaV0sU24sdmlbbGldLnZhbHVlT2YpLGZlKHZpLGhpKSwkW2NpXT0hMCx0aShcImFzeW5jSXRlcmF0b3JcIik7dmFyIFBpLE9pLERpLHhpLExpLHo9QS5mLE1pPWIuU3ltYm9sOyFmfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBNaXx8XCJkZXNjcmlwdGlvblwiaW4gTWkucHJvdG90eXBlJiZ2b2lkIDA9PT1NaSgpLmRlc2NyaXB0aW9ufHwoUGk9e30sb3QoT2k9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPDF8fHZvaWQgMD09PWFyZ3VtZW50c1swXT92b2lkIDA6U3RyaW5nKGFyZ3VtZW50c1swXSksZT10aGlzIGluc3RhbmNlb2YgT2k/bmV3IE1pKHQpOnZvaWQgMD09PXQ/TWkoKTpNaSh0KTtyZXR1cm5cIlwiPT09dCYmKFBpW2VdPSEwKSxlfSxNaSksKEdpPU9pLnByb3RvdHlwZT1NaS5wcm90b3R5cGUpLmNvbnN0cnVjdG9yPU9pLERpPUdpLnRvU3RyaW5nLHhpPVwiU3ltYm9sKHRlc3QpXCI9PVN0cmluZyhNaShcInRlc3RcIikpLExpPS9eU3ltYm9sXFwoKC4qKVxcKVteKV0rJC8seihHaSxcImRlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgdD15KHRoaXMpP3RoaXMudmFsdWVPZigpOnRoaXMsZT1EaS5jYWxsKHQpO2lmKGMoUGksdCkpcmV0dXJuXCJcIjtlPXhpP2Uuc2xpY2UoNywtMSk6ZS5yZXBsYWNlKExpLFwiJDFcIik7cmV0dXJuXCJcIj09PWU/dm9pZCAwOmV9fSksYXQoe2dsb2JhbDohMCxmb3JjZWQ6ITB9LHtTeW1ib2w6T2l9KSksdGkoXCJoYXNJbnN0YW5jZVwiKSx0aShcImlzQ29uY2F0U3ByZWFkYWJsZVwiKSx0aShcIml0ZXJhdG9yXCIpLHRpKFwibWF0Y2hcIiksdGkoXCJtYXRjaEFsbFwiKSx0aShcInJlcGxhY2VcIiksdGkoXCJzZWFyY2hcIiksdGkoXCJzcGVjaWVzXCIpLHRpKFwic3BsaXRcIiksdGkoXCJ0b1ByaW1pdGl2ZVwiKSx0aShcInRvU3RyaW5nVGFnXCIpLHRpKFwidW5zY29wYWJsZXNcIiksZmUoYi5KU09OLFwiSlNPTlwiLCEwKSxmZShNYXRoLFwiTWF0aFwiLCEwKSxhdCh7Z2xvYmFsOiEwfSx7UmVmbGVjdDp7fX0pLGZlKGIuUmVmbGVjdCxcIlJlZmxlY3RcIiwhMCk7cHQuU3ltYm9sO3RpKFwiYXN5bmNEaXNwb3NlXCIpLHRpKFwiZGlzcG9zZVwiKSx0aShcIm9ic2VydmFibGVcIiksdGkoXCJwYXR0ZXJuTWF0Y2hcIiksdGkoXCJyZXBsYWNlQWxsXCIpO2FpLmYoXCJpdGVyYXRvclwiKTt2YXIgRmk9IWcoZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pLFVpPWUoZnVuY3Rpb24odCl7ZnVuY3Rpb24gbih0KXtlKHQscix7dmFsdWU6e29iamVjdElEOlwiT1wiKyArK2ksd2Vha0RhdGE6e319fSl9dmFyIGU9QS5mLHI9eChcIm1ldGFcIiksaT0wLG89T2JqZWN0LmlzRXh0ZW5zaWJsZXx8ZnVuY3Rpb24oKXtyZXR1cm4hMH0sYT10LmV4cG9ydHM9e1JFUVVJUkVEOiExLGZhc3RLZXk6ZnVuY3Rpb24odCxlKXtpZigheSh0KSlyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdD90OihcInN0cmluZ1wiPT10eXBlb2YgdD9cIlNcIjpcIlBcIikrdDtpZighYyh0LHIpKXtpZighbyh0KSlyZXR1cm5cIkZcIjtpZighZSlyZXR1cm5cIkVcIjtuKHQpfXJldHVybiB0W3JdLm9iamVjdElEfSxnZXRXZWFrRGF0YTpmdW5jdGlvbih0LGUpe2lmKCFjKHQscikpe2lmKCFvKHQpKXJldHVybiEwO2lmKCFlKXJldHVybiExO24odCl9cmV0dXJuIHRbcl0ud2Vha0RhdGF9LG9uRnJlZXplOmZ1bmN0aW9uKHQpe3JldHVybiBGaSYmYS5SRVFVSVJFRCYmbyh0KSYmIWModCxyKSYmbih0KSx0fX07JFtyXT0hMH0pLHM9ZnVuY3Rpb24oYSx0LGUpe2Z1bmN0aW9uIG4odCl7dmFyIG49cFt0XTtmdChwLHQsXCJhZGRcIj09dD9mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKHRoaXMsMD09PXQ/MDp0KSx0aGlzfTpcImRlbGV0ZVwiPT10P2Z1bmN0aW9uKHQpe3JldHVybiEoaCYmIXkodCkpJiZuLmNhbGwodGhpcywwPT09dD8wOnQpfTpcImdldFwiPT10P2Z1bmN0aW9uKHQpe3JldHVybiBoJiYheSh0KT92b2lkIDA6bi5jYWxsKHRoaXMsMD09PXQ/MDp0KX06XCJoYXNcIj09dD9mdW5jdGlvbih0KXtyZXR1cm4hKGgmJiF5KHQpKSYmbi5jYWxsKHRoaXMsMD09PXQ/MDp0KX06ZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5jYWxsKHRoaXMsMD09PXQ/MDp0LGUpLHRoaXN9KX12YXIgcixpLG8scyx1LGM9LTEhPT1hLmluZGV4T2YoXCJNYXBcIiksaD0tMSE9PWEuaW5kZXhPZihcIldlYWtcIiksbD1jP1wic2V0XCI6XCJhZGRcIixmPWJbYV0scD1mJiZmLnByb3RvdHlwZSxkPWYsdj17fTtyZXR1cm4gUHQoYSxcImZ1bmN0aW9uXCIhPXR5cGVvZiBmfHwhKGh8fHAuZm9yRWFjaCYmIWcoZnVuY3Rpb24oKXsobmV3IGYpLmVudHJpZXMoKS5uZXh0KCl9KSkpPyhkPWUuZ2V0Q29uc3RydWN0b3IodCxhLGMsbCksVWkuUkVRVUlSRUQ9ITApOlB0KGEsITApJiYoaT0ocj1uZXcgZClbbF0oaD97fTotMCwxKSE9cixvPWcoZnVuY3Rpb24oKXtyLmhhcygxKX0pLHM9VGUoZnVuY3Rpb24odCl7bmV3IGYodCl9KSx1PSFoJiZnKGZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBmLGU9NTtlLS07KXRbbF0oZSxlKTtyZXR1cm4hdC5oYXMoLTApfSksc3x8KCgoZD10KGZ1bmN0aW9uKHQsZSl7ZGUodCxkLGEpO3ZhciBuLHIsaSxvLG49KG49bmV3IGYscj10LHQ9ZCxNdCYmXCJmdW5jdGlvblwiPT10eXBlb2YoaT1yLmNvbnN0cnVjdG9yKSYmaSE9PXQmJnkobz1pLnByb3RvdHlwZSkmJm8hPT10LnByb3RvdHlwZSYmTXQobixvKSxuKTtyZXR1cm4gbnVsbCE9ZSYmb2UoZSxuW2xdLHt0aGF0Om4sQVNfRU5UUklFUzpjfSksbn0pKS5wcm90b3R5cGU9cCkuY29uc3RydWN0b3I9ZCksKG98fHUpJiYobihcImRlbGV0ZVwiKSxuKFwiaGFzXCIpLGMmJm4oXCJnZXRcIikpLCh1fHxpKSYmbihsKSxoJiZwLmNsZWFyJiZkZWxldGUgcC5jbGVhciksdlthXT1kLGF0KHtnbG9iYWw6ITAsZm9yY2VkOmQhPWZ9LHYpLGZlKGQsYSksaHx8ZS5zZXRTdHJvbmcoZCxhLGMpLGR9LGppPUEuZixxaT1VaS5mYXN0S2V5LFZpPWx0LnNldCxCaT1sdC5nZXR0ZXJGb3IsS2k9e2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKHQsbixyLGkpe2Z1bmN0aW9uIG8odCxlLG4pe3ZhciByLGk9cyh0KSxvPXUodCxlKTtyZXR1cm4gbz9vLnZhbHVlPW46KGkubGFzdD1vPXtpbmRleDpyPXFpKGUsITApLGtleTplLHZhbHVlOm4scHJldmlvdXM6bj1pLmxhc3QsbmV4dDp2b2lkIDAscmVtb3ZlZDohMX0saS5maXJzdHx8KGkuZmlyc3Q9byksbiYmKG4ubmV4dD1vKSxmP2kuc2l6ZSsrOnQuc2l6ZSsrLFwiRlwiIT09ciYmKGkuaW5kZXhbcl09bykpLHR9dmFyIGE9dChmdW5jdGlvbih0LGUpe2RlKHQsYSxuKSxWaSh0LHt0eXBlOm4saW5kZXg6UXQobnVsbCksZmlyc3Q6dm9pZCAwLGxhc3Q6dm9pZCAwLHNpemU6MH0pLGZ8fCh0LnNpemU9MCksbnVsbCE9ZSYmb2UoZSx0W2ldLHt0aGF0OnQsQVNfRU5UUklFUzpyfSl9KSxzPUJpKG4pLHU9ZnVuY3Rpb24odCxlKXt2YXIgbixyPXModCksdD1xaShlKTtpZihcIkZcIiE9PXQpcmV0dXJuIHIuaW5kZXhbdF07Zm9yKG49ci5maXJzdDtuO249bi5uZXh0KWlmKG4ua2V5PT1lKXJldHVybiBufTtyZXR1cm4gbGUoYS5wcm90b3R5cGUse2NsZWFyOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXModGhpcyksZT10LmluZGV4LG49dC5maXJzdDtuOyluLnJlbW92ZWQ9ITAsbi5wcmV2aW91cyYmKG4ucHJldmlvdXM9bi5wcmV2aW91cy5uZXh0PXZvaWQgMCksZGVsZXRlIGVbbi5pbmRleF0sbj1uLm5leHQ7dC5maXJzdD10Lmxhc3Q9dm9pZCAwLGY/dC5zaXplPTA6dGhpcy5zaXplPTB9LGRlbGV0ZTpmdW5jdGlvbih0KXt2YXIgZSxuPXModGhpcykscj11KHRoaXMsdCk7cmV0dXJuIHImJihlPXIubmV4dCx0PXIucHJldmlvdXMsZGVsZXRlIG4uaW5kZXhbci5pbmRleF0sci5yZW1vdmVkPSEwLHQmJih0Lm5leHQ9ZSksZSYmKGUucHJldmlvdXM9dCksbi5maXJzdD09ciYmKG4uZmlyc3Q9ZSksbi5sYXN0PT1yJiYobi5sYXN0PXQpLGY/bi5zaXplLS06dGhpcy5zaXplLS0pLCEhcn0sZm9yRWFjaDpmdW5jdGlvbih0KXtmb3IodmFyIGUsbj1zKHRoaXMpLHI9enQodCwxPGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzFdOnZvaWQgMCwzKTtlPWU/ZS5uZXh0Om4uZmlyc3Q7KWZvcihyKGUudmFsdWUsZS5rZXksdGhpcyk7ZSYmZS5yZW1vdmVkOyllPWUucHJldmlvdXN9LGhhczpmdW5jdGlvbih0KXtyZXR1cm4hIXUodGhpcyx0KX19KSxsZShhLnByb3RvdHlwZSxyP3tnZXQ6ZnVuY3Rpb24odCl7dD11KHRoaXMsdCk7cmV0dXJuIHQmJnQudmFsdWV9LHNldDpmdW5jdGlvbih0LGUpe3JldHVybiBvKHRoaXMsMD09PXQ/MDp0LGUpfX06e2FkZDpmdW5jdGlvbih0KXtyZXR1cm4gbyh0aGlzLHQ9MD09PXQ/MDp0LHQpfX0pLGYmJmppKGEucHJvdG90eXBlLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcyh0aGlzKS5zaXplfX0pLGF9LHNldFN0cm9uZzpmdW5jdGlvbih0LGUsbil7dmFyIHI9ZStcIiBJdGVyYXRvclwiLGk9QmkoZSksbz1CaShyKTt4bih0LGUsZnVuY3Rpb24odCxlKXtWaSh0aGlzLHt0eXBlOnIsdGFyZ2V0OnQsc3RhdGU6aSh0KSxraW5kOmUsbGFzdDp2b2lkIDB9KX0sZnVuY3Rpb24oKXtmb3IodmFyIHQ9byh0aGlzKSxlPXQua2luZCxuPXQubGFzdDtuJiZuLnJlbW92ZWQ7KW49bi5wcmV2aW91cztyZXR1cm4gdC50YXJnZXQmJih0Lmxhc3Q9bj1uP24ubmV4dDp0LnN0YXRlLmZpcnN0KT9cImtleXNcIj09ZT97dmFsdWU6bi5rZXksZG9uZTohMX06XCJ2YWx1ZXNcIj09ZT97dmFsdWU6bi52YWx1ZSxkb25lOiExfTp7dmFsdWU6W24ua2V5LG4udmFsdWVdLGRvbmU6ITF9Ont2YWx1ZTp0LnRhcmdldD12b2lkIDAsZG9uZTohMH19LG4/XCJlbnRyaWVzXCI6XCJ2YWx1ZXNcIiwhbiwhMCkscGUoZSl9fSxTbj0ocyhcIk1hcFwiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMF06dm9pZCAwKX19LEtpKSxwdC5NYXAsZnVuY3Rpb24odCl7dmFyIGUsbixyLGksbz1hcmd1bWVudHMubGVuZ3RoLGE9MTxvP2FyZ3VtZW50c1sxXTp2b2lkIDA7cmV0dXJuIEd0KHRoaXMpLChlPXZvaWQgMCE9PWEpJiZHdChhKSxudWxsPT10P25ldyB0aGlzOihuPVtdLGU/KHI9MCxpPXp0KGEsMjxvP2FyZ3VtZW50c1syXTp2b2lkIDAsMiksb2UodCxmdW5jdGlvbih0KXtuLnB1c2goaSh0LHIrKykpfSkpOm9lKHQsbi5wdXNoLHt0aGF0Om59KSxuZXcgdGhpcyhuKSl9KTthdCh7dGFyZ2V0OlwiTWFwXCIsc3RhdDohMH0se2Zyb206U259KTt6PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1uZXcgQXJyYXkodCk7dC0tOyllW3RdPWFyZ3VtZW50c1t0XTtyZXR1cm4gbmV3IHRoaXMoZSl9O2F0KHt0YXJnZXQ6XCJNYXBcIixzdGF0OiEwfSx7b2Y6en0pO2Z1bmN0aW9uIFdpKCl7Zm9yKHZhciB0LGU9bSh0aGlzKSxuPUd0KGUuZGVsZXRlKSxyPSEwLGk9MCxvPWFyZ3VtZW50cy5sZW5ndGg7aTxvO2krKyl0PW4uY2FsbChlLGFyZ3VtZW50c1tpXSkscj1yJiZ0O3JldHVybiEhcn1hdCh7dGFyZ2V0OlwiTWFwXCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se2RlbGV0ZUFsbDpmdW5jdGlvbigpe3JldHVybiBXaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7YXQoe3RhcmdldDpcIk1hcFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHtlbXBsYWNlOmZ1bmN0aW9uKHQsZSl7dmFyIG49bSh0aGlzKSxlPW4uaGFzKHQpJiZcInVwZGF0ZVwiaW4gZT9lLnVwZGF0ZShuLmdldCh0KSx0LG4pOmUuaW5zZXJ0KHQsbik7cmV0dXJuIG4uc2V0KHQsZSksZX19KTtmdW5jdGlvbiBIaSh0KXtyZXR1cm4gTWFwLnByb3RvdHlwZS5lbnRyaWVzLmNhbGwodCl9YXQoe3RhcmdldDpcIk1hcFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHtldmVyeTpmdW5jdGlvbih0KXt2YXIgcj1tKHRoaXMpLGU9SGkociksaT16dCh0LDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwLDMpO3JldHVybiFvZShlLGZ1bmN0aW9uKHQsZSxuKXtpZighaShlLHQscikpcmV0dXJuIG4oKX0se0FTX0VOVFJJRVM6ITAsSVNfSVRFUkFUT1I6ITAsSU5URVJSVVBURUQ6ITB9KS5zdG9wcGVkfX0pLGF0KHt0YXJnZXQ6XCJNYXBcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpHfSx7ZmlsdGVyOmZ1bmN0aW9uKHQpe3ZhciBuPW0odGhpcyksZT1IaShuKSxyPXp0KHQsMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyksaT1uZXcoRWUobixldChcIk1hcFwiKSkpLG89R3QoaS5zZXQpO3JldHVybiBvZShlLGZ1bmN0aW9uKHQsZSl7cihlLHQsbikmJm8uY2FsbChpLHQsZSl9LHtBU19FTlRSSUVTOiEwLElTX0lURVJBVE9SOiEwfSksaX19KSxhdCh7dGFyZ2V0OlwiTWFwXCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se2ZpbmQ6ZnVuY3Rpb24odCl7dmFyIHI9bSh0aGlzKSxlPUhpKHIpLGk9enQodCwxPGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzFdOnZvaWQgMCwzKTtyZXR1cm4gb2UoZSxmdW5jdGlvbih0LGUsbil7aWYoaShlLHQscikpcmV0dXJuIG4oZSl9LHtBU19FTlRSSUVTOiEwLElTX0lURVJBVE9SOiEwLElOVEVSUlVQVEVEOiEwfSkucmVzdWx0fX0pLGF0KHt0YXJnZXQ6XCJNYXBcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpHfSx7ZmluZEtleTpmdW5jdGlvbih0KXt2YXIgcj1tKHRoaXMpLGU9SGkociksaT16dCh0LDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwLDMpO3JldHVybiBvZShlLGZ1bmN0aW9uKHQsZSxuKXtpZihpKGUsdCxyKSlyZXR1cm4gbih0KX0se0FTX0VOVFJJRVM6ITAsSVNfSVRFUkFUT1I6ITAsSU5URVJSVVBURUQ6ITB9KS5yZXN1bHR9fSksYXQoe3RhcmdldDpcIk1hcFwiLHN0YXQ6ITB9LHtncm91cEJ5OmZ1bmN0aW9uKHQsbil7dmFyIHI9bmV3IHRoaXM7R3Qobik7dmFyIGk9R3Qoci5oYXMpLG89R3Qoci5nZXQpLGE9R3Qoci5zZXQpO3JldHVybiBvZSh0LGZ1bmN0aW9uKHQpe3ZhciBlPW4odCk7aS5jYWxsKHIsZSk/by5jYWxsKHIsZSkucHVzaCh0KTphLmNhbGwocixlLFt0XSl9KSxyfX0pO2F0KHt0YXJnZXQ6XCJNYXBcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpHfSx7aW5jbHVkZXM6ZnVuY3Rpb24oaSl7cmV0dXJuIG9lKEhpKG0odGhpcykpLGZ1bmN0aW9uKHQsZSxuKXtpZigocj1lKT09PShlPWkpfHxyIT1yJiZlIT1lKXJldHVybiBuKCk7dmFyIHJ9LHtBU19FTlRSSUVTOiEwLElTX0lURVJBVE9SOiEwLElOVEVSUlVQVEVEOiEwfSkuc3RvcHBlZH19KSxhdCh7dGFyZ2V0OlwiTWFwXCIsc3RhdDohMH0se2tleUJ5OmZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IHRoaXM7R3QoZSk7dmFyIHI9R3Qobi5zZXQpO3JldHVybiBvZSh0LGZ1bmN0aW9uKHQpe3IuY2FsbChuLGUodCksdCl9KSxufX0pLGF0KHt0YXJnZXQ6XCJNYXBcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpHfSx7a2V5T2Y6ZnVuY3Rpb24ocil7cmV0dXJuIG9lKEhpKG0odGhpcykpLGZ1bmN0aW9uKHQsZSxuKXtpZihlPT09cilyZXR1cm4gbih0KX0se0FTX0VOVFJJRVM6ITAsSVNfSVRFUkFUT1I6ITAsSU5URVJSVVBURUQ6ITB9KS5yZXN1bHR9fSksYXQoe3RhcmdldDpcIk1hcFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHttYXBLZXlzOmZ1bmN0aW9uKHQpe3ZhciBuPW0odGhpcyksZT1IaShuKSxyPXp0KHQsMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyksaT1uZXcoRWUobixldChcIk1hcFwiKSkpLG89R3QoaS5zZXQpO3JldHVybiBvZShlLGZ1bmN0aW9uKHQsZSl7by5jYWxsKGkscihlLHQsbiksZSl9LHtBU19FTlRSSUVTOiEwLElTX0lURVJBVE9SOiEwfSksaX19KSxhdCh7dGFyZ2V0OlwiTWFwXCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se21hcFZhbHVlczpmdW5jdGlvbih0KXt2YXIgbj1tKHRoaXMpLGU9SGkobikscj16dCh0LDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwLDMpLGk9bmV3KEVlKG4sZXQoXCJNYXBcIikpKSxvPUd0KGkuc2V0KTtyZXR1cm4gb2UoZSxmdW5jdGlvbih0LGUpe28uY2FsbChpLHQscihlLHQsbikpfSx7QVNfRU5UUklFUzohMCxJU19JVEVSQVRPUjohMH0pLGl9fSksYXQoe3RhcmdldDpcIk1hcFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHttZXJnZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9bSh0aGlzKSxuPUd0KGUuc2V0KSxyPTA7cjxhcmd1bWVudHMubGVuZ3RoOylvZShhcmd1bWVudHNbcisrXSxuLHt0aGF0OmUsQVNfRU5UUklFUzohMH0pO3JldHVybiBlfX0pLGF0KHt0YXJnZXQ6XCJNYXBcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpHfSx7cmVkdWNlOmZ1bmN0aW9uKG4pe3ZhciByPW0odGhpcyksdD1IaShyKSxpPWFyZ3VtZW50cy5sZW5ndGg8MixvPWk/dm9pZCAwOmFyZ3VtZW50c1sxXTtpZihHdChuKSxvZSh0LGZ1bmN0aW9uKHQsZSl7bz1pPyhpPSExLGUpOm4obyxlLHQscil9LHtBU19FTlRSSUVTOiEwLElTX0lURVJBVE9SOiEwfSksaSl0aHJvdyBUeXBlRXJyb3IoXCJSZWR1Y2Ugb2YgZW1wdHkgbWFwIHdpdGggbm8gaW5pdGlhbCB2YWx1ZVwiKTtyZXR1cm4gb319KSxhdCh7dGFyZ2V0OlwiTWFwXCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se3NvbWU6ZnVuY3Rpb24odCl7dmFyIHI9bSh0aGlzKSxlPUhpKHIpLGk9enQodCwxPGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzFdOnZvaWQgMCwzKTtyZXR1cm4gb2UoZSxmdW5jdGlvbih0LGUsbil7aWYoaShlLHQscikpcmV0dXJuIG4oKX0se0FTX0VOVFJJRVM6ITAsSVNfSVRFUkFUT1I6ITAsSU5URVJSVVBURUQ6ITB9KS5zdG9wcGVkfX0pLGF0KHt0YXJnZXQ6XCJNYXBcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpHfSx7dXBkYXRlOmZ1bmN0aW9uKHQsZSl7dmFyIG49bSh0aGlzKSxyPWFyZ3VtZW50cy5sZW5ndGg7R3QoZSk7dmFyIGk9bi5oYXModCk7aWYoIWkmJnI8Myl0aHJvdyBUeXBlRXJyb3IoXCJVcGRhdGluZyBhYnNlbnQgdmFsdWVcIik7cj1pP24uZ2V0KHQpOkd0KDI8cj9hcmd1bWVudHNbMl06dm9pZCAwKSh0LG4pO3JldHVybiBuLnNldCh0LGUocix0LG4pKSxufX0pO3ZhciBHaT1mdW5jdGlvbih0LGUpe3ZhciBuLHI9bSh0aGlzKSxpPTI8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMl06dm9pZCAwO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGkpdGhyb3cgVHlwZUVycm9yKFwiQXQgbGVhc3Qgb25lIGNhbGxiYWNrIHJlcXVpcmVkXCIpO3JldHVybiByLmhhcyh0KT8obj1yLmdldCh0KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiYobj1lKG4pLHIuc2V0KHQsbikpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiYobj1pKCksci5zZXQodCxuKSksbn07YXQoe3RhcmdldDpcIk1hcFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHt1cHNlcnQ6R2l9KSxhdCh7dGFyZ2V0OlwiTWFwXCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se3VwZGF0ZU9ySW5zZXJ0OkdpfSk7cyhcIlNldFwiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMF06dm9pZCAwKX19LEtpKSxwdC5TZXQ7YXQoe3RhcmdldDpcIlNldFwiLHN0YXQ6ITB9LHtmcm9tOlNufSksYXQoe3RhcmdldDpcIlNldFwiLHN0YXQ6ITB9LHtvZjp6fSk7YXQoe3RhcmdldDpcIlNldFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHthZGRBbGw6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9bSh0aGlzKSxlPUd0KHQuYWRkKSxuPTAscj1hcmd1bWVudHMubGVuZ3RoO248cjtuKyspZS5jYWxsKHQsYXJndW1lbnRzW25dKTtyZXR1cm4gdH0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pLGF0KHt0YXJnZXQ6XCJTZXRcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpHfSx7ZGVsZXRlQWxsOmZ1bmN0aW9uKCl7cmV0dXJuIFdpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KTtmdW5jdGlvbiB6aSh0KXtyZXR1cm4gU2V0LnByb3RvdHlwZS52YWx1ZXMuY2FsbCh0KX1hdCh7dGFyZ2V0OlwiU2V0XCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se2V2ZXJ5OmZ1bmN0aW9uKHQpe3ZhciBuPW0odGhpcyksZT16aShuKSxyPXp0KHQsMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyk7cmV0dXJuIW9lKGUsZnVuY3Rpb24odCxlKXtpZighcih0LHQsbikpcmV0dXJuIGUoKX0se0lTX0lURVJBVE9SOiEwLElOVEVSUlVQVEVEOiEwfSkuc3RvcHBlZH19KSxhdCh7dGFyZ2V0OlwiU2V0XCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se2RpZmZlcmVuY2U6ZnVuY3Rpb24odCl7dmFyIGU9bSh0aGlzKSxuPW5ldyhFZShlLGV0KFwiU2V0XCIpKSkoZSkscj1HdChuLmRlbGV0ZSk7cmV0dXJuIG9lKHQsZnVuY3Rpb24odCl7ci5jYWxsKG4sdCl9KSxufX0pLGF0KHt0YXJnZXQ6XCJTZXRcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpHfSx7ZmlsdGVyOmZ1bmN0aW9uKHQpe3ZhciBlPW0odGhpcyksbj16aShlKSxyPXp0KHQsMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyksaT1uZXcoRWUoZSxldChcIlNldFwiKSkpLG89R3QoaS5hZGQpO3JldHVybiBvZShuLGZ1bmN0aW9uKHQpe3IodCx0LGUpJiZvLmNhbGwoaSx0KX0se0lTX0lURVJBVE9SOiEwfSksaX19KSxhdCh7dGFyZ2V0OlwiU2V0XCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se2ZpbmQ6ZnVuY3Rpb24odCl7dmFyIG49bSh0aGlzKSxlPXppKG4pLHI9enQodCwxPGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzFdOnZvaWQgMCwzKTtyZXR1cm4gb2UoZSxmdW5jdGlvbih0LGUpe2lmKHIodCx0LG4pKXJldHVybiBlKHQpfSx7SVNfSVRFUkFUT1I6ITAsSU5URVJSVVBURUQ6ITB9KS5yZXN1bHR9fSksYXQoe3RhcmdldDpcIlNldFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHtpbnRlcnNlY3Rpb246ZnVuY3Rpb24odCl7dmFyIGU9bSh0aGlzKSxuPW5ldyhFZShlLGV0KFwiU2V0XCIpKSkscj1HdChlLmhhcyksaT1HdChuLmFkZCk7cmV0dXJuIG9lKHQsZnVuY3Rpb24odCl7ci5jYWxsKGUsdCkmJmkuY2FsbChuLHQpfSksbn19KSxhdCh7dGFyZ2V0OlwiU2V0XCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se2lzRGlzam9pbnRGcm9tOmZ1bmN0aW9uKHQpe3ZhciBuPW0odGhpcykscj1HdChuLmhhcyk7cmV0dXJuIW9lKHQsZnVuY3Rpb24odCxlKXtpZighMD09PXIuY2FsbChuLHQpKXJldHVybiBlKCl9LHtJTlRFUlJVUFRFRDohMH0pLnN0b3BwZWR9fSksYXQoe3RhcmdldDpcIlNldFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHtpc1N1YnNldE9mOmZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlPW5lKHQpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFN0cmluZyh0KStcIiBpcyBub3QgaXRlcmFibGVcIik7cmV0dXJuIG0oZS5jYWxsKHQpKX0odGhpcyksbj1tKHQpLHI9bi5oYXM7cmV0dXJuXCJmdW5jdGlvblwiIT10eXBlb2YgciYmKG49bmV3KGV0KFwiU2V0XCIpKSh0KSxyPUd0KG4uaGFzKSksIW9lKGUsZnVuY3Rpb24odCxlKXtpZighMT09PXIuY2FsbChuLHQpKXJldHVybiBlKCl9LHtJU19JVEVSQVRPUjohMCxJTlRFUlJVUFRFRDohMH0pLnN0b3BwZWR9fSksYXQoe3RhcmdldDpcIlNldFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHtpc1N1cGVyc2V0T2Y6ZnVuY3Rpb24odCl7dmFyIG49bSh0aGlzKSxyPUd0KG4uaGFzKTtyZXR1cm4hb2UodCxmdW5jdGlvbih0LGUpe2lmKCExPT09ci5jYWxsKG4sdCkpcmV0dXJuIGUoKX0se0lOVEVSUlVQVEVEOiEwfSkuc3RvcHBlZH19KSxhdCh7dGFyZ2V0OlwiU2V0XCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se2pvaW46ZnVuY3Rpb24odCl7dmFyIGU9bSh0aGlzKSxuPXppKGUpLGU9dm9pZCAwPT09dD9cIixcIjpTdHJpbmcodCksdD1bXTtyZXR1cm4gb2Uobix0LnB1c2gse3RoYXQ6dCxJU19JVEVSQVRPUjohMH0pLHQuam9pbihlKX19KSxhdCh7dGFyZ2V0OlwiU2V0XCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6R30se21hcDpmdW5jdGlvbih0KXt2YXIgZT1tKHRoaXMpLG49emkoZSkscj16dCh0LDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwLDMpLGk9bmV3KEVlKGUsZXQoXCJTZXRcIikpKSxvPUd0KGkuYWRkKTtyZXR1cm4gb2UobixmdW5jdGlvbih0KXtvLmNhbGwoaSxyKHQsdCxlKSl9LHtJU19JVEVSQVRPUjohMH0pLGl9fSksYXQoe3RhcmdldDpcIlNldFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHtyZWR1Y2U6ZnVuY3Rpb24oZSl7dmFyIG49bSh0aGlzKSx0PXppKG4pLHI9YXJndW1lbnRzLmxlbmd0aDwyLGk9cj92b2lkIDA6YXJndW1lbnRzWzFdO2lmKEd0KGUpLG9lKHQsZnVuY3Rpb24odCl7aT1yPyhyPSExLHQpOmUoaSx0LHQsbil9LHtJU19JVEVSQVRPUjohMH0pLHIpdGhyb3cgVHlwZUVycm9yKFwiUmVkdWNlIG9mIGVtcHR5IHNldCB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIik7cmV0dXJuIGl9fSksYXQoe3RhcmdldDpcIlNldFwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkd9LHtzb21lOmZ1bmN0aW9uKHQpe3ZhciBuPW0odGhpcyksZT16aShuKSxyPXp0KHQsMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyk7cmV0dXJuIG9lKGUsZnVuY3Rpb24odCxlKXtpZihyKHQsdCxuKSlyZXR1cm4gZSgpfSx7SVNfSVRFUkFUT1I6ITAsSU5URVJSVVBURUQ6ITB9KS5zdG9wcGVkfX0pLGF0KHt0YXJnZXQ6XCJTZXRcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpHfSx7c3ltbWV0cmljRGlmZmVyZW5jZTpmdW5jdGlvbih0KXt2YXIgZT1tKHRoaXMpLG49bmV3KEVlKGUsZXQoXCJTZXRcIikpKShlKSxyPUd0KG4uZGVsZXRlKSxpPUd0KG4uYWRkKTtyZXR1cm4gb2UodCxmdW5jdGlvbih0KXtyLmNhbGwobix0KXx8aS5jYWxsKG4sdCl9KSxufX0pLGF0KHt0YXJnZXQ6XCJTZXRcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDpHfSx7dW5pb246ZnVuY3Rpb24odCl7dmFyIGU9bSh0aGlzKSxlPW5ldyhFZShlLGV0KFwiU2V0XCIpKSkoZSk7cmV0dXJuIG9lKHQsR3QoZS5hZGQpLHt0aGF0OmV9KSxlfX0pO3ZhciBRaT1NYXRoLmZsb29yO2F0KHt0YXJnZXQ6XCJOdW1iZXJcIixzdGF0OiEwfSx7aXNJbnRlZ2VyOmZ1bmN0aW9uKHQpe3JldHVybiF5KHQpJiZpc0Zpbml0ZSh0KSYmUWkodCk9PT10fX0pO3B0Lk51bWJlci5pc0ludGVnZXI7YXQoe3RhcmdldDpcIk51bWJlclwiLHN0YXQ6ITB9LHtpc05hTjpmdW5jdGlvbih0KXtyZXR1cm4gdCE9dH19KTtwdC5OdW1iZXIuaXNOYU47dmFyIFlpPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKFlpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiYodFtuXT1lW25dKX0pKHQsZSl9O2Z1bmN0aW9uIFhpKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKGUpK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1ZaSh0LGUpLHQucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KG4ucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBuKX12YXIgSmk9ZnVuY3Rpb24oKXtyZXR1cm4oSmk9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49MSxyPWFyZ3VtZW50cy5sZW5ndGg7bjxyO24rKylmb3IodmFyIGkgaW4gZT1hcmd1bWVudHNbbl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJih0W2ldPWVbaV0pO3JldHVybiB0fSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtmdW5jdGlvbiAkaSh0LGEscyx1KXtyZXR1cm4gbmV3KHM9c3x8UHJvbWlzZSkoZnVuY3Rpb24obixlKXtmdW5jdGlvbiByKHQpe3RyeXtvKHUubmV4dCh0KSl9Y2F0Y2godCl7ZSh0KX19ZnVuY3Rpb24gaSh0KXt0cnl7byh1LnRocm93KHQpKX1jYXRjaCh0KXtlKHQpfX1mdW5jdGlvbiBvKHQpe3ZhciBlO3QuZG9uZT9uKHQudmFsdWUpOigoZT10LnZhbHVlKWluc3RhbmNlb2Ygcz9lOm5ldyBzKGZ1bmN0aW9uKHQpe3QoZSl9KSkudGhlbihyLGkpfW8oKHU9dS5hcHBseSh0LGF8fFtdKSkubmV4dCgpKX0pfWZ1bmN0aW9uIFppKG4scil7dmFyIGksbyxhLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmYVswXSl0aHJvdyBhWzFdO3JldHVybiBhWzFdfSx0cnlzOltdLG9wczpbXX0sdD17bmV4dDplKDApLHRocm93OmUoMSkscmV0dXJuOmUoMil9O3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKHRbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSksdDtmdW5jdGlvbiBlKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoaSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtmb3IoO3M7KXRyeXtpZihpPTEsbyYmKGE9MiZlWzBdP28ucmV0dXJuOmVbMF0/by50aHJvd3x8KChhPW8ucmV0dXJuKSYmYS5jYWxsKG8pLDApOm8ubmV4dCkmJiEoYT1hLmNhbGwobyxlWzFdKSkuZG9uZSlyZXR1cm4gYTtzd2l0Y2gobz0wLChlPWE/WzImZVswXSxhLnZhbHVlXTplKVswXSl7Y2FzZSAwOmNhc2UgMTphPWU7YnJlYWs7Y2FzZSA0OnJldHVybiBzLmxhYmVsKysse3ZhbHVlOmVbMV0sZG9uZTohMX07Y2FzZSA1OnMubGFiZWwrKyxvPWVbMV0sZT1bMF07Y29udGludWU7Y2FzZSA3OmU9cy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShhPTA8KGE9cy50cnlzKS5sZW5ndGgmJmFbYS5sZW5ndGgtMV0pJiYoNj09PWVbMF18fDI9PT1lWzBdKSl7cz0wO2NvbnRpbnVlfWlmKDM9PT1lWzBdJiYoIWF8fGVbMV0+YVswXSYmZVsxXTxhWzNdKSl7cy5sYWJlbD1lWzFdO2JyZWFrfWlmKDY9PT1lWzBdJiZzLmxhYmVsPGFbMV0pe3MubGFiZWw9YVsxXSxhPWU7YnJlYWt9aWYoYSYmcy5sYWJlbDxhWzJdKXtzLmxhYmVsPWFbMl0scy5vcHMucHVzaChlKTticmVha31hWzJdJiZzLm9wcy5wb3AoKSxzLnRyeXMucG9wKCk7Y29udGludWV9ZT1yLmNhbGwobixzKX1jYXRjaCh0KXtlPVs2LHRdLG89MH1maW5hbGx5e2k9YT0wfWlmKDUmZVswXSl0aHJvdyBlWzFdO3JldHVybnt2YWx1ZTplWzBdP2VbMV06dm9pZCAwLGRvbmU6ITB9fShbZSx0XSl9fX1mdW5jdGlvbiB0byh0KXt2YXIgZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixuPWUmJnRbZV0scj0wO2lmKG4pcmV0dXJuIG4uY2FsbCh0KTtpZih0JiZcIm51bWJlclwiPT10eXBlb2YgdC5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm57dmFsdWU6KHQ9dCYmcj49dC5sZW5ndGg/dm9pZCAwOnQpJiZ0W3IrK10sZG9uZTohdH19fTt0aHJvdyBuZXcgVHlwZUVycm9yKGU/XCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiOlwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKX1mdW5jdGlvbiBlbyh0LGUpe3ZhciBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdFtTeW1ib2wuaXRlcmF0b3JdO2lmKCFuKXJldHVybiB0O3ZhciByLGksbz1uLmNhbGwodCksYT1bXTt0cnl7Zm9yKDsodm9pZCAwPT09ZXx8MDxlLS0pJiYhKHI9by5uZXh0KCkpLmRvbmU7KWEucHVzaChyLnZhbHVlKX1jYXRjaCh0KXtpPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtyJiYhci5kb25lJiYobj1vLnJldHVybikmJm4uY2FsbChvKX1maW5hbGx5e2lmKGkpdGhyb3cgaS5lcnJvcn19cmV0dXJuIGF9ZnVuY3Rpb24gbm8odCxlKXtmb3IodmFyIG49MCxyPWUubGVuZ3RoLGk9dC5sZW5ndGg7bjxyO24rKyxpKyspdFtpXT1lW25dO3JldHVybiB0fWZ1bmN0aW9uIHJvKHQpe2Zvcih2YXIgZT1bXSxuPTAscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgaT10LmNoYXJDb2RlQXQocik7aTwxMjg/ZVtuKytdPWk6KGk8MjA0OD9lW24rK109aT4+NnwxOTI6KDU1Mjk2PT0oNjQ1MTImaSkmJnIrMTx0Lmxlbmd0aCYmNTYzMjA9PSg2NDUxMiZ0LmNoYXJDb2RlQXQocisxKSk/KGk9NjU1MzYrKCgxMDIzJmkpPDwxMCkrKDEwMjMmdC5jaGFyQ29kZUF0KCsrcikpLGVbbisrXT1pPj4xOHwyNDAsZVtuKytdPWk+PjEyJjYzfDEyOCk6ZVtuKytdPWk+PjEyfDIyNCxlW24rK109aT4+NiY2M3wxMjgpLGVbbisrXT02MyZpfDEyOCl9cmV0dXJuIGV9ZnVuY3Rpb24gaW8odCl7dHJ5e3JldHVybiB1by5kZWNvZGVTdHJpbmcodCwhMCl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcihcImJhc2U2NERlY29kZSBmYWlsZWQ6IFwiLHQpfXJldHVybiBudWxsfXZhciBvbz17Tk9ERV9DTElFTlQ6ITEsTk9ERV9BRE1JTjohMSxTREtfVkVSU0lPTjpcIiR7SlNDT1JFX1ZFUlNJT059XCJ9LGFvPWZ1bmN0aW9uKHQsZSl7aWYoIXQpdGhyb3cgc28oZSl9LHNvPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgRXJyb3IoXCJGaXJlYmFzZSBEYXRhYmFzZSAoXCIrb28uU0RLX1ZFUlNJT04rXCIpIElOVEVSTkFMIEFTU0VSVCBGQUlMRUQ6IFwiK3QpfSx1bz17Ynl0ZVRvQ2hhck1hcF86bnVsbCxjaGFyVG9CeXRlTWFwXzpudWxsLGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzpudWxsLGNoYXJUb0J5dGVNYXBXZWJTYWZlXzpudWxsLEVOQ09ERURfVkFMU19CQVNFOlwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIixnZXQgRU5DT0RFRF9WQUxTKCl7cmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UrXCIrLz1cIn0sZ2V0IEVOQ09ERURfVkFMU19XRUJTQUZFKCl7cmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UrXCItXy5cIn0sSEFTX05BVElWRV9TVVBQT1JUOlwiZnVuY3Rpb25cIj09dHlwZW9mIGF0b2IsZW5jb2RlQnl0ZUFycmF5OmZ1bmN0aW9uKHQsZSl7aWYoIUFycmF5LmlzQXJyYXkodCkpdGhyb3cgRXJyb3IoXCJlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXJcIik7dGhpcy5pbml0XygpO2Zvcih2YXIgbj1lP3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOnRoaXMuYnl0ZVRvQ2hhck1hcF8scj1bXSxpPTA7aTx0Lmxlbmd0aDtpKz0zKXt2YXIgbz10W2ldLGE9aSsxPHQubGVuZ3RoLHM9YT90W2krMV06MCx1PWkrMjx0Lmxlbmd0aCxjPXU/dFtpKzJdOjAsaD1vPj4yLG89KDMmbyk8PDR8cz4+NCxzPSgxNSZzKTw8MnxjPj42LGM9NjMmYzt1fHwoYz02NCxhfHwocz02NCkpLHIucHVzaChuW2hdLG5bb10sbltzXSxuW2NdKX1yZXR1cm4gci5qb2luKFwiXCIpfSxlbmNvZGVTdHJpbmc6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQmJiFlP2J0b2EodCk6dGhpcy5lbmNvZGVCeXRlQXJyYXkocm8odCksZSl9LGRlY29kZVN0cmluZzpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCYmIWU/YXRvYih0KTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wLHI9MDtuPHQubGVuZ3RoOyl7dmFyIGksbyxhLHM9dFtuKytdO3M8MTI4P2VbcisrXT1TdHJpbmcuZnJvbUNoYXJDb2RlKHMpOjE5MTxzJiZzPDIyND8obz10W24rK10sZVtyKytdPVN0cmluZy5mcm9tQ2hhckNvZGUoKDMxJnMpPDw2fDYzJm8pKToyMzk8cyYmczwzNjU/KGk9KCg3JnMpPDwxOHwoNjMmKG89dFtuKytdKSk8PDEyfCg2MyYoYT10W24rK10pKTw8Nnw2MyZ0W24rK10pLTY1NTM2LGVbcisrXT1TdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2KyhpPj4xMCkpLGVbcisrXT1TdHJpbmcuZnJvbUNoYXJDb2RlKDU2MzIwKygxMDIzJmkpKSk6KG89dFtuKytdLGE9dFtuKytdLGVbcisrXT1TdHJpbmcuZnJvbUNoYXJDb2RlKCgxNSZzKTw8MTJ8KDYzJm8pPDw2fDYzJmEpKX1yZXR1cm4gZS5qb2luKFwiXCIpfSh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KHQsZSkpfSxkZWNvZGVTdHJpbmdUb0J5dGVBcnJheTpmdW5jdGlvbih0LGUpe3RoaXMuaW5pdF8oKTtmb3IodmFyIG49ZT90aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXzp0aGlzLmNoYXJUb0J5dGVNYXBfLHI9W10saT0wO2k8dC5sZW5ndGg7KXt2YXIgbz1uW3QuY2hhckF0KGkrKyldLGE9aTx0Lmxlbmd0aD9uW3QuY2hhckF0KGkpXTowLHM9KytpPHQubGVuZ3RoP25bdC5jaGFyQXQoaSldOjY0LHU9KytpPHQubGVuZ3RoP25bdC5jaGFyQXQoaSldOjY0O2lmKCsraSxudWxsPT1vfHxudWxsPT1hfHxudWxsPT1zfHxudWxsPT11KXRocm93IEVycm9yKCk7bz1vPDwyfGE+PjQ7ci5wdXNoKG8pLDY0IT09cyYmKGE9YTw8NCYyNDB8cz4+MixyLnB1c2goYSksNjQhPT11JiYodT1zPDw2JjE5Mnx1LHIucHVzaCh1KSkpfXJldHVybiByfSxpbml0XzpmdW5jdGlvbigpe2lmKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKXt0aGlzLmJ5dGVUb0NoYXJNYXBfPXt9LHRoaXMuY2hhclRvQnl0ZU1hcF89e30sdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV89e30sdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV89e307Zm9yKHZhciB0PTA7dDx0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7dCsrKXRoaXMuYnl0ZVRvQ2hhck1hcF9bdF09dGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KHQpLHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1t0XV09dCx0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1t0XT10aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdCh0KSwodGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9bdF1dPXQpPj10aGlzLkVOQ09ERURfVkFMU19CQVNFLmxlbmd0aCYmKHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQodCldPXQsdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KHQpXT10KX19fTtmdW5jdGlvbiBjbyh0KXtyZXR1cm4gaG8odm9pZCAwLHQpfWZ1bmN0aW9uIGhvKHQsZSl7aWYoIShlIGluc3RhbmNlb2YgT2JqZWN0KSlyZXR1cm4gZTtzd2l0Y2goZS5jb25zdHJ1Y3Rvcil7Y2FzZSBEYXRlOnJldHVybiBuZXcgRGF0ZShlLmdldFRpbWUoKSk7Y2FzZSBPYmplY3Q6dm9pZCAwPT09dCYmKHQ9e30pO2JyZWFrO2Nhc2UgQXJyYXk6dD1bXTticmVhaztkZWZhdWx0OnJldHVybiBlfWZvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJlwiX19wcm90b19fXCIhPT1uJiYodFtuXT1obyh0W25dLGVbbl0pKTtyZXR1cm4gdH12YXIgbG89KGZvLnByb3RvdHlwZS53cmFwQ2FsbGJhY2s9ZnVuY3Rpb24obil7dmFyIHI9dGhpcztyZXR1cm4gZnVuY3Rpb24odCxlKXt0P3IucmVqZWN0KHQpOnIucmVzb2x2ZShlKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYoci5wcm9taXNlLmNhdGNoKGZ1bmN0aW9uKCl7fSksMT09PW4ubGVuZ3RoP24odCk6bih0LGUpKX19LGZvKTtmdW5jdGlvbiBmbygpe3ZhciBuPXRoaXM7dGhpcy5yZWplY3Q9ZnVuY3Rpb24oKXt9LHRoaXMucmVzb2x2ZT1mdW5jdGlvbigpe30sdGhpcy5wcm9taXNlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsZSl7bi5yZXNvbHZlPXQsbi5yZWplY3Q9ZX0pfWZ1bmN0aW9uIHBvKHQsZSl7aWYodC51aWQpdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7dmFyIG49ZXx8XCJkZW1vLXByb2plY3RcIixyPXQuaWF0fHwwLGU9dC5zdWJ8fHQudXNlcl9pZDtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO3Q9Smkoe2lzczpcImh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9cIituLGF1ZDpuLGlhdDpyLGV4cDpyKzM2MDAsYXV0aF90aW1lOnIsc3ViOmUsdXNlcl9pZDplLGZpcmViYXNlOntzaWduX2luX3Byb3ZpZGVyOlwiY3VzdG9tXCIsaWRlbnRpdGllczp7fX19LHQpO3JldHVyblt1by5lbmNvZGVTdHJpbmcoSlNPTi5zdHJpbmdpZnkoe2FsZzpcIm5vbmVcIix0eXBlOlwiSldUXCJ9KSwhMSksdW8uZW5jb2RlU3RyaW5nKEpTT04uc3RyaW5naWZ5KHQpLCExKSxcIlwiXS5qb2luKFwiLlwiKX1mdW5jdGlvbiB2bygpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJlwic3RyaW5nXCI9PXR5cGVvZiBuYXZpZ2F0b3IudXNlckFnZW50P25hdmlnYXRvci51c2VyQWdlbnQ6XCJcIn1mdW5jdGlvbiBnbygpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJih3aW5kb3cuY29yZG92YXx8d2luZG93LnBob25lZ2FwfHx3aW5kb3cuUGhvbmVHYXApJiYvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdCh2bygpKX1mdW5jdGlvbiB5bygpe3ZhciB0PVwib2JqZWN0XCI9PXR5cGVvZiBjaHJvbWU/Y2hyb21lLnJ1bnRpbWU6XCJvYmplY3RcIj09dHlwZW9mIGJyb3dzZXI/YnJvd3Nlci5ydW50aW1lOnZvaWQgMDtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdCYmdm9pZCAwIT09dC5pZH1mdW5jdGlvbiBtbygpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBuYXZpZ2F0b3ImJlwiUmVhY3ROYXRpdmVcIj09PW5hdmlnYXRvci5wcm9kdWN0fWZ1bmN0aW9uIGJvKCl7cmV0dXJuITA9PT1vby5OT0RFX0FETUlOfWZ1bmN0aW9uIF9vKCl7cmV0dXJuXCJpbmRleGVkREJcImluIHNlbGYmJm51bGwhPWluZGV4ZWREQn1mdW5jdGlvbiB3bygpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0LGUpe3RyeXt2YXIgbj0hMCxyPVwidmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZVwiLGk9c2VsZi5pbmRleGVkREIub3BlbihyKTtpLm9uc3VjY2Vzcz1mdW5jdGlvbigpe2kucmVzdWx0LmNsb3NlKCksbnx8c2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UociksdCghMCl9LGkub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKCl7bj0hMX0saS5vbmVycm9yPWZ1bmN0aW9uKCl7dmFyIHQ7ZSgobnVsbD09PSh0PWkuZXJyb3IpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm1lc3NhZ2UpfHxcIlwiKX19Y2F0Y2godCl7ZSh0KX19KX1mdW5jdGlvbiBJbygpe3JldHVybiEoIW5hdmlnYXRvcnx8IW5hdmlnYXRvci5jb29raWVFbmFibGVkKX12YXIgVG8sRW89XCJGaXJlYmFzZUVycm9yXCIsU289KFhpKENvLFRvPUVycm9yKSxDbyk7ZnVuY3Rpb24gQ28odCxlLG4pe2U9VG8uY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBlLmNvZGU9dCxlLmN1c3RvbURhdGE9bixlLm5hbWU9RW8sT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsQ28ucHJvdG90eXBlKSxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZSxrby5wcm90b3R5cGUuY3JlYXRlKSxlfXZhciBrbz0oTm8ucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuLTFdPWFyZ3VtZW50c1tuXTt2YXIgcixpPWVbMF18fHt9LG89dGhpcy5zZXJ2aWNlK1wiL1wiK3QsdD10aGlzLmVycm9yc1t0XSx0PXQ/KHI9aSx0LnJlcGxhY2UoQW8sZnVuY3Rpb24odCxlKXt2YXIgbj1yW2VdO3JldHVybiBudWxsIT1uP1N0cmluZyhuKTpcIjxcIitlK1wiPz5cIn0pKTpcIkVycm9yXCIsdD10aGlzLnNlcnZpY2VOYW1lK1wiOiBcIit0K1wiIChcIitvK1wiKS5cIjtyZXR1cm4gbmV3IFNvKG8sdCxpKX0sTm8pO2Z1bmN0aW9uIE5vKHQsZSxuKXt0aGlzLnNlcnZpY2U9dCx0aGlzLnNlcnZpY2VOYW1lPWUsdGhpcy5lcnJvcnM9bn12YXIgQW89L1xce1xcJChbXn1dKyl9L2c7ZnVuY3Rpb24gUm8odCl7cmV0dXJuIEpTT04ucGFyc2UodCl9ZnVuY3Rpb24gUG8odCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpfWZ1bmN0aW9uIE9vKHQpe3ZhciBlPXt9LG49e30scj17fSxpPVwiXCI7dHJ5e3ZhciBvPXQuc3BsaXQoXCIuXCIpLGU9Um8oaW8ob1swXSl8fFwiXCIpLG49Um8oaW8ob1sxXSl8fFwiXCIpLGk9b1syXSxyPW4uZHx8e307ZGVsZXRlIG4uZH1jYXRjaCh0KXt9cmV0dXJue2hlYWRlcjplLGNsYWltczpuLGRhdGE6cixzaWduYXR1cmU6aX19ZnVuY3Rpb24gRG8odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9ZnVuY3Rpb24geG8odCxlKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKSlyZXR1cm4gdFtlXX1mdW5jdGlvbiBMbyh0KXtmb3IodmFyIGUgaW4gdClpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBNbyh0LGUsbil7dmFyIHIsaT17fTtmb3IociBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoaVtyXT1lLmNhbGwobix0W3JdLHIsdCkpO3JldHVybiBpfWZ1bmN0aW9uIEZvKHQpe2Zvcih2YXIgbj1bXSxlPTAscj1PYmplY3QuZW50cmllcyh0KTtlPHIubGVuZ3RoO2UrKyl7dmFyIGk9cltlXTshZnVuY3Rpb24oZSx0KXtBcnJheS5pc0FycmF5KHQpP3QuZm9yRWFjaChmdW5jdGlvbih0KXtuLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGUpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0KSl9KTpuLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGUpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0KSl9KGlbMF0saVsxXSl9cmV0dXJuIG4ubGVuZ3RoP1wiJlwiK24uam9pbihcIiZcIik6XCJcIn12YXIgVW89KGpvLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuY2hhaW5fWzBdPTE3MzI1ODQxOTMsdGhpcy5jaGFpbl9bMV09NDAyMzIzMzQxNyx0aGlzLmNoYWluX1syXT0yNTYyMzgzMTAyLHRoaXMuY2hhaW5fWzNdPTI3MTczMzg3OCx0aGlzLmNoYWluX1s0XT0zMjg1Mzc3NTIwLHRoaXMuaW5idWZfPTAsdGhpcy50b3RhbF89MH0sam8ucHJvdG90eXBlLmNvbXByZXNzXz1mdW5jdGlvbih0LGUpe2U9ZXx8MDt2YXIgbj10aGlzLldfO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KWZvcih2YXIgcj0wO3I8MTY7cisrKW5bcl09dC5jaGFyQ29kZUF0KGUpPDwyNHx0LmNoYXJDb2RlQXQoZSsxKTw8MTZ8dC5jaGFyQ29kZUF0KGUrMik8PDh8dC5jaGFyQ29kZUF0KGUrMyksZSs9NDtlbHNlIGZvcihyPTA7cjwxNjtyKyspbltyXT10W2VdPDwyNHx0W2UrMV08PDE2fHRbZSsyXTw8OHx0W2UrM10sZSs9NDtmb3Iocj0xNjtyPDgwO3IrKyl7dmFyIGk9bltyLTNdXm5bci04XV5uW3ItMTRdXm5bci0xNl07bltyXT00Mjk0OTY3Mjk1JihpPDwxfGk+Pj4zMSl9Zm9yKHZhciBvLGE9dGhpcy5jaGFpbl9bMF0scz10aGlzLmNoYWluX1sxXSx1PXRoaXMuY2hhaW5fWzJdLGM9dGhpcy5jaGFpbl9bM10saD10aGlzLmNoYWluX1s0XSxyPTA7cjw4MDtyKyspdmFyIGw9cjw0MD9yPDIwPyhvPWNecyYodV5jKSwxNTE4NTAwMjQ5KToobz1zXnVeYywxODU5Nzc1MzkzKTpyPDYwPyhvPXMmdXxjJihzfHUpLDI0MDA5NTk3MDgpOihvPXNedV5jLDMzOTU0Njk3ODIpLGk9KGE8PDV8YT4+PjI3KStvK2grbCtuW3JdJjQyOTQ5NjcyOTUsaD1jLGM9dSx1PTQyOTQ5NjcyOTUmKHM8PDMwfHM+Pj4yKSxzPWEsYT1pO3RoaXMuY2hhaW5fWzBdPXRoaXMuY2hhaW5fWzBdK2EmNDI5NDk2NzI5NSx0aGlzLmNoYWluX1sxXT10aGlzLmNoYWluX1sxXStzJjQyOTQ5NjcyOTUsdGhpcy5jaGFpbl9bMl09dGhpcy5jaGFpbl9bMl0rdSY0Mjk0OTY3Mjk1LHRoaXMuY2hhaW5fWzNdPXRoaXMuY2hhaW5fWzNdK2MmNDI5NDk2NzI5NSx0aGlzLmNoYWluX1s0XT10aGlzLmNoYWluX1s0XStoJjQyOTQ5NjcyOTV9LGpvLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlKXtpZihudWxsIT10KXtmb3IodmFyIG49KGU9dm9pZCAwPT09ZT90Lmxlbmd0aDplKS10aGlzLmJsb2NrU2l6ZSxyPTAsaT10aGlzLmJ1Zl8sbz10aGlzLmluYnVmXztyPGU7KXtpZigwPT09bylmb3IoO3I8PW47KXRoaXMuY29tcHJlc3NfKHQscikscis9dGhpcy5ibG9ja1NpemU7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe2Zvcig7cjxlOylpZihpW29dPXQuY2hhckNvZGVBdChyKSwrK3IsKytvPT09dGhpcy5ibG9ja1NpemUpe3RoaXMuY29tcHJlc3NfKGkpLG89MDticmVha319ZWxzZSBmb3IoO3I8ZTspaWYoaVtvXT10W3JdLCsrciwrK289PT10aGlzLmJsb2NrU2l6ZSl7dGhpcy5jb21wcmVzc18oaSksbz0wO2JyZWFrfX10aGlzLmluYnVmXz1vLHRoaXMudG90YWxfKz1lfX0sam8ucHJvdG90eXBlLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciB0PVtdLGU9OCp0aGlzLnRvdGFsXzt0aGlzLmluYnVmXzw1Nj90aGlzLnVwZGF0ZSh0aGlzLnBhZF8sNTYtdGhpcy5pbmJ1Zl8pOnRoaXMudXBkYXRlKHRoaXMucGFkXyx0aGlzLmJsb2NrU2l6ZS0odGhpcy5pbmJ1Zl8tNTYpKTtmb3IodmFyIG49dGhpcy5ibG9ja1NpemUtMTs1Njw9bjtuLS0pdGhpcy5idWZfW25dPTI1NSZlLGUvPTI1Njt0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO2Zvcih2YXIgcj0wLG49MDtuPDU7bisrKWZvcih2YXIgaT0yNDswPD1pO2ktPTgpdFtyXT10aGlzLmNoYWluX1tuXT4+aSYyNTUsKytyO3JldHVybiB0fSxqbyk7ZnVuY3Rpb24gam8oKXt0aGlzLmNoYWluXz1bXSx0aGlzLmJ1Zl89W10sdGhpcy5XXz1bXSx0aGlzLnBhZF89W10sdGhpcy5pbmJ1Zl89MCx0aGlzLnRvdGFsXz0wLHRoaXMuYmxvY2tTaXplPTY0LHRoaXMucGFkX1swXT0xMjg7Zm9yKHZhciB0PTE7dDx0aGlzLmJsb2NrU2l6ZTsrK3QpdGhpcy5wYWRfW3RdPTA7dGhpcy5yZXNldCgpfWZ1bmN0aW9uIHFvKHQsZSl7ZT1uZXcgVm8odCxlKTtyZXR1cm4gZS5zdWJzY3JpYmUuYmluZChlKX12YXIgVm89KEJvLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuZm9yRWFjaE9ic2VydmVyKGZ1bmN0aW9uKHQpe3QubmV4dChlKX0pfSxCby5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5mb3JFYWNoT2JzZXJ2ZXIoZnVuY3Rpb24odCl7dC5lcnJvcihlKX0pLHRoaXMuY2xvc2UoZSl9LEJvLnByb3RvdHlwZS5jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuZm9yRWFjaE9ic2VydmVyKGZ1bmN0aW9uKHQpe3QuY29tcGxldGUoKX0pLHRoaXMuY2xvc2UoKX0sQm8ucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbih0LGUsbil7dmFyIHIsaT10aGlzO2lmKHZvaWQgMD09PXQmJnZvaWQgMD09PWUmJnZvaWQgMD09PW4pdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBPYnNlcnZlci5cIik7dm9pZCAwPT09KHI9ZnVuY3Rpb24odCxlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgdHx8bnVsbD09PXQpcmV0dXJuITE7Zm9yKHZhciBuPTAscj1lO248ci5sZW5ndGg7bisrKXt2YXIgaT1yW25dO2lmKGkgaW4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdFtpXSlyZXR1cm4hMH1yZXR1cm4hMX0odCxbXCJuZXh0XCIsXCJlcnJvclwiLFwiY29tcGxldGVcIl0pP3Q6e25leHQ6dCxlcnJvcjplLGNvbXBsZXRlOm59KS5uZXh0JiYoci5uZXh0PUtvKSx2b2lkIDA9PT1yLmVycm9yJiYoci5lcnJvcj1Lbyksdm9pZCAwPT09ci5jb21wbGV0ZSYmKHIuY29tcGxldGU9S28pO249dGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtyZXR1cm4gdGhpcy5maW5hbGl6ZWQmJnRoaXMudGFzay50aGVuKGZ1bmN0aW9uKCl7dHJ5e2kuZmluYWxFcnJvcj9yLmVycm9yKGkuZmluYWxFcnJvcik6ci5jb21wbGV0ZSgpfWNhdGNoKHQpe319KSx0aGlzLm9ic2VydmVycy5wdXNoKHIpLG59LEJvLnByb3RvdHlwZS51bnN1YnNjcmliZU9uZT1mdW5jdGlvbih0KXt2b2lkIDAhPT10aGlzLm9ic2VydmVycyYmdm9pZCAwIT09dGhpcy5vYnNlcnZlcnNbdF0mJihkZWxldGUgdGhpcy5vYnNlcnZlcnNbdF0sLS10aGlzLm9ic2VydmVyQ291bnQsMD09PXRoaXMub2JzZXJ2ZXJDb3VudCYmdm9pZCAwIT09dGhpcy5vbk5vT2JzZXJ2ZXJzJiZ0aGlzLm9uTm9PYnNlcnZlcnModGhpcykpfSxCby5wcm90b3R5cGUuZm9yRWFjaE9ic2VydmVyPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmZpbmFsaXplZClmb3IodmFyIGU9MDtlPHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDtlKyspdGhpcy5zZW5kT25lKGUsdCl9LEJvLnByb3RvdHlwZS5zZW5kT25lPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnRhc2sudGhlbihmdW5jdGlvbigpe2lmKHZvaWQgMCE9PW4ub2JzZXJ2ZXJzJiZ2b2lkIDAhPT1uLm9ic2VydmVyc1t0XSl0cnl7ZShuLm9ic2VydmVyc1t0XSl9Y2F0Y2godCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUuZXJyb3ImJmNvbnNvbGUuZXJyb3IodCl9fSl9LEJvLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuZmluYWxpemVkfHwodGhpcy5maW5hbGl6ZWQ9ITAsdm9pZCAwIT09dCYmKHRoaXMuZmluYWxFcnJvcj10KSx0aGlzLnRhc2sudGhlbihmdW5jdGlvbigpe2Uub2JzZXJ2ZXJzPXZvaWQgMCxlLm9uTm9PYnNlcnZlcnM9dm9pZCAwfSkpfSxCbyk7ZnVuY3Rpb24gQm8odCxlKXt2YXIgbj10aGlzO3RoaXMub2JzZXJ2ZXJzPVtdLHRoaXMudW5zdWJzY3JpYmVzPVtdLHRoaXMub2JzZXJ2ZXJDb3VudD0wLHRoaXMudGFzaz1Qcm9taXNlLnJlc29sdmUoKSx0aGlzLmZpbmFsaXplZD0hMSx0aGlzLm9uTm9PYnNlcnZlcnM9ZSx0aGlzLnRhc2sudGhlbihmdW5jdGlvbigpe3Qobil9KS5jYXRjaChmdW5jdGlvbih0KXtuLmVycm9yKHQpfSl9ZnVuY3Rpb24gS28oKXt9ZnVuY3Rpb24gV28odCxlLG4scil7dmFyIGk7aWYocjxlP2k9XCJhdCBsZWFzdCBcIitlOm48ciYmKGk9MD09PW4/XCJub25lXCI6XCJubyBtb3JlIHRoYW4gXCIrbiksaSl0aHJvdyBuZXcgRXJyb3IodCtcIiBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCBcIityKygxPT09cj9cIiBhcmd1bWVudC5cIjpcIiBhcmd1bWVudHMuXCIpK1wiIEV4cGVjdHMgXCIraStcIi5cIil9ZnVuY3Rpb24gSG8odCxlKXtyZXR1cm4gdCtcIiBmYWlsZWQ6IFwiK2UrXCIgYXJndW1lbnQgXCJ9ZnVuY3Rpb24gR28odCxlLG4scil7aWYoKCFyfHxuKSYmXCJmdW5jdGlvblwiIT10eXBlb2Ygbil0aHJvdyBuZXcgRXJyb3IoSG8odCxlKStcIm11c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi5cIil9ZnVuY3Rpb24gem8odCxlLG4scil7aWYoKCFyfHxuKSYmKFwib2JqZWN0XCIhPXR5cGVvZiBufHxudWxsPT09bikpdGhyb3cgbmV3IEVycm9yKEhvKHQsZSkrXCJtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuXCIpfWZ1bmN0aW9uIFFvKHQpe2Zvcih2YXIgZT0wLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dC5jaGFyQ29kZUF0KG4pO3I8MTI4P2UrKzpyPDIwNDg/ZSs9Mjo1NTI5Njw9ciYmcjw9NTYzMTk/KGUrPTQsbisrKTplKz0zfXJldHVybiBlfXZhciBZbz0xZTMsWG89MixKbz0xNDRlNSwkbz0uNTtmdW5jdGlvbiBabyh0LGUsbil7dm9pZCAwPT09biYmKG49WG8pO249KGU9dm9pZCAwPT09ZT9ZbzplKSpNYXRoLnBvdyhuLHQpLHQ9TWF0aC5yb3VuZCgkbypuKihNYXRoLnJhbmRvbSgpLS41KSoyKTtyZXR1cm4gTWF0aC5taW4oSm8sbit0KX1mdW5jdGlvbiB0YSh0KXtyZXR1cm4gdCYmdC5fZGVsZWdhdGU/dC5fZGVsZWdhdGU6dH12YXIgZWE9KG5hLnByb3RvdHlwZS5zZXRJbnN0YW50aWF0aW9uTW9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pbnN0YW50aWF0aW9uTW9kZT10LHRoaXN9LG5hLnByb3RvdHlwZS5zZXRNdWx0aXBsZUluc3RhbmNlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tdWx0aXBsZUluc3RhbmNlcz10LHRoaXN9LG5hLnByb3RvdHlwZS5zZXRTZXJ2aWNlUHJvcHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2VydmljZVByb3BzPXQsdGhpc30sbmEucHJvdG90eXBlLnNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkPXQsdGhpc30sbmEpO2Z1bmN0aW9uIG5hKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLmluc3RhbmNlRmFjdG9yeT1lLHRoaXMudHlwZT1uLHRoaXMubXVsdGlwbGVJbnN0YW5jZXM9ITEsdGhpcy5zZXJ2aWNlUHJvcHM9e30sdGhpcy5pbnN0YW50aWF0aW9uTW9kZT1cIkxBWllcIix0aGlzLm9uSW5zdGFuY2VDcmVhdGVkPW51bGx9dmFyIHJhPVwiW0RFRkFVTFRdXCIsaWE9KG9hLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9cmEpO3ZhciBlPXRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKHQpO2lmKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhlKSl7dmFyIG49bmV3IGxvO2lmKHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KGUsbiksdGhpcy5pc0luaXRpYWxpemVkKGUpfHx0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpdHJ5e3ZhciByPXRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7aW5zdGFuY2VJZGVudGlmaWVyOmV9KTtyJiZuLnJlc29sdmUocil9Y2F0Y2godCl7fX1yZXR1cm4gdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5nZXQoZSkucHJvbWlzZX0sb2EucHJvdG90eXBlLmdldEltbWVkaWF0ZT1mdW5jdGlvbih0KXt2YXIgZT1KaSh7aWRlbnRpZmllcjpyYSxvcHRpb25hbDohMX0sdCksdD1lLmlkZW50aWZpZXIsZT1lLm9wdGlvbmFsLG49dGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIodCk7aWYoIXRoaXMuaXNJbml0aWFsaXplZChuKSYmIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSl7aWYoZSlyZXR1cm4gbnVsbDt0aHJvdyBFcnJvcihcIlNlcnZpY2UgXCIrdGhpcy5uYW1lK1wiIGlzIG5vdCBhdmFpbGFibGVcIil9dHJ5e3JldHVybiB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe2luc3RhbmNlSWRlbnRpZmllcjpufSl9Y2F0Y2godCl7aWYoZSlyZXR1cm4gbnVsbDt0aHJvdyB0fX0sb2EucHJvdG90eXBlLmdldENvbXBvbmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXBvbmVudH0sb2EucHJvdG90eXBlLnNldENvbXBvbmVudD1mdW5jdGlvbih0KXt2YXIgZSxuO2lmKHQubmFtZSE9PXRoaXMubmFtZSl0aHJvdyBFcnJvcihcIk1pc21hdGNoaW5nIENvbXBvbmVudCBcIit0Lm5hbWUrXCIgZm9yIFByb3ZpZGVyIFwiK3RoaXMubmFtZStcIi5cIik7aWYodGhpcy5jb21wb25lbnQpdGhyb3cgRXJyb3IoXCJDb21wb25lbnQgZm9yIFwiK3RoaXMubmFtZStcIiBoYXMgYWxyZWFkeSBiZWVuIHByb3ZpZGVkXCIpO2lmKHRoaXMuY29tcG9uZW50PXQsdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKXtpZihcIkVBR0VSXCI9PT10Lmluc3RhbnRpYXRpb25Nb2RlKXRyeXt0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe2luc3RhbmNlSWRlbnRpZmllcjpyYX0pfWNhdGNoKHQpe310cnl7Zm9yKHZhciByPXRvKHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSl7dmFyIG89ZW8oaS52YWx1ZSwyKSxhPW9bMF0scz1vWzFdLHU9dGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoYSk7dHJ5e3ZhciBjPXRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7aW5zdGFuY2VJZGVudGlmaWVyOnV9KTtzLnJlc29sdmUoYyl9Y2F0Y2godCl7fX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKG49ci5yZXR1cm4pJiZuLmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX19LG9hLnByb3RvdHlwZS5jbGVhckluc3RhbmNlPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PXJhKSx0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZSh0KSx0aGlzLmluc3RhbmNlcy5kZWxldGUodCl9LG9hLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1BcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKSxbNCxQcm9taXNlLmFsbChubyhubyhbXSxlbyhlLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm5cIklOVEVSTkFMXCJpbiB0fSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LklOVEVSTkFMLmRlbGV0ZSgpfSkpKSxlbyhlLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm5cIl9kZWxldGVcImluIHR9KS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuX2RlbGV0ZSgpfSkpKSldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksWzJdfX0pfSl9LG9hLnByb3RvdHlwZS5pc0NvbXBvbmVudFNldD1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLmNvbXBvbmVudH0sb2EucHJvdG90eXBlLmlzSW5pdGlhbGl6ZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PXJhKSx0aGlzLmluc3RhbmNlcy5oYXModCl9LG9hLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKHQpe3ZhciBlLG4scj0odD12b2lkIDA9PT10P3t9OnQpLmluc3RhbmNlSWRlbnRpZmllcixyPXZvaWQgMD09PXI/cmE6cix0PXQub3B0aW9ucyx0PXZvaWQgMD09PXQ/e306dCxpPXRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKHIpO2lmKHRoaXMuaXNJbml0aWFsaXplZChpKSl0aHJvdyBFcnJvcih0aGlzLm5hbWUrXCIoXCIraStcIikgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZFwiKTtpZighdGhpcy5pc0NvbXBvbmVudFNldCgpKXRocm93IEVycm9yKFwiQ29tcG9uZW50IFwiK3RoaXMubmFtZStcIiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRcIik7dmFyIG89dGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtpbnN0YW5jZUlkZW50aWZpZXI6aSxvcHRpb25zOnR9KTt0cnl7Zm9yKHZhciBhPXRvKHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSxzPWEubmV4dCgpOyFzLmRvbmU7cz1hLm5leHQoKSl7dmFyIHU9ZW8ocy52YWx1ZSwyKSxjPXVbMF0sdT11WzFdO2k9PT10aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihjKSYmdS5yZXNvbHZlKG8pfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYobj1hLnJldHVybikmJm4uY2FsbChhKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19cmV0dXJuIHRoaXMuaW52b2tlT25Jbml0Q2FsbGJhY2tzKG8saSksb30sb2EucHJvdG90eXBlLm9uSW5pdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiB0aGlzLm9uSW5pdENhbGxiYWNrcy5hZGQodCksZnVuY3Rpb24oKXtlLm9uSW5pdENhbGxiYWNrcy5kZWxldGUodCl9fSxvYS5wcm90b3R5cGUuaW52b2tlT25Jbml0Q2FsbGJhY2tzPWZ1bmN0aW9uKHQsZSl7dmFyIG4scjt0cnl7Zm9yKHZhciBpPXRvKHRoaXMub25Jbml0Q2FsbGJhY2tzKSxvPWkubmV4dCgpOyFvLmRvbmU7bz1pLm5leHQoKSl7dmFyIGE9by52YWx1ZTt0cnl7YSh0LGUpfWNhdGNoKHQpe319fWNhdGNoKHQpe249e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJihyPWkucmV0dXJuKSYmci5jYWxsKGkpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX19LG9hLnByb3RvdHlwZS5nZXRPckluaXRpYWxpemVTZXJ2aWNlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuaW5zdGFuY2VJZGVudGlmaWVyLG49dC5vcHRpb25zLHQ9dm9pZCAwPT09bj97fTpuLHI9dGhpcy5pbnN0YW5jZXMuZ2V0KGUpO2lmKCFyJiZ0aGlzLmNvbXBvbmVudCYmKHI9dGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLHtpbnN0YW5jZUlkZW50aWZpZXI6KG49ZSk9PT1yYT92b2lkIDA6bixvcHRpb25zOnR9KSx0aGlzLmluc3RhbmNlcy5zZXQoZSxyKSx0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCkpdHJ5e3RoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLGUscil9Y2F0Y2godCl7fXJldHVybiByfHxudWxsfSxvYS5wcm90b3R5cGUubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyPWZ1bmN0aW9uKHQpe3JldHVybiF0aGlzLmNvbXBvbmVudHx8dGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXM/dDpyYX0sb2EucHJvdG90eXBlLnNob3VsZEF1dG9Jbml0aWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmNvbXBvbmVudCYmXCJFWFBMSUNJVFwiIT09dGhpcy5jb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGV9LG9hKTtmdW5jdGlvbiBvYSh0LGUpe3RoaXMubmFtZT10LHRoaXMuY29udGFpbmVyPWUsdGhpcy5jb21wb25lbnQ9bnVsbCx0aGlzLmluc3RhbmNlcz1uZXcgTWFwLHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQ9bmV3IE1hcCx0aGlzLm9uSW5pdENhbGxiYWNrcz1uZXcgU2V0fXZhciBhYT0oc2EucHJvdG90eXBlLmFkZENvbXBvbmVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFByb3ZpZGVyKHQubmFtZSk7aWYoZS5pc0NvbXBvbmVudFNldCgpKXRocm93IG5ldyBFcnJvcihcIkNvbXBvbmVudCBcIit0Lm5hbWUrXCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIHdpdGggXCIrdGhpcy5uYW1lKTtlLnNldENvbXBvbmVudCh0KX0sc2EucHJvdG90eXBlLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50PWZ1bmN0aW9uKHQpe3RoaXMuZ2V0UHJvdmlkZXIodC5uYW1lKS5pc0NvbXBvbmVudFNldCgpJiZ0aGlzLnByb3ZpZGVycy5kZWxldGUodC5uYW1lKSx0aGlzLmFkZENvbXBvbmVudCh0KX0sc2EucHJvdG90eXBlLmdldFByb3ZpZGVyPWZ1bmN0aW9uKHQpe2lmKHRoaXMucHJvdmlkZXJzLmhhcyh0KSlyZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KHQpO3ZhciBlPW5ldyBpYSh0LHRoaXMpO3JldHVybiB0aGlzLnByb3ZpZGVycy5zZXQodCxlKSxlfSxzYS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5wcm92aWRlcnMudmFsdWVzKCkpfSxzYSk7ZnVuY3Rpb24gc2EodCl7dGhpcy5uYW1lPXQsdGhpcy5wcm92aWRlcnM9bmV3IE1hcH12YXIgdWEsY2E9W107KFNuPXVhPXVhfHx7fSlbU24uREVCVUc9MF09XCJERUJVR1wiLFNuW1NuLlZFUkJPU0U9MV09XCJWRVJCT1NFXCIsU25bU24uSU5GTz0yXT1cIklORk9cIixTbltTbi5XQVJOPTNdPVwiV0FSTlwiLFNuW1NuLkVSUk9SPTRdPVwiRVJST1JcIixTbltTbi5TSUxFTlQ9NV09XCJTSUxFTlRcIjtmdW5jdGlvbiBoYSh0LGUpe2Zvcih2YXIgbj1bXSxyPTI7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyluW3ItMl09YXJndW1lbnRzW3JdO2lmKCEoZTx0LmxvZ0xldmVsKSl7dmFyIGk9KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLG89cGFbZV07aWYoIW8pdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiBcIitlK1wiKVwiKTtjb25zb2xlW29dLmFwcGx5KGNvbnNvbGUsbm8oW1wiW1wiK2krXCJdICBcIit0Lm5hbWUrXCI6XCJdLG4pKX19dmFyIGxhPXtkZWJ1Zzp1YS5ERUJVRyx2ZXJib3NlOnVhLlZFUkJPU0UsaW5mbzp1YS5JTkZPLHdhcm46dWEuV0FSTixlcnJvcjp1YS5FUlJPUixzaWxlbnQ6dWEuU0lMRU5UfSxmYT11YS5JTkZPLHBhPSgoej17fSlbdWEuREVCVUddPVwibG9nXCIselt1YS5WRVJCT1NFXT1cImxvZ1wiLHpbdWEuSU5GT109XCJpbmZvXCIselt1YS5XQVJOXT1cIndhcm5cIix6W3VhLkVSUk9SXT1cImVycm9yXCIseiksZGE9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2YS5wcm90b3R5cGUsXCJsb2dMZXZlbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9nTGV2ZWx9LHNldDpmdW5jdGlvbih0KXtpZighKHQgaW4gdWEpKXRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgdmFsdWUgXCInK3QrJ1wiIGFzc2lnbmVkIHRvIGBsb2dMZXZlbGAnKTt0aGlzLl9sb2dMZXZlbD10fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHZhLnByb3RvdHlwZS5zZXRMb2dMZXZlbD1mdW5jdGlvbih0KXt0aGlzLl9sb2dMZXZlbD1cInN0cmluZ1wiPT10eXBlb2YgdD9sYVt0XTp0fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodmEucHJvdG90eXBlLFwibG9nSGFuZGxlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9nSGFuZGxlcn0sc2V0OmZ1bmN0aW9uKHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dGhpcy5fbG9nSGFuZGxlcj10fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2YS5wcm90b3R5cGUsXCJ1c2VyTG9nSGFuZGxlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl91c2VyTG9nSGFuZGxlcj10fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHZhLnByb3RvdHlwZS5kZWJ1Zz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt0aGlzLl91c2VyTG9nSGFuZGxlciYmdGhpcy5fdXNlckxvZ0hhbmRsZXIuYXBwbHkodGhpcyxubyhbdGhpcyx1YS5ERUJVR10sdCkpLHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcyxubyhbdGhpcyx1YS5ERUJVR10sdCkpfSx2YS5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RoaXMuX3VzZXJMb2dIYW5kbGVyJiZ0aGlzLl91c2VyTG9nSGFuZGxlci5hcHBseSh0aGlzLG5vKFt0aGlzLHVhLlZFUkJPU0VdLHQpKSx0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsbm8oW3RoaXMsdWEuVkVSQk9TRV0sdCkpfSx2YS5wcm90b3R5cGUuaW5mbz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt0aGlzLl91c2VyTG9nSGFuZGxlciYmdGhpcy5fdXNlckxvZ0hhbmRsZXIuYXBwbHkodGhpcyxubyhbdGhpcyx1YS5JTkZPXSx0KSksdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLG5vKFt0aGlzLHVhLklORk9dLHQpKX0sdmEucHJvdG90eXBlLndhcm49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dGhpcy5fdXNlckxvZ0hhbmRsZXImJnRoaXMuX3VzZXJMb2dIYW5kbGVyLmFwcGx5KHRoaXMsbm8oW3RoaXMsdWEuV0FSTl0sdCkpLHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcyxubyhbdGhpcyx1YS5XQVJOXSx0KSl9LHZhLnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt0aGlzLl91c2VyTG9nSGFuZGxlciYmdGhpcy5fdXNlckxvZ0hhbmRsZXIuYXBwbHkodGhpcyxubyhbdGhpcyx1YS5FUlJPUl0sdCkpLHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcyxubyhbdGhpcyx1YS5FUlJPUl0sdCkpfSx2YSk7ZnVuY3Rpb24gdmEodCl7dGhpcy5uYW1lPXQsdGhpcy5fbG9nTGV2ZWw9ZmEsdGhpcy5fbG9nSGFuZGxlcj1oYSx0aGlzLl91c2VyTG9nSGFuZGxlcj1udWxsLGNhLnB1c2godGhpcyl9ZnVuY3Rpb24gZ2EoZSl7Y2EuZm9yRWFjaChmdW5jdGlvbih0KXt0LnNldExvZ0xldmVsKGUpfSl9ZnVuY3Rpb24geWEoYSxlKXtmb3IodmFyIHQ9MCxuPWNhO3Q8bi5sZW5ndGg7dCsrKSFmdW5jdGlvbih0KXt2YXIgbz1udWxsO2UmJmUubGV2ZWwmJihvPWxhW2UubGV2ZWxdKSx0LnVzZXJMb2dIYW5kbGVyPW51bGw9PT1hP251bGw6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49W10scj0yO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspbltyLTJdPWFyZ3VtZW50c1tyXTt2YXIgaT1uLm1hcChmdW5jdGlvbih0KXtpZihudWxsPT10KXJldHVybiBudWxsO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiB0O2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0fHxcImJvb2xlYW5cIj09dHlwZW9mIHQpcmV0dXJuIHQudG9TdHJpbmcoKTtpZih0IGluc3RhbmNlb2YgRXJyb3IpcmV0dXJuIHQubWVzc2FnZTt0cnl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpfWNhdGNoKHQpe3JldHVybiBudWxsfX0pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdH0pLmpvaW4oXCIgXCIpO2U+PShudWxsIT1vP286dC5sb2dMZXZlbCkmJmEoe2xldmVsOnVhW2VdLnRvTG93ZXJDYXNlKCksbWVzc2FnZTppLGFyZ3M6bix0eXBlOnQubmFtZX0pfX0oblt0XSl9dmFyIFNuPSgoRz17fSlbXCJuby1hcHBcIl09XCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKClcIixHW1wiYmFkLWFwcC1uYW1lXCJdPVwiSWxsZWdhbCBBcHAgbmFtZTogJ3skYXBwTmFtZX1cIixHW1wiZHVwbGljYXRlLWFwcFwiXT1cIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHNcIixHW1wiYXBwLWRlbGV0ZWRcIl09XCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLEdbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiXT1cImZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSBGaXJlYmFzZSBBcHAgaW5zdGFuY2UuXCIsR1tcImludmFsaWQtbG9nLWFyZ3VtZW50XCJdPVwiRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi5cIixHKSxtYT1uZXcga28oXCJhcHBcIixcIkZpcmViYXNlXCIsU24pLGJhPVwiQGZpcmViYXNlL2FwcFwiLF9hPVwiW0RFRkFVTFRdXCIsd2E9KCh6PXt9KVtiYV09XCJmaXJlLWNvcmVcIix6W1wiQGZpcmViYXNlL2FuYWx5dGljc1wiXT1cImZpcmUtYW5hbHl0aWNzXCIseltcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIl09XCJmaXJlLWFwcC1jaGVja1wiLHpbXCJAZmlyZWJhc2UvYXV0aFwiXT1cImZpcmUtYXV0aFwiLHpbXCJAZmlyZWJhc2UvZGF0YWJhc2VcIl09XCJmaXJlLXJ0ZGJcIix6W1wiQGZpcmViYXNlL2Z1bmN0aW9uc1wiXT1cImZpcmUtZm5cIix6W1wiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIl09XCJmaXJlLWlpZFwiLHpbXCJAZmlyZWJhc2UvbWVzc2FnaW5nXCJdPVwiZmlyZS1mY21cIix6W1wiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCJdPVwiZmlyZS1wZXJmXCIseltcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCJdPVwiZmlyZS1yY1wiLHpbXCJAZmlyZWJhc2Uvc3RvcmFnZVwiXT1cImZpcmUtZ2NzXCIseltcIkBmaXJlYmFzZS9maXJlc3RvcmVcIl09XCJmaXJlLWZzdFwiLHpbXCJmaXJlLWpzXCJdPVwiZmlyZS1qc1wiLHpbXCJmaXJlYmFzZS13cmFwcGVyXCJdPVwiZmlyZS1qcy1hbGxcIix6KSxJYT1uZXcgZGEoXCJAZmlyZWJhc2UvYXBwXCIpLFRhPShPYmplY3QuZGVmaW5lUHJvcGVydHkoRWEucHJvdG90eXBlLFwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrRGVzdHJveWVkXygpLHRoaXMuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkX30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuY2hlY2tEZXN0cm95ZWRfKCksdGhpcy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWRfPXR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEVhLnByb3RvdHlwZSxcIm5hbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCksdGhpcy5uYW1lX30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRWEucHJvdG90eXBlLFwib3B0aW9uc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja0Rlc3Ryb3llZF8oKSx0aGlzLm9wdGlvbnNffSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLEVhLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXtlLmNoZWNrRGVzdHJveWVkXygpLHQoKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZS5maXJlYmFzZV8uSU5URVJOQUwucmVtb3ZlQXBwKGUubmFtZV8pLFByb21pc2UuYWxsKGUuY29udGFpbmVyLmdldFByb3ZpZGVycygpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5kZWxldGUoKX0pKX0pLnRoZW4oZnVuY3Rpb24oKXtlLmlzRGVsZXRlZF89ITB9KX0sRWEucHJvdG90eXBlLl9nZXRTZXJ2aWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPV9hKSx0aGlzLmNoZWNrRGVzdHJveWVkXygpLHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKHQpLmdldEltbWVkaWF0ZSh7aWRlbnRpZmllcjplfSl9LEVhLnByb3RvdHlwZS5fcmVtb3ZlU2VydmljZUluc3RhbmNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9X2EpLHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKHQpLmNsZWFySW5zdGFuY2UoZSl9LEVhLnByb3RvdHlwZS5fYWRkQ29tcG9uZW50PWZ1bmN0aW9uKGUpe3RyeXt0aGlzLmNvbnRhaW5lci5hZGRDb21wb25lbnQoZSl9Y2F0Y2godCl7SWEuZGVidWcoXCJDb21wb25lbnQgXCIrZS5uYW1lK1wiIGZhaWxlZCB0byByZWdpc3RlciB3aXRoIEZpcmViYXNlQXBwIFwiK3RoaXMubmFtZSx0KX19LEVhLnByb3RvdHlwZS5fYWRkT3JPdmVyd3JpdGVDb21wb25lbnQ9ZnVuY3Rpb24odCl7dGhpcy5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQodCl9LEVhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57bmFtZTp0aGlzLm5hbWUsYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkOnRoaXMuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkLG9wdGlvbnM6dGhpcy5vcHRpb25zfX0sRWEucHJvdG90eXBlLmNoZWNrRGVzdHJveWVkXz1mdW5jdGlvbigpe2lmKHRoaXMuaXNEZWxldGVkXyl0aHJvdyBtYS5jcmVhdGUoXCJhcHAtZGVsZXRlZFwiLHthcHBOYW1lOnRoaXMubmFtZV99KX0sRWEpO2Z1bmN0aW9uIEVhKHQsZSxuKXt2YXIgcj10aGlzO3RoaXMuZmlyZWJhc2VfPW4sdGhpcy5pc0RlbGV0ZWRfPSExLHRoaXMubmFtZV89ZS5uYW1lLHRoaXMuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXz1lLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZHx8ITEsdGhpcy5vcHRpb25zXz1jbyh0KSx0aGlzLmNvbnRhaW5lcj1uZXcgYWEoZS5uYW1lKSx0aGlzLl9hZGRDb21wb25lbnQobmV3IGVhKFwiYXBwXCIsZnVuY3Rpb24oKXtyZXR1cm4gcn0sXCJQVUJMSUNcIikpLHRoaXMuZmlyZWJhc2VfLklOVEVSTkFMLmNvbXBvbmVudHMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gci5fYWRkQ29tcG9uZW50KHQpfSl9VGEucHJvdG90eXBlLm5hbWUmJlRhLnByb3RvdHlwZS5vcHRpb25zfHxUYS5wcm90b3R5cGUuZGVsZXRlfHxjb25zb2xlLmxvZyhcImRjXCIpO3ZhciBTYT1cIjguNS4wXCI7ZnVuY3Rpb24gQ2EoYSl7dmFyIHM9e30sdT1uZXcgTWFwLGM9e19fZXNNb2R1bGU6ITAsaW5pdGlhbGl6ZUFwcDpmdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTtcIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWV8fChlPXtuYW1lOmV9KTt2YXIgbj1lO3ZvaWQgMD09PW4ubmFtZSYmKG4ubmFtZT1fYSk7ZT1uLm5hbWU7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGV8fCFlKXRocm93IG1hLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiLHthcHBOYW1lOlN0cmluZyhlKX0pO2lmKERvKHMsZSkpdGhyb3cgbWEuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiLHthcHBOYW1lOmV9KTtuPW5ldyBhKHQsbixjKTtyZXR1cm4gc1tlXT1ufSxhcHA6aCxyZWdpc3RlclZlcnNpb246ZnVuY3Rpb24odCxlLG4pe3ZhciByPW51bGwhPT0oaT13YVt0XSkmJnZvaWQgMCE9PWk/aTp0O24mJihyKz1cIi1cIituKTt2YXIgaT1yLm1hdGNoKC9cXHN8XFwvLyksdD1lLm1hdGNoKC9cXHN8XFwvLyk7aWYoaXx8dCl7bj1bJ1VuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJytyKydcIiB3aXRoIHZlcnNpb24gXCInK2UrJ1wiOiddO3JldHVybiBpJiZuLnB1c2goJ2xpYnJhcnkgbmFtZSBcIicrcisnXCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKScpLGkmJnQmJm4ucHVzaChcImFuZFwiKSx0JiZuLnB1c2goJ3ZlcnNpb24gbmFtZSBcIicrZSsnXCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKScpLHZvaWQgSWEud2FybihuLmpvaW4oXCIgXCIpKX1vKG5ldyBlYShyK1wiLXZlcnNpb25cIixmdW5jdGlvbigpe3JldHVybntsaWJyYXJ5OnIsdmVyc2lvbjplfX0sXCJWRVJTSU9OXCIpKX0sc2V0TG9nTGV2ZWw6Z2Esb25Mb2c6ZnVuY3Rpb24odCxlKXtpZihudWxsIT09dCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBtYS5jcmVhdGUoXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiKTt5YSh0LGUpfSxhcHBzOm51bGwsU0RLX1ZFUlNJT046U2EsSU5URVJOQUw6e3JlZ2lzdGVyQ29tcG9uZW50Om8scmVtb3ZlQXBwOmZ1bmN0aW9uKHQpe2RlbGV0ZSBzW3RdfSxjb21wb25lbnRzOnUsdXNlQXNTZXJ2aWNlOmZ1bmN0aW9uKHQsZSl7aWYoXCJzZXJ2ZXJBdXRoXCI9PT1lKXJldHVybiBudWxsO3JldHVybiBlfX19O2Z1bmN0aW9uIGgodCl7aWYoIURvKHMsdD10fHxfYSkpdGhyb3cgbWEuY3JlYXRlKFwibm8tYXBwXCIse2FwcE5hbWU6dH0pO3JldHVybiBzW3RdfWZ1bmN0aW9uIG8obil7dmFyIHQscj1uLm5hbWU7aWYodS5oYXMocikpcmV0dXJuIElhLmRlYnVnKFwiVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgXCIrcitcIi5cIiksXCJQVUJMSUNcIj09PW4udHlwZT9jW3JdOm51bGw7dS5zZXQocixuKSxcIlBVQkxJQ1wiPT09bi50eXBlJiYodD1mdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZih0PXZvaWQgMD09PXQ/aCgpOnQpW3JdKXRocm93IG1hLmNyZWF0ZShcImludmFsaWQtYXBwLWFyZ3VtZW50XCIse2FwcE5hbWU6cn0pO3JldHVybiB0W3JdKCl9LHZvaWQgMCE9PW4uc2VydmljZVByb3BzJiZobyh0LG4uc2VydmljZVByb3BzKSxjW3JdPXQsYS5wcm90b3R5cGVbcl09ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07cmV0dXJuIHRoaXMuX2dldFNlcnZpY2UuYmluZCh0aGlzLHIpLmFwcGx5KHRoaXMsbi5tdWx0aXBsZUluc3RhbmNlcz90OltdKX0pO2Zvcih2YXIgZT0wLGk9T2JqZWN0LmtleXMocyk7ZTxpLmxlbmd0aDtlKyspe3ZhciBvPWlbZV07c1tvXS5fYWRkQ29tcG9uZW50KG4pfXJldHVyblwiUFVCTElDXCI9PT1uLnR5cGU/Y1tyXTpudWxsfXJldHVybiBjLmRlZmF1bHQ9YyxPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxcImFwcHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHMpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gc1t0XX0pfX0pLGguQXBwPWEsY312YXIgRz1mdW5jdGlvbiB0KCl7dmFyIGU9Q2EoVGEpO3JldHVybiBlLklOVEVSTkFMPUppKEppKHt9LGUuSU5URVJOQUwpLHtjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZTp0LGV4dGVuZE5hbWVzcGFjZTpmdW5jdGlvbih0KXtobyhlLHQpfSxjcmVhdGVTdWJzY3JpYmU6cW8sRXJyb3JGYWN0b3J5OmtvLGRlZXBFeHRlbmQ6aG99KSxlfSgpLGthPShOYS5wcm90b3R5cGUuZ2V0UGxhdGZvcm1JbmZvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpLm1hcChmdW5jdGlvbih0KXtpZihmdW5jdGlvbih0KXt0PXQuZ2V0Q29tcG9uZW50KCk7cmV0dXJuXCJWRVJTSU9OXCI9PT0obnVsbD09dD92b2lkIDA6dC50eXBlKX0odCkpe3Q9dC5nZXRJbW1lZGlhdGUoKTtyZXR1cm4gdC5saWJyYXJ5K1wiL1wiK3QudmVyc2lvbn1yZXR1cm4gbnVsbH0pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdH0pLmpvaW4oXCIgXCIpfSxOYSk7ZnVuY3Rpb24gTmEodCl7dGhpcy5jb250YWluZXI9dH1cIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmc2VsZi5zZWxmPT09c2VsZiYmdm9pZCAwIT09c2VsZi5maXJlYmFzZSYmKElhLndhcm4oXCJcXG4gICAgV2FybmluZzogRmlyZWJhc2UgaXMgYWxyZWFkeSBkZWZpbmVkIGluIHRoZSBnbG9iYWwgc2NvcGUuIFBsZWFzZSBtYWtlIHN1cmVcXG4gICAgRmlyZWJhc2UgbGlicmFyeSBpcyBvbmx5IGxvYWRlZCBvbmNlLlxcbiAgXCIpLChRcz1zZWxmLmZpcmViYXNlLlNES19WRVJTSU9OKSYmMDw9UXMuaW5kZXhPZihcIkxJVEVcIikmJklhLndhcm4oXCJcXG4gICAgV2FybmluZzogWW91IGFyZSB0cnlpbmcgdG8gbG9hZCBGaXJlYmFzZSB3aGlsZSB1c2luZyBGaXJlYmFzZSBQZXJmb3JtYW5jZSBzdGFuZGFsb25lIHNjcmlwdC5cXG4gICAgWW91IHNob3VsZCBsb2FkIEZpcmViYXNlIFBlcmZvcm1hbmNlIHdpdGggdGhpcyBpbnN0YW5jZSBvZiBGaXJlYmFzZSB0byBhdm9pZCBsb2FkaW5nIGR1cGxpY2F0ZSBjb2RlLlxcbiAgICBcIikpO3ZhciBBYT1HLmluaXRpYWxpemVBcHA7Ry5pbml0aWFsaXplQXBwPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBmdW5jdGlvbigpe3RyeXtyZXR1cm5cIltvYmplY3QgcHJvY2Vzc11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2Vzcyl9Y2F0Y2godCl7cmV0dXJufX0oKSYmSWEud2FybignXFxuICAgICAgV2FybmluZzogVGhpcyBpcyBhIGJyb3dzZXItdGFyZ2V0ZWQgRmlyZWJhc2UgYnVuZGxlIGJ1dCBpdCBhcHBlYXJzIGl0IGlzIGJlaW5nXFxuICAgICAgcnVuIGluIGEgTm9kZSBlbnZpcm9ubWVudC4gIElmIHJ1bm5pbmcgaW4gYSBOb2RlIGVudmlyb25tZW50LCBtYWtlIHN1cmUgeW91XFxuICAgICAgYXJlIHVzaW5nIHRoZSBidW5kbGUgc3BlY2lmaWVkIGJ5IHRoZSBcIm1haW5cIiBmaWVsZCBpbiBwYWNrYWdlLmpzb24uXFxuICAgICAgXFxuICAgICAgSWYgeW91IGFyZSB1c2luZyBXZWJwYWNrLCB5b3UgY2FuIHNwZWNpZnkgXCJtYWluXCIgYXMgdGhlIGZpcnN0IGl0ZW0gaW5cXG4gICAgICBcInJlc29sdmUubWFpbkZpZWxkc1wiOlxcbiAgICAgIGh0dHBzOi8vd2VicGFjay5qcy5vcmcvY29uZmlndXJhdGlvbi9yZXNvbHZlLyNyZXNvbHZlbWFpbmZpZWxkc1xcbiAgICAgIFxcbiAgICAgIElmIHVzaW5nIFJvbGx1cCwgdXNlIHRoZSBAcm9sbHVwL3BsdWdpbi1ub2RlLXJlc29sdmUgcGx1Z2luIGFuZCBzcGVjaWZ5IFwibWFpblwiXFxuICAgICAgYXMgdGhlIGZpcnN0IGl0ZW0gaW4gXCJtYWluRmllbGRzXCIsIGUuZy4gW1xcJ21haW5cXCcsIFxcJ21vZHVsZVxcJ10uXFxuICAgICAgaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9Acm9sbHVwL3BsdWdpbi1ub2RlLXJlc29sdmVcXG4gICAgICAnKSxBYS5hcHBseSh2b2lkIDAsdCl9O3ZhciBSYSxQYSxYbD1HOyhSYT1YbCkuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IGVhKFwicGxhdGZvcm0tbG9nZ2VyXCIsZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBrYSh0KX0sXCJQUklWQVRFXCIpKSxSYS5yZWdpc3RlclZlcnNpb24oYmEsXCIwLjYuMjFcIixQYSksUmEucmVnaXN0ZXJWZXJzaW9uKFwiZmlyZS1qc1wiLFwiXCIpO1hsLnJlZ2lzdGVyVmVyc2lvbihcImZpcmViYXNlXCIsXCI4LjUuMFwiLFwiYXBwXCIpOyFmdW5jdGlvbigpe3ZhciB0LG89XCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmRlZmluZVByb3BlcnRpZXM/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXt0IT1BcnJheS5wcm90b3R5cGUmJnQhPU9iamVjdC5wcm90b3R5cGUmJih0W2VdPW4udmFsdWUpfTt2YXIgdT1mdW5jdGlvbih0KXt0PVtcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3csXCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJnNlbGYsXCJvYmplY3RcIj09dHlwZW9mIGdsb2JhbCYmZ2xvYmFsLHRdO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7KytlKXt2YXIgbj10W2VdO2lmKG4mJm4uTWF0aD09TWF0aClyZXR1cm4gbn1yZXR1cm4gZ2xvYmFsVGhpc30odGhpcyk7ZnVuY3Rpb24gYyh0KXt2YXIgZSxuLHI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yJiZ0W1N5bWJvbC5pdGVyYXRvcl07cmV0dXJuIHI/ci5jYWxsKHQpOntuZXh0OihlPXQsbj0wLGZ1bmN0aW9uKCl7cmV0dXJuIG48ZS5sZW5ndGg/e2RvbmU6ITEsdmFsdWU6ZVtuKytdfTp7ZG9uZTohMH19KX19IWZ1bmN0aW9uKHQsZSl7aWYoZSl7dmFyIG49dTt0PXQuc3BsaXQoXCIuXCIpO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGgtMTtyKyspe3ZhciBpPXRbcl07aSBpbiBufHwobltpXT17fSksbj1uW2ldfShlPWUocj1uW3Q9dFt0Lmxlbmd0aC0xXV0pKSE9ciYmbnVsbCE9ZSYmbyhuLHQse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSl9fShcIlByb21pc2VcIixmdW5jdGlvbih0KXtmdW5jdGlvbiBhKHQpe3RoaXMuYj0wLHRoaXMuYz12b2lkIDAsdGhpcy5hPVtdO3ZhciBlPXRoaXMuZigpO3RyeXt0KGUucmVzb2x2ZSxlLnJlamVjdCl9Y2F0Y2godCl7ZS5yZWplY3QodCl9fWZ1bmN0aW9uIGUoKXt0aGlzLmE9bnVsbH1mdW5jdGlvbiBzKGUpe3JldHVybiBlIGluc3RhbmNlb2YgYT9lOm5ldyBhKGZ1bmN0aW9uKHQpe3QoZSl9KX1pZih0KXJldHVybiB0O2UucHJvdG90eXBlLmI9ZnVuY3Rpb24odCl7dmFyIGU7bnVsbD09dGhpcy5hJiYodGhpcy5hPVtdLChlPXRoaXMpLmMoZnVuY3Rpb24oKXtlLmcoKX0pKSx0aGlzLmEucHVzaCh0KX07dmFyIG49dS5zZXRUaW1lb3V0O2UucHJvdG90eXBlLmM9ZnVuY3Rpb24odCl7bih0LDApfSxlLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7Zm9yKDt0aGlzLmEmJnRoaXMuYS5sZW5ndGg7KXt2YXIgdD10aGlzLmE7dGhpcy5hPVtdO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7KytlKXt2YXIgbj10W2VdO3RbZV09bnVsbDt0cnl7bigpfWNhdGNoKHQpe3RoaXMuZih0KX19fXRoaXMuYT1udWxsfSxlLnByb3RvdHlwZS5mPWZ1bmN0aW9uKHQpe3RoaXMuYyhmdW5jdGlvbigpe3Rocm93IHR9KX0sYS5wcm90b3R5cGUuZj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3J8fChyPSEwLGUuY2FsbChuLHQpKX19dmFyIG49dGhpcyxyPSExO3JldHVybntyZXNvbHZlOnQodGhpcy5tKSxyZWplY3Q6dCh0aGlzLmcpfX0sYS5wcm90b3R5cGUubT1mdW5jdGlvbih0KXtpZih0PT09dGhpcyl0aGlzLmcobmV3IFR5cGVFcnJvcihcIkEgUHJvbWlzZSBjYW5ub3QgcmVzb2x2ZSB0byBpdHNlbGZcIikpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIGEpdGhpcy5zKHQpO2Vsc2V7dDpzd2l0Y2godHlwZW9mIHQpe2Nhc2VcIm9iamVjdFwiOnZhciBlPW51bGwhPXQ7YnJlYWsgdDtjYXNlXCJmdW5jdGlvblwiOmU9ITA7YnJlYWsgdDtkZWZhdWx0OmU9ITF9ZT90aGlzLnYodCk6dGhpcy5oKHQpfX0sYS5wcm90b3R5cGUudj1mdW5jdGlvbih0KXt2YXIgZT12b2lkIDA7dHJ5e2U9dC50aGVufWNhdGNoKHQpe3JldHVybiB2b2lkIHRoaXMuZyh0KX1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP3RoaXMudShlLHQpOnRoaXMuaCh0KX0sYS5wcm90b3R5cGUuZz1mdW5jdGlvbih0KXt0aGlzLmkoMix0KX0sYS5wcm90b3R5cGUuaD1mdW5jdGlvbih0KXt0aGlzLmkoMSx0KX0sYS5wcm90b3R5cGUuaT1mdW5jdGlvbih0LGUpe2lmKDAhPXRoaXMuYil0aHJvdyBFcnJvcihcIkNhbm5vdCBzZXR0bGUoXCIrdCtcIiwgXCIrZStcIik6IFByb21pc2UgYWxyZWFkeSBzZXR0bGVkIGluIHN0YXRlXCIrdGhpcy5iKTt0aGlzLmI9dCx0aGlzLmM9ZSx0aGlzLmwoKX0sYS5wcm90b3R5cGUubD1mdW5jdGlvbigpe2lmKG51bGwhPXRoaXMuYSl7Zm9yKHZhciB0PTA7dDx0aGlzLmEubGVuZ3RoOysrdClpLmIodGhpcy5hW3RdKTt0aGlzLmE9bnVsbH19O3ZhciBpPW5ldyBlO3JldHVybiBhLnByb3RvdHlwZS5zPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZigpO3QuUWEoZS5yZXNvbHZlLGUucmVqZWN0KX0sYS5wcm90b3R5cGUudT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZigpO3RyeXt0LmNhbGwoZSxuLnJlc29sdmUsbi5yZWplY3QpfWNhdGNoKHQpe24ucmVqZWN0KHQpfX0sYS5wcm90b3R5cGUudGhlbj1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oZSx0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2Z1bmN0aW9uKHQpe3RyeXtyKGUodCkpfWNhdGNoKHQpe2kodCl9fTp0fXZhciByLGksbz1uZXcgYShmdW5jdGlvbih0LGUpe3I9dCxpPWV9KTtyZXR1cm4gdGhpcy5RYShuKHQsciksbihlLGkpKSxvfSxhLnByb3RvdHlwZS5jYXRjaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCx0KX0sYS5wcm90b3R5cGUuUWE9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7c3dpdGNoKHIuYil7Y2FzZSAxOnQoci5jKTticmVhaztjYXNlIDI6ZShyLmMpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbmV4cGVjdGVkIHN0YXRlOiBcIityLmIpfX12YXIgcj10aGlzO251bGw9PXRoaXMuYT9pLmIobik6dGhpcy5hLnB1c2gobil9LGEucmVzb2x2ZT1zLGEucmVqZWN0PWZ1bmN0aW9uKG4pe3JldHVybiBuZXcgYShmdW5jdGlvbih0LGUpe2Uobil9KX0sYS5yYWNlPWZ1bmN0aW9uKGkpe3JldHVybiBuZXcgYShmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1jKGkpLHI9bi5uZXh0KCk7IXIuZG9uZTtyPW4ubmV4dCgpKXMoci52YWx1ZSkuUWEodCxlKX0pfSxhLmFsbD1mdW5jdGlvbih0KXt2YXIgZT1jKHQpLG89ZS5uZXh0KCk7cmV0dXJuIG8uZG9uZT9zKFtdKTpuZXcgYShmdW5jdGlvbihuLHQpe2Zvcih2YXIgcj1bXSxpPTA7ci5wdXNoKHZvaWQgMCksaSsrLHMoby52YWx1ZSkuUWEoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JbZV09dCwwPT0tLWkmJm4ocil9fShyLmxlbmd0aC0xKSx0KSxvPWUubmV4dCgpLCFvLmRvbmU7KTt9KX0sYX0pO3ZhciBoPWh8fHt9LGw9dGhpc3x8c2VsZixlPS9eW1xcdysvXy1dK1s9XXswLDJ9JC8scz1udWxsO2Z1bmN0aW9uIGYodCl7cmV0dXJuKHQ9dC5xdWVyeVNlbGVjdG9yJiZ0LnF1ZXJ5U2VsZWN0b3IoXCJzY3JpcHRbbm9uY2VdXCIpKSYmKHQ9dC5ub25jZXx8dC5nZXRBdHRyaWJ1dGUoXCJub25jZVwiKSkmJmUudGVzdCh0KT90OlwiXCJ9ZnVuY3Rpb24gYSgpe31mdW5jdGlvbiBwKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVyblwib2JqZWN0XCIhPWU/ZTp0P0FycmF5LmlzQXJyYXkodCk/XCJhcnJheVwiOmU6XCJudWxsXCJ9ZnVuY3Rpb24gZCh0KXt2YXIgZT1wKHQpO3JldHVyblwiYXJyYXlcIj09ZXx8XCJvYmplY3RcIj09ZSYmXCJudW1iZXJcIj09dHlwZW9mIHQubGVuZ3RofWZ1bmN0aW9uIHYodCl7cmV0dXJuXCJmdW5jdGlvblwiPT1wKHQpfWZ1bmN0aW9uIGcodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuXCJvYmplY3RcIj09ZSYmbnVsbCE9dHx8XCJmdW5jdGlvblwiPT1lfXZhciBuPVwiY2xvc3VyZV91aWRfXCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkscj0wO2Z1bmN0aW9uIGkodCxlLG4pe3JldHVybiB0LmNhbGwuYXBwbHkodC5iaW5kLGFyZ3VtZW50cyl9ZnVuY3Rpb24geShlLG4sdCl7aWYoIWUpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciByPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3JldHVybiBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseSh0LHIpLGUuYXBwbHkobix0KX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkobixhcmd1bWVudHMpfX1mdW5jdGlvbiBtKHQsZSxuKXtyZXR1cm4obT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP2k6eSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIGIoZSl7dmFyIG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciB0PW4uc2xpY2UoKTtyZXR1cm4gdC5wdXNoLmFwcGx5KHQsYXJndW1lbnRzKSxlLmFwcGx5KHRoaXMsdCl9fWZ1bmN0aW9uIF8odCxlKXtmdW5jdGlvbiBuKCl7fW4ucHJvdG90eXBlPWUucHJvdG90eXBlLHQuYWI9ZS5wcm90b3R5cGUsdC5wcm90b3R5cGU9bmV3IG4sdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dH1mdW5jdGlvbiB3KHQpe3JldHVybiB0fWZ1bmN0aW9uIEkodCxlLG4pe3RoaXMuY29kZT1TK3QsdGhpcy5tZXNzYWdlPWV8fENbdF18fFwiXCIsdGhpcy5hPW58fG51bGx9ZnVuY3Rpb24gVCh0KXt2YXIgZT10JiZ0LmNvZGU7cmV0dXJuIGU/bmV3IEkoZS5zdWJzdHJpbmcoUy5sZW5ndGgpLHQubWVzc2FnZSx0LnNlcnZlclJlc3BvbnNlKTpudWxsfV8oSSxFcnJvciksSS5wcm90b3R5cGUudz1mdW5jdGlvbigpe3ZhciB0PXtjb2RlOnRoaXMuY29kZSxtZXNzYWdlOnRoaXMubWVzc2FnZX07cmV0dXJuIHRoaXMuYSYmKHQuc2VydmVyUmVzcG9uc2U9dGhpcy5hKSx0fSxJLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53KCl9O3ZhciBFLFM9XCJhdXRoL1wiLEM9e1wiYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb25cIjpcIlRoaXMgb3BlcmF0aW9uIGlzIHJlc3RyaWN0ZWQgdG8gYWRtaW5pc3RyYXRvcnMgb25seS5cIixcImFyZ3VtZW50LWVycm9yXCI6XCJcIixcImFwcC1ub3QtYXV0aG9yaXplZFwiOlwiVGhpcyBhcHAsIGlkZW50aWZpZWQgYnkgdGhlIGRvbWFpbiB3aGVyZSBpdCdzIGhvc3RlZCwgaXMgbm90IGF1dGhvcml6ZWQgdG8gdXNlIEZpcmViYXNlIEF1dGhlbnRpY2F0aW9uIHdpdGggdGhlIHByb3ZpZGVkIEFQSSBrZXkuIFJldmlldyB5b3VyIGtleSBjb25maWd1cmF0aW9uIGluIHRoZSBHb29nbGUgQVBJIGNvbnNvbGUuXCIsXCJhcHAtbm90LWluc3RhbGxlZFwiOlwiVGhlIHJlcXVlc3RlZCBtb2JpbGUgYXBwbGljYXRpb24gY29ycmVzcG9uZGluZyB0byB0aGUgaWRlbnRpZmllciAoQW5kcm9pZCBwYWNrYWdlIG5hbWUgb3IgaU9TIGJ1bmRsZSBJRCkgcHJvdmlkZWQgaXMgbm90IGluc3RhbGxlZCBvbiB0aGlzIGRldmljZS5cIixcImNhcHRjaGEtY2hlY2stZmFpbGVkXCI6XCJUaGUgcmVDQVBUQ0hBIHJlc3BvbnNlIHRva2VuIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkLCBleHBpcmVkLCBhbHJlYWR5IHVzZWQgb3IgdGhlIGRvbWFpbiBhc3NvY2lhdGVkIHdpdGggaXQgZG9lcyBub3QgbWF0Y2ggdGhlIGxpc3Qgb2Ygd2hpdGVsaXN0ZWQgZG9tYWlucy5cIixcImNvZGUtZXhwaXJlZFwiOlwiVGhlIFNNUyBjb2RlIGhhcyBleHBpcmVkLiBQbGVhc2UgcmUtc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgdG8gdHJ5IGFnYWluLlwiLFwiY29yZG92YS1ub3QtcmVhZHlcIjpcIkNvcmRvdmEgZnJhbWV3b3JrIGlzIG5vdCByZWFkeS5cIixcImNvcnMtdW5zdXBwb3J0ZWRcIjpcIlRoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkLlwiLFwiY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZVwiOlwiVGhpcyBjcmVkZW50aWFsIGlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIGEgZGlmZmVyZW50IHVzZXIgYWNjb3VudC5cIixcImN1c3RvbS10b2tlbi1taXNtYXRjaFwiOlwiVGhlIGN1c3RvbSB0b2tlbiBjb3JyZXNwb25kcyB0byBhIGRpZmZlcmVudCBhdWRpZW5jZS5cIixcInJlcXVpcmVzLXJlY2VudC1sb2dpblwiOlwiVGhpcyBvcGVyYXRpb24gaXMgc2Vuc2l0aXZlIGFuZCByZXF1aXJlcyByZWNlbnQgYXV0aGVudGljYXRpb24uIExvZyBpbiBhZ2FpbiBiZWZvcmUgcmV0cnlpbmcgdGhpcyByZXF1ZXN0LlwiLFwiZHluYW1pYy1saW5rLW5vdC1hY3RpdmF0ZWRcIjpcIlBsZWFzZSBhY3RpdmF0ZSBEeW5hbWljIExpbmtzIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlIGFuZCBhZ3JlZSB0byB0aGUgdGVybXMgYW5kIGNvbmRpdGlvbnMuXCIsXCJlbWFpbC1jaGFuZ2UtbmVlZHMtdmVyaWZpY2F0aW9uXCI6XCJNdWx0aS1mYWN0b3IgdXNlcnMgbXVzdCBhbHdheXMgaGF2ZSBhIHZlcmlmaWVkIGVtYWlsLlwiLFwiZW1haWwtYWxyZWFkeS1pbi11c2VcIjpcIlRoZSBlbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC5cIixcImV4cGlyZWQtYWN0aW9uLWNvZGVcIjpcIlRoZSBhY3Rpb24gY29kZSBoYXMgZXhwaXJlZC4gXCIsXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiOlwiVGhpcyBvcGVyYXRpb24gaGFzIGJlZW4gY2FuY2VsbGVkIGR1ZSB0byBhbm90aGVyIGNvbmZsaWN0aW5nIHBvcHVwIGJlaW5nIG9wZW5lZC5cIixcImludGVybmFsLWVycm9yXCI6XCJBbiBpbnRlcm5hbCBlcnJvciBoYXMgb2NjdXJyZWQuXCIsXCJpbnZhbGlkLWFwcC1jcmVkZW50aWFsXCI6XCJUaGUgcGhvbmUgdmVyaWZpY2F0aW9uIHJlcXVlc3QgY29udGFpbnMgYW4gaW52YWxpZCBhcHBsaWNhdGlvbiB2ZXJpZmllci4gVGhlIHJlQ0FQVENIQSB0b2tlbiByZXNwb25zZSBpcyBlaXRoZXIgaW52YWxpZCBvciBleHBpcmVkLlwiLFwiaW52YWxpZC1hcHAtaWRcIjpcIlRoZSBtb2JpbGUgYXBwIGlkZW50aWZpZXIgaXMgbm90IHJlZ2lzdGVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LlwiLFwiaW52YWxpZC11c2VyLXRva2VuXCI6XCJUaGlzIHVzZXIncyBjcmVkZW50aWFsIGlzbid0IHZhbGlkIGZvciB0aGlzIHByb2plY3QuIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgdXNlcidzIHRva2VuIGhhcyBiZWVuIHRhbXBlcmVkIHdpdGgsIG9yIGlmIHRoZSB1c2VyIGlzbid0IGZvciB0aGUgcHJvamVjdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBBUEkga2V5LlwiLFwiaW52YWxpZC1hdXRoLWV2ZW50XCI6XCJBbiBpbnRlcm5hbCBlcnJvciBoYXMgb2NjdXJyZWQuXCIsXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlXCI6XCJUaGUgU01TIHZlcmlmaWNhdGlvbiBjb2RlIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgaW52YWxpZC4gUGxlYXNlIHJlc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgc21zIGFuZCBiZSBzdXJlIHVzZSB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgcHJvdmlkZWQgYnkgdGhlIHVzZXIuXCIsXCJpbnZhbGlkLWNvbnRpbnVlLXVyaVwiOlwiVGhlIGNvbnRpbnVlIFVSTCBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdCBpcyBpbnZhbGlkLlwiLFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIjpcIlRoZSBmb2xsb3dpbmcgQ29yZG92YSBwbHVnaW5zIG11c3QgYmUgaW5zdGFsbGVkIHRvIGVuYWJsZSBPQXV0aCBzaWduLWluOiBjb3Jkb3ZhLXBsdWdpbi1idWlsZGluZm8sIGNvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbiwgY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYiwgY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyIGFuZCBjb3Jkb3ZhLXBsdWdpbi1jdXN0b211cmxzY2hlbWUuXCIsXCJpbnZhbGlkLWN1c3RvbS10b2tlblwiOlwiVGhlIGN1c3RvbSB0b2tlbiBmb3JtYXQgaXMgaW5jb3JyZWN0LiBQbGVhc2UgY2hlY2sgdGhlIGRvY3VtZW50YXRpb24uXCIsXCJpbnZhbGlkLWR5bmFtaWMtbGluay1kb21haW5cIjpcIlRoZSBwcm92aWRlZCBkeW5hbWljIGxpbmsgZG9tYWluIGlzIG5vdCBjb25maWd1cmVkIG9yIGF1dGhvcml6ZWQgZm9yIHRoZSBjdXJyZW50IHByb2plY3QuXCIsXCJpbnZhbGlkLWVtYWlsXCI6XCJUaGUgZW1haWwgYWRkcmVzcyBpcyBiYWRseSBmb3JtYXR0ZWQuXCIsXCJpbnZhbGlkLWFwaS1rZXlcIjpcIllvdXIgQVBJIGtleSBpcyBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91IGhhdmUgY29waWVkIGl0IGNvcnJlY3RseS5cIixcImludmFsaWQtY2VydC1oYXNoXCI6XCJUaGUgU0hBLTEgY2VydGlmaWNhdGUgaGFzaCBwcm92aWRlZCBpcyBpbnZhbGlkLlwiLFwiaW52YWxpZC1jcmVkZW50aWFsXCI6XCJUaGUgc3VwcGxpZWQgYXV0aCBjcmVkZW50aWFsIGlzIG1hbGZvcm1lZCBvciBoYXMgZXhwaXJlZC5cIixcImludmFsaWQtbWVzc2FnZS1wYXlsb2FkXCI6XCJUaGUgZW1haWwgdGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgaW4gaXRzIG1lc3NhZ2UuIFBsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuXCIsXCJpbnZhbGlkLW11bHRpLWZhY3Rvci1zZXNzaW9uXCI6XCJUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi5cIixcImludmFsaWQtb2F1dGgtcHJvdmlkZXJcIjpcIkVtYWlsQXV0aFByb3ZpZGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgb3BlcmF0aW9uLiBUaGlzIG9wZXJhdGlvbiBvbmx5IHN1cHBvcnRzIE9BdXRoIHByb3ZpZGVycy5cIixcImludmFsaWQtb2F1dGgtY2xpZW50LWlkXCI6XCJUaGUgT0F1dGggY2xpZW50IElEIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkIG9yIGRvZXMgbm90IG1hdGNoIHRoZSBzcGVjaWZpZWQgQVBJIGtleS5cIixcInVuYXV0aG9yaXplZC1kb21haW5cIjpcIlRoaXMgZG9tYWluIGlzIG5vdCBhdXRob3JpemVkIGZvciBPQXV0aCBvcGVyYXRpb25zIGZvciB5b3VyIEZpcmViYXNlIHByb2plY3QuIEVkaXQgdGhlIGxpc3Qgb2YgYXV0aG9yaXplZCBkb21haW5zIGZyb20gdGhlIEZpcmViYXNlIGNvbnNvbGUuXCIsXCJpbnZhbGlkLWFjdGlvbi1jb2RlXCI6XCJUaGUgYWN0aW9uIGNvZGUgaXMgaW52YWxpZC4gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBjb2RlIGlzIG1hbGZvcm1lZCwgZXhwaXJlZCwgb3IgaGFzIGFscmVhZHkgYmVlbiB1c2VkLlwiLFwid3JvbmctcGFzc3dvcmRcIjpcIlRoZSBwYXNzd29yZCBpcyBpbnZhbGlkIG9yIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBwYXNzd29yZC5cIixcImludmFsaWQtcGVyc2lzdGVuY2UtdHlwZVwiOlwiVGhlIHNwZWNpZmllZCBwZXJzaXN0ZW5jZSB0eXBlIGlzIGludmFsaWQuIEl0IGNhbiBvbmx5IGJlIGxvY2FsLCBzZXNzaW9uIG9yIG5vbmUuXCIsXCJpbnZhbGlkLXBob25lLW51bWJlclwiOlwiVGhlIGZvcm1hdCBvZiB0aGUgcGhvbmUgbnVtYmVyIHByb3ZpZGVkIGlzIGluY29ycmVjdC4gUGxlYXNlIGVudGVyIHRoZSBwaG9uZSBudW1iZXIgaW4gYSBmb3JtYXQgdGhhdCBjYW4gYmUgcGFyc2VkIGludG8gRS4xNjQgZm9ybWF0LiBFLjE2NCBwaG9uZSBudW1iZXJzIGFyZSB3cml0dGVuIGluIHRoZSBmb3JtYXQgWytdW2NvdW50cnkgY29kZV1bc3Vic2NyaWJlciBudW1iZXIgaW5jbHVkaW5nIGFyZWEgY29kZV0uXCIsXCJpbnZhbGlkLXByb3ZpZGVyLWlkXCI6XCJUaGUgc3BlY2lmaWVkIHByb3ZpZGVyIElEIGlzIGludmFsaWQuXCIsXCJpbnZhbGlkLXJlY2lwaWVudC1lbWFpbFwiOlwiVGhlIGVtYWlsIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gZmFpbGVkIHRvIHNlbmQgYXMgdGhlIHByb3ZpZGVkIHJlY2lwaWVudCBlbWFpbCBhZGRyZXNzIGlzIGludmFsaWQuXCIsXCJpbnZhbGlkLXNlbmRlclwiOlwiVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgYW4gaW52YWxpZCBzZW5kZXIgZW1haWwgb3IgbmFtZS4gUGxlYXNlIGZpeCBieSBnb2luZyB0byB0aGUgQXV0aCBlbWFpbCB0ZW1wbGF0ZXMgc2VjdGlvbiBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZS5cIixcImludmFsaWQtdmVyaWZpY2F0aW9uLWlkXCI6XCJUaGUgdmVyaWZpY2F0aW9uIElEIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgaW52YWxpZC5cIixcImludmFsaWQtdGVuYW50LWlkXCI6XCJUaGUgQXV0aCBpbnN0YW5jZSdzIHRlbmFudCBJRCBpcyBpbnZhbGlkLlwiLFwibXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kXCI6XCJUaGUgdXNlciBkb2VzIG5vdCBoYXZlIGEgc2Vjb25kIGZhY3RvciBtYXRjaGluZyB0aGUgaWRlbnRpZmllciBwcm92aWRlZC5cIixcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCI6XCJQcm9vZiBvZiBvd25lcnNoaXAgb2YgYSBzZWNvbmQgZmFjdG9yIGlzIHJlcXVpcmVkIHRvIGNvbXBsZXRlIHNpZ24taW4uXCIsXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIjpcIkFuIEFuZHJvaWQgUGFja2FnZSBOYW1lIG11c3QgYmUgcHJvdmlkZWQgaWYgdGhlIEFuZHJvaWQgQXBwIGlzIHJlcXVpcmVkIHRvIGJlIGluc3RhbGxlZC5cIixcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiOlwiQmUgc3VyZSB0byBpbmNsdWRlIGF1dGhEb21haW4gd2hlbiBjYWxsaW5nIGZpcmViYXNlLmluaXRpYWxpemVBcHAoKSwgYnkgZm9sbG93aW5nIHRoZSBpbnN0cnVjdGlvbnMgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuXCIsXCJtaXNzaW5nLWFwcC1jcmVkZW50aWFsXCI6XCJUaGUgcGhvbmUgdmVyaWZpY2F0aW9uIHJlcXVlc3QgaXMgbWlzc2luZyBhbiBhcHBsaWNhdGlvbiB2ZXJpZmllciBhc3NlcnRpb24uIEEgcmVDQVBUQ0hBIHJlc3BvbnNlIHRva2VuIG5lZWRzIHRvIGJlIHByb3ZpZGVkLlwiLFwibWlzc2luZy12ZXJpZmljYXRpb24tY29kZVwiOlwiVGhlIHBob25lIGF1dGggY3JlZGVudGlhbCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVtcHR5IFNNUyB2ZXJpZmljYXRpb24gY29kZS5cIixcIm1pc3NpbmctY29udGludWUtdXJpXCI6XCJBIGNvbnRpbnVlIFVSTCBtdXN0IGJlIHByb3ZpZGVkIGluIHRoZSByZXF1ZXN0LlwiLFwibWlzc2luZy1pZnJhbWUtc3RhcnRcIjpcIkFuIGludGVybmFsIGVycm9yIGhhcyBvY2N1cnJlZC5cIixcIm1pc3NpbmctaW9zLWJ1bmRsZS1pZFwiOlwiQW4gaU9TIEJ1bmRsZSBJRCBtdXN0IGJlIHByb3ZpZGVkIGlmIGFuIEFwcCBTdG9yZSBJRCBpcyBwcm92aWRlZC5cIixcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIjpcIk5vIHNlY29uZCBmYWN0b3IgaWRlbnRpZmllciBpcyBwcm92aWRlZC5cIixcIm1pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb25cIjpcIlRoZSByZXF1ZXN0IGlzIG1pc3NpbmcgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi5cIixcIm1pc3Npbmctb3ItaW52YWxpZC1ub25jZVwiOlwiVGhlIHJlcXVlc3QgZG9lcyBub3QgY29udGFpbiBhIHZhbGlkIG5vbmNlLiBUaGlzIGNhbiBvY2N1ciBpZiB0aGUgU0hBLTI1NiBoYXNoIG9mIHRoZSBwcm92aWRlZCByYXcgbm9uY2UgZG9lcyBub3QgbWF0Y2ggdGhlIGhhc2hlZCBub25jZSBpbiB0aGUgSUQgdG9rZW4gcGF5bG9hZC5cIixcIm1pc3NpbmctcGhvbmUtbnVtYmVyXCI6XCJUbyBzZW5kIHZlcmlmaWNhdGlvbiBjb2RlcywgcHJvdmlkZSBhIHBob25lIG51bWJlciBmb3IgdGhlIHJlY2lwaWVudC5cIixcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCI6XCJUaGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIHdhcyBjcmVhdGVkIHdpdGggYW4gZW1wdHkgdmVyaWZpY2F0aW9uIElELlwiLFwiYXBwLWRlbGV0ZWRcIjpcIlRoaXMgaW5zdGFuY2Ugb2YgRmlyZWJhc2VBcHAgaGFzIGJlZW4gZGVsZXRlZC5cIixcImFjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxcIjpcIkFuIGFjY291bnQgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGUgc2FtZSBlbWFpbCBhZGRyZXNzIGJ1dCBkaWZmZXJlbnQgc2lnbi1pbiBjcmVkZW50aWFscy4gU2lnbiBpbiB1c2luZyBhIHByb3ZpZGVyIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGVtYWlsIGFkZHJlc3MuXCIsXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCI6XCJBIG5ldHdvcmsgZXJyb3IgKHN1Y2ggYXMgdGltZW91dCwgaW50ZXJydXB0ZWQgY29ubmVjdGlvbiBvciB1bnJlYWNoYWJsZSBob3N0KSBoYXMgb2NjdXJyZWQuXCIsXCJuby1hdXRoLWV2ZW50XCI6XCJBbiBpbnRlcm5hbCBlcnJvciBoYXMgb2NjdXJyZWQuXCIsXCJuby1zdWNoLXByb3ZpZGVyXCI6XCJVc2VyIHdhcyBub3QgbGlua2VkIHRvIGFuIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcHJvdmlkZXIuXCIsXCJudWxsLXVzZXJcIjpcIkEgbnVsbCB1c2VyIG9iamVjdCB3YXMgcHJvdmlkZWQgYXMgdGhlIGFyZ3VtZW50IGZvciBhbiBvcGVyYXRpb24gd2hpY2ggcmVxdWlyZXMgYSBub24tbnVsbCB1c2VyIG9iamVjdC5cIixcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiOlwiVGhlIGdpdmVuIHNpZ24taW4gcHJvdmlkZXIgaXMgZGlzYWJsZWQgZm9yIHRoaXMgRmlyZWJhc2UgcHJvamVjdC4gRW5hYmxlIGl0IGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLCB1bmRlciB0aGUgc2lnbi1pbiBtZXRob2QgdGFiIG9mIHRoZSBBdXRoIHNlY3Rpb24uXCIsXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCI6J1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIGVudmlyb25tZW50IHRoaXMgYXBwbGljYXRpb24gaXMgcnVubmluZyBvbi4gXCJsb2NhdGlvbi5wcm90b2NvbFwiIG11c3QgYmUgaHR0cCwgaHR0cHMgb3IgY2hyb21lLWV4dGVuc2lvbiBhbmQgd2ViIHN0b3JhZ2UgbXVzdCBiZSBlbmFibGVkLicsXCJwb3B1cC1ibG9ja2VkXCI6XCJVbmFibGUgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB3aXRoIHRoZSBwb3B1cC4gSXQgbWF5IGhhdmUgYmVlbiBibG9ja2VkIGJ5IHRoZSBicm93c2VyLlwiLFwicG9wdXAtY2xvc2VkLWJ5LXVzZXJcIjpcIlRoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcgdGhlIG9wZXJhdGlvbi5cIixcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCI6XCJVc2VyIGNhbiBvbmx5IGJlIGxpbmtlZCB0byBvbmUgaWRlbnRpdHkgZm9yIHRoZSBnaXZlbiBwcm92aWRlci5cIixcInF1b3RhLWV4Y2VlZGVkXCI6XCJUaGUgcHJvamVjdCdzIHF1b3RhIGZvciB0aGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBleGNlZWRlZC5cIixcInJlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyXCI6XCJUaGUgcmVkaXJlY3Qgb3BlcmF0aW9uIGhhcyBiZWVuIGNhbmNlbGxlZCBieSB0aGUgdXNlciBiZWZvcmUgZmluYWxpemluZy5cIixcInJlZGlyZWN0LW9wZXJhdGlvbi1wZW5kaW5nXCI6XCJBIHJlZGlyZWN0IHNpZ24taW4gb3BlcmF0aW9uIGlzIGFscmVhZHkgcGVuZGluZy5cIixcInJlamVjdGVkLWNyZWRlbnRpYWxcIjpcIlRoZSByZXF1ZXN0IGNvbnRhaW5zIG1hbGZvcm1lZCBvciBtaXNtYXRjaGluZyBjcmVkZW50aWFscy5cIixcInNlY29uZC1mYWN0b3ItYWxyZWFkeS1pbi11c2VcIjpcIlRoZSBzZWNvbmQgZmFjdG9yIGlzIGFscmVhZHkgZW5yb2xsZWQgb24gdGhpcyBhY2NvdW50LlwiLFwibWF4aW11bS1zZWNvbmQtZmFjdG9yLWNvdW50LWV4Y2VlZGVkXCI6XCJUaGUgbWF4aW11bSBhbGxvd2VkIG51bWJlciBvZiBzZWNvbmQgZmFjdG9ycyBvbiBhIHVzZXIgaGFzIGJlZW4gZXhjZWVkZWQuXCIsXCJ0ZW5hbnQtaWQtbWlzbWF0Y2hcIjpcIlRoZSBwcm92aWRlZCB0ZW5hbnQgSUQgZG9lcyBub3QgbWF0Y2ggdGhlIEF1dGggaW5zdGFuY2UncyB0ZW5hbnQgSURcIix0aW1lb3V0OlwiVGhlIG9wZXJhdGlvbiBoYXMgdGltZWQgb3V0LlwiLFwidXNlci10b2tlbi1leHBpcmVkXCI6XCJUaGUgdXNlcidzIGNyZWRlbnRpYWwgaXMgbm8gbG9uZ2VyIHZhbGlkLiBUaGUgdXNlciBtdXN0IHNpZ24gaW4gYWdhaW4uXCIsXCJ0b28tbWFueS1yZXF1ZXN0c1wiOlwiV2UgaGF2ZSBibG9ja2VkIGFsbCByZXF1ZXN0cyBmcm9tIHRoaXMgZGV2aWNlIGR1ZSB0byB1bnVzdWFsIGFjdGl2aXR5LiBUcnkgYWdhaW4gbGF0ZXIuXCIsXCJ1bmF1dGhvcml6ZWQtY29udGludWUtdXJpXCI6XCJUaGUgZG9tYWluIG9mIHRoZSBjb250aW51ZSBVUkwgaXMgbm90IHdoaXRlbGlzdGVkLiAgUGxlYXNlIHdoaXRlbGlzdCB0aGUgZG9tYWluIGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLlwiLFwidW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yXCI6XCJFbnJvbGxpbmcgYSBzZWNvbmQgZmFjdG9yIG9yIHNpZ25pbmcgaW4gd2l0aCBhIG11bHRpLWZhY3RvciBhY2NvdW50IHJlcXVpcmVzIHNpZ24taW4gd2l0aCBhIHN1cHBvcnRlZCBmaXJzdCBmYWN0b3IuXCIsXCJ1bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlXCI6XCJUaGUgY3VycmVudCBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZS5cIixcInVuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb25cIjpcIlRoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYSBtdWx0aS10ZW5hbnQgY29udGV4dC5cIixcInVudmVyaWZpZWQtZW1haWxcIjpcIlRoZSBvcGVyYXRpb24gcmVxdWlyZXMgYSB2ZXJpZmllZCBlbWFpbC5cIixcInVzZXItY2FuY2VsbGVkXCI6XCJUaGUgdXNlciBkaWQgbm90IGdyYW50IHlvdXIgYXBwbGljYXRpb24gdGhlIHBlcm1pc3Npb25zIGl0IHJlcXVlc3RlZC5cIixcInVzZXItbm90LWZvdW5kXCI6XCJUaGVyZSBpcyBubyB1c2VyIHJlY29yZCBjb3JyZXNwb25kaW5nIHRvIHRoaXMgaWRlbnRpZmllci4gVGhlIHVzZXIgbWF5IGhhdmUgYmVlbiBkZWxldGVkLlwiLFwidXNlci1kaXNhYmxlZFwiOlwiVGhlIHVzZXIgYWNjb3VudCBoYXMgYmVlbiBkaXNhYmxlZCBieSBhbiBhZG1pbmlzdHJhdG9yLlwiLFwidXNlci1taXNtYXRjaFwiOlwiVGhlIHN1cHBsaWVkIGNyZWRlbnRpYWxzIGRvIG5vdCBjb3JyZXNwb25kIHRvIHRoZSBwcmV2aW91c2x5IHNpZ25lZCBpbiB1c2VyLlwiLFwidXNlci1zaWduZWQtb3V0XCI6XCJcIixcIndlYWstcGFzc3dvcmRcIjpcIlRoZSBwYXNzd29yZCBtdXN0IGJlIDYgY2hhcmFjdGVycyBsb25nIG9yIG1vcmUuXCIsXCJ3ZWItc3RvcmFnZS11bnN1cHBvcnRlZFwiOlwiVGhpcyBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQgb3IgM3JkIHBhcnR5IGNvb2tpZXMgYW5kIGRhdGEgbWF5IGJlIGRpc2FibGVkLlwifSxrPXtsZDp7VGE6XCJodHRwczovL3N0YWdpbmctaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20vaWRlbnRpdHl0b29sa2l0L3YzL3JlbHlpbmdwYXJ0eS9cIixaYTpcImh0dHBzOi8vc3RhZ2luZy1zZWN1cmV0b2tlbi5zYW5kYm94Lmdvb2dsZWFwaXMuY29tL3YxL3Rva2VuXCIsV2E6XCJodHRwczovL3N0YWdpbmctaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20vdjIvXCIsaWQ6XCJiXCJ9LHNkOntUYTpcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2lkZW50aXR5dG9vbGtpdC92My9yZWx5aW5ncGFydHkvXCIsWmE6XCJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZWFwaXMuY29tL3YxL3Rva2VuXCIsV2E6XCJodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbS92Mi9cIixpZDpcInBcIn0sdWQ6e1RhOlwiaHR0cHM6Ly9zdGFnaW5nLXd3dy5zYW5kYm94Lmdvb2dsZWFwaXMuY29tL2lkZW50aXR5dG9vbGtpdC92My9yZWx5aW5ncGFydHkvXCIsWmE6XCJodHRwczovL3N0YWdpbmctc2VjdXJldG9rZW4uc2FuZGJveC5nb29nbGVhcGlzLmNvbS92MS90b2tlblwiLFdhOlwiaHR0cHM6Ly9zdGFnaW5nLWlkZW50aXR5dG9vbGtpdC5zYW5kYm94Lmdvb2dsZWFwaXMuY29tL3YyL1wiLGlkOlwic1wifSx2ZDp7VGE6XCJodHRwczovL3d3dy1nb29nbGVhcGlzLXRlc3Quc2FuZGJveC5nb29nbGUuY29tL2lkZW50aXR5dG9vbGtpdC92My9yZWx5aW5ncGFydHkvXCIsWmE6XCJodHRwczovL3Rlc3Qtc2VjdXJldG9rZW4uc2FuZGJveC5nb29nbGVhcGlzLmNvbS92MS90b2tlblwiLFdhOlwiaHR0cHM6Ly90ZXN0LWlkZW50aXR5dG9vbGtpdC5zYW5kYm94Lmdvb2dsZWFwaXMuY29tL3YyL1wiLGlkOlwidFwifX07ZnVuY3Rpb24gTih0KXtmb3IodmFyIGUgaW4gaylpZihrW2VdLmlkPT09dClyZXR1cm4gdD1rW2VdLHtmaXJlYmFzZUVuZHBvaW50OnQuVGEsc2VjdXJlVG9rZW5FbmRwb2ludDp0LlphLGlkZW50aXR5UGxhdGZvcm1FbmRwb2ludDp0LldhfTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBBKHQpe2lmKHQpdHJ5e3JldHVybiB0LiRnb29nX1RoZW5hYmxlfWNhdGNoKHQpe3JldHVybn19ZnVuY3Rpb24gUih0KXt2YXIgZTtFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLFIpOihlPUVycm9yKCkuc3RhY2spJiYodGhpcy5zdGFjaz1lKSx0JiYodGhpcy5tZXNzYWdlPVN0cmluZyh0KSl9ZnVuY3Rpb24gUCh0LGUpe2Zvcih2YXIgbj1cIlwiLHI9KHQ9dC5zcGxpdChcIiVzXCIpKS5sZW5ndGgtMSxpPTA7aTxyO2krKyluKz10W2ldKyhpPGUubGVuZ3RoP2VbaV06XCIlc1wiKTtSLmNhbGwodGhpcyxuK3Rbcl0pfWZ1bmN0aW9uIE8odCl7dGhyb3cgbmV3IFAoXCJGYWlsdXJlXCIrKHQ/XCI6IFwiK3Q6XCJcIiksQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKX1mdW5jdGlvbiBEKHQsZSl7dGhpcy5jPXQsdGhpcy5mPWUsdGhpcy5iPTAsdGhpcy5hPW51bGx9ZnVuY3Rpb24geCh0LGUpe3QuZihlKSx0LmI8MTAwJiYodC5iKyssZS5uZXh0PXQuYSx0LmE9ZSl9ZnVuY3Rpb24gTCgpe3RoaXMuYj10aGlzLmE9bnVsbH1FPU4oXCJfX0VJRF9fXCIpP1wiX19FSURfX1wiOnZvaWQgMCxfKFIsRXJyb3IpLFIucHJvdG90eXBlLm5hbWU9XCJDdXN0b21FcnJvclwiLF8oUCxSKSxQLnByb3RvdHlwZS5uYW1lPVwiQXNzZXJ0aW9uRXJyb3JcIixELnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gMDx0aGlzLmI/KHRoaXMuYi0tLHQ9dGhpcy5hLHRoaXMuYT10Lm5leHQsdC5uZXh0PW51bGwpOnQ9dGhpcy5jKCksdH07dmFyIE09bmV3IEQoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZ9LGZ1bmN0aW9uKHQpe3QucmVzZXQoKX0pO2Z1bmN0aW9uIEYoKXt0aGlzLm5leHQ9dGhpcy5iPXRoaXMuYT1udWxsfUwucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUpe3ZhciBuPU0uZ2V0KCk7bi5zZXQodCxlKSx0aGlzLmI/dGhpcy5iLm5leHQ9bjp0aGlzLmE9bix0aGlzLmI9bn0sRi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dGhpcy5hPXQsdGhpcy5iPWUsdGhpcy5uZXh0PW51bGx9LEYucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5uZXh0PXRoaXMuYj10aGlzLmE9bnVsbH07dmFyIFU9QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/ZnVuY3Rpb24odCxlKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LGUsdm9pZCAwKX06ZnVuY3Rpb24odCxlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZXx8MSE9ZS5sZW5ndGg/LTE6dC5pbmRleE9mKGUsMCk7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYobiBpbiB0JiZ0W25dPT09ZSlyZXR1cm4gbjtyZXR1cm4tMX0saj1BcnJheS5wcm90b3R5cGUuZm9yRWFjaD9mdW5jdGlvbih0LGUsbil7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0LGUsbil9OmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9dC5sZW5ndGgsaT1cInN0cmluZ1wiPT10eXBlb2YgdD90LnNwbGl0KFwiXCIpOnQsbz0wO288cjtvKyspbyBpbiBpJiZlLmNhbGwobixpW29dLG8sdCl9O3ZhciBxPUFycmF5LnByb3RvdHlwZS5maWx0ZXI/ZnVuY3Rpb24odCxlKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHQsZSx2b2lkIDApfTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbixyPXQubGVuZ3RoLGk9W10sbz0wLGE9XCJzdHJpbmdcIj09dHlwZW9mIHQ/dC5zcGxpdChcIlwiKTp0LHM9MDtzPHI7cysrKXMgaW4gYSYmKG49YVtzXSxlLmNhbGwodm9pZCAwLG4scyx0KSYmKGlbbysrXT1uKSk7cmV0dXJuIGl9LFY9QXJyYXkucHJvdG90eXBlLm1hcD9mdW5jdGlvbih0LGUpe3JldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwodCxlLHZvaWQgMCl9OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQubGVuZ3RoLHI9QXJyYXkobiksaT1cInN0cmluZ1wiPT10eXBlb2YgdD90LnNwbGl0KFwiXCIpOnQsbz0wO288bjtvKyspbyBpbiBpJiYocltvXT1lLmNhbGwodm9pZCAwLGlbb10sbyx0KSk7cmV0dXJuIHJ9LEI9QXJyYXkucHJvdG90eXBlLnNvbWU/ZnVuY3Rpb24odCxlKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbCh0LGUsdm9pZCAwKX06ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5sZW5ndGgscj1cInN0cmluZ1wiPT10eXBlb2YgdD90LnNwbGl0KFwiXCIpOnQsaT0wO2k8bjtpKyspaWYoaSBpbiByJiZlLmNhbGwodm9pZCAwLHJbaV0saSx0KSlyZXR1cm4hMDtyZXR1cm4hMX07ZnVuY3Rpb24gSyh0LGUpe3JldHVybiAwPD1VKHQsZSl9ZnVuY3Rpb24gVyh0LGUpe3ZhciBuO3JldHVybihuPTA8PShlPVUodCxlKSkpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwodCxlLDEpLG59ZnVuY3Rpb24gSChuLHIpeyFmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1cInN0cmluZ1wiPT10eXBlb2YgdD90LnNwbGl0KFwiXCIpOnQscj10Lmxlbmd0aC0xOzA8PXI7LS1yKXIgaW4gbiYmZS5jYWxsKHZvaWQgMCxuW3JdLHIsdCl9KG4sZnVuY3Rpb24odCxlKXtyLmNhbGwodm9pZCAwLHQsZSxuKSYmMT09QXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKG4sZSwxKS5sZW5ndGgmJjB9KX1mdW5jdGlvbiBHKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sYXJndW1lbnRzKX1mdW5jdGlvbiB6KHQpe3ZhciBlPXQubGVuZ3RoO2lmKDA8ZSl7Zm9yKHZhciBuPUFycmF5KGUpLHI9MDtyPGU7cisrKW5bcl09dFtyXTtyZXR1cm4gbn1yZXR1cm5bXX12YXIgUSxZPVN0cmluZy5wcm90b3R5cGUudHJpbT9mdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCl9OmZ1bmN0aW9uKHQpe3JldHVybi9eW1xcc1xceGEwXSooW1xcc1xcU10qPylbXFxzXFx4YTBdKiQvLmV4ZWModClbMV19LFg9LyYvZyxKPS88L2csJD0vPi9nLFo9L1wiL2csdHQ9LycvZyxldD0vXFx4MDAvZyxudD0vW1xceDAwJjw+XCInXS87ZnVuY3Rpb24gcnQodCxlKXtyZXR1cm4tMSE9dC5pbmRleE9mKGUpfWZ1bmN0aW9uIGl0KHQsZSl7cmV0dXJuIHQ8ZT8tMTplPHQ/MTowfXQ6e3ZhciBvdD1sLm5hdmlnYXRvcjtpZihvdCl7b3Q9b3QudXNlckFnZW50O2lmKG90KXtRPW90O2JyZWFrIHR9fVE9XCJcIn1mdW5jdGlvbiBhdCh0KXtyZXR1cm4gcnQoUSx0KX1mdW5jdGlvbiBzdCh0LGUpe2Zvcih2YXIgbiBpbiB0KWUuY2FsbCh2b2lkIDAsdFtuXSxuLHQpfWZ1bmN0aW9uIHV0KHQpe2Zvcih2YXIgZSBpbiB0KXJldHVybjtyZXR1cm4gMX1mdW5jdGlvbiBjdCh0KXt2YXIgZSxuPXt9O2ZvcihlIGluIHQpbltlXT10W2VdO3JldHVybiBufXZhciBodD1cImNvbnN0cnVjdG9yIGhhc093blByb3BlcnR5IGlzUHJvdG90eXBlT2YgcHJvcGVydHlJc0VudW1lcmFibGUgdG9Mb2NhbGVTdHJpbmcgdG9TdHJpbmcgdmFsdWVPZlwiLnNwbGl0KFwiIFwiKTtmdW5jdGlvbiBsdCh0KXtmb3IodmFyIGUsbixyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7Zm9yKGUgaW4gbj1hcmd1bWVudHNbcl0pdFtlXT1uW2VdO2Zvcih2YXIgaT0wO2k8aHQubGVuZ3RoO2krKyllPWh0W2ldLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGUpJiYodFtlXT1uW2VdKX19ZnVuY3Rpb24gZnQodCxlKXt0Ont0cnl7dmFyIG49dCYmdC5vd25lckRvY3VtZW50LG49biYmKG4uZGVmYXVsdFZpZXd8fG4ucGFyZW50V2luZG93KTtpZigobj1ufHxsKS5FbGVtZW50JiZuLkxvY2F0aW9uKXt2YXIgcj1uO2JyZWFrIHR9fWNhdGNoKHQpe31yPW51bGx9aWYociYmdm9pZCAwIT09cltlXSYmKCF0fHwhKHQgaW5zdGFuY2VvZiByW2VdKSYmKHQgaW5zdGFuY2VvZiByLkxvY2F0aW9ufHx0IGluc3RhbmNlb2Ygci5FbGVtZW50KSkpe2lmKGcodCkpdHJ5e3ZhciBpPXQuY29uc3RydWN0b3IuZGlzcGxheU5hbWV8fHQuY29uc3RydWN0b3IubmFtZXx8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfWNhdGNoKHQpe2k9XCI8b2JqZWN0IGNvdWxkIG5vdCBiZSBzdHJpbmdpZmllZD5cIn1lbHNlIGk9dm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOm51bGw9PT10P1wibnVsbFwiOnR5cGVvZiB0O08oXCJBcmd1bWVudCBpcyBub3QgYSAlcyAob3IgYSBub24tRWxlbWVudCwgbm9uLUxvY2F0aW9uIG1vY2spOyBnb3Q6ICVzXCIsZSxpKX19ZnVuY3Rpb24gcHQodCxlKXt0aGlzLmE9dD09PXl0JiZlfHxcIlwiLHRoaXMuYj1ndH1mdW5jdGlvbiBkdCh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHB0JiZ0LmNvbnN0cnVjdG9yPT09cHQmJnQuYj09PWd0P3QuYTooTyhcImV4cGVjdGVkIG9iamVjdCBvZiB0eXBlIENvbnN0LCBnb3QgJ1wiK3QrXCInXCIpLFwidHlwZV9lcnJvcjpDb25zdFwiKX1wdC5wcm90b3R5cGUuc2E9ITAscHQucHJvdG90eXBlLnJhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYX0scHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJDb25zdHtcIit0aGlzLmErXCJ9XCJ9O3ZhciB2dCxndD17fSx5dD17fTtmdW5jdGlvbiBtdCgpe2lmKHZvaWQgMD09PXZ0KXt2YXIgdD1udWxsLGU9bC50cnVzdGVkVHlwZXM7aWYoZSYmZS5jcmVhdGVQb2xpY3kpe3RyeXt0PWUuY3JlYXRlUG9saWN5KFwiZ29vZyNodG1sXCIse2NyZWF0ZUhUTUw6dyxjcmVhdGVTY3JpcHQ6dyxjcmVhdGVTY3JpcHRVUkw6d30pfWNhdGNoKHQpe2wuY29uc29sZSYmbC5jb25zb2xlLmVycm9yKHQubWVzc2FnZSl9dnQ9dH1lbHNlIHZ0PXR9cmV0dXJuIHZ0fWZ1bmN0aW9uIGJ0KHQsZSl7dGhpcy5hPWU9PT1FdD90OlwiXCJ9ZnVuY3Rpb24gX3QodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBidCYmdC5jb25zdHJ1Y3Rvcj09PWJ0P3QuYTooTyhcImV4cGVjdGVkIG9iamVjdCBvZiB0eXBlIFRydXN0ZWRSZXNvdXJjZVVybCwgZ290ICdcIit0K1wiJyBvZiB0eXBlIFwiK3AodCkpLFwidHlwZV9lcnJvcjpUcnVzdGVkUmVzb3VyY2VVcmxcIil9ZnVuY3Rpb24gd3QodCxuKXt2YXIgZSxyPWR0KHQpO2lmKCFUdC50ZXN0KHIpKXRocm93IEVycm9yKFwiSW52YWxpZCBUcnVzdGVkUmVzb3VyY2VVcmwgZm9ybWF0OiBcIityKTtyZXR1cm4gdD1yLnJlcGxhY2UoSXQsZnVuY3Rpb24odCxlKXtpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sZSkpdGhyb3cgRXJyb3IoJ0ZvdW5kIG1hcmtlciwgXCInK2UrJ1wiLCBpbiBmb3JtYXQgc3RyaW5nLCBcIicrcisnXCIsIGJ1dCBubyB2YWxpZCBsYWJlbCBtYXBwaW5nIGZvdW5kIGluIGFyZ3M6ICcrSlNPTi5zdHJpbmdpZnkobikpO3JldHVybih0PW5bZV0paW5zdGFuY2VvZiBwdD9kdCh0KTplbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHQpKX0pLGU9dCx0PW10KCksbmV3IGJ0KGU9dD90LmNyZWF0ZVNjcmlwdFVSTChlKTplLEV0KX1idC5wcm90b3R5cGUuc2E9ITAsYnQucHJvdG90eXBlLnJhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS50b1N0cmluZygpfSxidC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlRydXN0ZWRSZXNvdXJjZVVybHtcIit0aGlzLmErXCJ9XCJ9O3ZhciBJdD0vJXsoXFx3Kyl9L2csVHQ9L14oKGh0dHBzOik/XFwvXFwvWzAtOWEtei46W1xcXS1dK1xcL3xcXC9bXi9cXFxcXXxbXjovXFxcXCVdK1xcL3xbXjovXFxcXCVdKls/I118YWJvdXQ6YmxhbmsjKS9pLEV0PXt9O2Z1bmN0aW9uIFN0KHQsZSl7dGhpcy5hPWU9PT1PdD90OlwiXCJ9ZnVuY3Rpb24gQ3QodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBTdCYmdC5jb25zdHJ1Y3Rvcj09PVN0P3QuYTooTyhcImV4cGVjdGVkIG9iamVjdCBvZiB0eXBlIFNhZmVVcmwsIGdvdCAnXCIrdCtcIicgb2YgdHlwZSBcIitwKHQpKSxcInR5cGVfZXJyb3I6U2FmZVVybFwiKX1TdC5wcm90b3R5cGUuc2E9ITAsU3QucHJvdG90eXBlLnJhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS50b1N0cmluZygpfSxTdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlNhZmVVcmx7XCIrdGhpcy5hK1wifVwifTt2YXIga3Q9L14oPzphdWRpb1xcLyg/OjNncHAyfDNncHB8YWFjfEwxNnxtaWRpfG1wM3xtcDR8bXBlZ3xvZ2F8b2dnfG9wdXN8eC1tNGF8eC1tYXRyb3NrYXx4LXdhdnx3YXZ8d2VibSl8Zm9udFxcL1xcdyt8aW1hZ2VcXC8oPzpibXB8Z2lmfGpwZWd8anBnfHBuZ3x0aWZmfHdlYnB8eC1pY29uKXx0ZXh0XFwvY3N2fHZpZGVvXFwvKD86bXBlZ3xtcDR8b2dnfHdlYm18cXVpY2t0aW1lfHgtbWF0cm9za2EpKSg/OjtcXHcrPSg/Olxcdyt8XCJbXFx3Oyw9IF0rXCIpKSokL2ksTnQ9L15kYXRhOiguKik7YmFzZTY0LFthLXowLTkrXFwvXSs9KiQvaSxBdD0vXig/Oig/Omh0dHBzP3xtYWlsdG98ZnRwKTp8W146Lz8jXSooPzpbLz8jXXwkKSkvaTtmdW5jdGlvbiBSdCh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIFN0P3Q6KHQ9XCJvYmplY3RcIj09dHlwZW9mIHQmJnQuc2E/dC5yYSgpOlN0cmluZyh0KSx0PUF0LnRlc3QodCl8fChlPSh0PSh0PVN0cmluZyh0KSkucmVwbGFjZSgvKCUwQXwlMEQpL2csXCJcIikpLm1hdGNoKE50KSkmJmt0LnRlc3QoZVsxXSk/bmV3IFN0KHQsT3QpOm51bGwpO3ZhciBlfWZ1bmN0aW9uIFB0KHQpe3JldHVybiB0IGluc3RhbmNlb2YgU3Q/dDoodD1cIm9iamVjdFwiPT10eXBlb2YgdCYmdC5zYT90LnJhKCk6U3RyaW5nKHQpLG5ldyBTdCh0PSFBdC50ZXN0KHQpP1wiYWJvdXQ6aW52YWxpZCN6Q2xvc3VyZXpcIjp0LE90KSl9dmFyIE90PXt9LER0PW5ldyBTdChcImFib3V0OmludmFsaWQjekNsb3N1cmV6XCIsT3QpO2Z1bmN0aW9uIHh0KHQsZSxuKXt0aGlzLmE9bj09PUx0P3Q6XCJcIn14dC5wcm90b3R5cGUuc2E9ITAseHQucHJvdG90eXBlLnJhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS50b1N0cmluZygpfSx4dC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlNhZmVIdG1se1wiK3RoaXMuYStcIn1cIn07dmFyIEx0PXt9O2Z1bmN0aW9uIE10KHQsZSxuLHIpe3JldHVybiB0PXQgaW5zdGFuY2VvZiBTdD90OlB0KHQpLGU9ZXx8bCxuPW4gaW5zdGFuY2VvZiBwdD9kdChuKTpufHxcIlwiLGUub3BlbihDdCh0KSxuLHIsdm9pZCAwKX1mdW5jdGlvbiBGdCh0KXtmb3IodmFyIGU9dC5zcGxpdChcIiVzXCIpLG49XCJcIixyPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyLmxlbmd0aCYmMTxlLmxlbmd0aDspbis9ZS5zaGlmdCgpK3Iuc2hpZnQoKTtyZXR1cm4gbitlLmpvaW4oXCIlc1wiKX1mdW5jdGlvbiBVdCh0KXtyZXR1cm4gbnQudGVzdCh0KSYmKC0xIT0odD0tMSE9KHQ9LTEhPSh0PS0xIT0odD0tMSE9KHQ9LTEhPXQuaW5kZXhPZihcIiZcIik/dC5yZXBsYWNlKFgsXCImYW1wO1wiKTp0KS5pbmRleE9mKFwiPFwiKT90LnJlcGxhY2UoSixcIiZsdDtcIik6dCkuaW5kZXhPZihcIj5cIik/dC5yZXBsYWNlKCQsXCImZ3Q7XCIpOnQpLmluZGV4T2YoJ1wiJyk/dC5yZXBsYWNlKFosXCImcXVvdDtcIik6dCkuaW5kZXhPZihcIidcIik/dC5yZXBsYWNlKHR0LFwiJiMzOTtcIik6dCkuaW5kZXhPZihcIlxcMFwiKSYmKHQ9dC5yZXBsYWNlKGV0LFwiJiMwO1wiKSkpLHR9ZnVuY3Rpb24ganQodCl7cmV0dXJuIGp0W1wiIFwiXSh0KSx0fWp0W1wiIFwiXT1hO3ZhciBxdCxWdD1hdChcIk9wZXJhXCIpLEJ0PWF0KFwiVHJpZGVudFwiKXx8YXQoXCJNU0lFXCIpLEt0PWF0KFwiRWRnZVwiKSxXdD1LdHx8QnQsSHQ9YXQoXCJHZWNrb1wiKSYmIShydChRLnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiFhdChcIkVkZ2VcIikpJiYhKGF0KFwiVHJpZGVudFwiKXx8YXQoXCJNU0lFXCIpKSYmIWF0KFwiRWRnZVwiKSxHdD1ydChRLnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiFhdChcIkVkZ2VcIik7ZnVuY3Rpb24genQoKXt2YXIgdD1sLmRvY3VtZW50O3JldHVybiB0P3QuZG9jdW1lbnRNb2RlOnZvaWQgMH10Ont2YXIgUXQ9XCJcIixZdD0oWXQ9USxIdD8vcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoWXQpOkt0Py9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoWXQpOkJ0Py9cXGIoPzpNU0lFfHJ2KVs6IF0oW15cXCk7XSspKFxcKXw7KS8uZXhlYyhZdCk6R3Q/L1dlYktpdFxcLyhcXFMrKS8uZXhlYyhZdCk6VnQ/Lyg/OlZlcnNpb24pWyBcXC9dPyhcXFMrKS8uZXhlYyhZdCk6dm9pZCAwKTtpZihZdCYmKFF0PVl0P1l0WzFdOlwiXCIpLEJ0KXtZdD16dCgpO2lmKG51bGwhPVl0JiZZdD5wYXJzZUZsb2F0KFF0KSl7cXQ9U3RyaW5nKFl0KTticmVhayB0fX1xdD1RdH12YXIgWHQ9e307ZnVuY3Rpb24gSnQocyl7cmV0dXJuIHQ9cyxlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT1ZKFN0cmluZyhxdCkpLnNwbGl0KFwiLlwiKSxuPVkoU3RyaW5nKHMpKS5zcGxpdChcIi5cIikscj1NYXRoLm1heChlLmxlbmd0aCxuLmxlbmd0aCksaT0wOzA9PXQmJmk8cjtpKyspZm9yKHZhciBvPWVbaV18fFwiXCIsYT1uW2ldfHxcIlwiO289LyhcXGQqKShcXEQqKSguKikvLmV4ZWMobyl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXSxhPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGEpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl0sKDAhPW9bMF0ubGVuZ3RofHwwIT1hWzBdLmxlbmd0aCkmJih0PWl0KDA9PW9bMV0ubGVuZ3RoPzA6cGFyc2VJbnQob1sxXSwxMCksMD09YVsxXS5sZW5ndGg/MDpwYXJzZUludChhWzFdLDEwKSl8fGl0KDA9PW9bMl0ubGVuZ3RoLDA9PWFbMl0ubGVuZ3RoKXx8aXQob1syXSxhWzJdKSxvPW9bM10sYT1hWzNdLDA9PXQpOyk7cmV0dXJuIDA8PXR9LG49WHQsT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sdCk/blt0XTpuW3RdPWUodCk7dmFyIHQsZSxufXZhciAkdD1sLmRvY3VtZW50JiZCdCYmKHp0KCl8fHBhcnNlSW50KHF0LDEwKSl8fHZvaWQgMDt0cnl7bmV3IHNlbGYuT2Zmc2NyZWVuQ2FudmFzKDAsMCkuZ2V0Q29udGV4dChcIjJkXCIpfWNhdGNoKHQpe312YXIgWnQ9IUJ0fHw5PD1OdW1iZXIoJHQpO2Z1bmN0aW9uIHRlKHQpe3ZhciBlPWRvY3VtZW50O3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0P2UuZ2V0RWxlbWVudEJ5SWQodCk6dH1mdW5jdGlvbiBlZShuLHQpe3N0KHQsZnVuY3Rpb24odCxlKXt0JiZcIm9iamVjdFwiPT10eXBlb2YgdCYmdC5zYSYmKHQ9dC5yYSgpKSxcInN0eWxlXCI9PWU/bi5zdHlsZS5jc3NUZXh0PXQ6XCJjbGFzc1wiPT1lP24uY2xhc3NOYW1lPXQ6XCJmb3JcIj09ZT9uLmh0bWxGb3I9dDppZS5oYXNPd25Qcm9wZXJ0eShlKT9uLnNldEF0dHJpYnV0ZShpZVtlXSx0KTowPT1lLmxhc3RJbmRleE9mKFwiYXJpYS1cIiwwKXx8MD09ZS5sYXN0SW5kZXhPZihcImRhdGEtXCIsMCk/bi5zZXRBdHRyaWJ1dGUoZSx0KTpuW2VdPXR9KX12YXIgbmUscmUsaWU9e2NlbGxwYWRkaW5nOlwiY2VsbFBhZGRpbmdcIixjZWxsc3BhY2luZzpcImNlbGxTcGFjaW5nXCIsY29sc3BhbjpcImNvbFNwYW5cIixmcmFtZWJvcmRlcjpcImZyYW1lQm9yZGVyXCIsaGVpZ2h0OlwiaGVpZ2h0XCIsbWF4bGVuZ3RoOlwibWF4TGVuZ3RoXCIsbm9uY2U6XCJub25jZVwiLHJvbGU6XCJyb2xlXCIscm93c3BhbjpcInJvd1NwYW5cIix0eXBlOlwidHlwZVwiLHVzZW1hcDpcInVzZU1hcFwiLHZhbGlnbjpcInZBbGlnblwiLHdpZHRoOlwid2lkdGhcIn07ZnVuY3Rpb24gb2UoKXt2YXIgdCxlPWFyZ3VtZW50cyxuPWRvY3VtZW50LHI9U3RyaW5nKGVbMF0pLGk9ZVsxXTtyZXR1cm4hWnQmJmkmJihpLm5hbWV8fGkudHlwZSkmJihyPVtcIjxcIixyXSxpLm5hbWUmJnIucHVzaCgnIG5hbWU9XCInLFV0KGkubmFtZSksJ1wiJyksaS50eXBlJiYoci5wdXNoKCcgdHlwZT1cIicsVXQoaS50eXBlKSwnXCInKSxsdCh0PXt9LGkpLGRlbGV0ZSB0LnR5cGUsaT10KSxyLnB1c2goXCI+XCIpLHI9ci5qb2luKFwiXCIpKSxyPWFlKG4sciksaSYmKFwic3RyaW5nXCI9PXR5cGVvZiBpP3IuY2xhc3NOYW1lPWk6QXJyYXkuaXNBcnJheShpKT9yLmNsYXNzTmFtZT1pLmpvaW4oXCIgXCIpOmVlKHIsaSkpLDI8ZS5sZW5ndGgmJmZ1bmN0aW9uKGUsbix0KXtmdW5jdGlvbiByKHQpe3QmJm4uYXBwZW5kQ2hpbGQoXCJzdHJpbmdcIj09dHlwZW9mIHQ/ZS5jcmVhdGVUZXh0Tm9kZSh0KTp0KX1mb3IodmFyIGk9MjtpPHQubGVuZ3RoO2krKyl7dmFyIG89dFtpXTtpZighZChvKXx8ZyhvKSYmMDxvLm5vZGVUeXBlKXIobyk7ZWxzZXt0OntpZihvJiZcIm51bWJlclwiPT10eXBlb2Ygby5sZW5ndGgpe2lmKGcobykpe3ZhciBhPVwiZnVuY3Rpb25cIj09dHlwZW9mIG8uaXRlbXx8XCJzdHJpbmdcIj09dHlwZW9mIG8uaXRlbTticmVhayB0fWlmKHYobykpe2E9XCJmdW5jdGlvblwiPT10eXBlb2Ygby5pdGVtO2JyZWFrIHR9fWE9ITF9aihhP3oobyk6byxyKX19fShuLHIsZSkscn1mdW5jdGlvbiBhZSh0LGUpe3JldHVybiBlPVN0cmluZyhlKSxcImFwcGxpY2F0aW9uL3hodG1sK3htbFwiPT09dC5jb250ZW50VHlwZSYmKGU9ZS50b0xvd2VyQ2FzZSgpKSx0LmNyZWF0ZUVsZW1lbnQoZSl9ZnVuY3Rpb24gc2UodCl7bC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgdH0sMCl9ZnVuY3Rpb24gdWUodCxlKXtyZXx8ZnVuY3Rpb24oKXt7dmFyIHQ7cmU9bC5Qcm9taXNlJiZsLlByb21pc2UucmVzb2x2ZT8odD1sLlByb21pc2UucmVzb2x2ZSh2b2lkIDApLGZ1bmN0aW9uKCl7dC50aGVuKGxlKX0pOmZ1bmN0aW9uKCl7dmFyIHQ9bGU7IXYobC5zZXRJbW1lZGlhdGUpfHxsLldpbmRvdyYmbC5XaW5kb3cucHJvdG90eXBlJiYhYXQoXCJFZGdlXCIpJiZsLldpbmRvdy5wcm90b3R5cGUuc2V0SW1tZWRpYXRlPT1sLnNldEltbWVkaWF0ZT8obmU9bmV8fGZ1bmN0aW9uKCl7dmFyIHQ9bC5NZXNzYWdlQ2hhbm5lbDtpZih2b2lkIDA9PT0odD12b2lkIDA9PT10JiZcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cucG9zdE1lc3NhZ2UmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyJiYhYXQoXCJQcmVzdG9cIik/ZnVuY3Rpb24oKXt2YXIgdD1hZShkb2N1bWVudCxcIklGUkFNRVwiKTt0LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHQpO3ZhciBlPXQuY29udGVudFdpbmRvdzsodD1lLmRvY3VtZW50KS5vcGVuKCksdC5jbG9zZSgpO3ZhciBuPVwiY2FsbEltbWVkaWF0ZVwiK01hdGgucmFuZG9tKCkscj1cImZpbGU6XCI9PWUubG9jYXRpb24ucHJvdG9jb2w/XCIqXCI6ZS5sb2NhdGlvbi5wcm90b2NvbCtcIi8vXCIrZS5sb2NhdGlvbi5ob3N0O3Q9bShmdW5jdGlvbih0KXtcIipcIiE9ciYmdC5vcmlnaW4hPXJ8fHQuZGF0YSE9bnx8dGhpcy5wb3J0MS5vbm1lc3NhZ2UoKX0sdGhpcyksZS5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHQsITEpLHRoaXMucG9ydDE9e30sdGhpcy5wb3J0Mj17cG9zdE1lc3NhZ2U6ZnVuY3Rpb24oKXtlLnBvc3RNZXNzYWdlKG4scil9fX06dCl8fGF0KFwiVHJpZGVudFwiKXx8YXQoXCJNU0lFXCIpKXJldHVybiBmdW5jdGlvbih0KXtsLnNldFRpbWVvdXQodCwwKX07dmFyIGU9bmV3IHQsbj17fSxyPW47cmV0dXJuIGUucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKCl7dmFyIHQ7dm9pZCAwIT09bi5uZXh0JiYodD0obj1uLm5leHQpLkdiLG4uR2I9bnVsbCx0KCkpfSxmdW5jdGlvbih0KXtyLm5leHQ9e0diOnR9LHI9ci5uZXh0LGUucG9ydDIucG9zdE1lc3NhZ2UoMCl9fSgpKSh0KTpsLnNldEltbWVkaWF0ZSh0KX19fSgpLGNlfHwocmUoKSxjZT0hMCksaGUuYWRkKHQsZSl9dmFyIGNlPSExLGhlPW5ldyBMO2Z1bmN0aW9uIGxlKCl7Zm9yKHZhciB0LGUsbjtuPWU9dm9pZCAwLG49bnVsbCwoZT1oZSkuYSYmKG49ZS5hLGUuYT1lLmEubmV4dCxlLmF8fChlLmI9bnVsbCksbi5uZXh0PW51bGwpLHQ9bjspe3RyeXt0LmEuY2FsbCh0LmIpfWNhdGNoKHQpe3NlKHQpfXgoTSx0KX1jZT0hMX1mdW5jdGlvbiBmZSh0LGUpe2lmKHRoaXMuYT1wZSx0aGlzLmk9dm9pZCAwLHRoaXMuZj10aGlzLmI9dGhpcy5jPW51bGwsdGhpcy5nPXRoaXMuaD0hMSx0IT1hKXRyeXt2YXIgbj10aGlzO3QuY2FsbChlLGZ1bmN0aW9uKHQpe1NlKG4sZGUsdCl9LGZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIE9lKSl0cnl7aWYodCBpbnN0YW5jZW9mIEVycm9yKXRocm93IHQ7dGhyb3cgRXJyb3IoXCJQcm9taXNlIHJlamVjdGVkLlwiKX1jYXRjaCh0KXt9U2Uobix2ZSx0KX0pfWNhdGNoKHQpe1NlKHRoaXMsdmUsdCl9fXZhciBwZT0wLGRlPTIsdmU9MztmdW5jdGlvbiBnZSgpe3RoaXMubmV4dD10aGlzLmY9dGhpcy5iPXRoaXMuZz10aGlzLmE9bnVsbCx0aGlzLmM9ITF9Z2UucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5mPXRoaXMuYj10aGlzLmc9dGhpcy5hPW51bGwsdGhpcy5jPSExfTt2YXIgeWU9bmV3IEQoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGdlfSxmdW5jdGlvbih0KXt0LnJlc2V0KCl9KTtmdW5jdGlvbiBtZSh0LGUsbil7dmFyIHI9eWUuZ2V0KCk7cmV0dXJuIHIuZz10LHIuYj1lLHIuZj1uLHJ9ZnVuY3Rpb24gYmUodCl7aWYodCBpbnN0YW5jZW9mIGZlKXJldHVybiB0O3ZhciBlPW5ldyBmZShhKTtyZXR1cm4gU2UoZSxkZSx0KSxlfWZ1bmN0aW9uIF9lKG4pe3JldHVybiBuZXcgZmUoZnVuY3Rpb24odCxlKXtlKG4pfSl9ZnVuY3Rpb24gd2UodCxlLG4pe0NlKHQsZSxuLG51bGwpfHx1ZShiKGUsdCkpfWZ1bmN0aW9uIEllKG4pe3JldHVybiBuZXcgZmUoZnVuY3Rpb24ocil7dmFyIGk9bi5sZW5ndGgsbz1bXTtpZihpKWZvcih2YXIgdD1mdW5jdGlvbih0LGUsbil7aS0tLG9bdF09ZT97UGI6ITAsdmFsdWU6bn06e1BiOiExLHJlYXNvbjpufSwwPT1pJiZyKG8pfSxlPTA7ZTxuLmxlbmd0aDtlKyspd2UobltlXSxiKHQsZSwhMCksYih0LGUsITEpKTtlbHNlIHIobyl9KX1mdW5jdGlvbiBUZSh0LGUpe3QuYnx8dC5hIT1kZSYmdC5hIT12ZXx8a2UodCksdC5mP3QuZi5uZXh0PWU6dC5iPWUsdC5mPWV9ZnVuY3Rpb24gRWUodCxpLG8sYSl7dmFyIGU9bWUobnVsbCxudWxsLG51bGwpO3JldHVybiBlLmE9bmV3IGZlKGZ1bmN0aW9uKG4scil7ZS5nPWk/ZnVuY3Rpb24odCl7dHJ5e3ZhciBlPWkuY2FsbChhLHQpO24oZSl9Y2F0Y2godCl7cih0KX19Om4sZS5iPW8/ZnVuY3Rpb24odCl7dHJ5e3ZhciBlPW8uY2FsbChhLHQpO3ZvaWQgMD09PWUmJnQgaW5zdGFuY2VvZiBPZT9yKHQpOm4oZSl9Y2F0Y2godCl7cih0KX19OnJ9KSxUZShlLmEuYz10LGUpLGUuYX1mdW5jdGlvbiBTZSh0LGUsbil7dmFyIHIsaTt0LmE9PXBlJiYodD09PW4mJihlPXZlLG49bmV3IFR5cGVFcnJvcihcIlByb21pc2UgY2Fubm90IHJlc29sdmUgdG8gaXRzZWxmXCIpKSx0LmE9MSxDZShuLHQuJGMsdC5hZCx0KXx8KHQuaT1uLHQuYT1lLHQuYz1udWxsLGtlKHQpLGUhPXZlfHxuIGluc3RhbmNlb2YgT2V8fChpPW4sKHI9dCkuZz0hMCx1ZShmdW5jdGlvbigpe3IuZyYmUGUuY2FsbChudWxsLGkpfSkpKSl9ZnVuY3Rpb24gQ2UodCxlLG4scil7aWYodCBpbnN0YW5jZW9mIGZlKXJldHVybiBUZSh0LG1lKGV8fGEsbnx8bnVsbCxyKSksMTtpZihBKHQpKXJldHVybiB0LnRoZW4oZSxuLHIpLDE7aWYoZyh0KSl0cnl7dmFyIGk9dC50aGVuO2lmKHYoaSkpcmV0dXJuIGZ1bmN0aW9uKHQsZSxuLHIsaSl7ZnVuY3Rpb24gbyh0KXthfHwoYT0hMCxyLmNhbGwoaSx0KSl9dmFyIGE9ITE7dHJ5e2UuY2FsbCh0LGZ1bmN0aW9uKHQpe2F8fChhPSEwLG4uY2FsbChpLHQpKX0sbyl9Y2F0Y2godCl7byh0KX19KHQsaSxlLG4sciksMX1jYXRjaCh0KXtyZXR1cm4gbi5jYWxsKHIsdCksMX19ZnVuY3Rpb24ga2UodCl7dC5ofHwodC5oPSEwLHVlKHQuZ2MsdCkpfWZ1bmN0aW9uIE5lKHQpe3ZhciBlPW51bGw7cmV0dXJuIHQuYiYmKGU9dC5iLHQuYj1lLm5leHQsZS5uZXh0PW51bGwpLHQuYnx8KHQuZj1udWxsKSxlfWZ1bmN0aW9uIEFlKHQsZSxuLHIpe2lmKG49PXZlJiZlLmImJiFlLmMpZm9yKDt0JiZ0Lmc7dD10LmMpdC5nPSExO2lmKGUuYSllLmEuYz1udWxsLFJlKGUsbixyKTtlbHNlIHRyeXtlLmM/ZS5nLmNhbGwoZS5mKTpSZShlLG4scil9Y2F0Y2godCl7UGUuY2FsbChudWxsLHQpfXgoeWUsZSl9ZnVuY3Rpb24gUmUodCxlLG4pe2U9PWRlP3QuZy5jYWxsKHQuZixuKTp0LmImJnQuYi5jYWxsKHQuZixuKX1mZS5wcm90b3R5cGUudGhlbj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEVlKHRoaXMsdih0KT90Om51bGwsdihlKT9lOm51bGwsbil9LGZlLnByb3RvdHlwZS4kZ29vZ19UaGVuYWJsZT0hMCwodD1mZS5wcm90b3R5cGUpLm9hPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQ9bWUodCx0LGUpKS5jPSEwLFRlKHRoaXMsdCksdGhpc30sdC5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEVlKHRoaXMsbnVsbCx0LGUpfSx0LmNhbmNlbD1mdW5jdGlvbih0KXt2YXIgZTt0aGlzLmE9PXBlJiYoZT1uZXcgT2UodCksdWUoZnVuY3Rpb24oKXshZnVuY3Rpb24gdChlLG4pe2lmKGUuYT09cGUpaWYoZS5jKXt2YXIgcj1lLmM7aWYoci5iKXtmb3IodmFyIGk9MCxvPW51bGwsYT1udWxsLHM9ci5iO3MmJihzLmN8fChpKyssISgobz1zLmE9PWU/czpvKSYmMTxpKSkpO3M9cy5uZXh0KW98fChhPXMpO28mJihyLmE9PXBlJiYxPT1pP3QocixuKTooYT8oKGk9YSkubmV4dD09ci5mJiYoci5mPWkpLGkubmV4dD1pLm5leHQubmV4dCk6TmUociksQWUocixvLHZlLG4pKSl9ZS5jPW51bGx9ZWxzZSBTZShlLHZlLG4pfSh0aGlzLGUpfSx0aGlzKSl9LHQuJGM9ZnVuY3Rpb24odCl7dGhpcy5hPXBlLFNlKHRoaXMsZGUsdCl9LHQuYWQ9ZnVuY3Rpb24odCl7dGhpcy5hPXBlLFNlKHRoaXMsdmUsdCl9LHQuZ2M9ZnVuY3Rpb24oKXtmb3IodmFyIHQ7dD1OZSh0aGlzKTspQWUodGhpcyx0LHRoaXMuYSx0aGlzLmkpO3RoaXMuaD0hMX07dmFyIFBlPXNlO2Z1bmN0aW9uIE9lKHQpe1IuY2FsbCh0aGlzLHQpfWZ1bmN0aW9uIERlKCl7dGhpcy54YT10aGlzLnhhLHRoaXMucGE9dGhpcy5wYX1fKE9lLFIpO3ZhciB4ZT0wO2Z1bmN0aW9uIExlKHQpe3QueGF8fCh0LnhhPSEwLHQuRGEoKSwwPT14ZSl8fCh0PXQsT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJnRbbl18fCh0W25dPSsrcikpfURlLnByb3RvdHlwZS54YT0hKE9lLnByb3RvdHlwZS5uYW1lPVwiY2FuY2VsXCIpLERlLnByb3RvdHlwZS5EYT1mdW5jdGlvbigpe2lmKHRoaXMucGEpZm9yKDt0aGlzLnBhLmxlbmd0aDspdGhpcy5wYS5zaGlmdCgpKCl9O3ZhciBNZT1PYmplY3QuZnJlZXplfHxmdW5jdGlvbih0KXtyZXR1cm4gdH0sRmU9IUJ0fHw5PD1OdW1iZXIoJHQpLFVlPUJ0JiYhSnQoXCI5XCIpLGplPWZ1bmN0aW9uKCl7aWYoIWwuYWRkRXZlbnRMaXN0ZW5lcnx8IU9iamVjdC5kZWZpbmVQcm9wZXJ0eSlyZXR1cm4hMTt2YXIgdD0hMSxlPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7dD0hMH19KTt0cnl7bC5hZGRFdmVudExpc3RlbmVyKFwidGVzdFwiLGEsZSksbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidGVzdFwiLGEsZSl9Y2F0Y2godCl7fXJldHVybiB0fSgpO2Z1bmN0aW9uIHFlKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5iPXRoaXMudGFyZ2V0PWUsdGhpcy5kZWZhdWx0UHJldmVudGVkPSExfWZ1bmN0aW9uIFZlKHQsZSl7aWYocWUuY2FsbCh0aGlzLHQ/dC50eXBlOlwiXCIpLHRoaXMucmVsYXRlZFRhcmdldD10aGlzLmI9dGhpcy50YXJnZXQ9bnVsbCx0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MCx0aGlzLmtleT1cIlwiLHRoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMSx0aGlzLnBvaW50ZXJJZD0wLHRoaXMucG9pbnRlclR5cGU9XCJcIix0aGlzLmE9bnVsbCx0KXt2YXIgbj10aGlzLnR5cGU9dC50eXBlLHI9dC5jaGFuZ2VkVG91Y2hlcyYmdC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/dC5jaGFuZ2VkVG91Y2hlc1swXTpudWxsO2lmKHRoaXMudGFyZ2V0PXQudGFyZ2V0fHx0LnNyY0VsZW1lbnQsdGhpcy5iPWUsZT10LnJlbGF0ZWRUYXJnZXQpe2lmKEh0KXt0Ont0cnl7anQoZS5ub2RlTmFtZSk7dmFyIGk9ITA7YnJlYWsgdH1jYXRjaCh0KXt9aT0hMX1pfHwoZT1udWxsKX19ZWxzZVwibW91c2VvdmVyXCI9PW4/ZT10LmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09biYmKGU9dC50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1lLHI/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1yLmNsaWVudFg/ci5jbGllbnRYOnIucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PXIuY2xpZW50WT9yLmNsaWVudFk6ci5wYWdlWSx0aGlzLnNjcmVlblg9ci5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1yLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09dC5jbGllbnRYP3QuY2xpZW50WDp0LnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT10LmNsaWVudFk/dC5jbGllbnRZOnQucGFnZVksdGhpcy5zY3JlZW5YPXQuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9dC5zY3JlZW5ZfHwwKSx0aGlzLmJ1dHRvbj10LmJ1dHRvbix0aGlzLmtleT10LmtleXx8XCJcIix0aGlzLmN0cmxLZXk9dC5jdHJsS2V5LHRoaXMuYWx0S2V5PXQuYWx0S2V5LHRoaXMuc2hpZnRLZXk9dC5zaGlmdEtleSx0aGlzLm1ldGFLZXk9dC5tZXRhS2V5LHRoaXMucG9pbnRlcklkPXQucG9pbnRlcklkfHwwLHRoaXMucG9pbnRlclR5cGU9XCJzdHJpbmdcIj09dHlwZW9mIHQucG9pbnRlclR5cGU/dC5wb2ludGVyVHlwZTpCZVt0LnBvaW50ZXJUeXBlXXx8XCJcIiwodGhpcy5hPXQpLmRlZmF1bHRQcmV2ZW50ZWQmJnRoaXMucHJldmVudERlZmF1bHQoKX19cWUucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwfSxfKFZlLHFlKTt2YXIgQmU9TWUoezI6XCJ0b3VjaFwiLDM6XCJwZW5cIiw0OlwibW91c2VcIn0pO1ZlLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe1ZlLmFiLnByZXZlbnREZWZhdWx0LmNhbGwodGhpcyk7dmFyIHQ9dGhpcy5hO2lmKHQucHJldmVudERlZmF1bHQpdC5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYodC5yZXR1cm5WYWx1ZT0hMSxVZSl0cnl7KHQuY3RybEtleXx8MTEyPD10LmtleUNvZGUmJnQua2V5Q29kZTw9MTIzKSYmKHQua2V5Q29kZT0tMSl9Y2F0Y2godCl7fX0sVmUucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hfTt2YXIgS2U9XCJjbG9zdXJlX2xpc3RlbmFibGVfXCIrKDFlNipNYXRoLnJhbmRvbSgpfDApLFdlPTA7ZnVuY3Rpb24gSGUodCxlLG4scixpKXt0aGlzLmxpc3RlbmVyPXQsdGhpcy5wcm94eT1udWxsLHRoaXMuc3JjPWUsdGhpcy50eXBlPW4sdGhpcy5jYXB0dXJlPSEhcix0aGlzLlZhPWksdGhpcy5rZXk9KytXZSx0aGlzLnZhPXRoaXMuUGE9ITF9ZnVuY3Rpb24gR2UodCl7dC52YT0hMCx0Lmxpc3RlbmVyPW51bGwsdC5wcm94eT1udWxsLHQuc3JjPW51bGwsdC5WYT1udWxsfWZ1bmN0aW9uIHplKHQpe3RoaXMuc3JjPXQsdGhpcy5hPXt9LHRoaXMuYj0wfWZ1bmN0aW9uIFFlKHQsZSl7dmFyIG49ZS50eXBlO24gaW4gdC5hJiZXKHQuYVtuXSxlKSYmKEdlKGUpLDA9PXQuYVtuXS5sZW5ndGgmJihkZWxldGUgdC5hW25dLHQuYi0tKSl9ZnVuY3Rpb24gWWUodCxlLG4scil7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDsrK2kpe3ZhciBvPXRbaV07aWYoIW8udmEmJm8ubGlzdGVuZXI9PWUmJm8uY2FwdHVyZT09ISFuJiZvLlZhPT1yKXJldHVybiBpfXJldHVybi0xfXplLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlLG4scixpKXt2YXIgbz10LnRvU3RyaW5nKCk7KHQ9dGhpcy5hW29dKXx8KHQ9dGhpcy5hW29dPVtdLHRoaXMuYisrKTt2YXIgYT1ZZSh0LGUscixpKTtyZXR1cm4tMTxhPyhlPXRbYV0sbnx8KGUuUGE9ITEpKTooKGU9bmV3IEhlKGUsdGhpcy5zcmMsbywhIXIsaSkpLlBhPW4sdC5wdXNoKGUpKSxlfTt2YXIgWGU9XCJjbG9zdXJlX2xtX1wiKygxZTYqTWF0aC5yYW5kb20oKXwwKSxKZT17fTtmdW5jdGlvbiAkZSh0LGUsbixyLGkpe2lmKHImJnIub25jZSl0bih0LGUsbixyLGkpO2Vsc2UgaWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIG89MDtvPGUubGVuZ3RoO28rKykkZSh0LGVbb10sbixyLGkpO2Vsc2Ugbj1obihuKSx0JiZ0W0tlXT9mbih0LGUsbixnKHIpPyEhci5jYXB0dXJlOiEhcixpKTpaZSh0LGUsbiwhMSxyLGkpfWZ1bmN0aW9uIFplKHQsZSxuLHIsaSxvKXtpZighZSl0aHJvdyBFcnJvcihcIkludmFsaWQgZXZlbnQgdHlwZVwiKTt2YXIgYSxzLHU9ZyhpKT8hIWkuY2FwdHVyZTohIWksYz11bih0KTtpZihjfHwodFtYZV09Yz1uZXcgemUodCkpLCEobj1jLmFkZChlLG4scix1LG8pKS5wcm94eSlpZihhPXNuLHI9cz1GZT9mdW5jdGlvbih0KXtyZXR1cm4gYS5jYWxsKHMuc3JjLHMubGlzdGVuZXIsdCl9OmZ1bmN0aW9uKHQpe2lmKCEodD1hLmNhbGwocy5zcmMscy5saXN0ZW5lcix0KSkpcmV0dXJuIHR9LChuLnByb3h5PXIpLnNyYz10LHIubGlzdGVuZXI9bix0LmFkZEV2ZW50TGlzdGVuZXIpdm9pZCAwPT09KGk9IWplP3U6aSkmJihpPSExKSx0LmFkZEV2ZW50TGlzdGVuZXIoZS50b1N0cmluZygpLHIsaSk7ZWxzZSBpZih0LmF0dGFjaEV2ZW50KXQuYXR0YWNoRXZlbnQocm4oZS50b1N0cmluZygpKSxyKTtlbHNle2lmKCF0LmFkZExpc3RlbmVyfHwhdC5yZW1vdmVMaXN0ZW5lcil0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7dC5hZGRMaXN0ZW5lcihyKX19ZnVuY3Rpb24gdG4odCxlLG4scixpKXtpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKXRuKHQsZVtvXSxuLHIsaSk7ZWxzZSBuPWhuKG4pLHQmJnRbS2VdP3BuKHQsZSxuLGcocik/ISFyLmNhcHR1cmU6ISFyLGkpOlplKHQsZSxuLCEwLHIsaSl9ZnVuY3Rpb24gZW4odCxlLG4scixpKXtpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKWVuKHQsZVtvXSxuLHIsaSk7ZWxzZSByPWcocik/ISFyLmNhcHR1cmU6ISFyLG49aG4obiksdCYmdFtLZV0/KHQ9dC52LChlPVN0cmluZyhlKS50b1N0cmluZygpKWluIHQuYSYmKC0xPChuPVllKG89dC5hW2VdLG4scixpKSkmJihHZShvW25dKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwobyxuLDEpLDA9PW8ubGVuZ3RoJiYoZGVsZXRlIHQuYVtlXSx0LmItLSkpKSk6KHQ9dCYmdW4odCkpJiYoZT10LmFbZS50b1N0cmluZygpXSwobj0odD0tMSk8KHQ9ZT9ZZShlLG4scixpKTp0KT9lW3RdOm51bGwpJiZubihuKSl9ZnVuY3Rpb24gbm4odCl7dmFyIGUsbixyO1wibnVtYmVyXCIhPXR5cGVvZiB0JiZ0JiYhdC52YSYmKChlPXQuc3JjKSYmZVtLZV0/UWUoZS52LHQpOihuPXQudHlwZSxyPXQucHJveHksZS5yZW1vdmVFdmVudExpc3RlbmVyP2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLHIsdC5jYXB0dXJlKTplLmRldGFjaEV2ZW50P2UuZGV0YWNoRXZlbnQocm4obikscik6ZS5hZGRMaXN0ZW5lciYmZS5yZW1vdmVMaXN0ZW5lciYmZS5yZW1vdmVMaXN0ZW5lcihyKSwobj11bihlKSk/KFFlKG4sdCksMD09bi5iJiYobi5zcmM9bnVsbCxlW1hlXT1udWxsKSk6R2UodCkpKX1mdW5jdGlvbiBybih0KXtyZXR1cm4gdCBpbiBKZT9KZVt0XTpKZVt0XT1cIm9uXCIrdH1mdW5jdGlvbiBvbih0LGUsbixyKXt2YXIgaT0hMDtpZigodD11bih0KSkmJihlPXQuYVtlLnRvU3RyaW5nKCldKSlmb3IoZT1lLmNvbmNhdCgpLHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIG89ZVt0XTtvJiZvLmNhcHR1cmU9PW4mJiFvLnZhJiYobz1hbihvLHIpLGk9aSYmITEhPT1vKX1yZXR1cm4gaX1mdW5jdGlvbiBhbih0LGUpe3ZhciBuPXQubGlzdGVuZXIscj10LlZhfHx0LnNyYztyZXR1cm4gdC5QYSYmbm4odCksbi5jYWxsKHIsZSl9ZnVuY3Rpb24gc24odCxlKXtpZih0LnZhKXJldHVybiEwO2lmKEZlKXJldHVybiBhbih0LG5ldyBWZShlLHRoaXMpKTtpZighZSl0OntlPVtcIndpbmRvd1wiLFwiZXZlbnRcIl07Zm9yKHZhciBuPWwscj0wO3I8ZS5sZW5ndGg7cisrKWlmKG51bGw9PShuPW5bZVtyXV0pKXtlPW51bGw7YnJlYWsgdH1lPW59aWYoZT1uZXcgVmUocj1lLHRoaXMpLG49ITAsIShyLmtleUNvZGU8MHx8bnVsbCE9ci5yZXR1cm5WYWx1ZSkpe3Q6e3ZhciBpPSExO2lmKDA9PXIua2V5Q29kZSl0cnl7ci5rZXlDb2RlPS0xO2JyZWFrIHR9Y2F0Y2godCl7aT0hMH0haSYmbnVsbCE9ci5yZXR1cm5WYWx1ZXx8KHIucmV0dXJuVmFsdWU9ITApfWZvcihyPVtdLGk9ZS5iO2k7aT1pLnBhcmVudE5vZGUpci5wdXNoKGkpO2Zvcih0PXQudHlwZSxpPXIubGVuZ3RoLTE7MDw9aTtpLS0pe2UuYj1yW2ldO3ZhciBvPW9uKHJbaV0sdCwhMCxlKSxuPW4mJm99Zm9yKGk9MDtpPHIubGVuZ3RoO2krKyllLmI9cltpXSxvPW9uKHJbaV0sdCwhMSxlKSxuPW4mJm99cmV0dXJuIG59ZnVuY3Rpb24gdW4odCl7cmV0dXJuKHQ9dFtYZV0paW5zdGFuY2VvZiB6ZT90Om51bGx9dmFyIGNuPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiBobihlKXtyZXR1cm4gdihlKT9lOihlW2NuXXx8KGVbY25dPWZ1bmN0aW9uKHQpe3JldHVybiBlLmhhbmRsZUV2ZW50KHQpfSksZVtjbl0pfWZ1bmN0aW9uIGxuKCl7RGUuY2FsbCh0aGlzKSx0aGlzLnY9bmV3IHplKHRoaXMpLCh0aGlzLmFjPXRoaXMpLmdiPW51bGx9ZnVuY3Rpb24gZm4odCxlLG4scixpKXt0LnYuYWRkKFN0cmluZyhlKSxuLCExLHIsaSl9ZnVuY3Rpb24gcG4odCxlLG4scixpKXt0LnYuYWRkKFN0cmluZyhlKSxuLCEwLHIsaSl9ZnVuY3Rpb24gZG4odCxlLG4scil7aWYoIShlPXQudi5hW1N0cmluZyhlKV0pKXJldHVybiEwO2U9ZS5jb25jYXQoKTtmb3IodmFyIGk9ITAsbz0wO288ZS5sZW5ndGg7KytvKXt2YXIgYSxzLHU9ZVtvXTt1JiYhdS52YSYmdS5jYXB0dXJlPT1uJiYoYT11Lmxpc3RlbmVyLHM9dS5WYXx8dS5zcmMsdS5QYSYmUWUodC52LHUpLGk9ITEhPT1hLmNhbGwocyxyKSYmaSl9cmV0dXJuIGkmJiFyLmRlZmF1bHRQcmV2ZW50ZWR9ZnVuY3Rpb24gdm4odCxlLG4pe2lmKHYodCkpbiYmKHQ9bSh0LG4pKTtlbHNle2lmKCF0fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LmhhbmRsZUV2ZW50KXRocm93IEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKTt0PW0odC5oYW5kbGVFdmVudCx0KX1yZXR1cm4gMjE0NzQ4MzY0NzxOdW1iZXIoZSk/LTE6bC5zZXRUaW1lb3V0KHQsZXx8MCl9ZnVuY3Rpb24gZ24obil7dmFyIHI9bnVsbDtyZXR1cm4gbmV3IGZlKGZ1bmN0aW9uKHQsZSl7LTE9PShyPXZuKGZ1bmN0aW9uKCl7dCh2b2lkIDApfSxuKSkmJmUoRXJyb3IoXCJGYWlsZWQgdG8gc2NoZWR1bGUgdGltZXIuXCIpKX0pLm8oZnVuY3Rpb24odCl7dGhyb3cgbC5jbGVhclRpbWVvdXQociksdH0pfWZ1bmN0aW9uIHluKHQpe2lmKHQuVyYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5XKXJldHVybiB0LlcoKTtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gdC5zcGxpdChcIlwiKTtpZihkKHQpKXtmb3IodmFyIGU9W10sbj10Lmxlbmd0aCxyPTA7cjxuO3IrKyllLnB1c2godFtyXSk7cmV0dXJuIGV9Zm9yKHIgaW4gZT1bXSxuPTAsdCllW24rK109dFtyXTtyZXR1cm4gZX1mdW5jdGlvbiBtbih0KXtpZih0LlkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuWSlyZXR1cm4gdC5ZKCk7aWYoIXQuV3x8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5XKXtpZihkKHQpfHxcInN0cmluZ1wiPT10eXBlb2YgdCl7dmFyIGU9W107dD10Lmxlbmd0aDtmb3IodmFyIG49MDtuPHQ7bisrKWUucHVzaChuKTtyZXR1cm4gZX1mb3IodmFyIHIgaW4gZT1bXSxuPTAsdCllW24rK109cjtyZXR1cm4gZX19ZnVuY3Rpb24gYm4odCxlKXt0aGlzLmI9e30sdGhpcy5hPVtdLHRoaXMuYz0wO3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxuKXtpZihuJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIHI9MDtyPG47cis9Mil0aGlzLnNldChhcmd1bWVudHNbcl0sYXJndW1lbnRzW3IrMV0pfWVsc2UgaWYodClpZih0IGluc3RhbmNlb2YgYm4pZm9yKG49dC5ZKCkscj0wO3I8bi5sZW5ndGg7cisrKXRoaXMuc2V0KG5bcl0sdC5nZXQobltyXSkpO2Vsc2UgZm9yKHIgaW4gdCl0aGlzLnNldChyLHRbcl0pfWZ1bmN0aW9uIF9uKHQpe2lmKHQuYyE9dC5hLmxlbmd0aCl7Zm9yKHZhciBlPTAsbj0wO2U8dC5hLmxlbmd0aDspe3ZhciByPXQuYVtlXTt3bih0LmIscikmJih0LmFbbisrXT1yKSxlKyt9dC5hLmxlbmd0aD1ufWlmKHQuYyE9dC5hLmxlbmd0aCl7Zm9yKHZhciBpPXt9LG49ZT0wO2U8dC5hLmxlbmd0aDspd24oaSxyPXQuYVtlXSl8fChpW3QuYVtuKytdPXJdPTEpLGUrKzt0LmEubGVuZ3RoPW59fWZ1bmN0aW9uIHduKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfV8obG4sRGUpLGxuLnByb3RvdHlwZVtLZV09ITAsbG4ucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odCxlLG4scil7JGUodGhpcyx0LGUsbixyKX0sbG4ucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odCxlLG4scil7ZW4odGhpcyx0LGUsbixyKX0sbG4ucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU7aWYobj10aGlzLmdiKWZvcihlPVtdO247bj1uLmdiKWUucHVzaChuKTt2YXIgbj10aGlzLmFjLHI9dC50eXBlfHx0O2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0P3Q9bmV3IHFlKHQsbik6dCBpbnN0YW5jZW9mIHFlP3QudGFyZ2V0PXQudGFyZ2V0fHxuOihhPXQsbHQodD1uZXcgcWUocixuKSxhKSksYT0hMCxlKWZvcih2YXIgaT1lLmxlbmd0aC0xOzA8PWk7aS0tKXZhciBvPXQuYj1lW2ldLGE9ZG4obyxyLCEwLHQpJiZhO2lmKGE9ZG4obz10LmI9bixyLCEwLHQpJiZhLGE9ZG4obyxyLCExLHQpJiZhLGUpZm9yKGk9MDtpPGUubGVuZ3RoO2krKylhPWRuKG89dC5iPWVbaV0sciwhMSx0KSYmYTtyZXR1cm4gYX0sbG4ucHJvdG90eXBlLkRhPWZ1bmN0aW9uKCl7aWYobG4uYWIuRGEuY2FsbCh0aGlzKSx0aGlzLnYpe3ZhciB0LGU9dGhpcy52O2Zvcih0IGluIGUuYSl7Zm9yKHZhciBuPWUuYVt0XSxyPTA7cjxuLmxlbmd0aDtyKyspR2UobltyXSk7ZGVsZXRlIGUuYVt0XSxlLmItLX19dGhpcy5nYj1udWxsfSwodD1ibi5wcm90b3R5cGUpLlc9ZnVuY3Rpb24oKXtfbih0aGlzKTtmb3IodmFyIHQ9W10sZT0wO2U8dGhpcy5hLmxlbmd0aDtlKyspdC5wdXNoKHRoaXMuYlt0aGlzLmFbZV1dKTtyZXR1cm4gdH0sdC5ZPWZ1bmN0aW9uKCl7cmV0dXJuIF9uKHRoaXMpLHRoaXMuYS5jb25jYXQoKX0sdC5jbGVhcj1mdW5jdGlvbigpe3RoaXMuYj17fSx0aGlzLmM9dGhpcy5hLmxlbmd0aD0wfSx0LmdldD1mdW5jdGlvbih0LGUpe3JldHVybiB3bih0aGlzLmIsdCk/dGhpcy5iW3RdOmV9LHQuc2V0PWZ1bmN0aW9uKHQsZSl7d24odGhpcy5iLHQpfHwodGhpcy5jKyssdGhpcy5hLnB1c2godCkpLHRoaXMuYlt0XT1lfSx0LmZvckVhY2g9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5ZKCkscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdLG89dGhpcy5nZXQoaSk7dC5jYWxsKGUsbyxpLHRoaXMpfX07dmFyIEluPS9eKD86KFteOi8/Iy5dKyk6KT8oPzpcXC9cXC8oPzooW15cXFxcLz8jXSopQCk/KFteXFxcXC8/I10qPykoPzo6KFswLTldKykpPyg/PVtcXFxcLz8jXXwkKSk/KFtePyNdKyk/KD86XFw/KFteI10qKSk/KD86IyhbXFxzXFxTXSopKT8kLztmdW5jdGlvbiBUbih0LGUpe3ZhciBuO3RoaXMuYT10aGlzLmw9dGhpcy5jPVwiXCIsdGhpcy5nPW51bGwsdGhpcy5oPXRoaXMuZj1cIlwiLHRoaXMuaT0hMSx0IGluc3RhbmNlb2YgVG4/KHRoaXMuaT12b2lkIDAhPT1lP2U6dC5pLEVuKHRoaXMsdC5jKSx0aGlzLmw9dC5sLHRoaXMuYT10LmEsU24odGhpcyx0LmcpLHRoaXMuZj10LmYsQ24odGhpcyxIbih0LmIpKSx0aGlzLmg9dC5oKTp0JiYobj1TdHJpbmcodCkubWF0Y2goSW4pKT8odGhpcy5pPSEhZSxFbih0aGlzLG5bMV18fFwiXCIsITApLHRoaXMubD1QbihuWzJdfHxcIlwiKSx0aGlzLmE9UG4oblszXXx8XCJcIiwhMCksU24odGhpcyxuWzRdKSx0aGlzLmY9UG4obls1XXx8XCJcIiwhMCksQ24odGhpcyxuWzZdfHxcIlwiLCEwKSx0aGlzLmg9UG4obls3XXx8XCJcIikpOih0aGlzLmk9ISFlLHRoaXMuYj1uZXcgam4obnVsbCx0aGlzLmkpKX1mdW5jdGlvbiBFbih0LGUsbil7dC5jPW4/UG4oZSwhMCk6ZSx0LmMmJih0LmM9dC5jLnJlcGxhY2UoLzokLyxcIlwiKSl9ZnVuY3Rpb24gU24odCxlKXtpZihlKXtpZihlPU51bWJlcihlKSxpc05hTihlKXx8ZTwwKXRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiK2UpO3QuZz1lfWVsc2UgdC5nPW51bGx9ZnVuY3Rpb24gQ24odCxlLG4pe3ZhciByLGk7ZSBpbnN0YW5jZW9mIGpuPyh0LmI9ZSxyPXQuYiwoaT10LmkpJiYhci5mJiYocW4ociksci5jPW51bGwsci5hLmZvckVhY2goZnVuY3Rpb24odCxlKXt2YXIgbj1lLnRvTG93ZXJDYXNlKCk7ZSE9biYmKEJuKHRoaXMsZSksV24odGhpcyxuLHQpKX0scikpLHIuZj1pKToobnx8KGU9T24oZSxGbikpLHQuYj1uZXcgam4oZSx0LmkpKX1mdW5jdGlvbiBrbih0LGUsbil7dC5iLnNldChlLG4pfWZ1bmN0aW9uIE5uKHQsZSl7cmV0dXJuIHQuYi5nZXQoZSl9ZnVuY3Rpb24gQW4odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBUbj9uZXcgVG4odCk6bmV3IFRuKHQsdm9pZCAwKX1mdW5jdGlvbiBSbih0LGUsbixyKXt2YXIgaT1uZXcgVG4obnVsbCx2b2lkIDApO3JldHVybiB0JiZFbihpLHQpLGUmJihpLmE9ZSksbiYmU24oaSxuKSxyJiYoaS5mPXIpLGl9ZnVuY3Rpb24gUG4odCxlKXtyZXR1cm4gdD9lP2RlY29kZVVSSSh0LnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudCh0KTpcIlwifWZ1bmN0aW9uIE9uKHQsZSxuKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD8odD1lbmNvZGVVUkkodCkucmVwbGFjZShlLERuKSx0PW4/dC5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIik6dCk6bnVsbH1mdW5jdGlvbiBEbih0KXtyZXR1cm5cIiVcIisoKHQ9dC5jaGFyQ29kZUF0KDApKT4+NCYxNSkudG9TdHJpbmcoMTYpKygxNSZ0KS50b1N0cmluZygxNil9VG4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9W10sZT10aGlzLmM7ZSYmdC5wdXNoKE9uKGUseG4sITApLFwiOlwiKTt2YXIgbj10aGlzLmE7cmV0dXJuIW4mJlwiZmlsZVwiIT1lfHwodC5wdXNoKFwiLy9cIiksKGU9dGhpcy5sKSYmdC5wdXNoKE9uKGUseG4sITApLFwiQFwiKSx0LnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhuKSkucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxudWxsIT0obj10aGlzLmcpJiZ0LnB1c2goXCI6XCIsU3RyaW5nKG4pKSksKG49dGhpcy5mKSYmKHRoaXMuYSYmXCIvXCIhPW4uY2hhckF0KDApJiZ0LnB1c2goXCIvXCIpLHQucHVzaChPbihuLFwiL1wiPT1uLmNoYXJBdCgwKT9NbjpMbiwhMCkpKSwobj10aGlzLmIudG9TdHJpbmcoKSkmJnQucHVzaChcIj9cIixuKSwobj10aGlzLmgpJiZ0LnB1c2goXCIjXCIsT24obixVbikpLHQuam9pbihcIlwiKX0sVG4ucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFRuKHRoaXMpLG49ISF0LmM7bj9FbihlLHQuYyk6bj0hIXQubCxuP2UubD10Lmw6bj0hIXQuYSxuP2UuYT10LmE6bj1udWxsIT10Lmc7dmFyIHI9dC5mO2lmKG4pU24oZSx0LmcpO2Vsc2UgaWYobj0hIXQuZilpZihcIi9cIiE9ci5jaGFyQXQoMCkmJih0aGlzLmEmJiF0aGlzLmY/cj1cIi9cIityOi0xIT0oaT1lLmYubGFzdEluZGV4T2YoXCIvXCIpKSYmKHI9ZS5mLnN1YnN0cigwLGkrMSkrcikpLFwiLi5cIj09KGk9cil8fFwiLlwiPT1pKXI9XCJcIjtlbHNlIGlmKHJ0KGksXCIuL1wiKXx8cnQoaSxcIi8uXCIpKXtmb3IodmFyIHI9MD09aS5sYXN0SW5kZXhPZihcIi9cIiwwKSxpPWkuc3BsaXQoXCIvXCIpLG89W10sYT0wO2E8aS5sZW5ndGg7KXt2YXIgcz1pW2ErK107XCIuXCI9PXM/ciYmYT09aS5sZW5ndGgmJm8ucHVzaChcIlwiKTpcIi4uXCI9PXM/KCgxPG8ubGVuZ3RofHwxPT1vLmxlbmd0aCYmXCJcIiE9b1swXSkmJm8ucG9wKCksciYmYT09aS5sZW5ndGgmJm8ucHVzaChcIlwiKSk6KG8ucHVzaChzKSxyPSEwKX1yPW8uam9pbihcIi9cIil9ZWxzZSByPWk7cmV0dXJuIG4/ZS5mPXI6bj1cIlwiIT09dC5iLnRvU3RyaW5nKCksbj9DbihlLEhuKHQuYikpOm49ISF0LmgsbiYmKGUuaD10LmgpLGV9O3ZhciB4bj0vWyNcXC9cXD9AXS9nLExuPS9bI1xcPzpdL2csTW49L1sjXFw/XS9nLEZuPS9bI1xcP0BdL2csVW49LyMvZztmdW5jdGlvbiBqbih0LGUpe3RoaXMuYj10aGlzLmE9bnVsbCx0aGlzLmM9dHx8bnVsbCx0aGlzLmY9ISFlfWZ1bmN0aW9uIHFuKG4pe24uYXx8KG4uYT1uZXcgYm4sbi5iPTAsbi5jJiZmdW5jdGlvbih0LGUpe2lmKHQpe3Q9dC5zcGxpdChcIiZcIik7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByLGk9dFtuXS5pbmRleE9mKFwiPVwiKSxvPW51bGw7MDw9aT8ocj10W25dLnN1YnN0cmluZygwLGkpLG89dFtuXS5zdWJzdHJpbmcoaSsxKSk6cj10W25dLGUocixvP2RlY29kZVVSSUNvbXBvbmVudChvLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIil9fX0obi5jLGZ1bmN0aW9uKHQsZSl7bi5hZGQoZGVjb2RlVVJJQ29tcG9uZW50KHQucmVwbGFjZSgvXFwrL2csXCIgXCIpKSxlKX0pKX1mdW5jdGlvbiBWbih0KXt2YXIgZT1tbih0KTtpZih2b2lkIDA9PT1lKXRocm93IEVycm9yKFwiS2V5cyBhcmUgdW5kZWZpbmVkXCIpO3ZhciBuPW5ldyBqbihudWxsLHZvaWQgMCk7dD15bih0KTtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGk9ZVtyXSxvPXRbcl07QXJyYXkuaXNBcnJheShvKT9XbihuLGksbyk6bi5hZGQoaSxvKX1yZXR1cm4gbn1mdW5jdGlvbiBCbih0LGUpe3FuKHQpLGU9R24odCxlKSx3bih0LmEuYixlKSYmKHQuYz1udWxsLHQuYi09dC5hLmdldChlKS5sZW5ndGgsd24oKHQ9dC5hKS5iLGUpJiYoZGVsZXRlIHQuYltlXSx0LmMtLSx0LmEubGVuZ3RoPjIqdC5jJiZfbih0KSkpfWZ1bmN0aW9uIEtuKHQsZSl7cmV0dXJuIHFuKHQpLGU9R24odCxlKSx3bih0LmEuYixlKX1mdW5jdGlvbiBXbih0LGUsbil7Qm4odCxlKSwwPG4ubGVuZ3RoJiYodC5jPW51bGwsdC5hLnNldChHbih0LGUpLHoobikpLHQuYis9bi5sZW5ndGgpfWZ1bmN0aW9uIEhuKHQpe3ZhciBlPW5ldyBqbjtyZXR1cm4gZS5jPXQuYyx0LmEmJihlLmE9bmV3IGJuKHQuYSksZS5iPXQuYiksZX1mdW5jdGlvbiBHbih0LGUpe3JldHVybiBlPVN0cmluZyhlKSxlPXQuZj9lLnRvTG93ZXJDYXNlKCk6ZX1mdW5jdGlvbiB6bih0KXt2YXIgZT1bXTtyZXR1cm4gZnVuY3Rpb24gdChlLG4scil7aWYobnVsbD09bilyLnB1c2goXCJudWxsXCIpO2Vsc2V7aWYoXCJvYmplY3RcIj09dHlwZW9mIG4pe2lmKEFycmF5LmlzQXJyYXkobikpe3ZhciBpPW47bj1pLmxlbmd0aCxyLnB1c2goXCJbXCIpO2Zvcih2YXIgbz1cIlwiLGE9MDthPG47YSsrKXIucHVzaChvKSx0KGUsaVthXSxyKSxvPVwiLFwiO3JldHVybiB2b2lkIHIucHVzaChcIl1cIil9aWYoIShuIGluc3RhbmNlb2YgU3RyaW5nfHxuIGluc3RhbmNlb2YgTnVtYmVyfHxuIGluc3RhbmNlb2YgQm9vbGVhbikpe2ZvcihpIGluIHIucHVzaChcIntcIiksbz1cIlwiLG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4saSkmJihhPW5baV0sXCJmdW5jdGlvblwiIT10eXBlb2YgYSYmKHIucHVzaChvKSxKbihpLHIpLHIucHVzaChcIjpcIiksdChlLGEsciksbz1cIixcIikpO3JldHVybiB2b2lkIHIucHVzaChcIn1cIil9bj1uLnZhbHVlT2YoKX1zd2l0Y2godHlwZW9mIG4pe2Nhc2VcInN0cmluZ1wiOkpuKG4scik7YnJlYWs7Y2FzZVwibnVtYmVyXCI6ci5wdXNoKGlzRmluaXRlKG4pJiYhaXNOYU4obik/U3RyaW5nKG4pOlwibnVsbFwiKTticmVhaztjYXNlXCJib29sZWFuXCI6ci5wdXNoKFN0cmluZyhuKSk7YnJlYWs7Y2FzZVwiZnVuY3Rpb25cIjpyLnB1c2goXCJudWxsXCIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbmtub3duIHR5cGU6IFwiK3R5cGVvZiBuKX19fShuZXcgUW4sdCxlKSxlLmpvaW4oXCJcIil9ZnVuY3Rpb24gUW4oKXt9KHQ9am4ucHJvdG90eXBlKS5hZGQ9ZnVuY3Rpb24odCxlKXtxbih0aGlzKSx0aGlzLmM9bnVsbCx0PUduKHRoaXMsdCk7dmFyIG49dGhpcy5hLmdldCh0KTtyZXR1cm4gbnx8dGhpcy5hLnNldCh0LG49W10pLG4ucHVzaChlKSx0aGlzLmIrPTEsdGhpc30sdC5jbGVhcj1mdW5jdGlvbigpe3RoaXMuYT10aGlzLmM9bnVsbCx0aGlzLmI9MH0sdC5mb3JFYWNoPWZ1bmN0aW9uKG4scil7cW4odGhpcyksdGhpcy5hLmZvckVhY2goZnVuY3Rpb24odCxlKXtqKHQsZnVuY3Rpb24odCl7bi5jYWxsKHIsdCxlLHRoaXMpfSx0aGlzKX0sdGhpcyl9LHQuWT1mdW5jdGlvbigpe3FuKHRoaXMpO2Zvcih2YXIgdD10aGlzLmEuVygpLGU9dGhpcy5hLlkoKSxuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKylmb3IodmFyIGk9dFtyXSxvPTA7bzxpLmxlbmd0aDtvKyspbi5wdXNoKGVbcl0pO3JldHVybiBufSx0Llc9ZnVuY3Rpb24odCl7cW4odGhpcyk7dmFyIGU9W107aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpS24odGhpcyx0KSYmKGU9RyhlLHRoaXMuYS5nZXQoR24odGhpcyx0KSkpKTtlbHNle3Q9dGhpcy5hLlcoKTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyllPUcoZSx0W25dKX1yZXR1cm4gZX0sdC5zZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gcW4odGhpcyksdGhpcy5jPW51bGwsS24odGhpcyx0PUduKHRoaXMsdCkpJiYodGhpcy5iLT10aGlzLmEuZ2V0KHQpLmxlbmd0aCksdGhpcy5hLnNldCh0LFtlXSksdGhpcy5iKz0xLHRoaXN9LHQuZ2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJjA8KHQ9dGhpcy5XKHQpKS5sZW5ndGg/U3RyaW5nKHRbMF0pOmV9LHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmMpcmV0dXJuIHRoaXMuYztpZighdGhpcy5hKXJldHVyblwiXCI7Zm9yKHZhciB0PVtdLGU9dGhpcy5hLlkoKSxuPTA7bjxlLmxlbmd0aDtuKyspZm9yKHZhciByPWVbbl0saT1lbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHIpKSxyPXRoaXMuVyhyKSxvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBhPWk7XCJcIiE9PXJbb10mJihhKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJbb10pKSksdC5wdXNoKGEpfXJldHVybiB0aGlzLmM9dC5qb2luKFwiJlwiKX07dmFyIFluPXsnXCInOidcXFxcXCInLFwiXFxcXFwiOlwiXFxcXFxcXFxcIixcIi9cIjpcIlxcXFwvXCIsXCJcXGJcIjpcIlxcXFxiXCIsXCJcXGZcIjpcIlxcXFxmXCIsXCJcXG5cIjpcIlxcXFxuXCIsXCJcXHJcIjpcIlxcXFxyXCIsXCJcXHRcIjpcIlxcXFx0XCIsXCJcXHZcIjpcIlxcXFx1MDAwYlwifSxYbj0vXFx1ZmZmZi8udGVzdChcIu+/v1wiKT8vW1xcXFxcIlxceDAwLVxceDFmXFx4N2YtXFx1ZmZmZl0vZzovW1xcXFxcIlxceDAwLVxceDFmXFx4N2YtXFx4ZmZdL2c7ZnVuY3Rpb24gSm4odCxlKXtlLnB1c2goJ1wiJyx0LnJlcGxhY2UoWG4sZnVuY3Rpb24odCl7dmFyIGU9WW5bdF07cmV0dXJuIGV8fChlPVwiXFxcXHVcIisoNjU1MzZ8dC5jaGFyQ29kZUF0KDApKS50b1N0cmluZygxNikuc3Vic3RyKDEpLFluW3RdPWUpLGV9KSwnXCInKX1mdW5jdGlvbiAkbigpe3ZhciB0PXlyKCk7cmV0dXJuIEJ0JiYkdCYmMTE9PSR0fHwvRWRnZVxcL1xcZCsvLnRlc3QodCl9ZnVuY3Rpb24gWm4oKXtyZXR1cm4gbC53aW5kb3cmJmwud2luZG93LmxvY2F0aW9uLmhyZWZ8fHNlbGYmJnNlbGYubG9jYXRpb24mJnNlbGYubG9jYXRpb24uaHJlZnx8XCJcIn1mdW5jdGlvbiB0cih0LGUpe2U9ZXx8bC53aW5kb3c7dmFyIG49XCJhYm91dDpibGFua1wiO3QmJihuPUN0KFJ0KHQpfHxEdCkpLGUubG9jYXRpb24uaHJlZj1ufWZ1bmN0aW9uIGVyKHQpe3JldHVybiEhKCh0PSh0fHx5cigpKS50b0xvd2VyQ2FzZSgpKS5tYXRjaCgvYW5kcm9pZC8pfHx0Lm1hdGNoKC93ZWJvcy8pfHx0Lm1hdGNoKC9pcGhvbmV8aXBhZHxpcG9kLyl8fHQubWF0Y2goL2JsYWNrYmVycnkvKXx8dC5tYXRjaCgvd2luZG93cyBwaG9uZS8pfHx0Lm1hdGNoKC9pZW1vYmlsZS8pKX1mdW5jdGlvbiBucih0KXt0PXR8fGwud2luZG93O3RyeXt0LmNsb3NlKCl9Y2F0Y2godCl7fX1mdW5jdGlvbiBycih0LGUsbil7dmFyIHI9TWF0aC5mbG9vcigxZTkqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoKTtlPWV8fDUwMCxuPW58fDYwMDt2YXIgaT0od2luZG93LnNjcmVlbi5hdmFpbEhlaWdodC1uKS8yLG89KHdpbmRvdy5zY3JlZW4uYXZhaWxXaWR0aC1lKS8yO2ZvcihhIGluIGU9e3dpZHRoOmUsaGVpZ2h0Om4sdG9wOjA8aT9pOjAsbGVmdDowPG8/bzowLGxvY2F0aW9uOiEwLHJlc2l6YWJsZTohMCxzdGF0dXNiYXI6ITAsdG9vbGJhcjohMX0sbj15cigpLnRvTG93ZXJDYXNlKCksciYmKGUudGFyZ2V0PXIscnQobixcImNyaW9zL1wiKSYmKGUudGFyZ2V0PVwiX2JsYW5rXCIpKSxkcih5cigpKT09ZnImJih0PXR8fFwiaHR0cDovL2xvY2FsaG9zdFwiLGUuc2Nyb2xsYmFycz0hMCksbj10fHxcIlwiLCh0PWUpfHwodD17fSkscj13aW5kb3csZT1uIGluc3RhbmNlb2YgU3Q/bjpSdCh2b2lkIDAhPT1uLmhyZWY/bi5ocmVmOlN0cmluZyhuKSl8fER0LG49dC50YXJnZXR8fG4udGFyZ2V0LGk9W10sdClzd2l0Y2goYSl7Y2FzZVwid2lkdGhcIjpjYXNlXCJoZWlnaHRcIjpjYXNlXCJ0b3BcIjpjYXNlXCJsZWZ0XCI6aS5wdXNoKGErXCI9XCIrdFthXSk7YnJlYWs7Y2FzZVwidGFyZ2V0XCI6Y2FzZVwibm9vcGVuZXJcIjpjYXNlXCJub3JlZmVycmVyXCI6YnJlYWs7ZGVmYXVsdDppLnB1c2goYStcIj1cIisodFthXT8xOjApKX12YXIgYT1pLmpvaW4oXCIsXCIpO2lmKChhdChcImlQaG9uZVwiKSYmIWF0KFwiaVBvZFwiKSYmIWF0KFwiaVBhZFwiKXx8YXQoXCJpUGFkXCIpfHxhdChcImlQb2RcIikpJiZyLm5hdmlnYXRvciYmci5uYXZpZ2F0b3Iuc3RhbmRhbG9uZSYmbiYmXCJfc2VsZlwiIT1uPyhmdChhPWFlKGRvY3VtZW50LFwiQVwiKSxcIkhUTUxBbmNob3JFbGVtZW50XCIpLGU9ZSBpbnN0YW5jZW9mIFN0P2U6UHQoZSksYS5ocmVmPUN0KGUpLGEuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsbiksdC5ub3JlZmVycmVyJiZhLnNldEF0dHJpYnV0ZShcInJlbFwiLFwibm9yZWZlcnJlclwiKSwodD1kb2N1bWVudC5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRcIikpLmluaXRNb3VzZUV2ZW50KFwiY2xpY2tcIiwhMCwhMCxyLDEpLGEuZGlzcGF0Y2hFdmVudCh0KSxhPXt9KTp0Lm5vcmVmZXJyZXI/KGE9TXQoXCJcIixyLG4sYSksdD1DdChlKSxhJiYoV3QmJnJ0KHQsXCI7XCIpJiYodD1cIidcIit0LnJlcGxhY2UoLycvZyxcIiUyN1wiKStcIidcIiksYS5vcGVuZXI9bnVsbCx0PSc8bWV0YSBuYW1lPVwicmVmZXJyZXJcIiBjb250ZW50PVwibm8tcmVmZXJyZXJcIj48bWV0YSBodHRwLWVxdWl2PVwicmVmcmVzaFwiIGNvbnRlbnQ9XCIwOyB1cmw9JytVdCh0KSsnXCI+Jyx0PW5ldyB4dCh0PShyPW10KCkpP3IuY3JlYXRlSFRNTCh0KTp0LDAsTHQpLHI9YS5kb2N1bWVudCkmJihyLndyaXRlKChvPXQpaW5zdGFuY2VvZiB4dCYmby5jb25zdHJ1Y3Rvcj09PXh0P28uYTooTyhcImV4cGVjdGVkIG9iamVjdCBvZiB0eXBlIFNhZmVIdG1sLCBnb3QgJ1wiK28rXCInIG9mIHR5cGUgXCIrcChvKSksXCJ0eXBlX2Vycm9yOlNhZmVIdG1sXCIpKSxyLmNsb3NlKCkpKTooYT1NdChlLHIsbixhKSkmJnQubm9vcGVuZXImJihhLm9wZW5lcj1udWxsKSxhKXRyeXthLmZvY3VzKCl9Y2F0Y2godCl7fXJldHVybiBhfXZhciBpcj0vXlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9JC8sb3I9L15bXkBdK0BbXkBdKyQvO2Z1bmN0aW9uIGFyKCl7dmFyIGU9bnVsbDtyZXR1cm4gbmV3IGZlKGZ1bmN0aW9uKHQpe1wiY29tcGxldGVcIj09bC5kb2N1bWVudC5yZWFkeVN0YXRlP3QoKTooZT1mdW5jdGlvbigpe3QoKX0sdG4od2luZG93LFwibG9hZFwiLGUpKX0pLm8oZnVuY3Rpb24odCl7dGhyb3cgZW4od2luZG93LFwibG9hZFwiLGUpLHR9KX1mdW5jdGlvbiBzcih0KXtyZXR1cm4gdD10fHx5cigpLCEoXCJmaWxlOlwiIT09SXIoKSYmXCJpb25pYzpcIiE9PUlyKCl8fCF0LnRvTG93ZXJDYXNlKCkubWF0Y2goL2lwaG9uZXxpcGFkfGlwb2R8YW5kcm9pZC8pKX1mdW5jdGlvbiB1cigpe3ZhciB0PWwud2luZG93O3RyeXtyZXR1cm4gdCYmdCE9dC50b3B9Y2F0Y2godCl7cmV0dXJufX1mdW5jdGlvbiBjcigpe3JldHVybiB2b2lkIDAhPT1sLldvcmtlckdsb2JhbFNjb3BlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBsLmltcG9ydFNjcmlwdHN9ZnVuY3Rpb24gaHIoKXtyZXR1cm4gWGwuSU5URVJOQUwuaGFzT3duUHJvcGVydHkoXCJyZWFjdE5hdGl2ZVwiKT9cIlJlYWN0TmF0aXZlXCI6WGwuSU5URVJOQUwuaGFzT3duUHJvcGVydHkoXCJub2RlXCIpP1wiTm9kZVwiOmNyKCk/XCJXb3JrZXJcIjpcIkJyb3dzZXJcIn1mdW5jdGlvbiBscigpe3ZhciB0PWhyKCk7cmV0dXJuXCJSZWFjdE5hdGl2ZVwiPT09dHx8XCJOb2RlXCI9PT10fXZhciBmcj1cIkZpcmVmb3hcIixwcj1cIkNocm9tZVwiO2Z1bmN0aW9uIGRyKHQpe3ZhciBlPXQudG9Mb3dlckNhc2UoKTtyZXR1cm4gcnQoZSxcIm9wZXJhL1wiKXx8cnQoZSxcIm9wci9cIil8fHJ0KGUsXCJvcGlvcy9cIik/XCJPcGVyYVwiOnJ0KGUsXCJpZW1vYmlsZVwiKT9cIklFTW9iaWxlXCI6cnQoZSxcIm1zaWVcIil8fHJ0KGUsXCJ0cmlkZW50L1wiKT9cIklFXCI6cnQoZSxcImVkZ2UvXCIpP1wiRWRnZVwiOnJ0KGUsXCJmaXJlZm94L1wiKT9mcjpydChlLFwic2lsay9cIik/XCJTaWxrXCI6cnQoZSxcImJsYWNrYmVycnlcIik/XCJCbGFja2JlcnJ5XCI6cnQoZSxcIndlYm9zXCIpP1wiV2Vib3NcIjohcnQoZSxcInNhZmFyaS9cIil8fHJ0KGUsXCJjaHJvbWUvXCIpfHxydChlLFwiY3Jpb3MvXCIpfHxydChlLFwiYW5kcm9pZFwiKT8hcnQoZSxcImNocm9tZS9cIikmJiFydChlLFwiY3Jpb3MvXCIpfHxydChlLFwiZWRnZS9cIik/cnQoZSxcImFuZHJvaWRcIik/XCJBbmRyb2lkXCI6KHQ9dC5tYXRjaCgvKFthLXpBLVpcXGRcXC5dKylcXC9bYS16QS1aXFxkXFwuXSokLykpJiYyPT10Lmxlbmd0aD90WzFdOlwiT3RoZXJcIjpwcjpcIlNhZmFyaVwifXZhciB2cj17bWQ6XCJGaXJlYmFzZUNvcmUtd2ViXCIsb2Q6XCJGaXJlYmFzZVVJLXdlYlwifTtmdW5jdGlvbiBncih0LGUpe2U9ZXx8W107dmFyIG4scj1bXSxpPXt9O2ZvcihuIGluIHZyKWlbdnJbbl1dPSEwO2ZvcihuPTA7bjxlLmxlbmd0aDtuKyspdm9pZCAwIT09aVtlW25dXSYmKGRlbGV0ZSBpW2Vbbl1dLHIucHVzaChlW25dKSk7cmV0dXJuIHIuc29ydCgpLChlPXIpLmxlbmd0aHx8KGU9W1wiRmlyZWJhc2VDb3JlLXdlYlwiXSksXCJCcm93c2VyXCI9PT0ocj1ocigpKT9yPWRyKGk9eXIoKSk6XCJXb3JrZXJcIj09PXImJihyPWRyKGk9eXIoKSkrXCItXCIrcikscitcIi9Kc0NvcmUvXCIrdCtcIi9cIitlLmpvaW4oXCIsXCIpfWZ1bmN0aW9uIHlyKCl7cmV0dXJuIGwubmF2aWdhdG9yJiZsLm5hdmlnYXRvci51c2VyQWdlbnR8fFwiXCJ9ZnVuY3Rpb24gbXIodCxlKXt0PXQuc3BsaXQoXCIuXCIpLGU9ZXx8bDtmb3IodmFyIG49MDtuPHQubGVuZ3RoJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9ZTtuKyspZT1lW3Rbbl1dO3JldHVybiBlPW4hPXQubGVuZ3RoP3ZvaWQgMDplfWZ1bmN0aW9uIGJyKCl7dHJ5e3ZhciB0PWwubG9jYWxTdG9yYWdlLGU9a3IoKTtpZih0KXJldHVybiB0LnNldEl0ZW0oZSxcIjFcIiksdC5yZW1vdmVJdGVtKGUpLCEkbigpfHwhIWwuaW5kZXhlZERCfWNhdGNoKHQpe3JldHVybiBjcigpJiYhIWwuaW5kZXhlZERCfXJldHVybiExfWZ1bmN0aW9uIF9yKCl7cmV0dXJuKHdyKCl8fFwiY2hyb21lLWV4dGVuc2lvbjpcIj09PUlyKCl8fHNyKCkpJiYhbHIoKSYmYnIoKSYmIWNyKCl9ZnVuY3Rpb24gd3IoKXtyZXR1cm5cImh0dHA6XCI9PT1JcigpfHxcImh0dHBzOlwiPT09SXIoKX1mdW5jdGlvbiBJcigpe3JldHVybiBsLmxvY2F0aW9uJiZsLmxvY2F0aW9uLnByb3RvY29sfHxudWxsfWZ1bmN0aW9uIFRyKHQpe3JldHVybiFlcih0PXR8fHlyKCkpJiZkcih0KSE9ZnJ9ZnVuY3Rpb24gRXIodCl7cmV0dXJuIHZvaWQgMD09PXQ/bnVsbDp6bih0KX1mdW5jdGlvbiBTcih0KXt2YXIgZSxuPXt9O2ZvcihlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmbnVsbCE9PXRbZV0mJnZvaWQgMCE9PXRbZV0mJihuW2VdPXRbZV0pO3JldHVybiBufWZ1bmN0aW9uIENyKHQpe2lmKG51bGwhPT10KXJldHVybiBKU09OLnBhcnNlKHQpfWZ1bmN0aW9uIGtyKHQpe3JldHVybiB0fHxNYXRoLmZsb29yKDFlOSpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygpfWZ1bmN0aW9uIE5yKHQpe3JldHVyblwiU2FmYXJpXCIhPWRyKHQ9dHx8eXIoKSkmJiF0LnRvTG93ZXJDYXNlKCkubWF0Y2goL2lwaG9uZXxpcGFkfGlwb2QvKX1mdW5jdGlvbiBBcigpe3ZhciB0PWwuX19fanNsO2lmKHQmJnQuSClmb3IodmFyIGUgaW4gdC5IKWlmKHQuSFtlXS5yPXQuSFtlXS5yfHxbXSx0LkhbZV0uTD10LkhbZV0uTHx8W10sdC5IW2VdLnI9dC5IW2VdLkwuY29uY2F0KCksdC5DUClmb3IodmFyIG49MDtuPHQuQ1AubGVuZ3RoO24rKyl0LkNQW25dPW51bGx9ZnVuY3Rpb24gUnIodCxlKXtpZihlPHQpdGhyb3cgRXJyb3IoXCJTaG9ydCBkZWxheSBzaG91bGQgYmUgbGVzcyB0aGFuIGxvbmcgZGVsYXkhXCIpO3RoaXMuYT10LHRoaXMuYz1lLHQ9eXIoKSxlPWhyKCksdGhpcy5iPWVyKHQpfHxcIlJlYWN0TmF0aXZlXCI9PT1lfWZ1bmN0aW9uIFByKCl7dmFyIHQ9bC5kb2N1bWVudDtyZXR1cm4hdHx8dm9pZCAwPT09dC52aXNpYmlsaXR5U3RhdGV8fFwidmlzaWJsZVwiPT10LnZpc2liaWxpdHlTdGF0ZX1mdW5jdGlvbiBPcigpe3ZhciBlPWwuZG9jdW1lbnQsbj1udWxsO3JldHVybiBQcigpfHwhZT9iZSgpOm5ldyBmZShmdW5jdGlvbih0KXtuPWZ1bmN0aW9uKCl7UHIoKSYmKGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIixuLCExKSx0KCkpfSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsbiwhMSl9KS5vKGZ1bmN0aW9uKHQpe3Rocm93IGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIixuLCExKSx0fSl9ZnVuY3Rpb24gRHIodCl7dHJ5e3ZhciBlPW5ldyBEYXRlKHBhcnNlSW50KHQsMTApKTtpZighaXNOYU4oZS5nZXRUaW1lKCkpJiYhL1teMC05XS8udGVzdCh0KSlyZXR1cm4gZS50b1VUQ1N0cmluZygpfWNhdGNoKHQpe31yZXR1cm4gbnVsbH1mdW5jdGlvbiB4cigpe3JldHVybiBtcihcImZpcmVhdXRoLm9hdXRoaGVscGVyXCIsbCl8fG1yKFwiZmlyZWF1dGguaWZyYW1lXCIsbCl9UnIucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3ZhciB0PWwubmF2aWdhdG9yO3JldHVybiF0fHxcImJvb2xlYW5cIiE9dHlwZW9mIHQub25MaW5lfHwhd3IoKSYmXCJjaHJvbWUtZXh0ZW5zaW9uOlwiIT09SXIoKSYmdm9pZCAwPT09dC5jb25uZWN0aW9ufHx0Lm9uTGluZT90aGlzLmI/dGhpcy5jOnRoaXMuYTpNYXRoLm1pbig1ZTMsdGhpcy5hKX07dmFyIExyLE1yPXt9O2Z1bmN0aW9uIEZyKHQpe01yW3RdfHwoTXJbdF09ITAsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKHQpKX10cnl7dmFyIFVyPXt9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShVcixcImFiY2RcIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6MX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVcixcImFiY2RcIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6Mn0pLExyPTI9PVVyLmFiY2R9Y2F0Y2godCl7THI9ITF9ZnVuY3Rpb24ganIodCxlLG4pe0xyP09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOm59KTp0W2VdPW59ZnVuY3Rpb24gcXIodCxlKXtpZihlKWZvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJmpyKHQsbixlW25dKX1mdW5jdGlvbiBWcih0KXt2YXIgZT17fTtyZXR1cm4gcXIoZSx0KSxlfWZ1bmN0aW9uIEJyKHQpe3ZhciBlPXQ7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPXQpZm9yKHZhciBuIGluIGU9XCJsZW5ndGhcImluIHQ/W106e30sdClqcihlLG4sQnIodFtuXSkpO3JldHVybiBlfWZ1bmN0aW9uIEtyKHQpe3ZhciBlPXQmJih0W1FyXT9cInBob25lXCI6bnVsbCk7aWYoIShlJiZ0JiZ0W3pyXSkpdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiLFwiSW50ZXJuYWwgYXNzZXJ0OiBpbnZhbGlkIE11bHRpRmFjdG9ySW5mbyBvYmplY3RcIik7anIodGhpcyxcInVpZFwiLHRbenJdKSxqcih0aGlzLFwiZGlzcGxheU5hbWVcIix0W0hyXXx8bnVsbCk7dmFyIG49bnVsbDtqcih0aGlzLFwiZW5yb2xsbWVudFRpbWVcIixuPXRbR3JdP25ldyBEYXRlKHRbR3JdKS50b1VUQ1N0cmluZygpOm4pLGpyKHRoaXMsXCJmYWN0b3JJZFwiLGUpfWZ1bmN0aW9uIFdyKHQpe3RyeXt2YXIgZT1uZXcgWXIodCl9Y2F0Y2godCl7ZT1udWxsfXJldHVybiBlfUtyLnByb3RvdHlwZS53PWZ1bmN0aW9uKCl7cmV0dXJue3VpZDp0aGlzLnVpZCxkaXNwbGF5TmFtZTp0aGlzLmRpc3BsYXlOYW1lLGZhY3RvcklkOnRoaXMuZmFjdG9ySWQsZW5yb2xsbWVudFRpbWU6dGhpcy5lbnJvbGxtZW50VGltZX19O3ZhciBIcj1cImRpc3BsYXlOYW1lXCIsR3I9XCJlbnJvbGxlZEF0XCIsenI9XCJtZmFFbnJvbGxtZW50SWRcIixRcj1cInBob25lSW5mb1wiO2Z1bmN0aW9uIFlyKHQpe0tyLmNhbGwodGhpcyx0KSxqcih0aGlzLFwicGhvbmVOdW1iZXJcIix0W1FyXSl9ZnVuY3Rpb24gWHIodCl7dmFyIGU9e30sbj10W3RpXSxyPXRbbmldLGk9dFtyaV07aWYodD1Xcih0W2VpXSksIWl8fGkhPSRyJiZpIT1aciYmIW58fGk9PVpyJiYhcnx8aT09SnImJiF0KXRocm93IEVycm9yKFwiSW52YWxpZCBjaGVja0FjdGlvbkNvZGUgcmVzcG9uc2UhXCIpO2k9PVpyPyhlW29pXT1ufHxudWxsLGVbc2ldPW58fG51bGwsZVtpaV09cik6KGVbb2ldPXJ8fG51bGwsZVtzaV09cnx8bnVsbCxlW2lpXT1ufHxudWxsKSxlW2FpXT10fHxudWxsLGpyKHRoaXMsY2ksaSksanIodGhpcyx1aSxCcihlKSl9XyhZcixLciksWXIucHJvdG90eXBlLnc9ZnVuY3Rpb24oKXt2YXIgdD1Zci5hYi53LmNhbGwodGhpcyk7cmV0dXJuIHQucGhvbmVOdW1iZXI9dGhpcy5waG9uZU51bWJlcix0fTt2YXIgSnI9XCJSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTlwiLCRyPVwiRU1BSUxfU0lHTklOXCIsWnI9XCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiLHRpPVwiZW1haWxcIixlaT1cIm1mYUluZm9cIixuaT1cIm5ld0VtYWlsXCIscmk9XCJyZXF1ZXN0VHlwZVwiLGlpPVwiZW1haWxcIixvaT1cImZyb21FbWFpbFwiLGFpPVwibXVsdGlGYWN0b3JJbmZvXCIsc2k9XCJwcmV2aW91c0VtYWlsXCIsdWk9XCJkYXRhXCIsY2k9XCJvcGVyYXRpb25cIjtmdW5jdGlvbiBoaSh0KXt2YXIgZT1Obih0PUFuKHQpLGxpKXx8bnVsbCxuPU5uKHQsZmkpfHxudWxsLHI9KHI9Tm4odCx2aSl8fG51bGwpJiZ5aVtyXXx8bnVsbDtpZighZXx8IW58fCFyKXRocm93IG5ldyBJKFwiYXJndW1lbnQtZXJyb3JcIixsaStcIiwgXCIrZmkrXCJhbmQgXCIrdmkrXCIgYXJlIHJlcXVpcmVkIGluIGEgdmFsaWQgYWN0aW9uIGNvZGUgVVJMLlwiKTtxcih0aGlzLHthcGlLZXk6ZSxvcGVyYXRpb246cixjb2RlOm4sY29udGludWVVcmw6Tm4odCxwaSl8fG51bGwsbGFuZ3VhZ2VDb2RlOk5uKHQsZGkpfHxudWxsLHRlbmFudElkOk5uKHQsZ2kpfHxudWxsfSl9dmFyIGxpPVwiYXBpS2V5XCIsZmk9XCJvb2JDb2RlXCIscGk9XCJjb250aW51ZVVybFwiLGRpPVwibGFuZ3VhZ2VDb2RlXCIsdmk9XCJtb2RlXCIsZ2k9XCJ0ZW5hbnRJZFwiLHlpPXtyZWNvdmVyRW1haWw6XCJSRUNPVkVSX0VNQUlMXCIscmVzZXRQYXNzd29yZDpcIlBBU1NXT1JEX1JFU0VUXCIscmV2ZXJ0U2Vjb25kRmFjdG9yQWRkaXRpb246SnIsc2lnbkluOiRyLHZlcmlmeUFuZENoYW5nZUVtYWlsOlpyLHZlcmlmeUVtYWlsOlwiVkVSSUZZX0VNQUlMXCJ9O2Z1bmN0aW9uIG1pKHQpe3RyeXtyZXR1cm4gbmV3IGhpKHQpfWNhdGNoKHQpe3JldHVybiBudWxsfX1mdW5jdGlvbiBiaSh0KXtpZih2b2lkIDA9PT0oZT10W0VpXSkpdGhyb3cgbmV3IEkoXCJtaXNzaW5nLWNvbnRpbnVlLXVyaVwiKTtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8XCJzdHJpbmdcIj09dHlwZW9mIGUmJiFlLmxlbmd0aCl0aHJvdyBuZXcgSShcImludmFsaWQtY29udGludWUtdXJpXCIpO2lmKHRoaXMuaD1lLHRoaXMuYj10aGlzLmE9bnVsbCx0aGlzLmc9ITEsKHI9dFtfaV0pJiZcIm9iamVjdFwiPT10eXBlb2Ygcil7dmFyIGU9cltraV0sbj1yW1NpXSxyPXJbQ2ldO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiZlLmxlbmd0aCl7aWYodGhpcy5hPWUsdm9pZCAwIT09biYmXCJib29sZWFuXCIhPXR5cGVvZiBuKXRocm93IG5ldyBJKFwiYXJndW1lbnQtZXJyb3JcIixTaStcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgYm9vbGVhbiB3aGVuIHNwZWNpZmllZC5cIik7aWYodGhpcy5nPSEhbix2b2lkIDAhPT1yJiYoXCJzdHJpbmdcIiE9dHlwZW9mIHJ8fFwic3RyaW5nXCI9PXR5cGVvZiByJiYhci5sZW5ndGgpKXRocm93IG5ldyBJKFwiYXJndW1lbnQtZXJyb3JcIixDaStcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZyB3aGVuIHNwZWNpZmllZC5cIik7dGhpcy5iPXJ8fG51bGx9ZWxzZXtpZih2b2lkIDAhPT1lKXRocm93IG5ldyBJKFwiYXJndW1lbnQtZXJyb3JcIixraStcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZyB3aGVuIHNwZWNpZmllZC5cIik7aWYodm9pZCAwIT09bnx8dm9pZCAwIT09cil0aHJvdyBuZXcgSShcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiKX19ZWxzZSBpZih2b2lkIDAhPT1yKXRocm93IG5ldyBJKFwiYXJndW1lbnQtZXJyb3JcIixfaStcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgbm9uIG51bGwgb2JqZWN0IHdoZW4gc3BlY2lmaWVkLlwiKTtpZih0aGlzLmY9bnVsbCwoZT10W1RpXSkmJlwib2JqZWN0XCI9PXR5cGVvZiBlKXtpZihcInN0cmluZ1wiPT10eXBlb2YoZT1lW05pXSkmJmUubGVuZ3RoKXRoaXMuZj1lO2Vsc2UgaWYodm9pZCAwIT09ZSl0aHJvdyBuZXcgSShcImFyZ3VtZW50LWVycm9yXCIsTmkrXCIgcHJvcGVydHkgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmcgd2hlbiBzcGVjaWZpZWQuXCIpfWVsc2UgaWYodm9pZCAwIT09ZSl0aHJvdyBuZXcgSShcImFyZ3VtZW50LWVycm9yXCIsVGkrXCIgcHJvcGVydHkgbXVzdCBiZSBhIG5vbiBudWxsIG9iamVjdCB3aGVuIHNwZWNpZmllZC5cIik7aWYodm9pZCAwIT09KGU9dFtJaV0pJiZcImJvb2xlYW5cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLElpK1wiIHByb3BlcnR5IG11c3QgYmUgYSBib29sZWFuIHdoZW4gc3BlY2lmaWVkLlwiKTtpZih0aGlzLmM9ISFlLHZvaWQgMCE9PSh0PXRbd2ldKSYmKFwic3RyaW5nXCIhPXR5cGVvZiB0fHxcInN0cmluZ1wiPT10eXBlb2YgdCYmIXQubGVuZ3RoKSl0aHJvdyBuZXcgSShcImFyZ3VtZW50LWVycm9yXCIsd2krXCIgcHJvcGVydHkgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmcgd2hlbiBzcGVjaWZpZWQuXCIpO3RoaXMuaT10fHxudWxsfXZhciBfaT1cImFuZHJvaWRcIix3aT1cImR5bmFtaWNMaW5rRG9tYWluXCIsSWk9XCJoYW5kbGVDb2RlSW5BcHBcIixUaT1cImlPU1wiLEVpPVwidXJsXCIsU2k9XCJpbnN0YWxsQXBwXCIsQ2k9XCJtaW5pbXVtVmVyc2lvblwiLGtpPVwicGFja2FnZU5hbWVcIixOaT1cImJ1bmRsZUlkXCI7ZnVuY3Rpb24gQWkodCl7dmFyIGUsbj17fTtmb3IoZSBpbiBuLmNvbnRpbnVlVXJsPXQuaCxuLmNhbkhhbmRsZUNvZGVJbkFwcD10LmMsKG4uYW5kcm9pZFBhY2thZ2VOYW1lPXQuYSkmJihuLmFuZHJvaWRNaW5pbXVtVmVyc2lvbj10LmIsbi5hbmRyb2lkSW5zdGFsbEFwcD10LmcpLG4uaU9TQnVuZGxlSWQ9dC5mLG4uZHluYW1pY0xpbmtEb21haW49dC5pLG4pbnVsbD09PW5bZV0mJmRlbGV0ZSBuW2VdO3JldHVybiBufXZhciBSaT1udWxsO2Z1bmN0aW9uIFBpKHQpe3ZhciBlPVtdO3JldHVybiBmdW5jdGlvbihyLHQpe2Z1bmN0aW9uIGUodCl7Zm9yKDtpPHIubGVuZ3RoOyl7dmFyIGU9ci5jaGFyQXQoaSsrKSxuPVJpW2VdO2lmKG51bGwhPW4pcmV0dXJuIG47aWYoIS9eW1xcc1xceGEwXSokLy50ZXN0KGUpKXRocm93IEVycm9yKFwiVW5rbm93biBiYXNlNjQgZW5jb2RpbmcgYXQgY2hhcjogXCIrZSl9cmV0dXJuIHR9IWZ1bmN0aW9uKCl7aWYoIVJpKXtSaT17fTtmb3IodmFyIHQ9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiLnNwbGl0KFwiXCIpLGU9W1wiKy89XCIsXCIrL1wiLFwiLV89XCIsXCItXy5cIixcIi1fXCJdLG49MDtuPDU7bisrKWZvcih2YXIgcj10LmNvbmNhdChlW25dLnNwbGl0KFwiXCIpKSxpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBvPXJbaV07dm9pZCAwPT09Umlbb10mJihSaVtvXT1pKX19fSgpO2Zvcih2YXIgaT0wOzspe3ZhciBuPWUoLTEpLG89ZSgwKSxhPWUoNjQpLHM9ZSg2NCk7aWYoNjQ9PT1zJiYtMT09PW4pYnJlYWs7dChuPDwyfG8+PjQpLDY0IT1hJiYodChvPDw0JjI0MHxhPj4yKSw2NCE9cyYmdChhPDw2JjE5MnxzKSl9fSh0LGZ1bmN0aW9uKHQpe2UucHVzaCh0KX0pLGV9ZnVuY3Rpb24gT2kodCl7dmFyIGU9eGkodCk7aWYoIShlJiZlLnN1YiYmZS5pc3MmJmUuYXVkJiZlLmV4cCkpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIEpXVFwiKTt0aGlzLmg9dCx0aGlzLmE9ZS5leHAsdGhpcy5pPWUuc3ViLHQ9RGF0ZS5ub3coKS8xZTMsdGhpcy5nPWUuaWF0fHwodD50aGlzLmE/dGhpcy5hOnQpLHRoaXMuYj1lLnByb3ZpZGVyX2lkfHxlLmZpcmViYXNlJiZlLmZpcmViYXNlLnNpZ25faW5fcHJvdmlkZXJ8fG51bGwsdGhpcy5mPWUuZmlyZWJhc2UmJmUuZmlyZWJhc2UudGVuYW50fHxudWxsLHRoaXMuYz0hIWUuaXNfYW5vbnltb3VzfHxcImFub255bW91c1wiPT10aGlzLmJ9ZnVuY3Rpb24gRGkodCl7dHJ5e3JldHVybiBuZXcgT2kodCl9Y2F0Y2godCl7cmV0dXJuIG51bGx9fWZ1bmN0aW9uIHhpKHQpe2lmKCF0KXJldHVybiBudWxsO2lmKDMhPSh0PXQuc3BsaXQoXCIuXCIpKS5sZW5ndGgpcmV0dXJuIG51bGw7Zm9yKHZhciBlPSg0LSh0PXRbMV0pLmxlbmd0aCU0KSU0LG49MDtuPGU7bisrKXQrPVwiLlwiO3RyeXt2YXIgcj1QaSh0KTtmb3IodD1bXSxuPWU9MDtlPHIubGVuZ3RoOyl7dmFyIGksbyxhLHM9cltlKytdO3M8MTI4P3RbbisrXT1TdHJpbmcuZnJvbUNoYXJDb2RlKHMpOjE5MTxzJiZzPDIyND8oaT1yW2UrK10sdFtuKytdPVN0cmluZy5mcm9tQ2hhckNvZGUoKDMxJnMpPDw2fDYzJmkpKToyMzk8cyYmczwzNjU/KGE9KCg3JnMpPDwxOHwoNjMmKGk9cltlKytdKSk8PDEyfCg2MyYobz1yW2UrK10pKTw8Nnw2MyZyW2UrK10pLTY1NTM2LHRbbisrXT1TdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2KyhhPj4xMCkpLHRbbisrXT1TdHJpbmcuZnJvbUNoYXJDb2RlKDU2MzIwKygxMDIzJmEpKSk6KGk9cltlKytdLG89cltlKytdLHRbbisrXT1TdHJpbmcuZnJvbUNoYXJDb2RlKCgxNSZzKTw8MTJ8KDYzJmkpPDw2fDYzJm8pKX1yZXR1cm4gSlNPTi5wYXJzZSh0LmpvaW4oXCJcIikpfWNhdGNoKHQpe31yZXR1cm4gbnVsbH1PaS5wcm90b3R5cGUuVD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZ9LE9pLnByb3RvdHlwZS5sPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY30sT2kucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaH07dmFyIExpPVwib2F1dGhfY29uc3VtZXJfa2V5IG9hdXRoX25vbmNlIG9hdXRoX3NpZ25hdHVyZSBvYXV0aF9zaWduYXR1cmVfbWV0aG9kIG9hdXRoX3RpbWVzdGFtcCBvYXV0aF90b2tlbiBvYXV0aF92ZXJzaW9uXCIuc3BsaXQoXCIgXCIpLE1pPVtcImNsaWVudF9pZFwiLFwicmVzcG9uc2VfdHlwZVwiLFwic2NvcGVcIixcInJlZGlyZWN0X3VyaVwiLFwic3RhdGVcIl0sRmk9e25kOntKYTpcImxvY2FsZVwiLHVhOjcwMCx0YTo2MDAsZmE6XCJmYWNlYm9vay5jb21cIixYYTpNaX0scGQ6e0phOm51bGwsdWE6NTAwLHRhOjc1MCxmYTpcImdpdGh1Yi5jb21cIixYYTpNaX0scWQ6e0phOlwiaGxcIix1YTo1MTUsdGE6NjgwLGZhOlwiZ29vZ2xlLmNvbVwiLFhhOk1pfSx3ZDp7SmE6XCJsYW5nXCIsdWE6NDg1LHRhOjcwNSxmYTpcInR3aXR0ZXIuY29tXCIsWGE6TGl9LGtkOntKYTpcImxvY2FsZVwiLHVhOjY0MCx0YTo2MDAsZmE6XCJhcHBsZS5jb21cIixYYTpbXX19O2Z1bmN0aW9uIFVpKHQpe2Zvcih2YXIgZSBpbiBGaSlpZihGaVtlXS5mYT09dClyZXR1cm4gRmlbZV07cmV0dXJuIG51bGx9ZnVuY3Rpb24gamkodCl7dmFyIGU9e307ZVtcImZhY2Vib29rLmNvbVwiXT1XaSxlW1wiZ29vZ2xlLmNvbVwiXT1HaSxlW1wiZ2l0aHViLmNvbVwiXT1IaSxlW1widHdpdHRlci5jb21cIl09emk7dmFyIG49dCYmdFtWaV07dHJ5e2lmKG4pcmV0dXJuIG5ldyhlW25dfHxLaSkodCk7aWYodm9pZCAwIT09dFtxaV0pcmV0dXJuIG5ldyBCaSh0KX1jYXRjaCh0KXt9cmV0dXJuIG51bGx9dmFyIHFpPVwiaWRUb2tlblwiLFZpPVwicHJvdmlkZXJJZFwiO2Z1bmN0aW9uIEJpKHQpe3ZhciBlLG49dFtWaV07aWYobnx8IXRbcWldfHwoZT1EaSh0W3FpXSkpJiZlLmImJihuPWUuYiksIW4pdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGFkZGl0aW9uYWwgdXNlciBpbmZvIVwiKTtcImFub255bW91c1wiIT1uJiZcImN1c3RvbVwiIT1ufHwobj1udWxsKSxlPSExLHZvaWQgMCE9PXQuaXNOZXdVc2VyP2U9ISF0LmlzTmV3VXNlcjpcImlkZW50aXR5dG9vbGtpdCNTaWdudXBOZXdVc2VyUmVzcG9uc2VcIj09PXQua2luZCYmKGU9ITApLGpyKHRoaXMsXCJwcm92aWRlcklkXCIsbiksanIodGhpcyxcImlzTmV3VXNlclwiLGUpfWZ1bmN0aW9uIEtpKHQpe0JpLmNhbGwodGhpcyx0KSxqcih0aGlzLFwicHJvZmlsZVwiLEJyKCh0PUNyKHQucmF3VXNlckluZm98fFwie31cIikpfHx7fSkpfWZ1bmN0aW9uIFdpKHQpe2lmKEtpLmNhbGwodGhpcyx0KSxcImZhY2Vib29rLmNvbVwiIT10aGlzLnByb3ZpZGVySWQpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIHByb3ZpZGVyIElEIVwiKX1mdW5jdGlvbiBIaSh0KXtpZihLaS5jYWxsKHRoaXMsdCksXCJnaXRodWIuY29tXCIhPXRoaXMucHJvdmlkZXJJZCl0aHJvdyBFcnJvcihcIkludmFsaWQgcHJvdmlkZXIgSUQhXCIpO2pyKHRoaXMsXCJ1c2VybmFtZVwiLHRoaXMucHJvZmlsZSYmdGhpcy5wcm9maWxlLmxvZ2lufHxudWxsKX1mdW5jdGlvbiBHaSh0KXtpZihLaS5jYWxsKHRoaXMsdCksXCJnb29nbGUuY29tXCIhPXRoaXMucHJvdmlkZXJJZCl0aHJvdyBFcnJvcihcIkludmFsaWQgcHJvdmlkZXIgSUQhXCIpfWZ1bmN0aW9uIHppKHQpe2lmKEtpLmNhbGwodGhpcyx0KSxcInR3aXR0ZXIuY29tXCIhPXRoaXMucHJvdmlkZXJJZCl0aHJvdyBFcnJvcihcIkludmFsaWQgcHJvdmlkZXIgSUQhXCIpO2pyKHRoaXMsXCJ1c2VybmFtZVwiLHQuc2NyZWVuTmFtZXx8bnVsbCl9ZnVuY3Rpb24gUWkodCl7dmFyIGU9Tm4ocj1Bbih0KSxcImxpbmtcIiksbj1ObihBbihlKSxcImxpbmtcIikscj1ObihyLFwiZGVlcF9saW5rX2lkXCIpO3JldHVybiBObihBbihyKSxcImxpbmtcIil8fHJ8fG58fGV8fHR9ZnVuY3Rpb24gWWkodCxlKXtpZighdCYmIWUpdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiLFwiSW50ZXJuYWwgYXNzZXJ0OiBubyByYXcgc2Vzc2lvbiBzdHJpbmcgYXZhaWxhYmxlXCIpO2lmKHQmJmUpdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiLFwiSW50ZXJuYWwgYXNzZXJ0OiB1bmFibGUgdG8gZGV0ZXJtaW5lIHRoZSBzZXNzaW9uIHR5cGVcIik7dGhpcy5hPXR8fG51bGwsdGhpcy5iPWV8fG51bGwsdGhpcy50eXBlPXRoaXMuYT9YaTpKaX1fKEtpLEJpKSxfKFdpLEtpKSxfKEhpLEtpKSxfKEdpLEtpKSxfKHppLEtpKTt2YXIgWGk9XCJlbnJvbGxcIixKaT1cInNpZ25pblwiO2Z1bmN0aW9uICRpKCl7fWZ1bmN0aW9uIFppKHQsbil7cmV0dXJuIHQudGhlbihmdW5jdGlvbih0KXtpZih0W0JhXSl7dmFyIGU9RGkodFtCYV0pO2lmKCFlfHxuIT1lLmkpdGhyb3cgbmV3IEkoXCJ1c2VyLW1pc21hdGNoXCIpO3JldHVybiB0fXRocm93IG5ldyBJKFwidXNlci1taXNtYXRjaFwiKX0pLm8oZnVuY3Rpb24odCl7dGhyb3cgdCYmdC5jb2RlJiZ0LmNvZGU9PVMrXCJ1c2VyLW5vdC1mb3VuZFwiP25ldyBJKFwidXNlci1taXNtYXRjaFwiKTp0fSl9ZnVuY3Rpb24gdG8odCxlKXtpZighZSl0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIsXCJmYWlsZWQgdG8gY29uc3RydWN0IGEgY3JlZGVudGlhbFwiKTt0aGlzLmE9ZSxqcih0aGlzLFwicHJvdmlkZXJJZFwiLHQpLGpyKHRoaXMsXCJzaWduSW5NZXRob2RcIix0KX1mdW5jdGlvbiBlbyh0KXtyZXR1cm57cGVuZGluZ1Rva2VuOnQuYSxyZXF1ZXN0VXJpOlwiaHR0cDovL2xvY2FsaG9zdFwifX1mdW5jdGlvbiBubyh0KXtpZih0JiZ0LnByb3ZpZGVySWQmJnQuc2lnbkluTWV0aG9kJiYwPT10LnByb3ZpZGVySWQuaW5kZXhPZihcInNhbWwuXCIpJiZ0LnBlbmRpbmdUb2tlbil0cnl7cmV0dXJuIG5ldyB0byh0LnByb3ZpZGVySWQsdC5wZW5kaW5nVG9rZW4pfWNhdGNoKHQpe31yZXR1cm4gbnVsbH1mdW5jdGlvbiBybyh0LGUsbil7aWYodGhpcy5hPW51bGwsZS5pZFRva2VufHxlLmFjY2Vzc1Rva2VuKWUuaWRUb2tlbiYmanIodGhpcyxcImlkVG9rZW5cIixlLmlkVG9rZW4pLGUuYWNjZXNzVG9rZW4mJmpyKHRoaXMsXCJhY2Nlc3NUb2tlblwiLGUuYWNjZXNzVG9rZW4pLGUubm9uY2UmJiFlLnBlbmRpbmdUb2tlbiYmanIodGhpcyxcIm5vbmNlXCIsZS5ub25jZSksZS5wZW5kaW5nVG9rZW4mJih0aGlzLmE9ZS5wZW5kaW5nVG9rZW4pO2Vsc2V7aWYoIWUub2F1dGhUb2tlbnx8IWUub2F1dGhUb2tlblNlY3JldCl0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIsXCJmYWlsZWQgdG8gY29uc3RydWN0IGEgY3JlZGVudGlhbFwiKTtqcih0aGlzLFwiYWNjZXNzVG9rZW5cIixlLm9hdXRoVG9rZW4pLGpyKHRoaXMsXCJzZWNyZXRcIixlLm9hdXRoVG9rZW5TZWNyZXQpfWpyKHRoaXMsXCJwcm92aWRlcklkXCIsdCksanIodGhpcyxcInNpZ25Jbk1ldGhvZFwiLG4pfWZ1bmN0aW9uIGlvKHQpe3ZhciBlPXt9O3JldHVybiB0LmlkVG9rZW4mJihlLmlkX3Rva2VuPXQuaWRUb2tlbiksdC5hY2Nlc3NUb2tlbiYmKGUuYWNjZXNzX3Rva2VuPXQuYWNjZXNzVG9rZW4pLHQuc2VjcmV0JiYoZS5vYXV0aF90b2tlbl9zZWNyZXQ9dC5zZWNyZXQpLGUucHJvdmlkZXJJZD10LnByb3ZpZGVySWQsdC5ub25jZSYmIXQuYSYmKGUubm9uY2U9dC5ub25jZSksZT17cG9zdEJvZHk6Vm4oZSkudG9TdHJpbmcoKSxyZXF1ZXN0VXJpOlwiaHR0cDovL2xvY2FsaG9zdFwifSx0LmEmJihkZWxldGUgZS5wb3N0Qm9keSxlLnBlbmRpbmdUb2tlbj10LmEpLGV9ZnVuY3Rpb24gb28odCl7aWYodCYmdC5wcm92aWRlcklkJiZ0LnNpZ25Jbk1ldGhvZCl7dmFyIGU9e2lkVG9rZW46dC5vYXV0aElkVG9rZW4sYWNjZXNzVG9rZW46dC5vYXV0aFRva2VuU2VjcmV0P251bGw6dC5vYXV0aEFjY2Vzc1Rva2VuLG9hdXRoVG9rZW5TZWNyZXQ6dC5vYXV0aFRva2VuU2VjcmV0LG9hdXRoVG9rZW46dC5vYXV0aFRva2VuU2VjcmV0JiZ0Lm9hdXRoQWNjZXNzVG9rZW4sbm9uY2U6dC5ub25jZSxwZW5kaW5nVG9rZW46dC5wZW5kaW5nVG9rZW59O3RyeXtyZXR1cm4gbmV3IHJvKHQucHJvdmlkZXJJZCxlLHQuc2lnbkluTWV0aG9kKX1jYXRjaCh0KXt9fXJldHVybiBudWxsfWZ1bmN0aW9uIGFvKHQsZSl7dGhpcy5RYz1lfHxbXSxxcih0aGlzLHtwcm92aWRlcklkOnQsaXNPQXV0aFByb3ZpZGVyOiEwfSksdGhpcy5JYj17fSx0aGlzLnBiPShVaSh0KXx8e30pLkphfHxudWxsLHRoaXMub2I9bnVsbH1mdW5jdGlvbiBzbyh0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgdHx8MCE9dC5pbmRleE9mKFwic2FtbC5cIikpdGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLCdTQU1MIHByb3ZpZGVyIElEcyBtdXN0IGJlIHByZWZpeGVkIHdpdGggXCJzYW1sLlwiJyk7YW8uY2FsbCh0aGlzLHQsW10pfWZ1bmN0aW9uIHVvKHQpe2FvLmNhbGwodGhpcyx0LE1pKSx0aGlzLmE9W119ZnVuY3Rpb24gY28oKXt1by5jYWxsKHRoaXMsXCJmYWNlYm9vay5jb21cIil9ZnVuY3Rpb24gaG8odCl7aWYoIXQpdGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLFwiY3JlZGVudGlhbCBmYWlsZWQ6IGV4cGVjdGVkIDEgYXJndW1lbnQgKHRoZSBPQXV0aCBhY2Nlc3MgdG9rZW4pLlwiKTt2YXIgZT10O3JldHVybiBnKHQpJiYoZT10LmFjY2Vzc1Rva2VuKSwobmV3IGNvKS5jcmVkZW50aWFsKHthY2Nlc3NUb2tlbjplfSl9ZnVuY3Rpb24gbG8oKXt1by5jYWxsKHRoaXMsXCJnaXRodWIuY29tXCIpfWZ1bmN0aW9uIGZvKHQpe2lmKCF0KXRocm93IG5ldyBJKFwiYXJndW1lbnQtZXJyb3JcIixcImNyZWRlbnRpYWwgZmFpbGVkOiBleHBlY3RlZCAxIGFyZ3VtZW50ICh0aGUgT0F1dGggYWNjZXNzIHRva2VuKS5cIik7dmFyIGU9dDtyZXR1cm4gZyh0KSYmKGU9dC5hY2Nlc3NUb2tlbiksKG5ldyBsbykuY3JlZGVudGlhbCh7YWNjZXNzVG9rZW46ZX0pfWZ1bmN0aW9uIHBvKCl7dW8uY2FsbCh0aGlzLFwiZ29vZ2xlLmNvbVwiKSx0aGlzLkNhKFwicHJvZmlsZVwiKX1mdW5jdGlvbiB2byh0LGUpe3ZhciBuPXQ7cmV0dXJuIGcodCkmJihuPXQuaWRUb2tlbixlPXQuYWNjZXNzVG9rZW4pLChuZXcgcG8pLmNyZWRlbnRpYWwoe2lkVG9rZW46bixhY2Nlc3NUb2tlbjplfSl9ZnVuY3Rpb24gZ28oKXthby5jYWxsKHRoaXMsXCJ0d2l0dGVyLmNvbVwiLExpKX1mdW5jdGlvbiB5byh0LGUpe3ZhciBuPXQ7aWYoIShuPSFnKG4pP3tvYXV0aFRva2VuOnQsb2F1dGhUb2tlblNlY3JldDplfTpuKS5vYXV0aFRva2VufHwhbi5vYXV0aFRva2VuU2VjcmV0KXRocm93IG5ldyBJKFwiYXJndW1lbnQtZXJyb3JcIixcImNyZWRlbnRpYWwgZmFpbGVkOiBleHBlY3RlZCAyIGFyZ3VtZW50cyAodGhlIE9BdXRoIGFjY2VzcyB0b2tlbiBhbmQgc2VjcmV0KS5cIik7cmV0dXJuIG5ldyBybyhcInR3aXR0ZXIuY29tXCIsbixcInR3aXR0ZXIuY29tXCIpfWZ1bmN0aW9uIG1vKHQsZSxuKXt0aGlzLmE9dCx0aGlzLmY9ZSxqcih0aGlzLFwicHJvdmlkZXJJZFwiLFwicGFzc3dvcmRcIiksanIodGhpcyxcInNpZ25Jbk1ldGhvZFwiLG49PT1fby5FTUFJTF9MSU5LX1NJR05fSU5fTUVUSE9EP19vLkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0Q6X28uRU1BSUxfUEFTU1dPUkRfU0lHTl9JTl9NRVRIT0QpfWZ1bmN0aW9uIGJvKHQpe3JldHVybiB0JiZ0LmVtYWlsJiZ0LnBhc3N3b3JkP25ldyBtbyh0LmVtYWlsLHQucGFzc3dvcmQsdC5zaWduSW5NZXRob2QpOm51bGx9ZnVuY3Rpb24gX28oKXtxcih0aGlzLHtwcm92aWRlcklkOlwicGFzc3dvcmRcIixpc09BdXRoUHJvdmlkZXI6ITF9KX1mdW5jdGlvbiB3byh0LGUpe2lmKCEoZT1JbyhlKSkpdGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLFwiSW52YWxpZCBlbWFpbCBsaW5rIVwiKTtyZXR1cm4gbmV3IG1vKHQsZS5jb2RlLF9vLkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0QpfWZ1bmN0aW9uIElvKHQpe3JldHVybih0PW1pKHQ9UWkodCkpKSYmdC5vcGVyYXRpb249PT0kcj90Om51bGx9ZnVuY3Rpb24gVG8odCl7aWYoISh0LmViJiZ0LmNifHx0LkxhJiZ0LmVhKSl0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIpO3RoaXMuYT10LGpyKHRoaXMsXCJwcm92aWRlcklkXCIsXCJwaG9uZVwiKSx0aGlzLmZhPVwicGhvbmVcIixqcih0aGlzLFwic2lnbkluTWV0aG9kXCIsXCJwaG9uZVwiKX1mdW5jdGlvbiBFbyhlKXtpZihlJiZcInBob25lXCI9PT1lLnByb3ZpZGVySWQmJihlLnZlcmlmaWNhdGlvbklkJiZlLnZlcmlmaWNhdGlvbkNvZGV8fGUudGVtcG9yYXJ5UHJvb2YmJmUucGhvbmVOdW1iZXIpKXt2YXIgbj17fTtyZXR1cm4gaihbXCJ2ZXJpZmljYXRpb25JZFwiLFwidmVyaWZpY2F0aW9uQ29kZVwiLFwidGVtcG9yYXJ5UHJvb2ZcIixcInBob25lTnVtYmVyXCJdLGZ1bmN0aW9uKHQpe2VbdF0mJihuW3RdPWVbdF0pfSksbmV3IFRvKG4pfXJldHVybiBudWxsfWZ1bmN0aW9uIFNvKHQpe3JldHVybiB0LmEuTGEmJnQuYS5lYT97dGVtcG9yYXJ5UHJvb2Y6dC5hLkxhLHBob25lTnVtYmVyOnQuYS5lYX06e3Nlc3Npb25JbmZvOnQuYS5lYixjb2RlOnQuYS5jYn19ZnVuY3Rpb24gQ28odCl7dHJ5e3RoaXMuYT10fHxYbC5hdXRoKCl9Y2F0Y2godCl7dGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLFwiRWl0aGVyIGFuIGluc3RhbmNlIG9mIGZpcmViYXNlLmF1dGguQXV0aCBtdXN0IGJlIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgZmlyZWJhc2UuYXV0aC5QaG9uZUF1dGhQcm92aWRlciBjb25zdHJ1Y3Rvciwgb3IgdGhlIGRlZmF1bHQgZmlyZWJhc2UgQXBwIGluc3RhbmNlIG11c3QgYmUgaW5pdGlhbGl6ZWQgdmlhIGZpcmViYXNlLmluaXRpYWxpemVBcHAoKS5cIil9cXIodGhpcyx7cHJvdmlkZXJJZDpcInBob25lXCIsaXNPQXV0aFByb3ZpZGVyOiExfSl9ZnVuY3Rpb24ga28odCxlKXtpZighdCl0aHJvdyBuZXcgSShcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCIpO2lmKCFlKXRocm93IG5ldyBJKFwibWlzc2luZy12ZXJpZmljYXRpb24tY29kZVwiKTtyZXR1cm4gbmV3IFRvKHtlYjp0LGNiOmV9KX1mdW5jdGlvbiBObyh0KXtpZih0LnRlbXBvcmFyeVByb29mJiZ0LnBob25lTnVtYmVyKXJldHVybiBuZXcgVG8oe0xhOnQudGVtcG9yYXJ5UHJvb2YsZWE6dC5waG9uZU51bWJlcn0pO3ZhciBlPXQmJnQucHJvdmlkZXJJZDtpZighZXx8XCJwYXNzd29yZFwiPT09ZSlyZXR1cm4gbnVsbDt2YXIgbj10JiZ0Lm9hdXRoQWNjZXNzVG9rZW4scj10JiZ0Lm9hdXRoVG9rZW5TZWNyZXQsaT10JiZ0Lm5vbmNlLG89dCYmdC5vYXV0aElkVG9rZW4sYT10JiZ0LnBlbmRpbmdUb2tlbjt0cnl7c3dpdGNoKGUpe2Nhc2VcImdvb2dsZS5jb21cIjpyZXR1cm4gdm8obyxuKTtjYXNlXCJmYWNlYm9vay5jb21cIjpyZXR1cm4gaG8obik7Y2FzZVwiZ2l0aHViLmNvbVwiOnJldHVybiBmbyhuKTtjYXNlXCJ0d2l0dGVyLmNvbVwiOnJldHVybiB5byhuLHIpO2RlZmF1bHQ6cmV0dXJuIG58fHJ8fG98fGE/YT8wPT1lLmluZGV4T2YoXCJzYW1sLlwiKT9uZXcgdG8oZSxhKTpuZXcgcm8oZSx7cGVuZGluZ1Rva2VuOmEsaWRUb2tlbjp0Lm9hdXRoSWRUb2tlbixhY2Nlc3NUb2tlbjp0Lm9hdXRoQWNjZXNzVG9rZW59LGUpOm5ldyB1byhlKS5jcmVkZW50aWFsKHtpZFRva2VuOm8sYWNjZXNzVG9rZW46bixyYXdOb25jZTppfSk6bnVsbH19Y2F0Y2godCl7cmV0dXJuIG51bGx9fWZ1bmN0aW9uIEFvKHQpe2lmKCF0LmlzT0F1dGhQcm92aWRlcil0aHJvdyBuZXcgSShcImludmFsaWQtb2F1dGgtcHJvdmlkZXJcIil9ZnVuY3Rpb24gUm8odCxlLG4scixpLG8sYSl7aWYodGhpcy5jPXQsdGhpcy5iPWV8fG51bGwsdGhpcy5nPW58fG51bGwsdGhpcy5mPXJ8fG51bGwsdGhpcy5pPW98fG51bGwsdGhpcy5oPWF8fG51bGwsdGhpcy5hPWl8fG51bGwsIXRoaXMuZyYmIXRoaXMuYSl0aHJvdyBuZXcgSShcImludmFsaWQtYXV0aC1ldmVudFwiKTtpZih0aGlzLmcmJnRoaXMuYSl0aHJvdyBuZXcgSShcImludmFsaWQtYXV0aC1ldmVudFwiKTtpZih0aGlzLmcmJiF0aGlzLmYpdGhyb3cgbmV3IEkoXCJpbnZhbGlkLWF1dGgtZXZlbnRcIil9ZnVuY3Rpb24gUG8odCl7cmV0dXJuKHQ9dHx8e30pLnR5cGU/bmV3IFJvKHQudHlwZSx0LmV2ZW50SWQsdC51cmxSZXNwb25zZSx0LnNlc3Npb25JZCx0LmVycm9yJiZUKHQuZXJyb3IpLHQucG9zdEJvZHksdC50ZW5hbnRJZCk6bnVsbH1mdW5jdGlvbiBPbygpe3RoaXMuYj1udWxsLHRoaXMuYT1bXX1ZaS5wcm90b3R5cGUuSGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hP2JlKHRoaXMuYSk6YmUodGhpcy5iKX0sWWkucHJvdG90eXBlLnc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlPT1YaT97bXVsdGlGYWN0b3JTZXNzaW9uOntpZFRva2VuOnRoaXMuYX19OnttdWx0aUZhY3RvclNlc3Npb246e3BlbmRpbmdDcmVkZW50aWFsOnRoaXMuYn19fSwkaS5wcm90b3R5cGUua2E9ZnVuY3Rpb24oKXt9LCRpLnByb3RvdHlwZS5iPWZ1bmN0aW9uKCl7fSwkaS5wcm90b3R5cGUuYz1mdW5jdGlvbigpe30sJGkucHJvdG90eXBlLnc9ZnVuY3Rpb24oKXt9LHRvLnByb3RvdHlwZS5rYT1mdW5jdGlvbih0KXtyZXR1cm4gaHModCxlbyh0aGlzKSl9LHRvLnByb3RvdHlwZS5iPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZW8odGhpcyk7cmV0dXJuIG4uaWRUb2tlbj1lLGxzKHQsbil9LHRvLnByb3RvdHlwZS5jPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFppKGZzKHQsZW8odGhpcykpLGUpfSx0by5wcm90b3R5cGUudz1mdW5jdGlvbigpe3JldHVybntwcm92aWRlcklkOnRoaXMucHJvdmlkZXJJZCxzaWduSW5NZXRob2Q6dGhpcy5zaWduSW5NZXRob2QscGVuZGluZ1Rva2VuOnRoaXMuYX19LHJvLnByb3RvdHlwZS5rYT1mdW5jdGlvbih0KXtyZXR1cm4gaHModCxpbyh0aGlzKSl9LHJvLnByb3RvdHlwZS5iPWZ1bmN0aW9uKHQsZSl7dmFyIG49aW8odGhpcyk7cmV0dXJuIG4uaWRUb2tlbj1lLGxzKHQsbil9LHJvLnByb3RvdHlwZS5jPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFppKGZzKHQsaW8odGhpcykpLGUpfSxyby5wcm90b3R5cGUudz1mdW5jdGlvbigpe3ZhciB0PXtwcm92aWRlcklkOnRoaXMucHJvdmlkZXJJZCxzaWduSW5NZXRob2Q6dGhpcy5zaWduSW5NZXRob2R9O3JldHVybiB0aGlzLmlkVG9rZW4mJih0Lm9hdXRoSWRUb2tlbj10aGlzLmlkVG9rZW4pLHRoaXMuYWNjZXNzVG9rZW4mJih0Lm9hdXRoQWNjZXNzVG9rZW49dGhpcy5hY2Nlc3NUb2tlbiksdGhpcy5zZWNyZXQmJih0Lm9hdXRoVG9rZW5TZWNyZXQ9dGhpcy5zZWNyZXQpLHRoaXMubm9uY2UmJih0Lm5vbmNlPXRoaXMubm9uY2UpLHRoaXMuYSYmKHQucGVuZGluZ1Rva2VuPXRoaXMuYSksdH0sYW8ucHJvdG90eXBlLkthPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkliPWN0KHQpLHRoaXN9LF8oc28sYW8pLF8odW8sYW8pLHVvLnByb3RvdHlwZS5DYT1mdW5jdGlvbih0KXtyZXR1cm4gSyh0aGlzLmEsdCl8fHRoaXMuYS5wdXNoKHQpLHRoaXN9LHVvLnByb3RvdHlwZS5RYj1mdW5jdGlvbigpe3JldHVybiB6KHRoaXMuYSl9LHVvLnByb3RvdHlwZS5jcmVkZW50aWFsPWZ1bmN0aW9uKHQsZSl7ZT1nKHQpP3tpZFRva2VuOnQuaWRUb2tlbnx8bnVsbCxhY2Nlc3NUb2tlbjp0LmFjY2Vzc1Rva2VufHxudWxsLG5vbmNlOnQucmF3Tm9uY2V8fG51bGx9OntpZFRva2VuOnR8fG51bGwsYWNjZXNzVG9rZW46ZXx8bnVsbH07aWYoIWUuaWRUb2tlbiYmIWUuYWNjZXNzVG9rZW4pdGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLFwiY3JlZGVudGlhbCBmYWlsZWQ6IG11c3QgcHJvdmlkZSB0aGUgSUQgdG9rZW4gYW5kL29yIHRoZSBhY2Nlc3MgdG9rZW4uXCIpO3JldHVybiBuZXcgcm8odGhpcy5wcm92aWRlcklkLGUsdGhpcy5wcm92aWRlcklkKX0sXyhjbyx1byksanIoY28sXCJQUk9WSURFUl9JRFwiLFwiZmFjZWJvb2suY29tXCIpLGpyKGNvLFwiRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0RcIixcImZhY2Vib29rLmNvbVwiKSxfKGxvLHVvKSxqcihsbyxcIlBST1ZJREVSX0lEXCIsXCJnaXRodWIuY29tXCIpLGpyKGxvLFwiR0lUSFVCX1NJR05fSU5fTUVUSE9EXCIsXCJnaXRodWIuY29tXCIpLF8ocG8sdW8pLGpyKHBvLFwiUFJPVklERVJfSURcIixcImdvb2dsZS5jb21cIiksanIocG8sXCJHT09HTEVfU0lHTl9JTl9NRVRIT0RcIixcImdvb2dsZS5jb21cIiksXyhnbyxhbyksanIoZ28sXCJQUk9WSURFUl9JRFwiLFwidHdpdHRlci5jb21cIiksanIoZ28sXCJUV0lUVEVSX1NJR05fSU5fTUVUSE9EXCIsXCJ0d2l0dGVyLmNvbVwiKSxtby5wcm90b3R5cGUua2E9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2lnbkluTWV0aG9kPT1fby5FTUFJTF9MSU5LX1NJR05fSU5fTUVUSE9EP3pzKHQsX3Mse2VtYWlsOnRoaXMuYSxvb2JDb2RlOnRoaXMuZn0pOnpzKHQsQnMse2VtYWlsOnRoaXMuYSxwYXNzd29yZDp0aGlzLmZ9KX0sbW8ucHJvdG90eXBlLmI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zaWduSW5NZXRob2Q9PV9vLkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0Q/enModCx3cyx7aWRUb2tlbjplLGVtYWlsOnRoaXMuYSxvb2JDb2RlOnRoaXMuZn0pOnpzKHQseHMse2lkVG9rZW46ZSxlbWFpbDp0aGlzLmEscGFzc3dvcmQ6dGhpcy5mfSl9LG1vLnByb3RvdHlwZS5jPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFppKHRoaXMua2EodCksZSl9LG1vLnByb3RvdHlwZS53PWZ1bmN0aW9uKCl7cmV0dXJue2VtYWlsOnRoaXMuYSxwYXNzd29yZDp0aGlzLmYsc2lnbkluTWV0aG9kOnRoaXMuc2lnbkluTWV0aG9kfX0scXIoX28se1BST1ZJREVSX0lEOlwicGFzc3dvcmRcIn0pLHFyKF9vLHtFTUFJTF9MSU5LX1NJR05fSU5fTUVUSE9EOlwiZW1haWxMaW5rXCJ9KSxxcihfbyx7RU1BSUxfUEFTU1dPUkRfU0lHTl9JTl9NRVRIT0Q6XCJwYXNzd29yZFwifSksVG8ucHJvdG90eXBlLmthPWZ1bmN0aW9uKHQpe3JldHVybiB0LmZiKFNvKHRoaXMpKX0sVG8ucHJvdG90eXBlLmI9ZnVuY3Rpb24odCxlKXt2YXIgbj1Tbyh0aGlzKTtyZXR1cm4gbi5pZFRva2VuPWUsenModCxXcyxuKX0sVG8ucHJvdG90eXBlLmM9ZnVuY3Rpb24odCxlKXt2YXIgbj1Tbyh0aGlzKTtyZXR1cm4gbi5vcGVyYXRpb249XCJSRUFVVEhcIixaaSh0PXpzKHQsSHMsbiksZSl9LFRvLnByb3RvdHlwZS53PWZ1bmN0aW9uKCl7dmFyIHQ9e3Byb3ZpZGVySWQ6XCJwaG9uZVwifTtyZXR1cm4gdGhpcy5hLmViJiYodC52ZXJpZmljYXRpb25JZD10aGlzLmEuZWIpLHRoaXMuYS5jYiYmKHQudmVyaWZpY2F0aW9uQ29kZT10aGlzLmEuY2IpLHRoaXMuYS5MYSYmKHQudGVtcG9yYXJ5UHJvb2Y9dGhpcy5hLkxhKSx0aGlzLmEuZWEmJih0LnBob25lTnVtYmVyPXRoaXMuYS5lYSksdH0sQ28ucHJvdG90eXBlLmZiPWZ1bmN0aW9uKHIsaSl7dmFyIG89dGhpcy5hLmE7cmV0dXJuIGJlKGkudmVyaWZ5KCkpLnRoZW4oZnVuY3Rpb24obil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIG4pdGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLFwiQW4gaW1wbGVtZW50YXRpb24gb2YgZmlyZWJhc2UuYXV0aC5BcHBsaWNhdGlvblZlcmlmaWVyLnByb3RvdHlwZS52ZXJpZnkoKSBtdXN0IHJldHVybiBhIGZpcmViYXNlLlByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGEgc3RyaW5nLlwiKTtpZihcInJlY2FwdGNoYVwiIT09aS50eXBlKXRocm93IG5ldyBJKFwiYXJndW1lbnQtZXJyb3JcIiwnT25seSBmaXJlYmFzZS5hdXRoLkFwcGxpY2F0aW9uVmVyaWZpZXJzIHdpdGggdHlwZT1cInJlY2FwdGNoYVwiIGFyZSBjdXJyZW50bHkgc3VwcG9ydGVkLicpO3ZhciB0PWcocik/ci5zZXNzaW9uOm51bGwsZT1nKHIpP3IucGhvbmVOdW1iZXI6cix0PXQmJnQudHlwZT09WGk/dC5IYSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHpzKG8sTXMse2lkVG9rZW46dCxwaG9uZUVucm9sbG1lbnRJbmZvOntwaG9uZU51bWJlcjplLHJlY2FwdGNoYVRva2VuOm59fSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdC5waG9uZVNlc3Npb25JbmZvLnNlc3Npb25JbmZvfSl9KTp0JiZ0LnR5cGU9PUppP3QuSGEoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlPW8sdD17bWZhUGVuZGluZ0NyZWRlbnRpYWw6dCxtZmFFbnJvbGxtZW50SWQ6ci5tdWx0aUZhY3RvckhpbnQmJnIubXVsdGlGYWN0b3JIaW50LnVpZHx8ci5tdWx0aUZhY3RvclVpZCxwaG9uZVNpZ25JbkluZm86e3JlY2FwdGNoYVRva2VuOm59fSx6cyhlLEZzLHQpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQucGhvbmVSZXNwb25zZUluZm8uc2Vzc2lvbkluZm99KTt2YXIgZX0pOnpzKG8sT3Mse3Bob25lTnVtYmVyOmUscmVjYXB0Y2hhVG9rZW46bn0pO3JldHVybiB0LnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgaS5yZXNldCYmaS5yZXNldCgpLHR9LGZ1bmN0aW9uKHQpe3Rocm93XCJmdW5jdGlvblwiPT10eXBlb2YgaS5yZXNldCYmaS5yZXNldCgpLHR9KX0pfSxxcihDbyx7UFJPVklERVJfSUQ6XCJwaG9uZVwifSkscXIoQ28se1BIT05FX1NJR05fSU5fTUVUSE9EOlwicGhvbmVcIn0pLFJvLnByb3RvdHlwZS5nZXRVaWQ9ZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4gdC5wdXNoKHRoaXMuYyksdGhpcy5iJiZ0LnB1c2godGhpcy5iKSx0aGlzLmYmJnQucHVzaCh0aGlzLmYpLHRoaXMuaCYmdC5wdXNoKHRoaXMuaCksdC5qb2luKFwiLVwiKX0sUm8ucHJvdG90eXBlLlQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ofSxSby5wcm90b3R5cGUudz1mdW5jdGlvbigpe3JldHVybnt0eXBlOnRoaXMuYyxldmVudElkOnRoaXMuYix1cmxSZXNwb25zZTp0aGlzLmcsc2Vzc2lvbklkOnRoaXMuZixwb3N0Qm9keTp0aGlzLmksdGVuYW50SWQ6dGhpcy5oLGVycm9yOnRoaXMuYSYmdGhpcy5hLncoKX19O3ZhciBEbyx4bz1udWxsO2Z1bmN0aW9uIExvKHQpe3ZhciBlPVwidW5hdXRob3JpemVkLWRvbWFpblwiLG49dm9pZCAwLHI9QW4odCk7dD1yLmEsXCJjaHJvbWUtZXh0ZW5zaW9uXCI9PShyPXIuYyk/bj1GdChcIlRoaXMgY2hyb21lIGV4dGVuc2lvbiBJRCAoY2hyb21lLWV4dGVuc2lvbjovLyVzKSBpcyBub3QgYXV0aG9yaXplZCB0byBydW4gdGhpcyBvcGVyYXRpb24uIEFkZCBpdCB0byB0aGUgT0F1dGggcmVkaXJlY3QgZG9tYWlucyBsaXN0IGluIHRoZSBGaXJlYmFzZSBjb25zb2xlIC0+IEF1dGggc2VjdGlvbiAtPiBTaWduIGluIG1ldGhvZCB0YWIuXCIsdCk6XCJodHRwXCI9PXJ8fFwiaHR0cHNcIj09cj9uPUZ0KFwiVGhpcyBkb21haW4gKCVzKSBpcyBub3QgYXV0aG9yaXplZCB0byBydW4gdGhpcyBvcGVyYXRpb24uIEFkZCBpdCB0byB0aGUgT0F1dGggcmVkaXJlY3QgZG9tYWlucyBsaXN0IGluIHRoZSBGaXJlYmFzZSBjb25zb2xlIC0+IEF1dGggc2VjdGlvbiAtPiBTaWduIGluIG1ldGhvZCB0YWIuXCIsdCk6ZT1cIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIixJLmNhbGwodGhpcyxlLG4pfWZ1bmN0aW9uIE1vKHQsZSxuKXtJLmNhbGwodGhpcyx0LG4pLCh0PWV8fHt9KS5KYiYmanIodGhpcyxcImVtYWlsXCIsdC5KYiksdC5lYSYmanIodGhpcyxcInBob25lTnVtYmVyXCIsdC5lYSksdC5jcmVkZW50aWFsJiZqcih0aGlzLFwiY3JlZGVudGlhbFwiLHQuY3JlZGVudGlhbCksdC5aYiYmanIodGhpcyxcInRlbmFudElkXCIsdC5aYil9ZnVuY3Rpb24gRm8odCl7aWYodC5jb2RlKXt2YXIgZT10LmNvZGV8fFwiXCI7MD09ZS5pbmRleE9mKFMpJiYoZT1lLnN1YnN0cmluZyhTLmxlbmd0aCkpO3ZhciBuPXtjcmVkZW50aWFsOk5vKHQpLFpiOnQudGVuYW50SWR9O2lmKHQuZW1haWwpbi5KYj10LmVtYWlsO2Vsc2UgaWYodC5waG9uZU51bWJlciluLmVhPXQucGhvbmVOdW1iZXI7ZWxzZSBpZighbi5jcmVkZW50aWFsKXJldHVybiBuZXcgSShlLHQubWVzc2FnZXx8dm9pZCAwKTtyZXR1cm4gbmV3IE1vKGUsbix0Lm1lc3NhZ2UpfXJldHVybiBudWxsfWZ1bmN0aW9uIFVvKCl7fWZ1bmN0aW9uIGpvKHQpe3JldHVybiB0LmN8fCh0LmM9dC5iKCkpfWZ1bmN0aW9uIHFvKCl7fWZ1bmN0aW9uIFZvKHQpe2lmKHQuZnx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0fHxcInVuZGVmaW5lZFwiPT10eXBlb2YgQWN0aXZlWE9iamVjdClyZXR1cm4gdC5mO2Zvcih2YXIgZT1bXCJNU1hNTDIuWE1MSFRUUC42LjBcIixcIk1TWE1MMi5YTUxIVFRQLjMuMFwiLFwiTVNYTUwyLlhNTEhUVFBcIixcIk1pY3Jvc29mdC5YTUxIVFRQXCJdLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTt0cnl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KHIpLHQuZj1yfWNhdGNoKHQpe319dGhyb3cgRXJyb3IoXCJDb3VsZCBub3QgY3JlYXRlIEFjdGl2ZVhPYmplY3QuIEFjdGl2ZVggbWlnaHQgYmUgZGlzYWJsZWQsIG9yIE1TWE1MIG1pZ2h0IG5vdCBiZSBpbnN0YWxsZWRcIil9ZnVuY3Rpb24gQm8oKXt9ZnVuY3Rpb24gS28oKXt0aGlzLmE9bmV3IFhEb21haW5SZXF1ZXN0LHRoaXMucmVhZHlTdGF0ZT0wLHRoaXMub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsdGhpcy5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVRleHQ9dGhpcy5yZXNwb25zZT1cIlwiLHRoaXMuc3RhdHVzPS0xLHRoaXMuc3RhdHVzVGV4dD1cIlwiLHRoaXMuYS5vbmxvYWQ9bSh0aGlzLnFjLHRoaXMpLHRoaXMuYS5vbmVycm9yPW0odGhpcy5TYix0aGlzKSx0aGlzLmEub25wcm9ncmVzcz1tKHRoaXMucmMsdGhpcyksdGhpcy5hLm9udGltZW91dD1tKHRoaXMudmMsdGhpcyl9ZnVuY3Rpb24gV28odCxlKXt0LnJlYWR5U3RhdGU9ZSx0Lm9ucmVhZHlzdGF0ZWNoYW5nZSYmdC5vbnJlYWR5c3RhdGVjaGFuZ2UoKX1mdW5jdGlvbiBIbyh0LGUsbil7dGhpcy5yZXNldCh0LGUsbix2b2lkIDAsdm9pZCAwKX1mdW5jdGlvbiBHbyh0KXt0aGlzLmY9dCx0aGlzLmI9dGhpcy5jPXRoaXMuYT1udWxsfWZ1bmN0aW9uIHpvKHQsZSl7dGhpcy5uYW1lPXQsdGhpcy52YWx1ZT1lfV8oTG8sSSksXyhNbyxJKSxNby5wcm90b3R5cGUudz1mdW5jdGlvbigpe3ZhciB0PXtjb2RlOnRoaXMuY29kZSxtZXNzYWdlOnRoaXMubWVzc2FnZX07dGhpcy5lbWFpbCYmKHQuZW1haWw9dGhpcy5lbWFpbCksdGhpcy5waG9uZU51bWJlciYmKHQucGhvbmVOdW1iZXI9dGhpcy5waG9uZU51bWJlciksdGhpcy50ZW5hbnRJZCYmKHQudGVuYW50SWQ9dGhpcy50ZW5hbnRJZCk7dmFyIGU9dGhpcy5jcmVkZW50aWFsJiZ0aGlzLmNyZWRlbnRpYWwudygpO3JldHVybiBlJiZsdCh0LGUpLHR9LE1vLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53KCl9LFVvLnByb3RvdHlwZS5jPW51bGwsXyhxbyxVbykscW8ucHJvdG90eXBlLmE9ZnVuY3Rpb24oKXt2YXIgdD1Wbyh0aGlzKTtyZXR1cm4gdD9uZXcgQWN0aXZlWE9iamVjdCh0KTpuZXcgWE1MSHR0cFJlcXVlc3R9LHFvLnByb3RvdHlwZS5iPWZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIFZvKHRoaXMpJiYodFswXT0hMCx0WzFdPSEwKSx0fSxEbz1uZXcgcW8sXyhCbyxVbyksQm8ucHJvdG90eXBlLmE9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgWE1MSHR0cFJlcXVlc3Q7aWYoXCJ3aXRoQ3JlZGVudGlhbHNcImluIHQpcmV0dXJuIHQ7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhEb21haW5SZXF1ZXN0KXJldHVybiBuZXcgS287dGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBicm93c2VyXCIpfSxCby5wcm90b3R5cGUuYj1mdW5jdGlvbigpe3JldHVybnt9fSwodD1Lby5wcm90b3R5cGUpLm9wZW49ZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPW4mJiFuKXRocm93IEVycm9yKFwiT25seSBhc3luYyByZXF1ZXN0cyBhcmUgc3VwcG9ydGVkLlwiKTt0aGlzLmEub3Blbih0LGUpfSx0LnNlbmQ9ZnVuY3Rpb24odCl7aWYodCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpdGhyb3cgRXJyb3IoXCJPbmx5IHN0cmluZyBkYXRhIGlzIHN1cHBvcnRlZFwiKTt0aGlzLmEuc2VuZCh0KX1lbHNlIHRoaXMuYS5zZW5kKCl9LHQuYWJvcnQ9ZnVuY3Rpb24oKXt0aGlzLmEuYWJvcnQoKX0sdC5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKCl7fSx0LmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKHQpe3JldHVyblwiY29udGVudC10eXBlXCI9PXQudG9Mb3dlckNhc2UoKT90aGlzLmEuY29udGVudFR5cGU6XCJcIn0sdC5xYz1mdW5jdGlvbigpe3RoaXMuc3RhdHVzPTIwMCx0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMuYS5yZXNwb25zZVRleHQsV28odGhpcyw0KX0sdC5TYj1mdW5jdGlvbigpe3RoaXMuc3RhdHVzPTUwMCx0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCIsV28odGhpcyw0KX0sdC52Yz1mdW5jdGlvbigpe3RoaXMuU2IoKX0sdC5yYz1mdW5jdGlvbigpe3RoaXMuc3RhdHVzPTIwMCxXbyh0aGlzLDEpfSx0LmdldEFsbFJlc3BvbnNlSGVhZGVycz1mdW5jdGlvbigpe3JldHVyblwiY29udGVudC10eXBlOiBcIit0aGlzLmEuY29udGVudFR5cGV9LEhvLnByb3RvdHlwZS5hPW51bGwsSG8ucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKHQsZSxuLHIsaSl7ZGVsZXRlIHRoaXMuYX0sem8ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX07dmFyIFFvPW5ldyB6byhcIlNFVkVSRVwiLDFlMyksWW89bmV3IHpvKFwiV0FSTklOR1wiLDkwMCksWG89bmV3IHpvKFwiQ09ORklHXCIsNzAwKSxKbz1uZXcgem8oXCJGSU5FXCIsNTAwKTtHby5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKHQsZSxuKXtpZih0LnZhbHVlPj1mdW5jdGlvbiB0KGUpe3JldHVybiBlLmN8fChlLmE/dChlLmEpOihPKFwiUm9vdCBsb2dnZXIgaGFzIG5vIGxldmVsIHNldC5cIiksbnVsbCkpfSh0aGlzKS52YWx1ZSlmb3IodihlKSYmKGU9ZSgpKSx0PW5ldyBIbyh0LFN0cmluZyhlKSx0aGlzLmYpLG4mJih0LmE9biksbj10aGlzO247KW49bi5hfTt2YXIgJG8sWm89e30sdGE9bnVsbDtmdW5jdGlvbiBlYSh0KXt2YXIgZSxuLHI7cmV0dXJuIHRhfHwodGE9bmV3IEdvKFwiXCIpLChab1tcIlwiXT10YSkuYz1YbyksKGU9Wm9bdF0pfHwoZT1uZXcgR28odCkscj10Lmxhc3RJbmRleE9mKFwiLlwiKSxuPXQuc3Vic3RyKHIrMSksKHI9ZWEodC5zdWJzdHIoMCxyKSkpLmJ8fChyLmI9e30pLChyLmJbbl09ZSkuYT1yLFpvW3RdPWUpLGV9ZnVuY3Rpb24gbmEodCxlKXt0JiZ0LmxvZyhKbyxlLHZvaWQgMCl9ZnVuY3Rpb24gcmEodCl7dGhpcy5mPXR9ZnVuY3Rpb24gaWEodCl7bG4uY2FsbCh0aGlzKSx0aGlzLnU9dCx0aGlzLmg9dm9pZCAwLHRoaXMucmVhZHlTdGF0ZT1vYSx0aGlzLnN0YXR1cz0wLHRoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCIsdGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCx0aGlzLmw9bmV3IEhlYWRlcnMsdGhpcy5iPW51bGwsdGhpcy5zPVwiR0VUXCIsdGhpcy5mPVwiXCIsdGhpcy5hPSExLHRoaXMuaT1lYShcImdvb2cubmV0LkZldGNoWG1sSHR0cFwiKSx0aGlzLm09dGhpcy5jPXRoaXMuZz1udWxsfV8ocmEsVW8pLHJhLnByb3RvdHlwZS5hPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpYSh0aGlzLmYpfSxyYS5wcm90b3R5cGUuYj0oJG89e30sZnVuY3Rpb24oKXtyZXR1cm4gJG99KSxfKGlhLGxuKTt2YXIgb2E9MDtmdW5jdGlvbiBhYSh0KXt0LmMucmVhZCgpLnRoZW4odC5wYy5iaW5kKHQpKS5jYXRjaCh0LlVhLmJpbmQodCkpfWZ1bmN0aW9uIHNhKHQpe3QucmVhZHlTdGF0ZT00LHQuZz1udWxsLHQuYz1udWxsLHQubT1udWxsLHVhKHQpfWZ1bmN0aW9uIHVhKHQpe3Qub25yZWFkeXN0YXRlY2hhbmdlJiZ0Lm9ucmVhZHlzdGF0ZWNoYW5nZS5jYWxsKHQpfWZ1bmN0aW9uIGNhKHQpe2xuLmNhbGwodGhpcyksdGhpcy5oZWFkZXJzPW5ldyBibix0aGlzLkQ9dHx8bnVsbCx0aGlzLmM9ITEsdGhpcy5DPXRoaXMuYT1udWxsLHRoaXMuaD10aGlzLlI9dGhpcy5sPVwiXCIsdGhpcy5mPXRoaXMuTz10aGlzLmk9dGhpcy5KPSExLHRoaXMuZz0wLHRoaXMucz1udWxsLHRoaXMubT1oYSx0aGlzLnU9dGhpcy5TPSExfSh0PWlhLnByb3RvdHlwZSkub3Blbj1mdW5jdGlvbih0LGUpe2lmKHRoaXMucmVhZHlTdGF0ZSE9b2EpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwiRXJyb3IgcmVvcGVuaW5nIGEgY29ubmVjdGlvblwiKTt0aGlzLnM9dCx0aGlzLmY9ZSx0aGlzLnJlYWR5U3RhdGU9MSx1YSh0aGlzKX0sdC5zZW5kPWZ1bmN0aW9uKHQpe2lmKDEhPXRoaXMucmVhZHlTdGF0ZSl0aHJvdyB0aGlzLmFib3J0KCksRXJyb3IoXCJuZWVkIHRvIGNhbGwgb3BlbigpIGZpcnN0LiBcIik7dGhpcy5hPSEwO3ZhciBlPXtoZWFkZXJzOnRoaXMubCxtZXRob2Q6dGhpcy5zLGNyZWRlbnRpYWxzOnRoaXMuaCxjYWNoZTp2b2lkIDB9O3QmJihlLmJvZHk9dCksdGhpcy51LmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuZixlKSkudGhlbih0aGlzLnVjLmJpbmQodGhpcyksdGhpcy5VYS5iaW5kKHRoaXMpKX0sdC5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIix0aGlzLmw9bmV3IEhlYWRlcnMsdGhpcy5zdGF0dXM9MCx0aGlzLmMmJnRoaXMuYy5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKSwxPD10aGlzLnJlYWR5U3RhdGUmJnRoaXMuYSYmNCE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5hPSExLHNhKHRoaXMpKSx0aGlzLnJlYWR5U3RhdGU9b2F9LHQudWM9ZnVuY3Rpb24odCl7dGhpcy5hJiYodGhpcy5nPXQsdGhpcy5ifHwodGhpcy5zdGF0dXM9dGhpcy5nLnN0YXR1cyx0aGlzLnN0YXR1c1RleHQ9dGhpcy5nLnN0YXR1c1RleHQsdGhpcy5iPXQuaGVhZGVycyx0aGlzLnJlYWR5U3RhdGU9Mix1YSh0aGlzKSksdGhpcy5hJiYodGhpcy5yZWFkeVN0YXRlPTMsdWEodGhpcyksdGhpcy5hJiYoXCJhcnJheWJ1ZmZlclwiPT09dGhpcy5yZXNwb25zZVR5cGU/dC5hcnJheUJ1ZmZlcigpLnRoZW4odGhpcy5zYy5iaW5kKHRoaXMpLHRoaXMuVWEuYmluZCh0aGlzKSk6dm9pZCAwIT09bC5SZWFkYWJsZVN0cmVhbSYmXCJib2R5XCJpbiB0Pyh0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCIsdGhpcy5jPXQuYm9keS5nZXRSZWFkZXIoKSx0aGlzLm09bmV3IFRleHREZWNvZGVyLGFhKHRoaXMpKTp0LnRleHQoKS50aGVuKHRoaXMudGMuYmluZCh0aGlzKSx0aGlzLlVhLmJpbmQodGhpcykpKSkpfSx0LnBjPWZ1bmN0aW9uKHQpe3ZhciBlO3RoaXMuYSYmKChlPXRoaXMubS5kZWNvZGUodC52YWx1ZXx8bmV3IFVpbnQ4QXJyYXkoMCkse3N0cmVhbTohdC5kb25lfSkpJiYodGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dCs9ZSksKHQuZG9uZT9zYTp1YSkodGhpcyksMz09dGhpcy5yZWFkeVN0YXRlJiZhYSh0aGlzKSl9LHQudGM9ZnVuY3Rpb24odCl7dGhpcy5hJiYodGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD10LHNhKHRoaXMpKX0sdC5zYz1mdW5jdGlvbih0KXt0aGlzLmEmJih0aGlzLnJlc3BvbnNlPXQsc2EodGhpcykpfSx0LlVhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaTtlJiZlLmxvZyhZbyxcIkZhaWxlZCB0byBmZXRjaCB1cmwgXCIrdGhpcy5mLHQgaW5zdGFuY2VvZiBFcnJvcj90OkVycm9yKHQpKSx0aGlzLmEmJnNhKHRoaXMpfSx0LnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24odCxlKXt0aGlzLmwuYXBwZW5kKHQsZSl9LHQuZ2V0UmVzcG9uc2VIZWFkZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYj90aGlzLmIuZ2V0KHQudG9Mb3dlckNhc2UoKSl8fFwiXCI6KCh0PXRoaXMuaSkmJnQubG9nKFlvLFwiQXR0ZW1wdGluZyB0byBnZXQgcmVzcG9uc2UgaGVhZGVyIGJ1dCBubyBoZWFkZXJzIGhhdmUgYmVlbiByZWNlaXZlZCBmb3IgdXJsOiBcIit0aGlzLmYsdm9pZCAwKSxcIlwiKX0sdC5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtpZighdGhpcy5iKXt2YXIgdD10aGlzLmk7cmV0dXJuIHQmJnQubG9nKFlvLFwiQXR0ZW1wdGluZyB0byBnZXQgYWxsIHJlc3BvbnNlIGhlYWRlcnMgYnV0IG5vIGhlYWRlcnMgaGF2ZSBiZWVuIHJlY2VpdmVkIGZvciB1cmw6IFwiK3RoaXMuZix2b2lkIDApLFwiXCJ9Zm9yKHZhciB0PVtdLGU9dGhpcy5iLmVudHJpZXMoKSxuPWUubmV4dCgpOyFuLmRvbmU7KW49bi52YWx1ZSx0LnB1c2goblswXStcIjogXCIrblsxXSksbj1lLm5leHQoKTtyZXR1cm4gdC5qb2luKFwiXFxyXFxuXCIpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaWEucHJvdG90eXBlLFwid2l0aENyZWRlbnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVyblwiaW5jbHVkZVwiPT09dGhpcy5ofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5oPXQ/XCJpbmNsdWRlXCI6XCJzYW1lLW9yaWdpblwifX0pLF8oY2EsbG4pO3ZhciBoYT1cIlwiO2NhLnByb3RvdHlwZS5iPWVhKFwiZ29vZy5uZXQuWGhySW9cIik7dmFyIGxhPS9eaHR0cHM/JC9pLGZhPVtcIlBPU1RcIixcIlBVVFwiXTtmdW5jdGlvbiBwYShlLHQsbixyLGkpe2lmKGUuYSl0aHJvdyBFcnJvcihcIltnb29nLm5ldC5YaHJJb10gT2JqZWN0IGlzIGFjdGl2ZSB3aXRoIGFub3RoZXIgcmVxdWVzdD1cIitlLmwrXCI7IG5ld1VyaT1cIit0KTtuPW4/bi50b1VwcGVyQ2FzZSgpOlwiR0VUXCIsZS5sPXQsZS5oPVwiXCIsZS5SPW4sZS5KPSExLGUuYz0hMCxlLmE9KGUuRHx8RG8pLmEoKSxlLkM9ZS5EP2pvKGUuRCk6am8oRG8pLGUuYS5vbnJlYWR5c3RhdGVjaGFuZ2U9bShlLlZiLGUpO3RyeXtuYShlLmIsSWEoZSxcIk9wZW5pbmcgWGhyXCIpKSxlLk89ITAsZS5hLm9wZW4obixTdHJpbmcodCksITApLGUuTz0hMX1jYXRjaCh0KXtyZXR1cm4gbmEoZS5iLElhKGUsXCJFcnJvciBvcGVuaW5nIFhocjogXCIrdC5tZXNzYWdlKSksdm9pZCB2YShlLHQpfXQ9cnx8XCJcIjt2YXIgbyxhPW5ldyBibihlLmhlYWRlcnMpO2kmJmZ1bmN0aW9uKHQsZSl7aWYodC5mb3JFYWNoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmZvckVhY2gpdC5mb3JFYWNoKGUsdm9pZCAwKTtlbHNlIGlmKGQodCl8fFwic3RyaW5nXCI9PXR5cGVvZiB0KWoodCxlLHZvaWQgMCk7ZWxzZSBmb3IodmFyIG49bW4odCkscj15bih0KSxpPXIubGVuZ3RoLG89MDtvPGk7bysrKWUuY2FsbCh2b2lkIDAscltvXSxuJiZuW29dLHQpfShpLGZ1bmN0aW9uKHQsZSl7YS5zZXQoZSx0KX0pLGk9ZnVuY3Rpb24odCl7dDp7Zm9yKHZhciBlPWRhLG49dC5sZW5ndGgscj1cInN0cmluZ1wiPT10eXBlb2YgdD90LnNwbGl0KFwiXCIpOnQsaT0wO2k8bjtpKyspaWYoaSBpbiByJiZlLmNhbGwodm9pZCAwLHJbaV0saSx0KSl7ZT1pO2JyZWFrIHR9ZT0tMX1yZXR1cm4gZTwwP251bGw6XCJzdHJpbmdcIj09dHlwZW9mIHQ/dC5jaGFyQXQoZSk6dFtlXX0oYS5ZKCkpLHI9bC5Gb3JtRGF0YSYmdCBpbnN0YW5jZW9mIGwuRm9ybURhdGEsIUsoZmEsbil8fGl8fHJ8fGEuc2V0KFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOFwiKSxhLmZvckVhY2goZnVuY3Rpb24odCxlKXt0aGlzLmEuc2V0UmVxdWVzdEhlYWRlcihlLHQpfSxlKSxlLm0mJihlLmEucmVzcG9uc2VUeXBlPWUubSksXCJ3aXRoQ3JlZGVudGlhbHNcImluIGUuYSYmZS5hLndpdGhDcmVkZW50aWFscyE9PWUuUyYmKGUuYS53aXRoQ3JlZGVudGlhbHM9ZS5TKTt0cnl7YmEoZSksMDxlLmcmJihlLnU9KG89ZS5hLEJ0JiZKdCg5KSYmXCJudW1iZXJcIj09dHlwZW9mIG8udGltZW91dCYmdm9pZCAwIT09by5vbnRpbWVvdXQpLG5hKGUuYixJYShlLFwiV2lsbCBhYm9ydCBhZnRlciBcIitlLmcrXCJtcyBpZiBpbmNvbXBsZXRlLCB4aHIyIFwiK2UudSkpLGUudT8oZS5hLnRpbWVvdXQ9ZS5nLGUuYS5vbnRpbWVvdXQ9bShlLk1hLGUpKTplLnM9dm4oZS5NYSxlLmcsZSkpLG5hKGUuYixJYShlLFwiU2VuZGluZyByZXF1ZXN0XCIpKSxlLmk9ITAsZS5hLnNlbmQodCksZS5pPSExfWNhdGNoKHQpe25hKGUuYixJYShlLFwiU2VuZCBlcnJvcjogXCIrdC5tZXNzYWdlKSksdmEoZSx0KX19ZnVuY3Rpb24gZGEodCl7cmV0dXJuXCJjb250ZW50LXR5cGVcIj09dC50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIHZhKHQsZSl7dC5jPSExLHQuYSYmKHQuZj0hMCx0LmEuYWJvcnQoKSx0LmY9ITEpLHQuaD1lLGdhKHQpLG1hKHQpfWZ1bmN0aW9uIGdhKHQpe3QuSnx8KHQuSj0hMCx0LmRpc3BhdGNoRXZlbnQoXCJjb21wbGV0ZVwiKSx0LmRpc3BhdGNoRXZlbnQoXCJlcnJvclwiKSl9ZnVuY3Rpb24geWEoZSl7aWYoZS5jJiZ2b2lkIDAhPT1oKWlmKGUuQ1sxXSYmND09X2EoZSkmJjI9PXdhKGUpKW5hKGUuYixJYShlLFwiTG9jYWwgcmVxdWVzdCBlcnJvciBkZXRlY3RlZCBhbmQgaWdub3JlZFwiKSk7ZWxzZSBpZihlLmkmJjQ9PV9hKGUpKXZuKGUuVmIsMCxlKTtlbHNlIGlmKGUuZGlzcGF0Y2hFdmVudChcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09X2EoZSkpe25hKGUuYixJYShlLFwiUmVxdWVzdCBjb21wbGV0ZVwiKSksZS5jPSExO3RyeXt2YXIgdCxuLHIsaSxvPXdhKGUpO3Q6c3dpdGNoKG8pe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYT0hMDticmVhayB0O2RlZmF1bHQ6YT0hMX1pZigodD1hKXx8KChuPTA9PT1vKSYmKCEoaT1TdHJpbmcoZS5sKS5tYXRjaChJbilbMV18fG51bGwpJiZsLnNlbGYmJmwuc2VsZi5sb2NhdGlvbiYmKGk9KHI9bC5zZWxmLmxvY2F0aW9uLnByb3RvY29sKS5zdWJzdHIoMCxyLmxlbmd0aC0xKSksbj0hbGEudGVzdChpP2kudG9Mb3dlckNhc2UoKTpcIlwiKSksdD1uKSx0KWUuZGlzcGF0Y2hFdmVudChcImNvbXBsZXRlXCIpLGUuZGlzcGF0Y2hFdmVudChcInN1Y2Nlc3NcIik7ZWxzZXt0cnl7dmFyIHM9MjxfYShlKT9lLmEuc3RhdHVzVGV4dDpcIlwifWNhdGNoKHQpe25hKGUuYixcIkNhbiBub3QgZ2V0IHN0YXR1czogXCIrdC5tZXNzYWdlKSxzPVwiXCJ9ZS5oPXMrXCIgW1wiK3dhKGUpK1wiXVwiLGdhKGUpfX1maW5hbGx5e21hKGUpfX19ZnVuY3Rpb24gbWEoZSx0KXtpZihlLmEpe2JhKGUpO3ZhciBuPWUuYSxyPWUuQ1swXT9hOm51bGw7ZS5hPW51bGwsZS5DPW51bGwsdHx8ZS5kaXNwYXRjaEV2ZW50KFwicmVhZHlcIik7dHJ5e24ub25yZWFkeXN0YXRlY2hhbmdlPXJ9Y2F0Y2godCl7KGU9ZS5iKSYmZS5sb2coUW8sXCJQcm9ibGVtIGVuY291bnRlcmVkIHJlc2V0dGluZyBvbnJlYWR5c3RhdGVjaGFuZ2U6IFwiK3QubWVzc2FnZSx2b2lkIDApfX19ZnVuY3Rpb24gYmEodCl7dC5hJiZ0LnUmJih0LmEub250aW1lb3V0PW51bGwpLHQucyYmKGwuY2xlYXJUaW1lb3V0KHQucyksdC5zPW51bGwpfWZ1bmN0aW9uIF9hKHQpe3JldHVybiB0LmE/dC5hLnJlYWR5U3RhdGU6MH1mdW5jdGlvbiB3YSh0KXt0cnl7cmV0dXJuIDI8X2EodCk/dC5hLnN0YXR1czotMX1jYXRjaCh0KXtyZXR1cm4tMX19ZnVuY3Rpb24gSWEodCxlKXtyZXR1cm4gZStcIiBbXCIrdC5SK1wiIFwiK3QubCtcIiBcIit3YSh0KStcIl1cIn1mdW5jdGlvbiBUYSh0KXt2YXIgZT14YTt0aGlzLmc9W10sdGhpcy51PWUsdGhpcy5zPXR8fG51bGwsdGhpcy5mPXRoaXMuYT0hMSx0aGlzLmM9dm9pZCAwLHRoaXMudj10aGlzLkM9dGhpcy5pPSExLHRoaXMuaD0wLHRoaXMuYj1udWxsLHRoaXMubD0wfWZ1bmN0aW9uIEVhKHQsZSxuKXt0LmE9ITAsdC5jPW4sdC5mPSFlLE5hKHQpfWZ1bmN0aW9uIFNhKHQpe2lmKHQuYSl7aWYoIXQudil0aHJvdyBuZXcgQWE7dC52PSExfX1mdW5jdGlvbiBDYSh0LGUsbixyKXt0LmcucHVzaChbZSxuLHJdKSx0LmEmJk5hKHQpfWZ1bmN0aW9uIGthKHQpe3JldHVybiBCKHQuZyxmdW5jdGlvbih0KXtyZXR1cm4gdih0WzFdKX0pfWZ1bmN0aW9uIE5hKGUpe3ZhciBuO2UuaCYmZS5hJiZrYShlKSYmKHI9ZS5oLChuPU9hW3JdKSYmKGwuY2xlYXJUaW1lb3V0KG4uYSksZGVsZXRlIE9hW3JdKSxlLmg9MCksZS5iJiYoZS5iLmwtLSxkZWxldGUgZS5iKTtmb3IodmFyIHI9ZS5jLHQ9bj0hMTtlLmcubGVuZ3RoJiYhZS5pOyl7dmFyIGk9KGE9ZS5nLnNoaWZ0KCkpWzBdLG89YVsxXSxhPWFbMl07aWYoaT1lLmY/bzppKXRyeXt2YXIgcz1pLmNhbGwoYXx8ZS5zLHIpO3ZvaWQgMCE9PXMmJihlLmY9ZS5mJiYocz09cnx8cyBpbnN0YW5jZW9mIEVycm9yKSxlLmM9cj1zKSwoQShyKXx8XCJmdW5jdGlvblwiPT10eXBlb2YgbC5Qcm9taXNlJiZyIGluc3RhbmNlb2YgbC5Qcm9taXNlKSYmKHQ9ITAsZS5pPSEwKX1jYXRjaCh0KXtyPXQsZS5mPSEwLGthKGUpfHwobj0hMCl9fWUuYz1yLHQmJihzPW0oZS5tLGUsITApLHQ9bShlLm0sZSwhMSksciBpbnN0YW5jZW9mIFRhPyhDYShyLHMsdCksci5DPSEwKTpyLnRoZW4ocyx0KSksbiYmKHI9bmV3IFBhKHIpLE9hW3IuYV09cixlLmg9ci5hKX1mdW5jdGlvbiBBYSgpe1IuY2FsbCh0aGlzKX1mdW5jdGlvbiBSYSgpe1IuY2FsbCh0aGlzKX1mdW5jdGlvbiBQYSh0KXt0aGlzLmE9bC5zZXRUaW1lb3V0KG0odGhpcy5jLHRoaXMpLDApLHRoaXMuYj10fSh0PWNhLnByb3RvdHlwZSkuTWE9ZnVuY3Rpb24oKXt2b2lkIDAhPT1oJiZ0aGlzLmEmJih0aGlzLmg9XCJUaW1lZCBvdXQgYWZ0ZXIgXCIrdGhpcy5nK1wibXMsIGFib3J0aW5nXCIsbmEodGhpcy5iLElhKHRoaXMsdGhpcy5oKSksdGhpcy5kaXNwYXRjaEV2ZW50KFwidGltZW91dFwiKSx0aGlzLmFib3J0KDgpKX0sdC5hYm9ydD1mdW5jdGlvbigpe3RoaXMuYSYmdGhpcy5jJiYobmEodGhpcy5iLElhKHRoaXMsXCJBYm9ydGluZ1wiKSksdGhpcy5jPSExLHRoaXMuZj0hMCx0aGlzLmEuYWJvcnQoKSx0aGlzLmY9ITEsdGhpcy5kaXNwYXRjaEV2ZW50KFwiY29tcGxldGVcIiksdGhpcy5kaXNwYXRjaEV2ZW50KFwiYWJvcnRcIiksbWEodGhpcykpfSx0LkRhPWZ1bmN0aW9uKCl7dGhpcy5hJiYodGhpcy5jJiYodGhpcy5jPSExLHRoaXMuZj0hMCx0aGlzLmEuYWJvcnQoKSx0aGlzLmY9ITEpLG1hKHRoaXMsITApKSxjYS5hYi5EYS5jYWxsKHRoaXMpfSx0LlZiPWZ1bmN0aW9uKCl7dGhpcy54YXx8KHRoaXMuT3x8dGhpcy5pfHx0aGlzLmY/eWEodGhpcyk6dGhpcy5KYygpKX0sdC5KYz1mdW5jdGlvbigpe3lhKHRoaXMpfSx0LmdldFJlc3BvbnNlPWZ1bmN0aW9uKCl7dHJ5e2lmKCF0aGlzLmEpcmV0dXJuIG51bGw7aWYoXCJyZXNwb25zZVwiaW4gdGhpcy5hKXJldHVybiB0aGlzLmEucmVzcG9uc2U7c3dpdGNoKHRoaXMubSl7Y2FzZSBoYTpjYXNlXCJ0ZXh0XCI6cmV0dXJuIHRoaXMuYS5yZXNwb25zZVRleHQ7Y2FzZVwiYXJyYXlidWZmZXJcIjppZihcIm1velJlc3BvbnNlQXJyYXlCdWZmZXJcImluIHRoaXMuYSlyZXR1cm4gdGhpcy5hLm1velJlc3BvbnNlQXJyYXlCdWZmZXJ9dmFyIHQ9dGhpcy5iO3JldHVybiB0JiZ0LmxvZyhRbyxcIlJlc3BvbnNlIHR5cGUgXCIrdGhpcy5tK1wiIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyXCIsdm9pZCAwKSxudWxsfWNhdGNoKHQpe3JldHVybiBuYSh0aGlzLmIsXCJDYW4gbm90IGdldCByZXNwb25zZTogXCIrdC5tZXNzYWdlKSxudWxsfX0sVGEucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbih0KXt2YXIgZTt0aGlzLmE/dGhpcy5jIGluc3RhbmNlb2YgVGEmJnRoaXMuYy5jYW5jZWwoKToodGhpcy5iJiYoZT10aGlzLmIsZGVsZXRlIHRoaXMuYix0P2UuY2FuY2VsKHQpOihlLmwtLSxlLmw8PTAmJmUuY2FuY2VsKCkpKSx0aGlzLnU/dGhpcy51LmNhbGwodGhpcy5zLHRoaXMpOnRoaXMudj0hMCx0aGlzLmF8fCh0PW5ldyBSYSxTYSh0aGlzKSxFYSh0aGlzLCExLHQpKSl9LFRhLnByb3RvdHlwZS5tPWZ1bmN0aW9uKHQsZSl7dGhpcy5pPSExLEVhKHRoaXMsdCxlKX0sVGEucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz1uZXcgZmUoZnVuY3Rpb24odCxlKXtyPXQsaT1lfSk7cmV0dXJuIENhKHRoaXMscixmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgUmE/by5jYW5jZWwoKTppKHQpfSksby50aGVuKHQsZSxuKX0sVGEucHJvdG90eXBlLiRnb29nX1RoZW5hYmxlPSEwLF8oQWEsUiksQWEucHJvdG90eXBlLm1lc3NhZ2U9XCJEZWZlcnJlZCBoYXMgYWxyZWFkeSBmaXJlZFwiLEFhLnByb3RvdHlwZS5uYW1lPVwiQWxyZWFkeUNhbGxlZEVycm9yXCIsXyhSYSxSKSxSYS5wcm90b3R5cGUubWVzc2FnZT1cIkRlZmVycmVkIHdhcyBjYW5jZWxlZFwiLFJhLnByb3RvdHlwZS5uYW1lPVwiQ2FuY2VsZWRFcnJvclwiLFBhLnByb3RvdHlwZS5jPWZ1bmN0aW9uKCl7dGhyb3cgZGVsZXRlIE9hW3RoaXMuYV0sdGhpcy5ifTt2YXIgT2E9e307ZnVuY3Rpb24gRGEodCl7dmFyIGU9ZG9jdW1lbnQsbj1fdCh0KS50b1N0cmluZygpLHI9YWUoZG9jdW1lbnQsXCJTQ1JJUFRcIiksaT17V2I6cixNYTp2b2lkIDB9LG89bmV3IFRhKGkpLGE9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtMYShyLCEwKTt2YXIgdD1uZXcgVWEoRmEsXCJUaW1lb3V0IHJlYWNoZWQgZm9yIGxvYWRpbmcgc2NyaXB0IFwiK24pO1NhKG8pLEVhKG8sITEsdCl9LDVlMyk7cmV0dXJuIGkuTWE9YSxyLm9ubG9hZD1yLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3IucmVhZHlTdGF0ZSYmXCJsb2FkZWRcIiE9ci5yZWFkeVN0YXRlJiZcImNvbXBsZXRlXCIhPXIucmVhZHlTdGF0ZXx8KExhKHIsITEsYSksU2EobyksRWEobywhMCxudWxsKSl9LHIub25lcnJvcj1mdW5jdGlvbigpe0xhKHIsITAsYSk7dmFyIHQ9bmV3IFVhKE1hLFwiRXJyb3Igd2hpbGUgbG9hZGluZyBzY3JpcHQgXCIrbik7U2EobyksRWEobywhMSx0KX0sbHQoaT17fSx7dHlwZTpcInRleHQvamF2YXNjcmlwdFwiLGNoYXJzZXQ6XCJVVEYtOFwifSksZWUocixpKSxpPXQsZnQodD1yLFwiSFRNTFNjcmlwdEVsZW1lbnRcIiksdC5zcmM9X3QoaSksKGk9KGk9dC5vd25lckRvY3VtZW50JiZ0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpJiZpIT1sP2YoaS5kb2N1bWVudCk6cz1udWxsPT09cz9mKGwuZG9jdW1lbnQpOnMpJiZ0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsaSksKChlPSgoaT1lKXx8ZG9jdW1lbnQpLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiSEVBRFwiKSkmJjAhPWUubGVuZ3RoP2VbMF06aS5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHIpLG99ZnVuY3Rpb24geGEoKXt2YXIgdDt0aGlzJiZ0aGlzLldiJiYoKHQ9dGhpcy5XYikmJlwiU0NSSVBUXCI9PXQudGFnTmFtZSYmTGEodCwhMCx0aGlzLk1hKSl9ZnVuY3Rpb24gTGEodCxlLG4pe251bGwhPW4mJmwuY2xlYXJUaW1lb3V0KG4pLHQub25sb2FkPWEsdC5vbmVycm9yPWEsdC5vbnJlYWR5c3RhdGVjaGFuZ2U9YSxlJiZ3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3QmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpfSwwKX12YXIgTWE9MCxGYT0xO2Z1bmN0aW9uIFVhKHQsZSl7dmFyIG49XCJKc2xvYWRlciBlcnJvciAoY29kZSAjXCIrdCtcIilcIjtlJiYobis9XCI6IFwiK2UpLFIuY2FsbCh0aGlzLG4pLHRoaXMuY29kZT10fWZ1bmN0aW9uIGphKHQpe3RoaXMuZj10fWZ1bmN0aW9uIHFhKHQsZSxuKXtpZih0aGlzLmM9dCx0PWV8fHt9LHRoaXMubD10LnNlY3VyZVRva2VuRW5kcG9pbnR8fFwiaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGVhcGlzLmNvbS92MS90b2tlblwiLHRoaXMubT10LnNlY3VyZVRva2VuVGltZW91dHx8S2EsdGhpcy5nPWN0KHQuc2VjdXJlVG9rZW5IZWFkZXJzfHxXYSksdGhpcy5oPXQuZmlyZWJhc2VFbmRwb2ludHx8XCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9pZGVudGl0eXRvb2xraXQvdjMvcmVseWluZ3BhcnR5L1wiLHRoaXMuaT10LmlkZW50aXR5UGxhdGZvcm1FbmRwb2ludHx8XCJodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbS92Mi9cIix0aGlzLnY9dC5maXJlYmFzZVRpbWVvdXR8fEhhLHRoaXMuYT1jdCh0LmZpcmViYXNlSGVhZGVyc3x8R2EpLG4mJih0aGlzLmFbXCJYLUNsaWVudC1WZXJzaW9uXCJdPW4sdGhpcy5nW1wiWC1DbGllbnQtVmVyc2lvblwiXT1uKSxuPVwiTm9kZVwiPT1ocigpLCEobj1sLlhNTEh0dHBSZXF1ZXN0fHxuJiZYbC5JTlRFUk5BTC5ub2RlJiZYbC5JTlRFUk5BTC5ub2RlLlhNTEh0dHBSZXF1ZXN0KSYmIWNyKCkpdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiLFwiVGhlIFhNTEh0dHBSZXF1ZXN0IGNvbXBhdGliaWxpdHkgbGlicmFyeSB3YXMgbm90IGZvdW5kLlwiKTt0aGlzLmY9dm9pZCAwLGNyKCk/dGhpcy5mPW5ldyByYShzZWxmKTpscigpP3RoaXMuZj1uZXcgamEobik6dGhpcy5mPW5ldyBCbyx0aGlzLmI9bnVsbH1fKFVhLFIpLF8oamEsVW8pLGphLnByb3RvdHlwZS5hPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmZ9LGphLnByb3RvdHlwZS5iPWZ1bmN0aW9uKCl7cmV0dXJue319O3ZhciBWYSxCYT1cImlkVG9rZW5cIixLYT1uZXcgUnIoM2U0LDZlNCksV2E9e1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIn0sSGE9bmV3IFJyKDNlNCw2ZTQpLEdhPXtcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwifTtmdW5jdGlvbiB6YSh0LGUpe2U/dC5hW1wiWC1GaXJlYmFzZS1Mb2NhbGVcIl09ZTpkZWxldGUgdC5hW1wiWC1GaXJlYmFzZS1Mb2NhbGVcIl19ZnVuY3Rpb24gUWEodCxlKXtlJiYodC5sPVlhKFwiaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGVhcGlzLmNvbS92MS90b2tlblwiLGUpLHQuaD1ZYShcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2lkZW50aXR5dG9vbGtpdC92My9yZWx5aW5ncGFydHkvXCIsZSksdC5pPVlhKFwiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vdjIvXCIsZSkpfWZ1bmN0aW9uIFlhKHQsZSl7cmV0dXJuIHQ9QW4odCksZT1BbihlLnVybCksdC5mPXQuYSt0LmYsRW4odCxlLmMpLHQuYT1lLmEsU24odCxlLmcpLHQudG9TdHJpbmcoKX1mdW5jdGlvbiBYYSh0LGUpe2U/KHQuYVtcIlgtQ2xpZW50LVZlcnNpb25cIl09ZSx0LmdbXCJYLUNsaWVudC1WZXJzaW9uXCJdPWUpOihkZWxldGUgdC5hW1wiWC1DbGllbnQtVmVyc2lvblwiXSxkZWxldGUgdC5nW1wiWC1DbGllbnQtVmVyc2lvblwiXSl9ZnVuY3Rpb24gSmEodCxlLG4scixpLG8sYSl7dmFyIHM7KHQ9KChzPWRyKHM9eXIoKSk9PXByJiYocz1zLm1hdGNoKC9cXHNDaHJvbWVcXC8oXFxkKykvaSkpJiYyPT1zLmxlbmd0aD9wYXJzZUludChzWzFdLDEwKTpudWxsKSYmczwzMHx8QnQmJiR0JiYhKDk8JHQpKSYmIWNyKCk/KFZhPVZhfHxuZXcgZmUoZnVuY3Rpb24odCxlKXt2YXIgbixyO249dCxyPWUsKCh3aW5kb3cuZ2FwaXx8e30pLmNsaWVudHx8e30pLnJlcXVlc3Q/bigpOihsW1phXT1mdW5jdGlvbigpeygod2luZG93LmdhcGl8fHt9KS5jbGllbnR8fHt9KS5yZXF1ZXN0P24oKTpyKEVycm9yKFwiQ09SU19VTlNVUFBPUlRFRFwiKSl9LGZ1bmN0aW9uKHQsZSl7Q2EodCxudWxsLGUsdm9pZCAwKX0oRGEod3QoJGEse29ubG9hZDpaYX0pKSxmdW5jdGlvbigpe3IoRXJyb3IoXCJDT1JTX1VOU1VQUE9SVEVEXCIpKX0pKX0pLG0odC5zLHQpKTptKHQudSx0KSkoZSxuLHIsaSxvLGEpfXFhLnByb3RvdHlwZS5UPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYn0scWEucHJvdG90eXBlLnU9ZnVuY3Rpb24odCxuLGUscixpLG8pe2lmKGNyKCkmJih2b2lkIDA9PT1sLmZldGNofHx2b2lkIDA9PT1sLkhlYWRlcnN8fHZvaWQgMD09PWwuUmVxdWVzdCkpdGhyb3cgbmV3IEkoXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIsXCJmZXRjaCwgSGVhZGVycyBhbmQgUmVxdWVzdCBuYXRpdmUgQVBJcyBvciBlcXVpdmFsZW50IFBvbHlmaWxscyBtdXN0IGJlIGF2YWlsYWJsZSB0byBzdXBwb3J0IEhUVFAgcmVxdWVzdHMgZnJvbSBhIFdvcmtlciBlbnZpcm9ubWVudC5cIik7dmFyIGEscz1uZXcgY2EodGhpcy5mKTtvJiYocy5nPU1hdGgubWF4KDAsbyksYT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5kaXNwYXRjaEV2ZW50KFwidGltZW91dFwiKX0sbykpLGZuKHMsXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKCl7YSYmY2xlYXJUaW1lb3V0KGEpO3ZhciBlPW51bGw7dHJ5e2U9SlNPTi5wYXJzZShmdW5jdGlvbihlKXt0cnl7cmV0dXJuIGUuYT9lLmEucmVzcG9uc2VUZXh0OlwiXCJ9Y2F0Y2godCl7cmV0dXJuIG5hKGUuYixcIkNhbiBub3QgZ2V0IHJlc3BvbnNlVGV4dDogXCIrdC5tZXNzYWdlKSxcIlwifX0odGhpcykpfHxudWxsfWNhdGNoKHQpe2U9bnVsbH1uJiZuKGUpfSkscG4ocyxcInJlYWR5XCIsZnVuY3Rpb24oKXthJiZjbGVhclRpbWVvdXQoYSksTGUodGhpcyl9KSxwbihzLFwidGltZW91dFwiLGZ1bmN0aW9uKCl7YSYmY2xlYXJUaW1lb3V0KGEpLExlKHRoaXMpLG4mJm4obnVsbCl9KSxwYShzLHQsZSxyLGkpfTt2YXIgJGE9bmV3IHB0KHl0LFwiaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvY2xpZW50LmpzP29ubG9hZD0le29ubG9hZH1cIiksWmE9XCJfX2ZjYlwiK01hdGguZmxvb3IoMWU2Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKCk7ZnVuY3Rpb24gdHModCxlLG4scixpLG8sYSl7dmFyIHM9QW4oZStuKTtrbihzLFwia2V5XCIsdC5jKSxhJiZrbihzLFwiY2JcIixEYXRlLm5vdygpLnRvU3RyaW5nKCkpO3ZhciB1PVwiR0VUXCI9PXI7aWYodSlmb3IodmFyIGMgaW4gaSlpLmhhc093blByb3BlcnR5KGMpJiZrbihzLGMsaVtjXSk7cmV0dXJuIG5ldyBmZShmdW5jdGlvbihlLG4pe0phKHQscy50b1N0cmluZygpLGZ1bmN0aW9uKHQpe3Q/dC5lcnJvcj9uKFlzKHQsb3x8e30pKTplKHQpOm4obmV3IEkoXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIpKX0scix1P3ZvaWQgMDp6bihTcihpKSksdC5hLHQudi5nZXQoKSl9KX1mdW5jdGlvbiBlcyh0KXtpZihcInN0cmluZ1wiIT10eXBlb2YodD10LmVtYWlsKXx8IW9yLnRlc3QodCkpdGhyb3cgbmV3IEkoXCJpbnZhbGlkLWVtYWlsXCIpfWZ1bmN0aW9uIG5zKHQpe1wiZW1haWxcImluIHQmJmVzKHQpfWZ1bmN0aW9uIHJzKHQpe2lmKCF0W0JhXSl7aWYodC5tZmFQZW5kaW5nQ3JlZGVudGlhbCl0aHJvdyBuZXcgSShcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIsbnVsbCxjdCh0KSk7dGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiKX19ZnVuY3Rpb24gaXModCl7aWYodC5waG9uZU51bWJlcnx8dC50ZW1wb3JhcnlQcm9vZil7aWYoIXQucGhvbmVOdW1iZXJ8fCF0LnRlbXBvcmFyeVByb29mKXRocm93IG5ldyBJKFwiaW50ZXJuYWwtZXJyb3JcIil9ZWxzZXtpZighdC5zZXNzaW9uSW5mbyl0aHJvdyBuZXcgSShcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCIpO2lmKCF0LmNvZGUpdGhyb3cgbmV3IEkoXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlXCIpfX1xYS5wcm90b3R5cGUucz1mdW5jdGlvbih0LG4scixpLG8pe3ZhciBhPXRoaXM7VmEudGhlbihmdW5jdGlvbigpe3dpbmRvdy5nYXBpLmNsaWVudC5zZXRBcGlLZXkoYS5jKTt2YXIgZT13aW5kb3cuZ2FwaS5hdXRoLmdldFRva2VuKCk7d2luZG93LmdhcGkuYXV0aC5zZXRUb2tlbihudWxsKSx3aW5kb3cuZ2FwaS5jbGllbnQucmVxdWVzdCh7cGF0aDp0LG1ldGhvZDpyLGJvZHk6aSxoZWFkZXJzOm8sYXV0aFR5cGU6XCJub25lXCIsY2FsbGJhY2s6ZnVuY3Rpb24odCl7d2luZG93LmdhcGkuYXV0aC5zZXRUb2tlbihlKSxuJiZuKHQpfX0pfSkubyhmdW5jdGlvbih0KXtuJiZuKHtlcnJvcjp7bWVzc2FnZTp0JiZ0Lm1lc3NhZ2V8fFwiQ09SU19VTlNVUFBPUlRFRFwifX0pfSl9LHFhLnByb3RvdHlwZS56Yj1mdW5jdGlvbigpe3JldHVybiB6cyh0aGlzLExzLHt9KX0scWEucHJvdG90eXBlLkJiPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHpzKHRoaXMsRHMse2lkVG9rZW46dCxlbWFpbDplfSl9LHFhLnByb3RvdHlwZS5DYj1mdW5jdGlvbih0LGUpe3JldHVybiB6cyh0aGlzLHhzLHtpZFRva2VuOnQscGFzc3dvcmQ6ZX0pfTt2YXIgb3M9e2Rpc3BsYXlOYW1lOlwiRElTUExBWV9OQU1FXCIscGhvdG9Vcmw6XCJQSE9UT19VUkxcIn07ZnVuY3Rpb24gYXModCl7aWYoIXQucGhvbmVWZXJpZmljYXRpb25JbmZvKXRocm93IG5ldyBJKFwiaW50ZXJuYWwtZXJyb3JcIik7aWYoIXQucGhvbmVWZXJpZmljYXRpb25JbmZvLnNlc3Npb25JbmZvKXRocm93IG5ldyBJKFwibWlzc2luZy12ZXJpZmljYXRpb24taWRcIik7aWYoIXQucGhvbmVWZXJpZmljYXRpb25JbmZvLmNvZGUpdGhyb3cgbmV3IEkoXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlXCIpfWZ1bmN0aW9uIHNzKHQpe2lmKCF0LnJlcXVlc3RVcml8fCF0LnNlc3Npb25JZCYmIXQucG9zdEJvZHkmJiF0LnBlbmRpbmdUb2tlbil0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIpfWZ1bmN0aW9uIHVzKHQsZSl7cmV0dXJuIGUub2F1dGhJZFRva2VuJiZlLnByb3ZpZGVySWQmJjA9PWUucHJvdmlkZXJJZC5pbmRleE9mKFwib2lkYy5cIikmJiFlLnBlbmRpbmdUb2tlbiYmKHQuc2Vzc2lvbklkP2Uubm9uY2U9dC5zZXNzaW9uSWQ6dC5wb3N0Qm9keSYmKEtuKHQ9bmV3IGpuKHQucG9zdEJvZHkpLFwibm9uY2VcIikmJihlLm5vbmNlPXQuZ2V0KFwibm9uY2VcIikpKSksZX1mdW5jdGlvbiBjcyh0KXt2YXIgZT1udWxsO2lmKHQubmVlZENvbmZpcm1hdGlvbj8odC5jb2RlPVwiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiLGU9Rm8odCkpOlwiRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRURcIj09dC5lcnJvck1lc3NhZ2U/KHQuY29kZT1cImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIixlPUZvKHQpKTpcIkVNQUlMX0VYSVNUU1wiPT10LmVycm9yTWVzc2FnZT8odC5jb2RlPVwiZW1haWwtYWxyZWFkeS1pbi11c2VcIixlPUZvKHQpKTp0LmVycm9yTWVzc2FnZSYmKGU9UXModC5lcnJvck1lc3NhZ2UpKSxlKXRocm93IGU7cnModCl9ZnVuY3Rpb24gaHModCxlKXtyZXR1cm4gZS5yZXR1cm5JZHBDcmVkZW50aWFsPSEwLHpzKHQsVXMsZSl9ZnVuY3Rpb24gbHModCxlKXtyZXR1cm4gZS5yZXR1cm5JZHBDcmVkZW50aWFsPSEwLHpzKHQscXMsZSl9ZnVuY3Rpb24gZnModCxlKXtyZXR1cm4gZS5yZXR1cm5JZHBDcmVkZW50aWFsPSEwLGUuYXV0b0NyZWF0ZT0hMSx6cyh0LGpzLGUpfWZ1bmN0aW9uIHBzKHQpe2lmKCF0Lm9vYkNvZGUpdGhyb3cgbmV3IEkoXCJpbnZhbGlkLWFjdGlvbi1jb2RlXCIpfSh0PXFhLnByb3RvdHlwZSkuRGI9ZnVuY3Rpb24odCxyKXt2YXIgaT17aWRUb2tlbjp0fSxvPVtdO3JldHVybiBzdChvcyxmdW5jdGlvbih0LGUpe3ZhciBuPXJbZV07bnVsbD09PW4/by5wdXNoKHQpOmUgaW4gciYmKGlbZV09bil9KSxvLmxlbmd0aCYmKGkuZGVsZXRlQXR0cmlidXRlPW8pLHpzKHRoaXMsRHMsaSl9LHQudmI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbHQodD17cmVxdWVzdFR5cGU6XCJQQVNTV09SRF9SRVNFVFwiLGVtYWlsOnR9LGUpLHpzKHRoaXMsTnMsdCl9LHQud2I9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbHQodD17cmVxdWVzdFR5cGU6XCJFTUFJTF9TSUdOSU5cIixlbWFpbDp0fSxlKSx6cyh0aGlzLFNzLHQpfSx0LnViPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGx0KHQ9e3JlcXVlc3RUeXBlOlwiVkVSSUZZX0VNQUlMXCIsaWRUb2tlbjp0fSxlKSx6cyh0aGlzLENzLHQpfSx0LkViPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbHQodD17cmVxdWVzdFR5cGU6XCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiLGlkVG9rZW46dCxuZXdFbWFpbDplfSxuKSx6cyh0aGlzLGtzLHQpfSx0LmZiPWZ1bmN0aW9uKHQpe3JldHVybiB6cyh0aGlzLEtzLHQpfSx0Lm5iPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHpzKHRoaXMsUHMse29vYkNvZGU6dCxuZXdQYXNzd29yZDplfSl9LHQuUmE9ZnVuY3Rpb24odCl7cmV0dXJuIHpzKHRoaXMsdnMse29vYkNvZGU6dH0pfSx0LmpiPWZ1bmN0aW9uKHQpe3JldHVybiB6cyh0aGlzLGRzLHtvb2JDb2RlOnR9KX07dmFyIGRzPXtlbmRwb2ludDpcInNldEFjY291bnRJbmZvXCIsQTpwcyxaOlwiZW1haWxcIixCOiEwfSx2cz17ZW5kcG9pbnQ6XCJyZXNldFBhc3N3b3JkXCIsQTpwcyxHOmZ1bmN0aW9uKHQpe3ZhciBlPXQucmVxdWVzdFR5cGU7aWYoIWV8fCF0LmVtYWlsJiZcIkVNQUlMX1NJR05JTlwiIT1lJiZcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIhPWUpdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiKX0sQjohMH0sZ3M9e2VuZHBvaW50Olwic2lnbnVwTmV3VXNlclwiLEE6ZnVuY3Rpb24odCl7aWYoZXModCksIXQucGFzc3dvcmQpdGhyb3cgbmV3IEkoXCJ3ZWFrLXBhc3N3b3JkXCIpfSxHOnJzLFY6ITAsQjohMH0seXM9e2VuZHBvaW50OlwiY3JlYXRlQXV0aFVyaVwiLEI6ITB9LG1zPXtlbmRwb2ludDpcImRlbGV0ZUFjY291bnRcIixOOltcImlkVG9rZW5cIl19LGJzPXtlbmRwb2ludDpcInNldEFjY291bnRJbmZvXCIsTjpbXCJpZFRva2VuXCIsXCJkZWxldGVQcm92aWRlclwiXSxBOmZ1bmN0aW9uKHQpe2lmKCFBcnJheS5pc0FycmF5KHQuZGVsZXRlUHJvdmlkZXIpKXRocm93IG5ldyBJKFwiaW50ZXJuYWwtZXJyb3JcIil9fSxfcz17ZW5kcG9pbnQ6XCJlbWFpbExpbmtTaWduaW5cIixOOltcImVtYWlsXCIsXCJvb2JDb2RlXCJdLEE6ZXMsRzpycyxWOiEwLEI6ITB9LHdzPXtlbmRwb2ludDpcImVtYWlsTGlua1NpZ25pblwiLE46W1wiaWRUb2tlblwiLFwiZW1haWxcIixcIm9vYkNvZGVcIl0sQTplcyxHOnJzLFY6ITB9LElzPXtlbmRwb2ludDpcImFjY291bnRzL21mYUVucm9sbG1lbnQ6ZmluYWxpemVcIixOOltcImlkVG9rZW5cIixcInBob25lVmVyaWZpY2F0aW9uSW5mb1wiXSxBOmFzLEc6cnMsQjohMCxOYTohMH0sVHM9e2VuZHBvaW50OlwiYWNjb3VudHMvbWZhU2lnbkluOmZpbmFsaXplXCIsTjpbXCJtZmFQZW5kaW5nQ3JlZGVudGlhbFwiLFwicGhvbmVWZXJpZmljYXRpb25JbmZvXCJdLEE6YXMsRzpycyxCOiEwLE5hOiEwfSxFcz17ZW5kcG9pbnQ6XCJnZXRBY2NvdW50SW5mb1wifSxTcz17ZW5kcG9pbnQ6XCJnZXRPb2JDb25maXJtYXRpb25Db2RlXCIsTjpbXCJyZXF1ZXN0VHlwZVwiXSxBOmZ1bmN0aW9uKHQpe2lmKFwiRU1BSUxfU0lHTklOXCIhPXQucmVxdWVzdFR5cGUpdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiKTtlcyh0KX0sWjpcImVtYWlsXCIsQjohMH0sQ3M9e2VuZHBvaW50OlwiZ2V0T29iQ29uZmlybWF0aW9uQ29kZVwiLE46W1wiaWRUb2tlblwiLFwicmVxdWVzdFR5cGVcIl0sQTpmdW5jdGlvbih0KXtpZihcIlZFUklGWV9FTUFJTFwiIT10LnJlcXVlc3RUeXBlKXRocm93IG5ldyBJKFwiaW50ZXJuYWwtZXJyb3JcIil9LFo6XCJlbWFpbFwiLEI6ITB9LGtzPXtlbmRwb2ludDpcImdldE9vYkNvbmZpcm1hdGlvbkNvZGVcIixOOltcImlkVG9rZW5cIixcIm5ld0VtYWlsXCIsXCJyZXF1ZXN0VHlwZVwiXSxBOmZ1bmN0aW9uKHQpe2lmKFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiE9dC5yZXF1ZXN0VHlwZSl0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIpfSxaOlwiZW1haWxcIixCOiEwfSxOcz17ZW5kcG9pbnQ6XCJnZXRPb2JDb25maXJtYXRpb25Db2RlXCIsTjpbXCJyZXF1ZXN0VHlwZVwiXSxBOmZ1bmN0aW9uKHQpe2lmKFwiUEFTU1dPUkRfUkVTRVRcIiE9dC5yZXF1ZXN0VHlwZSl0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIpO2VzKHQpfSxaOlwiZW1haWxcIixCOiEwfSxBcz17bGI6ITAsZW5kcG9pbnQ6XCJnZXRQcm9qZWN0Q29uZmlnXCIsVWI6XCJHRVRcIn0sUnM9e2xiOiEwLGVuZHBvaW50OlwiZ2V0UmVjYXB0Y2hhUGFyYW1cIixVYjpcIkdFVFwiLEc6ZnVuY3Rpb24odCl7aWYoIXQucmVjYXB0Y2hhU2l0ZUtleSl0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIpfX0sUHM9e2VuZHBvaW50OlwicmVzZXRQYXNzd29yZFwiLEE6cHMsWjpcImVtYWlsXCIsQjohMH0sT3M9e2VuZHBvaW50Olwic2VuZFZlcmlmaWNhdGlvbkNvZGVcIixOOltcInBob25lTnVtYmVyXCIsXCJyZWNhcHRjaGFUb2tlblwiXSxaOlwic2Vzc2lvbkluZm9cIixCOiEwfSxEcz17ZW5kcG9pbnQ6XCJzZXRBY2NvdW50SW5mb1wiLE46W1wiaWRUb2tlblwiXSxBOm5zLFY6ITB9LHhzPXtlbmRwb2ludDpcInNldEFjY291bnRJbmZvXCIsTjpbXCJpZFRva2VuXCJdLEE6ZnVuY3Rpb24odCl7aWYobnModCksIXQucGFzc3dvcmQpdGhyb3cgbmV3IEkoXCJ3ZWFrLXBhc3N3b3JkXCIpfSxHOnJzLFY6ITB9LExzPXtlbmRwb2ludDpcInNpZ251cE5ld1VzZXJcIixHOnJzLFY6ITAsQjohMH0sTXM9e2VuZHBvaW50OlwiYWNjb3VudHMvbWZhRW5yb2xsbWVudDpzdGFydFwiLE46W1wiaWRUb2tlblwiLFwicGhvbmVFbnJvbGxtZW50SW5mb1wiXSxBOmZ1bmN0aW9uKHQpe2lmKCF0LnBob25lRW5yb2xsbWVudEluZm8pdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiKTtpZighdC5waG9uZUVucm9sbG1lbnRJbmZvLnBob25lTnVtYmVyKXRocm93IG5ldyBJKFwibWlzc2luZy1waG9uZS1udW1iZXJcIik7aWYoIXQucGhvbmVFbnJvbGxtZW50SW5mby5yZWNhcHRjaGFUb2tlbil0aHJvdyBuZXcgSShcIm1pc3NpbmctYXBwLWNyZWRlbnRpYWxcIil9LEc6ZnVuY3Rpb24odCl7aWYoIXQucGhvbmVTZXNzaW9uSW5mb3x8IXQucGhvbmVTZXNzaW9uSW5mby5zZXNzaW9uSW5mbyl0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIpfSxCOiEwLE5hOiEwfSxGcz17ZW5kcG9pbnQ6XCJhY2NvdW50cy9tZmFTaWduSW46c3RhcnRcIixOOltcIm1mYVBlbmRpbmdDcmVkZW50aWFsXCIsXCJtZmFFbnJvbGxtZW50SWRcIixcInBob25lU2lnbkluSW5mb1wiXSxBOmZ1bmN0aW9uKHQpe2lmKCF0LnBob25lU2lnbkluSW5mb3x8IXQucGhvbmVTaWduSW5JbmZvLnJlY2FwdGNoYVRva2VuKXRocm93IG5ldyBJKFwibWlzc2luZy1hcHAtY3JlZGVudGlhbFwiKX0sRzpmdW5jdGlvbih0KXtpZighdC5waG9uZVJlc3BvbnNlSW5mb3x8IXQucGhvbmVSZXNwb25zZUluZm8uc2Vzc2lvbkluZm8pdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiKX0sQjohMCxOYTohMH0sVXM9e2VuZHBvaW50OlwidmVyaWZ5QXNzZXJ0aW9uXCIsQTpzcyxZYTp1cyxHOmNzLFY6ITAsQjohMH0sanM9e2VuZHBvaW50OlwidmVyaWZ5QXNzZXJ0aW9uXCIsQTpzcyxZYTp1cyxHOmZ1bmN0aW9uKHQpe2lmKHQuZXJyb3JNZXNzYWdlJiZcIlVTRVJfTk9UX0ZPVU5EXCI9PXQuZXJyb3JNZXNzYWdlKXRocm93IG5ldyBJKFwidXNlci1ub3QtZm91bmRcIik7aWYodC5lcnJvck1lc3NhZ2UpdGhyb3cgUXModC5lcnJvck1lc3NhZ2UpO3JzKHQpfSxWOiEwLEI6ITB9LHFzPXtlbmRwb2ludDpcInZlcmlmeUFzc2VydGlvblwiLEE6ZnVuY3Rpb24odCl7aWYoc3ModCksIXQuaWRUb2tlbil0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIpfSxZYTp1cyxHOmNzLFY6ITB9LFZzPXtlbmRwb2ludDpcInZlcmlmeUN1c3RvbVRva2VuXCIsQTpmdW5jdGlvbih0KXtpZighdC50b2tlbil0aHJvdyBuZXcgSShcImludmFsaWQtY3VzdG9tLXRva2VuXCIpfSxHOnJzLFY6ITAsQjohMH0sQnM9e2VuZHBvaW50OlwidmVyaWZ5UGFzc3dvcmRcIixBOmZ1bmN0aW9uKHQpe2lmKGVzKHQpLCF0LnBhc3N3b3JkKXRocm93IG5ldyBJKFwid3JvbmctcGFzc3dvcmRcIil9LEc6cnMsVjohMCxCOiEwfSxLcz17ZW5kcG9pbnQ6XCJ2ZXJpZnlQaG9uZU51bWJlclwiLEE6aXMsRzpycyxCOiEwfSxXcz17ZW5kcG9pbnQ6XCJ2ZXJpZnlQaG9uZU51bWJlclwiLEE6ZnVuY3Rpb24odCl7aWYoIXQuaWRUb2tlbil0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIpO2lzKHQpfSxHOmZ1bmN0aW9uKHQpe2lmKHQudGVtcG9yYXJ5UHJvb2YpdGhyb3cgdC5jb2RlPVwiY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZVwiLEZvKHQpO3JzKHQpfX0sSHM9e0hiOntVU0VSX05PVF9GT1VORDpcInVzZXItbm90LWZvdW5kXCJ9LGVuZHBvaW50OlwidmVyaWZ5UGhvbmVOdW1iZXJcIixBOmlzLEc6cnMsQjohMH0sR3M9e2VuZHBvaW50OlwiYWNjb3VudHMvbWZhRW5yb2xsbWVudDp3aXRoZHJhd1wiLE46W1wiaWRUb2tlblwiLFwibWZhRW5yb2xsbWVudElkXCJdLEc6ZnVuY3Rpb24odCl7aWYoISF0W0JhXV4hIXQucmVmcmVzaFRva2VuKXRocm93IG5ldyBJKFwiaW50ZXJuYWwtZXJyb3JcIil9LEI6ITAsTmE6ITB9O2Z1bmN0aW9uIHpzKHQsZSxuKXtpZighZnVuY3Rpb24odCxlKXtpZighZXx8IWUubGVuZ3RoKXJldHVybiAxO2lmKHQpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj10W2Vbbl1dO2lmKG51bGw9PXJ8fFwiXCI9PT1yKXJldHVybn1yZXR1cm4gMX19KG4sZS5OKSlyZXR1cm4gX2UobmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiKSk7dmFyIHIsaT0hIWUuTmEsbz1lLlVifHxcIlBPU1RcIjtyZXR1cm4gYmUobikudGhlbihlLkEpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZS5WJiYobi5yZXR1cm5TZWN1cmVUb2tlbj0hMCksZS5CJiZ0LmImJnZvaWQgMD09PW4udGVuYW50SWQmJihuLnRlbmFudElkPXQuYiksdHModCxpP3QuaTp0LmgsZS5lbmRwb2ludCxvLG4sZS5IYixlLmxifHwhMSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiByPXQsZS5ZYT9lLllhKG4scik6cn0pLnRoZW4oZS5HKS50aGVuKGZ1bmN0aW9uKCl7aWYoIWUuWilyZXR1cm4gcjtpZighKGUuWiBpbiByKSl0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIpO3JldHVybiByW2UuWl19KX1mdW5jdGlvbiBRcyh0KXtyZXR1cm4gWXMoe2Vycm9yOntlcnJvcnM6W3ttZXNzYWdlOnR9XSxjb2RlOjQwMCxtZXNzYWdlOnR9fSl9ZnVuY3Rpb24gWXModCxlKXt2YXIgbixyPSh0LmVycm9yJiZ0LmVycm9yLmVycm9ycyYmdC5lcnJvci5lcnJvcnNbMF18fHt9KS5yZWFzb258fFwiXCIsaT17a2V5SW52YWxpZDpcImludmFsaWQtYXBpLWtleVwiLGlwUmVmZXJlckJsb2NrZWQ6XCJhcHAtbm90LWF1dGhvcml6ZWRcIn07aWYocj1pW3JdP25ldyBJKGlbcl0pOm51bGwpcmV0dXJuIHI7Zm9yKG4gaW4gcj10LmVycm9yJiZ0LmVycm9yLm1lc3NhZ2V8fFwiXCIsbHQoaT17SU5WQUxJRF9DVVNUT01fVE9LRU46XCJpbnZhbGlkLWN1c3RvbS10b2tlblwiLENSRURFTlRJQUxfTUlTTUFUQ0g6XCJjdXN0b20tdG9rZW4tbWlzbWF0Y2hcIixNSVNTSU5HX0NVU1RPTV9UT0tFTjpcImludGVybmFsLWVycm9yXCIsSU5WQUxJRF9JREVOVElGSUVSOlwiaW52YWxpZC1lbWFpbFwiLE1JU1NJTkdfQ09OVElOVUVfVVJJOlwiaW50ZXJuYWwtZXJyb3JcIixJTlZBTElEX0VNQUlMOlwiaW52YWxpZC1lbWFpbFwiLElOVkFMSURfUEFTU1dPUkQ6XCJ3cm9uZy1wYXNzd29yZFwiLFVTRVJfRElTQUJMRUQ6XCJ1c2VyLWRpc2FibGVkXCIsTUlTU0lOR19QQVNTV09SRDpcImludGVybmFsLWVycm9yXCIsRU1BSUxfRVhJU1RTOlwiZW1haWwtYWxyZWFkeS1pbi11c2VcIixQQVNTV09SRF9MT0dJTl9ESVNBQkxFRDpcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiLElOVkFMSURfSURQX1JFU1BPTlNFOlwiaW52YWxpZC1jcmVkZW50aWFsXCIsSU5WQUxJRF9QRU5ESU5HX1RPS0VOOlwiaW52YWxpZC1jcmVkZW50aWFsXCIsRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQ6XCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIsTUlTU0lOR19PUl9JTlZBTElEX05PTkNFOlwibWlzc2luZy1vci1pbnZhbGlkLW5vbmNlXCIsSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQ6XCJpbnZhbGlkLW1lc3NhZ2UtcGF5bG9hZFwiLElOVkFMSURfUkVDSVBJRU5UX0VNQUlMOlwiaW52YWxpZC1yZWNpcGllbnQtZW1haWxcIixJTlZBTElEX1NFTkRFUjpcImludmFsaWQtc2VuZGVyXCIsRU1BSUxfTk9UX0ZPVU5EOlwidXNlci1ub3QtZm91bmRcIixSRVNFVF9QQVNTV09SRF9FWENFRURfTElNSVQ6XCJ0b28tbWFueS1yZXF1ZXN0c1wiLEVYUElSRURfT09CX0NPREU6XCJleHBpcmVkLWFjdGlvbi1jb2RlXCIsSU5WQUxJRF9PT0JfQ09ERTpcImludmFsaWQtYWN0aW9uLWNvZGVcIixNSVNTSU5HX09PQl9DT0RFOlwiaW50ZXJuYWwtZXJyb3JcIixJTlZBTElEX1BST1ZJREVSX0lEOlwiaW52YWxpZC1wcm92aWRlci1pZFwiLENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTjpcInJlcXVpcmVzLXJlY2VudC1sb2dpblwiLElOVkFMSURfSURfVE9LRU46XCJpbnZhbGlkLXVzZXItdG9rZW5cIixUT0tFTl9FWFBJUkVEOlwidXNlci10b2tlbi1leHBpcmVkXCIsVVNFUl9OT1RfRk9VTkQ6XCJ1c2VyLXRva2VuLWV4cGlyZWRcIixDT1JTX1VOU1VQUE9SVEVEOlwiY29ycy11bnN1cHBvcnRlZFwiLERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEOlwiZHluYW1pYy1saW5rLW5vdC1hY3RpdmF0ZWRcIixJTlZBTElEX0FQUF9JRDpcImludmFsaWQtYXBwLWlkXCIsVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSOlwidG9vLW1hbnktcmVxdWVzdHNcIixXRUFLX1BBU1NXT1JEOlwid2Vhay1wYXNzd29yZFwiLE9QRVJBVElPTl9OT1RfQUxMT1dFRDpcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiLFVTRVJfQ0FOQ0VMTEVEOlwidXNlci1jYW5jZWxsZWRcIixDQVBUQ0hBX0NIRUNLX0ZBSUxFRDpcImNhcHRjaGEtY2hlY2stZmFpbGVkXCIsSU5WQUxJRF9BUFBfQ1JFREVOVElBTDpcImludmFsaWQtYXBwLWNyZWRlbnRpYWxcIixJTlZBTElEX0NPREU6XCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlXCIsSU5WQUxJRF9QSE9ORV9OVU1CRVI6XCJpbnZhbGlkLXBob25lLW51bWJlclwiLElOVkFMSURfU0VTU0lPTl9JTkZPOlwiaW52YWxpZC12ZXJpZmljYXRpb24taWRcIixJTlZBTElEX1RFTVBPUkFSWV9QUk9PRjpcImludmFsaWQtY3JlZGVudGlhbFwiLE1JU1NJTkdfQVBQX0NSRURFTlRJQUw6XCJtaXNzaW5nLWFwcC1jcmVkZW50aWFsXCIsTUlTU0lOR19DT0RFOlwibWlzc2luZy12ZXJpZmljYXRpb24tY29kZVwiLE1JU1NJTkdfUEhPTkVfTlVNQkVSOlwibWlzc2luZy1waG9uZS1udW1iZXJcIixNSVNTSU5HX1NFU1NJT05fSU5GTzpcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCIsUVVPVEFfRVhDRUVERUQ6XCJxdW90YS1leGNlZWRlZFwiLFNFU1NJT05fRVhQSVJFRDpcImNvZGUtZXhwaXJlZFwiLFJFSkVDVEVEX0NSRURFTlRJQUw6XCJyZWplY3RlZC1jcmVkZW50aWFsXCIsSU5WQUxJRF9DT05USU5VRV9VUkk6XCJpbnZhbGlkLWNvbnRpbnVlLXVyaVwiLE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUU6XCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIixNSVNTSU5HX0lPU19CVU5ETEVfSUQ6XCJtaXNzaW5nLWlvcy1idW5kbGUtaWRcIixVTkFVVEhPUklaRURfRE9NQUlOOlwidW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaVwiLElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTjpcImludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpblwiLElOVkFMSURfT0FVVEhfQ0xJRU5UX0lEOlwiaW52YWxpZC1vYXV0aC1jbGllbnQtaWRcIixJTlZBTElEX0NFUlRfSEFTSDpcImludmFsaWQtY2VydC1oYXNoXCIsVU5TVVBQT1JURURfVEVOQU5UX09QRVJBVElPTjpcInVuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb25cIixJTlZBTElEX1RFTkFOVF9JRDpcImludmFsaWQtdGVuYW50LWlkXCIsVEVOQU5UX0lEX01JU01BVENIOlwidGVuYW50LWlkLW1pc21hdGNoXCIsQURNSU5fT05MWV9PUEVSQVRJT046XCJhZG1pbi1yZXN0cmljdGVkLW9wZXJhdGlvblwiLElOVkFMSURfTUZBX1BFTkRJTkdfQ1JFREVOVElBTDpcImludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb25cIixNRkFfRU5ST0xMTUVOVF9OT1RfRk9VTkQ6XCJtdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmRcIixNSVNTSU5HX01GQV9QRU5ESU5HX0NSRURFTlRJQUw6XCJtaXNzaW5nLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIsTUlTU0lOR19NRkFfRU5ST0xMTUVOVF9JRDpcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIixFTUFJTF9DSEFOR0VfTkVFRFNfVkVSSUZJQ0FUSU9OOlwiZW1haWwtY2hhbmdlLW5lZWRzLXZlcmlmaWNhdGlvblwiLFNFQ09ORF9GQUNUT1JfRVhJU1RTOlwic2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZVwiLFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQ6XCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIixVTlNVUFBPUlRFRF9GSVJTVF9GQUNUT1I6XCJ1bnN1cHBvcnRlZC1maXJzdC1mYWN0b3JcIixVTlZFUklGSUVEX0VNQUlMOlwidW52ZXJpZmllZC1lbWFpbFwifSxlfHx7fSksZT0oZT1yLm1hdGNoKC9eW15cXHNdK1xccyo6XFxzKihbXFxzXFxTXSopJC8pKSYmMTxlLmxlbmd0aD9lWzFdOnZvaWQgMCxpKWlmKDA9PT1yLmluZGV4T2YobikpcmV0dXJuIG5ldyBJKGlbbl0sZSk7cmV0dXJuIG5ldyBJKFwiaW50ZXJuYWwtZXJyb3JcIixlPSFlJiZ0P0VyKHQpOmUpfWZ1bmN0aW9uIFhzKHQpe3ZhciBvO3RoaXMuYj10LHRoaXMuYT1udWxsLHRoaXMucmI9KG89dGhpcywodHU9dHV8fG5ldyBmZShmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXtBcigpLG1yKFwiZ2FwaS5sb2FkXCIpKFwiZ2FwaS5pZnJhbWVzXCIse2NhbGxiYWNrOnQsb250aW1lb3V0OmZ1bmN0aW9uKCl7QXIoKSxlKEVycm9yKFwiTmV0d29yayBFcnJvclwiKSl9LHRpbWVvdXQ6JHMuZ2V0KCl9KX12YXIgcjttcihcImdhcGkuaWZyYW1lcy5JZnJhbWVcIik/dCgpOm1yKFwiZ2FwaS5sb2FkXCIpP24oKToocj1cIl9faWZyYW1lZmNiXCIrTWF0aC5mbG9vcigxZTYqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoKSxsW3JdPWZ1bmN0aW9uKCl7bXIoXCJnYXBpLmxvYWRcIik/bigpOmUoRXJyb3IoXCJOZXR3b3JrIEVycm9yXCIpKX0sYmUoRGEocj13dChKcyx7b25sb2FkOnJ9KSkpLm8oZnVuY3Rpb24oKXtlKEVycm9yKFwiTmV0d29yayBFcnJvclwiKSl9KSl9KS5vKGZ1bmN0aW9uKHQpe3Rocm93IHR1PW51bGwsdH0pKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBmZShmdW5jdGlvbihyLGkpe21yKFwiZ2FwaS5pZnJhbWVzLmdldENvbnRleHRcIikoKS5vcGVuKHt3aGVyZTpkb2N1bWVudC5ib2R5LHVybDpvLmIsbWVzc2FnZUhhbmRsZXJzRmlsdGVyOm1yKFwiZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUlwiKSxhdHRyaWJ1dGVzOntzdHlsZTp7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpcIi0xMDBweFwiLHdpZHRoOlwiMXB4XCIsaGVpZ2h0OlwiMXB4XCJ9fSxkb250Y2xlYXI6ITB9LGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtjbGVhclRpbWVvdXQobikscigpfW8uYT10LG8uYS5yZXN0eWxlKHtzZXRIaWRlT25MZWF2ZTohMX0pO3ZhciBuPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpKEVycm9yKFwiTmV0d29yayBFcnJvclwiKSl9LFpzLmdldCgpKTt0LnBpbmcoZSkudGhlbihlLGZ1bmN0aW9uKCl7aShFcnJvcihcIk5ldHdvcmsgRXJyb3JcIikpfSl9KX0pfSkpfXZhciBKcz1uZXcgcHQoeXQsXCJodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9hcGkuanM/b25sb2FkPSV7b25sb2FkfVwiKSwkcz1uZXcgUnIoM2U0LDZlNCksWnM9bmV3IFJyKDVlMywxNWUzKSx0dT1udWxsO2Z1bmN0aW9uIGV1KHQsZSxuLHIpe3RoaXMubD10LHRoaXMuaD1lLHRoaXMuaT1uLHRoaXMuZz1yLHRoaXMuZj1udWxsLHQ9dGhpcy5nP1JuKCh0PUFuKHRoaXMuZy51cmwpKS5jLHQuYSx0LmcsXCIvZW11bGF0b3IvYXV0aC9pZnJhbWVcIik6Um4oXCJodHRwc1wiLHRoaXMubCxudWxsLFwiL19fL2F1dGgvaWZyYW1lXCIpLHRoaXMuYT10LGtuKHRoaXMuYSxcImFwaUtleVwiLHRoaXMuaCksa24odGhpcy5hLFwiYXBwTmFtZVwiLHRoaXMuaSksdGhpcy5iPW51bGwsdGhpcy5jPVtdfWZ1bmN0aW9uIG51KHQsZSxuLHIsaSxvKXt0aGlzLnU9dCx0aGlzLnM9ZSx0aGlzLmM9bix0aGlzLm09cix0aGlzLnY9byx0aGlzLmk9dGhpcy5nPXRoaXMubD1udWxsLHRoaXMuYT1pLHRoaXMuaD10aGlzLmY9bnVsbH1mdW5jdGlvbiBydSh0KXt0cnl7cmV0dXJuIFhsLmFwcCh0KS5hdXRoKCkuR2EoKX1jYXRjaCh0KXtyZXR1cm5bXX19ZnVuY3Rpb24gaXUodCxlLG4scixpLG8pe3RoaXMucz10LHRoaXMuZz1lLHRoaXMuYj1uLHRoaXMuZj1vLHRoaXMuYz1yfHxudWxsLHRoaXMuaT1pfHxudWxsLHRoaXMubD10aGlzLnU9dGhpcy5DPW51bGwsdGhpcy5oPVtdLHRoaXMubT10aGlzLmE9bnVsbH1mdW5jdGlvbiBvdSh0KXt2YXIgcz1abigpO3JldHVybiB6cyh0LEFzLHt9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LmF1dGhvcml6ZWREb21haW5zfHxbXX0pLnRoZW4oZnVuY3Rpb24odCl7dDp7Zm9yKHZhciBlPShuPUFuKHMpKS5jLG49bi5hLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGk9dFtyXSxvPW4sYT1lO2lmKG89MD09aS5pbmRleE9mKFwiY2hyb21lLWV4dGVuc2lvbjovL1wiKT9BbihpKS5hPT1vJiZcImNocm9tZS1leHRlbnNpb25cIj09YTooXCJodHRwXCI9PWF8fFwiaHR0cHNcIj09YSkmJihpci50ZXN0KGkpP289PWk6KGk9aS5zcGxpdChcIi5cIikuam9pbihcIlxcXFwuXCIpLG5ldyBSZWdFeHAoXCJeKC4rXFxcXC5cIitpK1wifFwiK2krXCIpJFwiLFwiaVwiKS50ZXN0KG8pKSkpe3Q9ITA7YnJlYWsgdH19dD0hMX1pZighdCl0aHJvdyBuZXcgTG8oWm4oKSl9KX1mdW5jdGlvbiBhdShpKXtyZXR1cm4gaS5tfHwoaS5tPWFyKCkudGhlbihmdW5jdGlvbigpe3ZhciB0LGUsbixyO2kudXx8KHQ9aS5jLGU9aS5pLG49cnUoaS5iKSwocj1uZXcgZXUoaS5zLGkuZyxpLmIsaS5mKSkuZj10LHIuYj1lLHIuYz16KG58fFtdKSxpLnU9ci50b1N0cmluZygpKSxpLnY9bmV3IFhzKGkudSksZnVuY3Rpb24ocil7aWYoIXIudil0aHJvdyBFcnJvcihcIklmY0hhbmRsZXIgbXVzdCBiZSBpbml0aWFsaXplZCFcIik7IWZ1bmN0aW9uKHQsZSl7dC5yYi50aGVuKGZ1bmN0aW9uKCl7dC5hLnJlZ2lzdGVyKFwiYXV0aEV2ZW50XCIsZSxtcihcImdhcGkuaWZyYW1lcy5DUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVJcIikpfSl9KHIudixmdW5jdGlvbih0KXt2YXIgZT17fTtpZih0JiZ0LmF1dGhFdmVudCl7dmFyIG49ITE7Zm9yKHQ9UG8odC5hdXRoRXZlbnQpLGU9MDtlPHIuaC5sZW5ndGg7ZSsrKW49ci5oW2VdKHQpfHxuO3JldHVybihlPXt9KS5zdGF0dXM9bj9cIkFDS1wiOlwiRVJST1JcIixiZShlKX1yZXR1cm4gZS5zdGF0dXM9XCJFUlJPUlwiLGJlKGUpfSl9KGkpfSksaS5tKX1mdW5jdGlvbiBzdSh0KXtyZXR1cm4gdC5sfHwodC5DPXQuYz9ncih0LmMscnUodC5iKSk6bnVsbCx0Lmw9bmV3IHFhKHQuZyxOKHQuaSksdC5DKSx0LmYmJlFhKHQubCx0LmYpKSx0Lmx9ZnVuY3Rpb24gdXUodCxlLG4scixpLG8sYSxzLHUsYyxoLGwpe3JldHVybih0PW5ldyBudSh0LGUsbixyLGksbCkpLmw9byx0Lmc9YSx0Lmk9cyx0LmI9Y3QodXx8bnVsbCksdC5mPWMsdC55YihoKS50b1N0cmluZygpfWZ1bmN0aW9uIGN1KHQpe2lmKHRoaXMuYT10fHxYbC5JTlRFUk5BTC5yZWFjdE5hdGl2ZSYmWGwuSU5URVJOQUwucmVhY3ROYXRpdmUuQXN5bmNTdG9yYWdlLCF0aGlzLmEpdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiLFwiVGhlIFJlYWN0IE5hdGl2ZSBjb21wYXRpYmlsaXR5IGxpYnJhcnkgd2FzIG5vdCBmb3VuZC5cIik7dGhpcy50eXBlPVwiYXN5bmNTdG9yYWdlXCJ9ZnVuY3Rpb24gaHUodCl7dGhpcy5iPXQsdGhpcy5hPXt9LHRoaXMuZj1tKHRoaXMuYyx0aGlzKX1ldS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mP2tuKHRoaXMuYSxcInZcIix0aGlzLmYpOkJuKHRoaXMuYS5iLFwidlwiKSx0aGlzLmI/a24odGhpcy5hLFwiZWlkXCIsdGhpcy5iKTpCbih0aGlzLmEuYixcImVpZFwiKSx0aGlzLmMubGVuZ3RoP2tuKHRoaXMuYSxcImZ3XCIsdGhpcy5jLmpvaW4oXCIsXCIpKTpCbih0aGlzLmEuYixcImZ3XCIpLHRoaXMuYS50b1N0cmluZygpfSxudS5wcm90b3R5cGUueWI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaD10LHRoaXN9LG51LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0O2lmKGtuKHQ9dGhpcy52P1JuKCh0PUFuKHRoaXMudi51cmwpKS5jLHQuYSx0LmcsXCIvZW11bGF0b3IvYXV0aC9oYW5kbGVyXCIpOlJuKFwiaHR0cHNcIix0aGlzLnUsbnVsbCxcIi9fXy9hdXRoL2hhbmRsZXJcIiksXCJhcGlLZXlcIix0aGlzLnMpLGtuKHQsXCJhcHBOYW1lXCIsdGhpcy5jKSxrbih0LFwiYXV0aFR5cGVcIix0aGlzLm0pLHRoaXMuYS5pc09BdXRoUHJvdmlkZXIpe3ZhciBlPXRoaXMuYTt0cnl7dmFyIG49WGwuYXBwKHRoaXMuYykuYXV0aCgpLmxhKCl9Y2F0Y2godCl7bj1udWxsfWZvcihyIGluIGUub2I9bixrbih0LFwicHJvdmlkZXJJZFwiLHRoaXMuYS5wcm92aWRlcklkKSxlPVNyKChuPXRoaXMuYSkuSWIpKWVbcl09ZVtyXS50b1N0cmluZygpO2Zvcih2YXIgcj1uLlFjLGU9Y3QoZSksaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgbz1yW2ldO28gaW4gZSYmZGVsZXRlIGVbb119bi5wYiYmbi5vYiYmIWVbbi5wYl0mJihlW24ucGJdPW4ub2IpLHV0KGUpfHxrbih0LFwiY3VzdG9tUGFyYW1ldGVyc1wiLEVyKGUpKX1pZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLmEuUWImJigobj10aGlzLmEuUWIoKSkubGVuZ3RoJiZrbih0LFwic2NvcGVzXCIsbi5qb2luKFwiLFwiKSkpLHRoaXMubD9rbih0LFwicmVkaXJlY3RVcmxcIix0aGlzLmwpOkJuKHQuYixcInJlZGlyZWN0VXJsXCIpLHRoaXMuZz9rbih0LFwiZXZlbnRJZFwiLHRoaXMuZyk6Qm4odC5iLFwiZXZlbnRJZFwiKSx0aGlzLmk/a24odCxcInZcIix0aGlzLmkpOkJuKHQuYixcInZcIiksdGhpcy5iKWZvcih2YXIgYSBpbiB0aGlzLmIpdGhpcy5iLmhhc093blByb3BlcnR5KGEpJiYhTm4odCxhKSYma24odCxhLHRoaXMuYlthXSk7cmV0dXJuIHRoaXMuaD9rbih0LFwidGlkXCIsdGhpcy5oKTpCbih0LmIsXCJ0aWRcIiksdGhpcy5mP2tuKHQsXCJlaWRcIix0aGlzLmYpOkJuKHQuYixcImVpZFwiKSwoYT1ydSh0aGlzLmMpKS5sZW5ndGgmJmtuKHQsXCJmd1wiLGEuam9pbihcIixcIikpLHQudG9TdHJpbmcoKX0sKHQ9aXUucHJvdG90eXBlKS5PYj1mdW5jdGlvbihlLG4sdCl7dmFyIHI9bmV3IEkoXCJwb3B1cC1jbG9zZWQtYnktdXNlclwiKSxpPW5ldyBJKFwid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIiksbz10aGlzLGE9ITE7cmV0dXJuIHRoaXMubWEoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIHQscjtyPXt0eXBlOlwid2ViU3RvcmFnZVN1cHBvcnRcIn0sYXUodD1vKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGU9dC52LG49cixlLnJiLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGZlKGZ1bmN0aW9uKHQpe2UuYS5zZW5kKG4udHlwZSxuLHQsbXIoXCJnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSXCIpKX0pfSk7dmFyIGUsbn0pLnRoZW4oZnVuY3Rpb24odCl7aWYodCYmdC5sZW5ndGgmJnZvaWQgMCE9PXRbMF0ud2ViU3RvcmFnZVN1cHBvcnQpcmV0dXJuIHRbMF0ud2ViU3RvcmFnZVN1cHBvcnQ7dGhyb3cgRXJyb3IoKX0pLnRoZW4oZnVuY3Rpb24odCl7dHx8KGUmJm5yKGUpLG4oaSksYT0hMCl9KX0pLm8oZnVuY3Rpb24oKXt9KS50aGVuKGZ1bmN0aW9uKCl7aWYoIWEpcmV0dXJuIG49ZSxuZXcgZmUoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uIHQoKXtnbigyZTMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbiYmIW4uY2xvc2VkP3QoKTp2b2lkIGUoKX0pfSgpfSk7dmFyIG59KS50aGVuKGZ1bmN0aW9uKCl7aWYoIWEpcmV0dXJuIGduKHQpLnRoZW4oZnVuY3Rpb24oKXtuKHIpfSl9KX0sdC5YYj1mdW5jdGlvbigpe3ZhciB0PXlyKCk7cmV0dXJuIVRyKHQpJiYhTnIodCl9LHQuVGI9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdC5NYj1mdW5jdGlvbihlLHQsbixyLGksbyxhLHMpe2lmKCFlKXJldHVybiBfZShuZXcgSShcInBvcHVwLWJsb2NrZWRcIikpO2lmKGEmJiFUcigpKXJldHVybiB0aGlzLm1hKCkubyhmdW5jdGlvbih0KXtucihlKSxpKHQpfSkscigpLGJlKCk7dGhpcy5hfHwodGhpcy5hPW91KHN1KHRoaXMpKSk7dmFyIHU9dGhpcztyZXR1cm4gdGhpcy5hLnRoZW4oZnVuY3Rpb24oKXt2YXIgdD11Lm1hKCkubyhmdW5jdGlvbih0KXt0aHJvdyBucihlKSxpKHQpLHR9KTtyZXR1cm4gcigpLHR9KS50aGVuKGZ1bmN0aW9uKCl7QW8obiksYXx8dHIodXUodS5zLHUuZyx1LmIsdCxuLG51bGwsbyx1LmMsdm9pZCAwLHUuaSxzLHUuZiksZSl9KS5vKGZ1bmN0aW9uKHQpe3Rocm93XCJhdXRoL25ldHdvcmstcmVxdWVzdC1mYWlsZWRcIj09dC5jb2RlJiYodS5hPW51bGwpLHR9KX0sdC5OYj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmF8fCh0aGlzLmE9b3Uoc3UodGhpcykpKTt2YXIgaT10aGlzO3JldHVybiB0aGlzLmEudGhlbihmdW5jdGlvbigpe0FvKGUpLHRyKHV1KGkucyxpLmcsaS5iLHQsZSxabigpLG4saS5jLHZvaWQgMCxpLmkscixpLmYpKX0pLm8oZnVuY3Rpb24odCl7dGhyb3dcImF1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiPT10LmNvZGUmJihpLmE9bnVsbCksdH0pfSx0Lm1hPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gYXUodGhpcykudGhlbihmdW5jdGlvbigpe3JldHVybiB0LnYucmJ9KS5vKGZ1bmN0aW9uKCl7dGhyb3cgdC5hPW51bGwsbmV3IEkoXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIpfSl9LHQuJGI9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sdC5FYT1mdW5jdGlvbih0KXt0aGlzLmgucHVzaCh0KX0sdC5TYT1mdW5jdGlvbihlKXtIKHRoaXMuaCxmdW5jdGlvbih0KXtyZXR1cm4gdD09ZX0pfSwodD1jdS5wcm90b3R5cGUpLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gYmUodGhpcy5hLmdldEl0ZW0odCkpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQmJkNyKHQpfSl9LHQuc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGJlKHRoaXMuYS5zZXRJdGVtKHQsRXIoZSkpKX0sdC5VPWZ1bmN0aW9uKHQpe3JldHVybiBiZSh0aGlzLmEucmVtb3ZlSXRlbSh0KSl9LHQuY2E9ZnVuY3Rpb24oKXt9LHQuaWE9ZnVuY3Rpb24oKXt9O3ZhciBsdSxmdT1bXTtmdW5jdGlvbiBwdSh0LGUsbil7dXQodC5hKSYmdC5iLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdC5mKSx2b2lkIDA9PT10LmFbZV0mJih0LmFbZV09W10pLHQuYVtlXS5wdXNoKG4pfWZ1bmN0aW9uIGR1KHQpe3RoaXMuYT10fWZ1bmN0aW9uIHZ1KHQpe3RoaXMuYz10LHRoaXMuYj0hMSx0aGlzLmE9W119ZnVuY3Rpb24gZ3Uocix0LGUsbil7dmFyIGksbyxhLHMsdT1lfHx7fSxjPW51bGw7aWYoci5iKXJldHVybiBfZShFcnJvcihcImNvbm5lY3Rpb25fdW5hdmFpbGFibGVcIikpO3ZhciBoPW4/ODAwOjUwLGw9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIE1lc3NhZ2VDaGFubmVsP25ldyBNZXNzYWdlQ2hhbm5lbDpudWxsO3JldHVybiBuZXcgZmUoZnVuY3Rpb24oZSxuKXtsPyhpPU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpNYXRoLnBvdygxMCwyMCkpLnRvU3RyaW5nKCksbC5wb3J0MS5zdGFydCgpLGE9c2V0VGltZW91dChmdW5jdGlvbigpe24oRXJyb3IoXCJ1bnN1cHBvcnRlZF9ldmVudFwiKSl9LGgpLGM9e21lc3NhZ2VDaGFubmVsOmwsb25NZXNzYWdlOm89ZnVuY3Rpb24odCl7dC5kYXRhLmV2ZW50SWQ9PT1pJiYoXCJhY2tcIj09PXQuZGF0YS5zdGF0dXM/KGNsZWFyVGltZW91dChhKSxzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuKEVycm9yKFwidGltZW91dFwiKSl9LDNlMykpOlwiZG9uZVwiPT09dC5kYXRhLnN0YXR1cz8oY2xlYXJUaW1lb3V0KHMpLHZvaWQgMCE9PXQuZGF0YS5yZXNwb25zZT9lKHQuZGF0YS5yZXNwb25zZSk6bihFcnJvcihcInVua25vd25fZXJyb3JcIikpKTooY2xlYXJUaW1lb3V0KGEpLGNsZWFyVGltZW91dChzKSxuKEVycm9yKFwiaW52YWxpZF9yZXNwb25zZVwiKSkpKX19LHIuYS5wdXNoKGMpLGwucG9ydDEuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixvKSxyLmMucG9zdE1lc3NhZ2Uoe2V2ZW50VHlwZTp0LGV2ZW50SWQ6aSxkYXRhOnV9LFtsLnBvcnQyXSkpOm4oRXJyb3IoXCJjb25uZWN0aW9uX3VuYXZhaWxhYmxlXCIpKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHl1KHIsYyksdH0pLm8oZnVuY3Rpb24odCl7dGhyb3cgeXUocixjKSx0fSl9ZnVuY3Rpb24geXUodCxlKXt2YXIgbixyO2UmJihuPWUubWVzc2FnZUNoYW5uZWwscj1lLm9uTWVzc2FnZSxuJiYobi5wb3J0MS5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHIpLG4ucG9ydDEuY2xvc2UoKSksSCh0LmEsZnVuY3Rpb24odCl7cmV0dXJuIHQ9PWV9KSl9ZnVuY3Rpb24gbXUoKXtpZighSXUoKSl0aHJvdyBuZXcgSShcIndlYi1zdG9yYWdlLXVuc3VwcG9ydGVkXCIpO3RoaXMuYz17fSx0aGlzLmE9W10sdGhpcy5iPTAsdGhpcy5tPWwuaW5kZXhlZERCLHRoaXMudHlwZT1cImluZGV4ZWREQlwiLHRoaXMuZz10aGlzLnY9dGhpcy5mPXRoaXMubD1udWxsLHRoaXMucz0hMSx0aGlzLmg9bnVsbDt2YXIgdCxlLG4scj10aGlzO2NyKCkmJnNlbGY/KHRoaXMudj0obj1jcigpP3NlbGY6bnVsbCxqKGZ1LGZ1bmN0aW9uKHQpe3QuYj09biYmKGU9dCl9KSxlfHwoZT1uZXcgaHUobiksZnUucHVzaChlKSksZSkscHUodGhpcy52LFwia2V5Q2hhbmdlZFwiLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGt1KHIpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIDA8ZS5sZW5ndGgmJmooci5hLGZ1bmN0aW9uKHQpe3QoZSl9KSx7a2V5UHJvY2Vzc2VkOksoZSxuLmtleSl9fSl9KSxwdSh0aGlzLnYsXCJwaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gYmUoW1wia2V5Q2hhbmdlZFwiXSl9KSk6KCh0PWwubmF2aWdhdG9yKSYmdC5zZXJ2aWNlV29ya2VyP2JlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiB0LnNlcnZpY2VXb3JrZXIucmVhZHl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LmFjdGl2ZXx8bnVsbH0pLm8oZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pOmJlKG51bGwpKS50aGVuKGZ1bmN0aW9uKHQpeyhyLmg9dCkmJihyLmc9bmV3IHZ1KG5ldyBkdSh0KSksZ3Uoci5nLFwicGluZ1wiLG51bGwsITApLnRoZW4oZnVuY3Rpb24odCl7dFswXS5mdWxmaWxsZWQmJksodFswXS52YWx1ZSxcImtleUNoYW5nZWRcIikmJihyLnM9ITApfSkubyhmdW5jdGlvbigpe30pKX0pfWZ1bmN0aW9uIGJ1KGkpe3JldHVybiBuZXcgZmUoZnVuY3Rpb24oZSxuKXt2YXIgdD1pLm0ub3BlbihcImZpcmViYXNlTG9jYWxTdG9yYWdlRGJcIiwxKTt0Lm9uZXJyb3I9ZnVuY3Rpb24odCl7dHJ5e3QucHJldmVudERlZmF1bHQoKX1jYXRjaCh0KXt9bihFcnJvcih0LnRhcmdldC5lcnJvcikpfSx0Lm9udXBncmFkZW5lZWRlZD1mdW5jdGlvbih0KXt0PXQudGFyZ2V0LnJlc3VsdDt0cnl7dC5jcmVhdGVPYmplY3RTdG9yZShcImZpcmViYXNlTG9jYWxTdG9yYWdlXCIse2tleVBhdGg6XCJmYmFzZV9rZXlcIn0pfWNhdGNoKHQpe24odCl9fSx0Lm9uc3VjY2Vzcz1mdW5jdGlvbih0KXt2YXIgcjsodD10LnRhcmdldC5yZXN1bHQpLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJmaXJlYmFzZUxvY2FsU3RvcmFnZVwiKT9lKHQpOihyPWksbmV3IGZlKGZ1bmN0aW9uKHQsZSl7dmFyIG49ci5tLmRlbGV0ZURhdGFiYXNlKFwiZmlyZWJhc2VMb2NhbFN0b3JhZ2VEYlwiKTtuLm9uc3VjY2Vzcz1mdW5jdGlvbigpe3QoKX0sbi5vbmVycm9yPWZ1bmN0aW9uKHQpe2UoRXJyb3IodC50YXJnZXQuZXJyb3IpKX19KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGJ1KGkpfSkudGhlbihmdW5jdGlvbih0KXtlKHQpfSkubyhmdW5jdGlvbih0KXtuKHQpfSkpfX0pfWZ1bmN0aW9uIF91KHQpe3JldHVybiB0Lml8fCh0Lmk9YnUodCkpLHQuaX1mdW5jdGlvbiB3dShpLHQpe3ZhciBvPTA7cmV0dXJuIG5ldyBmZShmdW5jdGlvbiBlKG4scil7X3UoaSkudGhlbih0KS50aGVuKG4pLm8oZnVuY3Rpb24odCl7cmV0dXJuIDM8KytvP3ZvaWQgcih0KTpfdShpKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNsb3NlKCksaS5pPXZvaWQgMCxlKG4scil9KS5vKGZ1bmN0aW9uKHQpe3IodCl9KX0pfSl9ZnVuY3Rpb24gSXUoKXt0cnl7cmV0dXJuIGwuaW5kZXhlZERCfWNhdGNoKHQpe3JldHVybn19ZnVuY3Rpb24gVHUodCl7cmV0dXJuIHQub2JqZWN0U3RvcmUoXCJmaXJlYmFzZUxvY2FsU3RvcmFnZVwiKX1mdW5jdGlvbiBFdSh0LGUpe3JldHVybiB0LnRyYW5zYWN0aW9uKFtcImZpcmViYXNlTG9jYWxTdG9yYWdlXCJdLGU/XCJyZWFkd3JpdGVcIjpcInJlYWRvbmx5XCIpfWZ1bmN0aW9uIFN1KHQpe3JldHVybiBuZXcgZmUoZnVuY3Rpb24oZSxuKXt0Lm9uc3VjY2Vzcz1mdW5jdGlvbih0KXt0JiZ0LnRhcmdldD9lKHQudGFyZ2V0LnJlc3VsdCk6ZSgpfSx0Lm9uZXJyb3I9ZnVuY3Rpb24odCl7bih0LnRhcmdldC5lcnJvcil9fSl9ZnVuY3Rpb24gQ3UodCxlKXtyZXR1cm4gdC5nJiZ0LmgmJigobj1sLm5hdmlnYXRvcikmJm4uc2VydmljZVdvcmtlciYmbi5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXJ8fG51bGwpPT09dC5oP2d1KHQuZyxcImtleUNoYW5nZWRcIix7a2V5OmV9LHQucykudGhlbihmdW5jdGlvbigpe30pLm8oZnVuY3Rpb24oKXt9KTpiZSgpO3ZhciBufWZ1bmN0aW9uIGt1KHIpe3JldHVybiBfdShyKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBpPVR1KEV1KHQsITEpKTtyZXR1cm4gaS5nZXRBbGw/U3UoaS5nZXRBbGwoKSk6bmV3IGZlKGZ1bmN0aW9uKGUsbil7dmFyIHI9W10sdD1pLm9wZW5DdXJzb3IoKTt0Lm9uc3VjY2Vzcz1mdW5jdGlvbih0KXsodD10LnRhcmdldC5yZXN1bHQpPyhyLnB1c2godC52YWx1ZSksdC5jb250aW51ZSgpKTplKHIpfSx0Lm9uZXJyb3I9ZnVuY3Rpb24odCl7bih0LnRhcmdldC5lcnJvcil9fSl9KS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPXt9LG49W107aWYoMD09ci5iKXtmb3Iobj0wO248dC5sZW5ndGg7bisrKWVbdFtuXS5mYmFzZV9rZXldPXRbbl0udmFsdWU7bj1mdW5jdGlvbiB0KGUsbil7dmFyIHIsaT1bXTtmb3IociBpbiBlKXIgaW4gbiYmdHlwZW9mIGVbcl09PXR5cGVvZiBuW3JdP1wib2JqZWN0XCI9PXR5cGVvZiBlW3JdJiZudWxsIT1lW3JdJiZudWxsIT1uW3JdPzA8dChlW3JdLG5bcl0pLmxlbmd0aCYmaS5wdXNoKHIpOmVbcl0hPT1uW3JdJiZpLnB1c2gocik6aS5wdXNoKHIpO2ZvcihyIGluIG4pciBpbiBlfHxpLnB1c2gocik7cmV0dXJuIGl9KHIuYyxlKSxyLmM9ZX1yZXR1cm4gbn0pfWZ1bmN0aW9uIE51KHQpe3QubCYmdC5sLmNhbmNlbChcIlNUT1BfRVZFTlRcIiksdC5mJiYoY2xlYXJUaW1lb3V0KHQuZiksdC5mPW51bGwpfWZ1bmN0aW9uIEF1KHQpe3ZhciByPXRoaXMsaT1udWxsO3RoaXMuYT1bXSx0aGlzLnR5cGU9XCJpbmRleGVkREJcIix0aGlzLmM9dCx0aGlzLmI9YmUoKS50aGVuKGZ1bmN0aW9uKCl7aWYoSXUoKSl7dmFyIGU9a3IoKSxuPVwiX19zYWtcIitlO3JldHVybiBsdT1sdXx8bmV3IG11LChpPWx1KS5zZXQobixlKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGkuZ2V0KG4pfSkudGhlbihmdW5jdGlvbih0KXtpZih0IT09ZSl0aHJvdyBFcnJvcihcImluZGV4ZWREQiBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm4gaS5VKG4pfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBpfSkubyhmdW5jdGlvbigpe3JldHVybiByLmN9KX1yZXR1cm4gci5jfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gci50eXBlPXQudHlwZSx0LmNhKGZ1bmN0aW9uKGUpe2ooci5hLGZ1bmN0aW9uKHQpe3QoZSl9KX0pLHR9KX1mdW5jdGlvbiBSdSgpe3RoaXMuYT17fSx0aGlzLnR5cGU9XCJpbk1lbW9yeVwifWZ1bmN0aW9uIFB1KCl7aWYoIWZ1bmN0aW9uKCl7dmFyIHQ9XCJOb2RlXCI9PWhyKCk7aWYoISh0PU91KCl8fHQmJlhsLklOVEVSTkFMLm5vZGUmJlhsLklOVEVSTkFMLm5vZGUubG9jYWxTdG9yYWdlKSlyZXR1cm4hMTt0cnl7cmV0dXJuIHQuc2V0SXRlbShcIl9fc2FrXCIsXCIxXCIpLHQucmVtb3ZlSXRlbShcIl9fc2FrXCIpLCEwfWNhdGNoKHQpe3JldHVybiExfX0oKSl7aWYoXCJOb2RlXCI9PWhyKCkpdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiLFwiVGhlIExvY2FsU3RvcmFnZSBjb21wYXRpYmlsaXR5IGxpYnJhcnkgd2FzIG5vdCBmb3VuZC5cIik7dGhyb3cgbmV3IEkoXCJ3ZWItc3RvcmFnZS11bnN1cHBvcnRlZFwiKX10aGlzLmE9T3UoKXx8WGwuSU5URVJOQUwubm9kZS5sb2NhbFN0b3JhZ2UsdGhpcy50eXBlPVwibG9jYWxTdG9yYWdlXCJ9ZnVuY3Rpb24gT3UoKXt0cnl7dmFyIHQ9bC5sb2NhbFN0b3JhZ2UsZT1rcigpO3JldHVybiB0JiYodC5zZXRJdGVtKGUsXCIxXCIpLHQucmVtb3ZlSXRlbShlKSksdH1jYXRjaCh0KXtyZXR1cm4gbnVsbH19ZnVuY3Rpb24gRHUoKXt0aGlzLnR5cGU9XCJudWxsU3RvcmFnZVwifWZ1bmN0aW9uIHh1KCl7aWYoIWZ1bmN0aW9uKCl7dmFyIHQ9XCJOb2RlXCI9PWhyKCk7aWYoISh0PUx1KCl8fHQmJlhsLklOVEVSTkFMLm5vZGUmJlhsLklOVEVSTkFMLm5vZGUuc2Vzc2lvblN0b3JhZ2UpKXJldHVybiExO3RyeXtyZXR1cm4gdC5zZXRJdGVtKFwiX19zYWtcIixcIjFcIiksdC5yZW1vdmVJdGVtKFwiX19zYWtcIiksITB9Y2F0Y2godCl7cmV0dXJuITF9fSgpKXtpZihcIk5vZGVcIj09aHIoKSl0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIsXCJUaGUgU2Vzc2lvblN0b3JhZ2UgY29tcGF0aWJpbGl0eSBsaWJyYXJ5IHdhcyBub3QgZm91bmQuXCIpO3Rocm93IG5ldyBJKFwid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIil9dGhpcy5hPUx1KCl8fFhsLklOVEVSTkFMLm5vZGUuc2Vzc2lvblN0b3JhZ2UsdGhpcy50eXBlPVwic2Vzc2lvblN0b3JhZ2VcIn1mdW5jdGlvbiBMdSgpe3RyeXt2YXIgdD1sLnNlc3Npb25TdG9yYWdlLGU9a3IoKTtyZXR1cm4gdCYmKHQuc2V0SXRlbShlLFwiMVwiKSx0LnJlbW92ZUl0ZW0oZSkpLHR9Y2F0Y2godCl7cmV0dXJuIG51bGx9fWZ1bmN0aW9uIE11KCl7dmFyIHQ9e307dC5Ccm93c2VyPWp1LHQuTm9kZT1xdSx0LlJlYWN0TmF0aXZlPVZ1LHQuV29ya2VyPUJ1LHRoaXMuYT10W2hyKCldfWh1LnByb3RvdHlwZS5jPWZ1bmN0aW9uKG4pe3ZhciBlLHI9bi5kYXRhLmV2ZW50VHlwZSxpPW4uZGF0YS5ldmVudElkLHQ9dGhpcy5hW3JdO3QmJjA8dC5sZW5ndGgmJihuLnBvcnRzWzBdLnBvc3RNZXNzYWdlKHtzdGF0dXM6XCJhY2tcIixldmVudElkOmksZXZlbnRUeXBlOnIscmVzcG9uc2U6bnVsbH0pLGU9W10saih0LGZ1bmN0aW9uKHQpe2UucHVzaChiZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdChuLm9yaWdpbixuLmRhdGEuZGF0YSl9KSl9KSxJZShlKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPVtdO2oodCxmdW5jdGlvbih0KXtlLnB1c2goe2Z1bGZpbGxlZDp0LlBiLHZhbHVlOnQudmFsdWUscmVhc29uOnQucmVhc29uP3QucmVhc29uLm1lc3NhZ2U6dm9pZCAwfSl9KSxqKGUsZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpdm9pZCAwPT09dFtlXSYmZGVsZXRlIHRbZV19KSxuLnBvcnRzWzBdLnBvc3RNZXNzYWdlKHtzdGF0dXM6XCJkb25lXCIsZXZlbnRJZDppLGV2ZW50VHlwZTpyLHJlc3BvbnNlOmV9KX0pKX0sZHUucHJvdG90eXBlLnBvc3RNZXNzYWdlPWZ1bmN0aW9uKHQsZSl7dGhpcy5hLnBvc3RNZXNzYWdlKHQsZSl9LHZ1LnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe2Zvcig7MDx0aGlzLmEubGVuZ3RoOyl5dSh0aGlzLHRoaXMuYVswXSk7dGhpcy5iPSEwfSwodD1tdS5wcm90b3R5cGUpLnNldD1mdW5jdGlvbihyLGkpe3ZhciBvPXRoaXMsYT0hMTtyZXR1cm4gd3UodGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gU3UoKHQ9VHUoRXUodCwhMCkpKS5nZXQocikpfSkudGhlbihmdW5jdGlvbihuKXtyZXR1cm4gd3UobyxmdW5jdGlvbih0KXtpZih0PVR1KEV1KHQsITApKSxuKXJldHVybiBuLnZhbHVlPWksU3UodC5wdXQobikpO28uYisrLGE9ITA7dmFyIGU9e307cmV0dXJuIGUuZmJhc2Vfa2V5PXIsZS52YWx1ZT1pLFN1KHQuYWRkKGUpKX0pfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBvLmNbcl09aSxDdShvLHIpfSkub2EoZnVuY3Rpb24oKXthJiZvLmItLX0pfSx0LmdldD1mdW5jdGlvbihlKXtyZXR1cm4gd3UodGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gU3UoVHUoRXUodCwhMSkpLmdldChlKSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LnZhbHVlfSl9LHQuVT1mdW5jdGlvbihlKXt2YXIgbj10aGlzLHI9ITE7cmV0dXJuIHd1KHRoaXMsZnVuY3Rpb24odCl7cmV0dXJuIHI9ITAsbi5iKyssU3UoVHUoRXUodCwhMCkpLmRlbGV0ZShlKSl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGRlbGV0ZSBuLmNbZV0sQ3UobixlKX0pLm9hKGZ1bmN0aW9uKCl7ciYmbi5iLS19KX0sdC5jYT1mdW5jdGlvbih0KXt2YXIgbjswPT10aGlzLmEubGVuZ3RoJiYoTnUobj10aGlzKSxmdW5jdGlvbiBlKCl7bi5mPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLmw9a3UobikudGhlbihmdW5jdGlvbihlKXswPGUubGVuZ3RoJiZqKG4uYSxmdW5jdGlvbih0KXt0KGUpfSl9KS50aGVuKGZ1bmN0aW9uKCl7ZSgpfSkubyhmdW5jdGlvbih0KXtcIlNUT1BfRVZFTlRcIiE9dC5tZXNzYWdlJiZlKCl9KX0sODAwKX0oKSksdGhpcy5hLnB1c2godCl9LHQuaWE9ZnVuY3Rpb24oZSl7SCh0aGlzLmEsZnVuY3Rpb24odCl7cmV0dXJuIHQ9PWV9KSwwPT10aGlzLmEubGVuZ3RoJiZOdSh0aGlzKX0sKHQ9QXUucHJvdG90eXBlKS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYi50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldChlKX0pfSx0LnNldD1mdW5jdGlvbihlLG4pe3JldHVybiB0aGlzLmIudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdC5zZXQoZSxuKX0pfSx0LlU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYi50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LlUoZSl9KX0sdC5jYT1mdW5jdGlvbih0KXt0aGlzLmEucHVzaCh0KX0sdC5pYT1mdW5jdGlvbihlKXtIKHRoaXMuYSxmdW5jdGlvbih0KXtyZXR1cm4gdD09ZX0pfSwodD1SdS5wcm90b3R5cGUpLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gYmUodGhpcy5hW3RdKX0sdC5zZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hW3RdPWUsYmUoKX0sdC5VPWZ1bmN0aW9uKHQpe3JldHVybiBkZWxldGUgdGhpcy5hW3RdLGJlKCl9LHQuY2E9ZnVuY3Rpb24oKXt9LHQuaWE9ZnVuY3Rpb24oKXt9LCh0PVB1LnByb3RvdHlwZSkuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIGJlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBDcihlLmEuZ2V0SXRlbSh0KSl9KX0sdC5zZXQ9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzO3JldHVybiBiZSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgdD1FcihuKTtudWxsPT09dD9yLlUoZSk6ci5hLnNldEl0ZW0oZSx0KX0pfSx0LlU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gYmUoKS50aGVuKGZ1bmN0aW9uKCl7ZS5hLnJlbW92ZUl0ZW0odCl9KX0sdC5jYT1mdW5jdGlvbih0KXtsLndpbmRvdyYmJGUobC53aW5kb3csXCJzdG9yYWdlXCIsdCl9LHQuaWE9ZnVuY3Rpb24odCl7bC53aW5kb3cmJmVuKGwud2luZG93LFwic3RvcmFnZVwiLHQpfSwodD1EdS5wcm90b3R5cGUpLmdldD1mdW5jdGlvbigpe3JldHVybiBiZShudWxsKX0sdC5zZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gYmUoKX0sdC5VPWZ1bmN0aW9uKCl7cmV0dXJuIGJlKCl9LHQuY2E9ZnVuY3Rpb24oKXt9LHQuaWE9ZnVuY3Rpb24oKXt9LCh0PXh1LnByb3RvdHlwZSkuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIGJlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBDcihlLmEuZ2V0SXRlbSh0KSl9KX0sdC5zZXQ9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzO3JldHVybiBiZSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgdD1FcihuKTtudWxsPT09dD9yLlUoZSk6ci5hLnNldEl0ZW0oZSx0KX0pfSx0LlU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gYmUoKS50aGVuKGZ1bmN0aW9uKCl7ZS5hLnJlbW92ZUl0ZW0odCl9KX0sdC5jYT1mdW5jdGlvbigpe30sdC5pYT1mdW5jdGlvbigpe307dmFyIEZ1LFV1LGp1PXtGOlB1LGJiOnh1fSxxdT17RjpQdSxiYjp4dX0sVnU9e0Y6Y3UsYmI6RHV9LEJ1PXtGOlB1LGJiOkR1fSxLdT17cmQ6XCJsb2NhbFwiLE5PTkU6XCJub25lXCIsdGQ6XCJzZXNzaW9uXCJ9O2Z1bmN0aW9uIFd1KCl7dmFyIHQ9IShOcih5cigpKXx8IXVyKCkpLGU9VHIoKSxuPWJyKCk7dGhpcy5tPXQsdGhpcy5oPWUsdGhpcy5sPW4sdGhpcy5hPXt9LHQ9RnU9RnV8fG5ldyBNdTt0cnl7dGhpcy5nPSEkbigpJiZ4cigpfHwhbC5pbmRleGVkREI/bmV3IHQuYS5GOm5ldyBBdShuZXcoY3IoKT9SdTp0LmEuRikpfWNhdGNoKHQpe3RoaXMuZz1uZXcgUnUsdGhpcy5oPSEwfXRyeXt0aGlzLmk9bmV3IHQuYS5iYn1jYXRjaCh0KXt0aGlzLmk9bmV3IFJ1fXRoaXMudj1uZXcgUnUsdGhpcy5mPW0odGhpcy5ZYix0aGlzKSx0aGlzLmI9e319ZnVuY3Rpb24gSHUoKXtyZXR1cm4gVXU9VXV8fG5ldyBXdX1mdW5jdGlvbiBHdSh0LGUpe3N3aXRjaChlKXtjYXNlXCJzZXNzaW9uXCI6cmV0dXJuIHQuaTtjYXNlXCJub25lXCI6cmV0dXJuIHQudjtkZWZhdWx0OnJldHVybiB0Lmd9fWZ1bmN0aW9uIHp1KHQsZSl7cmV0dXJuXCJmaXJlYmFzZTpcIit0Lm5hbWUrKGU/XCI6XCIrZTpcIlwiKX1mdW5jdGlvbiBRdSh0LGUsbil7cmV0dXJuIG49enUoZSxuKSxcImxvY2FsXCI9PWUuRiYmKHQuYltuXT1udWxsKSxHdSh0LGUuRikuVShuKX1mdW5jdGlvbiBZdSh0KXt0LmMmJihjbGVhckludGVydmFsKHQuYyksdC5jPW51bGwpfWZ1bmN0aW9uIFh1KHQpe3RoaXMuYT10LHRoaXMuYj1IdSgpfSh0PVd1LnByb3RvdHlwZSkuZ2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEd1KHRoaXMsdC5GKS5nZXQoenUodCxlKSl9LHQuc2V0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj16dShlLG4pLGk9dGhpcyxvPUd1KHRoaXMsZS5GKTtyZXR1cm4gby5zZXQocix0KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG8uZ2V0KHIpfSkudGhlbihmdW5jdGlvbih0KXtcImxvY2FsXCI9PWUuRiYmKGkuYltyXT10KX0pfSx0LmFkZExpc3RlbmVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcjt0PXp1KHQsZSksdGhpcy5sJiYodGhpcy5iW3RdPWwubG9jYWxTdG9yYWdlLmdldEl0ZW0odCkpLHV0KHRoaXMuYSkmJihHdSh0aGlzLFwibG9jYWxcIikuY2EodGhpcy5mKSx0aGlzLmh8fCgkbigpfHwheHIoKSkmJmwuaW5kZXhlZERCfHwhdGhpcy5sfHwoWXUocj10aGlzKSxyLmM9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gci5hKXt2YXIgZT1sLmxvY2FsU3RvcmFnZS5nZXRJdGVtKHQpLG49ci5iW3RdO2UhPW4mJihyLmJbdF09ZSxlPW5ldyBWZSh7dHlwZTpcInN0b3JhZ2VcIixrZXk6dCx0YXJnZXQ6d2luZG93LG9sZFZhbHVlOm4sbmV3VmFsdWU6ZSxhOiEwfSksci5ZYihlKSl9fSwxZTMpKSksdGhpcy5hW3RdfHwodGhpcy5hW3RdPVtdKSx0aGlzLmFbdF0ucHVzaChuKX0sdC5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0LGUsbil7dD16dSh0LGUpLHRoaXMuYVt0XSYmKEgodGhpcy5hW3RdLGZ1bmN0aW9uKHQpe3JldHVybiB0PT1ufSksMD09dGhpcy5hW3RdLmxlbmd0aCYmZGVsZXRlIHRoaXMuYVt0XSksdXQodGhpcy5hKSYmKEd1KHRoaXMsXCJsb2NhbFwiKS5pYSh0aGlzLmYpLFl1KHRoaXMpKX0sdC5ZYj1mdW5jdGlvbih0KXtpZih0JiZ0Lmcpe3ZhciBlPXQuYS5rZXk7aWYobnVsbD09ZSlmb3IodmFyIG4gaW4gdGhpcy5hKXt2YXIgcj10aGlzLmJbbl07dm9pZCAwPT09ciYmKHI9bnVsbCk7dmFyIGk9bC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShuKTtpIT09ciYmKHRoaXMuYltuXT1pLHRoaXMubWIobikpfWVsc2UgaWYoMD09ZS5pbmRleE9mKFwiZmlyZWJhc2U6XCIpJiZ0aGlzLmFbZV0pe2lmKHZvaWQgMCE9PXQuYS5hP0d1KHRoaXMsXCJsb2NhbFwiKS5pYSh0aGlzLmYpOll1KHRoaXMpLHRoaXMubSlpZihuPWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oZSksKHI9dC5hLm5ld1ZhbHVlKSE9PW4pbnVsbCE9PXI/bC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShlLHIpOmwubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oZSk7ZWxzZSBpZih0aGlzLmJbZV09PT1yJiZ2b2lkIDA9PT10LmEuYSlyZXR1cm47dmFyIG89dGhpcyxuPWZ1bmN0aW9uKCl7dm9pZCAwPT09dC5hLmEmJm8uYltlXT09PWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oZSl8fChvLmJbZV09bC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKSxvLm1iKGUpKX07QnQmJiR0JiYxMD09JHQmJmwubG9jYWxTdG9yYWdlLmdldEl0ZW0oZSkhPT10LmEubmV3VmFsdWUmJnQuYS5uZXdWYWx1ZSE9PXQuYS5vbGRWYWx1ZT9zZXRUaW1lb3V0KG4sMTApOm4oKX19ZWxzZSBqKHQsbSh0aGlzLm1iLHRoaXMpKX0sdC5tYj1mdW5jdGlvbih0KXt0aGlzLmFbdF0mJmoodGhpcy5hW3RdLGZ1bmN0aW9uKHQpe3QoKX0pfTt2YXIgSnUsJHU9e25hbWU6XCJhdXRoRXZlbnRcIixGOlwibG9jYWxcIn07ZnVuY3Rpb24gWnUoKXt0aGlzLmE9SHUoKX1mdW5jdGlvbiB0Yyh0LGUpe3RoaXMuYj1lYyx0aGlzLmY9bC5VaW50OEFycmF5P25ldyBVaW50OEFycmF5KHRoaXMuYik6QXJyYXkodGhpcy5iKSx0aGlzLmc9dGhpcy5jPTAsdGhpcy5hPVtdLHRoaXMuaT10LHRoaXMuaD1lLHRoaXMubD1sLkludDMyQXJyYXk/bmV3IEludDMyQXJyYXkoNjQpOkFycmF5KDY0KSx2b2lkIDA9PT1KdSYmKEp1PWwuSW50MzJBcnJheT9uZXcgSW50MzJBcnJheSh1Yyk6dWMpLHRoaXMucmVzZXQoKX1fKHRjLGZ1bmN0aW9uKCl7dGhpcy5iPS0xfSk7Zm9yKHZhciBlYz02NCxuYz1lYy0xLHJjPVtdLGljPTA7aWM8bmM7aWMrKylyY1tpY109MDt2YXIgb2M9RygxMjgscmMpO2Z1bmN0aW9uIGFjKHQpe2Zvcih2YXIgZT10LmYsbj10Lmwscj0wLGk9MDtpPGUubGVuZ3RoOyluW3IrK109ZVtpXTw8MjR8ZVtpKzFdPDwxNnxlW2krMl08PDh8ZVtpKzNdLGk9NCpyO2ZvcihlPTE2O2U8NjQ7ZSsrKXt2YXIgaT0wfG5bZS0xNV0scj0wfG5bZS0yXSxvPSgwfG5bZS0xNl0pKygoaT4+Pjd8aTw8MjUpXihpPj4+MTh8aTw8MTQpXmk+Pj4zKXwwLGE9KDB8bltlLTddKSsoKHI+Pj4xN3xyPDwxNSleKHI+Pj4xOXxyPDwxMylecj4+PjEwKXwwO25bZV09bythfDB9cj0wfHQuYVswXSxpPTB8dC5hWzFdO3ZhciBzPTB8dC5hWzJdLHU9MHx0LmFbM10sYz0wfHQuYVs0XSxoPTB8dC5hWzVdLGw9MHx0LmFbNl07Zm9yKG89MHx0LmFbN10sZT0wO2U8NjQ7ZSsrKXt2YXIgZj0oKHI+Pj4yfHI8PDMwKV4ocj4+PjEzfHI8PDE5KV4ocj4+PjIyfHI8PDEwKSkrKHImaV5yJnNeaSZzKXwwO2E9KG89bysoKGM+Pj42fGM8PDI2KV4oYz4+PjExfGM8PDIxKV4oYz4+PjI1fGM8PDcpKXwwKSsoKGE9KGE9YyZoXn5jJmwpKygwfEp1W2VdKXwwKSsoMHxuW2VdKXwwKXwwLG89bCxsPWgsaD1jLGM9dSthfDAsdT1zLHM9aSxpPXIscj1hK2Z8MH10LmFbMF09dC5hWzBdK3J8MCx0LmFbMV09dC5hWzFdK2l8MCx0LmFbMl09dC5hWzJdK3N8MCx0LmFbM109dC5hWzNdK3V8MCx0LmFbNF09dC5hWzRdK2N8MCx0LmFbNV09dC5hWzVdK2h8MCx0LmFbNl09dC5hWzZdK2x8MCx0LmFbN109dC5hWzddK298MH1mdW5jdGlvbiBzYyh0LGUsbil7dm9pZCAwPT09biYmKG49ZS5sZW5ndGgpO3ZhciByPTAsaT10LmM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpZm9yKDtyPG47KXQuZltpKytdPWUuY2hhckNvZGVBdChyKyspLGk9PXQuYiYmKGFjKHQpLGk9MCk7ZWxzZXtpZighZChlKSl0aHJvdyBFcnJvcihcIm1lc3NhZ2UgbXVzdCBiZSBzdHJpbmcgb3IgYXJyYXlcIik7Zm9yKDtyPG47KXt2YXIgbz1lW3IrK107aWYoIShcIm51bWJlclwiPT10eXBlb2YgbyYmMDw9byYmbzw9MjU1JiZvPT0oMHxvKSkpdGhyb3cgRXJyb3IoXCJtZXNzYWdlIG11c3QgYmUgYSBieXRlIGFycmF5XCIpO3QuZltpKytdPW8saT09dC5iJiYoYWModCksaT0wKX19dC5jPWksdC5nKz1ufXRjLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuZz10aGlzLmM9MCx0aGlzLmE9bC5JbnQzMkFycmF5P25ldyBJbnQzMkFycmF5KHRoaXMuaCk6eih0aGlzLmgpfTt2YXIgdWM9WzExMTYzNTI0MDgsMTg5OTQ0NzQ0MSwzMDQ5MzIzNDcxLDM5MjEwMDk1NzMsOTYxOTg3MTYzLDE1MDg5NzA5OTMsMjQ1MzYzNTc0OCwyODcwNzYzMjIxLDM2MjQzODEwODAsMzEwNTk4NDAxLDYwNzIyNTI3OCwxNDI2ODgxOTg3LDE5MjUwNzgzODgsMjE2MjA3ODIwNiwyNjE0ODg4MTAzLDMyNDgyMjI1ODAsMzgzNTM5MDQwMSw0MDIyMjI0Nzc0LDI2NDM0NzA3OCw2MDQ4MDc2MjgsNzcwMjU1OTgzLDEyNDkxNTAxMjIsMTU1NTA4MTY5MiwxOTk2MDY0OTg2LDI1NTQyMjA4ODIsMjgyMTgzNDM0OSwyOTUyOTk2ODA4LDMyMTAzMTM2NzEsMzMzNjU3MTg5MSwzNTg0NTI4NzExLDExMzkyNjk5MywzMzgyNDE4OTUsNjY2MzA3MjA1LDc3MzUyOTkxMiwxMjk0NzU3MzcyLDEzOTYxODIyOTEsMTY5NTE4MzcwMCwxOTg2NjYxMDUxLDIxNzcwMjYzNTAsMjQ1Njk1NjAzNywyNzMwNDg1OTIxLDI4MjAzMDI0MTEsMzI1OTczMDgwMCwzMzQ1NzY0NzcxLDM1MTYwNjU4MTcsMzYwMDM1MjgwNCw0MDk0NTcxOTA5LDI3NTQyMzM0NCw0MzAyMjc3MzQsNTA2OTQ4NjE2LDY1OTA2MDU1Niw4ODM5OTc4NzcsOTU4MTM5NTcxLDEzMjI4MjIyMTgsMTUzNzAwMjA2MywxNzQ3ODczNzc5LDE5NTU1NjIyMjIsMjAyNDEwNDgxNSwyMjI3NzMwNDUyLDIzNjE4NTI0MjQsMjQyODQzNjQ3NCwyNzU2NzM0MTg3LDMyMDQwMzE0NzksMzMyOTMyNTI5OF07ZnVuY3Rpb24gY2MoKXt0Yy5jYWxsKHRoaXMsOCxoYyl9XyhjYyx0Yyk7dmFyIGhjPVsxNzc5MDMzNzAzLDMxNDQxMzQyNzcsMTAxMzkwNDI0MiwyNzczNDgwNzYyLDEzNTk4OTMxMTksMjYwMDgyMjkyNCw1Mjg3MzQ2MzUsMTU0MTQ1OTIyNV07ZnVuY3Rpb24gbGModCxlLG4scixpLG8pe3RoaXMudj10LHRoaXMuaT1lLHRoaXMubD1uLHRoaXMubT1yfHxudWxsLHRoaXMudT1pfHxudWxsLHRoaXMucz1vLHRoaXMuaD1lK1wiOlwiK24sdGhpcy5DPW5ldyBadSx0aGlzLmc9bmV3IFh1KHRoaXMuaCksdGhpcy5mPW51bGwsdGhpcy5iPVtdLHRoaXMuYT10aGlzLmM9bnVsbH1mdW5jdGlvbiBmYyh0KXtyZXR1cm4gbmV3IEkoXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiLHQpfWZ1bmN0aW9uIHBjKHQpe3ZhciBlPW5ldyBjYztzYyhlLHQpLHQ9W107dmFyIG49OCplLmc7ZS5jPDU2P3NjKGUsb2MsNTYtZS5jKTpzYyhlLG9jLGUuYi0oZS5jLTU2KSk7Zm9yKHZhciByPTYzOzU2PD1yO3ItLSllLmZbcl09MjU1Jm4sbi89MjU2O2ZvcihhYyhlKSxyPW49MDtyPGUuaTtyKyspZm9yKHZhciBpPTI0OzA8PWk7aS09OCl0W24rK109ZS5hW3JdPj5pJjI1NTtyZXR1cm4gVih0LGZ1bmN0aW9uKHQpe3JldHVybiAxPCh0PXQudG9TdHJpbmcoMTYpKS5sZW5ndGg/dDpcIjBcIit0fSkuam9pbihcIlwiKX1mdW5jdGlvbiBkYyh0LGUpe2Zvcih2YXIgbj0wO248dC5iLmxlbmd0aDtuKyspdHJ5e3QuYltuXShlKX1jYXRjaCh0KXt9fWZ1bmN0aW9uIHZjKHMpe3JldHVybiBzLmZ8fChzLmY9cy5tYSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGZlKGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIGUocil7dD0hMCxhJiZhLmNhbmNlbCgpLGdjKGkpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGUsbj1vO3QmJnImJnIudXJsJiYoZT1udWxsLG49KGU9LTEhPShuPVFpKHIudXJsKSkuaW5kZXhPZihcIi9fXy9hdXRoL2NhbGxiYWNrXCIpPyhlPVwib2JqZWN0XCI9PXR5cGVvZihlPUNyKE5uKGU9QW4obiksXCJmaXJlYmFzZUVycm9yXCIpfHxudWxsKSk/VChlKTpudWxsKT9uZXcgUm8odC5jLHQuYixudWxsLG51bGwsZSxudWxsLHQuVCgpKTpuZXcgUm8odC5jLHQuYixuLHQuZixudWxsLG51bGwsdC5UKCkpOmUpfHxvKSxkYyhpLG4pfSl9dmFyIGksbyx0LGEscjtzLkVhKGZ1bmN0aW9uIHQoZSl7cmV0dXJuIG4oZSkscy5TYSh0KSwhMX0pLGk9cyxvPW5ldyBSbyhcInVua25vd25cIixudWxsLG51bGwsbnVsbCxuZXcgSShcIm5vLWF1dGgtZXZlbnRcIikpLHQ9ITEsYT1nbig1MDApLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZ2MoaSkudGhlbihmdW5jdGlvbigpe3R8fGRjKGksbyl9KX0pLHI9bC5oYW5kbGVPcGVuVVJMLGwuaGFuZGxlT3BlblVSTD1mdW5jdGlvbih0KXtpZigwPT10LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihtcihcIkJ1aWxkSW5mby5wYWNrYWdlTmFtZVwiLGwpLnRvTG93ZXJDYXNlKCkrXCI6Ly9cIikmJmUoe3VybDp0fSksXCJmdW5jdGlvblwiPT10eXBlb2Ygcil0cnl7cih0KX1jYXRjaCh0KXtjb25zb2xlLmVycm9yKHQpfX0seG89eG98fG5ldyBPbyxmdW5jdGlvbih0KXt2YXIgbj14bztuLmEucHVzaCh0KSxuLmJ8fChuLmI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTxuLmEubGVuZ3RoO2UrKyluLmFbZV0odCl9LFwiZnVuY3Rpb25cIj09dHlwZW9mKHQ9bXIoXCJ1bml2ZXJzYWxMaW5rcy5zdWJzY3JpYmVcIixsKSkmJnQobnVsbCxuLmIpKX0oZSl9KX0pKSxzLmZ9ZnVuY3Rpb24gZ2MoZSl7dmFyIHQsbj1udWxsO3JldHVybih0PWUuZykuYi5nZXQoJHUsdC5hKS50aGVuKFBvKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuPXQsUXUoKHQ9ZS5nKS5iLCR1LHQuYSl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG59KX1mdW5jdGlvbiB5Yyh0KXt0aGlzLmE9dCx0aGlzLmI9SHUoKX0odD1sYy5wcm90b3R5cGUpLm1hPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuSWF8fCh0aGlzLklhPShzcih2b2lkIDApP2FyKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBuZXcgZmUoZnVuY3Rpb24odCxlKXt2YXIgbj1sLmRvY3VtZW50LHI9c2V0VGltZW91dChmdW5jdGlvbigpe2UoRXJyb3IoXCJDb3Jkb3ZhIGZyYW1ld29yayBpcyBub3QgcmVhZHkuXCIpKX0sMWUzKTtuLmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHIpLHQoKX0sITEpfSl9KTpfZShFcnJvcihcIkNvcmRvdmEgbXVzdCBydW4gaW4gYW4gQW5kcm9pZCBvciBpT1MgZmlsZSBzY2hlbWUuXCIpKSkudGhlbihmdW5jdGlvbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG1yKFwidW5pdmVyc2FsTGlua3Muc3Vic2NyaWJlXCIsbCkpdGhyb3cgZmMoXCJjb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW4tZml4IGlzIG5vdCBpbnN0YWxsZWRcIik7aWYodm9pZCAwPT09bXIoXCJCdWlsZEluZm8ucGFja2FnZU5hbWVcIixsKSl0aHJvdyBmYyhcImNvcmRvdmEtcGx1Z2luLWJ1aWxkaW5mbyBpcyBub3QgaW5zdGFsbGVkXCIpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG1yKFwiY29yZG92YS5wbHVnaW5zLmJyb3dzZXJ0YWIub3BlblVybFwiLGwpKXRocm93IGZjKFwiY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYiBpcyBub3QgaW5zdGFsbGVkXCIpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG1yKFwiY29yZG92YS5JbkFwcEJyb3dzZXIub3BlblwiLGwpKXRocm93IGZjKFwiY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyIGlzIG5vdCBpbnN0YWxsZWRcIil9LGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEkoXCJjb3Jkb3ZhLW5vdC1yZWFkeVwiKX0pKX0sdC5PYj1mdW5jdGlvbih0LGUpe3JldHVybiBlKG5ldyBJKFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiKSksYmUoKX0sdC5NYj1mdW5jdGlvbigpe3JldHVybiBfZShuZXcgSShcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIikpfSx0LiRiPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHQuWGI9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sdC5UYj1mdW5jdGlvbigpe3JldHVybiEwfSx0Lk5iPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHRoaXMuYylyZXR1cm4gX2UobmV3IEkoXCJyZWRpcmVjdC1vcGVyYXRpb24tcGVuZGluZ1wiKSk7dmFyIGk9dGhpcyxvPWwuZG9jdW1lbnQsYT1udWxsLHM9bnVsbCx1PW51bGwsYz1udWxsO3JldHVybiB0aGlzLmM9YmUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIEFvKGUpLHZjKGkpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihuLHQsZSxyLGkpe3ZhciBvPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTIwLGU9W107MDx0OyllLnB1c2goXCIxMjM0NTY3ODkwYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwiLmNoYXJBdChNYXRoLmZsb29yKDYyKk1hdGgucmFuZG9tKCkpKSksdC0tO3JldHVybiBlLmpvaW4oXCJcIil9KCksYT1uZXcgUm8odCxyLG51bGwsbyxuZXcgSShcIm5vLWF1dGgtZXZlbnRcIiksbnVsbCxpKSxzPW1yKFwiQnVpbGRJbmZvLnBhY2thZ2VOYW1lXCIsbCk7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHMpdGhyb3cgbmV3IEkoXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiKTt2YXIgdT1tcihcIkJ1aWxkSW5mby5kaXNwbGF5TmFtZVwiLGwpLGM9e307aWYoeXIoKS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9pcGhvbmV8aXBhZHxpcG9kLykpYy5pYmk9cztlbHNle2lmKCF5cigpLnRvTG93ZXJDYXNlKCkubWF0Y2goL2FuZHJvaWQvKSlyZXR1cm4gX2UobmV3IEkoXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIpKTtjLmFwbj1zfXUmJihjLmFwcERpc3BsYXlOYW1lPXUpLG89cGMobyksYy5zZXNzaW9uSWQ9bzt2YXIgaD11dShuLnYsbi5pLG4ubCx0LGUsbnVsbCxyLG4ubSxjLG4udSxpLG4ucyk7cmV0dXJuIG4ubWEoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIHQ9bi5oO3JldHVybiBuLkMuYS5zZXQoJHUsYS53KCksdCl9KS50aGVuKGZ1bmN0aW9uKCl7dmFyIHQ9bXIoXCJjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5pc0F2YWlsYWJsZVwiLGwpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IEkoXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiKTt2YXIgZT1udWxsO3QoZnVuY3Rpb24odCl7aWYodCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YoZT1tcihcImNvcmRvdmEucGx1Z2lucy5icm93c2VydGFiLm9wZW5VcmxcIixsKSkpdGhyb3cgbmV3IEkoXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiKTtlKGgpfWVsc2V7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YoZT1tcihcImNvcmRvdmEuSW5BcHBCcm93c2VyLm9wZW5cIixsKSkpdGhyb3cgbmV3IEkoXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiKTt0PXlyKCksbi5hPWUoaCx0Lm1hdGNoKC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDdfXFxkL2kpfHx0Lm1hdGNoKC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDhfXFxkL2kpP1wiX2JsYW5rXCI6XCJfc3lzdGVtXCIsXCJsb2NhdGlvbj15ZXNcIil9fSl9KX0oaSx0LGUsbixyKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGZlKGZ1bmN0aW9uKGUsdCl7cz1mdW5jdGlvbigpe3ZhciB0PW1yKFwiY29yZG92YS5wbHVnaW5zLmJyb3dzZXJ0YWIuY2xvc2VcIixsKTtyZXR1cm4gZSgpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQoKSxpLmEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkuYS5jbG9zZSYmKGkuYS5jbG9zZSgpLGkuYT1udWxsKSwhMX0saS5FYShzKSx1PWZ1bmN0aW9uKCl7YT1hfHxnbigyZTMpLnRoZW4oZnVuY3Rpb24oKXt0KG5ldyBJKFwicmVkaXJlY3QtY2FuY2VsbGVkLWJ5LXVzZXJcIikpfSl9LGM9ZnVuY3Rpb24oKXtQcigpJiZ1KCl9LG8uYWRkRXZlbnRMaXN0ZW5lcihcInJlc3VtZVwiLHUsITEpLHlyKCkudG9Mb3dlckNhc2UoKS5tYXRjaCgvYW5kcm9pZC8pfHxvLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsYywhMSl9KS5vKGZ1bmN0aW9uKHQpe3JldHVybiBnYyhpKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgdH0pfSl9KS5vYShmdW5jdGlvbigpe3UmJm8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc3VtZVwiLHUsITEpLGMmJm8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIixjLCExKSxhJiZhLmNhbmNlbCgpLHMmJmkuU2EocyksaS5jPW51bGx9KX0sdC5FYT1mdW5jdGlvbihlKXt0aGlzLmIucHVzaChlKSx2Yyh0aGlzKS5vKGZ1bmN0aW9uKHQpe1wiYXV0aC9pbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiPT09dC5jb2RlJiYodD1uZXcgUm8oXCJ1bmtub3duXCIsbnVsbCxudWxsLG51bGwsbmV3IEkoXCJuby1hdXRoLWV2ZW50XCIpKSxlKHQpKX0pfSx0LlNhPWZ1bmN0aW9uKGUpe0godGhpcy5iLGZ1bmN0aW9uKHQpe3JldHVybiB0PT1lfSl9O3ZhciBtYz17bmFtZTpcInBlbmRpbmdSZWRpcmVjdFwiLEY6XCJzZXNzaW9uXCJ9O2Z1bmN0aW9uIGJjKHQpe3JldHVybiBRdSh0LmIsbWMsdC5hKX1mdW5jdGlvbiBfYyh0LGUsbixyKXt0aGlzLmk9e30sdGhpcy51PTAsdGhpcy5EPXQsdGhpcy52PWUsdGhpcy5tPW4sdGhpcy5KPXIsdGhpcy5oPVtdLHRoaXMuZj0hMSx0aGlzLmw9bSh0aGlzLnMsdGhpcyksdGhpcy5iPW5ldyBMYyx0aGlzLkM9bmV3IHFjLHRoaXMuZz1uZXcgeWMoRGModGhpcy52LHRoaXMubSkpLHRoaXMuYz17fSx0aGlzLmMudW5rbm93bj10aGlzLmIsdGhpcy5jLnNpZ25JblZpYVJlZGlyZWN0PXRoaXMuYix0aGlzLmMubGlua1ZpYVJlZGlyZWN0PXRoaXMuYix0aGlzLmMucmVhdXRoVmlhUmVkaXJlY3Q9dGhpcy5iLHRoaXMuYy5zaWduSW5WaWFQb3B1cD10aGlzLkMsdGhpcy5jLmxpbmtWaWFQb3B1cD10aGlzLkMsdGhpcy5jLnJlYXV0aFZpYVBvcHVwPXRoaXMuQyx0aGlzLmE9d2ModGhpcy5ELHRoaXMudix0aGlzLm0sRSx0aGlzLkopfWZ1bmN0aW9uIHdjKHQsZSxuLHIsaSl7dmFyIG89WGwuU0RLX1ZFUlNJT058fG51bGw7cmV0dXJuIG5ldyhzcigpP2xjOml1KSh0LGUsbixvLHIsaSl9ZnVuY3Rpb24gSWMoZSl7ZS5mfHwoZS5mPSEwLGUuYS5FYShlLmwpKTt2YXIgbj1lLmE7cmV0dXJuIGUuYS5tYSgpLm8oZnVuY3Rpb24odCl7dGhyb3cgZS5hPT1uJiZlLnJlc2V0KCksdH0pfWZ1bmN0aW9uIFRjKG4pe24uYS5YYigpJiZJYyhuKS5vKGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBSbyhcInVua25vd25cIixudWxsLG51bGwsbnVsbCxuZXcgSShcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIikpO0FjKHQpJiZuLnMoZSl9KSxuLmEuVGIoKXx8TWMobi5iKX1mdW5jdGlvbiBFYyhuLHQpe0sobi5oLHQpfHxuLmgucHVzaCh0KSxuLmZ8fCh0PW4uZykuYi5nZXQobWMsdC5hKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVyblwicGVuZGluZ1wiPT10fSkudGhlbihmdW5jdGlvbih0KXt0P2JjKG4uZykudGhlbihmdW5jdGlvbigpe0ljKG4pLm8oZnVuY3Rpb24odCl7dmFyIGU9bmV3IFJvKFwidW5rbm93blwiLG51bGwsbnVsbCxudWxsLG5ldyBJKFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiKSk7QWModCkmJm4ucyhlKX0pfSk6VGMobil9KS5vKGZ1bmN0aW9uKCl7VGMobil9KX1mdW5jdGlvbiBTYyh0LGUpe0godC5oLGZ1bmN0aW9uKHQpe3JldHVybiB0PT1lfSl9X2MucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5mPSExLHRoaXMuYS5TYSh0aGlzLmwpLHRoaXMuYT13Yyh0aGlzLkQsdGhpcy52LHRoaXMubSxudWxsLHRoaXMuSiksdGhpcy5pPXt9fSxfYy5wcm90b3R5cGUucz1mdW5jdGlvbih0KXtpZighdCl0aHJvdyBuZXcgSShcImludmFsaWQtYXV0aC1ldmVudFwiKTtpZig2ZTU8PURhdGUubm93KCktdGhpcy51JiYodGhpcy5pPXt9LHRoaXMudT0wKSx0JiZ0LmdldFVpZCgpJiZ0aGlzLmkuaGFzT3duUHJvcGVydHkodC5nZXRVaWQoKSkpcmV0dXJuITE7Zm9yKHZhciBlPSExLG49MDtuPHRoaXMuaC5sZW5ndGg7bisrKXt2YXIgcj10aGlzLmhbbl07aWYoci5GYih0LmMsdC5iKSl7KGU9dGhpcy5jW3QuY10pJiYoZS5oKHQsciksdCYmKHQuZnx8dC5iKSYmKHRoaXMuaVt0LmdldFVpZCgpXT0hMCx0aGlzLnU9RGF0ZS5ub3coKSkpLGU9ITA7YnJlYWt9fXJldHVybiBNYyh0aGlzLmIpLGV9O3ZhciBDYz1uZXcgUnIoMmUzLDFlNCksa2M9bmV3IFJyKDNlNCw2ZTQpO2Z1bmN0aW9uIE5jKHQsZSxuLHIsaSxvLGEpe3JldHVybiB0LmEuTWIoZSxuLHIsZnVuY3Rpb24oKXt0LmZ8fCh0LmY9ITAsdC5hLkVhKHQubCkpfSxmdW5jdGlvbigpe3QucmVzZXQoKX0saSxvLGEpfWZ1bmN0aW9uIEFjKHQpe3JldHVybiEoIXR8fFwiYXV0aC9jb3Jkb3ZhLW5vdC1yZWFkeVwiIT10LmNvZGUpfWZ1bmN0aW9uIFJjKGUsdCxuLHIsaSl7dmFyIG8sYTtyZXR1cm4oYT1lLmcpLmIuc2V0KG1jLFwicGVuZGluZ1wiLGEuYSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlLmEuTmIodCxuLHIsaSkubyhmdW5jdGlvbih0KXtpZihBYyh0KSl0aHJvdyBuZXcgSShcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIik7cmV0dXJuIG89dCxiYyhlLmcpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBvfSl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUuYS4kYigpP25ldyBmZShmdW5jdGlvbigpe30pOmJjKGUuZykudGhlbihmdW5jdGlvbigpe3JldHVybiBlLnFhKCl9KS50aGVuKGZ1bmN0aW9uKCl7fSkubyhmdW5jdGlvbigpe30pfSl9KX1mdW5jdGlvbiBQYyh0LGUsbixyLGkpe3JldHVybiB0LmEuT2IocixmdW5jdGlvbih0KXtlLm5hKG4sbnVsbCx0LGkpfSxDYy5nZXQoKSl9X2MucHJvdG90eXBlLnFhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYi5xYSgpfTt2YXIgT2M9e307ZnVuY3Rpb24gRGModCxlLG4pe3JldHVybiB0PXQrXCI6XCIrZSx0PW4/dCtcIjpcIituLnVybDp0fWZ1bmN0aW9uIHhjKHQsZSxuLHIpe3ZhciBpPURjKGUsbixyKTtyZXR1cm4gT2NbaV18fChPY1tpXT1uZXcgX2ModCxlLG4scikpLE9jW2ldfWZ1bmN0aW9uIExjKCl7dGhpcy5iPW51bGwsdGhpcy5mPVtdLHRoaXMuYz1bXSx0aGlzLmE9bnVsbCx0aGlzLmk9dGhpcy5nPSExfWZ1bmN0aW9uIE1jKHQpe3QuZ3x8KHQuZz0hMCxqYyh0LCExLG51bGwsbnVsbCkpfWZ1bmN0aW9uIEZjKHQpe3QuZyYmIXQuaSYmamModCwhMSxudWxsLG51bGwpfWZ1bmN0aW9uIFVjKHQsZSl7aWYodC5iPWZ1bmN0aW9uKCl7cmV0dXJuIGJlKGUpfSx0LmYubGVuZ3RoKWZvcih2YXIgbj0wO248dC5mLmxlbmd0aDtuKyspdC5mW25dKGUpfWZ1bmN0aW9uIGpjKHQsZSxuLHIpe2U/cj9mdW5jdGlvbih0LGUpe2lmKHQuYj1mdW5jdGlvbigpe3JldHVybiBfZShlKX0sdC5jLmxlbmd0aClmb3IodmFyIG49MDtuPHQuYy5sZW5ndGg7bisrKXQuY1tuXShlKX0odCxyKTpVYyh0LG4pOlVjKHQse3VzZXI6bnVsbH0pLHQuZj1bXSx0LmM9W119ZnVuY3Rpb24gcWMoKXt9ZnVuY3Rpb24gVmMoKXt0aGlzLmliPSExLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLmliPXR9LGVudW1lcmFibGU6ITF9KX1mdW5jdGlvbiBCYyh0LGUpe3RoaXMuYT1lLGpyKHRoaXMsXCJ2ZXJpZmljYXRpb25JZFwiLHQpfWZ1bmN0aW9uIEtjKHQsZSxuLHIpe3JldHVybiBuZXcgQ28odCkuZmIoZSxuKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgQmModCxyKX0pfWZ1bmN0aW9uIFdjKHQpe3ZhciBlPXhpKHQpO2lmKCEoZSYmZS5leHAmJmUuYXV0aF90aW1lJiZlLmlhdCkpdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiLFwiQW4gaW50ZXJuYWwgZXJyb3Igb2NjdXJyZWQuIFRoZSB0b2tlbiBvYnRhaW5lZCBieSBGaXJlYmFzZSBhcHBlYXJzIHRvIGJlIG1hbGZvcm1lZC4gUGxlYXNlIHJldHJ5IHRoZSBvcGVyYXRpb24uXCIpO3FyKHRoaXMse3Rva2VuOnQsZXhwaXJhdGlvblRpbWU6RHIoMWUzKmUuZXhwKSxhdXRoVGltZTpEcigxZTMqZS5hdXRoX3RpbWUpLGlzc3VlZEF0VGltZTpEcigxZTMqZS5pYXQpLHNpZ25JblByb3ZpZGVyOmUuZmlyZWJhc2UmJmUuZmlyZWJhc2Uuc2lnbl9pbl9wcm92aWRlcj9lLmZpcmViYXNlLnNpZ25faW5fcHJvdmlkZXI6bnVsbCxzaWduSW5TZWNvbmRGYWN0b3I6ZS5maXJlYmFzZSYmZS5maXJlYmFzZS5zaWduX2luX3NlY29uZF9mYWN0b3I/ZS5maXJlYmFzZS5zaWduX2luX3NlY29uZF9mYWN0b3I6bnVsbCxjbGFpbXM6ZX0pfWZ1bmN0aW9uIEhjKHQsZSxuKXt2YXIgcj1lJiZlW3pjXTtpZighcil0aHJvdyBuZXcgSShcImFyZ3VtZW50LWVycm9yXCIsXCJJbnRlcm5hbCBhc3NlcnQ6IEludmFsaWQgTXVsdGlGYWN0b3JSZXNvbHZlclwiKTt0aGlzLmE9dCx0aGlzLmY9Y3QoZSksdGhpcy5nPW4sdGhpcy5jPW5ldyBZaShudWxsLHIpLHRoaXMuYj1bXTt2YXIgaT10aGlzO2ooZVtHY118fFtdLGZ1bmN0aW9uKHQpeyh0PVdyKHQpKSYmaS5iLnB1c2godCl9KSxqcih0aGlzLFwiYXV0aFwiLHRoaXMuYSksanIodGhpcyxcInNlc3Npb25cIix0aGlzLmMpLGpyKHRoaXMsXCJoaW50c1wiLHRoaXMuYil9TGMucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5iPW51bGwsdGhpcy5hJiYodGhpcy5hLmNhbmNlbCgpLHRoaXMuYT1udWxsKX0sTGMucHJvdG90eXBlLmg9ZnVuY3Rpb24odCxlKXt2YXIgbixyLGksbzt0Pyh0aGlzLnJlc2V0KCksdGhpcy5nPSEwLG49dC5jLHI9dC5iLGk9dC5hJiZcImF1dGgvd2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIj09dC5hLmNvZGUsbz10LmEmJlwiYXV0aC9vcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCI9PXQuYS5jb2RlLHRoaXMuaT0hKCFpJiYhbyksXCJ1bmtub3duXCIhPW58fGl8fG8/dC5hPyhqYyh0aGlzLCEwLG51bGwsdC5hKSxiZSgpKTplLkZhKG4scik/ZnVuY3Rpb24oZSx0LG4pe249bi5GYSh0LmMsdC5iKTt2YXIgcj10LmcsaT10LmYsbz10LmksYT10LlQoKSxzPSEhdC5jLm1hdGNoKC9SZWRpcmVjdCQvKTtuKHIsaSxhLG8pLnRoZW4oZnVuY3Rpb24odCl7amMoZSxzLHQsbnVsbCl9KS5vKGZ1bmN0aW9uKHQpe2pjKGUscyxudWxsLHQpfSl9KHRoaXMsdCxlKTpfZShuZXcgSShcImludmFsaWQtYXV0aC1ldmVudFwiKSk6KGpjKHRoaXMsITEsbnVsbCxudWxsKSxiZSgpKSk6X2UobmV3IEkoXCJpbnZhbGlkLWF1dGgtZXZlbnRcIikpfSxMYy5wcm90b3R5cGUucWE9ZnVuY3Rpb24oKXt2YXIgaT10aGlzO3JldHVybiBuZXcgZmUoZnVuY3Rpb24odCxlKXt2YXIgbixyO2kuYj9pLmIoKS50aGVuKHQsZSk6KGkuZi5wdXNoKHQpLGkuYy5wdXNoKGUpLG49aSxyPW5ldyBJKFwidGltZW91dFwiKSxuLmEmJm4uYS5jYW5jZWwoKSxuLmE9Z24oa2MuZ2V0KCkpLnRoZW4oZnVuY3Rpb24oKXtuLmJ8fChuLmc9ITAsamMobiwhMCxudWxsLHIpKX0pKX0pfSxxYy5wcm90b3R5cGUuaD1mdW5jdGlvbih0LGUpe3ZhciBuLHIsaSxvLGE7dD8obj10LmMscj10LmIsdC5hPyhlLm5hKHQuYyxudWxsLHQuYSx0LmIpLGJlKCkpOmUuRmEobixyKT8oaT1lLG89KHQ9dCkuYixhPXQuYyxpLkZhKGEsbykodC5nLHQuZix0LlQoKSx0LmkpLnRoZW4oZnVuY3Rpb24odCl7aS5uYShhLHQsbnVsbCxvKX0pLm8oZnVuY3Rpb24odCl7aS5uYShhLG51bGwsdCxvKX0pKTpfZShuZXcgSShcImludmFsaWQtYXV0aC1ldmVudFwiKSkpOl9lKG5ldyBJKFwiaW52YWxpZC1hdXRoLWV2ZW50XCIpKX0sQmMucHJvdG90eXBlLmNvbmZpcm09ZnVuY3Rpb24odCl7cmV0dXJuIHQ9a28odGhpcy52ZXJpZmljYXRpb25JZCx0KSx0aGlzLmEodCl9O3ZhciBHYz1cIm1mYUluZm9cIix6Yz1cIm1mYVBlbmRpbmdDcmVkZW50aWFsXCI7ZnVuY3Rpb24gUWModCxlLG4scil7SS5jYWxsKHRoaXMsXCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiLHIsZSksdGhpcy5iPW5ldyBIYyh0LGUsbiksanIodGhpcyxcInJlc29sdmVyXCIsdGhpcy5iKX1mdW5jdGlvbiBZYyh0LGUsbil7aWYodCYmZyh0LnNlcnZlclJlc3BvbnNlKSYmXCJhdXRoL211bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCI9PT10LmNvZGUpdHJ5e3JldHVybiBuZXcgUWMoZSx0LnNlcnZlclJlc3BvbnNlLG4sdC5tZXNzYWdlKX1jYXRjaCh0KXt9cmV0dXJuIG51bGx9ZnVuY3Rpb24gWGMoKXt9ZnVuY3Rpb24gSmModCl7anIodGhpcyxcImZhY3RvcklkXCIsdC5mYSksdGhpcy5hPXR9ZnVuY3Rpb24gJGModCl7aWYoSmMuY2FsbCh0aGlzLHQpLHRoaXMuYS5mYSE9Q28uUFJPVklERVJfSUQpdGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLFwiZmlyZWJhc2UuYXV0aC5QaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9uIHJlcXVpcmVzIGEgdmFsaWQgZmlyZWJhc2UuYXV0aC5QaG9uZUF1dGhDcmVkZW50aWFsXCIpfWZ1bmN0aW9uIFpjKHQsZSl7Zm9yKHZhciBuIGluIHFlLmNhbGwodGhpcyx0KSxlKXRoaXNbbl09ZVtuXX1mdW5jdGlvbiB0aCh0LGUpe3RoaXMuYT10LHRoaXMuYj1bXSx0aGlzLmM9bSh0aGlzLnljLHRoaXMpLCRlKHRoaXMuYSxcInVzZXJSZWxvYWRlZFwiLHRoaXMuYyk7dmFyIHI9W107ZSYmZS5tdWx0aUZhY3RvciYmZS5tdWx0aUZhY3Rvci5lbnJvbGxlZEZhY3RvcnMmJmooZS5tdWx0aUZhY3Rvci5lbnJvbGxlZEZhY3RvcnMsZnVuY3Rpb24odCl7dmFyIGU9bnVsbCxuPXt9O2lmKHQpe3QudWlkJiYoblt6cl09dC51aWQpLHQuZGlzcGxheU5hbWUmJihuW0hyXT10LmRpc3BsYXlOYW1lKSx0LmVucm9sbG1lbnRUaW1lJiYobltHcl09bmV3IERhdGUodC5lbnJvbGxtZW50VGltZSkudG9JU09TdHJpbmcoKSksdC5waG9uZU51bWJlciYmKG5bUXJdPXQucGhvbmVOdW1iZXIpO3RyeXtlPW5ldyBZcihuKX1jYXRjaCh0KXt9dD1lfWVsc2UgdD1udWxsO3QmJnIucHVzaCh0KX0pLGVoKHRoaXMscil9ZnVuY3Rpb24gZWgodCxlKXt0LmI9ZSxqcih0LFwiZW5yb2xsZWRGYWN0b3JzXCIsZSl9ZnVuY3Rpb24gbmgodCxlLG4pe2lmKHRoaXMuaD10LHRoaXMuaT1lLHRoaXMuZz1uLHRoaXMuYz0zZTQsdGhpcy5mPTk2ZTQsdGhpcy5iPW51bGwsdGhpcy5hPXRoaXMuYyx0aGlzLmY8dGhpcy5jKXRocm93IEVycm9yKFwiUHJvYWN0aXZlIHJlZnJlc2ggbG93ZXIgYm91bmQgZ3JlYXRlciB0aGFuIHVwcGVyIGJvdW5kIVwiKX1mdW5jdGlvbiByaCh0LGUpe3JldHVybiBlPyh0LmE9dC5jLHQuZygpKTooZT10LmEsdC5hKj0yLHQuYT50LmYmJih0LmE9dC5mKSxlKX1mdW5jdGlvbiBpaCh0KXt0aGlzLmY9dCx0aGlzLmI9dGhpcy5hPW51bGwsdGhpcy5jPURhdGUubm93KCl9ZnVuY3Rpb24gb2godCxlKXt2b2lkIDA9PT1lJiYoZT10LmI/KGU9dC5iKS5hLWUuZzowKSx0LmM9RGF0ZS5ub3coKSsxZTMqZX1mdW5jdGlvbiBhaCh0LGUpe3QuYj1EaShlW0JhXXx8XCJcIiksdC5hPWUucmVmcmVzaFRva2VuLG9oKHQsdm9pZCAwIT09KGU9ZS5leHBpcmVzSW4pP051bWJlcihlKTp2b2lkIDApfWZ1bmN0aW9uIHNoKGUsdCl7cmV0dXJuIHI9ZS5mLGk9dCxuZXcgZmUoZnVuY3Rpb24oZSxuKXtcInJlZnJlc2hfdG9rZW5cIj09aS5ncmFudF90eXBlJiZpLnJlZnJlc2hfdG9rZW58fFwiYXV0aG9yaXphdGlvbl9jb2RlXCI9PWkuZ3JhbnRfdHlwZSYmaS5jb2RlP0phKHIsci5sK1wiP2tleT1cIitlbmNvZGVVUklDb21wb25lbnQoci5jKSxmdW5jdGlvbih0KXt0P3QuZXJyb3I/bihZcyh0KSk6dC5hY2Nlc3NfdG9rZW4mJnQucmVmcmVzaF90b2tlbj9lKHQpOm4obmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiKSk6bihuZXcgSShcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIikpfSxcIlBPU1RcIixWbihpKS50b1N0cmluZygpLHIuZyxyLm0uZ2V0KCkpOm4obmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiKSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLmI9RGkodC5hY2Nlc3NfdG9rZW4pLGUuYT10LnJlZnJlc2hfdG9rZW4sb2goZSx0LmV4cGlyZXNfaW4pLHthY2Nlc3NUb2tlbjplLmIudG9TdHJpbmcoKSxyZWZyZXNoVG9rZW46ZS5hfX0pLm8oZnVuY3Rpb24odCl7dGhyb3dcImF1dGgvdXNlci10b2tlbi1leHBpcmVkXCI9PXQuY29kZSYmKGUuYT1udWxsKSx0fSk7dmFyIHIsaX1mdW5jdGlvbiB1aCh0LGUpe3RoaXMuYT10fHxudWxsLHRoaXMuYj1lfHxudWxsLHFyKHRoaXMse2xhc3RTaWduSW5UaW1lOkRyKGV8fG51bGwpLGNyZWF0aW9uVGltZTpEcih0fHxudWxsKX0pfWZ1bmN0aW9uIGNoKHQsZSxuLHIsaSxvKXtxcih0aGlzLHt1aWQ6dCxkaXNwbGF5TmFtZTpyfHxudWxsLHBob3RvVVJMOml8fG51bGwsZW1haWw6bnx8bnVsbCxwaG9uZU51bWJlcjpvfHxudWxsLHByb3ZpZGVySWQ6ZX0pfWZ1bmN0aW9uIGhoKHQsZSxuKXt0aGlzLko9W10sdGhpcy5sPXQuYXBpS2V5LHRoaXMubT10LmFwcE5hbWUsdGhpcy5zPXQuYXV0aERvbWFpbnx8bnVsbDt2YXIgcixpPVhsLlNES19WRVJTSU9OP2dyKFhsLlNES19WRVJTSU9OKTpudWxsO3RoaXMuYT1uZXcgcWEodGhpcy5sLE4oRSksaSksdC5lbXVsYXRvckNvbmZpZyYmUWEodGhpcy5hLHQuZW11bGF0b3JDb25maWcpLHRoaXMuYj1uZXcgaWgodGhpcy5hKSxtaCh0aGlzLGVbQmFdKSxhaCh0aGlzLmIsZSksanIodGhpcyxcInJlZnJlc2hUb2tlblwiLHRoaXMuYi5hKSx3aCh0aGlzLG58fHt9KSxsbi5jYWxsKHRoaXMpLHRoaXMuUj0hMSx0aGlzLnMmJl9yKCkmJih0aGlzLmk9eGModGhpcy5zLHRoaXMubCx0aGlzLm0pKSx0aGlzLlM9W10sdGhpcy5oPW51bGwsdGhpcy51PShyPXRoaXMsbmV3IG5oKGZ1bmN0aW9uKCl7cmV0dXJuIHIuSSghMCl9LGZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fFwiYXV0aC9uZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIhPXQuY29kZSl9LGZ1bmN0aW9uKCl7dmFyIHQ9ci5iLmMtRGF0ZS5ub3coKS0zZTU7cmV0dXJuIDA8dD90OjB9KSksdGhpcy5hYT1tKHRoaXMuaGIsdGhpcyk7dmFyIG89dGhpczt0aGlzLnlhPW51bGwsdGhpcy5PYT1mdW5jdGlvbih0KXtvLndhKHQuaCl9LHRoaXMuamE9bnVsbCx0aGlzLkFhPWZ1bmN0aW9uKHQpe1FhKG8uYSx0LmMpfSx0aGlzLlg9bnVsbCx0aGlzLiQ9W10sdGhpcy5CYT1mdW5jdGlvbih0KXtwaChvLHQuZil9LHRoaXMuYmE9bnVsbCx0aGlzLk89bmV3IHRoKHRoaXMsbiksanIodGhpcyxcIm11bHRpRmFjdG9yXCIsdGhpcy5PKX1mdW5jdGlvbiBsaCh0LGUpe3QuamEmJmVuKHQuamEsXCJsYW5ndWFnZUNvZGVDaGFuZ2VkXCIsdC5PYSksKHQuamE9ZSkmJiRlKGUsXCJsYW5ndWFnZUNvZGVDaGFuZ2VkXCIsdC5PYSl9ZnVuY3Rpb24gZmgodCxlKXt0LlgmJmVuKHQuWCxcImVtdWxhdG9yQ29uZmlnQ2hhbmdlZFwiLHQuQWEpLCh0Llg9ZSkmJiRlKGUsXCJlbXVsYXRvckNvbmZpZ0NoYW5nZWRcIix0LkFhKX1mdW5jdGlvbiBwaCh0LGUpe3QuJD1lLFhhKHQuYSxYbC5TREtfVkVSU0lPTj9ncihYbC5TREtfVkVSU0lPTix0LiQpOm51bGwpfWZ1bmN0aW9uIGRoKHQsZSl7dC5iYSYmZW4odC5iYSxcImZyYW1ld29ya0NoYW5nZWRcIix0LkJhKSwodC5iYT1lKSYmJGUoZSxcImZyYW1ld29ya0NoYW5nZWRcIix0LkJhKX1mdW5jdGlvbiB2aChlKXt0cnl7cmV0dXJuIFhsLmFwcChlLm0pLmF1dGgoKX1jYXRjaCh0KXt0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIsXCJObyBmaXJlYmFzZS5hdXRoLkF1dGggaW5zdGFuY2UgaXMgYXZhaWxhYmxlIGZvciB0aGUgRmlyZWJhc2UgQXBwICdcIitlLm0rXCInIVwiKX19ZnVuY3Rpb24gZ2godCl7dC5EfHx0LnUuYnx8KHQudS5zdGFydCgpLGVuKHQsXCJ0b2tlbkNoYW5nZWRcIix0LmFhKSwkZSh0LFwidG9rZW5DaGFuZ2VkXCIsdC5hYSkpfWZ1bmN0aW9uIHloKHQpe2VuKHQsXCJ0b2tlbkNoYW5nZWRcIix0LmFhKSx0LnUuc3RvcCgpfWZ1bmN0aW9uIG1oKHQsZSl7dC56YT1lLGpyKHQsXCJfbGF0XCIsZSl9ZnVuY3Rpb24gYmgodCl7Zm9yKHZhciBlPVtdLG49MDtuPHQuUy5sZW5ndGg7bisrKWUucHVzaCh0LlNbbl0odCkpO3JldHVybiBJZShlKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX1mdW5jdGlvbiBfaCh0KXt0LmkmJiF0LlImJih0LlI9ITAsRWModC5pLHQpKX1mdW5jdGlvbiB3aCh0LGUpe3FyKHQse3VpZDplLnVpZCxkaXNwbGF5TmFtZTplLmRpc3BsYXlOYW1lfHxudWxsLHBob3RvVVJMOmUucGhvdG9VUkx8fG51bGwsZW1haWw6ZS5lbWFpbHx8bnVsbCxlbWFpbFZlcmlmaWVkOmUuZW1haWxWZXJpZmllZHx8ITEscGhvbmVOdW1iZXI6ZS5waG9uZU51bWJlcnx8bnVsbCxpc0Fub255bW91czplLmlzQW5vbnltb3VzfHwhMSx0ZW5hbnRJZDplLnRlbmFudElkfHxudWxsLG1ldGFkYXRhOm5ldyB1aChlLmNyZWF0ZWRBdCxlLmxhc3RMb2dpbkF0KSxwcm92aWRlckRhdGE6W119KSx0LmEuYj10LnRlbmFudElkfWZ1bmN0aW9uIEloKCl7fWZ1bmN0aW9uIFRoKHQpe3JldHVybiBiZSgpLnRoZW4oZnVuY3Rpb24oKXtpZih0LkQpdGhyb3cgbmV3IEkoXCJhcHAtZGVsZXRlZFwiKX0pfWZ1bmN0aW9uIEVoKHQpe3JldHVybiBWKHQucHJvdmlkZXJEYXRhLGZ1bmN0aW9uKHQpe3JldHVybiB0LnByb3ZpZGVySWR9KX1mdW5jdGlvbiBTaCh0LGUpe2UmJihDaCh0LGUucHJvdmlkZXJJZCksdC5wcm92aWRlckRhdGEucHVzaChlKSl9ZnVuY3Rpb24gQ2godCxlKXtIKHQucHJvdmlkZXJEYXRhLGZ1bmN0aW9uKHQpe3JldHVybiB0LnByb3ZpZGVySWQ9PWV9KX1mdW5jdGlvbiBraCh0LGUsbil7KFwidWlkXCIhPWV8fG4pJiZ0Lmhhc093blByb3BlcnR5KGUpJiZqcih0LGUsbil9ZnVuY3Rpb24gTmgoZSx0KXt2YXIgbixyO2UhPXQmJihxcihlLHt1aWQ6dC51aWQsZGlzcGxheU5hbWU6dC5kaXNwbGF5TmFtZSxwaG90b1VSTDp0LnBob3RvVVJMLGVtYWlsOnQuZW1haWwsZW1haWxWZXJpZmllZDp0LmVtYWlsVmVyaWZpZWQscGhvbmVOdW1iZXI6dC5waG9uZU51bWJlcixpc0Fub255bW91czp0LmlzQW5vbnltb3VzLHRlbmFudElkOnQudGVuYW50SWQscHJvdmlkZXJEYXRhOltdfSksdC5tZXRhZGF0YT9qcihlLFwibWV0YWRhdGFcIixuZXcgdWgoKHI9dC5tZXRhZGF0YSkuYSxyLmIpKTpqcihlLFwibWV0YWRhdGFcIixuZXcgdWgpLGoodC5wcm92aWRlckRhdGEsZnVuY3Rpb24odCl7U2goZSx0KX0pLG49ZS5iLHI9dC5iLG4uYj1yLmIsbi5hPXIuYSxuLmM9ci5jLGpyKGUsXCJyZWZyZXNoVG9rZW5cIixlLmIuYSksZWgoZS5PLHQuTy5iKSl9ZnVuY3Rpb24gQWgoaSl7cmV0dXJuIGkuSSgpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGUsbixyPWkuaXNBbm9ueW1vdXM7cmV0dXJuIG49dCx6cygoZT1pKS5hLEVzLHtpZFRva2VuOm59KS50aGVuKG0oZS5LYyxlKSkudGhlbihmdW5jdGlvbigpe3JldHVybiByfHxraChpLFwiaXNBbm9ueW1vdXNcIiwhMSksdH0pfSl9ZnVuY3Rpb24gUmgodCxlKXtlW0JhXSYmdC56YSE9ZVtCYV0mJihhaCh0LmIsZSksdC5kaXNwYXRjaEV2ZW50KG5ldyBaYyhcInRva2VuQ2hhbmdlZFwiKSksbWgodCxlW0JhXSksa2godCxcInJlZnJlc2hUb2tlblwiLHQuYi5hKSl9ZnVuY3Rpb24gUGgodCxlKXtyZXR1cm4gQWgodCkudGhlbihmdW5jdGlvbigpe2lmKEsoRWgodCksZSkpcmV0dXJuIGJoKHQpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBuZXcgSShcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCIpfSl9KX1mdW5jdGlvbiBPaCh0LGUsbil7cmV0dXJuIFZyKHt1c2VyOnQsY3JlZGVudGlhbDpObyhlKSxhZGRpdGlvbmFsVXNlckluZm86ZT1qaShlKSxvcGVyYXRpb25UeXBlOm59KX1mdW5jdGlvbiBEaCh0LGUpe3JldHVybiBSaCh0LGUpLHQucmVsb2FkKCkudGhlbihmdW5jdGlvbigpe3JldHVybiB0fSl9ZnVuY3Rpb24geGgobixyLHQsZSxpKXtpZighX3IoKSlyZXR1cm4gX2UobmV3IEkoXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIpKTtpZihuLmgmJiFpKXJldHVybiBfZShuLmgpO3ZhciBvPVVpKHQucHJvdmlkZXJJZCksYT1rcihuLnVpZCtcIjo6OlwiKSxzPW51bGwsdT1ycihzPSghVHIoKXx8dXIoKSkmJm4ucyYmdC5pc09BdXRoUHJvdmlkZXI/dXUobi5zLG4ubCxuLm0scix0LG51bGwsYSxYbC5TREtfVkVSU0lPTnx8bnVsbCxudWxsLG51bGwsbi50ZW5hbnRJZCk6cyxvJiZvLnVhLG8mJm8udGEpO3JldHVybiBlPWUoKS50aGVuKGZ1bmN0aW9uKCl7aWYoTWgobiksIWkpcmV0dXJuIG4uSSgpLnRoZW4oZnVuY3Rpb24oKXt9KX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gTmMobi5pLHUscix0LGEsISFzLG4udGVuYW50SWQpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBuZXcgZmUoZnVuY3Rpb24odCxlKXtuLm5hKHIsbnVsbCxuZXcgSShcImNhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0XCIpLG4uZ3x8bnVsbCksbi5mPXQsbi5DPWUsbi5nPWEsbi5jPVBjKG4uaSxuLHIsdSxhKX0pfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdSYmbnIodSksdD9Wcih0KTpudWxsfSkubyhmdW5jdGlvbih0KXt0aHJvdyB1JiZucih1KSx0fSksRmgobixlLGkpfWZ1bmN0aW9uIExoKGUsdCxuLHIsaSl7aWYoIV9yKCkpcmV0dXJuIF9lKG5ldyBJKFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiKSk7aWYoZS5oJiYhaSlyZXR1cm4gX2UoZS5oKTt2YXIgbz1udWxsLGE9a3IoZS51aWQrXCI6OjpcIik7cmV0dXJuIHI9cigpLnRoZW4oZnVuY3Rpb24oKXtpZihNaChlKSwhaSlyZXR1cm4gZS5JKCkudGhlbihmdW5jdGlvbigpe30pfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlLmdhPWEsYmgoZSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0PWUuaGE/KHQ9ZS5oYSkuYi5zZXQocWgsZS53KCksdC5hKTp0fSkudGhlbihmdW5jdGlvbigpe3JldHVybiBSYyhlLmksdCxuLGEsZS50ZW5hbnRJZCl9KS5vKGZ1bmN0aW9uKHQpe2lmKG89dCxlLmhhKXJldHVybiBWaChlLmhhKTt0aHJvdyBvfSkudGhlbihmdW5jdGlvbigpe2lmKG8pdGhyb3cgb30pLEZoKGUscixpKX1mdW5jdGlvbiBNaCh0KXtpZighdC5pfHwhdC5SKXtpZih0LmkmJiF0LlIpdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiKTt0aHJvdyBuZXcgSShcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiKX19ZnVuY3Rpb24gRmgobix0LGUpe3ZhciByLGk9KHQ9dCxlPWUsKHI9bikuaCYmIWU/KHQuY2FuY2VsKCksX2Uoci5oKSk6dC5vKGZ1bmN0aW9uKHQpe3Rocm93IXR8fFwiYXV0aC91c2VyLWRpc2FibGVkXCIhPXQuY29kZSYmXCJhdXRoL3VzZXItdG9rZW4tZXhwaXJlZFwiIT10LmNvZGV8fChyLmh8fHIuZGlzcGF0Y2hFdmVudChuZXcgWmMoXCJ1c2VySW52YWxpZGF0ZWRcIikpLHIuaD10KSx0fSkpO3JldHVybiBuLkoucHVzaChpKSxpLm9hKGZ1bmN0aW9uKCl7VyhuLkosaSl9KSxpLm8oZnVuY3Rpb24odCl7dmFyIGU9bnVsbDt0aHJvdyhlPXQmJlwiYXV0aC9tdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiPT09dC5jb2RlP1ljKHQudygpLHZoKG4pLG0obi5qYyxuKSk6ZSl8fHR9KX1mdW5jdGlvbiBVaCh0KXtpZighdC5hcGlLZXkpcmV0dXJuIG51bGw7dmFyIGU9e2FwaUtleTp0LmFwaUtleSxhdXRoRG9tYWluOnQuYXV0aERvbWFpbixhcHBOYW1lOnQuYXBwTmFtZSxlbXVsYXRvckNvbmZpZzp0LmVtdWxhdG9yQ29uZmlnfSxuPXt9O2lmKCF0LnN0c1Rva2VuTWFuYWdlcnx8IXQuc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuKXJldHVybiBudWxsO25bQmFdPXQuc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuLG4ucmVmcmVzaFRva2VuPXQuc3RzVG9rZW5NYW5hZ2VyLnJlZnJlc2hUb2tlbnx8bnVsbDt2YXIgcj10LnN0c1Rva2VuTWFuYWdlci5leHBpcmF0aW9uVGltZTtyJiYobi5leHBpcmVzSW49KHItRGF0ZS5ub3coKSkvMWUzKTt2YXIgaT1uZXcgaGgoZSxuLHQpO3JldHVybiB0LnByb3ZpZGVyRGF0YSYmaih0LnByb3ZpZGVyRGF0YSxmdW5jdGlvbih0KXt0JiZTaChpLFZyKHQpKX0pLHQucmVkaXJlY3RFdmVudElkJiYoaS5nYT10LnJlZGlyZWN0RXZlbnRJZCksaX1mdW5jdGlvbiBqaCh0KXt0aGlzLmE9dCx0aGlzLmI9SHUoKX1IYy5wcm90b3R5cGUuUmM9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztyZXR1cm4gdC5zYih0aGlzLmEuYSx0aGlzLmMpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGU9Y3Qobi5mKTtyZXR1cm4gZGVsZXRlIGVbR2NdLGRlbGV0ZSBlW3pjXSxsdChlLHQpLG4uZyhlKX0pfSxfKFFjLEkpLFhjLnByb3RvdHlwZS5zYj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGUudHlwZT09WGk/KG89dGhpcyxhPXQscz1uLGUuSGEoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0PXtpZFRva2VuOnR9LHZvaWQgMCE9PXMmJih0LmRpc3BsYXlOYW1lPXMpLGx0KHQse3Bob25lVmVyaWZpY2F0aW9uSW5mbzpTbyhvLmEpfSksenMoYSxJcyx0KX0pKToocj10aGlzLGk9dCxlLkhhKCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbHQodD17bWZhUGVuZGluZ0NyZWRlbnRpYWw6dH0se3Bob25lVmVyaWZpY2F0aW9uSW5mbzpTbyhyLmEpfSksenMoaSxUcyx0KX0pKTt2YXIgcixpLG8sYSxzfSxfKEpjLFhjKSxfKCRjLEpjKSxfKFpjLHFlKSwodD10aC5wcm90b3R5cGUpLnljPWZ1bmN0aW9uKHQpe3ZhciBlO2VoKHRoaXMsKHQ9dC5oZCxlPVtdLGoodC5tZmFJbmZvfHxbXSxmdW5jdGlvbih0KXsodD1Xcih0KSkmJmUucHVzaCh0KX0pLGUpKX0sdC5SYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuSSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBZaSh0LG51bGwpfSl9LHQuZmM9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzLGk9dGhpcy5hLmE7cmV0dXJuIHRoaXMuUmIoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLnNiKGksdCxuKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIFJoKHIuYSx0KSxyLmEucmVsb2FkKCl9KX0sdC5iZD1mdW5jdGlvbih0KXt2YXIgbj10aGlzLHI9XCJzdHJpbmdcIj09dHlwZW9mIHQ/dDp0LnVpZCxlPXRoaXMuYS5hO3JldHVybiB0aGlzLmEuSSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHpzKGUsR3Mse2lkVG9rZW46dCxtZmFFbnJvbGxtZW50SWQ6cn0pfSkudGhlbihmdW5jdGlvbih0KXt2YXIgZT1xKG4uYixmdW5jdGlvbih0KXtyZXR1cm4gdC51aWQhPXJ9KTtyZXR1cm4gZWgobixlKSxSaChuLmEsdCksbi5hLnJlbG9hZCgpLm8oZnVuY3Rpb24odCl7aWYoXCJhdXRoL3VzZXItdG9rZW4tZXhwaXJlZFwiIT10LmNvZGUpdGhyb3cgdH0pfSl9LHQudz1mdW5jdGlvbigpe3JldHVybnttdWx0aUZhY3Rvcjp7ZW5yb2xsZWRGYWN0b3JzOlYodGhpcy5iLGZ1bmN0aW9uKHQpe3JldHVybiB0LncoKX0pfX19LG5oLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuYT10aGlzLmMsZnVuY3Rpb24gZShuLHQpe24uc3RvcCgpO24uYj1nbihyaChuLHQpKS50aGVuKE9yKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4uaCgpfSkudGhlbihmdW5jdGlvbigpe2UobiwhMCl9KS5vKGZ1bmN0aW9uKHQpe24uaSh0KSYmZShuLCExKX0pfSh0aGlzLCEwKX0sbmgucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmImJih0aGlzLmIuY2FuY2VsKCksdGhpcy5iPW51bGwpfSxpaC5wcm90b3R5cGUudz1mdW5jdGlvbigpe3JldHVybnthcGlLZXk6dGhpcy5mLmMscmVmcmVzaFRva2VuOnRoaXMuYSxhY2Nlc3NUb2tlbjp0aGlzLmImJnRoaXMuYi50b1N0cmluZygpLGV4cGlyYXRpb25UaW1lOnRoaXMuY319LGloLnByb3RvdHlwZS5nZXRUb2tlbj1mdW5jdGlvbih0KXtyZXR1cm4gdD0hIXQsdGhpcy5iJiYhdGhpcy5hP19lKG5ldyBJKFwidXNlci10b2tlbi1leHBpcmVkXCIpKTp0fHwhdGhpcy5ifHxEYXRlLm5vdygpPnRoaXMuYy0zZTQ/dGhpcy5hP3NoKHRoaXMse2dyYW50X3R5cGU6XCJyZWZyZXNoX3Rva2VuXCIscmVmcmVzaF90b2tlbjp0aGlzLmF9KTpiZShudWxsKTpiZSh7YWNjZXNzVG9rZW46dGhpcy5iLnRvU3RyaW5nKCkscmVmcmVzaFRva2VuOnRoaXMuYX0pfSx1aC5wcm90b3R5cGUudz1mdW5jdGlvbigpe3JldHVybntsYXN0TG9naW5BdDp0aGlzLmIsY3JlYXRlZEF0OnRoaXMuYX19LF8oaGgsbG4pLGhoLnByb3RvdHlwZS53YT1mdW5jdGlvbih0KXt0aGlzLnlhPXQsemEodGhpcy5hLHQpfSxoaC5wcm90b3R5cGUubGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy55YX0saGgucHJvdG90eXBlLkdhPWZ1bmN0aW9uKCl7cmV0dXJuIHoodGhpcy4kKX0saGgucHJvdG90eXBlLmhiPWZ1bmN0aW9uKCl7dGhpcy51LmImJih0aGlzLnUuc3RvcCgpLHRoaXMudS5zdGFydCgpKX0sanIoaGgucHJvdG90eXBlLFwicHJvdmlkZXJJZFwiLFwiZmlyZWJhc2VcIiksKHQ9aGgucHJvdG90eXBlKS5yZWxvYWQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBGaCh0aGlzLFRoKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gQWgodCkudGhlbihmdW5jdGlvbigpe3JldHVybiBiaCh0KX0pLnRoZW4oSWgpfSkpfSx0Lm9jPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkkodCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFdjKHQpfSl9LHQuST1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiBGaCh0aGlzLFRoKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZS5iLmdldFRva2VuKHQpfSkudGhlbihmdW5jdGlvbih0KXtpZighdCl0aHJvdyBuZXcgSShcImludGVybmFsLWVycm9yXCIpO3JldHVybiB0LmFjY2Vzc1Rva2VuIT1lLnphJiYobWgoZSx0LmFjY2Vzc1Rva2VuKSxlLmRpc3BhdGNoRXZlbnQobmV3IFpjKFwidG9rZW5DaGFuZ2VkXCIpKSksa2goZSxcInJlZnJlc2hUb2tlblwiLHQucmVmcmVzaFRva2VuKSx0LmFjY2Vzc1Rva2VufSkpfSx0LktjPWZ1bmN0aW9uKHQpe2lmKCEodD10LnVzZXJzKXx8IXQubGVuZ3RoKXRocm93IG5ldyBJKFwiaW50ZXJuYWwtZXJyb3JcIik7d2godGhpcyx7dWlkOih0PXRbMF0pLmxvY2FsSWQsZGlzcGxheU5hbWU6dC5kaXNwbGF5TmFtZSxwaG90b1VSTDp0LnBob3RvVXJsLGVtYWlsOnQuZW1haWwsZW1haWxWZXJpZmllZDohIXQuZW1haWxWZXJpZmllZCxwaG9uZU51bWJlcjp0LnBob25lTnVtYmVyLGxhc3RMb2dpbkF0OnQubGFzdExvZ2luQXQsY3JlYXRlZEF0OnQuY3JlYXRlZEF0LHRlbmFudElkOnQudGVuYW50SWR9KTtmb3IodmFyIGUsbj0oZT0oZT10KS5wcm92aWRlclVzZXJJbmZvKSYmZS5sZW5ndGg/VihlLGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgY2godC5yYXdJZCx0LnByb3ZpZGVySWQsdC5lbWFpbCx0LmRpc3BsYXlOYW1lLHQucGhvdG9VcmwsdC5waG9uZU51bWJlcil9KTpbXSxyPTA7cjxuLmxlbmd0aDtyKyspU2godGhpcyxuW3JdKTtraCh0aGlzLFwiaXNBbm9ueW1vdXNcIiwhKHRoaXMuZW1haWwmJnQucGFzc3dvcmRIYXNofHx0aGlzLnByb3ZpZGVyRGF0YSYmdGhpcy5wcm92aWRlckRhdGEubGVuZ3RoKSksdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBaYyhcInVzZXJSZWxvYWRlZFwiLHtoZDp0fSkpfSx0LkxjPWZ1bmN0aW9uKHQpe3JldHVybiBGcihcImZpcmViYXNlLlVzZXIucHJvdG90eXBlLnJlYXV0aGVudGljYXRlQW5kUmV0cmlldmVEYXRhV2l0aENyZWRlbnRpYWwgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBmaXJlYmFzZS5Vc2VyLnByb3RvdHlwZS5yZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsIGluc3RlYWQuXCIpLHRoaXMudGIodCl9LHQudGI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPW51bGw7cmV0dXJuIEZoKHRoaXMsdC5jKHRoaXMuYSx0aGlzLnVpZCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gUmgoZSx0KSxuPU9oKGUsdCxcInJlYXV0aGVudGljYXRlXCIpLGUuaD1udWxsLGUucmVsb2FkKCl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG59KSwhMCl9LHQuQ2M9ZnVuY3Rpb24odCl7cmV0dXJuIEZyKFwiZmlyZWJhc2UuVXNlci5wcm90b3R5cGUubGlua0FuZFJldHJpZXZlRGF0YVdpdGhDcmVkZW50aWFsIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgZmlyZWJhc2UuVXNlci5wcm90b3R5cGUubGlua1dpdGhDcmVkZW50aWFsIGluc3RlYWQuXCIpLHRoaXMucWIodCl9LHQucWI9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxyPW51bGw7cmV0dXJuIEZoKHRoaXMsUGgodGhpcyxlLnByb3ZpZGVySWQpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbi5JKCl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLmIobi5hLHQpfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gcj1PaChuLHQsXCJsaW5rXCIpLERoKG4sdCl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KSl9LHQuRGM9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiBGaCh0aGlzLFBoKHRoaXMsXCJwaG9uZVwiKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIEtjKHZoKG4pLHQsZSxtKG4ucWIsbikpfSkpfSx0Lk1jPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztyZXR1cm4gRmgodGhpcyxiZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gS2ModmgobiksdCxlLG0obi50YixuKSl9KSwhMCl9LHQuQmI9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gRmgodGhpcyx0aGlzLkkoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuLmEuQmIodCxlKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIFJoKG4sdCksbi5yZWxvYWQoKX0pKX0sdC5lZD1mdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBGaCh0aGlzLHRoaXMuSSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuYihuLmEsdCl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBSaChuLHQpLG4ucmVsb2FkKCl9KSl9LHQuQ2I9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gRmgodGhpcyx0aGlzLkkoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuLmEuQ2IodCxlKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIFJoKG4sdCksbi5yZWxvYWQoKX0pKX0sdC5EYj1mdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lLmRpc3BsYXlOYW1lJiZ2b2lkIDA9PT1lLnBob3RvVVJMKXJldHVybiBUaCh0aGlzKTt2YXIgbj10aGlzO3JldHVybiBGaCh0aGlzLHRoaXMuSSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG4uYS5EYih0LHtkaXNwbGF5TmFtZTplLmRpc3BsYXlOYW1lLHBob3RvVXJsOmUucGhvdG9VUkx9KX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIFJoKG4sdCksa2gobixcImRpc3BsYXlOYW1lXCIsdC5kaXNwbGF5TmFtZXx8bnVsbCksa2gobixcInBob3RvVVJMXCIsdC5waG90b1VybHx8bnVsbCksaihuLnByb3ZpZGVyRGF0YSxmdW5jdGlvbih0KXtcInBhc3N3b3JkXCI9PT10LnByb3ZpZGVySWQmJihqcih0LFwiZGlzcGxheU5hbWVcIixuLmRpc3BsYXlOYW1lKSxqcih0LFwicGhvdG9VUkxcIixuLnBob3RvVVJMKSl9KSxiaChuKX0pLnRoZW4oSWgpKX0sdC5jZD1mdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBGaCh0aGlzLEFoKHRoaXMpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIEsoRWgobiksZSk/enMobi5hLGJzLHtpZFRva2VuOnQsZGVsZXRlUHJvdmlkZXI6W2VdfSkudGhlbihmdW5jdGlvbih0KXt2YXIgZT17fTtyZXR1cm4gaih0LnByb3ZpZGVyVXNlckluZm98fFtdLGZ1bmN0aW9uKHQpe2VbdC5wcm92aWRlcklkXT0hMH0pLGooRWgobiksZnVuY3Rpb24odCl7ZVt0XXx8Q2gobix0KX0pLGVbQ28uUFJPVklERVJfSURdfHxqcihuLFwicGhvbmVOdW1iZXJcIixudWxsKSxiaChuKX0pOmJoKG4pLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBuZXcgSShcIm5vLXN1Y2gtcHJvdmlkZXJcIil9KX0pKX0sdC5kZWxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBGaCh0aGlzLHRoaXMuSSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHpzKGUuYSxtcyx7aWRUb2tlbjp0fSl9KS50aGVuKGZ1bmN0aW9uKCl7ZS5kaXNwYXRjaEV2ZW50KG5ldyBaYyhcInVzZXJEZWxldGVkXCIpKX0pKS50aGVuKGZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDxlLkoubGVuZ3RoO3QrKyllLkpbdF0uY2FuY2VsKFwiYXBwLWRlbGV0ZWRcIik7bGgoZSxudWxsKSxmaChlLG51bGwpLGRoKGUsbnVsbCksZS5KPVtdLGUuRD0hMCx5aChlKSxqcihlLFwicmVmcmVzaFRva2VuXCIsbnVsbCksZS5pJiZTYyhlLmksZSl9KX0sdC5GYj1mdW5jdGlvbih0LGUpe3JldHVybiEhKFwibGlua1ZpYVBvcHVwXCI9PXQmJih0aGlzLmd8fG51bGwpPT1lJiZ0aGlzLmZ8fFwicmVhdXRoVmlhUG9wdXBcIj09dCYmKHRoaXMuZ3x8bnVsbCk9PWUmJnRoaXMuZnx8XCJsaW5rVmlhUmVkaXJlY3RcIj09dCYmKHRoaXMuZ2F8fG51bGwpPT1lfHxcInJlYXV0aFZpYVJlZGlyZWN0XCI9PXQmJih0aGlzLmdhfHxudWxsKT09ZSl9LHQubmE9ZnVuY3Rpb24odCxlLG4scil7XCJsaW5rVmlhUG9wdXBcIiE9dCYmXCJyZWF1dGhWaWFQb3B1cFwiIT10fHxyIT0odGhpcy5nfHxudWxsKXx8KG4mJnRoaXMuQz90aGlzLkMobik6ZSYmIW4mJnRoaXMuZiYmdGhpcy5mKGUpLHRoaXMuYyYmKHRoaXMuYy5jYW5jZWwoKSx0aGlzLmM9bnVsbCksZGVsZXRlIHRoaXMuZixkZWxldGUgdGhpcy5DKX0sdC5GYT1mdW5jdGlvbih0LGUpe3JldHVyblwibGlua1ZpYVBvcHVwXCI9PXQmJmU9PSh0aGlzLmd8fG51bGwpP20odGhpcy5LYix0aGlzKTpcInJlYXV0aFZpYVBvcHVwXCI9PXQmJmU9PSh0aGlzLmd8fG51bGwpP20odGhpcy5MYix0aGlzKTpcImxpbmtWaWFSZWRpcmVjdFwiPT10JiYodGhpcy5nYXx8bnVsbCk9PWU/bSh0aGlzLktiLHRoaXMpOlwicmVhdXRoVmlhUmVkaXJlY3RcIj09dCYmKHRoaXMuZ2F8fG51bGwpPT1lP20odGhpcy5MYix0aGlzKTpudWxsfSx0LkVjPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHhoKHRoaXMsXCJsaW5rVmlhUG9wdXBcIix0LGZ1bmN0aW9uKCl7cmV0dXJuIFBoKGUsdC5wcm92aWRlcklkKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGJoKGUpfSl9LCExKX0sdC5OYz1mdW5jdGlvbih0KXtyZXR1cm4geGgodGhpcyxcInJlYXV0aFZpYVBvcHVwXCIsdCxmdW5jdGlvbigpe3JldHVybiBiZSgpfSwhMCl9LHQuRmM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gTGgodGhpcyxcImxpbmtWaWFSZWRpcmVjdFwiLHQsZnVuY3Rpb24oKXtyZXR1cm4gUGgoZSx0LnByb3ZpZGVySWQpfSwhMSl9LHQuT2M9ZnVuY3Rpb24odCl7cmV0dXJuIExoKHRoaXMsXCJyZWF1dGhWaWFSZWRpcmVjdFwiLHQsZnVuY3Rpb24oKXtyZXR1cm4gYmUoKX0sITApfSx0LktiPWZ1bmN0aW9uKGUsbix0LHIpe3ZhciBpPXRoaXM7dGhpcy5jJiYodGhpcy5jLmNhbmNlbCgpLHRoaXMuYz1udWxsKTt2YXIgbz1udWxsO3JldHVybiB0PXRoaXMuSSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGxzKGkuYSx7cmVxdWVzdFVyaTplLHBvc3RCb2R5OnIsc2Vzc2lvbklkOm4saWRUb2tlbjp0fSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBvPU9oKGksdCxcImxpbmtcIiksRGgoaSx0KX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gb30pLEZoKHRoaXMsdCl9LHQuTGI9ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9dGhpczt0aGlzLmMmJih0aGlzLmMuY2FuY2VsKCksdGhpcy5jPW51bGwpO3ZhciBvPW51bGw7cmV0dXJuIEZoKHRoaXMsYmUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIFppKGZzKGkuYSx7cmVxdWVzdFVyaTp0LHNlc3Npb25JZDplLHBvc3RCb2R5OnIsdGVuYW50SWQ6bn0pLGkudWlkKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG89T2goaSx0LFwicmVhdXRoZW50aWNhdGVcIiksUmgoaSx0KSxpLmg9bnVsbCxpLnJlbG9hZCgpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBvfSksITApfSx0LnViPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMscj1udWxsO3JldHVybiBGaCh0aGlzLHRoaXMuSSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHI9dCx2b2lkIDA9PT1lfHx1dChlKT97fTpBaShuZXcgYmkoZSkpfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbi5hLnViKHIsdCl9KS50aGVuKGZ1bmN0aW9uKHQpe2lmKG4uZW1haWwhPXQpcmV0dXJuIG4ucmVsb2FkKCl9KS50aGVuKGZ1bmN0aW9uKCl7fSkpfSx0LkViPWZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpcyxpPW51bGw7cmV0dXJuIEZoKHRoaXMsdGhpcy5JKCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gaT10LHZvaWQgMD09PW58fHV0KG4pP3t9OkFpKG5ldyBiaShuKSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiByLmEuRWIoaSxlLHQpfSkudGhlbihmdW5jdGlvbih0KXtpZihyLmVtYWlsIT10KXJldHVybiByLnJlbG9hZCgpfSkudGhlbihmdW5jdGlvbigpe30pKX0sdC5qYz1mdW5jdGlvbih0KXt2YXIgZT1udWxsLG49dGhpcztyZXR1cm4gRmgodGhpcyx0PVppKGJlKHQpLG4udWlkKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlPU9oKG4sdCxcInJlYXV0aGVudGljYXRlXCIpLFJoKG4sdCksbi5oPW51bGwsbi5yZWxvYWQoKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZX0pLCEwKX0sdC50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53KCl9LHQudz1mdW5jdGlvbigpe3ZhciBlPXt1aWQ6dGhpcy51aWQsZGlzcGxheU5hbWU6dGhpcy5kaXNwbGF5TmFtZSxwaG90b1VSTDp0aGlzLnBob3RvVVJMLGVtYWlsOnRoaXMuZW1haWwsZW1haWxWZXJpZmllZDp0aGlzLmVtYWlsVmVyaWZpZWQscGhvbmVOdW1iZXI6dGhpcy5waG9uZU51bWJlcixpc0Fub255bW91czp0aGlzLmlzQW5vbnltb3VzLHRlbmFudElkOnRoaXMudGVuYW50SWQscHJvdmlkZXJEYXRhOltdLGFwaUtleTp0aGlzLmwsYXBwTmFtZTp0aGlzLm0sYXV0aERvbWFpbjp0aGlzLnMsc3RzVG9rZW5NYW5hZ2VyOnRoaXMuYi53KCkscmVkaXJlY3RFdmVudElkOnRoaXMuZ2F8fG51bGx9O3JldHVybiB0aGlzLm1ldGFkYXRhJiZsdChlLHRoaXMubWV0YWRhdGEudygpKSxqKHRoaXMucHJvdmlkZXJEYXRhLGZ1bmN0aW9uKHQpe2UucHJvdmlkZXJEYXRhLnB1c2goZnVuY3Rpb24odCl7dmFyIGUsbj17fTtmb3IoZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJihuW2VdPXRbZV0pO3JldHVybiBufSh0KSl9KSxsdChlLHRoaXMuTy53KCkpLGV9O3ZhciBxaD17bmFtZTpcInJlZGlyZWN0VXNlclwiLEY6XCJzZXNzaW9uXCJ9O2Z1bmN0aW9uIFZoKHQpe3JldHVybiBRdSh0LmIscWgsdC5hKX1mdW5jdGlvbiBCaCh0KXt2YXIgZSxuLHIsaTt0aGlzLmE9dCx0aGlzLmI9SHUoKSx0aGlzLmM9bnVsbCx0aGlzLmY9KG49SGgoXCJsb2NhbFwiKSxyPUhoKFwic2Vzc2lvblwiKSxpPUhoKFwibm9uZVwiKSxmdW5jdGlvbihuLHIsaSl7dmFyIG89enUocixpKSxhPUd1KG4sci5GKTtyZXR1cm4gbi5nZXQocixpKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPW51bGw7dHJ5e2U9Q3IobC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShvKSl9Y2F0Y2godCl7fWlmKGUmJiF0KXJldHVybiBsLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKG8pLG4uc2V0KHIsZSxpKTtlJiZ0JiZcImxvY2FsU3RvcmFnZVwiIT1hLnR5cGUmJmwubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0obyl9KX0oKGU9dGhpcykuYixuLGUuYSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlLmIuZ2V0KHIsZS5hKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQ/cjplLmIuZ2V0KGksZS5hKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0P2k6ZS5iLmdldChuLGUuYSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdD9uOmUuYi5nZXQoV2gsZS5hKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0P0hoKHQpOm59KX0pfSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLmM9dCxLaChlLHQuRil9KS5vKGZ1bmN0aW9uKCl7ZS5jfHwoZS5jPW4pfSkpLHRoaXMuYi5hZGRMaXN0ZW5lcihIaChcImxvY2FsXCIpLHRoaXMuYSxtKHRoaXMuZyx0aGlzKSl9ZnVuY3Rpb24gS2godCxlKXt2YXIgbixzLHI9W107Zm9yKG4gaW4gS3UpS3Vbbl0hPT1lJiZyLnB1c2goUXUodC5iLEhoKEt1W25dKSx0LmEpKTtyZXR1cm4gci5wdXNoKFF1KHQuYixXaCx0LmEpKSxzPXIsbmV3IGZlKGZ1bmN0aW9uKG4sZSl7dmFyIHI9cy5sZW5ndGgsaT1bXTtpZihyKWZvcih2YXIgdD1mdW5jdGlvbih0LGUpe3ItLSxpW3RdPWUsMD09ciYmbihpKX0sbz1mdW5jdGlvbih0KXtlKHQpfSxhPTA7YTxzLmxlbmd0aDthKyspd2Uoc1thXSxiKHQsYSksbyk7ZWxzZSBuKGkpfSl9QmgucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49SGgoXCJsb2NhbFwiKTtZaCh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGJlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBlLmMmJlwibG9jYWxcIiE9ZS5jLkY/ZS5iLmdldChuLGUuYSk6bnVsbH0pLnRoZW4oZnVuY3Rpb24odCl7aWYodClyZXR1cm4gS2goZSxcImxvY2FsXCIpLnRoZW4oZnVuY3Rpb24oKXtlLmM9bn0pfSl9KX07dmFyIFdoPXtuYW1lOlwicGVyc2lzdGVuY2VcIixGOlwic2Vzc2lvblwifTtmdW5jdGlvbiBIaCh0KXtyZXR1cm57bmFtZTpcImF1dGhVc2VyXCIsRjp0fX1mdW5jdGlvbiBHaCh0LGUpe3JldHVybiBZaCh0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuYi5zZXQodC5jLGUudygpLHQuYSl9KX1mdW5jdGlvbiB6aCh0KXtyZXR1cm4gWWgodCxmdW5jdGlvbigpe3JldHVybiBRdSh0LmIsdC5jLHQuYSl9KX1mdW5jdGlvbiBRaCh0LGUsbil7cmV0dXJuIFloKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5iLmdldCh0LmMsdC5hKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0JiZlJiYodC5hdXRoRG9tYWluPWUpLHQmJm4mJih0LmVtdWxhdG9yQ29uZmlnPW4pLFVoKHR8fHt9KX0pfSl9ZnVuY3Rpb24gWWgodCxlKXtyZXR1cm4gdC5mPXQuZi50aGVuKGUsZSksdC5mfWZ1bmN0aW9uIFhoKHQpe2lmKHRoaXMubD0hMSxqcih0aGlzLFwic2V0dGluZ3NcIixuZXcgVmMpLGpyKHRoaXMsXCJhcHBcIix0KSwhdGhpcy5hcHAub3B0aW9uc3x8IXRoaXMuYXBwLm9wdGlvbnMuYXBpS2V5KXRocm93IG5ldyBJKFwiaW52YWxpZC1hcGkta2V5XCIpO3ZhciBuLGUscixpLG8sYTt0PVhsLlNES19WRVJTSU9OP2dyKFhsLlNES19WRVJTSU9OKTpudWxsLHRoaXMuYT1uZXcgcWEodGhpcy5hcHAub3B0aW9ucyYmdGhpcy5hcHAub3B0aW9ucy5hcGlLZXksTihFKSx0KSx0aGlzLlI9W10sdGhpcy5zPVtdLHRoaXMuTz1bXSx0aGlzLmhiPVhsLklOVEVSTkFMLmNyZWF0ZVN1YnNjcmliZShtKHRoaXMuemMsdGhpcykpLHRoaXMuWD12b2lkIDAsdGhpcy5iYz1YbC5JTlRFUk5BTC5jcmVhdGVTdWJzY3JpYmUobSh0aGlzLkFjLHRoaXMpKSxybCh0aGlzLG51bGwpLHRoaXMuaT1uZXcgQmgodGhpcy5hcHAub3B0aW9ucy5hcGlLZXkrXCI6XCIrdGhpcy5hcHAubmFtZSksdGhpcy5EPW5ldyBqaCh0aGlzLmFwcC5vcHRpb25zLmFwaUtleStcIjpcIit0aGlzLmFwcC5uYW1lKSx0aGlzLiQ9dWwodGhpcywoZT0obj10aGlzKS5hcHAub3B0aW9ucy5hdXRoRG9tYWluLHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5iLmdldChxaCx0LmEpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQmJmUmJih0LmF1dGhEb21haW49ZSksVWgodHx8e30pfSl9KGUuRCxlLmFwcC5vcHRpb25zLmF1dGhEb21haW4pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuKGUubT10KSYmKHQuaGE9ZS5EKSxWaChlLkQpfSk7cmV0dXJuIHVsKGUsdCl9KG4pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gUWgobi5pLGUsbi5QKX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGU/KGUuaGE9bi5ELG4ubSYmKG4ubS5nYXx8bnVsbCk9PShlLmdhfHxudWxsKT9lOmUucmVsb2FkKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBHaChuLmksZSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlfSl9KS5vKGZ1bmN0aW9uKHQpe3JldHVyblwiYXV0aC9uZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCI9PXQuY29kZT9lOnpoKG4uaSl9KSk6bnVsbH0pLnRoZW4oZnVuY3Rpb24odCl7cmwobix0fHxudWxsKX0pLHVsKG4sdCkpKSx0aGlzLmg9dWwodGhpcywocj10aGlzKS4kLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZWwocil9KS5vKGZ1bmN0aW9uKCl7fSkudGhlbihmdW5jdGlvbigpe2lmKCFyLmwpcmV0dXJuIHIuamEoKX0pLm8oZnVuY3Rpb24oKXt9KS50aGVuKGZ1bmN0aW9uKCl7dmFyIHQ7ci5sfHwoci5iYT0hMCwodD1yLmkpLmIuYWRkTGlzdGVuZXIoSGgoXCJsb2NhbFwiKSx0LmEsci5qYSkpfSkpLHRoaXMuYmE9ITEsdGhpcy5qYT1tKHRoaXMuWmMsdGhpcyksdGhpcy5CYT1tKHRoaXMuZGEsdGhpcyksdGhpcy55YT1tKHRoaXMubWMsdGhpcyksdGhpcy56YT1tKHRoaXMud2MsdGhpcyksdGhpcy5BYT1tKHRoaXMueGMsdGhpcyksdGhpcy5iPW51bGwsbz0oaT10aGlzKS5hcHAub3B0aW9ucy5hdXRoRG9tYWluLGE9aS5hcHAub3B0aW9ucy5hcGlLZXksbyYmX3IoKSYmKGkuT2E9aS4kLnRoZW4oZnVuY3Rpb24oKXt2YXIgdDtpZighaS5sKXJldHVybiBpLmI9eGMobyxhLGkuYXBwLm5hbWUsaS5QKSxFYyhpLmIsaSksb2woaSkmJl9oKG9sKGkpKSxpLm0mJihfaChpLm0pLCh0PWkubSkud2EoaS5sYSgpKSxsaCh0LGkpLHBoKHQ9aS5tLGkuSiksZGgodCxpKSxRYSgodD1pLm0pLmEsaS5QKSxmaCh0LGkpLGkubT1udWxsKSxpLmJ9KSksdGhpcy5JTlRFUk5BTD17fSx0aGlzLklOVEVSTkFMLmRlbGV0ZT1tKHRoaXMuZGVsZXRlLHRoaXMpLHRoaXMuSU5URVJOQUwubG9nRnJhbWV3b3JrPW0odGhpcy5HYyx0aGlzKSx0aGlzLnU9MCxsbi5jYWxsKHRoaXMpLHQ9dGhpcyxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImxjXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLndhKHQpfSxlbnVtZXJhYmxlOiExfSksdC5hYT1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwidGlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuVCgpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy55Yih0KX0sZW51bWVyYWJsZTohMX0pLHQuUz1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiZW11bGF0b3JDb25maWdcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHQ9dGhpcy5QP1ZyKHtwcm90b2NvbDoodD1Bbih0aGlzLlAudXJsKSkuYyxob3N0OnQuYSxwb3J0OnQuZyxvcHRpb25zOlZyKHtkaXNhYmxlV2FybmluZ3M6dGhpcy5QLmVjfSl9KTpudWxsfSxlbnVtZXJhYmxlOiExfSksdGhpcy5KPVtdLHRoaXMuUD1udWxsfWZ1bmN0aW9uIEpoKHQpe3FlLmNhbGwodGhpcyxcImxhbmd1YWdlQ29kZUNoYW5nZWRcIiksdGhpcy5oPXR9ZnVuY3Rpb24gJGgodCl7cWUuY2FsbCh0aGlzLFwiZW11bGF0b3JDb25maWdDaGFuZ2VkXCIpLHRoaXMuYz10fWZ1bmN0aW9uIFpoKHQpe3FlLmNhbGwodGhpcyxcImZyYW1ld29ya0NoYW5nZWRcIiksdGhpcy5mPXR9ZnVuY3Rpb24gdGwodCl7cmV0dXJuIHQuT2F8fF9lKG5ldyBJKFwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIpKX1mdW5jdGlvbiBlbCh0KXtpZighX3IoKSlyZXR1cm4gX2UobmV3IEkoXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIpKTt2YXIgZT10bCh0KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYi5xYSgpfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdD9Wcih0KTpudWxsfSk7cmV0dXJuIHVsKHQsZSl9ZnVuY3Rpb24gbmwobyxhKXt2YXIgcz17fTtyZXR1cm4gcy5hcGlLZXk9by5hcHAub3B0aW9ucy5hcGlLZXkscy5hdXRoRG9tYWluPW8uYXBwLm9wdGlvbnMuYXV0aERvbWFpbixzLmFwcE5hbWU9by5hcHAubmFtZSxvLlAmJihzLmVtdWxhdG9yQ29uZmlnPW8uUCksby4kLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdD1zLGU9YSxuPW8uRCxyPW8uR2EoKSxpPW5ldyBoaCh0LGUpLG4mJihpLmhhPW4pLHImJnBoKGksciksaS5yZWxvYWQoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGl9KTt2YXIgdCxlLG4scixpfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gb2wobykmJnQudWlkPT1vbChvKS51aWQ/Tmgob2wobyksdCk6KHJsKG8sdCksX2godCkpLG8uZGEodCl9KS50aGVuKGZ1bmN0aW9uKCl7c2wobyl9KX1mdW5jdGlvbiBybCh0LGUpe3ZhciBuLHI7b2wodCkmJihuPW9sKHQpLHI9dC5CYSxIKG4uUyxmdW5jdGlvbih0KXtyZXR1cm4gdD09cn0pLGVuKG9sKHQpLFwidG9rZW5DaGFuZ2VkXCIsdC55YSksZW4ob2wodCksXCJ1c2VyRGVsZXRlZFwiLHQuemEpLGVuKG9sKHQpLFwidXNlckludmFsaWRhdGVkXCIsdC5BYSkseWgob2wodCkpKSxlJiYoZS5TLnB1c2godC5CYSksJGUoZSxcInRva2VuQ2hhbmdlZFwiLHQueWEpLCRlKGUsXCJ1c2VyRGVsZXRlZFwiLHQuemEpLCRlKGUsXCJ1c2VySW52YWxpZGF0ZWRcIix0LkFhKSwwPHQudSYmZ2goZSkpLGpyKHQsXCJjdXJyZW50VXNlclwiLGUpLGUmJihlLndhKHQubGEoKSksbGgoZSx0KSxwaChlLHQuSiksZGgoZSx0KSxRYShlLmEsdC5QKSxmaChlLHQpKX1mdW5jdGlvbiBpbChuLHQpe3ZhciBlPW51bGwscj1udWxsO3JldHVybiB1bChuLHQudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZT1Obyh0KSxyPWppKHQpLG5sKG4sdCl9LGZ1bmN0aW9uKHQpe3ZhciBlPW51bGw7dGhyb3coZT10JiZcImF1dGgvbXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWRcIj09PXQuY29kZT9ZYyh0LncoKSxuLG0obi5rYyxuKSk6ZSl8fHR9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIFZyKHt1c2VyOm9sKG4pLGNyZWRlbnRpYWw6ZSxhZGRpdGlvbmFsVXNlckluZm86cixvcGVyYXRpb25UeXBlOlwic2lnbkluXCJ9KX0pKX1mdW5jdGlvbiBvbCh0KXtyZXR1cm4gdC5jdXJyZW50VXNlcn1mdW5jdGlvbiBhbCh0KXtyZXR1cm4gb2wodCkmJm9sKHQpLl9sYXR8fG51bGx9ZnVuY3Rpb24gc2wodCl7aWYodC5iYSl7Zm9yKHZhciBlPTA7ZTx0LnMubGVuZ3RoO2UrKyl0LnNbZV0mJnQuc1tlXShhbCh0KSk7aWYodC5YIT09dC5nZXRVaWQoKSYmdC5PLmxlbmd0aClmb3IodC5YPXQuZ2V0VWlkKCksZT0wO2U8dC5PLmxlbmd0aDtlKyspdC5PW2VdJiZ0Lk9bZV0oYWwodCkpfX1mdW5jdGlvbiB1bCh0LGUpe3JldHVybiB0LlIucHVzaChlKSxlLm9hKGZ1bmN0aW9uKCl7Vyh0LlIsZSl9KSxlfWZ1bmN0aW9uIGNsKCl7fWZ1bmN0aW9uIGhsKCl7dGhpcy5hPXt9LHRoaXMuYj0xZTEyfUJoLnByb3RvdHlwZS54Yj1mdW5jdGlvbihlKXt2YXIgbj1udWxsLHI9dGhpcztyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9bmV3IEkoXCJpbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGVcIiksbj1uZXcgSShcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIik7dDp7Zm9yKHIgaW4gS3UpaWYoS3Vbcl09PXQpe3ZhciByPSEwO2JyZWFrIHR9cj0hMX1pZighcnx8XCJzdHJpbmdcIiE9dHlwZW9mIHQpdGhyb3cgZTtzd2l0Y2goaHIoKSl7Y2FzZVwiUmVhY3ROYXRpdmVcIjppZihcInNlc3Npb25cIj09PXQpdGhyb3cgbjticmVhaztjYXNlXCJOb2RlXCI6aWYoXCJub25lXCIhPT10KXRocm93IG47YnJlYWs7Y2FzZVwiV29ya2VyXCI6aWYoXCJzZXNzaW9uXCI9PT10fHwhSXUoKSYmXCJub25lXCIhPT10KXRocm93IG47YnJlYWs7ZGVmYXVsdDppZighYnIoKSYmXCJub25lXCIhPT10KXRocm93IG59fShlKSxZaCh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGUhPXIuYy5GP3IuYi5nZXQoci5jLHIuYSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbj10LEtoKHIsZSl9KS50aGVuKGZ1bmN0aW9uKCl7aWYoci5jPUhoKGUpLG4pcmV0dXJuIHIuYi5zZXQoci5jLG4sci5hKX0pOmJlKCl9KX0sXyhYaCxsbiksXyhKaCxxZSksXygkaCxxZSksXyhaaCxxZSksKHQ9WGgucHJvdG90eXBlKS54Yj1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLmkueGIodCksdWwodGhpcyx0KX0sdC53YT1mdW5jdGlvbih0KXt0aGlzLmFhPT09dHx8dGhpcy5sfHwodGhpcy5hYT10LHphKHRoaXMuYSx0aGlzLmFhKSx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEpoKHRoaXMubGEoKSkpKX0sdC5sYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFhfSx0LmZkPWZ1bmN0aW9uKCl7dmFyIHQ9bC5uYXZpZ2F0b3I7dGhpcy53YSh0JiYodC5sYW5ndWFnZXMmJnQubGFuZ3VhZ2VzWzBdfHx0Lmxhbmd1YWdlfHx0LnVzZXJMYW5ndWFnZSl8fG51bGwpfSx0LmdkPWZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuUCl7aWYoIS9eaHR0cHM/OlxcL1xcLy8udGVzdCh0KSl0aHJvdyBuZXcgSShcImFyZ3VtZW50LWVycm9yXCIsXCJFbXVsYXRvciBVUkwgbXVzdCBzdGFydCB3aXRoIGEgdmFsaWQgc2NoZW1lIChodHRwOi8vIG9yIGh0dHBzOi8vKS5cIik7ZT0hIWUmJiEhZS5kaXNhYmxlV2FybmluZ3Msbj1lLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjb25zb2xlLmluZm8mJmNvbnNvbGUuaW5mbyhcIldBUk5JTkc6IFlvdSBhcmUgdXNpbmcgdGhlIEF1dGggRW11bGF0b3IsIHdoaWNoIGlzIGludGVuZGVkIGZvciBsb2NhbCB0ZXN0aW5nIG9ubHkuICBEbyBub3QgdXNlIHdpdGggcHJvZHVjdGlvbiBjcmVkZW50aWFscy5cIiksbC5kb2N1bWVudCYmIW4mJmFyKCkudGhlbihmdW5jdGlvbigpe3ZhciB0PWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmlubmVyVGV4dD1cIlJ1bm5pbmcgaW4gZW11bGF0b3IgbW9kZS4gRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuXCIsdC5zdHlsZS5wb3NpdGlvbj1cImZpeGVkXCIsdC5zdHlsZS53aWR0aD1cIjEwMCVcIix0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIiNmZmZmZmZcIix0LnN0eWxlLmJvcmRlcj1cIi4xZW0gc29saWQgIzAwMDAwMFwiLHQuc3R5bGUuY29sb3I9XCIjZmYwMDAwXCIsdC5zdHlsZS5ib3R0b209XCIwcHhcIix0LnN0eWxlLmxlZnQ9XCIwcHhcIix0LnN0eWxlLm1hcmdpbj1cIjBweFwiLHQuc3R5bGUuekluZGV4PTFlNCx0LnN0eWxlLnRleHRBbGlnbj1cImNlbnRlclwiLHQuY2xhc3NMaXN0LmFkZChcImZpcmViYXNlLWVtdWxhdG9yLXdhcm5pbmdcIiksbC5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpfSksdGhpcy5QPXt1cmw6dCxlYzplfSx0aGlzLnNldHRpbmdzLmliPSEwLFFhKHRoaXMuYSx0aGlzLlApLHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgJGgodGhpcy5QKSl9dmFyIG59LHQuR2M9ZnVuY3Rpb24odCl7dGhpcy5KLnB1c2godCksWGEodGhpcy5hLFhsLlNES19WRVJTSU9OP2dyKFhsLlNES19WRVJTSU9OLHRoaXMuSik6bnVsbCksdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBaaCh0aGlzLkopKX0sdC5HYT1mdW5jdGlvbigpe3JldHVybiB6KHRoaXMuSil9LHQueWI9ZnVuY3Rpb24odCl7dGhpcy5TPT09dHx8dGhpcy5sfHwodGhpcy5TPXQsdGhpcy5hLmI9dGhpcy5TKX0sdC5UPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuU30sdC50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57YXBpS2V5OnRoaXMuYXBwLm9wdGlvbnMuYXBpS2V5LGF1dGhEb21haW46dGhpcy5hcHAub3B0aW9ucy5hdXRoRG9tYWluLGFwcE5hbWU6dGhpcy5hcHAubmFtZSxjdXJyZW50VXNlcjpvbCh0aGlzKSYmb2wodGhpcykudygpfX0sdC5GYj1mdW5jdGlvbih0LGUpe3N3aXRjaCh0KXtjYXNlXCJ1bmtub3duXCI6Y2FzZVwic2lnbkluVmlhUmVkaXJlY3RcIjpyZXR1cm4hMDtjYXNlXCJzaWduSW5WaWFQb3B1cFwiOnJldHVybiB0aGlzLmc9PWUmJiEhdGhpcy5mO2RlZmF1bHQ6cmV0dXJuITF9fSx0Lm5hPWZ1bmN0aW9uKHQsZSxuLHIpe1wic2lnbkluVmlhUG9wdXBcIj09dCYmdGhpcy5nPT1yJiYobiYmdGhpcy5DP3RoaXMuQyhuKTplJiYhbiYmdGhpcy5mJiZ0aGlzLmYoZSksdGhpcy5jJiYodGhpcy5jLmNhbmNlbCgpLHRoaXMuYz1udWxsKSxkZWxldGUgdGhpcy5mLGRlbGV0ZSB0aGlzLkMpfSx0LkZhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJzaWduSW5WaWFSZWRpcmVjdFwiPT10fHxcInNpZ25JblZpYVBvcHVwXCI9PXQmJnRoaXMuZz09ZSYmdGhpcy5mP20odGhpcy5pYyx0aGlzKTpudWxsfSx0LmljPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPXRoaXMsbz17cmVxdWVzdFVyaTp0LHBvc3RCb2R5OnIsc2Vzc2lvbklkOmUsdGVuYW50SWQ6bn07cmV0dXJuIHRoaXMuYyYmKHRoaXMuYy5jYW5jZWwoKSx0aGlzLmM9bnVsbCksaS4kLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaWwoaSxocyhpLmEsbykpfSl9LHQuWGM9ZnVuY3Rpb24oZSl7aWYoIV9yKCkpcmV0dXJuIF9lKG5ldyBJKFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiKSk7dmFyIG49dGhpcyx0PVVpKGUucHJvdmlkZXJJZCkscj1rcigpLGk9bnVsbCxvPXJyKGk9KCFUcigpfHx1cigpKSYmdGhpcy5hcHAub3B0aW9ucy5hdXRoRG9tYWluJiZlLmlzT0F1dGhQcm92aWRlcj91dSh0aGlzLmFwcC5vcHRpb25zLmF1dGhEb21haW4sdGhpcy5hcHAub3B0aW9ucy5hcGlLZXksdGhpcy5hcHAubmFtZSxcInNpZ25JblZpYVBvcHVwXCIsZSxudWxsLHIsWGwuU0RLX1ZFUlNJT058fG51bGwsbnVsbCxudWxsLHRoaXMuVCgpLHRoaXMuUCk6aSx0JiZ0LnVhLHQmJnQudGEpO3JldHVybiB1bCh0aGlzLHQ9dGwodGhpcykudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gTmModCxvLFwic2lnbkluVmlhUG9wdXBcIixlLHIsISFpLG4uVCgpKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGZlKGZ1bmN0aW9uKHQsZSl7bi5uYShcInNpZ25JblZpYVBvcHVwXCIsbnVsbCxuZXcgSShcImNhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0XCIpLG4uZyksbi5mPXQsbi5DPWUsbi5nPXIsbi5jPVBjKG4uYixuLFwic2lnbkluVmlhUG9wdXBcIixvLHIpfSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBvJiZucihvKSx0P1ZyKHQpOm51bGx9KS5vKGZ1bmN0aW9uKHQpe3Rocm93IG8mJm5yKG8pLHR9KSl9LHQuWWM9ZnVuY3Rpb24odCl7aWYoIV9yKCkpcmV0dXJuIF9lKG5ldyBJKFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiKSk7dmFyIGU9dGhpcztyZXR1cm4gdWwodGhpcyx0bCh0aGlzKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIFloKHQ9ZS5pLGZ1bmN0aW9uKCl7cmV0dXJuIHQuYi5zZXQoV2gsdC5jLkYsdC5hKX0pO3ZhciB0fSkudGhlbihmdW5jdGlvbigpe3JldHVybiBSYyhlLmIsXCJzaWduSW5WaWFSZWRpcmVjdFwiLHQsdm9pZCAwLGUuVCgpKX0pKX0sdC5xYT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGVsKHRoaXMpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuYiYmRmMoZS5iLmIpLHR9KS5vKGZ1bmN0aW9uKHQpe3Rocm93IGUuYiYmRmMoZS5iLmIpLHR9KX0sdC5kZD1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gX2UobmV3IEkoXCJudWxsLXVzZXJcIikpO2lmKHRoaXMuUyE9dC50ZW5hbnRJZClyZXR1cm4gX2UobmV3IEkoXCJ0ZW5hbnQtaWQtbWlzbWF0Y2hcIikpO3ZhciBlPXRoaXMsbj17fTtuLmFwaUtleT10aGlzLmFwcC5vcHRpb25zLmFwaUtleSxuLmF1dGhEb21haW49dGhpcy5hcHAub3B0aW9ucy5hdXRoRG9tYWluLG4uYXBwTmFtZT10aGlzLmFwcC5uYW1lO3ZhciByLGksbyxhLHMsdT0ocj10LGk9bixvPWUuRCxhPWUuR2EoKSxzPXIuYiwobj17fSlbQmFdPXMuYiYmcy5iLnRvU3RyaW5nKCksbi5yZWZyZXNoVG9rZW49cy5hLGk9bmV3IGhoKGl8fHthcGlLZXk6ci5sLGF1dGhEb21haW46ci5zLGFwcE5hbWU6ci5tfSxuKSxvJiYoaS5oYT1vKSxhJiZwaChpLGEpLE5oKGksciksaSk7cmV0dXJuIHVsKHRoaXMsdGhpcy5oLnRoZW4oZnVuY3Rpb24oKXtpZihlLmFwcC5vcHRpb25zLmFwaUtleSE9dC5sKXJldHVybiB1LnJlbG9hZCgpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBvbChlKSYmdC51aWQ9PW9sKGUpLnVpZD8oTmgob2woZSksdCksZS5kYSh0KSk6KHJsKGUsdSksX2godSksZS5kYSh1KSl9KS50aGVuKGZ1bmN0aW9uKCl7c2woZSl9KSl9LHQuQWI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5oLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC5iJiZGYyh0LmIuYiksb2wodCk/KHJsKHQsbnVsbCksemgodC5pKS50aGVuKGZ1bmN0aW9uKCl7c2wodCl9KSk6YmUoKX0pO3JldHVybiB1bCh0aGlzLGUpfSx0LlpjPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcztyZXR1cm4gUWgodGhpcy5pLHRoaXMuYXBwLm9wdGlvbnMuYXV0aERvbWFpbikudGhlbihmdW5jdGlvbih0KXtpZighci5sKXt2YXIgZSxuO2lmKChlPW9sKHIpJiZ0KSYmKGU9b2wocikudWlkLG49dC51aWQsZT1udWxsIT1lJiZcIlwiIT09ZSYmbnVsbCE9biYmXCJcIiE9PW4mJmU9PW4pLGUpcmV0dXJuIE5oKG9sKHIpLHQpLG9sKHIpLkkoKTsob2wocil8fHQpJiYocmwocix0KSx0JiYoX2godCksdC5oYT1yLkQpLHIuYiYmRWMoci5iLHIpLHNsKHIpKX19KX0sdC5kYT1mdW5jdGlvbih0KXtyZXR1cm4gR2godGhpcy5pLHQpfSx0Lm1jPWZ1bmN0aW9uKCl7c2wodGhpcyksdGhpcy5kYShvbCh0aGlzKSl9LHQud2M9ZnVuY3Rpb24oKXt0aGlzLkFiKCl9LHQueGM9ZnVuY3Rpb24oKXt0aGlzLkFiKCl9LHQua2M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5oLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaWwoZSxiZSh0KSl9KX0sdC56Yz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuYWRkQXV0aFRva2VuTGlzdGVuZXIoZnVuY3Rpb24oKXt0Lm5leHQob2woZSkpfSl9LHQuQWM9ZnVuY3Rpb24odCl7dmFyIGUsbixyPXRoaXM7bj1mdW5jdGlvbigpe3QubmV4dChvbChyKSl9LChlPXRoaXMpLk8ucHVzaChuKSx1bChlLGUuaC50aGVuKGZ1bmN0aW9uKCl7IWUubCYmSyhlLk8sbikmJmUuWCE9PWUuZ2V0VWlkKCkmJihlLlg9ZS5nZXRVaWQoKSxuKGFsKGUpKSl9KSl9LHQuSWM9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7cmV0dXJuIHRoaXMuYmEmJlByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Qob2wocikpOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQubmV4dCYmdC5uZXh0KG9sKHIpKX0pLHRoaXMuaGIodCxlLG4pfSx0LkhjPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3JldHVybiB0aGlzLmJhJiZQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7ci5YPXIuZ2V0VWlkKCksXCJmdW5jdGlvblwiPT10eXBlb2YgdD90KG9sKHIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm5leHQmJnQubmV4dChvbChyKSl9KSx0aGlzLmJjKHQsZSxuKX0sdC5uYz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy5oLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gb2woZSk/b2woZSkuSSh0KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybnthY2Nlc3NUb2tlbjp0fX0pOm51bGx9KTtyZXR1cm4gdWwodGhpcyxuKX0sdC5UYz1mdW5jdGlvbih0KXt2YXIgbj10aGlzO3JldHVybiB0aGlzLmgudGhlbihmdW5jdGlvbigpe3JldHVybiBpbChuLHpzKG4uYSxWcyx7dG9rZW46dH0pKX0pLnRoZW4oZnVuY3Rpb24odCl7dmFyIGU9dC51c2VyO3JldHVybiBraChlLFwiaXNBbm9ueW1vdXNcIiwhMSksbi5kYShlKSx0fSl9LHQuVWM9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLmgudGhlbihmdW5jdGlvbigpe3JldHVybiBpbChuLHpzKG4uYSxCcyx7ZW1haWw6dCxwYXNzd29yZDplfSkpfSl9LHQuZGM9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLmgudGhlbihmdW5jdGlvbigpe3JldHVybiBpbChuLHpzKG4uYSxncyx7ZW1haWw6dCxwYXNzd29yZDplfSkpfSl9LHQuJGE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5oLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaWwoZSx0LmthKGUuYSkpfSl9LHQuU2M9ZnVuY3Rpb24odCl7cmV0dXJuIEZyKFwiZmlyZWJhc2UuYXV0aC5BdXRoLnByb3RvdHlwZS5zaWduSW5BbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGZpcmViYXNlLmF1dGguQXV0aC5wcm90b3R5cGUuc2lnbkluV2l0aENyZWRlbnRpYWwgaW5zdGVhZC5cIiksdGhpcy4kYSh0KX0sdC56Yj1mdW5jdGlvbigpe3ZhciBuPXRoaXM7cmV0dXJuIHRoaXMuaC50aGVuKGZ1bmN0aW9uKCl7dmFyIHQ9b2wobik7aWYodCYmdC5pc0Fub255bW91cyl7dmFyIGU9VnIoe3Byb3ZpZGVySWQ6bnVsbCxpc05ld1VzZXI6ITF9KTtyZXR1cm4gVnIoe3VzZXI6dCxjcmVkZW50aWFsOm51bGwsYWRkaXRpb25hbFVzZXJJbmZvOmUsb3BlcmF0aW9uVHlwZTpcInNpZ25JblwifSl9cmV0dXJuIGlsKG4sbi5hLnpiKCkpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGU9dC51c2VyO3JldHVybiBraChlLFwiaXNBbm9ueW1vdXNcIiwhMCksbi5kYShlKSx0fSl9KX0sdC5nZXRVaWQ9ZnVuY3Rpb24oKXtyZXR1cm4gb2wodGhpcykmJm9sKHRoaXMpLnVpZHx8bnVsbH0sdC5jYz1mdW5jdGlvbih0KXt0aGlzLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHQpLHRoaXMudSsrLDA8dGhpcy51JiZvbCh0aGlzKSYmZ2gob2wodGhpcykpfSx0LlBjPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7aih0aGlzLnMsZnVuY3Rpb24odCl7dD09ZSYmbi51LS19KSx0aGlzLnU8MCYmKHRoaXMudT0wKSwwPT10aGlzLnUmJm9sKHRoaXMpJiZ5aChvbCh0aGlzKSksdGhpcy5yZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcihlKX0sdC5hZGRBdXRoVG9rZW5MaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMucy5wdXNoKHQpLHVsKHRoaXMsdGhpcy5oLnRoZW4oZnVuY3Rpb24oKXtlLmx8fEsoZS5zLHQpJiZ0KGFsKGUpKX0pKX0sdC5yZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcj1mdW5jdGlvbihlKXtIKHRoaXMucyxmdW5jdGlvbih0KXtyZXR1cm4gdD09ZX0pfSx0LmRlbGV0ZT1mdW5jdGlvbigpe3RoaXMubD0hMDtmb3IodmFyIHQ9MDt0PHRoaXMuUi5sZW5ndGg7dCsrKXRoaXMuUlt0XS5jYW5jZWwoXCJhcHAtZGVsZXRlZFwiKTtyZXR1cm4gdGhpcy5SPVtdLHRoaXMuaSYmKHQ9dGhpcy5pKS5iLnJlbW92ZUxpc3RlbmVyKEhoKFwibG9jYWxcIiksdC5hLHRoaXMuamEpLHRoaXMuYiYmKFNjKHRoaXMuYix0aGlzKSxGYyh0aGlzLmIuYikpLFByb21pc2UucmVzb2x2ZSgpfSx0LmhjPWZ1bmN0aW9uKHQpe3JldHVybiB1bCh0aGlzLHpzKHRoaXMuYSx5cyx7aWRlbnRpZmllcjp0LGNvbnRpbnVlVXJpOndyKCk/Wm4oKTpcImh0dHA6Ly9sb2NhbGhvc3RcIn0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuc2lnbmluTWV0aG9kc3x8W119KSl9LHQuQmM9ZnVuY3Rpb24odCl7cmV0dXJuISFJbyh0KX0sdC53Yj1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7cmV0dXJuIHVsKHRoaXMsYmUoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGJpKG4pO2lmKCF0LmMpdGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLElpK1wiIG11c3QgYmUgdHJ1ZSB3aGVuIHNlbmRpbmcgc2lnbiBpbiBsaW5rIHRvIGVtYWlsXCIpO3JldHVybiBBaSh0KX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHIuYS53YihlLHQpfSkudGhlbihmdW5jdGlvbigpe30pKX0sdC5qZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5SYSh0KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LmRhdGEuZW1haWx9KX0sdC5uYj1mdW5jdGlvbih0LGUpe3JldHVybiB1bCh0aGlzLHRoaXMuYS5uYih0LGUpLnRoZW4oZnVuY3Rpb24oKXt9KSl9LHQuUmE9ZnVuY3Rpb24odCl7cmV0dXJuIHVsKHRoaXMsdGhpcy5hLlJhKHQpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBYcih0KX0pKX0sdC5qYj1mdW5jdGlvbih0KXtyZXR1cm4gdWwodGhpcyx0aGlzLmEuamIodCkudGhlbihmdW5jdGlvbigpe30pKX0sdC52Yj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7cmV0dXJuIHVsKHRoaXMsYmUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXR8fHV0KHQpP3t9OkFpKG5ldyBiaSh0KSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuLmEudmIoZSx0KX0pLnRoZW4oZnVuY3Rpb24oKXt9KSl9LHQuV2M9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdWwodGhpcyxLYyh0aGlzLHQsZSxtKHRoaXMuJGEsdGhpcykpKX0sdC5WYz1mdW5jdGlvbihuLHIpe3ZhciBpPXRoaXM7cmV0dXJuIHVsKHRoaXMsYmUoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIHQ9cnx8Wm4oKSxlPXdvKG4sdCk7aWYoISh0PUlvKHQpKSl0aHJvdyBuZXcgSShcImFyZ3VtZW50LWVycm9yXCIsXCJJbnZhbGlkIGVtYWlsIGxpbmshXCIpO2lmKHQudGVuYW50SWQhPT1pLlQoKSl0aHJvdyBuZXcgSShcInRlbmFudC1pZC1taXNtYXRjaFwiKTtyZXR1cm4gaS4kYShlKX0pKX0sY2wucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe30sY2wucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7fSxjbC5wcm90b3R5cGUuZ2V0UmVzcG9uc2U9ZnVuY3Rpb24oKXt9LGNsLnByb3RvdHlwZS5leGVjdXRlPWZ1bmN0aW9uKCl7fTt2YXIgbGw9bnVsbDtmdW5jdGlvbiBmbCh0LGUpe3JldHVybihlPXBsKGUpKSYmdC5hW2VdfHxudWxsfWZ1bmN0aW9uIHBsKHQpe3JldHVybih0PXZvaWQgMD09PXQ/MWUxMjp0KT90LnRvU3RyaW5nKCk6bnVsbH1mdW5jdGlvbiBkbCh0LGUpe3RoaXMuZz0hMSx0aGlzLmM9ZSx0aGlzLmE9dGhpcy5iPW51bGwsdGhpcy5oPVwiaW52aXNpYmxlXCIhPT10aGlzLmMuc2l6ZSx0aGlzLmY9dGUodCk7dmFyIG49dGhpczt0aGlzLmk9ZnVuY3Rpb24oKXtuLmV4ZWN1dGUoKX0sdGhpcy5oP3RoaXMuZXhlY3V0ZSgpOiRlKHRoaXMuZixcImNsaWNrXCIsdGhpcy5pKX1mdW5jdGlvbiB2bCh0KXtpZih0LmcpdGhyb3cgRXJyb3IoXCJyZUNBUFRDSEEgbW9jayB3YXMgYWxyZWFkeSBkZWxldGVkIVwiKX1mdW5jdGlvbiBnbCgpe31mdW5jdGlvbiB5bCgpe31obC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYVt0aGlzLmIudG9TdHJpbmcoKV09bmV3IGRsKHQsZSksdGhpcy5iKyt9LGhsLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbih0KXt2YXIgZT1mbCh0aGlzLHQpO3Q9cGwodCksZSYmdCYmKGUuZGVsZXRlKCksZGVsZXRlIHRoaXMuYVt0XSl9LGhsLnByb3RvdHlwZS5nZXRSZXNwb25zZT1mdW5jdGlvbih0KXtyZXR1cm4odD1mbCh0aGlzLHQpKT90LmdldFJlc3BvbnNlKCk6bnVsbH0saGwucHJvdG90eXBlLmV4ZWN1dGU9ZnVuY3Rpb24odCl7KHQ9ZmwodGhpcyx0KSkmJnQuZXhlY3V0ZSgpfSxkbC5wcm90b3R5cGUuZ2V0UmVzcG9uc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdmwodGhpcyksdGhpcy5ifSxkbC5wcm90b3R5cGUuZXhlY3V0ZT1mdW5jdGlvbigpe3ZsKHRoaXMpO3ZhciBuPXRoaXM7dGhpcy5hfHwodGhpcy5hPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLmI9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9NTAsZT1bXTswPHQ7KWUucHVzaChcIjEyMzQ1Njc4OTBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCIuY2hhckF0KE1hdGguZmxvb3IoNjIqTWF0aC5yYW5kb20oKSkpKSx0LS07cmV0dXJuIGUuam9pbihcIlwiKX0oKTt2YXIgdD1uLmMuY2FsbGJhY2ssZT1uLmNbXCJleHBpcmVkLWNhbGxiYWNrXCJdO2lmKHQpdHJ5e3Qobi5iKX1jYXRjaCh0KXt9bi5hPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihuLmE9bnVsbCxuLmI9bnVsbCxlKXRyeXtlKCl9Y2F0Y2godCl7fW4uaCYmbi5leGVjdXRlKCl9LDZlNCl9LDUwMCkpfSxkbC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKCl7dmwodGhpcyksdGhpcy5nPSEwLGNsZWFyVGltZW91dCh0aGlzLmEpLHRoaXMuYT1udWxsLGVuKHRoaXMuZixcImNsaWNrXCIsdGhpcy5pKX0sanIoZ2wsXCJGQUNUT1JfSURcIixcInBob25lXCIpLHlsLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIGJlKGxsPWxsfHxuZXcgaGwpfSx5bC5wcm90b3R5cGUuYz1mdW5jdGlvbigpe307dmFyIG1sPW51bGw7ZnVuY3Rpb24gYmwoKXt0aGlzLmI9bC5ncmVjYXB0Y2hhPzEvMDowLHRoaXMuZj1udWxsLHRoaXMuYT1cIl9fcmNiXCIrTWF0aC5mbG9vcigxZTYqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoKX12YXIgX2w9bmV3IHB0KHl0LFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpLmpzP29ubG9hZD0le29ubG9hZH0mcmVuZGVyPWV4cGxpY2l0JmhsPSV7aGx9XCIpLHdsPW5ldyBScigzZTQsNmU0KTtibC5wcm90b3R5cGUuZz1mdW5jdGlvbihpKXt2YXIgbz10aGlzO3JldHVybiBuZXcgZmUoZnVuY3Rpb24odCxlKXt2YXIgcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZShuZXcgSShcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIikpfSx3bC5nZXQoKSk7IWwuZ3JlY2FwdGNoYXx8aSE9PW8uZiYmIW8uYj8obFtvLmFdPWZ1bmN0aW9uKCl7dmFyIG47bC5ncmVjYXB0Y2hhPyhvLmY9aSxuPWwuZ3JlY2FwdGNoYS5yZW5kZXIsbC5ncmVjYXB0Y2hhLnJlbmRlcj1mdW5jdGlvbih0LGUpe3JldHVybiB0PW4odCxlKSxvLmIrKyx0fSxjbGVhclRpbWVvdXQociksdChsLmdyZWNhcHRjaGEpKTooY2xlYXJUaW1lb3V0KHIpLGUobmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiKSkpLGRlbGV0ZSBsW28uYV19LGJlKERhKHd0KF9sLHtvbmxvYWQ6by5hLGhsOml8fFwiXCJ9KSkpLm8oZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQociksZShuZXcgSShcImludGVybmFsLWVycm9yXCIsXCJVbmFibGUgdG8gbG9hZCBleHRlcm5hbCByZUNBUFRDSEEgZGVwZW5kZW5jaWVzIVwiKSl9KSk6KGNsZWFyVGltZW91dChyKSx0KGwuZ3JlY2FwdGNoYSkpfSl9LGJsLnByb3RvdHlwZS5jPWZ1bmN0aW9uKCl7dGhpcy5iLS19O3ZhciBJbD1udWxsO2Z1bmN0aW9uIFRsKHQsZSxuLHIsaSxvLGEpe2lmKGpyKHRoaXMsXCJ0eXBlXCIsXCJyZWNhcHRjaGFcIiksdGhpcy5jPXRoaXMuZj1udWxsLHRoaXMuRD0hMSx0aGlzLnY9ZSx0aGlzLmc9bnVsbCxhPWE/bWw9bWx8fG5ldyB5bDpJbD1JbHx8bmV3IGJsLHRoaXMubT1hLHRoaXMuYT1ufHx7dGhlbWU6XCJsaWdodFwiLHR5cGU6XCJpbWFnZVwifSx0aGlzLmg9W10sdGhpcy5hW0NsXSl0aHJvdyBuZXcgSShcImFyZ3VtZW50LWVycm9yXCIsXCJzaXRla2V5IHNob3VsZCBub3QgYmUgcHJvdmlkZWQgZm9yIHJlQ0FQVENIQSBhcyBvbmUgaXMgYXV0b21hdGljYWxseSBwcm92aXNpb25lZCBmb3IgdGhlIGN1cnJlbnQgcHJvamVjdC5cIik7aWYodGhpcy5pPVwiaW52aXNpYmxlXCI9PT10aGlzLmFba2xdLCFsLmRvY3VtZW50KXRocm93IG5ldyBJKFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiLFwiUmVjYXB0Y2hhVmVyaWZpZXIgaXMgb25seSBzdXBwb3J0ZWQgaW4gYSBicm93c2VyIEhUVFAvSFRUUFMgZW52aXJvbm1lbnQgd2l0aCBET00gc3VwcG9ydC5cIik7aWYoIXRlKGUpfHwhdGhpcy5pJiZ0ZShlKS5oYXNDaGlsZE5vZGVzKCkpdGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLFwicmVDQVBUQ0hBIGNvbnRhaW5lciBpcyBlaXRoZXIgbm90IGZvdW5kIG9yIGFscmVhZHkgY29udGFpbnMgaW5uZXIgZWxlbWVudHMhXCIpO3RoaXMucz1uZXcgcWEodCxvfHxudWxsLGl8fG51bGwpLHRoaXMudT1yfHxmdW5jdGlvbigpe3JldHVybiBudWxsfTt2YXIgcz10aGlzO3RoaXMubD1bXTt2YXIgdT10aGlzLmFbRWxdO3RoaXMuYVtFbF09ZnVuY3Rpb24odCl7dmFyIGU7Tmwocyx0KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB1P3UodCk6XCJzdHJpbmdcIiE9dHlwZW9mIHV8fFwiZnVuY3Rpb25cIj09dHlwZW9mKGU9bXIodSxsKSkmJmUodCl9O3ZhciBjPXRoaXMuYVtTbF07dGhpcy5hW1NsXT1mdW5jdGlvbigpe3ZhciB0O05sKHMsbnVsbCksXCJmdW5jdGlvblwiPT10eXBlb2YgYz9jKCk6XCJzdHJpbmdcIiE9dHlwZW9mIGN8fFwiZnVuY3Rpb25cIj09dHlwZW9mKHQ9bXIoYyxsKSkmJnQoKX19dmFyIEVsPVwiY2FsbGJhY2tcIixTbD1cImV4cGlyZWQtY2FsbGJhY2tcIixDbD1cInNpdGVrZXlcIixrbD1cInNpemVcIjtmdW5jdGlvbiBObCh0LGUpe2Zvcih2YXIgbj0wO248dC5sLmxlbmd0aDtuKyspdHJ5e3QubFtuXShlKX1jYXRjaCh0KXt9fWZ1bmN0aW9uIEFsKHQsZSl7cmV0dXJuIHQuaC5wdXNoKGUpLGUub2EoZnVuY3Rpb24oKXtXKHQuaCxlKX0pLGV9ZnVuY3Rpb24gUmwodCl7aWYodC5EKXRocm93IG5ldyBJKFwiaW50ZXJuYWwtZXJyb3JcIixcIlJlY2FwdGNoYVZlcmlmaWVyIGluc3RhbmNlIGhhcyBiZWVuIGRlc3Ryb3llZC5cIil9ZnVuY3Rpb24gUGwodCxlLG4pe3ZhciByPSExO3RyeXt0aGlzLmI9bnx8WGwuYXBwKCl9Y2F0Y2godCl7dGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLFwiTm8gZmlyZWJhc2UuYXBwLkFwcCBpbnN0YW5jZSBpcyBjdXJyZW50bHkgaW5pdGlhbGl6ZWQuXCIpfWlmKCF0aGlzLmIub3B0aW9uc3x8IXRoaXMuYi5vcHRpb25zLmFwaUtleSl0aHJvdyBuZXcgSShcImludmFsaWQtYXBpLWtleVwiKTtuPXRoaXMuYi5vcHRpb25zLmFwaUtleTt2YXIgaT10aGlzLG89bnVsbDt0cnl7bz10aGlzLmIuYXV0aCgpLkdhKCl9Y2F0Y2godCl7fXRyeXtyPXRoaXMuYi5hdXRoKCkuc2V0dGluZ3MuYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nfWNhdGNoKHQpe31vPVhsLlNES19WRVJTSU9OP2dyKFhsLlNES19WRVJTSU9OLG8pOm51bGwsVGwuY2FsbCh0aGlzLG4sdCxlLGZ1bmN0aW9uKCl7dHJ5e3ZhciBlPWkuYi5hdXRoKCkubGEoKX1jYXRjaCh0KXtlPW51bGx9cmV0dXJuIGV9LG8sTihFKSxyKX1mdW5jdGlvbiBPbCh0LGUsbixyKXt0OntuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG4pO2Zvcih2YXIgaT0wLG89ITEsYT0wO2E8ZS5sZW5ndGg7YSsrKWlmKGVbYV0ub3B0aW9uYWwpbz0hMDtlbHNle2lmKG8pdGhyb3cgbmV3IEkoXCJpbnRlcm5hbC1lcnJvclwiLFwiQXJndW1lbnQgdmFsaWRhdG9yIGVuY291bnRlcmVkIGEgcmVxdWlyZWQgYXJndW1lbnQgYWZ0ZXIgYW4gb3B0aW9uYWwgYXJndW1lbnQuXCIpO2krK31pZihvPWUubGVuZ3RoLG4ubGVuZ3RoPGl8fG88bi5sZW5ndGgpcj1cIkV4cGVjdGVkIFwiKyhpPT1vPzE9PWk/XCIxIGFyZ3VtZW50XCI6aStcIiBhcmd1bWVudHNcIjppK1wiLVwiK28rXCIgYXJndW1lbnRzXCIpK1wiIGJ1dCBnb3QgXCIrbi5sZW5ndGgrXCIuXCI7ZWxzZXtmb3IoaT0wO2k8bi5sZW5ndGg7aSsrKWlmKG89ZVtpXS5vcHRpb25hbCYmdm9pZCAwPT09bltpXSwhZVtpXS5NKG5baV0pJiYhbyl7aWYoZT1lW2ldLGk8MHx8aT49RGwubGVuZ3RoKXRocm93IG5ldyBJKFwiaW50ZXJuYWwtZXJyb3JcIixcIkFyZ3VtZW50IHZhbGlkYXRvciByZWNlaXZlZCBhbiB1bnN1cHBvcnRlZCBudW1iZXIgb2YgYXJndW1lbnRzLlwiKTtuPURsW2ldLHI9KHI/XCJcIjpuK1wiIGFyZ3VtZW50IFwiKSsoZS5uYW1lPydcIicrZS5uYW1lKydcIiAnOlwiXCIpK1wibXVzdCBiZSBcIitlLksrXCIuXCI7YnJlYWsgdH1yPW51bGx9fWlmKHIpdGhyb3cgbmV3IEkoXCJhcmd1bWVudC1lcnJvclwiLHQrXCIgZmFpbGVkOiBcIityKX0odD1UbC5wcm90b3R5cGUpLklhPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5mfHwodGhpcy5mPUFsKHRoaXMsYmUoKS50aGVuKGZ1bmN0aW9uKCl7aWYod3IoKSYmIWNyKCkpcmV0dXJuIGFyKCk7dGhyb3cgbmV3IEkoXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIsXCJSZWNhcHRjaGFWZXJpZmllciBpcyBvbmx5IHN1cHBvcnRlZCBpbiBhIGJyb3dzZXIgSFRUUC9IVFRQUyBlbnZpcm9ubWVudC5cIil9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUubS5nKGUudSgpKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuZz10LHpzKGUucyxScyx7fSl9KS50aGVuKGZ1bmN0aW9uKHQpe2UuYVtDbF09dC5yZWNhcHRjaGFTaXRlS2V5fSkubyhmdW5jdGlvbih0KXt0aHJvdyBlLmY9bnVsbCx0fSkpKX0sdC5yZW5kZXI9ZnVuY3Rpb24oKXtSbCh0aGlzKTt2YXIgbj10aGlzO3JldHVybiBBbCh0aGlzLHRoaXMuSWEoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIHQsZTtyZXR1cm4gbnVsbD09PW4uYyYmKGU9bi52LG4uaXx8KHQ9dGUoZSksZT1vZShcIkRJVlwiKSx0LmFwcGVuZENoaWxkKGUpKSxuLmM9bi5nLnJlbmRlcihlLG4uYSkpLG4uY30pKX0sdC52ZXJpZnk9ZnVuY3Rpb24oKXtSbCh0aGlzKTt2YXIgaT10aGlzO3JldHVybiBBbCh0aGlzLHRoaXMucmVuZGVyKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGZlKGZ1bmN0aW9uKG4pe3ZhciByLHQ9aS5nLmdldFJlc3BvbnNlKGUpO3Q/bih0KToocj1mdW5jdGlvbih0KXt2YXIgZTt0JiYoZT1yLEgoaS5sLGZ1bmN0aW9uKHQpe3JldHVybiB0PT1lfSksbih0KSl9LGkubC5wdXNoKHIpLGkuaSYmaS5nLmV4ZWN1dGUoaS5jKSl9KX0pKX0sdC5yZXNldD1mdW5jdGlvbigpe1JsKHRoaXMpLG51bGwhPT10aGlzLmMmJnRoaXMuZy5yZXNldCh0aGlzLmMpfSx0LmNsZWFyPWZ1bmN0aW9uKCl7UmwodGhpcyksdGhpcy5EPSEwLHRoaXMubS5jKCk7Zm9yKHZhciB0LGU9MDtlPHRoaXMuaC5sZW5ndGg7ZSsrKXRoaXMuaFtlXS5jYW5jZWwoXCJSZWNhcHRjaGFWZXJpZmllciBpbnN0YW5jZSBoYXMgYmVlbiBkZXN0cm95ZWQuXCIpO2lmKCF0aGlzLmkpe2U9dGUodGhpcy52KTtmb3IoO3Q9ZS5maXJzdENoaWxkOyllLnJlbW92ZUNoaWxkKHQpfX0sXyhQbCxUbCk7dmFyIERsPVwiRmlyc3QgU2Vjb25kIFRoaXJkIEZvdXJ0aCBGaWZ0aCBTaXh0aCBTZXZlbnRoIEVpZ2h0aCBOaW50aFwiLnNwbGl0KFwiIFwiKTtmdW5jdGlvbiB4bCh0LGUpe3JldHVybntuYW1lOnR8fFwiXCIsSzpcImEgdmFsaWQgc3RyaW5nXCIsb3B0aW9uYWw6ISFlLE06ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR9fX1mdW5jdGlvbiBMbCh0LGUpe3JldHVybntuYW1lOnR8fFwiXCIsSzpcImEgYm9vbGVhblwiLG9wdGlvbmFsOiEhZSxNOmZ1bmN0aW9uKHQpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgdH19fWZ1bmN0aW9uIE1sKHQsZSl7cmV0dXJue25hbWU6dHx8XCJcIixLOlwiYSB2YWxpZCBvYmplY3RcIixvcHRpb25hbDohIWUsTTpnfX1mdW5jdGlvbiBGbCh0LGUpe3JldHVybntuYW1lOnR8fFwiXCIsSzpcImEgZnVuY3Rpb25cIixvcHRpb25hbDohIWUsTTpmdW5jdGlvbih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fX19ZnVuY3Rpb24gVWwodCxlKXtyZXR1cm57bmFtZTp0fHxcIlwiLEs6XCJudWxsXCIsb3B0aW9uYWw6ISFlLE06ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PT10fX19ZnVuY3Rpb24gamwobil7cmV0dXJue25hbWU6bj9uK1wiQ3JlZGVudGlhbFwiOlwiY3JlZGVudGlhbFwiLEs6bj9cImEgdmFsaWQgXCIrbitcIiBjcmVkZW50aWFsXCI6XCJhIHZhbGlkIGNyZWRlbnRpYWxcIixvcHRpb25hbDohMSxNOmZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiExO3ZhciBlPSFufHx0LnByb3ZpZGVySWQ9PT1uO3JldHVybiEoIXQua2F8fCFlKX19fWZ1bmN0aW9uIHFsKCl7cmV0dXJue25hbWU6XCJtdWx0aUZhY3RvckFzc2VydGlvblwiLEs6XCJhIHZhbGlkIG11bHRpRmFjdG9yQXNzZXJ0aW9uXCIsb3B0aW9uYWw6ITEsTTpmdW5jdGlvbih0KXtyZXR1cm4hIXQmJiEhdC5zYn19fWZ1bmN0aW9uIFZsKCl7cmV0dXJue25hbWU6XCJhdXRoUHJvdmlkZXJcIixLOlwiYSB2YWxpZCBBdXRoIHByb3ZpZGVyXCIsb3B0aW9uYWw6ITEsTTpmdW5jdGlvbih0KXtyZXR1cm4hISh0JiZ0LnByb3ZpZGVySWQmJnQuaGFzT3duUHJvcGVydHkmJnQuaGFzT3duUHJvcGVydHkoXCJpc09BdXRoUHJvdmlkZXJcIikpfX19ZnVuY3Rpb24gQmwodCxlKXtyZXR1cm4gZyh0KSYmXCJzdHJpbmdcIj09dHlwZW9mIHQudHlwZSYmdC50eXBlPT09ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5IYX1mdW5jdGlvbiBLbCh0KXtyZXR1cm4gZyh0KSYmXCJzdHJpbmdcIj09dHlwZW9mIHQudWlkfWZ1bmN0aW9uIFdsKCl7cmV0dXJue25hbWU6XCJhcHBsaWNhdGlvblZlcmlmaWVyXCIsSzpcImFuIGltcGxlbWVudGF0aW9uIG9mIGZpcmViYXNlLmF1dGguQXBwbGljYXRpb25WZXJpZmllclwiLG9wdGlvbmFsOiExLE06ZnVuY3Rpb24odCl7cmV0dXJuISghdHx8XCJzdHJpbmdcIiE9dHlwZW9mIHQudHlwZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC52ZXJpZnkpfX19ZnVuY3Rpb24gSGwoZSxuLHQscil7cmV0dXJue25hbWU6dHx8XCJcIixLOmUuSytcIiBvciBcIituLkssb3B0aW9uYWw6ISFyLE06ZnVuY3Rpb24odCl7cmV0dXJuIGUuTSh0KXx8bi5NKHQpfX19ZnVuY3Rpb24gR2wodCxlKXtmb3IodmFyIG4gaW4gZSl7dmFyIHI9ZVtuXS5uYW1lO3Rbcl09WWwocix0W25dLGVbbl0uail9fWZ1bmN0aW9uIHpsKHQsZSl7Zm9yKHZhciBuIGluIGUpe3ZhciByPWVbbl0ubmFtZTtyIT09biYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscix7Z2V0OmIoZnVuY3Rpb24odCl7cmV0dXJuIHRoaXNbdF19LG4pLHNldDpiKGZ1bmN0aW9uKHQsZSxuLHIpe09sKHQsW25dLFtyXSwhMCksdGhpc1tlXT1yfSxyLG4sZVtuXS5rYiksZW51bWVyYWJsZTohMH0pfX1mdW5jdGlvbiBRbCh0LGUsbixyKXt0W2VdPVlsKGUsbixyKX1mdW5jdGlvbiBZbCh0LGUsbil7ZnVuY3Rpb24gcigpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIE9sKG8sbix0KSxlLmFwcGx5KHRoaXMsdCl9aWYoIW4pcmV0dXJuIGU7dmFyIGksbz0odD0odD10KS5zcGxpdChcIi5cIikpW3QubGVuZ3RoLTFdO2ZvcihpIGluIGUpcltpXT1lW2ldO2ZvcihpIGluIGUucHJvdG90eXBlKXIucHJvdG90eXBlW2ldPWUucHJvdG90eXBlW2ldO3JldHVybiByfUdsKFhoLnByb3RvdHlwZSx7amI6e25hbWU6XCJhcHBseUFjdGlvbkNvZGVcIixqOlt4bChcImNvZGVcIildfSxSYTp7bmFtZTpcImNoZWNrQWN0aW9uQ29kZVwiLGo6W3hsKFwiY29kZVwiKV19LG5iOntuYW1lOlwiY29uZmlybVBhc3N3b3JkUmVzZXRcIixqOlt4bChcImNvZGVcIikseGwoXCJuZXdQYXNzd29yZFwiKV19LGRjOntuYW1lOlwiY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkXCIsajpbeGwoXCJlbWFpbFwiKSx4bChcInBhc3N3b3JkXCIpXX0saGM6e25hbWU6XCJmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbFwiLGo6W3hsKFwiZW1haWxcIildfSxxYTp7bmFtZTpcImdldFJlZGlyZWN0UmVzdWx0XCIsajpbXX0sQmM6e25hbWU6XCJpc1NpZ25JbldpdGhFbWFpbExpbmtcIixqOlt4bChcImVtYWlsTGlua1wiKV19LEhjOntuYW1lOlwib25BdXRoU3RhdGVDaGFuZ2VkXCIsajpbSGwoTWwoKSxGbCgpLFwibmV4dE9yT2JzZXJ2ZXJcIiksRmwoXCJvcHRfZXJyb3JcIiwhMCksRmwoXCJvcHRfY29tcGxldGVkXCIsITApXX0sSWM6e25hbWU6XCJvbklkVG9rZW5DaGFuZ2VkXCIsajpbSGwoTWwoKSxGbCgpLFwibmV4dE9yT2JzZXJ2ZXJcIiksRmwoXCJvcHRfZXJyb3JcIiwhMCksRmwoXCJvcHRfY29tcGxldGVkXCIsITApXX0sdmI6e25hbWU6XCJzZW5kUGFzc3dvcmRSZXNldEVtYWlsXCIsajpbeGwoXCJlbWFpbFwiKSxIbChNbChcIm9wdF9hY3Rpb25Db2RlU2V0dGluZ3NcIiwhMCksVWwobnVsbCwhMCksXCJvcHRfYWN0aW9uQ29kZVNldHRpbmdzXCIsITApXX0sd2I6e25hbWU6XCJzZW5kU2lnbkluTGlua1RvRW1haWxcIixqOlt4bChcImVtYWlsXCIpLE1sKFwiYWN0aW9uQ29kZVNldHRpbmdzXCIpXX0seGI6e25hbWU6XCJzZXRQZXJzaXN0ZW5jZVwiLGo6W3hsKFwicGVyc2lzdGVuY2VcIildfSxTYzp7bmFtZTpcInNpZ25JbkFuZFJldHJpZXZlRGF0YVdpdGhDcmVkZW50aWFsXCIsajpbamwoKV19LHpiOntuYW1lOlwic2lnbkluQW5vbnltb3VzbHlcIixqOltdfSwkYTp7bmFtZTpcInNpZ25JbldpdGhDcmVkZW50aWFsXCIsajpbamwoKV19LFRjOntuYW1lOlwic2lnbkluV2l0aEN1c3RvbVRva2VuXCIsajpbeGwoXCJ0b2tlblwiKV19LFVjOntuYW1lOlwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmRcIixqOlt4bChcImVtYWlsXCIpLHhsKFwicGFzc3dvcmRcIildfSxWYzp7bmFtZTpcInNpZ25JbldpdGhFbWFpbExpbmtcIixqOlt4bChcImVtYWlsXCIpLHhsKFwiZW1haWxMaW5rXCIsITApXX0sV2M6e25hbWU6XCJzaWduSW5XaXRoUGhvbmVOdW1iZXJcIixqOlt4bChcInBob25lTnVtYmVyXCIpLFdsKCldfSxYYzp7bmFtZTpcInNpZ25JbldpdGhQb3B1cFwiLGo6W1ZsKCldfSxZYzp7bmFtZTpcInNpZ25JbldpdGhSZWRpcmVjdFwiLGo6W1ZsKCldfSxkZDp7bmFtZTpcInVwZGF0ZUN1cnJlbnRVc2VyXCIsajpbSGwoe25hbWU6XCJ1c2VyXCIsSzpcImFuIGluc3RhbmNlIG9mIEZpcmViYXNlIFVzZXJcIixvcHRpb25hbDohMSxNOmZ1bmN0aW9uKHQpe3JldHVybiEhKHQmJnQgaW5zdGFuY2VvZiBoaCl9fSxVbCgpLFwidXNlclwiKV19LEFiOntuYW1lOlwic2lnbk91dFwiLGo6W119LHRvSlNPTjp7bmFtZTpcInRvSlNPTlwiLGo6W3hsKG51bGwsITApXX0sZmQ6e25hbWU6XCJ1c2VEZXZpY2VMYW5ndWFnZVwiLGo6W119LGdkOntuYW1lOlwidXNlRW11bGF0b3JcIixqOlt4bChcInVybFwiKSxNbChcIm9wdGlvbnNcIiwhMCldfSxqZDp7bmFtZTpcInZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlXCIsajpbeGwoXCJjb2RlXCIpXX19KSx6bChYaC5wcm90b3R5cGUse2xjOntuYW1lOlwibGFuZ3VhZ2VDb2RlXCIsa2I6SGwoeGwoKSxVbCgpLFwibGFuZ3VhZ2VDb2RlXCIpfSx0aTp7bmFtZTpcInRlbmFudElkXCIsa2I6SGwoeGwoKSxVbCgpLFwidGVuYW50SWRcIil9fSksKFhoLlBlcnNpc3RlbmNlPUt1KS5MT0NBTD1cImxvY2FsXCIsWGguUGVyc2lzdGVuY2UuU0VTU0lPTj1cInNlc3Npb25cIixYaC5QZXJzaXN0ZW5jZS5OT05FPVwibm9uZVwiLEdsKGhoLnByb3RvdHlwZSx7ZGVsZXRlOntuYW1lOlwiZGVsZXRlXCIsajpbXX0sb2M6e25hbWU6XCJnZXRJZFRva2VuUmVzdWx0XCIsajpbTGwoXCJvcHRfZm9yY2VSZWZyZXNoXCIsITApXX0sSTp7bmFtZTpcImdldElkVG9rZW5cIixqOltMbChcIm9wdF9mb3JjZVJlZnJlc2hcIiwhMCldfSxDYzp7bmFtZTpcImxpbmtBbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbFwiLGo6W2psKCldfSxxYjp7bmFtZTpcImxpbmtXaXRoQ3JlZGVudGlhbFwiLGo6W2psKCldfSxEYzp7bmFtZTpcImxpbmtXaXRoUGhvbmVOdW1iZXJcIixqOlt4bChcInBob25lTnVtYmVyXCIpLFdsKCldfSxFYzp7bmFtZTpcImxpbmtXaXRoUG9wdXBcIixqOltWbCgpXX0sRmM6e25hbWU6XCJsaW5rV2l0aFJlZGlyZWN0XCIsajpbVmwoKV19LExjOntuYW1lOlwicmVhdXRoZW50aWNhdGVBbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbFwiLGo6W2psKCldfSx0Yjp7bmFtZTpcInJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWxcIixqOltqbCgpXX0sTWM6e25hbWU6XCJyZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlclwiLGo6W3hsKFwicGhvbmVOdW1iZXJcIiksV2woKV19LE5jOntuYW1lOlwicmVhdXRoZW50aWNhdGVXaXRoUG9wdXBcIixqOltWbCgpXX0sT2M6e25hbWU6XCJyZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdFwiLGo6W1ZsKCldfSxyZWxvYWQ6e25hbWU6XCJyZWxvYWRcIixqOltdfSx1Yjp7bmFtZTpcInNlbmRFbWFpbFZlcmlmaWNhdGlvblwiLGo6W0hsKE1sKFwib3B0X2FjdGlvbkNvZGVTZXR0aW5nc1wiLCEwKSxVbChudWxsLCEwKSxcIm9wdF9hY3Rpb25Db2RlU2V0dGluZ3NcIiwhMCldfSx0b0pTT046e25hbWU6XCJ0b0pTT05cIixqOlt4bChudWxsLCEwKV19LGNkOntuYW1lOlwidW5saW5rXCIsajpbeGwoXCJwcm92aWRlclwiKV19LEJiOntuYW1lOlwidXBkYXRlRW1haWxcIixqOlt4bChcImVtYWlsXCIpXX0sQ2I6e25hbWU6XCJ1cGRhdGVQYXNzd29yZFwiLGo6W3hsKFwicGFzc3dvcmRcIildfSxlZDp7bmFtZTpcInVwZGF0ZVBob25lTnVtYmVyXCIsajpbamwoXCJwaG9uZVwiKV19LERiOntuYW1lOlwidXBkYXRlUHJvZmlsZVwiLGo6W01sKFwicHJvZmlsZVwiKV19LEViOntuYW1lOlwidmVyaWZ5QmVmb3JlVXBkYXRlRW1haWxcIixqOlt4bChcImVtYWlsXCIpLEhsKE1sKFwib3B0X2FjdGlvbkNvZGVTZXR0aW5nc1wiLCEwKSxVbChudWxsLCEwKSxcIm9wdF9hY3Rpb25Db2RlU2V0dGluZ3NcIiwhMCldfX0pLEdsKGhsLnByb3RvdHlwZSx7ZXhlY3V0ZTp7bmFtZTpcImV4ZWN1dGVcIn0scmVuZGVyOntuYW1lOlwicmVuZGVyXCJ9LHJlc2V0OntuYW1lOlwicmVzZXRcIn0sZ2V0UmVzcG9uc2U6e25hbWU6XCJnZXRSZXNwb25zZVwifX0pLEdsKGNsLnByb3RvdHlwZSx7ZXhlY3V0ZTp7bmFtZTpcImV4ZWN1dGVcIn0scmVuZGVyOntuYW1lOlwicmVuZGVyXCJ9LHJlc2V0OntuYW1lOlwicmVzZXRcIn0sZ2V0UmVzcG9uc2U6e25hbWU6XCJnZXRSZXNwb25zZVwifX0pLEdsKGZlLnByb3RvdHlwZSx7b2E6e25hbWU6XCJmaW5hbGx5XCJ9LG86e25hbWU6XCJjYXRjaFwifSx0aGVuOntuYW1lOlwidGhlblwifX0pLHpsKFZjLnByb3RvdHlwZSx7YXBwVmVyaWZpY2F0aW9uRGlzYWJsZWQ6e25hbWU6XCJhcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmdcIixrYjpMbChcImFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZ1wiKX19KSxHbChCYy5wcm90b3R5cGUse2NvbmZpcm06e25hbWU6XCJjb25maXJtXCIsajpbeGwoXCJ2ZXJpZmljYXRpb25Db2RlXCIpXX19KSxRbCgkaSxcImZyb21KU09OXCIsZnVuY3Rpb24odCl7dD1cInN0cmluZ1wiPT10eXBlb2YgdD9KU09OLnBhcnNlKHQpOnQ7Zm9yKHZhciBlLG49W29vLGJvLEVvLG5vXSxyPTA7cjxuLmxlbmd0aDtyKyspaWYoZT1uW3JdKHQpKXJldHVybiBlO3JldHVybiBudWxsfSxbSGwoeGwoKSxNbCgpLFwianNvblwiKV0pLFFsKF9vLFwiY3JlZGVudGlhbFwiLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBtbyh0LGUpfSxbeGwoXCJlbWFpbFwiKSx4bChcInBhc3N3b3JkXCIpXSksR2wobW8ucHJvdG90eXBlLHt3OntuYW1lOlwidG9KU09OXCIsajpbeGwobnVsbCwhMCldfX0pLEdsKGNvLnByb3RvdHlwZSx7Q2E6e25hbWU6XCJhZGRTY29wZVwiLGo6W3hsKFwic2NvcGVcIildfSxLYTp7bmFtZTpcInNldEN1c3RvbVBhcmFtZXRlcnNcIixqOltNbChcImN1c3RvbU9BdXRoUGFyYW1ldGVyc1wiKV19fSksUWwoY28sXCJjcmVkZW50aWFsXCIsaG8sW0hsKHhsKCksTWwoKSxcInRva2VuXCIpXSksUWwoX28sXCJjcmVkZW50aWFsV2l0aExpbmtcIix3byxbeGwoXCJlbWFpbFwiKSx4bChcImVtYWlsTGlua1wiKV0pLEdsKGxvLnByb3RvdHlwZSx7Q2E6e25hbWU6XCJhZGRTY29wZVwiLGo6W3hsKFwic2NvcGVcIildfSxLYTp7bmFtZTpcInNldEN1c3RvbVBhcmFtZXRlcnNcIixqOltNbChcImN1c3RvbU9BdXRoUGFyYW1ldGVyc1wiKV19fSksUWwobG8sXCJjcmVkZW50aWFsXCIsZm8sW0hsKHhsKCksTWwoKSxcInRva2VuXCIpXSksR2wocG8ucHJvdG90eXBlLHtDYTp7bmFtZTpcImFkZFNjb3BlXCIsajpbeGwoXCJzY29wZVwiKV19LEthOntuYW1lOlwic2V0Q3VzdG9tUGFyYW1ldGVyc1wiLGo6W01sKFwiY3VzdG9tT0F1dGhQYXJhbWV0ZXJzXCIpXX19KSxRbChwbyxcImNyZWRlbnRpYWxcIix2byxbSGwoeGwoKSxIbChNbCgpLFVsKCkpLFwiaWRUb2tlblwiKSxIbCh4bCgpLFVsKCksXCJhY2Nlc3NUb2tlblwiLCEwKV0pLEdsKGdvLnByb3RvdHlwZSx7S2E6e25hbWU6XCJzZXRDdXN0b21QYXJhbWV0ZXJzXCIsajpbTWwoXCJjdXN0b21PQXV0aFBhcmFtZXRlcnNcIildfX0pLFFsKGdvLFwiY3JlZGVudGlhbFwiLHlvLFtIbCh4bCgpLE1sKCksXCJ0b2tlblwiKSx4bChcInNlY3JldFwiLCEwKV0pLEdsKHVvLnByb3RvdHlwZSx7Q2E6e25hbWU6XCJhZGRTY29wZVwiLGo6W3hsKFwic2NvcGVcIildfSxjcmVkZW50aWFsOntuYW1lOlwiY3JlZGVudGlhbFwiLGo6W0hsKHhsKCksSGwoTWwoKSxVbCgpKSxcIm9wdGlvbnNPcklkVG9rZW5cIiksSGwoeGwoKSxVbCgpLFwiYWNjZXNzVG9rZW5cIiwhMCldfSxLYTp7bmFtZTpcInNldEN1c3RvbVBhcmFtZXRlcnNcIixqOltNbChcImN1c3RvbU9BdXRoUGFyYW1ldGVyc1wiKV19fSksR2wocm8ucHJvdG90eXBlLHt3OntuYW1lOlwidG9KU09OXCIsajpbeGwobnVsbCwhMCldfX0pLEdsKHRvLnByb3RvdHlwZSx7dzp7bmFtZTpcInRvSlNPTlwiLGo6W3hsKG51bGwsITApXX19KSxRbChDbyxcImNyZWRlbnRpYWxcIixrbyxbeGwoXCJ2ZXJpZmljYXRpb25JZFwiKSx4bChcInZlcmlmaWNhdGlvbkNvZGVcIildKSxHbChDby5wcm90b3R5cGUse2ZiOntuYW1lOlwidmVyaWZ5UGhvbmVOdW1iZXJcIixqOltIbCh4bCgpLHtuYW1lOlwicGhvbmVJbmZvT3B0aW9uc1wiLEs6XCJ2YWxpZCBwaG9uZSBpbmZvIG9wdGlvbnNcIixvcHRpb25hbDohMSxNOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmKHQuc2Vzc2lvbiYmdC5waG9uZU51bWJlcj9CbCh0LnNlc3Npb24sWGkpJiZcInN0cmluZ1wiPT10eXBlb2YgdC5waG9uZU51bWJlcjp0LnNlc3Npb24mJnQubXVsdGlGYWN0b3JIaW50P0JsKHQuc2Vzc2lvbixKaSkmJktsKHQubXVsdGlGYWN0b3JIaW50KTp0LnNlc3Npb24mJnQubXVsdGlGYWN0b3JVaWQ/QmwodC5zZXNzaW9uLEppKSYmXCJzdHJpbmdcIj09dHlwZW9mIHQubXVsdGlGYWN0b3JVaWQ6ISF0LnBob25lTnVtYmVyJiZcInN0cmluZ1wiPT10eXBlb2YgdC5waG9uZU51bWJlcil9fSxcInBob25lSW5mb09wdGlvbnNcIiksV2woKV19fSksR2woVG8ucHJvdG90eXBlLHt3OntuYW1lOlwidG9KU09OXCIsajpbeGwobnVsbCwhMCldfX0pLEdsKEkucHJvdG90eXBlLHt0b0pTT046e25hbWU6XCJ0b0pTT05cIixqOlt4bChudWxsLCEwKV19fSksR2woTW8ucHJvdG90eXBlLHt0b0pTT046e25hbWU6XCJ0b0pTT05cIixqOlt4bChudWxsLCEwKV19fSksR2woTG8ucHJvdG90eXBlLHt0b0pTT046e25hbWU6XCJ0b0pTT05cIixqOlt4bChudWxsLCEwKV19fSksR2woUWMucHJvdG90eXBlLHt0b0pTT046e25hbWU6XCJ0b0pTT05cIixqOlt4bChudWxsLCEwKV19fSksR2woSGMucHJvdG90eXBlLHtSYzp7bmFtZTpcInJlc29sdmVTaWduSW5cIixqOltxbCgpXX19KSxHbCh0aC5wcm90b3R5cGUse1JiOntuYW1lOlwiZ2V0U2Vzc2lvblwiLGo6W119LGZjOntuYW1lOlwiZW5yb2xsXCIsajpbcWwoKSx4bChcImRpc3BsYXlOYW1lXCIsITApXX0sYmQ6e25hbWU6XCJ1bmVucm9sbFwiLGo6W0hsKHtuYW1lOlwibXVsdGlGYWN0b3JJbmZvXCIsSzpcImEgdmFsaWQgbXVsdGlGYWN0b3JJbmZvXCIsb3B0aW9uYWw6ITEsTTpLbH0seGwoKSxcIm11bHRpRmFjdG9ySW5mb0lkZW50aWZpZXJcIildfX0pLEdsKFBsLnByb3RvdHlwZSx7Y2xlYXI6e25hbWU6XCJjbGVhclwiLGo6W119LHJlbmRlcjp7bmFtZTpcInJlbmRlclwiLGo6W119LHZlcmlmeTp7bmFtZTpcInZlcmlmeVwiLGo6W119fSksUWwoaGksXCJwYXJzZUxpbmtcIixtaSxbeGwoXCJsaW5rXCIpXSksUWwoZ2wsXCJhc3NlcnRpb25cIixmdW5jdGlvbih0KXtyZXR1cm4gbmV3ICRjKHQpfSxbamwoXCJwaG9uZVwiKV0pLGZ1bmN0aW9uKCl7aWYodm9pZCAwPT09WGx8fCFYbC5JTlRFUk5BTHx8IVhsLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KXRocm93IEVycm9yKFwiQ2Fubm90IGZpbmQgdGhlIGZpcmViYXNlIG5hbWVzcGFjZTsgYmUgc3VyZSB0byBpbmNsdWRlIGZpcmViYXNlLWFwcC5qcyBiZWZvcmUgdGhpcyBsaWJyYXJ5LlwiKTt2YXIgdD17QWN0aW9uQ29kZUluZm86e09wZXJhdGlvbjp7RU1BSUxfU0lHTklOOiRyLFBBU1NXT1JEX1JFU0VUOlwiUEFTU1dPUkRfUkVTRVRcIixSRUNPVkVSX0VNQUlMOlwiUkVDT1ZFUl9FTUFJTFwiLFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OOkpyLFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMOlpyLFZFUklGWV9FTUFJTDpcIlZFUklGWV9FTUFJTFwifX0sQXV0aDpYaCxBdXRoQ3JlZGVudGlhbDokaSxFcnJvcjpJfTtRbCh0LFwiRW1haWxBdXRoUHJvdmlkZXJcIixfbyxbXSksUWwodCxcIkZhY2Vib29rQXV0aFByb3ZpZGVyXCIsY28sW10pLFFsKHQsXCJHaXRodWJBdXRoUHJvdmlkZXJcIixsbyxbXSksUWwodCxcIkdvb2dsZUF1dGhQcm92aWRlclwiLHBvLFtdKSxRbCh0LFwiVHdpdHRlckF1dGhQcm92aWRlclwiLGdvLFtdKSxRbCh0LFwiT0F1dGhQcm92aWRlclwiLHVvLFt4bChcInByb3ZpZGVySWRcIildKSxRbCh0LFwiU0FNTEF1dGhQcm92aWRlclwiLHNvLFt4bChcInByb3ZpZGVySWRcIildKSxRbCh0LFwiUGhvbmVBdXRoUHJvdmlkZXJcIixDbyxbe25hbWU6XCJhdXRoXCIsSzpcImFuIGluc3RhbmNlIG9mIEZpcmViYXNlIEF1dGhcIixvcHRpb25hbDohMCxNOmZ1bmN0aW9uKHQpe3JldHVybiEhKHQmJnQgaW5zdGFuY2VvZiBYaCl9fV0pLFFsKHQsXCJSZWNhcHRjaGFWZXJpZmllclwiLFBsLFtIbCh4bCgpLHtuYW1lOlwiXCIsSzpcImFuIEhUTUwgZWxlbWVudFwiLG9wdGlvbmFsOiExLE06ZnVuY3Rpb24odCl7cmV0dXJuISEodCYmdCBpbnN0YW5jZW9mIEVsZW1lbnQpfX0sXCJyZWNhcHRjaGFDb250YWluZXJcIiksTWwoXCJyZWNhcHRjaGFQYXJhbWV0ZXJzXCIsITApLHtuYW1lOlwiYXBwXCIsSzpcImFuIGluc3RhbmNlIG9mIEZpcmViYXNlIEFwcFwiLG9wdGlvbmFsOiEwLE06ZnVuY3Rpb24odCl7cmV0dXJuISEodCYmdCBpbnN0YW5jZW9mIFhsLmFwcC5BcHApfX1dKSxRbCh0LFwiQWN0aW9uQ29kZVVSTFwiLGhpLFtdKSxRbCh0LFwiUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvclwiLGdsLFtdKSxYbC5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudCh7bmFtZTpcImF1dGhcIixpbnN0YW5jZUZhY3Rvcnk6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBYaCh0PXQuZ2V0UHJvdmlkZXIoXCJhcHBcIikuZ2V0SW1tZWRpYXRlKCkpfSxtdWx0aXBsZUluc3RhbmNlczohMSxzZXJ2aWNlUHJvcHM6dCxpbnN0YW50aWF0aW9uTW9kZTpcIkxBWllcIix0eXBlOlwiUFVCTElDXCJ9KSxYbC5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudCh7bmFtZTpcImF1dGgtaW50ZXJuYWxcIixpbnN0YW5jZUZhY3Rvcnk6ZnVuY3Rpb24odCl7cmV0dXJue2dldFVpZDptKCh0PXQuZ2V0UHJvdmlkZXIoXCJhdXRoXCIpLmdldEltbWVkaWF0ZSgpKS5nZXRVaWQsdCksZ2V0VG9rZW46bSh0Lm5jLHQpLGFkZEF1dGhUb2tlbkxpc3RlbmVyOm0odC5jYyx0KSxyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcjptKHQuUGMsdCl9fSxtdWx0aXBsZUluc3RhbmNlczohMSxpbnN0YW50aWF0aW9uTW9kZTpcIkxBWllcIix0eXBlOlwiUFJJVkFURVwifSksWGwucmVnaXN0ZXJWZXJzaW9uKFwiQGZpcmViYXNlL2F1dGhcIixcIjAuMTYuNVwiKSxYbC5JTlRFUk5BTC5leHRlbmROYW1lc3BhY2Uoe1VzZXI6aGh9KX0oKX0uYXBwbHkoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSk7dmFyIE9hPVwiXCI7ZnVuY3Rpb24gRGEodCl7T2E9dH12YXIgeGE9KExhLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXtudWxsPT1lP3RoaXMuZG9tU3RvcmFnZV8ucmVtb3ZlSXRlbSh0aGlzLnByZWZpeGVkTmFtZV8odCkpOnRoaXMuZG9tU3RvcmFnZV8uc2V0SXRlbSh0aGlzLnByZWZpeGVkTmFtZV8odCksUG8oZSkpfSxMYS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3Q9dGhpcy5kb21TdG9yYWdlXy5nZXRJdGVtKHRoaXMucHJlZml4ZWROYW1lXyh0KSk7cmV0dXJuIG51bGw9PXQ/bnVsbDpSbyh0KX0sTGEucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXt0aGlzLmRvbVN0b3JhZ2VfLnJlbW92ZUl0ZW0odGhpcy5wcmVmaXhlZE5hbWVfKHQpKX0sTGEucHJvdG90eXBlLnByZWZpeGVkTmFtZV89ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucHJlZml4Xyt0fSxMYS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21TdG9yYWdlXy50b1N0cmluZygpfSxMYSk7ZnVuY3Rpb24gTGEodCl7dGhpcy5kb21TdG9yYWdlXz10LHRoaXMucHJlZml4Xz1cImZpcmViYXNlOlwifXZhciBNYT0oRmEucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe251bGw9PWU/ZGVsZXRlIHRoaXMuY2FjaGVfW3RdOnRoaXMuY2FjaGVfW3RdPWV9LEZhLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIERvKHRoaXMuY2FjaGVfLHQpP3RoaXMuY2FjaGVfW3RdOm51bGx9LEZhLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuY2FjaGVfW3RdfSxGYSk7ZnVuY3Rpb24gRmEoKXt0aGlzLmNhY2hlXz17fSx0aGlzLmlzSW5NZW1vcnlTdG9yYWdlPSEwfWZ1bmN0aW9uIFVhKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTAscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgaSxvPXQuY2hhckNvZGVBdChyKTs1NTI5Njw9byYmbzw9NTYzMTkmJihpPW8tNTUyOTYsYW8oKytyPHQubGVuZ3RoLFwiU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuXCIpLG89NjU1MzYrKGk8PDEwKSsodC5jaGFyQ29kZUF0KHIpLTU2MzIwKSksbzwxMjg/ZVtuKytdPW86KG88MjA0OD9lW24rK109bz4+NnwxOTI6KG88NjU1MzY/ZVtuKytdPW8+PjEyfDIyNDooZVtuKytdPW8+PjE4fDI0MCxlW24rK109bz4+MTImNjN8MTI4KSxlW24rK109bz4+NiY2M3wxMjgpLGVbbisrXT02MyZvfDEyOCl9cmV0dXJuIGV9KHQpO3JldHVybih0PW5ldyBVbykudXBkYXRlKGUpLHQ9dC5kaWdlc3QoKSx1by5lbmNvZGVCeXRlQXJyYXkodCl9ZnVuY3Rpb24gamEodCxlKXthbyghZXx8ITA9PT10fHwhMT09PXQsXCJDYW4ndCB0dXJuIG9uIGN1c3RvbSBsb2dnZXJzIHBlcnNpc3RlbnRseS5cIiksITA9PT10PyhRYS5sb2dMZXZlbD11YS5WRVJCT1NFLEphPVFhLmxvZy5iaW5kKFFhKSxlJiZ6YS5zZXQoXCJsb2dnaW5nX2VuYWJsZWRcIiwhMCkpOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/SmE9dDooSmE9bnVsbCx6YS5yZW1vdmUoXCJsb2dnaW5nX2VuYWJsZWRcIikpfWZ1bmN0aW9uIHFhKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3ZhciBuPVwiRklSRUJBU0UgSU5URVJOQUwgRVJST1I6IFwiK1hhLmFwcGx5KHZvaWQgMCxubyhbXSxlbyh0KSkpO1FhLmVycm9yKG4pfWZ1bmN0aW9uIFZhKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiYodCE9dHx8dD09PU51bWJlci5QT1NJVElWRV9JTkZJTklUWXx8dD09PU51bWJlci5ORUdBVElWRV9JTkZJTklUWSl9ZnVuY3Rpb24gQmEodCxlKXtyZXR1cm4gdD09PWU/MDp0PGU/LTE6MX1mdW5jdGlvbiBLYSh0LGUpe2lmKGUmJnQgaW4gZSlyZXR1cm4gZVt0XTt0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJlcXVpcmVkIGtleSAoXCIrdCtcIikgaW4gb2JqZWN0OiBcIitQbyhlKSl9ZnVuY3Rpb24gV2EodCxlKXt2YXIgbj10Lmxlbmd0aDtpZihuPD1lKXJldHVyblt0XTtmb3IodmFyIHI9W10saT0wO2k8bjtpKz1lKW48aStlP3IucHVzaCh0LnN1YnN0cmluZyhpLG4pKTpyLnB1c2godC5zdWJzdHJpbmcoaSxpK2UpKTtyZXR1cm4gcn12YXIgSGEsU249ZnVuY3Rpb24odCl7dHJ5e2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJnZvaWQgMCE9PXdpbmRvd1t0XSl7dmFyIGU9d2luZG93W3RdO3JldHVybiBlLnNldEl0ZW0oXCJmaXJlYmFzZTpzZW50aW5lbFwiLFwiY2FjaGVcIiksZS5yZW1vdmVJdGVtKFwiZmlyZWJhc2U6c2VudGluZWxcIiksbmV3IHhhKGUpfX1jYXRjaCh0KXt9cmV0dXJuIG5ldyBNYX0sR2E9U24oXCJsb2NhbFN0b3JhZ2VcIiksemE9U24oXCJzZXNzaW9uU3RvcmFnZVwiKSxRYT1uZXcgZGEoXCJAZmlyZWJhc2UvZGF0YWJhc2VcIiksWWE9KEhhPTEsZnVuY3Rpb24oKXtyZXR1cm4gSGErK30pLFhhPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO2Zvcih2YXIgbj1cIlwiLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGk9dFtyXTtBcnJheS5pc0FycmF5KGkpfHxpJiZcIm9iamVjdFwiPT10eXBlb2YgaSYmXCJudW1iZXJcIj09dHlwZW9mIGkubGVuZ3RoP24rPVhhLmFwcGx5KG51bGwsaSk6bis9XCJvYmplY3RcIj09dHlwZW9mIGk/UG8oaSk6aSxuKz1cIiBcIn1yZXR1cm4gbn0sSmE9bnVsbCwkYT0hMCxaYT1mdW5jdGlvbigpe2Zvcih2YXIgdCxlPVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbl09YXJndW1lbnRzW25dOyEwPT09JGEmJigkYT0hMSxudWxsPT09SmEmJiEwPT09emEuZ2V0KFwibG9nZ2luZ19lbmFibGVkXCIpJiZqYSghMCkpLEphJiYodD1YYS5hcHBseShudWxsLGUpLEphKHQpKX0sdHM9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO1phLmFwcGx5KHZvaWQgMCxubyhbbl0sZW8odCkpKX19LGVzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3ZhciBuPVwiRklSRUJBU0UgRkFUQUwgRVJST1I6IFwiK1hhLmFwcGx5KHZvaWQgMCxubyhbXSxlbyh0KSkpO3Rocm93IFFhLmVycm9yKG4pLG5ldyBFcnJvcihuKX0sbnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dmFyIG49XCJGSVJFQkFTRSBXQVJOSU5HOiBcIitYYS5hcHBseSh2b2lkIDAsbm8oW10sZW8odCkpKTtRYS53YXJuKG4pfSxycz1cIltNSU5fTkFNRV1cIixpcz1cIltNQVhfTkFNRV1cIixvcz1mdW5jdGlvbih0LGUpe2lmKHQ9PT1lKXJldHVybiAwO2lmKHQ9PT1yc3x8ZT09PWlzKXJldHVybi0xO2lmKGU9PT1yc3x8dD09PWlzKXJldHVybiAxO3ZhciBuPXBzKHQpLHI9cHMoZSk7cmV0dXJuIG51bGwhPT1uP251bGwhPT1yP24tcj09MD90Lmxlbmd0aC1lLmxlbmd0aDpuLXI6LTE6bnVsbD09PXImJnQ8ZT8tMToxfSxhcz1mdW5jdGlvbih0KXtpZihcIm9iamVjdFwiIT10eXBlb2YgdHx8bnVsbD09PXQpcmV0dXJuIFBvKHQpO3ZhciBlLG49W107Zm9yKGUgaW4gdCluLnB1c2goZSk7bi5zb3J0KCk7Zm9yKHZhciByPVwie1wiLGk9MDtpPG4ubGVuZ3RoO2krKykwIT09aSYmKHIrPVwiLFwiKSxyKz1QbyhuW2ldKSxyKz1cIjpcIixyKz1hcyh0W25baV1dKTtyZXR1cm4gcis9XCJ9XCJ9O2Z1bmN0aW9uIHNzKHQsZSl7Zm9yKHZhciBuIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmZShuLHRbbl0pfWZ1bmN0aW9uIHVzKHQpe3ZhciBlLG4scixpO2FvKCFWYSh0KSxcIkludmFsaWQgSlNPTiBudW1iZXJcIiksMD09PXQ/ZT0xL3Q9PS0xLyhyPW49MCk/MTowOihlPXQ8MCxyPSh0PU1hdGguYWJzKHQpKT49TWF0aC5wb3coMiwtMTAyMik/KG49KGk9TWF0aC5taW4oTWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMiksMTAyMykpKzEwMjMsTWF0aC5yb3VuZCh0Kk1hdGgucG93KDIsNTItaSktTWF0aC5wb3coMiw1MikpKToobj0wLE1hdGgucm91bmQodC9NYXRoLnBvdygyLC0xMDc0KSkpKTtmb3IodmFyIG89W10sYT01MjthOy0tYSlvLnB1c2gociUyPzE6MCkscj1NYXRoLmZsb29yKHIvMik7Zm9yKGE9MTE7YTstLWEpby5wdXNoKG4lMj8xOjApLG49TWF0aC5mbG9vcihuLzIpO28ucHVzaChlPzE6MCksby5yZXZlcnNlKCk7dmFyIHM9by5qb2luKFwiXCIpLHU9XCJcIjtmb3IoYT0wO2E8NjQ7YSs9OCl7dmFyIGM9cGFyc2VJbnQocy5zdWJzdHIoYSw4KSwyKS50b1N0cmluZygxNik7dSs9Yz0xPT09Yy5sZW5ndGg/XCIwXCIrYzpjfXJldHVybiB1LnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gY3ModCxlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YoZT1zZXRUaW1lb3V0KHQsZSkpJiZlLnVucmVmJiZlLnVucmVmKCksZX12YXIgaHM9bmV3IFJlZ0V4cChcIl4tPygwKilcXFxcZHsxLDEwfSRcIiksbHM9LTIxNDc0ODM2NDgsZnM9MjE0NzQ4MzY0Nyxwcz1mdW5jdGlvbih0KXtpZihocy50ZXN0KHQpKXt0PU51bWJlcih0KTtpZihsczw9dCYmdDw9ZnMpcmV0dXJuIHR9cmV0dXJuIG51bGx9LGRzPWZ1bmN0aW9uKHQpe3RyeXt0KCl9Y2F0Y2goZSl7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PWUuc3RhY2t8fFwiXCI7dGhyb3cgbnMoXCJFeGNlcHRpb24gd2FzIHRocm93biBieSB1c2VyIGNhbGxiYWNrLlwiLHQpLGV9LE1hdGguZmxvb3IoMCkpfX0sdnM9KGdzLnByb3RvdHlwZS5nZXRUb2tlbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcHBDaGVjaz90aGlzLmFwcENoZWNrLmdldFRva2VuKHQpOlByb21pc2UucmVzb2x2ZShudWxsKX0sZ3MucHJvdG90eXBlLmFkZFRva2VuQ2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dmFyIHQ7bnVsbCE9PSh0PXRoaXMuYXBwQ2hlY2tQcm92aWRlcikmJnZvaWQgMCE9PXQmJnQuZ2V0KCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdC5hZGRUb2tlbkxpc3RlbmVyKGUpfSl9LGdzLnByb3RvdHlwZS5ub3RpZnlGb3JJbnZhbGlkVG9rZW49ZnVuY3Rpb24oKXtucygnUHJvdmlkZWQgQXBwQ2hlY2sgY3JlZGVudGlhbHMgZm9yIHRoZSBhcHAgbmFtZWQgXCInK3RoaXMuYXBwTmFtZV8rJ1wiIGFyZSBpbnZhbGlkLiBUaGlzIHVzdWFsbHkgaW5kaWNhdGVzIHlvdXIgYXBwIHdhcyBub3QgaW5pdGlhbGl6ZWQgY29ycmVjdGx5LicpfSxncyk7ZnVuY3Rpb24gZ3ModCxlKXt2YXIgbj10aGlzO3RoaXMuYXBwTmFtZV89dCx0aGlzLmFwcENoZWNrUHJvdmlkZXI9ZSx0aGlzLmFwcENoZWNrPW51bGw9PWU/dm9pZCAwOmUuZ2V0SW1tZWRpYXRlKHtvcHRpb25hbDohMH0pLHRoaXMuYXBwQ2hlY2t8fG51bGwhPWUmJmUuZ2V0KCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbi5hcHBDaGVjaz10fSl9dmFyIHlzPShtcy5wcm90b3R5cGUuZ2V0VG9rZW49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXV0aF8/dGhpcy5hdXRoXy5nZXRUb2tlbih0KS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJhdXRoL3Rva2VuLW5vdC1pbml0aWFsaXplZFwiPT09dC5jb2RlPyhaYShcIkdvdCBhdXRoL3Rva2VuLW5vdC1pbml0aWFsaXplZCBlcnJvci4gIFRyZWF0aW5nIGFzIG51bGwgdG9rZW4uXCIpLG51bGwpOlByb21pc2UucmVqZWN0KHQpfSk6UHJvbWlzZS5yZXNvbHZlKG51bGwpfSxtcy5wcm90b3R5cGUuYWRkVG9rZW5DaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLmF1dGhfP3RoaXMuYXV0aF8uYWRkQXV0aFRva2VuTGlzdGVuZXIoZSk6KHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gZShudWxsKX0sMCksdGhpcy5hdXRoUHJvdmlkZXJfLmdldCgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuYWRkQXV0aFRva2VuTGlzdGVuZXIoZSl9KSl9LG1zLnByb3RvdHlwZS5yZW1vdmVUb2tlbkNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKGUpe3RoaXMuYXV0aFByb3ZpZGVyXy5nZXQoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKGUpfSl9LG1zLnByb3RvdHlwZS5ub3RpZnlGb3JJbnZhbGlkVG9rZW49ZnVuY3Rpb24oKXt2YXIgdD0nUHJvdmlkZWQgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMgZm9yIHRoZSBhcHAgbmFtZWQgXCInK3RoaXMuYXBwTmFtZV8rJ1wiIGFyZSBpbnZhbGlkLiBUaGlzIHVzdWFsbHkgaW5kaWNhdGVzIHlvdXIgYXBwIHdhcyBub3QgaW5pdGlhbGl6ZWQgY29ycmVjdGx5LiAnO1wiY3JlZGVudGlhbFwiaW4gdGhpcy5maXJlYmFzZU9wdGlvbnNfP3QrPSdNYWtlIHN1cmUgdGhlIFwiY3JlZGVudGlhbFwiIHByb3BlcnR5IHByb3ZpZGVkIHRvIGluaXRpYWxpemVBcHAoKSBpcyBhdXRob3JpemVkIHRvIGFjY2VzcyB0aGUgc3BlY2lmaWVkIFwiZGF0YWJhc2VVUkxcIiBhbmQgaXMgZnJvbSB0aGUgY29ycmVjdCBwcm9qZWN0Lic6XCJzZXJ2aWNlQWNjb3VudFwiaW4gdGhpcy5maXJlYmFzZU9wdGlvbnNfP3QrPSdNYWtlIHN1cmUgdGhlIFwic2VydmljZUFjY291bnRcIiBwcm9wZXJ0eSBwcm92aWRlZCB0byBpbml0aWFsaXplQXBwKCkgaXMgYXV0aG9yaXplZCB0byBhY2Nlc3MgdGhlIHNwZWNpZmllZCBcImRhdGFiYXNlVVJMXCIgYW5kIGlzIGZyb20gdGhlIGNvcnJlY3QgcHJvamVjdC4nOnQrPSdNYWtlIHN1cmUgdGhlIFwiYXBpS2V5XCIgYW5kIFwiZGF0YWJhc2VVUkxcIiBwcm9wZXJ0aWVzIHByb3ZpZGVkIHRvIGluaXRpYWxpemVBcHAoKSBtYXRjaCB0aGUgdmFsdWVzIHByb3ZpZGVkIGZvciB5b3VyIGFwcCBhdCBodHRwczovL2NvbnNvbGUuZmlyZWJhc2UuZ29vZ2xlLmNvbS8uJyxucyh0KX0sbXMpO2Z1bmN0aW9uIG1zKHQsZSxuKXt2YXIgcj10aGlzO3RoaXMuYXBwTmFtZV89dCx0aGlzLmZpcmViYXNlT3B0aW9uc189ZSx0aGlzLmF1dGhQcm92aWRlcl89bix0aGlzLmF1dGhfPW51bGwsdGhpcy5hdXRoXz1uLmdldEltbWVkaWF0ZSh7b3B0aW9uYWw6ITB9KSx0aGlzLmF1dGhffHxuLmdldCgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHIuYXV0aF89dH0pfXZhciBicz0oX3MucHJvdG90eXBlLmdldFRva2VuPWZ1bmN0aW9uKHQpe3JldHVybiBQcm9taXNlLnJlc29sdmUoe2FjY2Vzc1Rva2VuOnRoaXMuYWNjZXNzVG9rZW59KX0sX3MucHJvdG90eXBlLmFkZFRva2VuQ2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24odCl7dCh0aGlzLmFjY2Vzc1Rva2VuKX0sX3MucHJvdG90eXBlLnJlbW92ZVRva2VuQ2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24odCl7fSxfcy5wcm90b3R5cGUubm90aWZ5Rm9ySW52YWxpZFRva2VuPWZ1bmN0aW9uKCl7fSxfcy5PV05FUj1cIm93bmVyXCIsX3MpO2Z1bmN0aW9uIF9zKHQpe3RoaXMuYWNjZXNzVG9rZW49dH12YXIgd3M9Lyhjb25zb2xlXFwuZmlyZWJhc2V8ZmlyZWJhc2UtY29uc29sZS1cXHcrXFwuY29ycHxmaXJlYmFzZVxcLmNvcnApXFwuZ29vZ2xlXFwuY29tLyxJcz1cIndlYnNvY2tldFwiLFRzPVwibG9uZ19wb2xsaW5nXCIsRXM9KFNzLnByb3RvdHlwZS5pc0NhY2hlYWJsZUhvc3Q9ZnVuY3Rpb24oKXtyZXR1cm5cInMtXCI9PT10aGlzLmludGVybmFsSG9zdC5zdWJzdHIoMCwyKX0sU3MucHJvdG90eXBlLmlzQ3VzdG9tSG9zdD1mdW5jdGlvbigpe3JldHVyblwiZmlyZWJhc2Vpby5jb21cIiE9PXRoaXMuX2RvbWFpbiYmXCJmaXJlYmFzZWlvLWRlbW8uY29tXCIhPT10aGlzLl9kb21haW59LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcy5wcm90b3R5cGUsXCJob3N0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3N0fSxzZXQ6ZnVuY3Rpb24odCl7dCE9PXRoaXMuaW50ZXJuYWxIb3N0JiYodGhpcy5pbnRlcm5hbEhvc3Q9dCx0aGlzLmlzQ2FjaGVhYmxlSG9zdCgpJiZHYS5zZXQoXCJob3N0OlwiK3RoaXMuX2hvc3QsdGhpcy5pbnRlcm5hbEhvc3QpKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxTcy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRvVVJMU3RyaW5nKCk7cmV0dXJuIHRoaXMucGVyc2lzdGVuY2VLZXkmJih0Kz1cIjxcIit0aGlzLnBlcnNpc3RlbmNlS2V5K1wiPlwiKSx0fSxTcy5wcm90b3R5cGUudG9VUkxTdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNlY3VyZT9cImh0dHBzOi8vXCI6XCJodHRwOi8vXCIsZT10aGlzLmluY2x1ZGVOYW1lc3BhY2VJblF1ZXJ5UGFyYW1zP1wiP25zPVwiK3RoaXMubmFtZXNwYWNlOlwiXCI7cmV0dXJuIHQrdGhpcy5ob3N0K1wiL1wiK2V9LFNzKTtmdW5jdGlvbiBTcyh0LGUsbixyLGksbyxhKXt2b2lkIDA9PT1pJiYoaT0hMSksdm9pZCAwPT09byYmKG89XCJcIiksdm9pZCAwPT09YSYmKGE9ITEpLHRoaXMuc2VjdXJlPWUsdGhpcy5uYW1lc3BhY2U9bix0aGlzLndlYlNvY2tldE9ubHk9cix0aGlzLm5vZGVBZG1pbj1pLHRoaXMucGVyc2lzdGVuY2VLZXk9byx0aGlzLmluY2x1ZGVOYW1lc3BhY2VJblF1ZXJ5UGFyYW1zPWEsdGhpcy5faG9zdD10LnRvTG93ZXJDYXNlKCksdGhpcy5fZG9tYWluPXRoaXMuX2hvc3Quc3Vic3RyKHRoaXMuX2hvc3QuaW5kZXhPZihcIi5cIikrMSksdGhpcy5pbnRlcm5hbEhvc3Q9R2EuZ2V0KFwiaG9zdDpcIit0KXx8dGhpcy5faG9zdH1mdW5jdGlvbiBDcyh0LGUsbil7dmFyIHI7aWYoYW8oXCJzdHJpbmdcIj09dHlwZW9mIGUsXCJ0eXBlb2YgdHlwZSBtdXN0ID09IHN0cmluZ1wiKSxhbyhcIm9iamVjdFwiPT10eXBlb2YgbixcInR5cGVvZiBwYXJhbXMgbXVzdCA9PSBvYmplY3RcIiksZT09PUlzKXI9KHQuc2VjdXJlP1wid3NzOi8vXCI6XCJ3czovL1wiKSt0LmludGVybmFsSG9zdCtcIi8ud3M/XCI7ZWxzZXtpZihlIT09VHMpdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBjb25uZWN0aW9uIHR5cGU6IFwiK2UpO3I9KHQuc2VjdXJlP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikrdC5pbnRlcm5hbEhvc3QrXCIvLmxwP1wifSgoZT10KS5ob3N0IT09ZS5pbnRlcm5hbEhvc3R8fGUuaXNDdXN0b21Ib3N0KCl8fGUuaW5jbHVkZU5hbWVzcGFjZUluUXVlcnlQYXJhbXMpJiYobi5ucz10Lm5hbWVzcGFjZSk7dmFyIGk9W107cmV0dXJuIHNzKG4sZnVuY3Rpb24odCxlKXtpLnB1c2godCtcIj1cIitlKX0pLHIraS5qb2luKFwiJlwiKX12YXIga3M9KE5zLnByb3RvdHlwZS5pbmNyZW1lbnRDb3VudGVyPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MSksRG8odGhpcy5jb3VudGVyc18sdCl8fCh0aGlzLmNvdW50ZXJzX1t0XT0wKSx0aGlzLmNvdW50ZXJzX1t0XSs9ZX0sTnMucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiBjbyh0aGlzLmNvdW50ZXJzXyl9LE5zKTtmdW5jdGlvbiBOcygpe3RoaXMuY291bnRlcnNfPXt9fXZhciBBcz17fSxScz17fTtmdW5jdGlvbiBQcyh0KXt0PXQudG9TdHJpbmcoKTtyZXR1cm4gQXNbdF18fChBc1t0XT1uZXcga3MpLEFzW3RdfXZhciBPcz0oRHMucHJvdG90eXBlLmNsb3NlQWZ0ZXI9ZnVuY3Rpb24odCxlKXt0aGlzLmNsb3NlQWZ0ZXJSZXNwb25zZT10LHRoaXMub25DbG9zZT1lLHRoaXMuY2xvc2VBZnRlclJlc3BvbnNlPHRoaXMuY3VycmVudFJlc3BvbnNlTnVtJiYodGhpcy5vbkNsb3NlKCksdGhpcy5vbkNsb3NlPW51bGwpfSxEcy5wcm90b3R5cGUuaGFuZGxlUmVzcG9uc2U9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMucGVuZGluZ1Jlc3BvbnNlc1t0XT1lO2Zvcih2YXIgcj10aGlzO3RoaXMucGVuZGluZ1Jlc3BvbnNlc1t0aGlzLmN1cnJlbnRSZXNwb25zZU51bV07KWlmKFwiYnJlYWtcIj09PWZ1bmN0aW9uKCl7dmFyIGU9ci5wZW5kaW5nUmVzcG9uc2VzW3IuY3VycmVudFJlc3BvbnNlTnVtXTtkZWxldGUgci5wZW5kaW5nUmVzcG9uc2VzW3IuY3VycmVudFJlc3BvbnNlTnVtXTtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoOysrdCkhZnVuY3Rpb24odCl7ZVt0XSYmZHMoZnVuY3Rpb24oKXtuLm9uTWVzc2FnZV8oZVt0XSl9KX0odCk7aWYoci5jdXJyZW50UmVzcG9uc2VOdW09PT1yLmNsb3NlQWZ0ZXJSZXNwb25zZSlyZXR1cm4gci5vbkNsb3NlJiYoci5vbkNsb3NlKCksci5vbkNsb3NlPW51bGwpLFwiYnJlYWtcIjtyLmN1cnJlbnRSZXNwb25zZU51bSsrfSgpKWJyZWFrfSxEcyk7ZnVuY3Rpb24gRHModCl7dGhpcy5vbk1lc3NhZ2VfPXQsdGhpcy5wZW5kaW5nUmVzcG9uc2VzPVtdLHRoaXMuY3VycmVudFJlc3BvbnNlTnVtPTAsdGhpcy5jbG9zZUFmdGVyUmVzcG9uc2U9LTEsdGhpcy5vbkNsb3NlPW51bGx9dmFyIHhzPVwicExQQ29tbWFuZFwiLExzPVwicFJUTFBDQlwiLE1zPShGcy5wcm90b3R5cGUub3Blbj1mdW5jdGlvbih0LGUpe3ZhciBuLHIsaSxhPXRoaXM7dGhpcy5jdXJTZWdtZW50TnVtPTAsdGhpcy5vbkRpc2Nvbm5lY3RfPWUsdGhpcy5teVBhY2tldE9yZGVyZXI9bmV3IE9zKHQpLHRoaXMuaXNDbG9zZWRfPSExLHRoaXMuY29ubmVjdFRpbWVvdXRUaW1lcl89c2V0VGltZW91dChmdW5jdGlvbigpe2EubG9nXyhcIlRpbWVkIG91dCB0cnlpbmcgdG8gY29ubmVjdC5cIiksYS5vbkNsb3NlZF8oKSxhLmNvbm5lY3RUaW1lb3V0VGltZXJfPW51bGx9LE1hdGguZmxvb3IoM2U0KSksbj1mdW5jdGlvbigpe3ZhciB0O2EuaXNDbG9zZWRffHwoYS5zY3JpcHRUYWdIb2xkZXI9bmV3IFVzKGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3ZhciBuPWVvKHQsNSkscj1uWzBdLGk9blsxXSxvPW5bMl07blszXSxuWzRdO2lmKGEuaW5jcmVtZW50SW5jb21pbmdCeXRlc18odCksYS5zY3JpcHRUYWdIb2xkZXIpaWYoYS5jb25uZWN0VGltZW91dFRpbWVyXyYmKGNsZWFyVGltZW91dChhLmNvbm5lY3RUaW1lb3V0VGltZXJfKSxhLmNvbm5lY3RUaW1lb3V0VGltZXJfPW51bGwpLGEuZXZlckNvbm5lY3RlZF89ITAsXCJzdGFydFwiPT09cilhLmlkPWksYS5wYXNzd29yZD1vO2Vsc2V7aWYoXCJjbG9zZVwiIT09cil0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgY29tbWFuZCByZWNlaXZlZDogXCIrcik7aT8oYS5zY3JpcHRUYWdIb2xkZXIuc2VuZE5ld1BvbGxzPSExLGEubXlQYWNrZXRPcmRlcmVyLmNsb3NlQWZ0ZXIoaSxmdW5jdGlvbigpe2Eub25DbG9zZWRfKCl9KSk6YS5vbkNsb3NlZF8oKX19LGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3ZhciBuPWVvKHQsMikscj1uWzBdLG49blsxXTthLmluY3JlbWVudEluY29taW5nQnl0ZXNfKHQpLGEubXlQYWNrZXRPcmRlcmVyLmhhbmRsZVJlc3BvbnNlKHIsbil9LGZ1bmN0aW9uKCl7YS5vbkNsb3NlZF8oKX0sYS51cmxGbiksKHQ9e3N0YXJ0OlwidFwifSkuc2VyPU1hdGguZmxvb3IoMWU4Kk1hdGgucmFuZG9tKCkpLGEuc2NyaXB0VGFnSG9sZGVyLnVuaXF1ZUNhbGxiYWNrSWRlbnRpZmllciYmKHQuY2I9YS5zY3JpcHRUYWdIb2xkZXIudW5pcXVlQ2FsbGJhY2tJZGVudGlmaWVyKSx0LnY9XCI1XCIsYS50cmFuc3BvcnRTZXNzaW9uSWQmJih0LnM9YS50cmFuc3BvcnRTZXNzaW9uSWQpLGEubGFzdFNlc3Npb25JZCYmKHQubHM9YS5sYXN0U2Vzc2lvbklkKSxhLmFwcGxpY2F0aW9uSWQmJih0LnA9YS5hcHBsaWNhdGlvbklkKSxhLmFwcENoZWNrVG9rZW4mJih0LmFjPWEuYXBwQ2hlY2tUb2tlbiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGxvY2F0aW9uJiZsb2NhdGlvbi5ob3N0bmFtZSYmd3MudGVzdChsb2NhdGlvbi5ob3N0bmFtZSkmJih0LnI9XCJmXCIpLHQ9YS51cmxGbih0KSxhLmxvZ18oXCJDb25uZWN0aW5nIHZpYSBsb25nLXBvbGwgdG8gXCIrdCksYS5zY3JpcHRUYWdIb2xkZXIuYWRkVGFnKHQsZnVuY3Rpb24oKXt9KSl9LFwiY29tcGxldGVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGU/bigpOihyPSExLGk9ZnVuY3Rpb24oKXtkb2N1bWVudC5ib2R5P3J8fChyPSEwLG4oKSk6c2V0VGltZW91dChpLE1hdGguZmxvb3IoMTApKX0sZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcj8oZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixpLCExKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixpLCExKSk6ZG9jdW1lbnQuYXR0YWNoRXZlbnQmJihkb2N1bWVudC5hdHRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLGZ1bmN0aW9uKCl7XCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmaSgpfSksd2luZG93LmF0dGFjaEV2ZW50KFwib25sb2FkXCIsaSkpKX0sRnMucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5zY3JpcHRUYWdIb2xkZXIuc3RhcnRMb25nUG9sbCh0aGlzLmlkLHRoaXMucGFzc3dvcmQpLHRoaXMuYWRkRGlzY29ubmVjdFBpbmdGcmFtZSh0aGlzLmlkLHRoaXMucGFzc3dvcmQpfSxGcy5mb3JjZUFsbG93PWZ1bmN0aW9uKCl7RnMuZm9yY2VBbGxvd189ITB9LEZzLmZvcmNlRGlzYWxsb3c9ZnVuY3Rpb24oKXtGcy5mb3JjZURpc2FsbG93Xz0hMH0sRnMuaXNBdmFpbGFibGU9ZnVuY3Rpb24oKXtyZXR1cm4hIUZzLmZvcmNlQWxsb3dffHwhKEZzLmZvcmNlRGlzYWxsb3dffHxcInVuZGVmaW5lZFwiPT10eXBlb2YgZG9jdW1lbnR8fG51bGw9PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnR8fFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5jaHJvbWUmJndpbmRvdy5jaHJvbWUuZXh0ZW5zaW9uJiYhL15jaHJvbWUvLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpfHxcIm9iamVjdFwiPT10eXBlb2YgV2luZG93cyYmXCJvYmplY3RcIj09dHlwZW9mIFdpbmRvd3MuVUkpfSxGcy5wcm90b3R5cGUubWFya0Nvbm5lY3Rpb25IZWFsdGh5PWZ1bmN0aW9uKCl7fSxGcy5wcm90b3R5cGUuc2h1dGRvd25fPWZ1bmN0aW9uKCl7dGhpcy5pc0Nsb3NlZF89ITAsdGhpcy5zY3JpcHRUYWdIb2xkZXImJih0aGlzLnNjcmlwdFRhZ0hvbGRlci5jbG9zZSgpLHRoaXMuc2NyaXB0VGFnSG9sZGVyPW51bGwpLHRoaXMubXlEaXNjb25uRnJhbWUmJihkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMubXlEaXNjb25uRnJhbWUpLHRoaXMubXlEaXNjb25uRnJhbWU9bnVsbCksdGhpcy5jb25uZWN0VGltZW91dFRpbWVyXyYmKGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfKSx0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfPW51bGwpfSxGcy5wcm90b3R5cGUub25DbG9zZWRfPWZ1bmN0aW9uKCl7dGhpcy5pc0Nsb3NlZF98fCh0aGlzLmxvZ18oXCJMb25ncG9sbCBpcyBjbG9zaW5nIGl0c2VsZlwiKSx0aGlzLnNodXRkb3duXygpLHRoaXMub25EaXNjb25uZWN0XyYmKHRoaXMub25EaXNjb25uZWN0Xyh0aGlzLmV2ZXJDb25uZWN0ZWRfKSx0aGlzLm9uRGlzY29ubmVjdF89bnVsbCkpfSxGcy5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLmlzQ2xvc2VkX3x8KHRoaXMubG9nXyhcIkxvbmdwb2xsIGlzIGJlaW5nIGNsb3NlZC5cIiksdGhpcy5zaHV0ZG93bl8oKSl9LEZzLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKHQpe3Q9UG8odCk7dGhpcy5ieXRlc1NlbnQrPXQubGVuZ3RoLHRoaXMuc3RhdHNfLmluY3JlbWVudENvdW50ZXIoXCJieXRlc19zZW50XCIsdC5sZW5ndGgpO2Zvcih2YXIgdD1mdW5jdGlvbih0KXt0PXJvKHQpO3JldHVybiB1by5lbmNvZGVCeXRlQXJyYXkodCwhMCl9KHQpLGU9V2EodCwxODQwKSxuPTA7bjxlLmxlbmd0aDtuKyspdGhpcy5zY3JpcHRUYWdIb2xkZXIuZW5xdWV1ZVNlZ21lbnQodGhpcy5jdXJTZWdtZW50TnVtLGUubGVuZ3RoLGVbbl0pLHRoaXMuY3VyU2VnbWVudE51bSsrfSxGcy5wcm90b3R5cGUuYWRkRGlzY29ubmVjdFBpbmdGcmFtZT1mdW5jdGlvbih0LGUpe3RoaXMubXlEaXNjb25uRnJhbWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTt2YXIgbj17ZGZyYW1lOlwidFwifTtuLmlkPXQsbi5wdz1lLHRoaXMubXlEaXNjb25uRnJhbWUuc3JjPXRoaXMudXJsRm4obiksdGhpcy5teURpc2Nvbm5GcmFtZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5teURpc2Nvbm5GcmFtZSl9LEZzLnByb3RvdHlwZS5pbmNyZW1lbnRJbmNvbWluZ0J5dGVzXz1mdW5jdGlvbih0KXt0PVBvKHQpLmxlbmd0aDt0aGlzLmJ5dGVzUmVjZWl2ZWQrPXQsdGhpcy5zdGF0c18uaW5jcmVtZW50Q291bnRlcihcImJ5dGVzX3JlY2VpdmVkXCIsdCl9LEZzKTtmdW5jdGlvbiBGcyh0LGUsbixyLGksbyxhKXt2YXIgcz10aGlzO3RoaXMuY29ubklkPXQsdGhpcy5yZXBvSW5mbz1lLHRoaXMuYXBwbGljYXRpb25JZD1uLHRoaXMuYXBwQ2hlY2tUb2tlbj1yLHRoaXMuYXV0aFRva2VuPWksdGhpcy50cmFuc3BvcnRTZXNzaW9uSWQ9byx0aGlzLmxhc3RTZXNzaW9uSWQ9YSx0aGlzLmJ5dGVzU2VudD0wLHRoaXMuYnl0ZXNSZWNlaXZlZD0wLHRoaXMuZXZlckNvbm5lY3RlZF89ITEsdGhpcy5sb2dfPXRzKHQpLHRoaXMuc3RhdHNfPVBzKGUpLHRoaXMudXJsRm49ZnVuY3Rpb24odCl7cmV0dXJuIHMuYXBwQ2hlY2tUb2tlbiYmKHQuYWM9cy5hcHBDaGVja1Rva2VuKSxDcyhlLFRzLHQpfX12YXIgVXM9KGpzLmNyZWF0ZUlGcmFtZV89ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO2lmKGUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIiwhZG9jdW1lbnQuYm9keSl0aHJvd1wiRG9jdW1lbnQgYm9keSBoYXMgbm90IGluaXRpYWxpemVkLiBXYWl0IHRvIGluaXRpYWxpemUgRmlyZWJhc2UgdW50aWwgYWZ0ZXIgdGhlIGRvY3VtZW50IGlzIHJlYWR5LlwiO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSk7dHJ5e2UuY29udGVudFdpbmRvdy5kb2N1bWVudHx8WmEoXCJObyBJRSBkb21haW4gc2V0dGluZyByZXF1aXJlZFwiKX1jYXRjaCh0KXt2YXIgbj1kb2N1bWVudC5kb21haW47ZS5zcmM9XCJqYXZhc2NyaXB0OnZvaWQoKGZ1bmN0aW9uKCl7ZG9jdW1lbnQub3BlbigpO2RvY3VtZW50LmRvbWFpbj0nXCIrbitcIic7ZG9jdW1lbnQuY2xvc2UoKTt9KSgpKVwifXJldHVybiBlLmNvbnRlbnREb2N1bWVudD9lLmRvYz1lLmNvbnRlbnREb2N1bWVudDplLmNvbnRlbnRXaW5kb3c/ZS5kb2M9ZS5jb250ZW50V2luZG93LmRvY3VtZW50OmUuZG9jdW1lbnQmJihlLmRvYz1lLmRvY3VtZW50KSxlfSxqcy5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuYWxpdmU9ITEsdGhpcy5teUlGcmFtZSYmKHRoaXMubXlJRnJhbWUuZG9jLmJvZHkuaW5uZXJIVE1MPVwiXCIsc2V0VGltZW91dChmdW5jdGlvbigpe251bGwhPT10Lm15SUZyYW1lJiYoZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0Lm15SUZyYW1lKSx0Lm15SUZyYW1lPW51bGwpfSxNYXRoLmZsb29yKDApKSk7dmFyIGU9dGhpcy5vbkRpc2Nvbm5lY3Q7ZSYmKHRoaXMub25EaXNjb25uZWN0PW51bGwsZSgpKX0sanMucHJvdG90eXBlLnN0YXJ0TG9uZ1BvbGw9ZnVuY3Rpb24odCxlKXtmb3IodGhpcy5teUlEPXQsdGhpcy5teVBXPWUsdGhpcy5hbGl2ZT0hMDt0aGlzLm5ld1JlcXVlc3RfKCk7KTt9LGpzLnByb3RvdHlwZS5uZXdSZXF1ZXN0Xz1mdW5jdGlvbigpe2lmKHRoaXMuYWxpdmUmJnRoaXMuc2VuZE5ld1BvbGxzJiZ0aGlzLm91dHN0YW5kaW5nUmVxdWVzdHMuc2l6ZTwoMDx0aGlzLnBlbmRpbmdTZWdzLmxlbmd0aD8yOjEpKXt0aGlzLmN1cnJlbnRTZXJpYWwrKzt2YXIgdD17fTt0LmlkPXRoaXMubXlJRCx0LnB3PXRoaXMubXlQVyx0LnNlcj10aGlzLmN1cnJlbnRTZXJpYWw7Zm9yKHZhciB0PXRoaXMudXJsRm4odCksZT1cIlwiLG49MDswPHRoaXMucGVuZGluZ1NlZ3MubGVuZ3RoOyl7aWYoISh0aGlzLnBlbmRpbmdTZWdzWzBdLmQubGVuZ3RoKzMwK2UubGVuZ3RoPD0xODcwKSlicmVhazt2YXIgcj10aGlzLnBlbmRpbmdTZWdzLnNoaWZ0KCksZT1lK1wiJnNlZ1wiK24rXCI9XCIrci5zZWcrXCImdHNcIituK1wiPVwiK3IudHMrXCImZFwiK24rXCI9XCIrci5kO24rK31yZXR1cm4gdCs9ZSx0aGlzLmFkZExvbmdQb2xsVGFnXyh0LHRoaXMuY3VycmVudFNlcmlhbCksITB9cmV0dXJuITF9LGpzLnByb3RvdHlwZS5lbnF1ZXVlU2VnbWVudD1mdW5jdGlvbih0LGUsbil7dGhpcy5wZW5kaW5nU2Vncy5wdXNoKHtzZWc6dCx0czplLGQ6bn0pLHRoaXMuYWxpdmUmJnRoaXMubmV3UmVxdWVzdF8oKX0sanMucHJvdG90eXBlLmFkZExvbmdQb2xsVGFnXz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5vdXRzdGFuZGluZ1JlcXVlc3RzLmFkZChlKTtmdW5jdGlvbiByKCl7bi5vdXRzdGFuZGluZ1JlcXVlc3RzLmRlbGV0ZShlKSxuLm5ld1JlcXVlc3RfKCl9dmFyIGk9c2V0VGltZW91dChyLE1hdGguZmxvb3IoMjVlMykpO3RoaXMuYWRkVGFnKHQsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoaSkscigpfSl9LGpzLnByb3RvdHlwZS5hZGRUYWc9ZnVuY3Rpb24odCxuKXt2YXIgcj10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7aWYoIXIuc2VuZE5ld1BvbGxzKXJldHVybjt2YXIgZT1yLm15SUZyYW1lLmRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO2UudHlwZT1cInRleHQvamF2YXNjcmlwdFwiLGUuYXN5bmM9ITAsZS5zcmM9dCxlLm9ubG9hZD1lLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3ZhciB0PWUucmVhZHlTdGF0ZTt0JiZcImxvYWRlZFwiIT09dCYmXCJjb21wbGV0ZVwiIT09dHx8KGUub25sb2FkPWUub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksbigpKX0sZS5vbmVycm9yPWZ1bmN0aW9uKCl7WmEoXCJMb25nLXBvbGwgc2NyaXB0IGZhaWxlZCB0byBsb2FkOiBcIit0KSxyLnNlbmROZXdQb2xscz0hMSxyLmNsb3NlKCl9LHIubXlJRnJhbWUuZG9jLmJvZHkuYXBwZW5kQ2hpbGQoZSl9Y2F0Y2godCl7fX0sTWF0aC5mbG9vcigxKSl9LGpzKTtmdW5jdGlvbiBqcyh0LGUsbixyKXt0aGlzLm9uRGlzY29ubmVjdD1uLHRoaXMudXJsRm49cix0aGlzLm91dHN0YW5kaW5nUmVxdWVzdHM9bmV3IFNldCx0aGlzLnBlbmRpbmdTZWdzPVtdLHRoaXMuY3VycmVudFNlcmlhbD1NYXRoLmZsb29yKDFlOCpNYXRoLnJhbmRvbSgpKSx0aGlzLnNlbmROZXdQb2xscz0hMCx0aGlzLnVuaXF1ZUNhbGxiYWNrSWRlbnRpZmllcj1ZYSgpLHdpbmRvd1t4cyt0aGlzLnVuaXF1ZUNhbGxiYWNrSWRlbnRpZmllcl09dCx3aW5kb3dbTHMrdGhpcy51bmlxdWVDYWxsYmFja0lkZW50aWZpZXJdPWUsdGhpcy5teUlGcmFtZT1qcy5jcmVhdGVJRnJhbWVfKCk7dmFyIGU9XCJcIixpPVwiPGh0bWw+PGJvZHk+XCIrKGU9dGhpcy5teUlGcmFtZS5zcmMmJlwiamF2YXNjcmlwdDpcIj09PXRoaXMubXlJRnJhbWUuc3JjLnN1YnN0cigwLFwiamF2YXNjcmlwdDpcIi5sZW5ndGgpPyc8c2NyaXB0PmRvY3VtZW50LmRvbWFpbj1cIicrZG9jdW1lbnQuZG9tYWluKydcIjs8XFwvc2NyaXB0Pic6ZSkrXCI8L2JvZHk+PC9odG1sPlwiO3RyeXt0aGlzLm15SUZyYW1lLmRvYy5vcGVuKCksdGhpcy5teUlGcmFtZS5kb2Mud3JpdGUoaSksdGhpcy5teUlGcmFtZS5kb2MuY2xvc2UoKX1jYXRjaCh0KXtaYShcImZyYW1lIHdyaXRpbmcgZXhjZXB0aW9uXCIpLHQuc3RhY2smJlphKHQuc3RhY2spLFphKHQpfX12YXIgcXM9bnVsbDtcInVuZGVmaW5lZFwiIT10eXBlb2YgTW96V2ViU29ja2V0P3FzPU1veldlYlNvY2tldDpcInVuZGVmaW5lZFwiIT10eXBlb2YgV2ViU29ja2V0JiYocXM9V2ViU29ja2V0KTt2YXIgVnM9KEJzLmNvbm5lY3Rpb25VUkxfPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPXt2OlwiNVwifTtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgbG9jYXRpb24mJmxvY2F0aW9uLmhvc3RuYW1lJiZ3cy50ZXN0KGxvY2F0aW9uLmhvc3RuYW1lKSYmKGkucj1cImZcIiksZSYmKGkucz1lKSxuJiYoaS5scz1uKSxyJiYoaS5hYz1yKSxDcyh0LElzLGkpfSxCcy5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihlLHQpe3ZhciBuLHI9dGhpczt0aGlzLm9uRGlzY29ubmVjdD10LHRoaXMub25NZXNzYWdlPWUsdGhpcy5sb2dfKFwiV2Vic29ja2V0IGNvbm5lY3RpbmcgdG8gXCIrdGhpcy5jb25uVVJMKSx0aGlzLmV2ZXJDb25uZWN0ZWRfPSExLEdhLnNldChcInByZXZpb3VzX3dlYnNvY2tldF9mYWlsdXJlXCIsITApO3RyeXtibygpfHwobj17aGVhZGVyczp7XCJYLUZpcmViYXNlLUdNUElEXCI6dGhpcy5hcHBsaWNhdGlvbklkfHxcIlwiLFwiWC1GaXJlYmFzZS1BcHBDaGVja1wiOnRoaXMuYXBwQ2hlY2tUb2tlbnx8XCJcIn19LHRoaXMubXlTb2NrPW5ldyBxcyh0aGlzLmNvbm5VUkwsW10sbikpfWNhdGNoKHQpe3RoaXMubG9nXyhcIkVycm9yIGluc3RhbnRpYXRpbmcgV2ViU29ja2V0LlwiKTtlPXQubWVzc2FnZXx8dC5kYXRhO3JldHVybiBlJiZ0aGlzLmxvZ18oZSksdm9pZCB0aGlzLm9uQ2xvc2VkXygpfXRoaXMubXlTb2NrLm9ub3Blbj1mdW5jdGlvbigpe3IubG9nXyhcIldlYnNvY2tldCBjb25uZWN0ZWQuXCIpLHIuZXZlckNvbm5lY3RlZF89ITB9LHRoaXMubXlTb2NrLm9uY2xvc2U9ZnVuY3Rpb24oKXtyLmxvZ18oXCJXZWJzb2NrZXQgY29ubmVjdGlvbiB3YXMgZGlzY29ubmVjdGVkLlwiKSxyLm15U29jaz1udWxsLHIub25DbG9zZWRfKCl9LHRoaXMubXlTb2NrLm9ubWVzc2FnZT1mdW5jdGlvbih0KXtyLmhhbmRsZUluY29taW5nRnJhbWUodCl9LHRoaXMubXlTb2NrLm9uZXJyb3I9ZnVuY3Rpb24odCl7ci5sb2dfKFwiV2ViU29ja2V0IGVycm9yLiAgQ2xvc2luZyBjb25uZWN0aW9uLlwiKTt0PXQubWVzc2FnZXx8dC5kYXRhO3QmJnIubG9nXyh0KSxyLm9uQ2xvc2VkXygpfX0sQnMucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7fSxCcy5mb3JjZURpc2FsbG93PWZ1bmN0aW9uKCl7QnMuZm9yY2VEaXNhbGxvd189ITB9LEJzLmlzQXZhaWxhYmxlPWZ1bmN0aW9uKCl7dmFyIHQsZT0hMTtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50JiYoKHQ9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZCAoWzAtOV17MCx9XFwuWzAtOV17MCx9KS8pKSYmMTx0Lmxlbmd0aCYmcGFyc2VGbG9hdCh0WzFdKTw0LjQmJihlPSEwKSksIWUmJm51bGwhPT1xcyYmIUJzLmZvcmNlRGlzYWxsb3dffSxCcy5wcmV2aW91c2x5RmFpbGVkPWZ1bmN0aW9uKCl7cmV0dXJuIEdhLmlzSW5NZW1vcnlTdG9yYWdlfHwhMD09PUdhLmdldChcInByZXZpb3VzX3dlYnNvY2tldF9mYWlsdXJlXCIpfSxCcy5wcm90b3R5cGUubWFya0Nvbm5lY3Rpb25IZWFsdGh5PWZ1bmN0aW9uKCl7R2EucmVtb3ZlKFwicHJldmlvdXNfd2Vic29ja2V0X2ZhaWx1cmVcIil9LEJzLnByb3RvdHlwZS5hcHBlbmRGcmFtZV89ZnVuY3Rpb24odCl7dGhpcy5mcmFtZXMucHVzaCh0KSx0aGlzLmZyYW1lcy5sZW5ndGg9PT10aGlzLnRvdGFsRnJhbWVzJiYodD10aGlzLmZyYW1lcy5qb2luKFwiXCIpLHRoaXMuZnJhbWVzPW51bGwsdD1Sbyh0KSx0aGlzLm9uTWVzc2FnZSh0KSl9LEJzLnByb3RvdHlwZS5oYW5kbGVOZXdGcmFtZUNvdW50Xz1mdW5jdGlvbih0KXt0aGlzLnRvdGFsRnJhbWVzPXQsdGhpcy5mcmFtZXM9W119LEJzLnByb3RvdHlwZS5leHRyYWN0RnJhbWVDb3VudF89ZnVuY3Rpb24odCl7aWYoYW8obnVsbD09PXRoaXMuZnJhbWVzLFwiV2UgYWxyZWFkeSBoYXZlIGEgZnJhbWUgYnVmZmVyXCIpLHQubGVuZ3RoPD02KXt2YXIgZT1OdW1iZXIodCk7aWYoIWlzTmFOKGUpKXJldHVybiB0aGlzLmhhbmRsZU5ld0ZyYW1lQ291bnRfKGUpLG51bGx9cmV0dXJuIHRoaXMuaGFuZGxlTmV3RnJhbWVDb3VudF8oMSksdH0sQnMucHJvdG90eXBlLmhhbmRsZUluY29taW5nRnJhbWU9ZnVuY3Rpb24odCl7bnVsbCE9PXRoaXMubXlTb2NrJiYodD10LmRhdGEsdGhpcy5ieXRlc1JlY2VpdmVkKz10Lmxlbmd0aCx0aGlzLnN0YXRzXy5pbmNyZW1lbnRDb3VudGVyKFwiYnl0ZXNfcmVjZWl2ZWRcIix0Lmxlbmd0aCksdGhpcy5yZXNldEtlZXBBbGl2ZSgpLG51bGwhPT10aGlzLmZyYW1lcz90aGlzLmFwcGVuZEZyYW1lXyh0KTpudWxsIT09KHQ9dGhpcy5leHRyYWN0RnJhbWVDb3VudF8odCkpJiZ0aGlzLmFwcGVuZEZyYW1lXyh0KSl9LEJzLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKHQpe3RoaXMucmVzZXRLZWVwQWxpdmUoKTt0PVBvKHQpO3RoaXMuYnl0ZXNTZW50Kz10Lmxlbmd0aCx0aGlzLnN0YXRzXy5pbmNyZW1lbnRDb3VudGVyKFwiYnl0ZXNfc2VudFwiLHQubGVuZ3RoKTt2YXIgZT1XYSh0LDE2Mzg0KTsxPGUubGVuZ3RoJiZ0aGlzLnNlbmRTdHJpbmdfKFN0cmluZyhlLmxlbmd0aCkpO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXRoaXMuc2VuZFN0cmluZ18oZVtuXSl9LEJzLnByb3RvdHlwZS5zaHV0ZG93bl89ZnVuY3Rpb24oKXt0aGlzLmlzQ2xvc2VkXz0hMCx0aGlzLmtlZXBhbGl2ZVRpbWVyJiYoY2xlYXJJbnRlcnZhbCh0aGlzLmtlZXBhbGl2ZVRpbWVyKSx0aGlzLmtlZXBhbGl2ZVRpbWVyPW51bGwpLHRoaXMubXlTb2NrJiYodGhpcy5teVNvY2suY2xvc2UoKSx0aGlzLm15U29jaz1udWxsKX0sQnMucHJvdG90eXBlLm9uQ2xvc2VkXz1mdW5jdGlvbigpe3RoaXMuaXNDbG9zZWRffHwodGhpcy5sb2dfKFwiV2ViU29ja2V0IGlzIGNsb3NpbmcgaXRzZWxmXCIpLHRoaXMuc2h1dGRvd25fKCksdGhpcy5vbkRpc2Nvbm5lY3QmJih0aGlzLm9uRGlzY29ubmVjdCh0aGlzLmV2ZXJDb25uZWN0ZWRfKSx0aGlzLm9uRGlzY29ubmVjdD1udWxsKSl9LEJzLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuaXNDbG9zZWRffHwodGhpcy5sb2dfKFwiV2ViU29ja2V0IGlzIGJlaW5nIGNsb3NlZFwiKSx0aGlzLnNodXRkb3duXygpKX0sQnMucHJvdG90eXBlLnJlc2V0S2VlcEFsaXZlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztjbGVhckludGVydmFsKHRoaXMua2VlcGFsaXZlVGltZXIpLHRoaXMua2VlcGFsaXZlVGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt0Lm15U29jayYmdC5zZW5kU3RyaW5nXyhcIjBcIiksdC5yZXNldEtlZXBBbGl2ZSgpfSxNYXRoLmZsb29yKDQ1ZTMpKX0sQnMucHJvdG90eXBlLnNlbmRTdHJpbmdfPWZ1bmN0aW9uKHQpe3RyeXt0aGlzLm15U29jay5zZW5kKHQpfWNhdGNoKHQpe3RoaXMubG9nXyhcIkV4Y2VwdGlvbiB0aHJvd24gZnJvbSBXZWJTb2NrZXQuc2VuZCgpOlwiLHQubWVzc2FnZXx8dC5kYXRhLFwiQ2xvc2luZyBjb25uZWN0aW9uLlwiKSxzZXRUaW1lb3V0KHRoaXMub25DbG9zZWRfLmJpbmQodGhpcyksMCl9fSxCcy5yZXNwb25zZXNSZXF1aXJlZFRvQmVIZWFsdGh5PTIsQnMuaGVhbHRoeVRpbWVvdXQ9M2U0LEJzKTtmdW5jdGlvbiBCcyh0LGUsbixyLGksbyxhKXt0aGlzLmNvbm5JZD10LHRoaXMuYXBwbGljYXRpb25JZD1uLHRoaXMuYXBwQ2hlY2tUb2tlbj1yLHRoaXMuYXV0aFRva2VuPWksdGhpcy5rZWVwYWxpdmVUaW1lcj1udWxsLHRoaXMuZnJhbWVzPW51bGwsdGhpcy50b3RhbEZyYW1lcz0wLHRoaXMuYnl0ZXNTZW50PTAsdGhpcy5ieXRlc1JlY2VpdmVkPTAsdGhpcy5sb2dfPXRzKHRoaXMuY29ubklkKSx0aGlzLnN0YXRzXz1QcyhlKSx0aGlzLmNvbm5VUkw9QnMuY29ubmVjdGlvblVSTF8oZSxvLGEsciksdGhpcy5ub2RlQWRtaW49ZS5ub2RlQWRtaW59dmFyIEtzPShPYmplY3QuZGVmaW5lUHJvcGVydHkoV3MsXCJBTExfVFJBTlNQT1JUU1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bTXMsVnNdfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLFdzLnByb3RvdHlwZS5pbml0VHJhbnNwb3J0c189ZnVuY3Rpb24odCl7dmFyIGUsbixyPVZzJiZWcy5pc0F2YWlsYWJsZSgpLGk9ciYmIVZzLnByZXZpb3VzbHlGYWlsZWQoKTtpZih0LndlYlNvY2tldE9ubHkmJihyfHxucyhcIndzczovLyBVUkwgdXNlZCwgYnV0IGJyb3dzZXIgaXNuJ3Qga25vd24gdG8gc3VwcG9ydCB3ZWJzb2NrZXRzLiAgVHJ5aW5nIGFueXdheS5cIiksaT0hMCksaSl0aGlzLnRyYW5zcG9ydHNfPVtWc107ZWxzZXt2YXIgbz10aGlzLnRyYW5zcG9ydHNfPVtdO3RyeXtmb3IodmFyIGE9dG8oV3MuQUxMX1RSQU5TUE9SVFMpLHM9YS5uZXh0KCk7IXMuZG9uZTtzPWEubmV4dCgpKXt2YXIgdT1zLnZhbHVlO3UmJnUuaXNBdmFpbGFibGUoKSYmby5wdXNoKHUpfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYobj1hLnJldHVybikmJm4uY2FsbChhKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fX0sV3MucHJvdG90eXBlLmluaXRpYWxUcmFuc3BvcnQ9ZnVuY3Rpb24oKXtpZigwPHRoaXMudHJhbnNwb3J0c18ubGVuZ3RoKXJldHVybiB0aGlzLnRyYW5zcG9ydHNfWzBdO3Rocm93IG5ldyBFcnJvcihcIk5vIHRyYW5zcG9ydHMgYXZhaWxhYmxlXCIpfSxXcy5wcm90b3R5cGUudXBncmFkZVRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiAxPHRoaXMudHJhbnNwb3J0c18ubGVuZ3RoP3RoaXMudHJhbnNwb3J0c19bMV06bnVsbH0sV3MpO2Z1bmN0aW9uIFdzKHQpe3RoaXMuaW5pdFRyYW5zcG9ydHNfKHQpfXZhciBIcz0oR3MucHJvdG90eXBlLnN0YXJ0Xz1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLnRyYW5zcG9ydE1hbmFnZXJfLmluaXRpYWxUcmFuc3BvcnQoKTt0aGlzLmNvbm5fPW5ldyBlKHRoaXMubmV4dFRyYW5zcG9ydElkXygpLHRoaXMucmVwb0luZm9fLHRoaXMuYXBwbGljYXRpb25JZF8sdGhpcy5hcHBDaGVja1Rva2VuXyx0aGlzLmxhc3RTZXNzaW9uSWQpLHRoaXMucHJpbWFyeVJlc3BvbnNlc1JlcXVpcmVkXz1lLnJlc3BvbnNlc1JlcXVpcmVkVG9CZUhlYWx0aHl8fDA7dmFyIG49dGhpcy5jb25uUmVjZWl2ZXJfKHRoaXMuY29ubl8pLHI9dGhpcy5kaXNjb25uUmVjZWl2ZXJfKHRoaXMuY29ubl8pO3RoaXMudHhfPXRoaXMuY29ubl8sdGhpcy5yeF89dGhpcy5jb25uXyx0aGlzLnNlY29uZGFyeUNvbm5fPW51bGwsdGhpcy5pc0hlYWx0aHlfPSExLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmNvbm5fJiZ0LmNvbm5fLm9wZW4obixyKX0sTWF0aC5mbG9vcigwKSk7ZT1lLmhlYWx0aHlUaW1lb3V0fHwwOzA8ZSYmKHRoaXMuaGVhbHRoeVRpbWVvdXRfPWNzKGZ1bmN0aW9uKCl7dC5oZWFsdGh5VGltZW91dF89bnVsbCx0LmlzSGVhbHRoeV98fCh0LmNvbm5fJiYxMDI0MDA8dC5jb25uXy5ieXRlc1JlY2VpdmVkPyh0LmxvZ18oXCJDb25uZWN0aW9uIGV4Y2VlZGVkIGhlYWx0aHkgdGltZW91dCBidXQgaGFzIHJlY2VpdmVkIFwiK3QuY29ubl8uYnl0ZXNSZWNlaXZlZCtcIiBieXRlcy4gIE1hcmtpbmcgY29ubmVjdGlvbiBoZWFsdGh5LlwiKSx0LmlzSGVhbHRoeV89ITAsdC5jb25uXy5tYXJrQ29ubmVjdGlvbkhlYWx0aHkoKSk6dC5jb25uXyYmMTAyNDA8dC5jb25uXy5ieXRlc1NlbnQ/dC5sb2dfKFwiQ29ubmVjdGlvbiBleGNlZWRlZCBoZWFsdGh5IHRpbWVvdXQgYnV0IGhhcyBzZW50IFwiK3QuY29ubl8uYnl0ZXNTZW50K1wiIGJ5dGVzLiAgTGVhdmluZyBjb25uZWN0aW9uIGFsaXZlLlwiKToodC5sb2dfKFwiQ2xvc2luZyB1bmhlYWx0aHkgY29ubmVjdGlvbiBhZnRlciB0aW1lb3V0LlwiKSx0LmNsb3NlKCkpKX0sTWF0aC5mbG9vcihlKSkpfSxHcy5wcm90b3R5cGUubmV4dFRyYW5zcG9ydElkXz1mdW5jdGlvbigpe3JldHVyblwiYzpcIit0aGlzLmlkK1wiOlwiK3RoaXMuY29ubmVjdGlvbkNvdW50Kyt9LEdzLnByb3RvdHlwZS5kaXNjb25uUmVjZWl2ZXJfPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHQpe2U9PT1uLmNvbm5fP24ub25Db25uZWN0aW9uTG9zdF8odCk6ZT09PW4uc2Vjb25kYXJ5Q29ubl8/KG4ubG9nXyhcIlNlY29uZGFyeSBjb25uZWN0aW9uIGxvc3QuXCIpLG4ub25TZWNvbmRhcnlDb25uZWN0aW9uTG9zdF8oKSk6bi5sb2dfKFwiY2xvc2luZyBhbiBvbGQgY29ubmVjdGlvblwiKX19LEdzLnByb3RvdHlwZS5jb25uUmVjZWl2ZXJfPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHQpezIhPT1uLnN0YXRlXyYmKGU9PT1uLnJ4Xz9uLm9uUHJpbWFyeU1lc3NhZ2VSZWNlaXZlZF8odCk6ZT09PW4uc2Vjb25kYXJ5Q29ubl8/bi5vblNlY29uZGFyeU1lc3NhZ2VSZWNlaXZlZF8odCk6bi5sb2dfKFwibWVzc2FnZSBvbiBvbGQgY29ubmVjdGlvblwiKSl9fSxHcy5wcm90b3R5cGUuc2VuZFJlcXVlc3Q9ZnVuY3Rpb24odCl7dD17dDpcImRcIixkOnR9O3RoaXMuc2VuZERhdGFfKHQpfSxHcy5wcm90b3R5cGUudHJ5Q2xlYW51cENvbm5lY3Rpb249ZnVuY3Rpb24oKXt0aGlzLnR4Xz09PXRoaXMuc2Vjb25kYXJ5Q29ubl8mJnRoaXMucnhfPT09dGhpcy5zZWNvbmRhcnlDb25uXyYmKHRoaXMubG9nXyhcImNsZWFuaW5nIHVwIGFuZCBwcm9tb3RpbmcgYSBjb25uZWN0aW9uOiBcIit0aGlzLnNlY29uZGFyeUNvbm5fLmNvbm5JZCksdGhpcy5jb25uXz10aGlzLnNlY29uZGFyeUNvbm5fLHRoaXMuc2Vjb25kYXJ5Q29ubl89bnVsbCl9LEdzLnByb3RvdHlwZS5vblNlY29uZGFyeUNvbnRyb2xfPWZ1bmN0aW9uKHQpe1widFwiaW4gdCYmKFwiYVwiPT09KHQ9dC50KT90aGlzLnVwZ3JhZGVJZlNlY29uZGFyeUhlYWx0aHlfKCk6XCJyXCI9PT10Pyh0aGlzLmxvZ18oXCJHb3QgYSByZXNldCBvbiBzZWNvbmRhcnksIGNsb3NpbmcgaXRcIiksdGhpcy5zZWNvbmRhcnlDb25uXy5jbG9zZSgpLHRoaXMudHhfIT09dGhpcy5zZWNvbmRhcnlDb25uXyYmdGhpcy5yeF8hPT10aGlzLnNlY29uZGFyeUNvbm5ffHx0aGlzLmNsb3NlKCkpOlwib1wiPT09dCYmKHRoaXMubG9nXyhcImdvdCBwb25nIG9uIHNlY29uZGFyeS5cIiksdGhpcy5zZWNvbmRhcnlSZXNwb25zZXNSZXF1aXJlZF8tLSx0aGlzLnVwZ3JhZGVJZlNlY29uZGFyeUhlYWx0aHlfKCkpKX0sR3MucHJvdG90eXBlLm9uU2Vjb25kYXJ5TWVzc2FnZVJlY2VpdmVkXz1mdW5jdGlvbih0KXt2YXIgZT1LYShcInRcIix0KSx0PUthKFwiZFwiLHQpO2lmKFwiY1wiPT09ZSl0aGlzLm9uU2Vjb25kYXJ5Q29udHJvbF8odCk7ZWxzZXtpZihcImRcIiE9PWUpdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBwcm90b2NvbCBsYXllcjogXCIrZSk7dGhpcy5wZW5kaW5nRGF0YU1lc3NhZ2VzLnB1c2godCl9fSxHcy5wcm90b3R5cGUudXBncmFkZUlmU2Vjb25kYXJ5SGVhbHRoeV89ZnVuY3Rpb24oKXt0aGlzLnNlY29uZGFyeVJlc3BvbnNlc1JlcXVpcmVkXzw9MD8odGhpcy5sb2dfKFwiU2Vjb25kYXJ5IGNvbm5lY3Rpb24gaXMgaGVhbHRoeS5cIiksdGhpcy5pc0hlYWx0aHlfPSEwLHRoaXMuc2Vjb25kYXJ5Q29ubl8ubWFya0Nvbm5lY3Rpb25IZWFsdGh5KCksdGhpcy5wcm9jZWVkV2l0aFVwZ3JhZGVfKCkpOih0aGlzLmxvZ18oXCJzZW5kaW5nIHBpbmcgb24gc2Vjb25kYXJ5LlwiKSx0aGlzLnNlY29uZGFyeUNvbm5fLnNlbmQoe3Q6XCJjXCIsZDp7dDpcInBcIixkOnt9fX0pKX0sR3MucHJvdG90eXBlLnByb2NlZWRXaXRoVXBncmFkZV89ZnVuY3Rpb24oKXt0aGlzLnNlY29uZGFyeUNvbm5fLnN0YXJ0KCksdGhpcy5sb2dfKFwic2VuZGluZyBjbGllbnQgYWNrIG9uIHNlY29uZGFyeVwiKSx0aGlzLnNlY29uZGFyeUNvbm5fLnNlbmQoe3Q6XCJjXCIsZDp7dDpcImFcIixkOnt9fX0pLHRoaXMubG9nXyhcIkVuZGluZyB0cmFuc21pc3Npb24gb24gcHJpbWFyeVwiKSx0aGlzLmNvbm5fLnNlbmQoe3Q6XCJjXCIsZDp7dDpcIm5cIixkOnt9fX0pLHRoaXMudHhfPXRoaXMuc2Vjb25kYXJ5Q29ubl8sdGhpcy50cnlDbGVhbnVwQ29ubmVjdGlvbigpfSxHcy5wcm90b3R5cGUub25QcmltYXJ5TWVzc2FnZVJlY2VpdmVkXz1mdW5jdGlvbih0KXt2YXIgZT1LYShcInRcIix0KSx0PUthKFwiZFwiLHQpO1wiY1wiPT09ZT90aGlzLm9uQ29udHJvbF8odCk6XCJkXCI9PT1lJiZ0aGlzLm9uRGF0YU1lc3NhZ2VfKHQpfSxHcy5wcm90b3R5cGUub25EYXRhTWVzc2FnZV89ZnVuY3Rpb24odCl7dGhpcy5vblByaW1hcnlSZXNwb25zZV8oKSx0aGlzLm9uTWVzc2FnZV8odCl9LEdzLnByb3RvdHlwZS5vblByaW1hcnlSZXNwb25zZV89ZnVuY3Rpb24oKXt0aGlzLmlzSGVhbHRoeV98fCh0aGlzLnByaW1hcnlSZXNwb25zZXNSZXF1aXJlZF8tLSx0aGlzLnByaW1hcnlSZXNwb25zZXNSZXF1aXJlZF88PTAmJih0aGlzLmxvZ18oXCJQcmltYXJ5IGNvbm5lY3Rpb24gaXMgaGVhbHRoeS5cIiksdGhpcy5pc0hlYWx0aHlfPSEwLHRoaXMuY29ubl8ubWFya0Nvbm5lY3Rpb25IZWFsdGh5KCkpKX0sR3MucHJvdG90eXBlLm9uQ29udHJvbF89ZnVuY3Rpb24odCl7dmFyIGU9S2EoXCJ0XCIsdCk7aWYoXCJkXCJpbiB0KXt0PXQuZDtpZihcImhcIj09PWUpdGhpcy5vbkhhbmRzaGFrZV8odCk7ZWxzZSBpZihcIm5cIj09PWUpe3RoaXMubG9nXyhcInJlY3ZkIGVuZCB0cmFuc21pc3Npb24gb24gcHJpbWFyeVwiKSx0aGlzLnJ4Xz10aGlzLnNlY29uZGFyeUNvbm5fO2Zvcih2YXIgbj0wO248dGhpcy5wZW5kaW5nRGF0YU1lc3NhZ2VzLmxlbmd0aDsrK24pdGhpcy5vbkRhdGFNZXNzYWdlXyh0aGlzLnBlbmRpbmdEYXRhTWVzc2FnZXNbbl0pO3RoaXMucGVuZGluZ0RhdGFNZXNzYWdlcz1bXSx0aGlzLnRyeUNsZWFudXBDb25uZWN0aW9uKCl9ZWxzZVwic1wiPT09ZT90aGlzLm9uQ29ubmVjdGlvblNodXRkb3duXyh0KTpcInJcIj09PWU/dGhpcy5vblJlc2V0Xyh0KTpcImVcIj09PWU/cWEoXCJTZXJ2ZXIgRXJyb3I6IFwiK3QpOlwib1wiPT09ZT8odGhpcy5sb2dfKFwiZ290IHBvbmcgb24gcHJpbWFyeS5cIiksdGhpcy5vblByaW1hcnlSZXNwb25zZV8oKSx0aGlzLnNlbmRQaW5nT25QcmltYXJ5SWZOZWNlc3NhcnlfKCkpOnFhKFwiVW5rbm93biBjb250cm9sIHBhY2tldCBjb21tYW5kOiBcIitlKX19LEdzLnByb3RvdHlwZS5vbkhhbmRzaGFrZV89ZnVuY3Rpb24odCl7dmFyIGU9dC50cyxuPXQudixyPXQuaDt0aGlzLnNlc3Npb25JZD10LnMsdGhpcy5yZXBvSW5mb18uaG9zdD1yLDA9PT10aGlzLnN0YXRlXyYmKHRoaXMuY29ubl8uc3RhcnQoKSx0aGlzLm9uQ29ubmVjdGlvbkVzdGFibGlzaGVkXyh0aGlzLmNvbm5fLGUpLFwiNVwiIT09biYmbnMoXCJQcm90b2NvbCB2ZXJzaW9uIG1pc21hdGNoIGRldGVjdGVkXCIpLHRoaXMudHJ5U3RhcnRVcGdyYWRlXygpKX0sR3MucHJvdG90eXBlLnRyeVN0YXJ0VXBncmFkZV89ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRyYW5zcG9ydE1hbmFnZXJfLnVwZ3JhZGVUcmFuc3BvcnQoKTt0JiZ0aGlzLnN0YXJ0VXBncmFkZV8odCl9LEdzLnByb3RvdHlwZS5zdGFydFVwZ3JhZGVfPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5zZWNvbmRhcnlDb25uXz1uZXcgdCh0aGlzLm5leHRUcmFuc3BvcnRJZF8oKSx0aGlzLnJlcG9JbmZvXyx0aGlzLmFwcGxpY2F0aW9uSWRfLHRoaXMuYXBwQ2hlY2tUb2tlbl8sdGhpcy5hdXRoVG9rZW5fLHRoaXMuc2Vzc2lvbklkKSx0aGlzLnNlY29uZGFyeVJlc3BvbnNlc1JlcXVpcmVkXz10LnJlc3BvbnNlc1JlcXVpcmVkVG9CZUhlYWx0aHl8fDA7dmFyIG49dGhpcy5jb25uUmVjZWl2ZXJfKHRoaXMuc2Vjb25kYXJ5Q29ubl8pLHQ9dGhpcy5kaXNjb25uUmVjZWl2ZXJfKHRoaXMuc2Vjb25kYXJ5Q29ubl8pO3RoaXMuc2Vjb25kYXJ5Q29ubl8ub3BlbihuLHQpLGNzKGZ1bmN0aW9uKCl7ZS5zZWNvbmRhcnlDb25uXyYmKGUubG9nXyhcIlRpbWVkIG91dCB0cnlpbmcgdG8gdXBncmFkZS5cIiksZS5zZWNvbmRhcnlDb25uXy5jbG9zZSgpKX0sTWF0aC5mbG9vcig2ZTQpKX0sR3MucHJvdG90eXBlLm9uUmVzZXRfPWZ1bmN0aW9uKHQpe3RoaXMubG9nXyhcIlJlc2V0IHBhY2tldCByZWNlaXZlZC4gIE5ldyBob3N0OiBcIit0KSx0aGlzLnJlcG9JbmZvXy5ob3N0PXQsMT09PXRoaXMuc3RhdGVfP3RoaXMuY2xvc2UoKToodGhpcy5jbG9zZUNvbm5lY3Rpb25zXygpLHRoaXMuc3RhcnRfKCkpfSxHcy5wcm90b3R5cGUub25Db25uZWN0aW9uRXN0YWJsaXNoZWRfPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLmxvZ18oXCJSZWFsdGltZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkLlwiKSx0aGlzLmNvbm5fPXQsdGhpcy5zdGF0ZV89MSx0aGlzLm9uUmVhZHlfJiYodGhpcy5vblJlYWR5XyhlLHRoaXMuc2Vzc2lvbklkKSx0aGlzLm9uUmVhZHlfPW51bGwpLDA9PT10aGlzLnByaW1hcnlSZXNwb25zZXNSZXF1aXJlZF8/KHRoaXMubG9nXyhcIlByaW1hcnkgY29ubmVjdGlvbiBpcyBoZWFsdGh5LlwiKSx0aGlzLmlzSGVhbHRoeV89ITApOmNzKGZ1bmN0aW9uKCl7bi5zZW5kUGluZ09uUHJpbWFyeUlmTmVjZXNzYXJ5XygpfSxNYXRoLmZsb29yKDVlMykpfSxHcy5wcm90b3R5cGUuc2VuZFBpbmdPblByaW1hcnlJZk5lY2Vzc2FyeV89ZnVuY3Rpb24oKXt0aGlzLmlzSGVhbHRoeV98fDEhPT10aGlzLnN0YXRlX3x8KHRoaXMubG9nXyhcInNlbmRpbmcgcGluZyBvbiBwcmltYXJ5LlwiKSx0aGlzLnNlbmREYXRhXyh7dDpcImNcIixkOnt0OlwicFwiLGQ6e319fSkpfSxHcy5wcm90b3R5cGUub25TZWNvbmRhcnlDb25uZWN0aW9uTG9zdF89ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNlY29uZGFyeUNvbm5fO3RoaXMuc2Vjb25kYXJ5Q29ubl89bnVsbCx0aGlzLnR4XyE9PXQmJnRoaXMucnhfIT09dHx8dGhpcy5jbG9zZSgpfSxHcy5wcm90b3R5cGUub25Db25uZWN0aW9uTG9zdF89ZnVuY3Rpb24odCl7dGhpcy5jb25uXz1udWxsLHR8fDAhPT10aGlzLnN0YXRlXz8xPT09dGhpcy5zdGF0ZV8mJnRoaXMubG9nXyhcIlJlYWx0aW1lIGNvbm5lY3Rpb24gbG9zdC5cIik6KHRoaXMubG9nXyhcIlJlYWx0aW1lIGNvbm5lY3Rpb24gZmFpbGVkLlwiKSx0aGlzLnJlcG9JbmZvXy5pc0NhY2hlYWJsZUhvc3QoKSYmKEdhLnJlbW92ZShcImhvc3Q6XCIrdGhpcy5yZXBvSW5mb18uaG9zdCksdGhpcy5yZXBvSW5mb18uaW50ZXJuYWxIb3N0PXRoaXMucmVwb0luZm9fLmhvc3QpKSx0aGlzLmNsb3NlKCl9LEdzLnByb3RvdHlwZS5vbkNvbm5lY3Rpb25TaHV0ZG93bl89ZnVuY3Rpb24odCl7dGhpcy5sb2dfKFwiQ29ubmVjdGlvbiBzaHV0ZG93biBjb21tYW5kIHJlY2VpdmVkLiBTaHV0dGluZyBkb3duLi4uXCIpLHRoaXMub25LaWxsXyYmKHRoaXMub25LaWxsXyh0KSx0aGlzLm9uS2lsbF89bnVsbCksdGhpcy5vbkRpc2Nvbm5lY3RfPW51bGwsdGhpcy5jbG9zZSgpfSxHcy5wcm90b3R5cGUuc2VuZERhdGFfPWZ1bmN0aW9uKHQpe2lmKDEhPT10aGlzLnN0YXRlXyl0aHJvd1wiQ29ubmVjdGlvbiBpcyBub3QgY29ubmVjdGVkXCI7dGhpcy50eF8uc2VuZCh0KX0sR3MucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7MiE9PXRoaXMuc3RhdGVfJiYodGhpcy5sb2dfKFwiQ2xvc2luZyByZWFsdGltZSBjb25uZWN0aW9uLlwiKSx0aGlzLnN0YXRlXz0yLHRoaXMuY2xvc2VDb25uZWN0aW9uc18oKSx0aGlzLm9uRGlzY29ubmVjdF8mJih0aGlzLm9uRGlzY29ubmVjdF8oKSx0aGlzLm9uRGlzY29ubmVjdF89bnVsbCkpfSxHcy5wcm90b3R5cGUuY2xvc2VDb25uZWN0aW9uc189ZnVuY3Rpb24oKXt0aGlzLmxvZ18oXCJTaHV0dGluZyBkb3duIGFsbCBjb25uZWN0aW9uc1wiKSx0aGlzLmNvbm5fJiYodGhpcy5jb25uXy5jbG9zZSgpLHRoaXMuY29ubl89bnVsbCksdGhpcy5zZWNvbmRhcnlDb25uXyYmKHRoaXMuc2Vjb25kYXJ5Q29ubl8uY2xvc2UoKSx0aGlzLnNlY29uZGFyeUNvbm5fPW51bGwpLHRoaXMuaGVhbHRoeVRpbWVvdXRfJiYoY2xlYXJUaW1lb3V0KHRoaXMuaGVhbHRoeVRpbWVvdXRfKSx0aGlzLmhlYWx0aHlUaW1lb3V0Xz1udWxsKX0sR3MpO2Z1bmN0aW9uIEdzKHQsZSxuLHIsaSxvLGEscyx1LGMpe3RoaXMuaWQ9dCx0aGlzLnJlcG9JbmZvXz1lLHRoaXMuYXBwbGljYXRpb25JZF89bix0aGlzLmFwcENoZWNrVG9rZW5fPXIsdGhpcy5hdXRoVG9rZW5fPWksdGhpcy5vbk1lc3NhZ2VfPW8sdGhpcy5vblJlYWR5Xz1hLHRoaXMub25EaXNjb25uZWN0Xz1zLHRoaXMub25LaWxsXz11LHRoaXMubGFzdFNlc3Npb25JZD1jLHRoaXMuY29ubmVjdGlvbkNvdW50PTAsdGhpcy5wZW5kaW5nRGF0YU1lc3NhZ2VzPVtdLHRoaXMuc3RhdGVfPTAsdGhpcy5sb2dfPXRzKFwiYzpcIit0aGlzLmlkK1wiOlwiKSx0aGlzLnRyYW5zcG9ydE1hbmFnZXJfPW5ldyBLcyhlKSx0aGlzLmxvZ18oXCJDb25uZWN0aW9uIGNyZWF0ZWRcIiksdGhpcy5zdGFydF8oKX16cy5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKHQsZSxuLHIpe30senMucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQsZSxuLHIpe30senMucHJvdG90eXBlLnJlZnJlc2hBdXRoVG9rZW49ZnVuY3Rpb24odCl7fSx6cy5wcm90b3R5cGUucmVmcmVzaEFwcENoZWNrVG9rZW49ZnVuY3Rpb24odCl7fSx6cy5wcm90b3R5cGUub25EaXNjb25uZWN0UHV0PWZ1bmN0aW9uKHQsZSxuKXt9LHpzLnByb3RvdHlwZS5vbkRpc2Nvbm5lY3RNZXJnZT1mdW5jdGlvbih0LGUsbil7fSx6cy5wcm90b3R5cGUub25EaXNjb25uZWN0Q2FuY2VsPWZ1bmN0aW9uKHQsZSl7fSx6cy5wcm90b3R5cGUucmVwb3J0U3RhdHM9ZnVuY3Rpb24odCl7fSx6PXpzO2Z1bmN0aW9uIHpzKCl7fXZhciBRcz0oWXMucHJvdG90eXBlLnRyaWdnZXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07aWYoQXJyYXkuaXNBcnJheSh0aGlzLmxpc3RlbmVyc19bdF0pKWZvcih2YXIgcj1ubyhbXSxlbyh0aGlzLmxpc3RlbmVyc19bdF0pKSxpPTA7aTxyLmxlbmd0aDtpKyspcltpXS5jYWxsYmFjay5hcHBseShyW2ldLmNvbnRleHQsZSl9LFlzLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGUsbil7dGhpcy52YWxpZGF0ZUV2ZW50VHlwZV8odCksdGhpcy5saXN0ZW5lcnNfW3RdPXRoaXMubGlzdGVuZXJzX1t0XXx8W10sdGhpcy5saXN0ZW5lcnNfW3RdLnB1c2goe2NhbGxiYWNrOmUsY29udGV4dDpufSk7dD10aGlzLmdldEluaXRpYWxFdmVudCh0KTt0JiZlLmFwcGx5KG4sdCl9LFlzLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24odCxlLG4pe3RoaXMudmFsaWRhdGVFdmVudFR5cGVfKHQpO2Zvcih2YXIgcj10aGlzLmxpc3RlbmVyc19bdF18fFtdLGk9MDtpPHIubGVuZ3RoO2krKylpZihyW2ldLmNhbGxiYWNrPT09ZSYmKCFufHxuPT09cltpXS5jb250ZXh0KSlyZXR1cm4gdm9pZCByLnNwbGljZShpLDEpfSxZcy5wcm90b3R5cGUudmFsaWRhdGVFdmVudFR5cGVfPWZ1bmN0aW9uKGUpe2FvKHRoaXMuYWxsb3dlZEV2ZW50c18uZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdD09PWV9KSxcIlVua25vd24gZXZlbnQ6IFwiK2UpfSxZcyk7ZnVuY3Rpb24gWXModCl7dGhpcy5hbGxvd2VkRXZlbnRzXz10LHRoaXMubGlzdGVuZXJzXz17fSxhbyhBcnJheS5pc0FycmF5KHQpJiYwPHQubGVuZ3RoLFwiUmVxdWlyZXMgYSBub24tZW1wdHkgYXJyYXlcIil9dmFyIFhzLEpzPShYaSgkcyxYcz1RcyksJHMuZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3ICRzfSwkcy5wcm90b3R5cGUuZ2V0SW5pdGlhbEV2ZW50PWZ1bmN0aW9uKHQpe3JldHVybiBhbyhcIm9ubGluZVwiPT09dCxcIlVua25vd24gZXZlbnQgdHlwZTogXCIrdCksW3RoaXMub25saW5lX119LCRzLnByb3RvdHlwZS5jdXJyZW50bHlPbmxpbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vbmxpbmVffSwkcyk7ZnVuY3Rpb24gJHMoKXt2YXIgdD1Ycy5jYWxsKHRoaXMsW1wib25saW5lXCJdKXx8dGhpcztyZXR1cm4gdC5vbmxpbmVfPSEwLFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3d8fHZvaWQgMD09PXdpbmRvdy5hZGRFdmVudExpc3RlbmVyfHxnbygpfHwod2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIixmdW5jdGlvbigpe3Qub25saW5lX3x8KHQub25saW5lXz0hMCx0LnRyaWdnZXIoXCJvbmxpbmVcIiwhMCkpfSwhMSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsZnVuY3Rpb24oKXt0Lm9ubGluZV8mJih0Lm9ubGluZV89ITEsdC50cmlnZ2VyKFwib25saW5lXCIsITEpKX0sITEpKSx0fXZhciBacz0zMix0dT03NjgsZXU9KG51LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgdD1cIlwiLGU9dGhpcy5waWVjZU51bV87ZTx0aGlzLnBpZWNlc18ubGVuZ3RoO2UrKylcIlwiIT09dGhpcy5waWVjZXNfW2VdJiYodCs9XCIvXCIrdGhpcy5waWVjZXNfW2VdKTtyZXR1cm4gdHx8XCIvXCJ9LG51KTtmdW5jdGlvbiBudSh0LGUpe2lmKHZvaWQgMD09PWUpe3RoaXMucGllY2VzXz10LnNwbGl0KFwiL1wiKTtmb3IodmFyIG49MCxyPTA7cjx0aGlzLnBpZWNlc18ubGVuZ3RoO3IrKykwPHRoaXMucGllY2VzX1tyXS5sZW5ndGgmJih0aGlzLnBpZWNlc19bbl09dGhpcy5waWVjZXNfW3JdLG4rKyk7dGhpcy5waWVjZXNfLmxlbmd0aD1uLHRoaXMucGllY2VOdW1fPTB9ZWxzZSB0aGlzLnBpZWNlc189dCx0aGlzLnBpZWNlTnVtXz1lfWZ1bmN0aW9uIHJ1KCl7cmV0dXJuIG5ldyBldShcIlwiKX1mdW5jdGlvbiBpdSh0KXtyZXR1cm4gdC5waWVjZU51bV8+PXQucGllY2VzXy5sZW5ndGg/bnVsbDp0LnBpZWNlc19bdC5waWVjZU51bV9dfWZ1bmN0aW9uIG91KHQpe3JldHVybiB0LnBpZWNlc18ubGVuZ3RoLXQucGllY2VOdW1ffWZ1bmN0aW9uIGF1KHQpe3ZhciBlPXQucGllY2VOdW1fO3JldHVybiBlPHQucGllY2VzXy5sZW5ndGgmJmUrKyxuZXcgZXUodC5waWVjZXNfLGUpfWZ1bmN0aW9uIHN1KHQpe3JldHVybiB0LnBpZWNlTnVtXzx0LnBpZWNlc18ubGVuZ3RoP3QucGllY2VzX1t0LnBpZWNlc18ubGVuZ3RoLTFdOm51bGx9ZnVuY3Rpb24gdXUodCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksdC5waWVjZXNfLnNsaWNlKHQucGllY2VOdW1fK2UpfWZ1bmN0aW9uIGN1KHQpe2lmKHQucGllY2VOdW1fPj10LnBpZWNlc18ubGVuZ3RoKXJldHVybiBudWxsO2Zvcih2YXIgZT1bXSxuPXQucGllY2VOdW1fO248dC5waWVjZXNfLmxlbmd0aC0xO24rKyllLnB1c2godC5waWVjZXNfW25dKTtyZXR1cm4gbmV3IGV1KGUsMCl9ZnVuY3Rpb24gaHUodCxlKXtmb3IodmFyIG49W10scj10LnBpZWNlTnVtXztyPHQucGllY2VzXy5sZW5ndGg7cisrKW4ucHVzaCh0LnBpZWNlc19bcl0pO2lmKGUgaW5zdGFuY2VvZiBldSlmb3Iocj1lLnBpZWNlTnVtXztyPGUucGllY2VzXy5sZW5ndGg7cisrKW4ucHVzaChlLnBpZWNlc19bcl0pO2Vsc2UgZm9yKHZhciBpPWUuc3BsaXQoXCIvXCIpLHI9MDtyPGkubGVuZ3RoO3IrKykwPGlbcl0ubGVuZ3RoJiZuLnB1c2goaVtyXSk7cmV0dXJuIG5ldyBldShuLDApfWZ1bmN0aW9uIGx1KHQpe3JldHVybiB0LnBpZWNlTnVtXz49dC5waWVjZXNfLmxlbmd0aH1mdW5jdGlvbiBmdSh0LGUpe3ZhciBuPWl1KHQpLHI9aXUoZSk7aWYobnVsbD09PW4pcmV0dXJuIGU7aWYobj09PXIpcmV0dXJuIGZ1KGF1KHQpLGF1KGUpKTt0aHJvdyBuZXcgRXJyb3IoXCJJTlRFUk5BTCBFUlJPUjogaW5uZXJQYXRoIChcIitlK1wiKSBpcyBub3Qgd2l0aGluIG91dGVyUGF0aCAoXCIrdCtcIilcIil9ZnVuY3Rpb24gcHUodCxlKXtmb3IodmFyIG49dXUodCwwKSxyPXV1KGUsMCksaT0wO2k8bi5sZW5ndGgmJmk8ci5sZW5ndGg7aSsrKXt2YXIgbz1vcyhuW2ldLHJbaV0pO2lmKDAhPT1vKXJldHVybiBvfXJldHVybiBuLmxlbmd0aD09PXIubGVuZ3RoPzA6bi5sZW5ndGg8ci5sZW5ndGg/LTE6MX1mdW5jdGlvbiBkdSh0LGUpe2lmKG91KHQpIT09b3UoZSkpcmV0dXJuITE7Zm9yKHZhciBuPXQucGllY2VOdW1fLHI9ZS5waWVjZU51bV87bjw9dC5waWVjZXNfLmxlbmd0aDtuKysscisrKWlmKHQucGllY2VzX1tuXSE9PWUucGllY2VzX1tyXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiB2dSh0LGUpe3ZhciBuPXQucGllY2VOdW1fLHI9ZS5waWVjZU51bV87aWYob3UodCk+b3UoZSkpcmV0dXJuITE7Zm9yKDtuPHQucGllY2VzXy5sZW5ndGg7KXtpZih0LnBpZWNlc19bbl0hPT1lLnBpZWNlc19bcl0pcmV0dXJuITE7KytuLCsrcn1yZXR1cm4hMH12YXIgZ3U9ZnVuY3Rpb24odCxlKXt0aGlzLmVycm9yUHJlZml4Xz1lLHRoaXMucGFydHNfPXV1KHQsMCksdGhpcy5ieXRlTGVuZ3RoXz1NYXRoLm1heCgxLHRoaXMucGFydHNfLmxlbmd0aCk7Zm9yKHZhciBuPTA7bjx0aGlzLnBhcnRzXy5sZW5ndGg7bisrKXRoaXMuYnl0ZUxlbmd0aF8rPVFvKHRoaXMucGFydHNfW25dKTt5dSh0aGlzKX07ZnVuY3Rpb24geXUodCl7aWYodC5ieXRlTGVuZ3RoXz50dSl0aHJvdyBuZXcgRXJyb3IodC5lcnJvclByZWZpeF8rXCJoYXMgYSBrZXkgcGF0aCBsb25nZXIgdGhhbiBcIit0dStcIiBieXRlcyAoXCIrdC5ieXRlTGVuZ3RoXytcIikuXCIpO2lmKHQucGFydHNfLmxlbmd0aD5acyl0aHJvdyBuZXcgRXJyb3IodC5lcnJvclByZWZpeF8rXCJwYXRoIHNwZWNpZmllZCBleGNlZWRzIHRoZSBtYXhpbXVtIGRlcHRoIHRoYXQgY2FuIGJlIHdyaXR0ZW4gKFwiK1pzK1wiKSBvciBvYmplY3QgY29udGFpbnMgYSBjeWNsZSBcIittdSh0KSl9ZnVuY3Rpb24gbXUodCl7cmV0dXJuIDA9PT10LnBhcnRzXy5sZW5ndGg/XCJcIjpcImluIHByb3BlcnR5ICdcIit0LnBhcnRzXy5qb2luKFwiLlwiKStcIidcIn12YXIgYnUsX3U9KFhpKHd1LGJ1PVFzKSx3dS5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3JldHVybiBuZXcgd3V9LHd1LnByb3RvdHlwZS5nZXRJbml0aWFsRXZlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFvKFwidmlzaWJsZVwiPT09dCxcIlVua25vd24gZXZlbnQgdHlwZTogXCIrdCksW3RoaXMudmlzaWJsZV9dfSx3dSk7ZnVuY3Rpb24gd3UoKXt2YXIgZSx0LG49YnUuY2FsbCh0aGlzLFtcInZpc2libGVcIl0pfHx0aGlzO3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmdm9pZCAwIT09ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciYmKHZvaWQgMCE9PWRvY3VtZW50LmhpZGRlbj8odD1cInZpc2liaWxpdHljaGFuZ2VcIixlPVwiaGlkZGVuXCIpOnZvaWQgMCE9PWRvY3VtZW50Lm1vekhpZGRlbj8odD1cIm1venZpc2liaWxpdHljaGFuZ2VcIixlPVwibW96SGlkZGVuXCIpOnZvaWQgMCE9PWRvY3VtZW50Lm1zSGlkZGVuPyh0PVwibXN2aXNpYmlsaXR5Y2hhbmdlXCIsZT1cIm1zSGlkZGVuXCIpOnZvaWQgMCE9PWRvY3VtZW50LndlYmtpdEhpZGRlbiYmKHQ9XCJ3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlXCIsZT1cIndlYmtpdEhpZGRlblwiKSksbi52aXNpYmxlXz0hMCx0JiZkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHQsZnVuY3Rpb24oKXt2YXIgdD0hZG9jdW1lbnRbZV07dCE9PW4udmlzaWJsZV8mJihuLnZpc2libGVfPXQsbi50cmlnZ2VyKFwidmlzaWJsZVwiLHQpKX0sITEpLG59dmFyIEl1LFR1PTFlMyxFdT0zZTUsU3U9KFhpKEN1LEl1PXopLEN1LnByb3RvdHlwZS5zZW5kUmVxdWVzdD1mdW5jdGlvbih0LGUsbil7dmFyIHI9Kyt0aGlzLnJlcXVlc3ROdW1iZXJfLGU9e3I6cixhOnQsYjplfTt0aGlzLmxvZ18oUG8oZSkpLGFvKHRoaXMuY29ubmVjdGVkXyxcInNlbmRSZXF1ZXN0IGNhbGwgd2hlbiB3ZSdyZSBub3QgY29ubmVjdGVkIG5vdCBhbGxvd2VkLlwiKSx0aGlzLnJlYWx0aW1lXy5zZW5kUmVxdWVzdChlKSxuJiYodGhpcy5yZXF1ZXN0Q0JIYXNoX1tyXT1uKX0sQ3UucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgbj10aGlzLHI9bmV3IGxvLGk9e3A6dC5fcGF0aC50b1N0cmluZygpLHE6dC5fcXVlcnlPYmplY3R9LGU9e2FjdGlvbjpcImdcIixyZXF1ZXN0Omksb25Db21wbGV0ZTpmdW5jdGlvbih0KXt2YXIgZT10LmQ7XCJva1wiPT09dC5zPyhuLm9uRGF0YVVwZGF0ZV8oaS5wLGUsITEsbnVsbCksci5yZXNvbHZlKGUpKTpyLnJlamVjdChlKX19O3RoaXMub3V0c3RhbmRpbmdHZXRzXy5wdXNoKGUpLHRoaXMub3V0c3RhbmRpbmdHZXRDb3VudF8rKzt2YXIgbz10aGlzLm91dHN0YW5kaW5nR2V0c18ubGVuZ3RoLTE7cmV0dXJuIHRoaXMuY29ubmVjdGVkX3x8c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PW4ub3V0c3RhbmRpbmdHZXRzX1tvXTt2b2lkIDAhPT10JiZlPT09dCYmKGRlbGV0ZSBuLm91dHN0YW5kaW5nR2V0c19bb10sbi5vdXRzdGFuZGluZ0dldENvdW50Xy0tLDA9PT1uLm91dHN0YW5kaW5nR2V0Q291bnRfJiYobi5vdXRzdGFuZGluZ0dldHNfPVtdKSxuLmxvZ18oXCJnZXQgXCIrbytcIiB0aW1lZCBvdXQgb24gY29ubmVjdGlvblwiKSxyLnJlamVjdChuZXcgRXJyb3IoXCJDbGllbnQgaXMgb2ZmbGluZS5cIikpKX0sM2UzKSx0aGlzLmNvbm5lY3RlZF8mJnRoaXMuc2VuZEdldF8obyksci5wcm9taXNlfSxDdS5wcm90b3R5cGUubGlzdGVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPXQuX3F1ZXJ5SWRlbnRpZmllcixvPXQuX3BhdGgudG9TdHJpbmcoKTt0aGlzLmxvZ18oXCJMaXN0ZW4gY2FsbGVkIGZvciBcIitvK1wiIFwiK2kpLHRoaXMubGlzdGVucy5oYXMobyl8fHRoaXMubGlzdGVucy5zZXQobyxuZXcgTWFwKSxhbyh0Ll9xdWVyeVBhcmFtcy5pc0RlZmF1bHQoKXx8IXQuX3F1ZXJ5UGFyYW1zLmxvYWRzQWxsRGF0YSgpLFwibGlzdGVuKCkgY2FsbGVkIGZvciBub24tZGVmYXVsdCBidXQgY29tcGxldGUgcXVlcnlcIiksYW8oIXRoaXMubGlzdGVucy5nZXQobykuaGFzKGkpLFwibGlzdGVuKCkgY2FsbGVkIHR3aWNlIGZvciBzYW1lIHBhdGgvcXVlcnlJZC5cIik7bj17b25Db21wbGV0ZTpyLGhhc2hGbjplLHF1ZXJ5OnQsdGFnOm59O3RoaXMubGlzdGVucy5nZXQobykuc2V0KGksbiksdGhpcy5jb25uZWN0ZWRfJiZ0aGlzLnNlbmRMaXN0ZW5fKG4pfSxDdS5wcm90b3R5cGUuc2VuZEdldF89ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxyPXRoaXMub3V0c3RhbmRpbmdHZXRzX1tlXTt0aGlzLnNlbmRSZXF1ZXN0KFwiZ1wiLHIucmVxdWVzdCxmdW5jdGlvbih0KXtkZWxldGUgbi5vdXRzdGFuZGluZ0dldHNfW2VdLG4ub3V0c3RhbmRpbmdHZXRDb3VudF8tLSwwPT09bi5vdXRzdGFuZGluZ0dldENvdW50XyYmKG4ub3V0c3RhbmRpbmdHZXRzXz1bXSksci5vbkNvbXBsZXRlJiZyLm9uQ29tcGxldGUodCl9KX0sQ3UucHJvdG90eXBlLnNlbmRMaXN0ZW5fPWZ1bmN0aW9uKHIpe3ZhciBpPXRoaXMsbz1yLnF1ZXJ5LGE9by5fcGF0aC50b1N0cmluZygpLHM9by5fcXVlcnlJZGVudGlmaWVyO3RoaXMubG9nXyhcIkxpc3RlbiBvbiBcIithK1wiIGZvciBcIitzKTt2YXIgdD17cDphfTtyLnRhZyYmKHQucT1vLl9xdWVyeU9iamVjdCx0LnQ9ci50YWcpLHQuaD1yLmhhc2hGbigpLHRoaXMuc2VuZFJlcXVlc3QoXCJxXCIsdCxmdW5jdGlvbih0KXt2YXIgZT10LmQsbj10LnM7Q3Uud2Fybk9uTGlzdGVuV2FybmluZ3NfKGUsbyksKGkubGlzdGVucy5nZXQoYSkmJmkubGlzdGVucy5nZXQoYSkuZ2V0KHMpKT09PXImJihpLmxvZ18oXCJsaXN0ZW4gcmVzcG9uc2VcIix0KSxcIm9rXCIhPT1uJiZpLnJlbW92ZUxpc3Rlbl8oYSxzKSxyLm9uQ29tcGxldGUmJnIub25Db21wbGV0ZShuLGUpKX0pfSxDdS53YXJuT25MaXN0ZW5XYXJuaW5nc189ZnVuY3Rpb24odCxlKXt0JiZcIm9iamVjdFwiPT10eXBlb2YgdCYmRG8odCxcIndcIikmJih0PXhvKHQsXCJ3XCIpLEFycmF5LmlzQXJyYXkodCkmJn50LmluZGV4T2YoXCJub19pbmRleFwiKSYmKHQ9J1wiLmluZGV4T25cIjogXCInK2UuX3F1ZXJ5UGFyYW1zLmdldEluZGV4KCkudG9TdHJpbmcoKSsnXCInLGU9ZS5fcGF0aC50b1N0cmluZygpLG5zKFwiVXNpbmcgYW4gdW5zcGVjaWZpZWQgaW5kZXguIFlvdXIgZGF0YSB3aWxsIGJlIGRvd25sb2FkZWQgYW5kIGZpbHRlcmVkIG9uIHRoZSBjbGllbnQuIENvbnNpZGVyIGFkZGluZyBcIit0K1wiIGF0IFwiK2UrXCIgdG8geW91ciBzZWN1cml0eSBydWxlcyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlwiKSkpfSxDdS5wcm90b3R5cGUucmVmcmVzaEF1dGhUb2tlbj1mdW5jdGlvbih0KXt0aGlzLmF1dGhUb2tlbl89dCx0aGlzLmxvZ18oXCJBdXRoIHRva2VuIHJlZnJlc2hlZFwiKSx0aGlzLmF1dGhUb2tlbl8/dGhpcy50cnlBdXRoKCk6dGhpcy5jb25uZWN0ZWRfJiZ0aGlzLnNlbmRSZXF1ZXN0KFwidW5hdXRoXCIse30sZnVuY3Rpb24oKXt9KSx0aGlzLnJlZHVjZVJlY29ubmVjdERlbGF5SWZBZG1pbkNyZWRlbnRpYWxfKHQpfSxDdS5wcm90b3R5cGUucmVkdWNlUmVjb25uZWN0RGVsYXlJZkFkbWluQ3JlZGVudGlhbF89ZnVuY3Rpb24odCl7KHQmJjQwPT09dC5sZW5ndGh8fGZ1bmN0aW9uKHQpe3Q9T28odCkuY2xhaW1zO3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0JiYhMD09PXQuYWRtaW59KHQpKSYmKHRoaXMubG9nXyhcIkFkbWluIGF1dGggY3JlZGVudGlhbCBkZXRlY3RlZC4gIFJlZHVjaW5nIG1heCByZWNvbm5lY3QgdGltZS5cIiksdGhpcy5tYXhSZWNvbm5lY3REZWxheV89M2U0KX0sQ3UucHJvdG90eXBlLnJlZnJlc2hBcHBDaGVja1Rva2VuPWZ1bmN0aW9uKHQpe3RoaXMuYXBwQ2hlY2tUb2tlbl89dCx0aGlzLmxvZ18oXCJBcHAgY2hlY2sgdG9rZW4gcmVmcmVzaGVkXCIpLHRoaXMuYXBwQ2hlY2tUb2tlbl8/dGhpcy50cnlBcHBDaGVjaygpOnRoaXMuY29ubmVjdGVkXyYmdGhpcy5zZW5kUmVxdWVzdChcInVuYXBwZWNrXCIse30sZnVuY3Rpb24oKXt9KX0sQ3UucHJvdG90eXBlLnRyeUF1dGg9ZnVuY3Rpb24oKXt2YXIgbix0LGUscj10aGlzO3RoaXMuY29ubmVjdGVkXyYmdGhpcy5hdXRoVG9rZW5fJiYodD1mdW5jdGlvbih0KXt0PU9vKHQpLmNsYWltcztyZXR1cm4hIXQmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0Lmhhc093blByb3BlcnR5KFwiaWF0XCIpfShuPXRoaXMuYXV0aFRva2VuXyk/XCJhdXRoXCI6XCJnYXV0aFwiLGU9e2NyZWQ6bn0sbnVsbD09PXRoaXMuYXV0aE92ZXJyaWRlXz9lLm5vYXV0aD0hMDpcIm9iamVjdFwiPT10eXBlb2YgdGhpcy5hdXRoT3ZlcnJpZGVfJiYoZS5hdXRodmFyPXRoaXMuYXV0aE92ZXJyaWRlXyksdGhpcy5zZW5kUmVxdWVzdCh0LGUsZnVuY3Rpb24odCl7dmFyIGU9dC5zLHQ9dC5kfHxcImVycm9yXCI7ci5hdXRoVG9rZW5fPT09biYmKFwib2tcIj09PWU/ci5pbnZhbGlkQXV0aFRva2VuQ291bnRfPTA6ci5vbkF1dGhSZXZva2VkXyhlLHQpKX0pKX0sQ3UucHJvdG90eXBlLnRyeUFwcENoZWNrPWZ1bmN0aW9uKCl7dmFyIG49dGhpczt0aGlzLmNvbm5lY3RlZF8mJnRoaXMuYXBwQ2hlY2tUb2tlbl8mJnRoaXMuc2VuZFJlcXVlc3QoXCJhcHBjaGVja1wiLHt0b2tlbjp0aGlzLmFwcENoZWNrVG9rZW5ffSxmdW5jdGlvbih0KXt2YXIgZT10LnMsdD10LmR8fFwiZXJyb3JcIjtcIm9rXCI9PT1lP24uaW52YWxpZEFwcENoZWNrVG9rZW5Db3VudF89MDpuLm9uQXBwQ2hlY2tSZXZva2VkXyhlLHQpfSl9LEN1LnByb3RvdHlwZS51bmxpc3Rlbj1mdW5jdGlvbih0LGUpe3ZhciBuPXQuX3BhdGgudG9TdHJpbmcoKSxyPXQuX3F1ZXJ5SWRlbnRpZmllcjt0aGlzLmxvZ18oXCJVbmxpc3RlbiBjYWxsZWQgZm9yIFwiK24rXCIgXCIrciksYW8odC5fcXVlcnlQYXJhbXMuaXNEZWZhdWx0KCl8fCF0Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKSxcInVubGlzdGVuKCkgY2FsbGVkIGZvciBub24tZGVmYXVsdCBidXQgY29tcGxldGUgcXVlcnlcIiksdGhpcy5yZW1vdmVMaXN0ZW5fKG4scikmJnRoaXMuY29ubmVjdGVkXyYmdGhpcy5zZW5kVW5saXN0ZW5fKG4scix0Ll9xdWVyeU9iamVjdCxlKX0sQ3UucHJvdG90eXBlLnNlbmRVbmxpc3Rlbl89ZnVuY3Rpb24odCxlLG4scil7dGhpcy5sb2dfKFwiVW5saXN0ZW4gb24gXCIrdCtcIiBmb3IgXCIrZSk7dD17cDp0fTtyJiYodC5xPW4sdC50PXIpLHRoaXMuc2VuZFJlcXVlc3QoXCJuXCIsdCl9LEN1LnByb3RvdHlwZS5vbkRpc2Nvbm5lY3RQdXQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMuY29ubmVjdGVkXz90aGlzLnNlbmRPbkRpc2Nvbm5lY3RfKFwib1wiLHQsZSxuKTp0aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8ucHVzaCh7cGF0aFN0cmluZzp0LGFjdGlvbjpcIm9cIixkYXRhOmUsb25Db21wbGV0ZTpufSl9LEN1LnByb3RvdHlwZS5vbkRpc2Nvbm5lY3RNZXJnZT1mdW5jdGlvbih0LGUsbil7dGhpcy5jb25uZWN0ZWRfP3RoaXMuc2VuZE9uRGlzY29ubmVjdF8oXCJvbVwiLHQsZSxuKTp0aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8ucHVzaCh7cGF0aFN0cmluZzp0LGFjdGlvbjpcIm9tXCIsZGF0YTplLG9uQ29tcGxldGU6bn0pfSxDdS5wcm90b3R5cGUub25EaXNjb25uZWN0Q2FuY2VsPWZ1bmN0aW9uKHQsZSl7dGhpcy5jb25uZWN0ZWRfP3RoaXMuc2VuZE9uRGlzY29ubmVjdF8oXCJvY1wiLHQsbnVsbCxlKTp0aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8ucHVzaCh7cGF0aFN0cmluZzp0LGFjdGlvbjpcIm9jXCIsZGF0YTpudWxsLG9uQ29tcGxldGU6ZX0pfSxDdS5wcm90b3R5cGUuc2VuZE9uRGlzY29ubmVjdF89ZnVuY3Rpb24odCxlLG4scil7bj17cDplLGQ6bn07dGhpcy5sb2dfKFwib25EaXNjb25uZWN0IFwiK3QsbiksdGhpcy5zZW5kUmVxdWVzdCh0LG4sZnVuY3Rpb24odCl7ciYmc2V0VGltZW91dChmdW5jdGlvbigpe3IodC5zLHQuZCl9LE1hdGguZmxvb3IoMCkpfSl9LEN1LnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5wdXRJbnRlcm5hbChcInBcIix0LGUsbixyKX0sQ3UucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMucHV0SW50ZXJuYWwoXCJtXCIsdCxlLG4scil9LEN1LnByb3RvdHlwZS5wdXRJbnRlcm5hbD1mdW5jdGlvbih0LGUsbixyLGkpe249e3A6ZSxkOm59O3ZvaWQgMCE9PWkmJihuLmg9aSksdGhpcy5vdXRzdGFuZGluZ1B1dHNfLnB1c2goe2FjdGlvbjp0LHJlcXVlc3Q6bixvbkNvbXBsZXRlOnJ9KSx0aGlzLm91dHN0YW5kaW5nUHV0Q291bnRfKys7cj10aGlzLm91dHN0YW5kaW5nUHV0c18ubGVuZ3RoLTE7dGhpcy5jb25uZWN0ZWRfP3RoaXMuc2VuZFB1dF8ocik6dGhpcy5sb2dfKFwiQnVmZmVyaW5nIHB1dDogXCIrZSl9LEN1LnByb3RvdHlwZS5zZW5kUHV0Xz1mdW5jdGlvbihlKXt2YXIgbj10aGlzLHI9dGhpcy5vdXRzdGFuZGluZ1B1dHNfW2VdLmFjdGlvbix0PXRoaXMub3V0c3RhbmRpbmdQdXRzX1tlXS5yZXF1ZXN0LGk9dGhpcy5vdXRzdGFuZGluZ1B1dHNfW2VdLm9uQ29tcGxldGU7dGhpcy5vdXRzdGFuZGluZ1B1dHNfW2VdLnF1ZXVlZD10aGlzLmNvbm5lY3RlZF8sdGhpcy5zZW5kUmVxdWVzdChyLHQsZnVuY3Rpb24odCl7bi5sb2dfKHIrXCIgcmVzcG9uc2VcIix0KSxkZWxldGUgbi5vdXRzdGFuZGluZ1B1dHNfW2VdLG4ub3V0c3RhbmRpbmdQdXRDb3VudF8tLSwwPT09bi5vdXRzdGFuZGluZ1B1dENvdW50XyYmKG4ub3V0c3RhbmRpbmdQdXRzXz1bXSksaSYmaSh0LnMsdC5kKX0pfSxDdS5wcm90b3R5cGUucmVwb3J0U3RhdHM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLmNvbm5lY3RlZF8mJih0PXtjOnR9LHRoaXMubG9nXyhcInJlcG9ydFN0YXRzXCIsdCksdGhpcy5zZW5kUmVxdWVzdChcInNcIix0LGZ1bmN0aW9uKHQpe1wib2tcIiE9PXQucyYmKHQ9dC5kLGUubG9nXyhcInJlcG9ydFN0YXRzXCIsXCJFcnJvciBzZW5kaW5nIHN0YXRzOiBcIit0KSl9KSl9LEN1LnByb3RvdHlwZS5vbkRhdGFNZXNzYWdlXz1mdW5jdGlvbih0KXtpZihcInJcImluIHQpe3RoaXMubG9nXyhcImZyb20gc2VydmVyOiBcIitQbyh0KSk7dmFyIGU9dC5yLG49dGhpcy5yZXF1ZXN0Q0JIYXNoX1tlXTtuJiYoZGVsZXRlIHRoaXMucmVxdWVzdENCSGFzaF9bZV0sbih0LmIpKX1lbHNle2lmKFwiZXJyb3JcImluIHQpdGhyb3dcIkEgc2VydmVyLXNpZGUgZXJyb3IgaGFzIG9jY3VycmVkOiBcIit0LmVycm9yO1wiYVwiaW4gdCYmdGhpcy5vbkRhdGFQdXNoXyh0LmEsdC5iKX19LEN1LnByb3RvdHlwZS5vbkRhdGFQdXNoXz1mdW5jdGlvbih0LGUpe3RoaXMubG9nXyhcImhhbmRsZVNlcnZlck1lc3NhZ2VcIix0LGUpLFwiZFwiPT09dD90aGlzLm9uRGF0YVVwZGF0ZV8oZS5wLGUuZCwhMSxlLnQpOlwibVwiPT09dD90aGlzLm9uRGF0YVVwZGF0ZV8oZS5wLGUuZCwhMCxlLnQpOlwiY1wiPT09dD90aGlzLm9uTGlzdGVuUmV2b2tlZF8oZS5wLGUucSk6XCJhY1wiPT09dD90aGlzLm9uQXV0aFJldm9rZWRfKGUucyxlLmQpOlwiYXBjXCI9PT10P3RoaXMub25BcHBDaGVja1Jldm9rZWRfKGUucyxlLmQpOlwic2RcIj09PXQ/dGhpcy5vblNlY3VyaXR5RGVidWdQYWNrZXRfKGUpOnFhKFwiVW5yZWNvZ25pemVkIGFjdGlvbiByZWNlaXZlZCBmcm9tIHNlcnZlcjogXCIrUG8odCkrXCJcXG5BcmUgeW91IHVzaW5nIHRoZSBsYXRlc3QgY2xpZW50P1wiKX0sQ3UucHJvdG90eXBlLm9uUmVhZHlfPWZ1bmN0aW9uKHQsZSl7dGhpcy5sb2dfKFwiY29ubmVjdGlvbiByZWFkeVwiKSx0aGlzLmNvbm5lY3RlZF89ITAsdGhpcy5sYXN0Q29ubmVjdGlvbkVzdGFibGlzaGVkVGltZV89KG5ldyBEYXRlKS5nZXRUaW1lKCksdGhpcy5oYW5kbGVUaW1lc3RhbXBfKHQpLHRoaXMubGFzdFNlc3Npb25JZD1lLHRoaXMuZmlyc3RDb25uZWN0aW9uXyYmdGhpcy5zZW5kQ29ubmVjdFN0YXRzXygpLHRoaXMucmVzdG9yZVN0YXRlXygpLHRoaXMuZmlyc3RDb25uZWN0aW9uXz0hMSx0aGlzLm9uQ29ubmVjdFN0YXR1c18oITApfSxDdS5wcm90b3R5cGUuc2NoZWR1bGVDb25uZWN0Xz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2FvKCF0aGlzLnJlYWx0aW1lXyxcIlNjaGVkdWxpbmcgYSBjb25uZWN0IHdoZW4gd2UncmUgYWxyZWFkeSBjb25uZWN0ZWQvaW5nP1wiKSx0aGlzLmVzdGFibGlzaENvbm5lY3Rpb25UaW1lcl8mJmNsZWFyVGltZW91dCh0aGlzLmVzdGFibGlzaENvbm5lY3Rpb25UaW1lcl8pLHRoaXMuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfPW51bGwsZS5lc3RhYmxpc2hDb25uZWN0aW9uXygpfSxNYXRoLmZsb29yKHQpKX0sQ3UucHJvdG90eXBlLm9uVmlzaWJsZV89ZnVuY3Rpb24odCl7dCYmIXRoaXMudmlzaWJsZV8mJnRoaXMucmVjb25uZWN0RGVsYXlfPT09dGhpcy5tYXhSZWNvbm5lY3REZWxheV8mJih0aGlzLmxvZ18oXCJXaW5kb3cgYmVjYW1lIHZpc2libGUuICBSZWR1Y2luZyBkZWxheS5cIiksdGhpcy5yZWNvbm5lY3REZWxheV89VHUsdGhpcy5yZWFsdGltZV98fHRoaXMuc2NoZWR1bGVDb25uZWN0XygwKSksdGhpcy52aXNpYmxlXz10fSxDdS5wcm90b3R5cGUub25PbmxpbmVfPWZ1bmN0aW9uKHQpe3Q/KHRoaXMubG9nXyhcIkJyb3dzZXIgd2VudCBvbmxpbmUuXCIpLHRoaXMucmVjb25uZWN0RGVsYXlfPVR1LHRoaXMucmVhbHRpbWVffHx0aGlzLnNjaGVkdWxlQ29ubmVjdF8oMCkpOih0aGlzLmxvZ18oXCJCcm93c2VyIHdlbnQgb2ZmbGluZS4gIEtpbGxpbmcgY29ubmVjdGlvbi5cIiksdGhpcy5yZWFsdGltZV8mJnRoaXMucmVhbHRpbWVfLmNsb3NlKCkpfSxDdS5wcm90b3R5cGUub25SZWFsdGltZURpc2Nvbm5lY3RfPWZ1bmN0aW9uKCl7dmFyIHQ7dGhpcy5sb2dfKFwiZGF0YSBjbGllbnQgZGlzY29ubmVjdGVkXCIpLHRoaXMuY29ubmVjdGVkXz0hMSx0aGlzLnJlYWx0aW1lXz1udWxsLHRoaXMuY2FuY2VsU2VudFRyYW5zYWN0aW9uc18oKSx0aGlzLnJlcXVlc3RDQkhhc2hfPXt9LHRoaXMuc2hvdWxkUmVjb25uZWN0XygpJiYodGhpcy52aXNpYmxlXz90aGlzLmxhc3RDb25uZWN0aW9uRXN0YWJsaXNoZWRUaW1lXyYmKDNlNDwobmV3IERhdGUpLmdldFRpbWUoKS10aGlzLmxhc3RDb25uZWN0aW9uRXN0YWJsaXNoZWRUaW1lXyYmKHRoaXMucmVjb25uZWN0RGVsYXlfPVR1KSx0aGlzLmxhc3RDb25uZWN0aW9uRXN0YWJsaXNoZWRUaW1lXz1udWxsKToodGhpcy5sb2dfKFwiV2luZG93IGlzbid0IHZpc2libGUuICBEZWxheWluZyByZWNvbm5lY3QuXCIpLHRoaXMucmVjb25uZWN0RGVsYXlfPXRoaXMubWF4UmVjb25uZWN0RGVsYXlfLHRoaXMubGFzdENvbm5lY3Rpb25BdHRlbXB0VGltZV89KG5ldyBEYXRlKS5nZXRUaW1lKCkpLHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCktdGhpcy5sYXN0Q29ubmVjdGlvbkF0dGVtcHRUaW1lXyx0PU1hdGgubWF4KDAsdGhpcy5yZWNvbm5lY3REZWxheV8tdCksdD1NYXRoLnJhbmRvbSgpKnQsdGhpcy5sb2dfKFwiVHJ5aW5nIHRvIHJlY29ubmVjdCBpbiBcIit0K1wibXNcIiksdGhpcy5zY2hlZHVsZUNvbm5lY3RfKHQpLHRoaXMucmVjb25uZWN0RGVsYXlfPU1hdGgubWluKHRoaXMubWF4UmVjb25uZWN0RGVsYXlfLDEuMyp0aGlzLnJlY29ubmVjdERlbGF5XykpLHRoaXMub25Db25uZWN0U3RhdHVzXyghMSl9LEN1LnByb3RvdHlwZS5lc3RhYmxpc2hDb25uZWN0aW9uXz1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxvLGEscyx1LGMsaCxsPXRoaXM7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDppZighdGhpcy5zaG91bGRSZWNvbm5lY3RfKCkpcmV0dXJuWzMsNF07dGhpcy5sb2dfKFwiTWFraW5nIGEgY29ubmVjdGlvbiBhdHRlbXB0XCIpLHRoaXMubGFzdENvbm5lY3Rpb25BdHRlbXB0VGltZV89KG5ldyBEYXRlKS5nZXRUaW1lKCksdGhpcy5sYXN0Q29ubmVjdGlvbkVzdGFibGlzaGVkVGltZV89bnVsbCxlPXRoaXMub25EYXRhTWVzc2FnZV8uYmluZCh0aGlzKSxuPXRoaXMub25SZWFkeV8uYmluZCh0aGlzKSxyPXRoaXMub25SZWFsdGltZURpc2Nvbm5lY3RfLmJpbmQodGhpcyksaT10aGlzLmlkK1wiOlwiK0N1Lm5leHRDb25uZWN0aW9uSWRfKyssaD10aGlzLmxhc3RTZXNzaW9uSWQsbz0hMSxhPW51bGwscz1mdW5jdGlvbigpe2E/YS5jbG9zZSgpOihvPSEwLHIoKSl9LGM9ZnVuY3Rpb24odCl7YW8oYSxcInNlbmRSZXF1ZXN0IGNhbGwgd2hlbiB3ZSdyZSBub3QgY29ubmVjdGVkIG5vdCBhbGxvd2VkLlwiKSxhLnNlbmRSZXF1ZXN0KHQpfSx0aGlzLnJlYWx0aW1lXz17Y2xvc2U6cyxzZW5kUmVxdWVzdDpjfSx1PXRoaXMuZm9yY2VUb2tlblJlZnJlc2hfLHRoaXMuZm9yY2VUb2tlblJlZnJlc2hfPSExLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCxQcm9taXNlLmFsbChbdGhpcy5hdXRoVG9rZW5Qcm92aWRlcl8uZ2V0VG9rZW4odSksdGhpcy5hcHBDaGVja1Rva2VuUHJvdmlkZXJfLmdldFRva2VuKHUpXSldO2Nhc2UgMjpyZXR1cm4gYz1lby5hcHBseSh2b2lkIDAsW3Quc2VudCgpLDJdKSx1PWNbMF0sYz1jWzFdLG8/WmEoXCJnZXRUb2tlbigpIGNvbXBsZXRlZCBidXQgd2FzIGNhbmNlbGVkXCIpOihaYShcImdldFRva2VuKCkgY29tcGxldGVkLiBDcmVhdGluZyBjb25uZWN0aW9uLlwiKSx0aGlzLmF1dGhUb2tlbl89dSYmdS5hY2Nlc3NUb2tlbix0aGlzLmFwcENoZWNrVG9rZW5fPWMmJmMudG9rZW4sYT1uZXcgSHMoaSx0aGlzLnJlcG9JbmZvXyx0aGlzLmFwcGxpY2F0aW9uSWRfLHRoaXMuYXBwQ2hlY2tUb2tlbl8sdGhpcy5hdXRoVG9rZW5fLGUsbixyLGZ1bmN0aW9uKHQpe25zKHQrXCIgKFwiK2wucmVwb0luZm9fLnRvU3RyaW5nKCkrXCIpXCIpLGwuaW50ZXJydXB0KFwic2VydmVyX2tpbGxcIil9LGgpKSxbMyw0XTtjYXNlIDM6cmV0dXJuIGg9dC5zZW50KCksdGhpcy5sb2dfKFwiRmFpbGVkIHRvIGdldCB0b2tlbjogXCIraCksb3x8KHRoaXMucmVwb0luZm9fLm5vZGVBZG1pbiYmbnMoaCkscygpKSxbMyw0XTtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9LEN1LnByb3RvdHlwZS5pbnRlcnJ1cHQ9ZnVuY3Rpb24odCl7WmEoXCJJbnRlcnJ1cHRpbmcgY29ubmVjdGlvbiBmb3IgcmVhc29uOiBcIit0KSx0aGlzLmludGVycnVwdFJlYXNvbnNfW3RdPSEwLHRoaXMucmVhbHRpbWVfP3RoaXMucmVhbHRpbWVfLmNsb3NlKCk6KHRoaXMuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXyYmKGNsZWFyVGltZW91dCh0aGlzLmVzdGFibGlzaENvbm5lY3Rpb25UaW1lcl8pLHRoaXMuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXz1udWxsKSx0aGlzLmNvbm5lY3RlZF8mJnRoaXMub25SZWFsdGltZURpc2Nvbm5lY3RfKCkpfSxDdS5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKHQpe1phKFwiUmVzdW1pbmcgY29ubmVjdGlvbiBmb3IgcmVhc29uOiBcIit0KSxkZWxldGUgdGhpcy5pbnRlcnJ1cHRSZWFzb25zX1t0XSxMbyh0aGlzLmludGVycnVwdFJlYXNvbnNfKSYmKHRoaXMucmVjb25uZWN0RGVsYXlfPVR1LHRoaXMucmVhbHRpbWVffHx0aGlzLnNjaGVkdWxlQ29ubmVjdF8oMCkpfSxDdS5wcm90b3R5cGUuaGFuZGxlVGltZXN0YW1wXz1mdW5jdGlvbih0KXt0LT0obmV3IERhdGUpLmdldFRpbWUoKTt0aGlzLm9uU2VydmVySW5mb1VwZGF0ZV8oe3NlcnZlclRpbWVPZmZzZXQ6dH0pfSxDdS5wcm90b3R5cGUuY2FuY2VsU2VudFRyYW5zYWN0aW9uc189ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMub3V0c3RhbmRpbmdQdXRzXy5sZW5ndGg7dCsrKXt2YXIgZT10aGlzLm91dHN0YW5kaW5nUHV0c19bdF07ZSYmXCJoXCJpbiBlLnJlcXVlc3QmJmUucXVldWVkJiYoZS5vbkNvbXBsZXRlJiZlLm9uQ29tcGxldGUoXCJkaXNjb25uZWN0XCIpLGRlbGV0ZSB0aGlzLm91dHN0YW5kaW5nUHV0c19bdF0sdGhpcy5vdXRzdGFuZGluZ1B1dENvdW50Xy0tKX0wPT09dGhpcy5vdXRzdGFuZGluZ1B1dENvdW50XyYmKHRoaXMub3V0c3RhbmRpbmdQdXRzXz1bXSl9LEN1LnByb3RvdHlwZS5vbkxpc3RlblJldm9rZWRfPWZ1bmN0aW9uKHQsZSl7ZT1lP2UubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBhcyh0KX0pLmpvaW4oXCIkXCIpOlwiZGVmYXVsdFwiLGU9dGhpcy5yZW1vdmVMaXN0ZW5fKHQsZSk7ZSYmZS5vbkNvbXBsZXRlJiZlLm9uQ29tcGxldGUoXCJwZXJtaXNzaW9uX2RlbmllZFwiKX0sQ3UucHJvdG90eXBlLnJlbW92ZUxpc3Rlbl89ZnVuY3Rpb24odCxlKXt2YXIgbixyPW5ldyBldSh0KS50b1N0cmluZygpO3JldHVybiB0aGlzLmxpc3RlbnMuaGFzKHIpPyhuPSh0PXRoaXMubGlzdGVucy5nZXQocikpLmdldChlKSx0LmRlbGV0ZShlKSwwPT09dC5zaXplJiZ0aGlzLmxpc3RlbnMuZGVsZXRlKHIpKTpuPXZvaWQgMCxufSxDdS5wcm90b3R5cGUub25BdXRoUmV2b2tlZF89ZnVuY3Rpb24odCxlKXtaYShcIkF1dGggdG9rZW4gcmV2b2tlZDogXCIrdCtcIi9cIitlKSx0aGlzLmF1dGhUb2tlbl89bnVsbCx0aGlzLmZvcmNlVG9rZW5SZWZyZXNoXz0hMCx0aGlzLnJlYWx0aW1lXy5jbG9zZSgpLFwiaW52YWxpZF90b2tlblwiIT09dCYmXCJwZXJtaXNzaW9uX2RlbmllZFwiIT09dHx8KHRoaXMuaW52YWxpZEF1dGhUb2tlbkNvdW50XysrLDM8PXRoaXMuaW52YWxpZEF1dGhUb2tlbkNvdW50XyYmKHRoaXMucmVjb25uZWN0RGVsYXlfPTNlNCx0aGlzLmF1dGhUb2tlblByb3ZpZGVyXy5ub3RpZnlGb3JJbnZhbGlkVG9rZW4oKSkpfSxDdS5wcm90b3R5cGUub25BcHBDaGVja1Jldm9rZWRfPWZ1bmN0aW9uKHQsZSl7WmEoXCJBcHAgY2hlY2sgdG9rZW4gcmV2b2tlZDogXCIrdCtcIi9cIitlKSx0aGlzLmFwcENoZWNrVG9rZW5fPW51bGwsdGhpcy5mb3JjZVRva2VuUmVmcmVzaF89ITAsXCJpbnZhbGlkX3Rva2VuXCIhPT10JiZcInBlcm1pc3Npb25fZGVuaWVkXCIhPT10fHwodGhpcy5pbnZhbGlkQXBwQ2hlY2tUb2tlbkNvdW50XysrLDM8PXRoaXMuaW52YWxpZEFwcENoZWNrVG9rZW5Db3VudF8mJnRoaXMuYXBwQ2hlY2tUb2tlblByb3ZpZGVyXy5ub3RpZnlGb3JJbnZhbGlkVG9rZW4oKSl9LEN1LnByb3RvdHlwZS5vblNlY3VyaXR5RGVidWdQYWNrZXRfPWZ1bmN0aW9uKHQpe3RoaXMuc2VjdXJpdHlEZWJ1Z0NhbGxiYWNrXz90aGlzLnNlY3VyaXR5RGVidWdDYWxsYmFja18odCk6XCJtc2dcImluIHQmJmNvbnNvbGUubG9nKFwiRklSRUJBU0U6IFwiK3QubXNnLnJlcGxhY2UoXCJcXG5cIixcIlxcbkZJUkVCQVNFOiBcIikpfSxDdS5wcm90b3R5cGUucmVzdG9yZVN0YXRlXz1mdW5jdGlvbigpe3ZhciBlLHQsbixyO3RoaXMudHJ5QXV0aCgpLHRoaXMudHJ5QXBwQ2hlY2soKTt0cnl7Zm9yKHZhciBpPXRvKHRoaXMubGlzdGVucy52YWx1ZXMoKSksbz1pLm5leHQoKTshby5kb25lO289aS5uZXh0KCkpe3ZhciBhPW8udmFsdWU7dHJ5e2Zvcih2YXIgcz0obj12b2lkIDAsdG8oYS52YWx1ZXMoKSkpLHU9cy5uZXh0KCk7IXUuZG9uZTt1PXMubmV4dCgpKXt2YXIgYz11LnZhbHVlO3RoaXMuc2VuZExpc3Rlbl8oYyl9fWNhdGNoKHQpe249e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e3UmJiF1LmRvbmUmJihyPXMucmV0dXJuKSYmci5jYWxsKHMpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX19fWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJih0PWkucmV0dXJuKSYmdC5jYWxsKGkpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX1mb3IodmFyIGg9MDtoPHRoaXMub3V0c3RhbmRpbmdQdXRzXy5sZW5ndGg7aCsrKXRoaXMub3V0c3RhbmRpbmdQdXRzX1toXSYmdGhpcy5zZW5kUHV0XyhoKTtmb3IoO3RoaXMub25EaXNjb25uZWN0UmVxdWVzdFF1ZXVlXy5sZW5ndGg7KXt2YXIgbD10aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8uc2hpZnQoKTt0aGlzLnNlbmRPbkRpc2Nvbm5lY3RfKGwuYWN0aW9uLGwucGF0aFN0cmluZyxsLmRhdGEsbC5vbkNvbXBsZXRlKX1mb3IoaD0wO2g8dGhpcy5vdXRzdGFuZGluZ0dldHNfLmxlbmd0aDtoKyspdGhpcy5vdXRzdGFuZGluZ0dldHNfW2hdJiZ0aGlzLnNlbmRHZXRfKGgpfSxDdS5wcm90b3R5cGUuc2VuZENvbm5lY3RTdGF0c189ZnVuY3Rpb24oKXt2YXIgdD17fTt0W1wic2RrLmpzLlwiK09hLnJlcGxhY2UoL1xcLi9nLFwiLVwiKV09MSxnbygpP3RbXCJmcmFtZXdvcmsuY29yZG92YVwiXT0xOm1vKCkmJih0W1wiZnJhbWV3b3JrLnJlYWN0bmF0aXZlXCJdPTEpLHRoaXMucmVwb3J0U3RhdHModCl9LEN1LnByb3RvdHlwZS5zaG91bGRSZWNvbm5lY3RfPWZ1bmN0aW9uKCl7dmFyIHQ9SnMuZ2V0SW5zdGFuY2UoKS5jdXJyZW50bHlPbmxpbmUoKTtyZXR1cm4gTG8odGhpcy5pbnRlcnJ1cHRSZWFzb25zXykmJnR9LEN1Lm5leHRQZXJzaXN0ZW50Q29ubmVjdGlvbklkXz0wLEN1Lm5leHRDb25uZWN0aW9uSWRfPTAsQ3UpO2Z1bmN0aW9uIEN1KHQsZSxuLHIsaSxvLGEscyl7dmFyIHU9SXUuY2FsbCh0aGlzKXx8dGhpcztpZih1LnJlcG9JbmZvXz10LHUuYXBwbGljYXRpb25JZF89ZSx1Lm9uRGF0YVVwZGF0ZV89bix1Lm9uQ29ubmVjdFN0YXR1c189cix1Lm9uU2VydmVySW5mb1VwZGF0ZV89aSx1LmF1dGhUb2tlblByb3ZpZGVyXz1vLHUuYXBwQ2hlY2tUb2tlblByb3ZpZGVyXz1hLHUuYXV0aE92ZXJyaWRlXz1zLHUuaWQ9Q3UubmV4dFBlcnNpc3RlbnRDb25uZWN0aW9uSWRfKyssdS5sb2dfPXRzKFwicDpcIit1LmlkK1wiOlwiKSx1LmludGVycnVwdFJlYXNvbnNfPXt9LHUubGlzdGVucz1uZXcgTWFwLHUub3V0c3RhbmRpbmdQdXRzXz1bXSx1Lm91dHN0YW5kaW5nR2V0c189W10sdS5vdXRzdGFuZGluZ1B1dENvdW50Xz0wLHUub3V0c3RhbmRpbmdHZXRDb3VudF89MCx1Lm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV89W10sdS5jb25uZWN0ZWRfPSExLHUucmVjb25uZWN0RGVsYXlfPVR1LHUubWF4UmVjb25uZWN0RGVsYXlfPUV1LHUuc2VjdXJpdHlEZWJ1Z0NhbGxiYWNrXz1udWxsLHUubGFzdFNlc3Npb25JZD1udWxsLHUuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXz1udWxsLHUudmlzaWJsZV89ITEsdS5yZXF1ZXN0Q0JIYXNoXz17fSx1LnJlcXVlc3ROdW1iZXJfPTAsdS5yZWFsdGltZV89bnVsbCx1LmF1dGhUb2tlbl89bnVsbCx1LmFwcENoZWNrVG9rZW5fPW51bGwsdS5mb3JjZVRva2VuUmVmcmVzaF89ITEsdS5pbnZhbGlkQXV0aFRva2VuQ291bnRfPTAsdS5pbnZhbGlkQXBwQ2hlY2tUb2tlbkNvdW50Xz0wLHUuZmlyc3RDb25uZWN0aW9uXz0hMCx1Lmxhc3RDb25uZWN0aW9uQXR0ZW1wdFRpbWVfPW51bGwsdS5sYXN0Q29ubmVjdGlvbkVzdGFibGlzaGVkVGltZV89bnVsbCxzJiYhYm8oKSl0aHJvdyBuZXcgRXJyb3IoXCJBdXRoIG92ZXJyaWRlIHNwZWNpZmllZCBpbiBvcHRpb25zLCBidXQgbm90IHN1cHBvcnRlZCBvbiBub24gTm9kZS5qcyBwbGF0Zm9ybXNcIik7cmV0dXJuIHUuc2NoZWR1bGVDb25uZWN0XygwKSxfdS5nZXRJbnN0YW5jZSgpLm9uKFwidmlzaWJsZVwiLHUub25WaXNpYmxlXyx1KSwtMT09PXQuaG9zdC5pbmRleE9mKFwiZmJsb2NhbFwiKSYmSnMuZ2V0SW5zdGFuY2UoKS5vbihcIm9ubGluZVwiLHUub25PbmxpbmVfLHUpLHV9dmFyIGt1PShOdS5XcmFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBOdSh0LGUpfSxOdSk7ZnVuY3Rpb24gTnUodCxlKXt0aGlzLm5hbWU9dCx0aGlzLm5vZGU9ZX12YXIgQXUsRz0oUnUucHJvdG90eXBlLmdldENvbXBhcmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wYXJlLmJpbmQodGhpcyl9LFJ1LnByb3RvdHlwZS5pbmRleGVkVmFsdWVDaGFuZ2VkPWZ1bmN0aW9uKHQsZSl7dD1uZXcga3UocnMsdCksZT1uZXcga3UocnMsZSk7cmV0dXJuIDAhPT10aGlzLmNvbXBhcmUodCxlKX0sUnUucHJvdG90eXBlLm1pblBvc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ga3UuTUlOfSxSdSk7ZnVuY3Rpb24gUnUoKXt9dmFyIFB1LFNuPShYaShPdSxQdT1HKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoT3UsXCJfX0VNUFRZX05PREVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEF1fSxzZXQ6ZnVuY3Rpb24odCl7QXU9dH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPdS5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbih0LGUpe3JldHVybiBvcyh0Lm5hbWUsZS5uYW1lKX0sT3UucHJvdG90eXBlLmlzRGVmaW5lZE9uPWZ1bmN0aW9uKHQpe3Rocm93IHNvKFwiS2V5SW5kZXguaXNEZWZpbmVkT24gbm90IGV4cGVjdGVkIHRvIGJlIGNhbGxlZC5cIil9LE91LnByb3RvdHlwZS5pbmRleGVkVmFsdWVDaGFuZ2VkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuITF9LE91LnByb3RvdHlwZS5taW5Qb3N0PWZ1bmN0aW9uKCl7cmV0dXJuIGt1Lk1JTn0sT3UucHJvdG90eXBlLm1heFBvc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGt1KGlzLEF1KX0sT3UucHJvdG90eXBlLm1ha2VQb3N0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGFvKFwic3RyaW5nXCI9PXR5cGVvZiB0LFwiS2V5SW5kZXggaW5kZXhWYWx1ZSBtdXN0IGFsd2F5cyBiZSBhIHN0cmluZy5cIiksbmV3IGt1KHQsQXUpfSxPdS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIi5rZXlcIn0sT3UpO2Z1bmN0aW9uIE91KCl7cmV0dXJuIG51bGwhPT1QdSYmUHUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXZhciBEdT1uZXcgU24seHU9KEx1LnByb3RvdHlwZS5nZXROZXh0PWZ1bmN0aW9uKCl7aWYoMD09PXRoaXMubm9kZVN0YWNrXy5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5ub2RlU3RhY2tfLnBvcCgpLGU9dGhpcy5yZXN1bHRHZW5lcmF0b3JfP3RoaXMucmVzdWx0R2VuZXJhdG9yXyh0LmtleSx0LnZhbHVlKTp7a2V5OnQua2V5LHZhbHVlOnQudmFsdWV9O2lmKHRoaXMuaXNSZXZlcnNlXylmb3IodD10LmxlZnQ7IXQuaXNFbXB0eSgpOyl0aGlzLm5vZGVTdGFja18ucHVzaCh0KSx0PXQucmlnaHQ7ZWxzZSBmb3IodD10LnJpZ2h0OyF0LmlzRW1wdHkoKTspdGhpcy5ub2RlU3RhY2tfLnB1c2godCksdD10LmxlZnQ7cmV0dXJuIGV9LEx1LnByb3RvdHlwZS5oYXNOZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIDA8dGhpcy5ub2RlU3RhY2tfLmxlbmd0aH0sTHUucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5ub2RlU3RhY2tfLmxlbmd0aClyZXR1cm4gbnVsbDt2YXIgdD10aGlzLm5vZGVTdGFja19bdGhpcy5ub2RlU3RhY2tfLmxlbmd0aC0xXTtyZXR1cm4gdGhpcy5yZXN1bHRHZW5lcmF0b3JfP3RoaXMucmVzdWx0R2VuZXJhdG9yXyh0LmtleSx0LnZhbHVlKTp7a2V5OnQua2V5LHZhbHVlOnQudmFsdWV9fSxMdSk7ZnVuY3Rpb24gTHUodCxlLG4scixpKXt2b2lkIDA9PT1pJiYoaT1udWxsKSx0aGlzLmlzUmV2ZXJzZV89cix0aGlzLnJlc3VsdEdlbmVyYXRvcl89aSx0aGlzLm5vZGVTdGFja189W107Zm9yKHZhciBvPTE7IXQuaXNFbXB0eSgpOylpZihvPWU/bih0LmtleSxlKToxLHImJihvKj0tMSksbzwwKXQ9dGhpcy5pc1JldmVyc2VfP3QubGVmdDp0LnJpZ2h0O2Vsc2V7aWYoMD09PW8pe3RoaXMubm9kZVN0YWNrXy5wdXNoKHQpO2JyZWFrfXRoaXMubm9kZVN0YWNrXy5wdXNoKHQpLHQ9dGhpcy5pc1JldmVyc2VfP3QucmlnaHQ6dC5sZWZ0fX12YXIgTXU9KEZ1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQsZSxuLHIsaSl7cmV0dXJuIG5ldyBGdShudWxsIT10P3Q6dGhpcy5rZXksbnVsbCE9ZT9lOnRoaXMudmFsdWUsbnVsbCE9bj9uOnRoaXMuY29sb3IsbnVsbCE9cj9yOnRoaXMubGVmdCxudWxsIT1pP2k6dGhpcy5yaWdodCl9LEZ1LnByb3RvdHlwZS5jb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlZnQuY291bnQoKSsxK3RoaXMucmlnaHQuY291bnQoKX0sRnUucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sRnUucHJvdG90eXBlLmlub3JkZXJUcmF2ZXJzYWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKHQpfHwhIXQodGhpcy5rZXksdGhpcy52YWx1ZSl8fHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbCh0KX0sRnUucHJvdG90eXBlLnJldmVyc2VUcmF2ZXJzYWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbCh0KXx8dCh0aGlzLmtleSx0aGlzLnZhbHVlKXx8dGhpcy5sZWZ0LnJldmVyc2VUcmF2ZXJzYWwodCl9LEZ1LnByb3RvdHlwZS5taW5fPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVmdC5pc0VtcHR5KCk/dGhpczp0aGlzLmxlZnQubWluXygpfSxGdS5wcm90b3R5cGUubWluS2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluXygpLmtleX0sRnUucHJvdG90eXBlLm1heEtleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0LmlzRW1wdHkoKT90aGlzLmtleTp0aGlzLnJpZ2h0Lm1heEtleSgpfSxGdS5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLGk9bih0LHIua2V5KTtyZXR1cm4ocj1pPDA/ci5jb3B5KG51bGwsbnVsbCxudWxsLHIubGVmdC5pbnNlcnQodCxlLG4pLG51bGwpOjA9PT1pP3IuY29weShudWxsLGUsbnVsbCxudWxsLG51bGwpOnIuY29weShudWxsLG51bGwsbnVsbCxudWxsLHIucmlnaHQuaW5zZXJ0KHQsZSxuKSkpLmZpeFVwXygpfSxGdS5wcm90b3R5cGUucmVtb3ZlTWluXz1mdW5jdGlvbigpe2lmKHRoaXMubGVmdC5pc0VtcHR5KCkpcmV0dXJuIHF1LkVNUFRZX05PREU7dmFyIHQ9dGhpcztyZXR1cm4odD0odD0hdC5sZWZ0LmlzUmVkXygpJiYhdC5sZWZ0LmxlZnQuaXNSZWRfKCk/dC5tb3ZlUmVkTGVmdF8oKTp0KS5jb3B5KG51bGwsbnVsbCxudWxsLHQubGVmdC5yZW1vdmVNaW5fKCksbnVsbCkpLmZpeFVwXygpfSxGdS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scj10aGlzO2lmKGUodCxyLmtleSk8MClyPShyPSEoci5sZWZ0LmlzRW1wdHkoKXx8ci5sZWZ0LmlzUmVkXygpfHxyLmxlZnQubGVmdC5pc1JlZF8oKSk/ci5tb3ZlUmVkTGVmdF8oKTpyKS5jb3B5KG51bGwsbnVsbCxudWxsLHIubGVmdC5yZW1vdmUodCxlKSxudWxsKTtlbHNle2lmKDA9PT1lKHQsKHI9ISgocj1yLmxlZnQuaXNSZWRfKCk/ci5yb3RhdGVSaWdodF8oKTpyKS5yaWdodC5pc0VtcHR5KCl8fHIucmlnaHQuaXNSZWRfKCl8fHIucmlnaHQubGVmdC5pc1JlZF8oKSk/ci5tb3ZlUmVkUmlnaHRfKCk6cikua2V5KSl7aWYoci5yaWdodC5pc0VtcHR5KCkpcmV0dXJuIHF1LkVNUFRZX05PREU7bj1yLnJpZ2h0Lm1pbl8oKSxyPXIuY29weShuLmtleSxuLnZhbHVlLG51bGwsbnVsbCxyLnJpZ2h0LnJlbW92ZU1pbl8oKSl9cj1yLmNvcHkobnVsbCxudWxsLG51bGwsbnVsbCxyLnJpZ2h0LnJlbW92ZSh0LGUpKX1yZXR1cm4gci5maXhVcF8oKX0sRnUucHJvdG90eXBlLmlzUmVkXz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbG9yfSxGdS5wcm90b3R5cGUuZml4VXBfPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdD0odD0odD10LnJpZ2h0LmlzUmVkXygpJiYhdC5sZWZ0LmlzUmVkXygpP3Qucm90YXRlTGVmdF8oKTp0KS5sZWZ0LmlzUmVkXygpJiZ0LmxlZnQubGVmdC5pc1JlZF8oKT90LnJvdGF0ZVJpZ2h0XygpOnQpLmxlZnQuaXNSZWRfKCkmJnQucmlnaHQuaXNSZWRfKCk/dC5jb2xvckZsaXBfKCk6dH0sRnUucHJvdG90eXBlLm1vdmVSZWRMZWZ0Xz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29sb3JGbGlwXygpO3JldHVybiB0PXQucmlnaHQubGVmdC5pc1JlZF8oKT8odD0odD10LmNvcHkobnVsbCxudWxsLG51bGwsbnVsbCx0LnJpZ2h0LnJvdGF0ZVJpZ2h0XygpKSkucm90YXRlTGVmdF8oKSkuY29sb3JGbGlwXygpOnR9LEZ1LnByb3RvdHlwZS5tb3ZlUmVkUmlnaHRfPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb2xvckZsaXBfKCk7cmV0dXJuIHQ9dC5sZWZ0LmxlZnQuaXNSZWRfKCk/KHQ9dC5yb3RhdGVSaWdodF8oKSkuY29sb3JGbGlwXygpOnR9LEZ1LnByb3RvdHlwZS5yb3RhdGVMZWZ0Xz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29weShudWxsLG51bGwsRnUuUkVELG51bGwsdGhpcy5yaWdodC5sZWZ0KTtyZXR1cm4gdGhpcy5yaWdodC5jb3B5KG51bGwsbnVsbCx0aGlzLmNvbG9yLHQsbnVsbCl9LEZ1LnByb3RvdHlwZS5yb3RhdGVSaWdodF89ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvcHkobnVsbCxudWxsLEZ1LlJFRCx0aGlzLmxlZnQucmlnaHQsbnVsbCk7cmV0dXJuIHRoaXMubGVmdC5jb3B5KG51bGwsbnVsbCx0aGlzLmNvbG9yLG51bGwsdCl9LEZ1LnByb3RvdHlwZS5jb2xvckZsaXBfPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5sZWZ0LmNvcHkobnVsbCxudWxsLCF0aGlzLmxlZnQuY29sb3IsbnVsbCxudWxsKSxlPXRoaXMucmlnaHQuY29weShudWxsLG51bGwsIXRoaXMucmlnaHQuY29sb3IsbnVsbCxudWxsKTtyZXR1cm4gdGhpcy5jb3B5KG51bGwsbnVsbCwhdGhpcy5jb2xvcix0LGUpfSxGdS5wcm90b3R5cGUuY2hlY2tNYXhEZXB0aF89ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNoZWNrXygpO3JldHVybiBNYXRoLnBvdygyLHQpPD10aGlzLmNvdW50KCkrMX0sRnUucHJvdG90eXBlLmNoZWNrXz1mdW5jdGlvbigpe2lmKHRoaXMuaXNSZWRfKCkmJnRoaXMubGVmdC5pc1JlZF8oKSl0aHJvdyBuZXcgRXJyb3IoXCJSZWQgbm9kZSBoYXMgcmVkIGNoaWxkKFwiK3RoaXMua2V5K1wiLFwiK3RoaXMudmFsdWUrXCIpXCIpO2lmKHRoaXMucmlnaHQuaXNSZWRfKCkpdGhyb3cgbmV3IEVycm9yKFwiUmlnaHQgY2hpbGQgb2YgKFwiK3RoaXMua2V5K1wiLFwiK3RoaXMudmFsdWUrXCIpIGlzIHJlZFwiKTt2YXIgdD10aGlzLmxlZnQuY2hlY2tfKCk7aWYodCE9PXRoaXMucmlnaHQuY2hlY2tfKCkpdGhyb3cgbmV3IEVycm9yKFwiQmxhY2sgZGVwdGhzIGRpZmZlclwiKTtyZXR1cm4gdCsodGhpcy5pc1JlZF8oKT8wOjEpfSxGdS5SRUQ9ITAsRnUuQkxBQ0s9ITEsRnUpO2Z1bmN0aW9uIEZ1KHQsZSxuLHIsaSl7dGhpcy5rZXk9dCx0aGlzLnZhbHVlPWUsdGhpcy5jb2xvcj1udWxsIT1uP246RnUuUkVELHRoaXMubGVmdD1udWxsIT1yP3I6cXUuRU1QVFlfTk9ERSx0aGlzLnJpZ2h0PW51bGwhPWk/aTpxdS5FTVBUWV9OT0RFfVV1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQsZSxuLHIsaSl7cmV0dXJuIHRoaXN9LFV1LnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgTXUodCxlLG51bGwpfSxVdS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXN9LFV1LnByb3RvdHlwZS5jb3VudD1mdW5jdGlvbigpe3JldHVybiAwfSxVdS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiEwfSxVdS5wcm90b3R5cGUuaW5vcmRlclRyYXZlcnNhbD1mdW5jdGlvbih0KXtyZXR1cm4hMX0sVXUucHJvdG90eXBlLnJldmVyc2VUcmF2ZXJzYWw9ZnVuY3Rpb24odCl7cmV0dXJuITF9LFV1LnByb3RvdHlwZS5taW5LZXk9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sVXUucHJvdG90eXBlLm1heEtleT1mdW5jdGlvbigpe3JldHVybiBudWxsfSxVdS5wcm90b3R5cGUuY2hlY2tfPWZ1bmN0aW9uKCl7cmV0dXJuIDB9LFV1LnByb3RvdHlwZS5pc1JlZF89ZnVuY3Rpb24oKXtyZXR1cm4hMX0sUXM9VXU7ZnVuY3Rpb24gVXUoKXt9dmFyIGp1LHF1PShWdS5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBWdSh0aGlzLmNvbXBhcmF0b3JfLHRoaXMucm9vdF8uaW5zZXJ0KHQsZSx0aGlzLmNvbXBhcmF0b3JfKS5jb3B5KG51bGwsbnVsbCxNdS5CTEFDSyxudWxsLG51bGwpKX0sVnUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFZ1KHRoaXMuY29tcGFyYXRvcl8sdGhpcy5yb290Xy5yZW1vdmUodCx0aGlzLmNvbXBhcmF0b3JfKS5jb3B5KG51bGwsbnVsbCxNdS5CTEFDSyxudWxsLG51bGwpKX0sVnUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10aGlzLnJvb3RfOyFuLmlzRW1wdHkoKTspe2lmKDA9PT0oZT10aGlzLmNvbXBhcmF0b3JfKHQsbi5rZXkpKSlyZXR1cm4gbi52YWx1ZTtlPDA/bj1uLmxlZnQ6MDxlJiYobj1uLnJpZ2h0KX1yZXR1cm4gbnVsbH0sVnUucHJvdG90eXBlLmdldFByZWRlY2Vzc29yS2V5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXRoaXMucm9vdF8scj1udWxsOyFuLmlzRW1wdHkoKTspe2lmKDA9PT0oZT10aGlzLmNvbXBhcmF0b3JfKHQsbi5rZXkpKSl7aWYobi5sZWZ0LmlzRW1wdHkoKSlyZXR1cm4gcj9yLmtleTpudWxsO2ZvcihuPW4ubGVmdDshbi5yaWdodC5pc0VtcHR5KCk7KW49bi5yaWdodDtyZXR1cm4gbi5rZXl9ZTwwP249bi5sZWZ0OjA8ZSYmKG49KHI9bikucmlnaHQpfXRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBmaW5kIHByZWRlY2Vzc29yIGtleSBmb3IgYSBub25leGlzdGVudCBrZXkuICBXaGF0IGdpdmVzP1wiKX0sVnUucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290Xy5pc0VtcHR5KCl9LFZ1LnByb3RvdHlwZS5jb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3RfLmNvdW50KCl9LFZ1LnByb3RvdHlwZS5taW5LZXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290Xy5taW5LZXkoKX0sVnUucHJvdG90eXBlLm1heEtleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3RfLm1heEtleSgpfSxWdS5wcm90b3R5cGUuaW5vcmRlclRyYXZlcnNhbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yb290Xy5pbm9yZGVyVHJhdmVyc2FsKHQpfSxWdS5wcm90b3R5cGUucmV2ZXJzZVRyYXZlcnNhbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yb290Xy5yZXZlcnNlVHJhdmVyc2FsKHQpfSxWdS5wcm90b3R5cGUuZ2V0SXRlcmF0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB4dSh0aGlzLnJvb3RfLG51bGwsdGhpcy5jb21wYXJhdG9yXywhMSx0KX0sVnUucHJvdG90eXBlLmdldEl0ZXJhdG9yRnJvbT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgeHUodGhpcy5yb290Xyx0LHRoaXMuY29tcGFyYXRvcl8sITEsZSl9LFZ1LnByb3RvdHlwZS5nZXRSZXZlcnNlSXRlcmF0b3JGcm9tPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyB4dSh0aGlzLnJvb3RfLHQsdGhpcy5jb21wYXJhdG9yXywhMCxlKX0sVnUucHJvdG90eXBlLmdldFJldmVyc2VJdGVyYXRvcj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHh1KHRoaXMucm9vdF8sbnVsbCx0aGlzLmNvbXBhcmF0b3JfLCEwLHQpfSxWdS5FTVBUWV9OT0RFPW5ldyBRcyxWdSk7ZnVuY3Rpb24gVnUodCxlKXt2b2lkIDA9PT1lJiYoZT1WdS5FTVBUWV9OT0RFKSx0aGlzLmNvbXBhcmF0b3JfPXQsdGhpcy5yb290Xz1lfWZ1bmN0aW9uIEJ1KHQsZSl7cmV0dXJuIG9zKHQubmFtZSxlLm5hbWUpfWZ1bmN0aW9uIEt1KHQsZSl7cmV0dXJuIG9zKHQsZSl9ZnVuY3Rpb24gV3UodCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/XCJudW1iZXI6XCIrdXModCk6XCJzdHJpbmc6XCIrdH12YXIgSHUsR3UsenUsUXUsWXU9ZnVuY3Rpb24odCl7dmFyIGU7dC5pc0xlYWZOb2RlKCk/KGU9dC52YWwoKSxhbyhcInN0cmluZ1wiPT10eXBlb2YgZXx8XCJudW1iZXJcIj09dHlwZW9mIGV8fFwib2JqZWN0XCI9PXR5cGVvZiBlJiZEbyhlLFwiLnN2XCIpLFwiUHJpb3JpdHkgbXVzdCBiZSBhIHN0cmluZyBvciBudW1iZXIuXCIpKTphbyh0PT09anV8fHQuaXNFbXB0eSgpLFwicHJpb3JpdHkgb2YgdW5leHBlY3RlZCB0eXBlLlwiKSxhbyh0PT09anV8fHQuZ2V0UHJpb3JpdHkoKS5pc0VtcHR5KCksXCJQcmlvcml0eSBub2RlcyBjYW4ndCBoYXZlIGEgcHJpb3JpdHkgb2YgdGhlaXIgb3duLlwiKX0sWHU9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShKdSxcIl9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEh1fSxzZXQ6ZnVuY3Rpb24odCl7SHU9dH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxKdS5wcm90b3R5cGUuaXNMZWFmTm9kZT1mdW5jdGlvbigpe3JldHVybiEwfSxKdS5wcm90b3R5cGUuZ2V0UHJpb3JpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmlvcml0eU5vZGVffSxKdS5wcm90b3R5cGUudXBkYXRlUHJpb3JpdHk9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBKdSh0aGlzLnZhbHVlXyx0KX0sSnUucHJvdG90eXBlLmdldEltbWVkaWF0ZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVyblwiLnByaW9yaXR5XCI9PT10P3RoaXMucHJpb3JpdHlOb2RlXzpKdS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yLkVNUFRZX05PREV9LEp1LnByb3RvdHlwZS5nZXRDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gbHUodCk/dGhpczpcIi5wcmlvcml0eVwiPT09aXUodCk/dGhpcy5wcmlvcml0eU5vZGVfOkp1Ll9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IuRU1QVFlfTk9ERX0sSnUucHJvdG90eXBlLmhhc0NoaWxkPWZ1bmN0aW9uKCl7cmV0dXJuITF9LEp1LnByb3RvdHlwZS5nZXRQcmVkZWNlc3NvckNoaWxkTmFtZT1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsfSxKdS5wcm90b3R5cGUudXBkYXRlSW1tZWRpYXRlQ2hpbGQ9ZnVuY3Rpb24odCxlKXtyZXR1cm5cIi5wcmlvcml0eVwiPT09dD90aGlzLnVwZGF0ZVByaW9yaXR5KGUpOmUuaXNFbXB0eSgpJiZcIi5wcmlvcml0eVwiIT09dD90aGlzOkp1Ll9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IuRU1QVFlfTk9ERS51cGRhdGVJbW1lZGlhdGVDaGlsZCh0LGUpLnVwZGF0ZVByaW9yaXR5KHRoaXMucHJpb3JpdHlOb2RlXyl9LEp1LnByb3RvdHlwZS51cGRhdGVDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPWl1KHQpO3JldHVybiBudWxsPT09bj9lOmUuaXNFbXB0eSgpJiZcIi5wcmlvcml0eVwiIT09bj90aGlzOihhbyhcIi5wcmlvcml0eVwiIT09bnx8MT09PW91KHQpLFwiLnByaW9yaXR5IG11c3QgYmUgdGhlIGxhc3QgdG9rZW4gaW4gYSBwYXRoXCIpLHRoaXMudXBkYXRlSW1tZWRpYXRlQ2hpbGQobixKdS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yLkVNUFRZX05PREUudXBkYXRlQ2hpbGQoYXUodCksZSkpKX0sSnUucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sSnUucHJvdG90eXBlLm51bUNoaWxkcmVuPWZ1bmN0aW9uKCl7cmV0dXJuIDB9LEp1LnByb3RvdHlwZS5mb3JFYWNoQ2hpbGQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4hMX0sSnUucHJvdG90eXBlLnZhbD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmIXRoaXMuZ2V0UHJpb3JpdHkoKS5pc0VtcHR5KCk/e1wiLnZhbHVlXCI6dGhpcy5nZXRWYWx1ZSgpLFwiLnByaW9yaXR5XCI6dGhpcy5nZXRQcmlvcml0eSgpLnZhbCgpfTp0aGlzLmdldFZhbHVlKCl9LEp1LnByb3RvdHlwZS5oYXNoPWZ1bmN0aW9uKCl7dmFyIHQsZTtyZXR1cm4gbnVsbD09PXRoaXMubGF6eUhhc2hfJiYodD1cIlwiLHRoaXMucHJpb3JpdHlOb2RlXy5pc0VtcHR5KCl8fCh0Kz1cInByaW9yaXR5OlwiK1d1KHRoaXMucHJpb3JpdHlOb2RlXy52YWwoKSkrXCI6XCIpLHQrPShlPXR5cGVvZiB0aGlzLnZhbHVlXykrXCI6XCIsdCs9XCJudW1iZXJcIj09ZT91cyh0aGlzLnZhbHVlXyk6dGhpcy52YWx1ZV8sdGhpcy5sYXp5SGFzaF89VWEodCkpLHRoaXMubGF6eUhhc2hffSxKdS5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV99LEp1LnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1KdS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yLkVNUFRZX05PREU/MTp0IGluc3RhbmNlb2YgSnUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvcj8tMTooYW8odC5pc0xlYWZOb2RlKCksXCJVbmtub3duIG5vZGUgdHlwZVwiKSx0aGlzLmNvbXBhcmVUb0xlYWZOb2RlXyh0KSl9LEp1LnByb3RvdHlwZS5jb21wYXJlVG9MZWFmTm9kZV89ZnVuY3Rpb24odCl7dmFyIGU9dHlwZW9mIHQudmFsdWVfLG49dHlwZW9mIHRoaXMudmFsdWVfLHI9SnUuVkFMVUVfVFlQRV9PUkRFUi5pbmRleE9mKGUpLGk9SnUuVkFMVUVfVFlQRV9PUkRFUi5pbmRleE9mKG4pO3JldHVybiBhbygwPD1yLFwiVW5rbm93biBsZWFmIHR5cGU6IFwiK2UpLGFvKDA8PWksXCJVbmtub3duIGxlYWYgdHlwZTogXCIrbikscj09PWk/XCJvYmplY3RcIj09bj8wOnRoaXMudmFsdWVfPHQudmFsdWVfPy0xOnRoaXMudmFsdWVfPT09dC52YWx1ZV8/MDoxOmktcn0sSnUucHJvdG90eXBlLndpdGhJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxKdS5wcm90b3R5cGUuaXNJbmRleGVkPWZ1bmN0aW9uKCl7cmV0dXJuITB9LEp1LnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT10aGlzfHwhIXQuaXNMZWFmTm9kZSgpJiYodGhpcy52YWx1ZV89PT10LnZhbHVlXyYmdGhpcy5wcmlvcml0eU5vZGVfLmVxdWFscyh0LnByaW9yaXR5Tm9kZV8pKX0sSnUuVkFMVUVfVFlQRV9PUkRFUj1bXCJvYmplY3RcIixcImJvb2xlYW5cIixcIm51bWJlclwiLFwic3RyaW5nXCJdLEp1KTtmdW5jdGlvbiBKdSh0LGUpe3ZvaWQgMD09PWUmJihlPUp1Ll9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IuRU1QVFlfTk9ERSksdGhpcy52YWx1ZV89dCx0aGlzLnByaW9yaXR5Tm9kZV89ZSx0aGlzLmxhenlIYXNoXz1udWxsLGFvKHZvaWQgMCE9PXRoaXMudmFsdWVfJiZudWxsIT09dGhpcy52YWx1ZV8sXCJMZWFmTm9kZSBzaG91bGRuJ3QgYmUgY3JlYXRlZCB3aXRoIG51bGwvdW5kZWZpbmVkIHZhbHVlLlwiKSxZdSh0aGlzLnByaW9yaXR5Tm9kZV8pfWZ1bmN0aW9uICR1KCl7cmV0dXJuIG51bGwhPT1RdSYmUXUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXZhciBadT1uZXcoWGkoJHUsUXU9RyksJHUucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm5vZGUuZ2V0UHJpb3JpdHkoKSxyPWUubm9kZS5nZXRQcmlvcml0eSgpLHI9bi5jb21wYXJlVG8ocik7cmV0dXJuIDA9PT1yP29zKHQubmFtZSxlLm5hbWUpOnJ9LCR1LnByb3RvdHlwZS5pc0RlZmluZWRPbj1mdW5jdGlvbih0KXtyZXR1cm4hdC5nZXRQcmlvcml0eSgpLmlzRW1wdHkoKX0sJHUucHJvdG90eXBlLmluZGV4ZWRWYWx1ZUNoYW5nZWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4hdC5nZXRQcmlvcml0eSgpLmVxdWFscyhlLmdldFByaW9yaXR5KCkpfSwkdS5wcm90b3R5cGUubWluUG9zdD1mdW5jdGlvbigpe3JldHVybiBrdS5NSU59LCR1LnByb3RvdHlwZS5tYXhQb3N0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBrdShpcyxuZXcgWHUoXCJbUFJJT1JJVFktUE9TVF1cIix6dSkpfSwkdS5wcm90b3R5cGUubWFrZVBvc3Q9ZnVuY3Rpb24odCxlKXt0PUd1KHQpO3JldHVybiBuZXcga3UoZSxuZXcgWHUoXCJbUFJJT1JJVFktUE9TVF1cIix0KSl9LCR1LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiLnByaW9yaXR5XCJ9LCR1KSx0Yz1NYXRoLmxvZygyKSxlYz0obmMucHJvdG90eXBlLm5leHRCaXRJc09uZT1mdW5jdGlvbigpe3ZhciB0PSEodGhpcy5iaXRzXyYxPDx0aGlzLmN1cnJlbnRfKTtyZXR1cm4gdGhpcy5jdXJyZW50Xy0tLHR9LG5jKTtmdW5jdGlvbiBuYyh0KXt2YXIgZTt0aGlzLmNvdW50PShlPXQrMSxwYXJzZUludChNYXRoLmxvZyhlKS90YywxMCkpLHRoaXMuY3VycmVudF89dGhpcy5jb3VudC0xO3ZhciBuLHI9KG49dGhpcy5jb3VudCxwYXJzZUludChBcnJheShuKzEpLmpvaW4oXCIxXCIpLDIpKTt0aGlzLmJpdHNfPXQrMSZyfXZhciByYyxpYyxvYz1mdW5jdGlvbihjLHQsaCxlKXtjLnNvcnQodCk7dmFyIGw9ZnVuY3Rpb24odCxlKXt2YXIgbj1lLXQ7aWYoMD09bilyZXR1cm4gbnVsbDtpZigxPT1uKXJldHVybiByPWNbdF0saT1oP2gocik6cixuZXcgTXUoaSxyLm5vZGUsTXUuQkxBQ0ssbnVsbCxudWxsKTt2YXIgbj1wYXJzZUludChuLzIsMTApK3QsdD1sKHQsbiksZT1sKG4rMSxlKSxyPWNbbl0saT1oP2gocik6cjtyZXR1cm4gbmV3IE11KGksci5ub2RlLE11LkJMQUNLLHQsZSl9LG49ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW51bGwsbj1udWxsLGk9Yy5sZW5ndGgscj1mdW5jdGlvbih0LGUpe3ZhciBuPWktdCxyPWk7aS09dDt0PWwoMStuLHIpLHI9Y1tuXSxuPWg/aChyKTpyO28obmV3IE11KG4sci5ub2RlLGUsbnVsbCx0KSl9LG89ZnVuY3Rpb24odCl7ZT1lP2UubGVmdD10Om49dH0sYT0wO2E8dC5jb3VudDsrK2Epe3ZhciBzPXQubmV4dEJpdElzT25lKCksdT1NYXRoLnBvdygyLHQuY291bnQtKGErMSkpO3M/cih1LE11LkJMQUNLKToocih1LE11LkJMQUNLKSxyKHUsTXUuUkVEKSl9cmV0dXJuIG59KG5ldyBlYyhjLmxlbmd0aCkpO3JldHVybiBuZXcgcXUoZXx8dCxuKX0sYWM9e30sc2M9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1YyxcIkRlZmF1bHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGFvKFp1LFwiQ2hpbGRyZW5Ob2RlLnRzIGhhcyBub3QgYmVlbiBsb2FkZWRcIikscmM9cmN8fG5ldyB1Yyh7XCIucHJpb3JpdHlcIjphY30se1wiLnByaW9yaXR5XCI6WnV9KX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx1Yy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXhvKHRoaXMuaW5kZXhlc18sdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gaW5kZXggZGVmaW5lZCBmb3IgXCIrdCk7cmV0dXJuIGUgaW5zdGFuY2VvZiBxdT9lOm51bGx9LHVjLnByb3RvdHlwZS5oYXNJbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gRG8odGhpcy5pbmRleFNldF8sdC50b1N0cmluZygpKX0sdWMucHJvdG90eXBlLmFkZEluZGV4PWZ1bmN0aW9uKHQsZSl7YW8odCE9PUR1LFwiS2V5SW5kZXggYWx3YXlzIGV4aXN0cyBhbmQgaXNuJ3QgbWVhbnQgdG8gYmUgYWRkZWQgdG8gdGhlIEluZGV4TWFwLlwiKTtmb3IodmFyIG49W10scj0hMSxpPWUuZ2V0SXRlcmF0b3Ioa3UuV3JhcCksbz1pLmdldE5leHQoKTtvOylyPXJ8fHQuaXNEZWZpbmVkT24oby5ub2RlKSxuLnB1c2gobyksbz1pLmdldE5leHQoKTt2YXIgYT1yP29jKG4sdC5nZXRDb21wYXJlKCkpOmFjLHM9dC50b1N0cmluZygpLHU9Smkoe30sdGhpcy5pbmRleFNldF8pO3Vbc109dDtlPUppKHt9LHRoaXMuaW5kZXhlc18pO3JldHVybiBlW3NdPWEsbmV3IHVjKGUsdSl9LHVjLnByb3RvdHlwZS5hZGRUb0luZGV4ZXM9ZnVuY3Rpb24oYSxzKXt2YXIgdT10aGlzO3JldHVybiBuZXcgdWMoTW8odGhpcy5pbmRleGVzXyxmdW5jdGlvbih0LGUpe3ZhciBuPXhvKHUuaW5kZXhTZXRfLGUpO2lmKGFvKG4sXCJNaXNzaW5nIGluZGV4IGltcGxlbWVudGF0aW9uIGZvciBcIitlKSx0PT09YWMpe2lmKG4uaXNEZWZpbmVkT24oYS5ub2RlKSl7Zm9yKHZhciByPVtdLGk9cy5nZXRJdGVyYXRvcihrdS5XcmFwKSxvPWkuZ2V0TmV4dCgpO287KW8ubmFtZSE9PWEubmFtZSYmci5wdXNoKG8pLG89aS5nZXROZXh0KCk7cmV0dXJuIHIucHVzaChhKSxvYyhyLG4uZ2V0Q29tcGFyZSgpKX1yZXR1cm4gYWN9bj1zLmdldChhLm5hbWUpO3JldHVybih0PW4/dC5yZW1vdmUobmV3IGt1KGEubmFtZSxuKSk6dCkuaW5zZXJ0KGEsYS5ub2RlKX0pLHRoaXMuaW5kZXhTZXRfKX0sdWMucHJvdG90eXBlLnJlbW92ZUZyb21JbmRleGVzPWZ1bmN0aW9uKG4scil7cmV0dXJuIG5ldyB1YyhNbyh0aGlzLmluZGV4ZXNfLGZ1bmN0aW9uKHQpe2lmKHQ9PT1hYylyZXR1cm4gdDt2YXIgZT1yLmdldChuLm5hbWUpO3JldHVybiBlP3QucmVtb3ZlKG5ldyBrdShuLm5hbWUsZSkpOnR9KSx0aGlzLmluZGV4U2V0Xyl9LHVjKTtmdW5jdGlvbiB1Yyh0LGUpe3RoaXMuaW5kZXhlc189dCx0aGlzLmluZGV4U2V0Xz1lfXZhciBjYyxoYz0oT2JqZWN0LmRlZmluZVByb3BlcnR5KGxjLFwiRU1QVFlfTk9ERVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaWM9aWN8fG5ldyBsYyhuZXcgcXUoS3UpLG51bGwsc2MuRGVmYXVsdCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksbGMucHJvdG90eXBlLmlzTGVhZk5vZGU9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sbGMucHJvdG90eXBlLmdldFByaW9yaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJpb3JpdHlOb2RlX3x8aWN9LGxjLnByb3RvdHlwZS51cGRhdGVQcmlvcml0eT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jaGlsZHJlbl8uaXNFbXB0eSgpP3RoaXM6bmV3IGxjKHRoaXMuY2hpbGRyZW5fLHQsdGhpcy5pbmRleE1hcF8pfSxsYy5wcm90b3R5cGUuZ2V0SW1tZWRpYXRlQ2hpbGQ9ZnVuY3Rpb24odCl7aWYoXCIucHJpb3JpdHlcIj09PXQpcmV0dXJuIHRoaXMuZ2V0UHJpb3JpdHkoKTt0PXRoaXMuY2hpbGRyZW5fLmdldCh0KTtyZXR1cm4gbnVsbD09PXQ/aWM6dH0sbGMucHJvdG90eXBlLmdldENoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPWl1KHQpO3JldHVybiBudWxsPT09ZT90aGlzOnRoaXMuZ2V0SW1tZWRpYXRlQ2hpbGQoZSkuZ2V0Q2hpbGQoYXUodCkpfSxsYy5wcm90b3R5cGUuaGFzQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10aGlzLmNoaWxkcmVuXy5nZXQodCl9LGxjLnByb3RvdHlwZS51cGRhdGVJbW1lZGlhdGVDaGlsZD1mdW5jdGlvbih0LGUpe2lmKGFvKGUsXCJXZSBzaG91bGQgYWx3YXlzIGJlIHBhc3Npbmcgc25hcHNob3Qgbm9kZXNcIiksXCIucHJpb3JpdHlcIj09PXQpcmV0dXJuIHRoaXMudXBkYXRlUHJpb3JpdHkoZSk7dmFyIG49bmV3IGt1KHQsZSkscj12b2lkIDAsaT12b2lkIDAsaT1lLmlzRW1wdHkoKT8ocj10aGlzLmNoaWxkcmVuXy5yZW1vdmUodCksdGhpcy5pbmRleE1hcF8ucmVtb3ZlRnJvbUluZGV4ZXMobix0aGlzLmNoaWxkcmVuXykpOihyPXRoaXMuY2hpbGRyZW5fLmluc2VydCh0LGUpLHRoaXMuaW5kZXhNYXBfLmFkZFRvSW5kZXhlcyhuLHRoaXMuY2hpbGRyZW5fKSksbj1yLmlzRW1wdHkoKT9pYzp0aGlzLnByaW9yaXR5Tm9kZV87cmV0dXJuIG5ldyBsYyhyLG4saSl9LGxjLnByb3RvdHlwZS51cGRhdGVDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPWl1KHQpO2lmKG51bGw9PT1uKXJldHVybiBlO2FvKFwiLnByaW9yaXR5XCIhPT1pdSh0KXx8MT09PW91KHQpLFwiLnByaW9yaXR5IG11c3QgYmUgdGhlIGxhc3QgdG9rZW4gaW4gYSBwYXRoXCIpO2U9dGhpcy5nZXRJbW1lZGlhdGVDaGlsZChuKS51cGRhdGVDaGlsZChhdSh0KSxlKTtyZXR1cm4gdGhpcy51cGRhdGVJbW1lZGlhdGVDaGlsZChuLGUpfSxsYy5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNoaWxkcmVuXy5pc0VtcHR5KCl9LGxjLnByb3RvdHlwZS5udW1DaGlsZHJlbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNoaWxkcmVuXy5jb3VudCgpfSxsYy5wcm90b3R5cGUudmFsPWZ1bmN0aW9uKG4pe2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiBudWxsO3ZhciByPXt9LGk9MCxvPTAsYT0hMDtpZih0aGlzLmZvckVhY2hDaGlsZChadSxmdW5jdGlvbih0LGUpe3JbdF09ZS52YWwobiksaSsrLGEmJmxjLklOVEVHRVJfUkVHRVhQXy50ZXN0KHQpP289TWF0aC5tYXgobyxOdW1iZXIodCkpOmE9ITF9KSwhbiYmYSYmbzwyKmkpe3ZhciB0LGU9W107Zm9yKHQgaW4gcillW3RdPXJbdF07cmV0dXJuIGV9cmV0dXJuIG4mJiF0aGlzLmdldFByaW9yaXR5KCkuaXNFbXB0eSgpJiYocltcIi5wcmlvcml0eVwiXT10aGlzLmdldFByaW9yaXR5KCkudmFsKCkpLHJ9LGxjLnByb3RvdHlwZS5oYXNoPWZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIG51bGw9PT10aGlzLmxhenlIYXNoXyYmKG49XCJcIix0aGlzLmdldFByaW9yaXR5KCkuaXNFbXB0eSgpfHwobis9XCJwcmlvcml0eTpcIitXdSh0aGlzLmdldFByaW9yaXR5KCkudmFsKCkpK1wiOlwiKSx0aGlzLmZvckVhY2hDaGlsZChadSxmdW5jdGlvbih0LGUpe2U9ZS5oYXNoKCk7XCJcIiE9PWUmJihuKz1cIjpcIit0K1wiOlwiK2UpfSksdGhpcy5sYXp5SGFzaF89XCJcIj09PW4/XCJcIjpVYShuKSksdGhpcy5sYXp5SGFzaF99LGxjLnByb3RvdHlwZS5nZXRQcmVkZWNlc3NvckNoaWxkTmFtZT1mdW5jdGlvbih0LGUsbil7bj10aGlzLnJlc29sdmVJbmRleF8obik7aWYobil7ZT1uLmdldFByZWRlY2Vzc29yS2V5KG5ldyBrdSh0LGUpKTtyZXR1cm4gZT9lLm5hbWU6bnVsbH1yZXR1cm4gdGhpcy5jaGlsZHJlbl8uZ2V0UHJlZGVjZXNzb3JLZXkodCl9LGxjLnByb3RvdHlwZS5nZXRGaXJzdENoaWxkTmFtZT1mdW5jdGlvbih0KXt0PXRoaXMucmVzb2x2ZUluZGV4Xyh0KTtpZih0KXt0PXQubWluS2V5KCk7cmV0dXJuIHQmJnQubmFtZX1yZXR1cm4gdGhpcy5jaGlsZHJlbl8ubWluS2V5KCl9LGxjLnByb3RvdHlwZS5nZXRGaXJzdENoaWxkPWZ1bmN0aW9uKHQpe3Q9dGhpcy5nZXRGaXJzdENoaWxkTmFtZSh0KTtyZXR1cm4gdD9uZXcga3UodCx0aGlzLmNoaWxkcmVuXy5nZXQodCkpOm51bGx9LGxjLnByb3RvdHlwZS5nZXRMYXN0Q2hpbGROYW1lPWZ1bmN0aW9uKHQpe3Q9dGhpcy5yZXNvbHZlSW5kZXhfKHQpO2lmKHQpe3Q9dC5tYXhLZXkoKTtyZXR1cm4gdCYmdC5uYW1lfXJldHVybiB0aGlzLmNoaWxkcmVuXy5tYXhLZXkoKX0sbGMucHJvdG90eXBlLmdldExhc3RDaGlsZD1mdW5jdGlvbih0KXt0PXRoaXMuZ2V0TGFzdENoaWxkTmFtZSh0KTtyZXR1cm4gdD9uZXcga3UodCx0aGlzLmNoaWxkcmVuXy5nZXQodCkpOm51bGx9LGxjLnByb3RvdHlwZS5mb3JFYWNoQ2hpbGQ9ZnVuY3Rpb24odCxlKXt0PXRoaXMucmVzb2x2ZUluZGV4Xyh0KTtyZXR1cm4gdD90Lmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24odCl7cmV0dXJuIGUodC5uYW1lLHQubm9kZSl9KTp0aGlzLmNoaWxkcmVuXy5pbm9yZGVyVHJhdmVyc2FsKGUpfSxsYy5wcm90b3R5cGUuZ2V0SXRlcmF0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0SXRlcmF0b3JGcm9tKHQubWluUG9zdCgpLHQpfSxsYy5wcm90b3R5cGUuZ2V0SXRlcmF0b3JGcm9tPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5yZXNvbHZlSW5kZXhfKGUpO2lmKG4pcmV0dXJuIG4uZ2V0SXRlcmF0b3JGcm9tKHQsZnVuY3Rpb24odCl7cmV0dXJuIHR9KTtmb3IodmFyIHI9dGhpcy5jaGlsZHJlbl8uZ2V0SXRlcmF0b3JGcm9tKHQubmFtZSxrdS5XcmFwKSxpPXIucGVlaygpO251bGwhPWkmJmUuY29tcGFyZShpLHQpPDA7KXIuZ2V0TmV4dCgpLGk9ci5wZWVrKCk7cmV0dXJuIHJ9LGxjLnByb3RvdHlwZS5nZXRSZXZlcnNlSXRlcmF0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSh0Lm1heFBvc3QoKSx0KX0sbGMucHJvdG90eXBlLmdldFJldmVyc2VJdGVyYXRvckZyb209ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnJlc29sdmVJbmRleF8oZSk7aWYobilyZXR1cm4gbi5nZXRSZXZlcnNlSXRlcmF0b3JGcm9tKHQsZnVuY3Rpb24odCl7cmV0dXJuIHR9KTtmb3IodmFyIHI9dGhpcy5jaGlsZHJlbl8uZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSh0Lm5hbWUsa3UuV3JhcCksaT1yLnBlZWsoKTtudWxsIT1pJiYwPGUuY29tcGFyZShpLHQpOylyLmdldE5leHQoKSxpPXIucGVlaygpO3JldHVybiByfSxsYy5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzRW1wdHkoKT90LmlzRW1wdHkoKT8wOi0xOnQuaXNMZWFmTm9kZSgpfHx0LmlzRW1wdHkoKT8xOnQ9PT1wYz8tMTowfSxsYy5wcm90b3R5cGUud2l0aEluZGV4PWZ1bmN0aW9uKHQpe2lmKHQ9PT1EdXx8dGhpcy5pbmRleE1hcF8uaGFzSW5kZXgodCkpcmV0dXJuIHRoaXM7dD10aGlzLmluZGV4TWFwXy5hZGRJbmRleCh0LHRoaXMuY2hpbGRyZW5fKTtyZXR1cm4gbmV3IGxjKHRoaXMuY2hpbGRyZW5fLHRoaXMucHJpb3JpdHlOb2RlXyx0KX0sbGMucHJvdG90eXBlLmlzSW5kZXhlZD1mdW5jdGlvbih0KXtyZXR1cm4gdD09PUR1fHx0aGlzLmluZGV4TWFwXy5oYXNJbmRleCh0KX0sbGMucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0KXtpZih0PT09dGhpcylyZXR1cm4hMDtpZih0LmlzTGVhZk5vZGUoKSlyZXR1cm4hMTtpZih0aGlzLmdldFByaW9yaXR5KCkuZXF1YWxzKHQuZ2V0UHJpb3JpdHkoKSkpe2lmKHRoaXMuY2hpbGRyZW5fLmNvdW50KCkhPT10LmNoaWxkcmVuXy5jb3VudCgpKXJldHVybiExO2Zvcih2YXIgZT10aGlzLmdldEl0ZXJhdG9yKFp1KSxuPXQuZ2V0SXRlcmF0b3IoWnUpLHI9ZS5nZXROZXh0KCksaT1uLmdldE5leHQoKTtyJiZpOyl7aWYoci5uYW1lIT09aS5uYW1lfHwhci5ub2RlLmVxdWFscyhpLm5vZGUpKXJldHVybiExO3I9ZS5nZXROZXh0KCksaT1uLmdldE5leHQoKX1yZXR1cm4gbnVsbD09PXImJm51bGw9PT1pfXJldHVybiExfSxsYy5wcm90b3R5cGUucmVzb2x2ZUluZGV4Xz1mdW5jdGlvbih0KXtyZXR1cm4gdD09PUR1P251bGw6dGhpcy5pbmRleE1hcF8uZ2V0KHQudG9TdHJpbmcoKSl9LGxjLklOVEVHRVJfUkVHRVhQXz0vXigwfFsxLTldXFxkKikkLyxsYyk7ZnVuY3Rpb24gbGModCxlLG4pe3RoaXMuY2hpbGRyZW5fPXQsdGhpcy5wcmlvcml0eU5vZGVfPWUsdGhpcy5pbmRleE1hcF89bix0aGlzLmxhenlIYXNoXz1udWxsLHRoaXMucHJpb3JpdHlOb2RlXyYmWXUodGhpcy5wcmlvcml0eU5vZGVfKSx0aGlzLmNoaWxkcmVuXy5pc0VtcHR5KCkmJmFvKCF0aGlzLnByaW9yaXR5Tm9kZV98fHRoaXMucHJpb3JpdHlOb2RlXy5pc0VtcHR5KCksXCJBbiBlbXB0eSBub2RlIGNhbm5vdCBoYXZlIGEgcHJpb3JpdHlcIil9ZnVuY3Rpb24gZmMoKXtyZXR1cm4gY2MuY2FsbCh0aGlzLG5ldyBxdShLdSksaGMuRU1QVFlfTk9ERSxzYy5EZWZhdWx0KXx8dGhpc312YXIgcGM9bmV3KFhpKGZjLGNjPWhjKSxmYy5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09dGhpcz8wOjF9LGZjLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT10aGlzfSxmYy5wcm90b3R5cGUuZ2V0UHJpb3JpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZmMucHJvdG90eXBlLmdldEltbWVkaWF0ZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiBoYy5FTVBUWV9OT0RFfSxmYy5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiExfSxmYyk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoa3Use01JTjp7dmFsdWU6bmV3IGt1KHJzLGhjLkVNUFRZX05PREUpfSxNQVg6e3ZhbHVlOm5ldyBrdShpcyxwYyl9fSksU24uX19FTVBUWV9OT0RFPWhjLkVNUFRZX05PREUsWHUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvcj1oYyxqdT1wYyx6dT1wYzt2YXIgZGM9ITA7ZnVuY3Rpb24gdmMobix0KXtpZih2b2lkIDA9PT10JiYodD1udWxsKSxudWxsPT09bilyZXR1cm4gaGMuRU1QVFlfTk9ERTtpZihcIm9iamVjdFwiPT10eXBlb2YgbiYmXCIucHJpb3JpdHlcImluIG4mJih0PW5bXCIucHJpb3JpdHlcIl0pLGFvKG51bGw9PT10fHxcInN0cmluZ1wiPT10eXBlb2YgdHx8XCJudW1iZXJcIj09dHlwZW9mIHR8fFwib2JqZWN0XCI9PXR5cGVvZiB0JiZcIi5zdlwiaW4gdCxcIkludmFsaWQgcHJpb3JpdHkgdHlwZSBmb3VuZDogXCIrdHlwZW9mIHQpLFwib2JqZWN0XCI9PXR5cGVvZiBuJiZcIi52YWx1ZVwiaW4gbiYmbnVsbCE9PW5bXCIudmFsdWVcIl0mJihuPW5bXCIudmFsdWVcIl0pLFwib2JqZWN0XCIhPXR5cGVvZiBufHxcIi5zdlwiaW4gbilyZXR1cm4gbmV3IFh1KG4sdmModCkpO2lmKG4gaW5zdGFuY2VvZiBBcnJheXx8IWRjKXt2YXIgcj1oYy5FTVBUWV9OT0RFO3JldHVybiBzcyhuLGZ1bmN0aW9uKHQsZSl7RG8obix0KSYmXCIuXCIhPT10LnN1YnN0cmluZygwLDEpJiYoIShlPXZjKGUpKS5pc0xlYWZOb2RlKCkmJmUuaXNFbXB0eSgpfHwocj1yLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKHQsZSkpKX0pLHIudXBkYXRlUHJpb3JpdHkodmModCkpfXZhciBpPVtdLG89ITE7aWYoc3MobixmdW5jdGlvbih0LGUpe1wiLlwiIT09dC5zdWJzdHJpbmcoMCwxKSYmKChlPXZjKGUpKS5pc0VtcHR5KCl8fChvPW98fCFlLmdldFByaW9yaXR5KCkuaXNFbXB0eSgpLGkucHVzaChuZXcga3UodCxlKSkpKX0pLDA9PT1pLmxlbmd0aClyZXR1cm4gaGMuRU1QVFlfTk9ERTt2YXIgZT1vYyhpLEJ1LGZ1bmN0aW9uKHQpe3JldHVybiB0Lm5hbWV9LEt1KTtpZihvKXt2YXIgYT1vYyhpLFp1LmdldENvbXBhcmUoKSk7cmV0dXJuIG5ldyBoYyhlLHZjKHQpLG5ldyBzYyh7XCIucHJpb3JpdHlcIjphfSx7XCIucHJpb3JpdHlcIjpadX0pKX1yZXR1cm4gbmV3IGhjKGUsdmModCksc2MuRGVmYXVsdCl9R3U9dmM7dmFyIGdjLHljLG1jPShYaShiYyxnYz1HKSxiYy5wcm90b3R5cGUuZXh0cmFjdENoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0LmdldENoaWxkKHRoaXMuaW5kZXhQYXRoXyl9LGJjLnByb3RvdHlwZS5pc0RlZmluZWRPbj1mdW5jdGlvbih0KXtyZXR1cm4hdC5nZXRDaGlsZCh0aGlzLmluZGV4UGF0aF8pLmlzRW1wdHkoKX0sYmMucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmV4dHJhY3RDaGlsZCh0Lm5vZGUpLHI9dGhpcy5leHRyYWN0Q2hpbGQoZS5ub2RlKSxyPW4uY29tcGFyZVRvKHIpO3JldHVybiAwPT09cj9vcyh0Lm5hbWUsZS5uYW1lKTpyfSxiYy5wcm90b3R5cGUubWFrZVBvc3Q9ZnVuY3Rpb24odCxlKXt0PXZjKHQpLHQ9aGMuRU1QVFlfTk9ERS51cGRhdGVDaGlsZCh0aGlzLmluZGV4UGF0aF8sdCk7cmV0dXJuIG5ldyBrdShlLHQpfSxiYy5wcm90b3R5cGUubWF4UG9zdD1mdW5jdGlvbigpe3ZhciB0PWhjLkVNUFRZX05PREUudXBkYXRlQ2hpbGQodGhpcy5pbmRleFBhdGhfLHBjKTtyZXR1cm4gbmV3IGt1KGlzLHQpfSxiYy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdXUodGhpcy5pbmRleFBhdGhfLDApLmpvaW4oXCIvXCIpfSxiYyk7ZnVuY3Rpb24gYmModCl7dmFyIGU9Z2MuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5pbmRleFBhdGhfPXQsYW8oIWx1KHQpJiZcIi5wcmlvcml0eVwiIT09aXUodCksXCJDYW4ndCBjcmVhdGUgUGF0aEluZGV4IHdpdGggZW1wdHkgcGF0aCBvciAucHJpb3JpdHkga2V5XCIpLGV9ZnVuY3Rpb24gX2MoKXtyZXR1cm4gbnVsbCE9PXljJiZ5Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9ZnVuY3Rpb24gd2ModCl7aWYodD09PVwiXCIrZnMpcmV0dXJuXCItXCI7dmFyIGU9cHModCk7aWYobnVsbCE9ZSlyZXR1cm5cIlwiKyhlKzEpO2Zvcih2YXIgbj1uZXcgQXJyYXkodC5sZW5ndGgpLHI9MDtyPG4ubGVuZ3RoO3IrKyluW3JdPXQuY2hhckF0KHIpO2lmKG4ubGVuZ3RoPDc4NilyZXR1cm4gbi5wdXNoKFwiLVwiKSxuLmpvaW4oXCJcIik7Zm9yKHZhciBpPW4ubGVuZ3RoLTE7MDw9aSYmXCJ6XCI9PT1uW2ldOylpLS07cmV0dXJuLTE9PT1pP2lzOihlPW5baV0sZT1DYy5jaGFyQXQoQ2MuaW5kZXhPZihlKSsxKSxuW2ldPWUsbi5zbGljZSgwLGkrMSkuam9pbihcIlwiKSl9ZnVuY3Rpb24gSWModCl7aWYodD09PVwiXCIrbHMpcmV0dXJuIHJzO3ZhciBlPXBzKHQpO2lmKG51bGwhPWUpcmV0dXJuXCJcIisoZS0xKTtmb3IodmFyIG49bmV3IEFycmF5KHQubGVuZ3RoKSxyPTA7cjxuLmxlbmd0aDtyKyspbltyXT10LmNoYXJBdChyKTtyZXR1cm5cIi1cIj09PW5bbi5sZW5ndGgtMV0/MT09PW4ubGVuZ3RoP1wiXCIrZnM6KGRlbGV0ZSBuW24ubGVuZ3RoLTFdLG4uam9pbihcIlwiKSk6KG5bbi5sZW5ndGgtMV09Q2MuY2hhckF0KENjLmluZGV4T2YobltuLmxlbmd0aC0xXSktMSksbi5qb2luKFwiXCIpK1wielwiLnJlcGVhdCg3ODYtbi5sZW5ndGgpKX12YXIgVGMsRWMsU2M9bmV3KFhpKF9jLHljPUcpLF9jLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5ub2RlLmNvbXBhcmVUbyhlLm5vZGUpO3JldHVybiAwPT09bj9vcyh0Lm5hbWUsZS5uYW1lKTpufSxfYy5wcm90b3R5cGUuaXNEZWZpbmVkT249ZnVuY3Rpb24odCl7cmV0dXJuITB9LF9jLnByb3RvdHlwZS5pbmRleGVkVmFsdWVDaGFuZ2VkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIXQuZXF1YWxzKGUpfSxfYy5wcm90b3R5cGUubWluUG9zdD1mdW5jdGlvbigpe3JldHVybiBrdS5NSU59LF9jLnByb3RvdHlwZS5tYXhQb3N0PWZ1bmN0aW9uKCl7cmV0dXJuIGt1Lk1BWH0sX2MucHJvdG90eXBlLm1ha2VQb3N0PWZ1bmN0aW9uKHQsZSl7dD12Yyh0KTtyZXR1cm4gbmV3IGt1KGUsdCl9LF9jLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiLnZhbHVlXCJ9LF9jKSxDYz1cIi0wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpfYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIixrYz0oVGM9MCxFYz1bXSxmdW5jdGlvbih0KXt2YXIgZT10PT09VGM7VGM9dDtmb3IodmFyIG49bmV3IEFycmF5KDgpLHI9NzswPD1yO3ItLSluW3JdPUNjLmNoYXJBdCh0JTY0KSx0PU1hdGguZmxvb3IodC82NCk7YW8oMD09PXQsXCJDYW5ub3QgcHVzaCBhdCB0aW1lID09IDBcIik7dmFyIGk9bi5qb2luKFwiXCIpO2lmKGUpe2ZvcihyPTExOzA8PXImJjYzPT09RWNbcl07ci0tKUVjW3JdPTA7RWNbcl0rK31lbHNlIGZvcihyPTA7cjwxMjtyKyspRWNbcl09TWF0aC5mbG9vcig2NCpNYXRoLnJhbmRvbSgpKTtmb3Iocj0wO3I8MTI7cisrKWkrPUNjLmNoYXJBdChFY1tyXSk7cmV0dXJuIGFvKDIwPT09aS5sZW5ndGgsXCJuZXh0UHVzaElkOiBMZW5ndGggc2hvdWxkIGJlIDIwLlwiKSxpfSk7ZnVuY3Rpb24gTmModCl7cmV0dXJue3R5cGU6XCJ2YWx1ZVwiLHNuYXBzaG90Tm9kZTp0fX1mdW5jdGlvbiBBYyh0LGUpe3JldHVybnt0eXBlOlwiY2hpbGRfYWRkZWRcIixzbmFwc2hvdE5vZGU6ZSxjaGlsZE5hbWU6dH19ZnVuY3Rpb24gUmModCxlKXtyZXR1cm57dHlwZTpcImNoaWxkX3JlbW92ZWRcIixzbmFwc2hvdE5vZGU6ZSxjaGlsZE5hbWU6dH19ZnVuY3Rpb24gUGModCxlLG4pe3JldHVybnt0eXBlOlwiY2hpbGRfY2hhbmdlZFwiLHNuYXBzaG90Tm9kZTplLGNoaWxkTmFtZTp0LG9sZFNuYXA6bn19dmFyIE9jPShEYy5wcm90b3R5cGUudXBkYXRlQ2hpbGQ9ZnVuY3Rpb24odCxlLG4scixpLG8pe2FvKHQuaXNJbmRleGVkKHRoaXMuaW5kZXhfKSxcIkEgbm9kZSBtdXN0IGJlIGluZGV4ZWQgaWYgb25seSBhIGNoaWxkIGlzIHVwZGF0ZWRcIik7dmFyIGE9dC5nZXRJbW1lZGlhdGVDaGlsZChlKTtyZXR1cm4gYS5nZXRDaGlsZChyKS5lcXVhbHMobi5nZXRDaGlsZChyKSkmJmEuaXNFbXB0eSgpPT09bi5pc0VtcHR5KCk/dDoobnVsbCE9byYmKG4uaXNFbXB0eSgpP3QuaGFzQ2hpbGQoZSk/by50cmFja0NoaWxkQ2hhbmdlKFJjKGUsYSkpOmFvKHQuaXNMZWFmTm9kZSgpLFwiQSBjaGlsZCByZW1vdmUgd2l0aG91dCBhbiBvbGQgY2hpbGQgb25seSBtYWtlcyBzZW5zZSBvbiBhIGxlYWYgbm9kZVwiKTphLmlzRW1wdHkoKT9vLnRyYWNrQ2hpbGRDaGFuZ2UoQWMoZSxuKSk6by50cmFja0NoaWxkQ2hhbmdlKFBjKGUsbixhKSkpLHQuaXNMZWFmTm9kZSgpJiZuLmlzRW1wdHkoKT90OnQudXBkYXRlSW1tZWRpYXRlQ2hpbGQoZSxuKS53aXRoSW5kZXgodGhpcy5pbmRleF8pKX0sRGMucHJvdG90eXBlLnVwZGF0ZUZ1bGxOb2RlPWZ1bmN0aW9uKHIsbixpKXtyZXR1cm4gbnVsbCE9aSYmKHIuaXNMZWFmTm9kZSgpfHxyLmZvckVhY2hDaGlsZChadSxmdW5jdGlvbih0LGUpe24uaGFzQ2hpbGQodCl8fGkudHJhY2tDaGlsZENoYW5nZShSYyh0LGUpKX0pLG4uaXNMZWFmTm9kZSgpfHxuLmZvckVhY2hDaGlsZChadSxmdW5jdGlvbih0LGUpe3ZhciBuO3IuaGFzQ2hpbGQodCk/KG49ci5nZXRJbW1lZGlhdGVDaGlsZCh0KSkuZXF1YWxzKGUpfHxpLnRyYWNrQ2hpbGRDaGFuZ2UoUGModCxlLG4pKTppLnRyYWNrQ2hpbGRDaGFuZ2UoQWModCxlKSl9KSksbi53aXRoSW5kZXgodGhpcy5pbmRleF8pfSxEYy5wcm90b3R5cGUudXBkYXRlUHJpb3JpdHk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5pc0VtcHR5KCk/aGMuRU1QVFlfTk9ERTp0LnVwZGF0ZVByaW9yaXR5KGUpfSxEYy5wcm90b3R5cGUuZmlsdGVyc05vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuITF9LERjLnByb3RvdHlwZS5nZXRJbmRleGVkRmlsdGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LERjLnByb3RvdHlwZS5nZXRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4X30sRGMpO2Z1bmN0aW9uIERjKHQpe3RoaXMuaW5kZXhfPXR9dmFyIHhjPShMYy5wcm90b3R5cGUuZ2V0U3RhcnRQb3N0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnRQb3N0X30sTGMucHJvdG90eXBlLmdldEVuZFBvc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmRQb3N0X30sTGMucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaW5kZXhfLmNvbXBhcmUodGhpcy5nZXRTdGFydFBvc3QoKSx0KTw9MCYmdGhpcy5pbmRleF8uY29tcGFyZSh0LHRoaXMuZ2V0RW5kUG9zdCgpKTw9MH0sTGMucHJvdG90eXBlLnVwZGF0ZUNoaWxkPWZ1bmN0aW9uKHQsZSxuLHIsaSxvKXtyZXR1cm4gdGhpcy5tYXRjaGVzKG5ldyBrdShlLG4pKXx8KG49aGMuRU1QVFlfTk9ERSksdGhpcy5pbmRleGVkRmlsdGVyXy51cGRhdGVDaGlsZCh0LGUsbixyLGksbyl9LExjLnByb3RvdHlwZS51cGRhdGVGdWxsTm9kZT1mdW5jdGlvbih0LGUsbil7ZS5pc0xlYWZOb2RlKCkmJihlPWhjLkVNUFRZX05PREUpO3ZhciByPShyPWUud2l0aEluZGV4KHRoaXMuaW5kZXhfKSkudXBkYXRlUHJpb3JpdHkoaGMuRU1QVFlfTk9ERSksaT10aGlzO3JldHVybiBlLmZvckVhY2hDaGlsZChadSxmdW5jdGlvbih0LGUpe2kubWF0Y2hlcyhuZXcga3UodCxlKSl8fChyPXIudXBkYXRlSW1tZWRpYXRlQ2hpbGQodCxoYy5FTVBUWV9OT0RFKSl9KSx0aGlzLmluZGV4ZWRGaWx0ZXJfLnVwZGF0ZUZ1bGxOb2RlKHQscixuKX0sTGMucHJvdG90eXBlLnVwZGF0ZVByaW9yaXR5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHR9LExjLnByb3RvdHlwZS5maWx0ZXJzTm9kZXM9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sTGMucHJvdG90eXBlLmdldEluZGV4ZWRGaWx0ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRleGVkRmlsdGVyX30sTGMucHJvdG90eXBlLmdldEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXhffSxMYy5nZXRTdGFydFBvc3RfPWZ1bmN0aW9uKHQpe2lmKHQuaGFzU3RhcnQoKSl7dmFyIGU9dC5nZXRJbmRleFN0YXJ0TmFtZSgpO3JldHVybiB0LmdldEluZGV4KCkubWFrZVBvc3QodC5nZXRJbmRleFN0YXJ0VmFsdWUoKSxlKX1yZXR1cm4gdC5nZXRJbmRleCgpLm1pblBvc3QoKX0sTGMuZ2V0RW5kUG9zdF89ZnVuY3Rpb24odCl7aWYodC5oYXNFbmQoKSl7dmFyIGU9dC5nZXRJbmRleEVuZE5hbWUoKTtyZXR1cm4gdC5nZXRJbmRleCgpLm1ha2VQb3N0KHQuZ2V0SW5kZXhFbmRWYWx1ZSgpLGUpfXJldHVybiB0LmdldEluZGV4KCkubWF4UG9zdCgpfSxMYyk7ZnVuY3Rpb24gTGModCl7dGhpcy5pbmRleGVkRmlsdGVyXz1uZXcgT2ModC5nZXRJbmRleCgpKSx0aGlzLmluZGV4Xz10LmdldEluZGV4KCksdGhpcy5zdGFydFBvc3RfPUxjLmdldFN0YXJ0UG9zdF8odCksdGhpcy5lbmRQb3N0Xz1MYy5nZXRFbmRQb3N0Xyh0KX12YXIgTWM9KEZjLnByb3RvdHlwZS51cGRhdGVDaGlsZD1mdW5jdGlvbih0LGUsbixyLGksbyl7cmV0dXJuIHRoaXMucmFuZ2VkRmlsdGVyXy5tYXRjaGVzKG5ldyBrdShlLG4pKXx8KG49aGMuRU1QVFlfTk9ERSksdC5nZXRJbW1lZGlhdGVDaGlsZChlKS5lcXVhbHMobik/dDp0Lm51bUNoaWxkcmVuKCk8dGhpcy5saW1pdF8/dGhpcy5yYW5nZWRGaWx0ZXJfLmdldEluZGV4ZWRGaWx0ZXIoKS51cGRhdGVDaGlsZCh0LGUsbixyLGksbyk6dGhpcy5mdWxsTGltaXRVcGRhdGVDaGlsZF8odCxlLG4saSxvKX0sRmMucHJvdG90eXBlLnVwZGF0ZUZ1bGxOb2RlPWZ1bmN0aW9uKHQsZSxuKXtpZihlLmlzTGVhZk5vZGUoKXx8ZS5pc0VtcHR5KCkpcj1oYy5FTVBUWV9OT0RFLndpdGhJbmRleCh0aGlzLmluZGV4Xyk7ZWxzZSBpZigyKnRoaXMubGltaXRfPGUubnVtQ2hpbGRyZW4oKSYmZS5pc0luZGV4ZWQodGhpcy5pbmRleF8pKXt2YXIgcj1oYy5FTVBUWV9OT0RFLndpdGhJbmRleCh0aGlzLmluZGV4XyksaT12b2lkIDA7aT10aGlzLnJldmVyc2VfP2UuZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSh0aGlzLnJhbmdlZEZpbHRlcl8uZ2V0RW5kUG9zdCgpLHRoaXMuaW5kZXhfKTplLmdldEl0ZXJhdG9yRnJvbSh0aGlzLnJhbmdlZEZpbHRlcl8uZ2V0U3RhcnRQb3N0KCksdGhpcy5pbmRleF8pO2Zvcih2YXIgbz0wO2kuaGFzTmV4dCgpJiZvPHRoaXMubGltaXRfOyl7dmFyIGE9aS5nZXROZXh0KCk7aWYoISh0aGlzLnJldmVyc2VfP3RoaXMuaW5kZXhfLmNvbXBhcmUodGhpcy5yYW5nZWRGaWx0ZXJfLmdldFN0YXJ0UG9zdCgpLGEpPD0wOnRoaXMuaW5kZXhfLmNvbXBhcmUoYSx0aGlzLnJhbmdlZEZpbHRlcl8uZ2V0RW5kUG9zdCgpKTw9MCkpYnJlYWs7cj1yLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGEubmFtZSxhLm5vZGUpLG8rK319ZWxzZXtyPShyPWUud2l0aEluZGV4KHRoaXMuaW5kZXhfKSkudXBkYXRlUHJpb3JpdHkoaGMuRU1QVFlfTk9ERSk7dmFyIHMsdT12b2lkIDAsYz12b2lkIDAsaD12b2lkIDAsaT12b2lkIDA7aD10aGlzLnJldmVyc2VfPyhpPXIuZ2V0UmV2ZXJzZUl0ZXJhdG9yKHRoaXMuaW5kZXhfKSx1PXRoaXMucmFuZ2VkRmlsdGVyXy5nZXRFbmRQb3N0KCksYz10aGlzLnJhbmdlZEZpbHRlcl8uZ2V0U3RhcnRQb3N0KCkscz10aGlzLmluZGV4Xy5nZXRDb21wYXJlKCksZnVuY3Rpb24odCxlKXtyZXR1cm4gcyhlLHQpfSk6KGk9ci5nZXRJdGVyYXRvcih0aGlzLmluZGV4XyksdT10aGlzLnJhbmdlZEZpbHRlcl8uZ2V0U3RhcnRQb3N0KCksYz10aGlzLnJhbmdlZEZpbHRlcl8uZ2V0RW5kUG9zdCgpLHRoaXMuaW5kZXhfLmdldENvbXBhcmUoKSk7Zm9yKHZhciBvPTAsbD0hMTtpLmhhc05leHQoKTspe2E9aS5nZXROZXh0KCk7KGw9IWwmJmgodSxhKTw9MD8hMDpsKSYmbzx0aGlzLmxpbWl0XyYmaChhLGMpPD0wP28rKzpyPXIudXBkYXRlSW1tZWRpYXRlQ2hpbGQoYS5uYW1lLGhjLkVNUFRZX05PREUpfX1yZXR1cm4gdGhpcy5yYW5nZWRGaWx0ZXJfLmdldEluZGV4ZWRGaWx0ZXIoKS51cGRhdGVGdWxsTm9kZSh0LHIsbil9LEZjLnByb3RvdHlwZS51cGRhdGVQcmlvcml0eT1mdW5jdGlvbih0LGUpe3JldHVybiB0fSxGYy5wcm90b3R5cGUuZmlsdGVyc05vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuITB9LEZjLnByb3RvdHlwZS5nZXRJbmRleGVkRmlsdGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmFuZ2VkRmlsdGVyXy5nZXRJbmRleGVkRmlsdGVyKCl9LEZjLnByb3RvdHlwZS5nZXRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4X30sRmMucHJvdG90eXBlLmZ1bGxMaW1pdFVwZGF0ZUNoaWxkXz1mdW5jdGlvbih0LGUsbixyLGkpe3ZhciBvLGE7YT10aGlzLnJldmVyc2VfPyhvPXRoaXMuaW5kZXhfLmdldENvbXBhcmUoKSxmdW5jdGlvbih0LGUpe3JldHVybiBvKGUsdCl9KTp0aGlzLmluZGV4Xy5nZXRDb21wYXJlKCk7dmFyIHM9dDthbyhzLm51bUNoaWxkcmVuKCk9PT10aGlzLmxpbWl0XyxcIlwiKTt2YXIgdT1uZXcga3UoZSxuKSxjPXRoaXMucmV2ZXJzZV8/cy5nZXRGaXJzdENoaWxkKHRoaXMuaW5kZXhfKTpzLmdldExhc3RDaGlsZCh0aGlzLmluZGV4XyksaD10aGlzLnJhbmdlZEZpbHRlcl8ubWF0Y2hlcyh1KTtpZihzLmhhc0NoaWxkKGUpKXtmb3IodmFyIGw9cy5nZXRJbW1lZGlhdGVDaGlsZChlKSxmPXIuZ2V0Q2hpbGRBZnRlckNoaWxkKHRoaXMuaW5kZXhfLGMsdGhpcy5yZXZlcnNlXyk7bnVsbCE9ZiYmKGYubmFtZT09PWV8fHMuaGFzQ2hpbGQoZi5uYW1lKSk7KWY9ci5nZXRDaGlsZEFmdGVyQ2hpbGQodGhpcy5pbmRleF8sZix0aGlzLnJldmVyc2VfKTt2YXIgcD1udWxsPT1mPzE6YShmLHUpO2lmKGgmJiFuLmlzRW1wdHkoKSYmMDw9cClyZXR1cm4gbnVsbCE9aSYmaS50cmFja0NoaWxkQ2hhbmdlKFBjKGUsbixsKSkscy51cGRhdGVJbW1lZGlhdGVDaGlsZChlLG4pO251bGwhPWkmJmkudHJhY2tDaGlsZENoYW5nZShSYyhlLGwpKTtsPXMudXBkYXRlSW1tZWRpYXRlQ2hpbGQoZSxoYy5FTVBUWV9OT0RFKTtyZXR1cm4gbnVsbCE9ZiYmdGhpcy5yYW5nZWRGaWx0ZXJfLm1hdGNoZXMoZik/KG51bGwhPWkmJmkudHJhY2tDaGlsZENoYW5nZShBYyhmLm5hbWUsZi5ub2RlKSksbC51cGRhdGVJbW1lZGlhdGVDaGlsZChmLm5hbWUsZi5ub2RlKSk6bH1yZXR1cm4hbi5pc0VtcHR5KCkmJmgmJjA8PWEoYyx1KT8obnVsbCE9aSYmKGkudHJhY2tDaGlsZENoYW5nZShSYyhjLm5hbWUsYy5ub2RlKSksaS50cmFja0NoaWxkQ2hhbmdlKEFjKGUsbikpKSxzLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGUsbikudXBkYXRlSW1tZWRpYXRlQ2hpbGQoYy5uYW1lLGhjLkVNUFRZX05PREUpKTp0fSxGYyk7ZnVuY3Rpb24gRmModCl7dGhpcy5yYW5nZWRGaWx0ZXJfPW5ldyB4Yyh0KSx0aGlzLmluZGV4Xz10LmdldEluZGV4KCksdGhpcy5saW1pdF89dC5nZXRMaW1pdCgpLHRoaXMucmV2ZXJzZV89IXQuaXNWaWV3RnJvbUxlZnQoKX12YXIgVWM9KGpjLnByb3RvdHlwZS5oYXNTdGFydD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0U2V0X30samMucHJvdG90eXBlLmhhc1N0YXJ0QWZ0ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydEFmdGVyU2V0X30samMucHJvdG90eXBlLmhhc0VuZEJlZm9yZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuZEJlZm9yZVNldF99LGpjLnByb3RvdHlwZS5pc1ZpZXdGcm9tTGVmdD1mdW5jdGlvbigpe3JldHVyblwiXCI9PT10aGlzLnZpZXdGcm9tXz90aGlzLnN0YXJ0U2V0XzpcImxcIj09PXRoaXMudmlld0Zyb21ffSxqYy5wcm90b3R5cGUuZ2V0SW5kZXhTdGFydFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIGFvKHRoaXMuc3RhcnRTZXRfLFwiT25seSB2YWxpZCBpZiBzdGFydCBoYXMgYmVlbiBzZXRcIiksdGhpcy5pbmRleFN0YXJ0VmFsdWVffSxqYy5wcm90b3R5cGUuZ2V0SW5kZXhTdGFydE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gYW8odGhpcy5zdGFydFNldF8sXCJPbmx5IHZhbGlkIGlmIHN0YXJ0IGhhcyBiZWVuIHNldFwiKSx0aGlzLnN0YXJ0TmFtZVNldF8/dGhpcy5pbmRleFN0YXJ0TmFtZV86cnN9LGpjLnByb3RvdHlwZS5oYXNFbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmRTZXRffSxqYy5wcm90b3R5cGUuZ2V0SW5kZXhFbmRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiBhbyh0aGlzLmVuZFNldF8sXCJPbmx5IHZhbGlkIGlmIGVuZCBoYXMgYmVlbiBzZXRcIiksdGhpcy5pbmRleEVuZFZhbHVlX30samMucHJvdG90eXBlLmdldEluZGV4RW5kTmFtZT1mdW5jdGlvbigpe3JldHVybiBhbyh0aGlzLmVuZFNldF8sXCJPbmx5IHZhbGlkIGlmIGVuZCBoYXMgYmVlbiBzZXRcIiksdGhpcy5lbmROYW1lU2V0Xz90aGlzLmluZGV4RW5kTmFtZV86aXN9LGpjLnByb3RvdHlwZS5oYXNMaW1pdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbWl0U2V0X30samMucHJvdG90eXBlLmhhc0FuY2hvcmVkTGltaXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saW1pdFNldF8mJlwiXCIhPT10aGlzLnZpZXdGcm9tX30samMucHJvdG90eXBlLmdldExpbWl0PWZ1bmN0aW9uKCl7cmV0dXJuIGFvKHRoaXMubGltaXRTZXRfLFwiT25seSB2YWxpZCBpZiBsaW1pdCBoYXMgYmVlbiBzZXRcIiksdGhpcy5saW1pdF99LGpjLnByb3RvdHlwZS5nZXRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4X30samMucHJvdG90eXBlLmxvYWRzQWxsRGF0YT1mdW5jdGlvbigpe3JldHVybiEodGhpcy5zdGFydFNldF98fHRoaXMuZW5kU2V0X3x8dGhpcy5saW1pdFNldF8pfSxqYy5wcm90b3R5cGUuaXNEZWZhdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9hZHNBbGxEYXRhKCkmJnRoaXMuaW5kZXhfPT09WnV9LGpjLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGpjO3JldHVybiB0LmxpbWl0U2V0Xz10aGlzLmxpbWl0U2V0Xyx0LmxpbWl0Xz10aGlzLmxpbWl0Xyx0LnN0YXJ0U2V0Xz10aGlzLnN0YXJ0U2V0Xyx0LmluZGV4U3RhcnRWYWx1ZV89dGhpcy5pbmRleFN0YXJ0VmFsdWVfLHQuc3RhcnROYW1lU2V0Xz10aGlzLnN0YXJ0TmFtZVNldF8sdC5pbmRleFN0YXJ0TmFtZV89dGhpcy5pbmRleFN0YXJ0TmFtZV8sdC5lbmRTZXRfPXRoaXMuZW5kU2V0Xyx0LmluZGV4RW5kVmFsdWVfPXRoaXMuaW5kZXhFbmRWYWx1ZV8sdC5lbmROYW1lU2V0Xz10aGlzLmVuZE5hbWVTZXRfLHQuaW5kZXhFbmROYW1lXz10aGlzLmluZGV4RW5kTmFtZV8sdC5pbmRleF89dGhpcy5pbmRleF8sdC52aWV3RnJvbV89dGhpcy52aWV3RnJvbV8sdH0samMpO2Z1bmN0aW9uIGpjKCl7dGhpcy5saW1pdFNldF89ITEsdGhpcy5zdGFydFNldF89ITEsdGhpcy5zdGFydE5hbWVTZXRfPSExLHRoaXMuc3RhcnRBZnRlclNldF89ITEsdGhpcy5lbmRTZXRfPSExLHRoaXMuZW5kTmFtZVNldF89ITEsdGhpcy5lbmRCZWZvcmVTZXRfPSExLHRoaXMubGltaXRfPTAsdGhpcy52aWV3RnJvbV89XCJcIix0aGlzLmluZGV4U3RhcnRWYWx1ZV89bnVsbCx0aGlzLmluZGV4U3RhcnROYW1lXz1cIlwiLHRoaXMuaW5kZXhFbmRWYWx1ZV89bnVsbCx0aGlzLmluZGV4RW5kTmFtZV89XCJcIix0aGlzLmluZGV4Xz1adX1mdW5jdGlvbiBxYyh0LGUsbil7dD10LmNvcHkoKTtyZXR1cm4gdC5zdGFydFNldF89ITAsdm9pZCAwPT09ZSYmKGU9bnVsbCksdC5pbmRleFN0YXJ0VmFsdWVfPWUsbnVsbCE9bj8odC5zdGFydE5hbWVTZXRfPSEwLHQuaW5kZXhTdGFydE5hbWVfPW4pOih0LnN0YXJ0TmFtZVNldF89ITEsdC5pbmRleFN0YXJ0TmFtZV89XCJcIiksdH1mdW5jdGlvbiBWYyh0LGUsbil7dD10LmNvcHkoKTtyZXR1cm4gdC5lbmRTZXRfPSEwLHZvaWQgMD09PWUmJihlPW51bGwpLHQuaW5kZXhFbmRWYWx1ZV89ZSx2b2lkIDAhPT1uPyh0LmVuZE5hbWVTZXRfPSEwLHQuaW5kZXhFbmROYW1lXz1uKToodC5lbmROYW1lU2V0Xz0hMSx0LmluZGV4RW5kTmFtZV89XCJcIiksdH1mdW5jdGlvbiBCYyh0LGUpe3Q9dC5jb3B5KCk7cmV0dXJuIHQuaW5kZXhfPWUsdH1mdW5jdGlvbiBLYyh0KXt2YXIgZSxuPXt9O3JldHVybiB0LmlzRGVmYXVsdCgpfHwoZT10LmluZGV4Xz09PVp1P1wiJHByaW9yaXR5XCI6dC5pbmRleF89PT1TYz9cIiR2YWx1ZVwiOnQuaW5kZXhfPT09RHU/XCIka2V5XCI6KGFvKHQuaW5kZXhfIGluc3RhbmNlb2YgbWMsXCJVbnJlY29nbml6ZWQgaW5kZXggdHlwZSFcIiksdC5pbmRleF8udG9TdHJpbmcoKSksbi5vcmRlckJ5PVBvKGUpLHQuc3RhcnRTZXRfJiYobi5zdGFydEF0PVBvKHQuaW5kZXhTdGFydFZhbHVlXyksdC5zdGFydE5hbWVTZXRfJiYobi5zdGFydEF0Kz1cIixcIitQbyh0LmluZGV4U3RhcnROYW1lXykpKSx0LmVuZFNldF8mJihuLmVuZEF0PVBvKHQuaW5kZXhFbmRWYWx1ZV8pLHQuZW5kTmFtZVNldF8mJihuLmVuZEF0Kz1cIixcIitQbyh0LmluZGV4RW5kTmFtZV8pKSksdC5saW1pdFNldF8mJih0LmlzVmlld0Zyb21MZWZ0KCk/bi5saW1pdFRvRmlyc3Q9dC5saW1pdF86bi5saW1pdFRvTGFzdD10LmxpbWl0XykpLG59ZnVuY3Rpb24gV2ModCl7dmFyIGUsbj17fTtyZXR1cm4gdC5zdGFydFNldF8mJihuLnNwPXQuaW5kZXhTdGFydFZhbHVlXyx0LnN0YXJ0TmFtZVNldF8mJihuLnNuPXQuaW5kZXhTdGFydE5hbWVfKSksdC5lbmRTZXRfJiYobi5lcD10LmluZGV4RW5kVmFsdWVfLHQuZW5kTmFtZVNldF8mJihuLmVuPXQuaW5kZXhFbmROYW1lXykpLHQubGltaXRTZXRfJiYobi5sPXQubGltaXRfLFwiXCI9PT0oZT10LnZpZXdGcm9tXykmJihlPXQuaXNWaWV3RnJvbUxlZnQoKT9cImxcIjpcInJcIiksbi52Zj1lKSx0LmluZGV4XyE9PVp1JiYobi5pPXQuaW5kZXhfLnRvU3RyaW5nKCkpLG59dmFyIEhjLEdjPShYaSh6YyxIYz16KSx6Yy5wcm90b3R5cGUucmVwb3J0U3RhdHM9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHpjLmdldExpc3RlbklkXz1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDAhPT1lP1widGFnJFwiK2U6KGFvKHQuX3F1ZXJ5UGFyYW1zLmlzRGVmYXVsdCgpLFwic2hvdWxkIGhhdmUgYSB0YWcgaWYgaXQncyBub3QgYSBkZWZhdWx0IHF1ZXJ5LlwiKSx0Ll9wYXRoLnRvU3RyaW5nKCkpfSx6Yy5wcm90b3R5cGUubGlzdGVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPXRoaXMsbz10Ll9wYXRoLnRvU3RyaW5nKCk7dGhpcy5sb2dfKFwiTGlzdGVuIGNhbGxlZCBmb3IgXCIrbytcIiBcIit0Ll9xdWVyeUlkZW50aWZpZXIpO3ZhciBhPXpjLmdldExpc3RlbklkXyh0LG4pLHM9e307dGhpcy5saXN0ZW5zX1thXT1zO3Q9S2ModC5fcXVlcnlQYXJhbXMpO3RoaXMucmVzdFJlcXVlc3RfKG8rXCIuanNvblwiLHQsZnVuY3Rpb24odCxlKXtudWxsPT09KHQ9NDA0PT09dD9lPW51bGw6dCkmJmkub25EYXRhVXBkYXRlXyhvLGUsITEsbikseG8oaS5saXN0ZW5zXyxhKT09PXMmJnIodD80MDE9PT10P1wicGVybWlzc2lvbl9kZW5pZWRcIjpcInJlc3RfZXJyb3I6XCIrdDpcIm9rXCIsbnVsbCl9KX0semMucHJvdG90eXBlLnVubGlzdGVuPWZ1bmN0aW9uKHQsZSl7ZT16Yy5nZXRMaXN0ZW5JZF8odCxlKTtkZWxldGUgdGhpcy5saXN0ZW5zX1tlXX0semMucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgbj10aGlzLGU9S2ModC5fcXVlcnlQYXJhbXMpLHI9dC5fcGF0aC50b1N0cmluZygpLGk9bmV3IGxvO3JldHVybiB0aGlzLnJlc3RSZXF1ZXN0XyhyK1wiLmpzb25cIixlLGZ1bmN0aW9uKHQsZSl7bnVsbD09PSh0PTQwND09PXQ/ZT1udWxsOnQpPyhuLm9uRGF0YVVwZGF0ZV8ocixlLCExLG51bGwpLGkucmVzb2x2ZShlKSk6aS5yZWplY3QobmV3IEVycm9yKGUpKX0pLGkucHJvbWlzZX0semMucHJvdG90eXBlLnJlZnJlc2hBdXRoVG9rZW49ZnVuY3Rpb24odCl7fSx6Yy5wcm90b3R5cGUucmVzdFJlcXVlc3RfPWZ1bmN0aW9uKGksbyxhKXt2YXIgcz10aGlzO3JldHVybihvPXZvaWQgMD09PW8/e306bykuZm9ybWF0PVwiZXhwb3J0XCIsUHJvbWlzZS5hbGwoW3RoaXMuYXV0aFRva2VuUHJvdmlkZXJfLmdldFRva2VuKCExKSx0aGlzLmFwcENoZWNrVG9rZW5Qcm92aWRlcl8uZ2V0VG9rZW4oITEpXSkudGhlbihmdW5jdGlvbih0KXt2YXIgZT1lbyh0LDIpLHQ9ZVswXSxlPWVbMV07dCYmdC5hY2Nlc3NUb2tlbiYmKG8uYXV0aD10LmFjY2Vzc1Rva2VuKSxlJiZlLnRva2VuJiYoby5hYz1lLnRva2VuKTt2YXIgbj0ocy5yZXBvSW5mb18uc2VjdXJlP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikrcy5yZXBvSW5mb18uaG9zdCtpK1wiP25zPVwiK3MucmVwb0luZm9fLm5hbWVzcGFjZStGbyhvKTtzLmxvZ18oXCJTZW5kaW5nIFJFU1QgcmVxdWVzdCBmb3IgXCIrbik7dmFyIHI9bmV3IFhNTEh0dHBSZXF1ZXN0O3Iub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoYSYmND09PXIucmVhZHlTdGF0ZSl7cy5sb2dfKFwiUkVTVCBSZXNwb25zZSBmb3IgXCIrbitcIiByZWNlaXZlZC4gc3RhdHVzOlwiLHIuc3RhdHVzLFwicmVzcG9uc2U6XCIsci5yZXNwb25zZVRleHQpO3ZhciB0PW51bGw7aWYoMjAwPD1yLnN0YXR1cyYmci5zdGF0dXM8MzAwKXt0cnl7dD1SbyhyLnJlc3BvbnNlVGV4dCl9Y2F0Y2godCl7bnMoXCJGYWlsZWQgdG8gcGFyc2UgSlNPTiByZXNwb25zZSBmb3IgXCIrbitcIjogXCIrci5yZXNwb25zZVRleHQpfWEobnVsbCx0KX1lbHNlIDQwMSE9PXIuc3RhdHVzJiY0MDQhPT1yLnN0YXR1cyYmbnMoXCJHb3QgdW5zdWNjZXNzZnVsIFJFU1QgcmVzcG9uc2UgZm9yIFwiK24rXCIgU3RhdHVzOiBcIityLnN0YXR1cyksYShyLnN0YXR1cyk7YT1udWxsfX0sci5vcGVuKFwiR0VUXCIsbiwhMCksci5zZW5kKCl9KX0semMpO2Z1bmN0aW9uIHpjKHQsZSxuLHIpe3ZhciBpPUhjLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkucmVwb0luZm9fPXQsaS5vbkRhdGFVcGRhdGVfPWUsaS5hdXRoVG9rZW5Qcm92aWRlcl89bixpLmFwcENoZWNrVG9rZW5Qcm92aWRlcl89cixpLmxvZ189dHMoXCJwOnJlc3Q6XCIpLGkubGlzdGVuc189e30saX12YXIgUWM9KFljLnByb3RvdHlwZS5nZXROb2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJvb3ROb2RlXy5nZXRDaGlsZCh0KX0sWWMucHJvdG90eXBlLnVwZGF0ZVNuYXBzaG90PWZ1bmN0aW9uKHQsZSl7dGhpcy5yb290Tm9kZV89dGhpcy5yb290Tm9kZV8udXBkYXRlQ2hpbGQodCxlKX0sWWMpO2Z1bmN0aW9uIFljKCl7dGhpcy5yb290Tm9kZV89aGMuRU1QVFlfTk9ERX1mdW5jdGlvbiBYYygpe3JldHVybnt2YWx1ZTpudWxsLGNoaWxkcmVuOm5ldyBNYXB9fWZ1bmN0aW9uIEpjKHQsZSxuKXt2YXIgcjtsdShlKT8odC52YWx1ZT1uLHQuY2hpbGRyZW4uY2xlYXIoKSk6bnVsbCE9PXQudmFsdWU/dC52YWx1ZT10LnZhbHVlLnVwZGF0ZUNoaWxkKGUsbik6KHI9aXUoZSksdC5jaGlsZHJlbi5oYXMocil8fHQuY2hpbGRyZW4uc2V0KHIsWGMoKSksSmModC5jaGlsZHJlbi5nZXQociksZT1hdShlKSxuKSl9ZnVuY3Rpb24gJGModCxuLHIpe3ZhciBpO251bGwhPT10LnZhbHVlP3Iobix0LnZhbHVlKTooaT1mdW5jdGlvbih0LGUpeyRjKGUsbmV3IGV1KG4udG9TdHJpbmcoKStcIi9cIit0KSxyKX0sdC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7aShlLHQpfSkpfXZhciBaYz0odGgucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29sbGVjdGlvbl8uZ2V0KCksbj1KaSh7fSx0KTtyZXR1cm4gdGhpcy5sYXN0XyYmc3ModGhpcy5sYXN0XyxmdW5jdGlvbih0LGUpe25bdF09blt0XS1lfSksdGhpcy5sYXN0Xz10LG59LHRoKTtmdW5jdGlvbiB0aCh0KXt0aGlzLmNvbGxlY3Rpb25fPXQsdGhpcy5sYXN0Xz1udWxsfXZhciBlaCxuaD0ocmgucHJvdG90eXBlLnJlcG9ydFN0YXRzXz1mdW5jdGlvbigpe3ZhciBuPXRoaXMsdD10aGlzLnN0YXRzTGlzdGVuZXJfLmdldCgpLHI9e30saT0hMTtzcyh0LGZ1bmN0aW9uKHQsZSl7MDxlJiZEbyhuLnN0YXRzVG9SZXBvcnRfLHQpJiYoclt0XT1lLGk9ITApfSksaSYmdGhpcy5zZXJ2ZXJfLnJlcG9ydFN0YXRzKHIpLGNzKHRoaXMucmVwb3J0U3RhdHNfLmJpbmQodGhpcyksTWF0aC5mbG9vcigyKk1hdGgucmFuZG9tKCkqM2U1KSl9LHJoKTtmdW5jdGlvbiByaCh0LGUpe3RoaXMuc2VydmVyXz1lLHRoaXMuc3RhdHNUb1JlcG9ydF89e30sdGhpcy5zdGF0c0xpc3RlbmVyXz1uZXcgWmModCk7dD0xZTQrMmU0Kk1hdGgucmFuZG9tKCk7Y3ModGhpcy5yZXBvcnRTdGF0c18uYmluZCh0aGlzKSxNYXRoLmZsb29yKHQpKX1mdW5jdGlvbiBpaCgpe3JldHVybntmcm9tVXNlcjohMCxmcm9tU2VydmVyOiExLHF1ZXJ5SWQ6bnVsbCx0YWdnZWQ6ITF9fWZ1bmN0aW9uIG9oKCl7cmV0dXJue2Zyb21Vc2VyOiExLGZyb21TZXJ2ZXI6ITAscXVlcnlJZDpudWxsLHRhZ2dlZDohMX19ZnVuY3Rpb24gYWgodCl7cmV0dXJue2Zyb21Vc2VyOiExLGZyb21TZXJ2ZXI6ITAscXVlcnlJZDp0LHRhZ2dlZDohMH19KFFzPWVoPWVofHx7fSlbUXMuT1ZFUldSSVRFPTBdPVwiT1ZFUldSSVRFXCIsUXNbUXMuTUVSR0U9MV09XCJNRVJHRVwiLFFzW1FzLkFDS19VU0VSX1dSSVRFPTJdPVwiQUNLX1VTRVJfV1JJVEVcIixRc1tRcy5MSVNURU5fQ09NUExFVEU9M109XCJMSVNURU5fQ09NUExFVEVcIjt2YXIgc2g9KHVoLnByb3RvdHlwZS5vcGVyYXRpb25Gb3JDaGlsZD1mdW5jdGlvbih0KXtpZihsdSh0aGlzLnBhdGgpKXtpZihudWxsIT10aGlzLmFmZmVjdGVkVHJlZS52YWx1ZSlyZXR1cm4gYW8odGhpcy5hZmZlY3RlZFRyZWUuY2hpbGRyZW4uaXNFbXB0eSgpLFwiYWZmZWN0ZWRUcmVlIHNob3VsZCBub3QgaGF2ZSBvdmVybGFwcGluZyBhZmZlY3RlZCBwYXRocy5cIiksdGhpczt2YXIgZT10aGlzLmFmZmVjdGVkVHJlZS5zdWJ0cmVlKG5ldyBldSh0KSk7cmV0dXJuIG5ldyB1aChydSgpLGUsdGhpcy5yZXZlcnQpfXJldHVybiBhbyhpdSh0aGlzLnBhdGgpPT09dCxcIm9wZXJhdGlvbkZvckNoaWxkIGNhbGxlZCBmb3IgdW5yZWxhdGVkIGNoaWxkLlwiKSxuZXcgdWgoYXUodGhpcy5wYXRoKSx0aGlzLmFmZmVjdGVkVHJlZSx0aGlzLnJldmVydCl9LHVoKTtmdW5jdGlvbiB1aCh0LGUsbil7dGhpcy5wYXRoPXQsdGhpcy5hZmZlY3RlZFRyZWU9ZSx0aGlzLnJldmVydD1uLHRoaXMudHlwZT1laC5BQ0tfVVNFUl9XUklURSx0aGlzLnNvdXJjZT1paCgpfXZhciBjaD0oaGgucHJvdG90eXBlLm9wZXJhdGlvbkZvckNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiBsdSh0aGlzLnBhdGgpP25ldyBoaCh0aGlzLnNvdXJjZSxydSgpKTpuZXcgaGgodGhpcy5zb3VyY2UsYXUodGhpcy5wYXRoKSl9LGhoKTtmdW5jdGlvbiBoaCh0LGUpe3RoaXMuc291cmNlPXQsdGhpcy5wYXRoPWUsdGhpcy50eXBlPWVoLkxJU1RFTl9DT01QTEVURX12YXIgbGg9KGZoLnByb3RvdHlwZS5vcGVyYXRpb25Gb3JDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gbHUodGhpcy5wYXRoKT9uZXcgZmgodGhpcy5zb3VyY2UscnUoKSx0aGlzLnNuYXAuZ2V0SW1tZWRpYXRlQ2hpbGQodCkpOm5ldyBmaCh0aGlzLnNvdXJjZSxhdSh0aGlzLnBhdGgpLHRoaXMuc25hcCl9LGZoKTtmdW5jdGlvbiBmaCh0LGUsbil7dGhpcy5zb3VyY2U9dCx0aGlzLnBhdGg9ZSx0aGlzLnNuYXA9bix0aGlzLnR5cGU9ZWguT1ZFUldSSVRFfXZhciBwaD0oZGgucHJvdG90eXBlLm9wZXJhdGlvbkZvckNoaWxkPWZ1bmN0aW9uKHQpe2lmKGx1KHRoaXMucGF0aCkpe3ZhciBlPXRoaXMuY2hpbGRyZW4uc3VidHJlZShuZXcgZXUodCkpO3JldHVybiBlLmlzRW1wdHkoKT9udWxsOmUudmFsdWU/bmV3IGxoKHRoaXMuc291cmNlLHJ1KCksZS52YWx1ZSk6bmV3IGRoKHRoaXMuc291cmNlLHJ1KCksZSl9cmV0dXJuIGFvKGl1KHRoaXMucGF0aCk9PT10LFwiQ2FuJ3QgZ2V0IGEgbWVyZ2UgZm9yIGEgY2hpbGQgbm90IG9uIHRoZSBwYXRoIG9mIHRoZSBvcGVyYXRpb25cIiksbmV3IGRoKHRoaXMuc291cmNlLGF1KHRoaXMucGF0aCksdGhpcy5jaGlsZHJlbil9LGRoLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiT3BlcmF0aW9uKFwiK3RoaXMucGF0aCtcIjogXCIrdGhpcy5zb3VyY2UudG9TdHJpbmcoKStcIiBtZXJnZTogXCIrdGhpcy5jaGlsZHJlbi50b1N0cmluZygpK1wiKVwifSxkaCk7ZnVuY3Rpb24gZGgodCxlLG4pe3RoaXMuc291cmNlPXQsdGhpcy5wYXRoPWUsdGhpcy5jaGlsZHJlbj1uLHRoaXMudHlwZT1laC5NRVJHRX12YXIgdmg9KGdoLnByb3RvdHlwZS5pc0Z1bGx5SW5pdGlhbGl6ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mdWxseUluaXRpYWxpemVkX30sZ2gucHJvdG90eXBlLmlzRmlsdGVyZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXJlZF99LGdoLnByb3RvdHlwZS5pc0NvbXBsZXRlRm9yUGF0aD1mdW5jdGlvbih0KXtpZihsdSh0KSlyZXR1cm4gdGhpcy5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSYmIXRoaXMuZmlsdGVyZWRfO3Q9aXUodCk7cmV0dXJuIHRoaXMuaXNDb21wbGV0ZUZvckNoaWxkKHQpfSxnaC5wcm90b3R5cGUuaXNDb21wbGV0ZUZvckNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzRnVsbHlJbml0aWFsaXplZCgpJiYhdGhpcy5maWx0ZXJlZF98fHRoaXMubm9kZV8uaGFzQ2hpbGQodCl9LGdoLnByb3RvdHlwZS5nZXROb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZV99LGdoKTtmdW5jdGlvbiBnaCh0LGUsbil7dGhpcy5ub2RlXz10LHRoaXMuZnVsbHlJbml0aWFsaXplZF89ZSx0aGlzLmZpbHRlcmVkXz1ufXZhciB5aCxtaD1mdW5jdGlvbih0KXt0aGlzLnF1ZXJ5Xz10LHRoaXMuaW5kZXhfPXRoaXMucXVlcnlfLl9xdWVyeVBhcmFtcy5nZXRJbmRleCgpfTtmdW5jdGlvbiBiaChuLHQsZSxyKXt2YXIgaT1bXSxvPVtdO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU7XCJjaGlsZF9jaGFuZ2VkXCI9PT10LnR5cGUmJm4uaW5kZXhfLmluZGV4ZWRWYWx1ZUNoYW5nZWQodC5vbGRTbmFwLHQuc25hcHNob3ROb2RlKSYmby5wdXNoKChlPXQuY2hpbGROYW1lLHt0eXBlOlwiY2hpbGRfbW92ZWRcIixzbmFwc2hvdE5vZGU6dC5zbmFwc2hvdE5vZGUsY2hpbGROYW1lOmV9KSl9KSxfaChuLGksXCJjaGlsZF9yZW1vdmVkXCIsdCxyLGUpLF9oKG4saSxcImNoaWxkX2FkZGVkXCIsdCxyLGUpLF9oKG4saSxcImNoaWxkX21vdmVkXCIsbyxyLGUpLF9oKG4saSxcImNoaWxkX2NoYW5nZWRcIix0LHIsZSksX2gobixpLFwidmFsdWVcIix0LHIsZSksaX1mdW5jdGlvbiBfaChvLGEsZSx0LHMsdSl7dD10LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlPT09ZX0pO3Quc29ydChmdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbih0LGUsbil7aWYobnVsbD09ZS5jaGlsZE5hbWV8fG51bGw9PW4uY2hpbGROYW1lKXRocm93IHNvKFwiU2hvdWxkIG9ubHkgY29tcGFyZSBjaGlsZF8gZXZlbnRzLlwiKTtlPW5ldyBrdShlLmNoaWxkTmFtZSxlLnNuYXBzaG90Tm9kZSksbj1uZXcga3Uobi5jaGlsZE5hbWUsbi5zbmFwc2hvdE5vZGUpO3JldHVybiB0LmluZGV4Xy5jb21wYXJlKGUsbil9KG8sdCxlKX0pLHQuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT0odD1vLHI9dSxcInZhbHVlXCI9PT0obj1lKS50eXBlfHxcImNoaWxkX3JlbW92ZWRcIj09PW4udHlwZXx8KG4ucHJldk5hbWU9ci5nZXRQcmVkZWNlc3NvckNoaWxkTmFtZShuLmNoaWxkTmFtZSxuLnNuYXBzaG90Tm9kZSx0LmluZGV4XykpLG4pO3MuZm9yRWFjaChmdW5jdGlvbih0KXt0LnJlc3BvbmRzVG8oZS50eXBlKSYmYS5wdXNoKHQuY3JlYXRlRXZlbnQoaSxvLnF1ZXJ5XykpfSl9KX1mdW5jdGlvbiB3aCh0LGUpe3JldHVybntldmVudENhY2hlOnQsc2VydmVyQ2FjaGU6ZX19ZnVuY3Rpb24gSWgodCxlLG4scil7cmV0dXJuIHdoKG5ldyB2aChlLG4sciksdC5zZXJ2ZXJDYWNoZSl9ZnVuY3Rpb24gVGgodCxlLG4scil7cmV0dXJuIHdoKHQuZXZlbnRDYWNoZSxuZXcgdmgoZSxuLHIpKX1mdW5jdGlvbiBFaCh0KXtyZXR1cm4gdC5ldmVudENhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpP3QuZXZlbnRDYWNoZS5nZXROb2RlKCk6bnVsbH1mdW5jdGlvbiBTaCh0KXtyZXR1cm4gdC5zZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKT90LnNlcnZlckNhY2hlLmdldE5vZGUoKTpudWxsfXZhciBDaD0oa2guZnJvbU9iamVjdD1mdW5jdGlvbih0KXt2YXIgbj1uZXcga2gobnVsbCk7cmV0dXJuIHNzKHQsZnVuY3Rpb24odCxlKXtuPW4uc2V0KG5ldyBldSh0KSxlKX0pLG59LGtoLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLnZhbHVlJiZ0aGlzLmNoaWxkcmVuLmlzRW1wdHkoKX0sa2gucHJvdG90eXBlLmZpbmRSb290TW9zdE1hdGNoaW5nUGF0aEFuZFZhbHVlPWZ1bmN0aW9uKHQsZSl7aWYobnVsbCE9dGhpcy52YWx1ZSYmZSh0aGlzLnZhbHVlKSlyZXR1cm57cGF0aDpydSgpLHZhbHVlOnRoaXMudmFsdWV9O2lmKGx1KHQpKXJldHVybiBudWxsO3ZhciBuPWl1KHQpLHI9dGhpcy5jaGlsZHJlbi5nZXQobik7aWYobnVsbD09PXIpcmV0dXJuIG51bGw7ZT1yLmZpbmRSb290TW9zdE1hdGNoaW5nUGF0aEFuZFZhbHVlKGF1KHQpLGUpO3JldHVybiBudWxsPT1lP251bGw6e3BhdGg6aHUobmV3IGV1KG4pLGUucGF0aCksdmFsdWU6ZS52YWx1ZX19LGtoLnByb3RvdHlwZS5maW5kUm9vdE1vc3RWYWx1ZUFuZFBhdGg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZmluZFJvb3RNb3N0TWF0Y2hpbmdQYXRoQW5kVmFsdWUodCxmdW5jdGlvbigpe3JldHVybiEwfSl9LGtoLnByb3RvdHlwZS5zdWJ0cmVlPWZ1bmN0aW9uKHQpe2lmKGx1KHQpKXJldHVybiB0aGlzO3ZhciBlPWl1KHQpLGU9dGhpcy5jaGlsZHJlbi5nZXQoZSk7cmV0dXJuIG51bGwhPT1lP2Uuc3VidHJlZShhdSh0KSk6bmV3IGtoKG51bGwpfSxraC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7aWYobHUodCkpcmV0dXJuIG5ldyBraChlLHRoaXMuY2hpbGRyZW4pO3ZhciBuPWl1KHQpLGU9KHRoaXMuY2hpbGRyZW4uZ2V0KG4pfHxuZXcga2gobnVsbCkpLnNldChhdSh0KSxlKSxlPXRoaXMuY2hpbGRyZW4uaW5zZXJ0KG4sZSk7cmV0dXJuIG5ldyBraCh0aGlzLnZhbHVlLGUpfSxraC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe2lmKGx1KHQpKXJldHVybiB0aGlzLmNoaWxkcmVuLmlzRW1wdHkoKT9uZXcga2gobnVsbCk6bmV3IGtoKG51bGwsdGhpcy5jaGlsZHJlbik7dmFyIGU9aXUodCksbj10aGlzLmNoaWxkcmVuLmdldChlKTtpZihuKXtuPW4ucmVtb3ZlKGF1KHQpKSx0PXZvaWQgMCx0PW4uaXNFbXB0eSgpP3RoaXMuY2hpbGRyZW4ucmVtb3ZlKGUpOnRoaXMuY2hpbGRyZW4uaW5zZXJ0KGUsbik7cmV0dXJuIG51bGw9PT10aGlzLnZhbHVlJiZ0LmlzRW1wdHkoKT9uZXcga2gobnVsbCk6bmV3IGtoKHRoaXMudmFsdWUsdCl9cmV0dXJuIHRoaXN9LGtoLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7aWYobHUodCkpcmV0dXJuIHRoaXMudmFsdWU7dmFyIGU9aXUodCksZT10aGlzLmNoaWxkcmVuLmdldChlKTtyZXR1cm4gZT9lLmdldChhdSh0KSk6bnVsbH0sa2gucHJvdG90eXBlLnNldFRyZWU9ZnVuY3Rpb24odCxlKXtpZihsdSh0KSlyZXR1cm4gZTt2YXIgbj1pdSh0KSx0PSh0aGlzLmNoaWxkcmVuLmdldChuKXx8bmV3IGtoKG51bGwpKS5zZXRUcmVlKGF1KHQpLGUpLGU9dm9pZCAwLGU9dC5pc0VtcHR5KCk/dGhpcy5jaGlsZHJlbi5yZW1vdmUobik6dGhpcy5jaGlsZHJlbi5pbnNlcnQobix0KTtyZXR1cm4gbmV3IGtoKHRoaXMudmFsdWUsZSl9LGtoLnByb3RvdHlwZS5mb2xkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZvbGRfKHJ1KCksdCl9LGtoLnByb3RvdHlwZS5mb2xkXz1mdW5jdGlvbihuLHIpe3ZhciBpPXt9O3JldHVybiB0aGlzLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24odCxlKXtpW3RdPWUuZm9sZF8oaHUobix0KSxyKX0pLHIobix0aGlzLnZhbHVlLGkpfSxraC5wcm90b3R5cGUuZmluZE9uUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmZpbmRPblBhdGhfKHQscnUoKSxlKX0sa2gucHJvdG90eXBlLmZpbmRPblBhdGhfPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hIXRoaXMudmFsdWUmJm4oZSx0aGlzLnZhbHVlKTtpZihyKXJldHVybiByO2lmKGx1KHQpKXJldHVybiBudWxsO3ZhciBpPWl1KHQpLHI9dGhpcy5jaGlsZHJlbi5nZXQoaSk7cmV0dXJuIHI/ci5maW5kT25QYXRoXyhhdSh0KSxodShlLGkpLG4pOm51bGx9LGtoLnByb3RvdHlwZS5mb3JlYWNoT25QYXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZm9yZWFjaE9uUGF0aF8odCxydSgpLGUpfSxraC5wcm90b3R5cGUuZm9yZWFjaE9uUGF0aF89ZnVuY3Rpb24odCxlLG4pe2lmKGx1KHQpKXJldHVybiB0aGlzO3RoaXMudmFsdWUmJm4oZSx0aGlzLnZhbHVlKTt2YXIgcj1pdSh0KSxpPXRoaXMuY2hpbGRyZW4uZ2V0KHIpO3JldHVybiBpP2kuZm9yZWFjaE9uUGF0aF8oYXUodCksaHUoZSxyKSxuKTpuZXcga2gobnVsbCl9LGtoLnByb3RvdHlwZS5mb3JlYWNoPWZ1bmN0aW9uKHQpe3RoaXMuZm9yZWFjaF8ocnUoKSx0KX0sa2gucHJvdG90eXBlLmZvcmVhY2hfPWZ1bmN0aW9uKG4scil7dGhpcy5jaGlsZHJlbi5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uKHQsZSl7ZS5mb3JlYWNoXyhodShuLHQpLHIpfSksdGhpcy52YWx1ZSYmcihuLHRoaXMudmFsdWUpfSxraC5wcm90b3R5cGUuZm9yZWFjaENoaWxkPWZ1bmN0aW9uKG4pe3RoaXMuY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbih0LGUpe2UudmFsdWUmJm4odCxlLnZhbHVlKX0pfSxraCk7ZnVuY3Rpb24ga2godCxlKXt2b2lkIDA9PT1lJiYoZT15aD15aHx8bmV3IHF1KEJhKSksdGhpcy52YWx1ZT10LHRoaXMuY2hpbGRyZW49ZX12YXIgTmg9KEFoLmVtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBaChuZXcgQ2gobnVsbCkpfSxBaCk7ZnVuY3Rpb24gQWgodCl7dGhpcy53cml0ZVRyZWVfPXR9ZnVuY3Rpb24gUmgodCxlLG4pe2lmKGx1KGUpKXJldHVybiBuZXcgTmgobmV3IENoKG4pKTt2YXIgcj10LndyaXRlVHJlZV8uZmluZFJvb3RNb3N0VmFsdWVBbmRQYXRoKGUpO2lmKG51bGwhPXIpe3ZhciBpPXIucGF0aCxvPXIudmFsdWUscj1mdShpLGUpLG89by51cGRhdGVDaGlsZChyLG4pO3JldHVybiBuZXcgTmgodC53cml0ZVRyZWVfLnNldChpLG8pKX1uPW5ldyBDaChuKSxuPXQud3JpdGVUcmVlXy5zZXRUcmVlKGUsbik7cmV0dXJuIG5ldyBOaChuKX1mdW5jdGlvbiBQaCh0LG4sZSl7dmFyIHI9dDtyZXR1cm4gc3MoZSxmdW5jdGlvbih0LGUpe3I9UmgocixodShuLHQpLGUpfSkscn1mdW5jdGlvbiBPaCh0LGUpe2lmKGx1KGUpKXJldHVybiBOaC5lbXB0eSgpO2U9dC53cml0ZVRyZWVfLnNldFRyZWUoZSxuZXcgQ2gobnVsbCkpO3JldHVybiBuZXcgTmgoZSl9ZnVuY3Rpb24gRGgodCxlKXtyZXR1cm4gbnVsbCE9eGgodCxlKX1mdW5jdGlvbiB4aCh0LGUpe3ZhciBuPXQud3JpdGVUcmVlXy5maW5kUm9vdE1vc3RWYWx1ZUFuZFBhdGgoZSk7cmV0dXJuIG51bGwhPW4/dC53cml0ZVRyZWVfLmdldChuLnBhdGgpLmdldENoaWxkKGZ1KG4ucGF0aCxlKSk6bnVsbH1mdW5jdGlvbiBMaCh0KXt2YXIgbj1bXSxlPXQud3JpdGVUcmVlXy52YWx1ZTtyZXR1cm4gbnVsbCE9ZT9lLmlzTGVhZk5vZGUoKXx8ZS5mb3JFYWNoQ2hpbGQoWnUsZnVuY3Rpb24odCxlKXtuLnB1c2gobmV3IGt1KHQsZSkpfSk6dC53cml0ZVRyZWVfLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24odCxlKXtudWxsIT1lLnZhbHVlJiZuLnB1c2gobmV3IGt1KHQsZS52YWx1ZSkpfSksbn1mdW5jdGlvbiBNaCh0LGUpe2lmKGx1KGUpKXJldHVybiB0O3ZhciBuPXhoKHQsZSk7cmV0dXJuIG5ldyBOaChudWxsIT1uP25ldyBDaChuKTp0LndyaXRlVHJlZV8uc3VidHJlZShlKSl9ZnVuY3Rpb24gRmgodCl7cmV0dXJuIHQud3JpdGVUcmVlXy5pc0VtcHR5KCl9ZnVuY3Rpb24gVWgodCxlKXtyZXR1cm4gZnVuY3Rpb24gbihyLHQsaSl7e2lmKG51bGwhPXQudmFsdWUpcmV0dXJuIGkudXBkYXRlQ2hpbGQocix0LnZhbHVlKTt2YXIgbz1udWxsO3JldHVybiB0LmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24odCxlKXtcIi5wcmlvcml0eVwiPT09dD8oYW8obnVsbCE9PWUudmFsdWUsXCJQcmlvcml0eSB3cml0ZXMgbXVzdCBhbHdheXMgYmUgbGVhZiBub2Rlc1wiKSxvPWUudmFsdWUpOmk9bihodShyLHQpLGUsaSl9KSxpPSFpLmdldENoaWxkKHIpLmlzRW1wdHkoKSYmbnVsbCE9PW8/aS51cGRhdGVDaGlsZChodShyLFwiLnByaW9yaXR5XCIpLG8pOml9fShydSgpLHQud3JpdGVUcmVlXyxlKX1mdW5jdGlvbiBqaCh0LGUpe3JldHVybiBKaChlLHQpfWZ1bmN0aW9uIHFoKGUsbil7dmFyIHQ9ZS5hbGxXcml0ZXMuZmluZEluZGV4KGZ1bmN0aW9uKHQpe3JldHVybiB0LndyaXRlSWQ9PT1ufSk7YW8oMDw9dCxcInJlbW92ZVdyaXRlIGNhbGxlZCB3aXRoIG5vbmV4aXN0ZW50IHdyaXRlSWQuXCIpO3ZhciByPWUuYWxsV3JpdGVzW3RdO2UuYWxsV3JpdGVzLnNwbGljZSh0LDEpO2Zvcih2YXIgaSxvPXIudmlzaWJsZSxhPSExLHM9ZS5hbGxXcml0ZXMubGVuZ3RoLTE7byYmMDw9czspe3ZhciB1PWUuYWxsV3JpdGVzW3NdO3UudmlzaWJsZSYmKHQ8PXMmJmZ1bmN0aW9uKHQsZSl7e2lmKHQuc25hcClyZXR1cm4gdnUodC5wYXRoLGUpO2Zvcih2YXIgbiBpbiB0LmNoaWxkcmVuKWlmKHQuY2hpbGRyZW4uaGFzT3duUHJvcGVydHkobikmJnZ1KGh1KHQucGF0aCxuKSxlKSlyZXR1cm4hMDtyZXR1cm4hMX19KHUsci5wYXRoKT9vPSExOnZ1KHIucGF0aCx1LnBhdGgpJiYoYT0hMCkpLHMtLX1yZXR1cm4hIW8mJihhPygoaT1lKS52aXNpYmxlV3JpdGVzPUJoKGkuYWxsV3JpdGVzLFZoLHJ1KCkpLDA8aS5hbGxXcml0ZXMubGVuZ3RoP2kubGFzdFdyaXRlSWQ9aS5hbGxXcml0ZXNbaS5hbGxXcml0ZXMubGVuZ3RoLTFdLndyaXRlSWQ6aS5sYXN0V3JpdGVJZD0tMSk6ci5zbmFwP2UudmlzaWJsZVdyaXRlcz1PaChlLnZpc2libGVXcml0ZXMsci5wYXRoKTpzcyhyLmNoaWxkcmVuLGZ1bmN0aW9uKHQpe2UudmlzaWJsZVdyaXRlcz1PaChlLnZpc2libGVXcml0ZXMsaHUoci5wYXRoLHQpKX0pLCEwKX1mdW5jdGlvbiBWaCh0KXtyZXR1cm4gdC52aXNpYmxlfWZ1bmN0aW9uIEJoKHQsZSxuKXtmb3IodmFyIHI9TmguZW1wdHkoKSxpPTA7aTx0Lmxlbmd0aDsrK2kpe3ZhciBvPXRbaV07aWYoZShvKSl7dmFyIGE9by5wYXRoLHM9dm9pZCAwO2lmKG8uc25hcCl2dShuLGEpP3I9UmgocixzPWZ1KG4sYSksby5zbmFwKTp2dShhLG4pJiYocz1mdShhLG4pLHI9UmgocixydSgpLG8uc25hcC5nZXRDaGlsZChzKSkpO2Vsc2V7aWYoIW8uY2hpbGRyZW4pdGhyb3cgc28oXCJXcml0ZVJlY29yZCBzaG91bGQgaGF2ZSAuc25hcCBvciAuY2hpbGRyZW5cIik7dnUobixhKT9yPVBoKHIscz1mdShuLGEpLG8uY2hpbGRyZW4pOnZ1KGEsbikmJihsdShzPWZ1KGEsbikpP3I9UGgocixydSgpLG8uY2hpbGRyZW4pOihvPXhvKG8uY2hpbGRyZW4saXUocykpKSYmKHM9by5nZXRDaGlsZChhdShzKSkscj1SaChyLHJ1KCkscykpKX19fXJldHVybiByfWZ1bmN0aW9uIEtoKHQsZSxuLHIsaSl7aWYocnx8aSl7dmFyIG89TWgodC52aXNpYmxlV3JpdGVzLGUpO2lmKCFpJiZGaChvKSlyZXR1cm4gbjtpZihpfHxudWxsIT1ufHxEaChvLHJ1KCkpKXJldHVybiBVaChCaCh0LmFsbFdyaXRlcyxmdW5jdGlvbih0KXtyZXR1cm4odC52aXNpYmxlfHxpKSYmKCFyfHwhfnIuaW5kZXhPZih0LndyaXRlSWQpKSYmKHZ1KHQucGF0aCxlKXx8dnUoZSx0LnBhdGgpKX0sZSksbnx8aGMuRU1QVFlfTk9ERSk7cmV0dXJuIG51bGx9bz14aCh0LnZpc2libGVXcml0ZXMsZSk7aWYobnVsbCE9bylyZXR1cm4gbzt0PU1oKHQudmlzaWJsZVdyaXRlcyxlKTtyZXR1cm4gRmgodCk/bjpudWxsIT1ufHxEaCh0LHJ1KCkpP1VoKHQsbnx8aGMuRU1QVFlfTk9ERSk6bnVsbH1mdW5jdGlvbiBXaCh0LGUsbixyKXtyZXR1cm4gS2godC53cml0ZVRyZWUsdC50cmVlUGF0aCxlLG4scil9ZnVuY3Rpb24gSGgodCxlKXtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe3ZhciByPWhjLkVNUFRZX05PREUsaT14aCh0LnZpc2libGVXcml0ZXMsZSk7aWYoaSlyZXR1cm4gaS5pc0xlYWZOb2RlKCl8fGkuZm9yRWFjaENoaWxkKFp1LGZ1bmN0aW9uKHQsZSl7cj1yLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKHQsZSl9KSxyO2lmKG4pe3ZhciBvPU1oKHQudmlzaWJsZVdyaXRlcyxlKTtyZXR1cm4gbi5mb3JFYWNoQ2hpbGQoWnUsZnVuY3Rpb24odCxlKXtlPVVoKE1oKG8sbmV3IGV1KHQpKSxlKTtyPXIudXBkYXRlSW1tZWRpYXRlQ2hpbGQodCxlKX0pLExoKG8pLmZvckVhY2goZnVuY3Rpb24odCl7cj1yLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKHQubmFtZSx0Lm5vZGUpfSkscn1yZXR1cm4gTGgoTWgodC52aXNpYmxlV3JpdGVzLGUpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3I9ci51cGRhdGVJbW1lZGlhdGVDaGlsZCh0Lm5hbWUsdC5ub2RlKX0pLHJ9KHQud3JpdGVUcmVlLHQudHJlZVBhdGgsZSl9ZnVuY3Rpb24gR2godCxlLG4scil7cmV0dXJuIGk9dC53cml0ZVRyZWUsdD10LnRyZWVQYXRoLGU9ZSxyPXIsYW8obnx8cixcIkVpdGhlciBleGlzdGluZ0V2ZW50U25hcCBvciBleGlzdGluZ1NlcnZlclNuYXAgbXVzdCBleGlzdFwiKSx0PWh1KHQsZSksRGgoaS52aXNpYmxlV3JpdGVzLHQpP251bGw6RmgodD1NaChpLnZpc2libGVXcml0ZXMsdCkpP3IuZ2V0Q2hpbGQoZSk6VWgodCxyLmdldENoaWxkKGUpKTt2YXIgaX1mdW5jdGlvbiB6aCh0LGUpe3JldHVybiBuPXQud3JpdGVUcmVlLGU9aHUodC50cmVlUGF0aCxlKSx4aChuLnZpc2libGVXcml0ZXMsZSk7dmFyIG59ZnVuY3Rpb24gUWgodCxlLG4scixpLG8pe3JldHVybiBmdW5jdGlvbih0LGUsbixyLGksbyxhKXt2YXIgcyx0PU1oKHQudmlzaWJsZVdyaXRlcyxlKTtpZihudWxsIT0oZT14aCh0LHJ1KCkpKSlzPWU7ZWxzZXtpZihudWxsPT1uKXJldHVybltdO3M9VWgodCxuKX1pZigocz1zLndpdGhJbmRleChhKSkuaXNFbXB0eSgpfHxzLmlzTGVhZk5vZGUoKSlyZXR1cm5bXTtmb3IodmFyIHU9W10sYz1hLmdldENvbXBhcmUoKSxoPW8/cy5nZXRSZXZlcnNlSXRlcmF0b3JGcm9tKHIsYSk6cy5nZXRJdGVyYXRvckZyb20ocixhKSxsPWguZ2V0TmV4dCgpO2wmJnUubGVuZ3RoPGk7KTAhPT1jKGwscikmJnUucHVzaChsKSxsPWguZ2V0TmV4dCgpO3JldHVybiB1fSh0LndyaXRlVHJlZSx0LnRyZWVQYXRoLGUsbixyLGksbyl9ZnVuY3Rpb24gWWgodCxlLG4pe3JldHVybiByPXQud3JpdGVUcmVlLGk9dC50cmVlUGF0aCx0PW4sZT1odShpLG49ZSksbnVsbCE9KGk9eGgoci52aXNpYmxlV3JpdGVzLGUpKT9pOnQuaXNDb21wbGV0ZUZvckNoaWxkKG4pP1VoKE1oKHIudmlzaWJsZVdyaXRlcyxlKSx0LmdldE5vZGUoKS5nZXRJbW1lZGlhdGVDaGlsZChuKSk6bnVsbDt2YXIgcixpfWZ1bmN0aW9uIFhoKHQsZSl7cmV0dXJuIEpoKGh1KHQudHJlZVBhdGgsZSksdC53cml0ZVRyZWUpfWZ1bmN0aW9uIEpoKHQsZSl7cmV0dXJue3RyZWVQYXRoOnQsd3JpdGVUcmVlOmV9fXZhciAkaD0oWmgucHJvdG90eXBlLnRyYWNrQ2hpbGRDaGFuZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49dC5jaGlsZE5hbWU7YW8oXCJjaGlsZF9hZGRlZFwiPT09ZXx8XCJjaGlsZF9jaGFuZ2VkXCI9PT1lfHxcImNoaWxkX3JlbW92ZWRcIj09PWUsXCJPbmx5IGNoaWxkIGNoYW5nZXMgc3VwcG9ydGVkIGZvciB0cmFja2luZ1wiKSxhbyhcIi5wcmlvcml0eVwiIT09bixcIk9ubHkgbm9uLXByaW9yaXR5IGNoaWxkIGNoYW5nZXMgY2FuIGJlIHRyYWNrZWQuXCIpO3ZhciByPXRoaXMuY2hhbmdlTWFwLmdldChuKTtpZihyKXt2YXIgaT1yLnR5cGU7aWYoXCJjaGlsZF9hZGRlZFwiPT09ZSYmXCJjaGlsZF9yZW1vdmVkXCI9PT1pKXRoaXMuY2hhbmdlTWFwLnNldChuLFBjKG4sdC5zbmFwc2hvdE5vZGUsci5zbmFwc2hvdE5vZGUpKTtlbHNlIGlmKFwiY2hpbGRfcmVtb3ZlZFwiPT09ZSYmXCJjaGlsZF9hZGRlZFwiPT09aSl0aGlzLmNoYW5nZU1hcC5kZWxldGUobik7ZWxzZSBpZihcImNoaWxkX3JlbW92ZWRcIj09PWUmJlwiY2hpbGRfY2hhbmdlZFwiPT09aSl0aGlzLmNoYW5nZU1hcC5zZXQobixSYyhuLHIub2xkU25hcCkpO2Vsc2UgaWYoXCJjaGlsZF9jaGFuZ2VkXCI9PT1lJiZcImNoaWxkX2FkZGVkXCI9PT1pKXRoaXMuY2hhbmdlTWFwLnNldChuLEFjKG4sdC5zbmFwc2hvdE5vZGUpKTtlbHNle2lmKFwiY2hpbGRfY2hhbmdlZFwiIT09ZXx8XCJjaGlsZF9jaGFuZ2VkXCIhPT1pKXRocm93IHNvKFwiSWxsZWdhbCBjb21iaW5hdGlvbiBvZiBjaGFuZ2VzOiBcIit0K1wiIG9jY3VycmVkIGFmdGVyIFwiK3IpO3RoaXMuY2hhbmdlTWFwLnNldChuLFBjKG4sdC5zbmFwc2hvdE5vZGUsci5vbGRTbmFwKSl9fWVsc2UgdGhpcy5jaGFuZ2VNYXAuc2V0KG4sdCl9LFpoLnByb3RvdHlwZS5nZXRDaGFuZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5jaGFuZ2VNYXAudmFsdWVzKCkpfSxaaCk7ZnVuY3Rpb24gWmgoKXt0aGlzLmNoYW5nZU1hcD1uZXcgTWFwfWZ1bmN0aW9uIHRsKCl7fXZhciBlbD1uZXcodGwucHJvdG90eXBlLmdldENvbXBsZXRlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGx9LHRsLnByb3RvdHlwZS5nZXRDaGlsZEFmdGVyQ2hpbGQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBudWxsfSx0bCksbmw9KHJsLnByb3RvdHlwZS5nZXRDb21wbGV0ZUNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudmlld0NhY2hlXy5ldmVudENhY2hlO2lmKGUuaXNDb21wbGV0ZUZvckNoaWxkKHQpKXJldHVybiBlLmdldE5vZGUoKS5nZXRJbW1lZGlhdGVDaGlsZCh0KTtlPW51bGwhPXRoaXMub3B0Q29tcGxldGVTZXJ2ZXJDYWNoZV8/bmV3IHZoKHRoaXMub3B0Q29tcGxldGVTZXJ2ZXJDYWNoZV8sITAsITEpOnRoaXMudmlld0NhY2hlXy5zZXJ2ZXJDYWNoZTtyZXR1cm4gWWgodGhpcy53cml0ZXNfLHQsZSl9LHJsLnByb3RvdHlwZS5nZXRDaGlsZEFmdGVyQ2hpbGQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPW51bGwhPXRoaXMub3B0Q29tcGxldGVTZXJ2ZXJDYWNoZV8/dGhpcy5vcHRDb21wbGV0ZVNlcnZlckNhY2hlXzpTaCh0aGlzLnZpZXdDYWNoZV8pLHQ9UWgodGhpcy53cml0ZXNfLHIsZSwxLG4sdCk7cmV0dXJuIDA9PT10Lmxlbmd0aD9udWxsOnRbMF19LHJsKTtmdW5jdGlvbiBybCh0LGUsbil7dm9pZCAwPT09biYmKG49bnVsbCksdGhpcy53cml0ZXNfPXQsdGhpcy52aWV3Q2FjaGVfPWUsdGhpcy5vcHRDb21wbGV0ZVNlcnZlckNhY2hlXz1ufWZ1bmN0aW9uIGlsKHQsZSxuLHIsaSl7dmFyIG8sYSxzLHUsYyxoLGwsZixwPW5ldyAkaDtpZihuLnR5cGU9PT1laC5PVkVSV1JJVEUpdmFyIGQ9bix2PWQuc291cmNlLmZyb21Vc2VyP3NsKHQsZSxkLnBhdGgsZC5zbmFwLHIsaSxwKTooYW8oZC5zb3VyY2UuZnJvbVNlcnZlcixcIlVua25vd24gc291cmNlLlwiKSxvPWQuc291cmNlLnRhZ2dlZHx8ZS5zZXJ2ZXJDYWNoZS5pc0ZpbHRlcmVkKCkmJiFsdShkLnBhdGgpLGFsKHQsZSxkLnBhdGgsZC5zbmFwLHIsaSxvLHApKTtlbHNlIGlmKG4udHlwZT09PWVoLk1FUkdFKXt2YXIgZz1uO3Y9Zy5zb3VyY2UuZnJvbVVzZXI/KGE9dCxzPWUsdT1nLnBhdGgsZD1nLmNoaWxkcmVuLGM9cixoPWksbD1wLGY9cyxkLmZvcmVhY2goZnVuY3Rpb24odCxlKXt0PWh1KHUsdCk7dWwocyxpdSh0KSkmJihmPXNsKGEsZix0LGUsYyxoLGwpKX0pLGQuZm9yZWFjaChmdW5jdGlvbih0LGUpe3Q9aHUodSx0KTt1bChzLGl1KHQpKXx8KGY9c2woYSxmLHQsZSxjLGgsbCkpfSksZik6KGFvKGcuc291cmNlLmZyb21TZXJ2ZXIsXCJVbmtub3duIHNvdXJjZS5cIiksbz1nLnNvdXJjZS50YWdnZWR8fGUuc2VydmVyQ2FjaGUuaXNGaWx0ZXJlZCgpLGhsKHQsZSxnLnBhdGgsZy5jaGlsZHJlbixyLGksbyxwKSl9ZWxzZSBpZihuLnR5cGU9PT1laC5BQ0tfVVNFUl9XUklURSl7dmFyIHk9bjt2PXkucmV2ZXJ0P2Z1bmN0aW9uKHQsZSxuLHIsaSxvKXt2YXIgYTt7aWYobnVsbCE9emgocixuKSlyZXR1cm4gZTt2YXIgcyx1LGM9bmV3IG5sKHIsZSxpKSxoPWUuZXZlbnRDYWNoZS5nZXROb2RlKCksaT12b2lkIDA7cmV0dXJuIGx1KG4pfHxcIi5wcmlvcml0eVwiPT09aXUobik/KHU9dm9pZCAwLHU9ZS5zZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKT9XaChyLFNoKGUpKToocz1lLnNlcnZlckNhY2hlLmdldE5vZGUoKSxhbyhzIGluc3RhbmNlb2YgaGMsXCJzZXJ2ZXJDaGlsZHJlbiB3b3VsZCBiZSBjb21wbGV0ZSBpZiBsZWFmIG5vZGVcIiksSGgocixzKSksaT10LmZpbHRlci51cGRhdGVGdWxsTm9kZShoLHUsbykpOihzPWl1KG4pLG51bGw9PSh1PVloKHIscyxlLnNlcnZlckNhY2hlKSkmJmUuc2VydmVyQ2FjaGUuaXNDb21wbGV0ZUZvckNoaWxkKHMpJiYodT1oLmdldEltbWVkaWF0ZUNoaWxkKHMpKSwoaT1udWxsIT11P3QuZmlsdGVyLnVwZGF0ZUNoaWxkKGgscyx1LGF1KG4pLGMsbyk6ZS5ldmVudENhY2hlLmdldE5vZGUoKS5oYXNDaGlsZChzKT90LmZpbHRlci51cGRhdGVDaGlsZChoLHMsaGMuRU1QVFlfTk9ERSxhdShuKSxjLG8pOmgpLmlzRW1wdHkoKSYmZS5zZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSYmKGE9V2gocixTaChlKSkpLmlzTGVhZk5vZGUoKSYmKGk9dC5maWx0ZXIudXBkYXRlRnVsbE5vZGUoaSxhLG8pKSksYT1lLnNlcnZlckNhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpfHxudWxsIT16aChyLHJ1KCkpLEloKGUsaSxhLHQuZmlsdGVyLmZpbHRlcnNOb2RlcygpKX19KHQsZSx5LnBhdGgscixpLHApOmZ1bmN0aW9uKHQsZSxyLG4saSxvLGEpe2lmKG51bGwhPXpoKGkscikpcmV0dXJuIGU7dmFyIHM9ZS5zZXJ2ZXJDYWNoZS5pc0ZpbHRlcmVkKCksdT1lLnNlcnZlckNhY2hlO3tpZihudWxsIT1uLnZhbHVlKXtpZihsdShyKSYmdS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKXx8dS5pc0NvbXBsZXRlRm9yUGF0aChyKSlyZXR1cm4gYWwodCxlLHIsdS5nZXROb2RlKCkuZ2V0Q2hpbGQociksaSxvLHMsYSk7aWYobHUocikpe3ZhciBjPW5ldyBDaChudWxsKTtyZXR1cm4gdS5nZXROb2RlKCkuZm9yRWFjaENoaWxkKER1LGZ1bmN0aW9uKHQsZSl7Yz1jLnNldChuZXcgZXUodCksZSl9KSxobCh0LGUscixjLGksbyxzLGEpfXJldHVybiBlfXZhciBoPW5ldyBDaChudWxsKTtyZXR1cm4gbi5mb3JlYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49aHUocix0KTt1LmlzQ29tcGxldGVGb3JQYXRoKG4pJiYoaD1oLnNldCh0LHUuZ2V0Tm9kZSgpLmdldENoaWxkKG4pKSl9KSxobCh0LGUscixoLGksbyxzLGEpfX0odCxlLHkucGF0aCx5LmFmZmVjdGVkVHJlZSxyLGkscCl9ZWxzZXtpZihuLnR5cGUhPT1laC5MSVNURU5fQ09NUExFVEUpdGhyb3cgc28oXCJVbmtub3duIG9wZXJhdGlvbiB0eXBlOiBcIituLnR5cGUpO289dCx5PWUsaT1uLnBhdGgsdD1yLG49cCxyPXkuc2VydmVyQ2FjaGUscj1UaCh5LHIuZ2V0Tm9kZSgpLHIuaXNGdWxseUluaXRpYWxpemVkKCl8fGx1KGkpLHIuaXNGaWx0ZXJlZCgpKSx2PW9sKG8scixpLHQsZWwsbil9cD1wLmdldENoYW5nZXMoKTtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe3ZhciByPWUuZXZlbnRDYWNoZTt7dmFyIGksbztyLmlzRnVsbHlJbml0aWFsaXplZCgpJiYoaT1yLmdldE5vZGUoKS5pc0xlYWZOb2RlKCl8fHIuZ2V0Tm9kZSgpLmlzRW1wdHkoKSxvPUVoKHQpLCgwPG4ubGVuZ3RofHwhdC5ldmVudENhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpfHxpJiYhci5nZXROb2RlKCkuZXF1YWxzKG8pfHwhci5nZXROb2RlKCkuZ2V0UHJpb3JpdHkoKS5lcXVhbHMoby5nZXRQcmlvcml0eSgpKSkmJm4ucHVzaChOYyhFaChlKSkpKX19KGUsdixwKSx7dmlld0NhY2hlOnYsY2hhbmdlczpwfX1mdW5jdGlvbiBvbCh0LGUsbixyLGksbyl7dmFyIGE9ZS5ldmVudENhY2hlO2lmKG51bGwhPXpoKHIsbikpcmV0dXJuIGU7dmFyIHMsdSxjLGgsbD12b2lkIDAsZj12b2lkIDA7cmV0dXJuIGw9bHUobik/KGFvKGUuc2VydmVyQ2FjaGUuaXNGdWxseUluaXRpYWxpemVkKCksXCJJZiBjaGFuZ2UgcGF0aCBpcyBlbXB0eSwgd2UgbXVzdCBoYXZlIGNvbXBsZXRlIHNlcnZlciBkYXRhXCIpLGUuc2VydmVyQ2FjaGUuaXNGaWx0ZXJlZCgpPyhzPUhoKHIsKHM9U2goZSkpaW5zdGFuY2VvZiBoYz9zOmhjLkVNUFRZX05PREUpLHQuZmlsdGVyLnVwZGF0ZUZ1bGxOb2RlKGUuZXZlbnRDYWNoZS5nZXROb2RlKCkscyxvKSk6KHU9V2gocixTaChlKSksdC5maWx0ZXIudXBkYXRlRnVsbE5vZGUoZS5ldmVudENhY2hlLmdldE5vZGUoKSx1LG8pKSk6XCIucHJpb3JpdHlcIj09PSh1PWl1KG4pKT8oYW8oMT09PW91KG4pLFwiQ2FuJ3QgaGF2ZSBhIHByaW9yaXR5IHdpdGggYWRkaXRpb25hbCBwYXRoIGNvbXBvbmVudHNcIiksbnVsbCE9KGg9R2gocixuLGM9YS5nZXROb2RlKCksZj1lLnNlcnZlckNhY2hlLmdldE5vZGUoKSkpP3QuZmlsdGVyLnVwZGF0ZVByaW9yaXR5KGMsaCk6YS5nZXROb2RlKCkpOihjPWF1KG4pLGg9dm9pZCAwLG51bGwhPShoPWEuaXNDb21wbGV0ZUZvckNoaWxkKHUpPyhmPWUuc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpLG51bGwhPShmPUdoKHIsbixhLmdldE5vZGUoKSxmKSk/YS5nZXROb2RlKCkuZ2V0SW1tZWRpYXRlQ2hpbGQodSkudXBkYXRlQ2hpbGQoYyxmKTphLmdldE5vZGUoKS5nZXRJbW1lZGlhdGVDaGlsZCh1KSk6WWgocix1LGUuc2VydmVyQ2FjaGUpKT90LmZpbHRlci51cGRhdGVDaGlsZChhLmdldE5vZGUoKSx1LGgsYyxpLG8pOmEuZ2V0Tm9kZSgpKSxJaChlLGwsYS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKXx8bHUobiksdC5maWx0ZXIuZmlsdGVyc05vZGVzKCkpfWZ1bmN0aW9uIGFsKHQsZSxuLHIsaSxvLGEscyl7dmFyIHU9ZS5zZXJ2ZXJDYWNoZSxjPWE/dC5maWx0ZXI6dC5maWx0ZXIuZ2V0SW5kZXhlZEZpbHRlcigpO2lmKGx1KG4pKWw9Yy51cGRhdGVGdWxsTm9kZSh1LmdldE5vZGUoKSxyLG51bGwpO2Vsc2UgaWYoYy5maWx0ZXJzTm9kZXMoKSYmIXUuaXNGaWx0ZXJlZCgpKXZhciBoPXUuZ2V0Tm9kZSgpLnVwZGF0ZUNoaWxkKG4sciksbD1jLnVwZGF0ZUZ1bGxOb2RlKHUuZ2V0Tm9kZSgpLGgsbnVsbCk7ZWxzZXthPWl1KG4pO2lmKCF1LmlzQ29tcGxldGVGb3JQYXRoKG4pJiYxPG91KG4pKXJldHVybiBlO2g9YXUobikscj11LmdldE5vZGUoKS5nZXRJbW1lZGlhdGVDaGlsZChhKS51cGRhdGVDaGlsZChoLHIpO2w9XCIucHJpb3JpdHlcIj09PWE/Yy51cGRhdGVQcmlvcml0eSh1LmdldE5vZGUoKSxyKTpjLnVwZGF0ZUNoaWxkKHUuZ2V0Tm9kZSgpLGEscixoLGVsLG51bGwpfWM9VGgoZSxsLHUuaXNGdWxseUluaXRpYWxpemVkKCl8fGx1KG4pLGMuZmlsdGVyc05vZGVzKCkpO3JldHVybiBvbCh0LGMsbixpLG5ldyBubChpLGMsbykscyl9ZnVuY3Rpb24gc2wodCxlLG4scixpLG8sYSl7dmFyIHMsdSxjPWUuZXZlbnRDYWNoZSxoPW5ldyBubChpLGUsbyk7cmV0dXJuIGx1KG4pPyh1PXQuZmlsdGVyLnVwZGF0ZUZ1bGxOb2RlKGUuZXZlbnRDYWNoZS5nZXROb2RlKCkscixhKSxJaChlLHUsITAsdC5maWx0ZXIuZmlsdGVyc05vZGVzKCkpKTpcIi5wcmlvcml0eVwiPT09KHM9aXUobikpPyh1PXQuZmlsdGVyLnVwZGF0ZVByaW9yaXR5KGUuZXZlbnRDYWNoZS5nZXROb2RlKCksciksSWgoZSx1LGMuaXNGdWxseUluaXRpYWxpemVkKCksYy5pc0ZpbHRlcmVkKCkpKTooaT1hdShuKSxvPWMuZ2V0Tm9kZSgpLmdldEltbWVkaWF0ZUNoaWxkKHMpLHU9dm9pZCAwLHU9bHUoaSk/cjpudWxsIT0obj1oLmdldENvbXBsZXRlQ2hpbGQocykpP1wiLnByaW9yaXR5XCI9PT1zdShpKSYmbi5nZXRDaGlsZChjdShpKSkuaXNFbXB0eSgpP246bi51cGRhdGVDaGlsZChpLHIpOmhjLkVNUFRZX05PREUsby5lcXVhbHModSk/ZTpJaChlLHQuZmlsdGVyLnVwZGF0ZUNoaWxkKGMuZ2V0Tm9kZSgpLHMsdSxpLGgsYSksYy5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSx0LmZpbHRlci5maWx0ZXJzTm9kZXMoKSkpfWZ1bmN0aW9uIHVsKHQsZSl7cmV0dXJuIHQuZXZlbnRDYWNoZS5pc0NvbXBsZXRlRm9yQ2hpbGQoZSl9ZnVuY3Rpb24gY2wodCxuLGUpe3JldHVybiBlLmZvcmVhY2goZnVuY3Rpb24odCxlKXtuPW4udXBkYXRlQ2hpbGQodCxlKX0pLG59ZnVuY3Rpb24gaGwocixpLHQsZSxvLGEscyx1KXtpZihpLnNlcnZlckNhY2hlLmdldE5vZGUoKS5pc0VtcHR5KCkmJiFpLnNlcnZlckNhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpKXJldHVybiBpO3ZhciBjPWksZT1sdSh0KT9lOm5ldyBDaChudWxsKS5zZXRUcmVlKHQsZSksaD1pLnNlcnZlckNhY2hlLmdldE5vZGUoKTtyZXR1cm4gZS5jaGlsZHJlbi5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uKHQsZSl7aC5oYXNDaGlsZCh0KSYmKGU9Y2woMCxpLnNlcnZlckNhY2hlLmdldE5vZGUoKS5nZXRJbW1lZGlhdGVDaGlsZCh0KSxlKSxjPWFsKHIsYyxuZXcgZXUodCksZSxvLGEscyx1KSl9KSxlLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24odCxlKXt2YXIgbj0haS5zZXJ2ZXJDYWNoZS5pc0NvbXBsZXRlRm9yQ2hpbGQodCkmJnZvaWQgMD09PWUudmFsdWU7aC5oYXNDaGlsZCh0KXx8bnx8KGU9Y2woMCxpLnNlcnZlckNhY2hlLmdldE5vZGUoKS5nZXRJbW1lZGlhdGVDaGlsZCh0KSxlKSxjPWFsKHIsYyxuZXcgZXUodCksZSxvLGEscyx1KSl9KSxjfXZhciBsbCxmbD0oT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsLnByb3RvdHlwZSxcInF1ZXJ5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5X30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxwbCk7ZnVuY3Rpb24gcGwodCxlKXt0aGlzLnF1ZXJ5Xz10LHRoaXMuZXZlbnRSZWdpc3RyYXRpb25zXz1bXTt2YXIgbj10aGlzLnF1ZXJ5Xy5fcXVlcnlQYXJhbXMscj1uZXcgT2Mobi5nZXRJbmRleCgpKSxpPShvPW4pLmxvYWRzQWxsRGF0YSgpP25ldyBPYyhvLmdldEluZGV4KCkpOm5ldyhvLmhhc0xpbWl0KCk/TWM6eGMpKG8pO3RoaXMucHJvY2Vzc29yXz17ZmlsdGVyOml9O3ZhciB0PWUuc2VydmVyQ2FjaGUsbj1lLmV2ZW50Q2FjaGUsbz1yLnVwZGF0ZUZ1bGxOb2RlKGhjLkVNUFRZX05PREUsdC5nZXROb2RlKCksbnVsbCksZT1pLnVwZGF0ZUZ1bGxOb2RlKGhjLkVNUFRZX05PREUsbi5nZXROb2RlKCksbnVsbCkscj1uZXcgdmgobyx0LmlzRnVsbHlJbml0aWFsaXplZCgpLHIuZmlsdGVyc05vZGVzKCkpLGk9bmV3IHZoKGUsbi5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSxpLmZpbHRlcnNOb2RlcygpKTt0aGlzLnZpZXdDYWNoZV89d2goaSxyKSx0aGlzLmV2ZW50R2VuZXJhdG9yXz1uZXcgbWgodGhpcy5xdWVyeV8pfWZ1bmN0aW9uIGRsKHQpe3JldHVybiAwPT09dC5ldmVudFJlZ2lzdHJhdGlvbnNfLmxlbmd0aH1mdW5jdGlvbiB2bCh0LGUsbil7dmFyIHIsaT1bXTtpZihuJiYoYW8obnVsbD09ZSxcIkEgY2FuY2VsIHNob3VsZCBjYW5jZWwgYWxsIGV2ZW50IHJlZ2lzdHJhdGlvbnMuXCIpLHI9dC5xdWVyeS5fcGF0aCx0LmV2ZW50UmVnaXN0cmF0aW9uc18uZm9yRWFjaChmdW5jdGlvbih0KXt0PXQuY3JlYXRlQ2FuY2VsRXZlbnQobixyKTt0JiZpLnB1c2godCl9KSksZSl7Zm9yKHZhciBvPVtdLGE9MDthPHQuZXZlbnRSZWdpc3RyYXRpb25zXy5sZW5ndGg7KythKXt2YXIgcz10LmV2ZW50UmVnaXN0cmF0aW9uc19bYV07aWYocy5tYXRjaGVzKGUpKXtpZihlLmhhc0FueUNhbGxiYWNrKCkpe289by5jb25jYXQodC5ldmVudFJlZ2lzdHJhdGlvbnNfLnNsaWNlKGErMSkpO2JyZWFrfX1lbHNlIG8ucHVzaChzKX10LmV2ZW50UmVnaXN0cmF0aW9uc189b31lbHNlIHQuZXZlbnRSZWdpc3RyYXRpb25zXz1bXTtyZXR1cm4gaX1mdW5jdGlvbiBnbCh0LGUsbixyKXtlLnR5cGU9PT1laC5NRVJHRSYmbnVsbCE9PWUuc291cmNlLnF1ZXJ5SWQmJihhbyhTaCh0LnZpZXdDYWNoZV8pLFwiV2Ugc2hvdWxkIGFsd2F5cyBoYXZlIGEgZnVsbCBjYWNoZSBiZWZvcmUgaGFuZGxpbmcgbWVyZ2VzXCIpLGFvKEVoKHQudmlld0NhY2hlXyksXCJNaXNzaW5nIGV2ZW50IGNhY2hlLCBldmVuIHRob3VnaCB3ZSBoYXZlIGEgc2VydmVyIGNhY2hlXCIpKTt2YXIgaT10LnZpZXdDYWNoZV8sZT1pbCh0LnByb2Nlc3Nvcl8saSxlLG4scik7cmV0dXJuIG49dC5wcm9jZXNzb3JfLHI9ZS52aWV3Q2FjaGUsYW8oci5ldmVudENhY2hlLmdldE5vZGUoKS5pc0luZGV4ZWQobi5maWx0ZXIuZ2V0SW5kZXgoKSksXCJFdmVudCBzbmFwIG5vdCBpbmRleGVkXCIpLGFvKHIuc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpLmlzSW5kZXhlZChuLmZpbHRlci5nZXRJbmRleCgpKSxcIlNlcnZlciBzbmFwIG5vdCBpbmRleGVkXCIpLGFvKGUudmlld0NhY2hlLnNlcnZlckNhY2hlLmlzRnVsbHlJbml0aWFsaXplZCgpfHwhaS5zZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSxcIk9uY2UgYSBzZXJ2ZXIgc25hcCBpcyBjb21wbGV0ZSwgaXQgc2hvdWxkIG5ldmVyIGdvIGJhY2tcIiksdC52aWV3Q2FjaGVfPWUudmlld0NhY2hlLHlsKHQsZS5jaGFuZ2VzLGUudmlld0NhY2hlLmV2ZW50Q2FjaGUuZ2V0Tm9kZSgpLG51bGwpfWZ1bmN0aW9uIHlsKHQsZSxuLHIpe3I9cj9bcl06dC5ldmVudFJlZ2lzdHJhdGlvbnNfO3JldHVybiBiaCh0LmV2ZW50R2VuZXJhdG9yXyxlLG4scil9dmFyIG1sLGJsPWZ1bmN0aW9uKCl7dGhpcy52aWV3cz1uZXcgTWFwfTtmdW5jdGlvbiBfbCh0LGUsbixyKXt2YXIgaSxvLGE9ZS5zb3VyY2UucXVlcnlJZDtpZihudWxsIT09YSl7dmFyIHM9dC52aWV3cy5nZXQoYSk7cmV0dXJuIGFvKG51bGwhPXMsXCJTeW5jVHJlZSBnYXZlIHVzIGFuIG9wIGZvciBhbiBpbnZhbGlkIHF1ZXJ5LlwiKSxnbChzLGUsbixyKX12YXIgdT1bXTt0cnl7Zm9yKHZhciBjPXRvKHQudmlld3MudmFsdWVzKCkpLGg9Yy5uZXh0KCk7IWguZG9uZTtoPWMubmV4dCgpKXM9aC52YWx1ZSx1PXUuY29uY2F0KGdsKHMsZSxuLHIpKX1jYXRjaCh0KXtpPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtoJiYhaC5kb25lJiYobz1jLnJldHVybikmJm8uY2FsbChjKX1maW5hbGx5e2lmKGkpdGhyb3cgaS5lcnJvcn19cmV0dXJuIHV9ZnVuY3Rpb24gd2wodCxlLG4scixpKXt2YXIgbz1lLl9xdWVyeUlkZW50aWZpZXIsdD10LnZpZXdzLmdldChvKTtpZih0KXJldHVybiB0O289V2gobixpP3I6bnVsbCksdD0hMSx0PSEhb3x8KG89ciBpbnN0YW5jZW9mIGhjP0hoKG4scik6aGMuRU1QVFlfTk9ERSwhMSksaT13aChuZXcgdmgobyx0LCExKSxuZXcgdmgocixpLCExKSk7cmV0dXJuIG5ldyBmbChlLGkpfWZ1bmN0aW9uIElsKHQsZSxuLHIsaSxvKXt2YXIgYSxvPXdsKHQsZSxyLGksbyk7cmV0dXJuIHQudmlld3MuaGFzKGUuX3F1ZXJ5SWRlbnRpZmllcil8fHQudmlld3Muc2V0KGUuX3F1ZXJ5SWRlbnRpZmllcixvKSxlPW4sby5ldmVudFJlZ2lzdHJhdGlvbnNfLnB1c2goZSksZT1uLG89KG49bykudmlld0NhY2hlXy5ldmVudENhY2hlLGE9W10sby5nZXROb2RlKCkuaXNMZWFmTm9kZSgpfHxvLmdldE5vZGUoKS5mb3JFYWNoQ2hpbGQoWnUsZnVuY3Rpb24odCxlKXthLnB1c2goQWModCxlKSl9KSxvLmlzRnVsbHlJbml0aWFsaXplZCgpJiZhLnB1c2goTmMoby5nZXROb2RlKCkpKSx5bChuLGEsby5nZXROb2RlKCksZSl9ZnVuY3Rpb24gVGwodCxlLG4scil7dmFyIGksbyxhPWUuX3F1ZXJ5SWRlbnRpZmllcixzPVtdLHU9W10sYz1ObCh0KTtpZihcImRlZmF1bHRcIj09PWEpdHJ5e2Zvcih2YXIgaD10byh0LnZpZXdzLmVudHJpZXMoKSksbD1oLm5leHQoKTshbC5kb25lO2w9aC5uZXh0KCkpe3ZhciBmPWVvKGwudmFsdWUsMikscD1mWzBdLGQ9ZlsxXSx1PXUuY29uY2F0KHZsKGQsbixyKSk7ZGwoZCkmJih0LnZpZXdzLmRlbGV0ZShwKSxkLnF1ZXJ5Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKXx8cy5wdXNoKGQucXVlcnkpKX19Y2F0Y2godCl7aT17ZXJyb3I6dH19ZmluYWxseXt0cnl7bCYmIWwuZG9uZSYmKG89aC5yZXR1cm4pJiZvLmNhbGwoaCl9ZmluYWxseXtpZihpKXRocm93IGkuZXJyb3J9fWVsc2UoZD10LnZpZXdzLmdldChhKSkmJih1PXUuY29uY2F0KHZsKGQsbixyKSksZGwoZCkmJih0LnZpZXdzLmRlbGV0ZShhKSxkLnF1ZXJ5Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKXx8cy5wdXNoKGQucXVlcnkpKSk7cmV0dXJuIGMmJiFObCh0KSYmcy5wdXNoKChhbyhsbCxcIlJlZmVyZW5jZS50cyBoYXMgbm90IGJlZW4gbG9hZGVkXCIpLG5ldyBsbChlLl9yZXBvLGUuX3BhdGgpKSkse3JlbW92ZWQ6cyxldmVudHM6dX19ZnVuY3Rpb24gRWwodCl7dmFyIGUsbixyPVtdO3RyeXtmb3IodmFyIGk9dG8odC52aWV3cy52YWx1ZXMoKSksbz1pLm5leHQoKTshby5kb25lO289aS5uZXh0KCkpe3ZhciBhPW8udmFsdWU7YS5xdWVyeS5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCl8fHIucHVzaChhKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKG49aS5yZXR1cm4pJiZuLmNhbGwoaSl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXJldHVybiByfWZ1bmN0aW9uIFNsKHQsZSl7dmFyIG4scixpLG8sYT1udWxsO3RyeXtmb3IodmFyIHM9dG8odC52aWV3cy52YWx1ZXMoKSksdT1zLm5leHQoKTshdS5kb25lO3U9cy5uZXh0KCkpdmFyIGM9dS52YWx1ZSxhPWF8fChpPWUsbz12b2lkIDAsKG89U2goKGM9Yykudmlld0NhY2hlXykpJiYoYy5xdWVyeS5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCl8fCFsdShpKSYmIW8uZ2V0SW1tZWRpYXRlQ2hpbGQoaXUoaSkpLmlzRW1wdHkoKSk/by5nZXRDaGlsZChpKTpudWxsKX1jYXRjaCh0KXtuPXtlcnJvcjp0fX1maW5hbGx5e3RyeXt1JiYhdS5kb25lJiYocj1zLnJldHVybikmJnIuY2FsbChzKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIGF9ZnVuY3Rpb24gQ2wodCxlKXtpZihlLl9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKSlyZXR1cm4gQWwodCk7ZT1lLl9xdWVyeUlkZW50aWZpZXI7cmV0dXJuIHQudmlld3MuZ2V0KGUpfWZ1bmN0aW9uIGtsKHQsZSl7cmV0dXJuIG51bGwhPUNsKHQsZSl9ZnVuY3Rpb24gTmwodCl7cmV0dXJuIG51bGwhPUFsKHQpfWZ1bmN0aW9uIEFsKHQpe3ZhciBlLG47dHJ5e2Zvcih2YXIgcj10byh0LnZpZXdzLnZhbHVlcygpKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSl7dmFyIG89aS52YWx1ZTtpZihvLnF1ZXJ5Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKSlyZXR1cm4gb319Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKG49ci5yZXR1cm4pJiZuLmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXJldHVybiBudWxsfXZhciBSbD0xLFBsPWZ1bmN0aW9uKHQpe3RoaXMubGlzdGVuUHJvdmlkZXJfPXQsdGhpcy5zeW5jUG9pbnRUcmVlXz1uZXcgQ2gobnVsbCksdGhpcy5wZW5kaW5nV3JpdGVUcmVlXz17dmlzaWJsZVdyaXRlczpOaC5lbXB0eSgpLGFsbFdyaXRlczpbXSxsYXN0V3JpdGVJZDotMX0sdGhpcy50YWdUb1F1ZXJ5TWFwPW5ldyBNYXAsdGhpcy5xdWVyeVRvVGFnTWFwPW5ldyBNYXB9O2Z1bmN0aW9uIE9sKHQsZSxuLHIsaSl7dmFyIG8sYSxzLHU7cmV0dXJuIG89dC5wZW5kaW5nV3JpdGVUcmVlXyxhPWUscz1uLHU9aSxhbygocj1yKT5vLmxhc3RXcml0ZUlkLFwiU3RhY2tpbmcgYW4gb2xkZXIgd3JpdGUgb24gdG9wIG9mIG5ld2VyIG9uZXNcIiksdm9pZCAwPT09dSYmKHU9ITApLG8uYWxsV3JpdGVzLnB1c2goe3BhdGg6YSxzbmFwOnMsd3JpdGVJZDpyLHZpc2libGU6dX0pLHUmJihvLnZpc2libGVXcml0ZXM9Umgoby52aXNpYmxlV3JpdGVzLGEscykpLG8ubGFzdFdyaXRlSWQ9cixpP3FsKHQsbmV3IGxoKGloKCksZSxuKSk6W119ZnVuY3Rpb24gRGwodCxlLG4scil7dmFyIGksbyxhO2k9dC5wZW5kaW5nV3JpdGVUcmVlXyxvPWUsYT1uLGFvKChyPXIpPmkubGFzdFdyaXRlSWQsXCJTdGFja2luZyBhbiBvbGRlciBtZXJnZSBvbiB0b3Agb2YgbmV3ZXIgb25lc1wiKSxpLmFsbFdyaXRlcy5wdXNoKHtwYXRoOm8sY2hpbGRyZW46YSx3cml0ZUlkOnIsdmlzaWJsZTohMH0pLGkudmlzaWJsZVdyaXRlcz1QaChpLnZpc2libGVXcml0ZXMsbyxhKSxpLmxhc3RXcml0ZUlkPXI7bj1DaC5mcm9tT2JqZWN0KG4pO3JldHVybiBxbCh0LG5ldyBwaChpaCgpLGUsbikpfWZ1bmN0aW9uIHhsKHQsZSxuKXt2b2lkIDA9PT1uJiYobj0hMSk7dmFyIHI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHQuYWxsV3JpdGVzLmxlbmd0aDtuKyspe3ZhciByPXQuYWxsV3JpdGVzW25dO2lmKHIud3JpdGVJZD09PWUpcmV0dXJuIHJ9cmV0dXJuIG51bGx9KHQucGVuZGluZ1dyaXRlVHJlZV8sZSk7aWYocWgodC5wZW5kaW5nV3JpdGVUcmVlXyxlKSl7dmFyIGk9bmV3IENoKG51bGwpO3JldHVybiBudWxsIT1yLnNuYXA/aT1pLnNldChydSgpLCEwKTpzcyhyLmNoaWxkcmVuLGZ1bmN0aW9uKHQpe2k9aS5zZXQobmV3IGV1KHQpLCEwKX0pLHFsKHQsbmV3IHNoKHIucGF0aCxpLG4pKX1yZXR1cm5bXX1mdW5jdGlvbiBMbCh0LGUsbil7cmV0dXJuIHFsKHQsbmV3IGxoKG9oKCksZSxuKSl9ZnVuY3Rpb24gTWwobix0LGUscil7dmFyIGk9dC5fcGF0aCxvPW4uc3luY1BvaW50VHJlZV8uZ2V0KGkpLGE9W107aWYobyYmKFwiZGVmYXVsdFwiPT09dC5fcXVlcnlJZGVudGlmaWVyfHxrbChvLHQpKSl7dmFyIHM9VGwobyx0LGUscik7MD09PW8udmlld3Muc2l6ZSYmKG4uc3luY1BvaW50VHJlZV89bi5zeW5jUG9pbnRUcmVlXy5yZW1vdmUoaSkpO2U9cy5yZW1vdmVkLGE9cy5ldmVudHMsbz0tMSE9PWUuZmluZEluZGV4KGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKX0pLHM9bi5zeW5jUG9pbnRUcmVlXy5maW5kT25QYXRoKGksZnVuY3Rpb24odCxlKXtyZXR1cm4gTmwoZSl9KTtpZihvJiYhcyl7aT1uLnN5bmNQb2ludFRyZWVfLnN1YnRyZWUoaSk7aWYoIWkuaXNFbXB0eSgpKWZvcih2YXIgdT1pLmZvbGQoZnVuY3Rpb24odCxlLG4pe2lmKGUmJk5sKGUpKXJldHVybltBbChlKV07dmFyIHI9W107cmV0dXJuIGUmJihyPUVsKGUpKSxzcyhuLGZ1bmN0aW9uKHQsZSl7cj1yLmNvbmNhdChlKX0pLHJ9KSxjPTA7Yzx1Lmxlbmd0aDsrK2Mpe3ZhciBoPXVbY10sbD1oLnF1ZXJ5LGg9QmwobixoKTtuLmxpc3RlblByb3ZpZGVyXy5zdGFydExpc3RlbmluZyhRbChsKSxLbChuLGwpLGguaGFzaEZuLGgub25Db21wbGV0ZSl9fSFzJiYwPGUubGVuZ3RoJiYhciYmKG8/bi5saXN0ZW5Qcm92aWRlcl8uc3RvcExpc3RlbmluZyhRbCh0KSxudWxsKTplLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9bi5xdWVyeVRvVGFnTWFwLmdldChXbCh0KSk7bi5saXN0ZW5Qcm92aWRlcl8uc3RvcExpc3RlbmluZyhRbCh0KSxlKX0pKSxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7KytuKXt2YXIgcixpPWVbbl07aS5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCl8fChyPVdsKGkpLGk9dC5xdWVyeVRvVGFnTWFwLmdldChyKSx0LnF1ZXJ5VG9UYWdNYXAuZGVsZXRlKHIpLHQudGFnVG9RdWVyeU1hcC5kZWxldGUoaSkpfX0obixlKX1yZXR1cm4gYX1mdW5jdGlvbiBGbCh0LGUsbil7dmFyIHI9ZS5fcGF0aCxpPW51bGwsbz0hMTt0LnN5bmNQb2ludFRyZWVfLmZvcmVhY2hPblBhdGgocixmdW5jdGlvbih0LGUpe3Q9ZnUodCxyKTtpPWl8fFNsKGUsdCksbz1vfHxObChlKX0pO3ZhciBhPXQuc3luY1BvaW50VHJlZV8uZ2V0KHIpO2E/KG89b3x8TmwoYSksaT1pfHxTbChhLHJ1KCkpKTooYT1uZXcgYmwsdC5zeW5jUG9pbnRUcmVlXz10LnN5bmNQb2ludFRyZWVfLnNldChyLGEpKSxudWxsIT1pP2g9ITA6KGg9ITEsaT1oYy5FTVBUWV9OT0RFLHQuc3luY1BvaW50VHJlZV8uc3VidHJlZShyKS5mb3JlYWNoQ2hpbGQoZnVuY3Rpb24odCxlKXtlPVNsKGUscnUoKSk7ZSYmKGk9aS51cGRhdGVJbW1lZGlhdGVDaGlsZCh0LGUpKX0pKTt2YXIgcyx1LGM9a2woYSxlKTtjfHxlLl9xdWVyeVBhcmFtcy5sb2Fkc0FsbERhdGEoKXx8KHM9V2woZSksYW8oIXQucXVlcnlUb1RhZ01hcC5oYXMocyksXCJWaWV3IGRvZXMgbm90IGV4aXN0LCBidXQgd2UgaGF2ZSBhIHRhZ1wiKSx1PVJsKyssdC5xdWVyeVRvVGFnTWFwLnNldChzLHUpLHQudGFnVG9RdWVyeU1hcC5zZXQodSxzKSk7dmFyIGg9SWwoYSxlLG4samgodC5wZW5kaW5nV3JpdGVUcmVlXyxyKSxpLGgpO3JldHVybiBjfHxvfHwoYT1DbChhLGUpLGg9aC5jb25jYXQoZnVuY3Rpb24odCxlLG4pe3ZhciByPWUuX3BhdGgsaT1LbCh0LGUpLG49QmwodCxuKSxuPXQubGlzdGVuUHJvdmlkZXJfLnN0YXJ0TGlzdGVuaW5nKFFsKGUpLGksbi5oYXNoRm4sbi5vbkNvbXBsZXRlKSxyPXQuc3luY1BvaW50VHJlZV8uc3VidHJlZShyKTtpZihpKWFvKCFObChyLnZhbHVlKSxcIklmIHdlJ3JlIGFkZGluZyBhIHF1ZXJ5LCBpdCBzaG91bGRuJ3QgYmUgc2hhZG93ZWRcIik7ZWxzZSBmb3IodmFyIG89ci5mb2xkKGZ1bmN0aW9uKHQsZSxuKXtpZighbHUodCkmJmUmJk5sKGUpKXJldHVybltBbChlKS5xdWVyeV07dmFyIHI9W107cmV0dXJuIGUmJihyPXIuY29uY2F0KEVsKGUpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5xdWVyeX0pKSksc3MobixmdW5jdGlvbih0LGUpe3I9ci5jb25jYXQoZSl9KSxyfSksYT0wO2E8by5sZW5ndGg7KythKXt2YXIgcz1vW2FdO3QubGlzdGVuUHJvdmlkZXJfLnN0b3BMaXN0ZW5pbmcoUWwocyksS2wodCxzKSl9cmV0dXJuIG59KHQsZSxhKSkpLGh9ZnVuY3Rpb24gVWwodCxuLGUpe3ZhciByPXQucGVuZGluZ1dyaXRlVHJlZV8sdD10LnN5bmNQb2ludFRyZWVfLmZpbmRPblBhdGgobixmdW5jdGlvbih0LGUpe3Q9U2woZSxmdSh0LG4pKTtpZih0KXJldHVybiB0fSk7cmV0dXJuIEtoKHIsbix0LGUsITApfWZ1bmN0aW9uIGpsKHQsZSl7dmFyIG49ZS5fcGF0aCxyPW51bGw7dC5zeW5jUG9pbnRUcmVlXy5mb3JlYWNoT25QYXRoKG4sZnVuY3Rpb24odCxlKXt0PWZ1KHQsbik7cj1yfHxTbChlLHQpfSk7dmFyIGk9dC5zeW5jUG9pbnRUcmVlXy5nZXQobik7aT9yPXJ8fFNsKGkscnUoKSk6KGk9bmV3IGJsLHQuc3luY1BvaW50VHJlZV89dC5zeW5jUG9pbnRUcmVlXy5zZXQobixpKSk7dmFyIG89bnVsbCE9cixhPW8/bmV3IHZoKHIsITAsITEpOm51bGwsbz13bChpLGUsamgodC5wZW5kaW5nV3JpdGVUcmVlXyxlLl9wYXRoKSxvP2EuZ2V0Tm9kZSgpOmhjLkVNUFRZX05PREUsbyk7cmV0dXJuIEVoKG8udmlld0NhY2hlXyl9ZnVuY3Rpb24gcWwodCxlKXtyZXR1cm4gZnVuY3Rpb24gdChlLG4scixpKXt7aWYobHUoZS5wYXRoKSlyZXR1cm4gVmwoZSxuLHIsaSk7dmFyIG89bi5nZXQocnUoKSk7bnVsbD09ciYmbnVsbCE9byYmKHI9U2wobyxydSgpKSk7dmFyIGE9W10scz1pdShlLnBhdGgpLHU9ZS5vcGVyYXRpb25Gb3JDaGlsZChzKSxjPW4uY2hpbGRyZW4uZ2V0KHMpO3JldHVybiBjJiZ1JiYobj1yP3IuZ2V0SW1tZWRpYXRlQ2hpbGQocyk6bnVsbCxzPVhoKGkscyksYT1hLmNvbmNhdCh0KHUsYyxuLHMpKSksYT1vP2EuY29uY2F0KF9sKG8sZSxpLHIpKTphfX0oZSx0LnN5bmNQb2ludFRyZWVfLG51bGwsamgodC5wZW5kaW5nV3JpdGVUcmVlXyxydSgpKSl9ZnVuY3Rpb24gVmwoaSx0LG8sYSl7dmFyIGU9dC5nZXQocnUoKSk7bnVsbD09byYmbnVsbCE9ZSYmKG89U2woZSxydSgpKSk7dmFyIHM9W107cmV0dXJuIHQuY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbih0LGUpe3ZhciBuPW8/by5nZXRJbW1lZGlhdGVDaGlsZCh0KTpudWxsLHI9WGgoYSx0KSx0PWkub3BlcmF0aW9uRm9yQ2hpbGQodCk7dCYmKHM9cy5jb25jYXQoVmwodCxlLG4scikpKX0pLHM9ZT9zLmNvbmNhdChfbChlLGksYSxvKSk6c31mdW5jdGlvbiBCbChyLHQpe3ZhciBpPXQucXVlcnksbz1LbChyLGkpO3JldHVybntoYXNoRm46ZnVuY3Rpb24oKXtyZXR1cm4odC52aWV3Q2FjaGVfLnNlcnZlckNhY2hlLmdldE5vZGUoKXx8aGMuRU1QVFlfTk9ERSkuaGFzaCgpfSxvbkNvbXBsZXRlOmZ1bmN0aW9uKHQpe2lmKFwib2tcIj09PXQpcmV0dXJuIG8/ZnVuY3Rpb24odCxlLG4pe3ZhciByPUhsKHQsbik7aWYocil7bj1HbChyKSxyPW4ucGF0aCxuPW4ucXVlcnlJZCxlPWZ1KHIsZSk7cmV0dXJuIHpsKHQscixuZXcgY2goYWgobiksZSkpfXJldHVybltdfShyLGkuX3BhdGgsbyk6KGU9cixuPWkuX3BhdGgscWwoZSxuZXcgY2gob2goKSxuKSkpO3ZhciBlLG4sbj0obj1cIlVua25vd24gRXJyb3JcIixcInRvb19iaWdcIj09PSh0PXQpP249XCJUaGUgZGF0YSByZXF1ZXN0ZWQgZXhjZWVkcyB0aGUgbWF4aW11bSBzaXplIHRoYXQgY2FuIGJlIGFjY2Vzc2VkIHdpdGggYSBzaW5nbGUgcmVxdWVzdC5cIjpcInBlcm1pc3Npb25fZGVuaWVkXCI9PT10P249XCJDbGllbnQgZG9lc24ndCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHRoZSBkZXNpcmVkIGRhdGEuXCI6XCJ1bmF2YWlsYWJsZVwiPT09dCYmKG49XCJUaGUgc2VydmljZSBpcyB1bmF2YWlsYWJsZVwiKSwobj1uZXcgRXJyb3IodCtcIiBhdCBcIitpLl9wYXRoLnRvU3RyaW5nKCkrXCI6IFwiK24pKS5jb2RlPXQudG9VcHBlckNhc2UoKSxuKTtyZXR1cm4gTWwocixpLG51bGwsbil9fX1mdW5jdGlvbiBLbCh0LGUpe2U9V2woZSk7cmV0dXJuIHQucXVlcnlUb1RhZ01hcC5nZXQoZSl9ZnVuY3Rpb24gV2wodCl7cmV0dXJuIHQuX3BhdGgudG9TdHJpbmcoKStcIiRcIit0Ll9xdWVyeUlkZW50aWZpZXJ9ZnVuY3Rpb24gSGwodCxlKXtyZXR1cm4gdC50YWdUb1F1ZXJ5TWFwLmdldChlKX1mdW5jdGlvbiBHbCh0KXt2YXIgZT10LmluZGV4T2YoXCIkXCIpO3JldHVybiBhbygtMSE9PWUmJmU8dC5sZW5ndGgtMSxcIkJhZCBxdWVyeUtleS5cIikse3F1ZXJ5SWQ6dC5zdWJzdHIoZSsxKSxwYXRoOm5ldyBldSh0LnN1YnN0cigwLGUpKX19ZnVuY3Rpb24gemwodCxlLG4pe3ZhciByPXQuc3luY1BvaW50VHJlZV8uZ2V0KGUpO3JldHVybiBhbyhyLFwiTWlzc2luZyBzeW5jIHBvaW50IGZvciBxdWVyeSB0YWcgdGhhdCB3ZSdyZSB0cmFja2luZ1wiKSxfbChyLG4samgodC5wZW5kaW5nV3JpdGVUcmVlXyxlKSxudWxsKX1mdW5jdGlvbiBRbCh0KXtyZXR1cm4gdC5fcXVlcnlQYXJhbXMubG9hZHNBbGxEYXRhKCkmJiF0Ll9xdWVyeVBhcmFtcy5pc0RlZmF1bHQoKT8oYW8obWwsXCJSZWZlcmVuY2UudHMgaGFzIG5vdCBiZWVuIGxvYWRlZFwiKSxuZXcgbWwodC5fcmVwbyx0Ll9wYXRoKSk6dH12YXIgWWw9KEpsLnByb3RvdHlwZS5nZXRJbW1lZGlhdGVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEpsKHRoaXMubm9kZV8uZ2V0SW1tZWRpYXRlQ2hpbGQodCkpfSxKbC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVffSxKbCk7ZnVuY3Rpb24gSmwodCl7dGhpcy5ub2RlXz10fXZhciAkbD0oWmwucHJvdG90eXBlLmdldEltbWVkaWF0ZUNoaWxkPWZ1bmN0aW9uKHQpe3Q9aHUodGhpcy5wYXRoXyx0KTtyZXR1cm4gbmV3IFpsKHRoaXMuc3luY1RyZWVfLHQpfSxabC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbigpe3JldHVybiBVbCh0aGlzLnN5bmNUcmVlXyx0aGlzLnBhdGhfKX0sWmwpO2Z1bmN0aW9uIFpsKHQsZSl7dGhpcy5zeW5jVHJlZV89dCx0aGlzLnBhdGhfPWV9dmFyIHRmPWZ1bmN0aW9uKHQpe3JldHVybih0PXR8fHt9KS50aW1lc3RhbXA9dC50aW1lc3RhbXB8fChuZXcgRGF0ZSkuZ2V0VGltZSgpLHR9LGVmPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdCYmXCJvYmplY3RcIj09dHlwZW9mIHQ/KGFvKFwiLnN2XCJpbiB0LFwiVW5leHBlY3RlZCBsZWFmIG5vZGUgb3IgcHJpb3JpdHkgY29udGVudHNcIiksXCJzdHJpbmdcIj09dHlwZW9mIHRbXCIuc3ZcIl0/bmYodFtcIi5zdlwiXSxlLG4pOlwib2JqZWN0XCI9PXR5cGVvZiB0W1wiLnN2XCJdP3JmKHRbXCIuc3ZcIl0sZSk6dm9pZCBhbyghMSxcIlVuZXhwZWN0ZWQgc2VydmVyIHZhbHVlOiBcIitKU09OLnN0cmluZ2lmeSh0LG51bGwsMikpKTp0fSxuZj1mdW5jdGlvbih0LGUsbil7aWYoXCJ0aW1lc3RhbXBcIj09PXQpcmV0dXJuIG4udGltZXN0YW1wO2FvKCExLFwiVW5leHBlY3RlZCBzZXJ2ZXIgdmFsdWU6IFwiK3QpfSxyZj1mdW5jdGlvbih0LGUsbil7dC5oYXNPd25Qcm9wZXJ0eShcImluY3JlbWVudFwiKXx8YW8oITEsXCJVbmV4cGVjdGVkIHNlcnZlciB2YWx1ZTogXCIrSlNPTi5zdHJpbmdpZnkodCxudWxsLDIpKTt0PXQuaW5jcmVtZW50O1wibnVtYmVyXCIhPXR5cGVvZiB0JiZhbyghMSxcIlVuZXhwZWN0ZWQgaW5jcmVtZW50IHZhbHVlOiBcIit0KTtlPWUubm9kZSgpO2lmKGFvKG51bGwhPWUsXCJFeHBlY3RlZCBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSBmb3IgbnVsbHNcIiksIWUuaXNMZWFmTm9kZSgpKXJldHVybiB0O2U9ZS5nZXRWYWx1ZSgpO3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiBlP3Q6ZSt0fSxvZj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gc2YoZSxuZXcgJGwobix0KSxyKX0sYWY9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBzZih0LG5ldyBZbChlKSxuKX07ZnVuY3Rpb24gc2YodCxyLGkpe3ZhciBlPXQuZ2V0UHJpb3JpdHkoKS52YWwoKSxuPWVmKGUsci5nZXRJbW1lZGlhdGVDaGlsZChcIi5wcmlvcml0eVwiKSxpKTtpZih0LmlzTGVhZk5vZGUoKSl7dmFyIG89dCxlPWVmKG8uZ2V0VmFsdWUoKSxyLGkpO3JldHVybiBlIT09by5nZXRWYWx1ZSgpfHxuIT09by5nZXRQcmlvcml0eSgpLnZhbCgpP25ldyBYdShlLHZjKG4pKTp0fXZhciB0PXQsYT10O3JldHVybiBuIT09dC5nZXRQcmlvcml0eSgpLnZhbCgpJiYoYT1hLnVwZGF0ZVByaW9yaXR5KG5ldyBYdShuKSkpLHQuZm9yRWFjaENoaWxkKFp1LGZ1bmN0aW9uKHQsZSl7dmFyIG49c2YoZSxyLmdldEltbWVkaWF0ZUNoaWxkKHQpLGkpO24hPT1lJiYoYT1hLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKHQsbikpfSksYX12YXIgdWY9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PXQmJih0PVwiXCIpLHZvaWQgMD09PWUmJihlPW51bGwpLHZvaWQgMD09PW4mJihuPXtjaGlsZHJlbjp7fSxjaGlsZENvdW50OjB9KSx0aGlzLm5hbWU9dCx0aGlzLnBhcmVudD1lLHRoaXMubm9kZT1ufTtmdW5jdGlvbiBjZih0LGUpe2Zvcih2YXIgbj1lIGluc3RhbmNlb2YgZXU/ZTpuZXcgZXUoZSkscj10LGk9aXUobik7bnVsbCE9PWk7KXZhciBvPXhvKHIubm9kZS5jaGlsZHJlbixpKXx8e2NoaWxkcmVuOnt9LGNoaWxkQ291bnQ6MH0scj1uZXcgdWYoaSxyLG8pLGk9aXUobj1hdShuKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gaGYodCl7cmV0dXJuIHQubm9kZS52YWx1ZX1mdW5jdGlvbiBsZih0LGUpe3Qubm9kZS52YWx1ZT1lLHZmKHQpfWZ1bmN0aW9uIGZmKHQpe3JldHVybiAwPHQubm9kZS5jaGlsZENvdW50fWZ1bmN0aW9uIHBmKG4scil7c3Mobi5ub2RlLmNoaWxkcmVuLGZ1bmN0aW9uKHQsZSl7cihuZXcgdWYodCxuLGUpKX0pfWZ1bmN0aW9uIGRmKHQpe3JldHVybiBuZXcgZXUobnVsbD09PXQucGFyZW50P3QubmFtZTpkZih0LnBhcmVudCkrXCIvXCIrdC5uYW1lKX1mdW5jdGlvbiB2Zih0KXt2YXIgZSxuLHIsaTtudWxsIT09dC5wYXJlbnQmJihlPXQucGFyZW50LG49dC5uYW1lLGk9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PWhmKHQpJiYhZmYodCl9KHI9dCksdD1EbyhlLm5vZGUuY2hpbGRyZW4sbiksaSYmdD8oZGVsZXRlIGUubm9kZS5jaGlsZHJlbltuXSxlLm5vZGUuY2hpbGRDb3VudC0tLHZmKGUpKTppfHx0fHwoZS5ub2RlLmNoaWxkcmVuW25dPXIubm9kZSxlLm5vZGUuY2hpbGRDb3VudCsrLHZmKGUpKSl9ZnVuY3Rpb24gZ2YodCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJjAhPT10Lmxlbmd0aCYmIXdmLnRlc3QodCl9ZnVuY3Rpb24geWYodCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJjAhPT10Lmxlbmd0aCYmIUlmLnRlc3QodCl9ZnVuY3Rpb24gbWYodCxlLG4scil7aWYoIXJ8fHZvaWQgMCE9PWUpe3ZhciBpPUhvKHQsXCJ2YWx1ZXNcIik7aWYoIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlfHxBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBFcnJvcihpK1wiIG11c3QgYmUgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNoaWxkcmVuIHRvIHJlcGxhY2UuXCIpO3ZhciBvPVtdO3NzKGUsZnVuY3Rpb24odCxlKXt0PW5ldyBldSh0KTtpZihDZihpLGUsaHUobix0KSksXCIucHJpb3JpdHlcIj09PXN1KHQpJiYhRWYoZSkpdGhyb3cgbmV3IEVycm9yKGkrXCJjb250YWlucyBhbiBpbnZhbGlkIHZhbHVlIGZvciAnXCIrdC50b1N0cmluZygpK1wiJywgd2hpY2ggbXVzdCBiZSBhIHZhbGlkIEZpcmViYXNlIHByaW9yaXR5IChhIHN0cmluZywgZmluaXRlIG51bWJlciwgc2VydmVyIHZhbHVlLCBvciBudWxsKS5cIik7by5wdXNoKHQpfSksZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylmb3IodmFyIHIsaT11dShyPWVbbl0pLG89MDtvPGkubGVuZ3RoO28rKylpZigoXCIucHJpb3JpdHlcIiE9PWlbb118fG8hPT1pLmxlbmd0aC0xKSYmIWdmKGlbb10pKXRocm93IG5ldyBFcnJvcih0K1wiY29udGFpbnMgYW4gaW52YWxpZCBrZXkgKFwiK2lbb10rXCIpIGluIHBhdGggXCIrci50b1N0cmluZygpKycuIEtleXMgbXVzdCBiZSBub24tZW1wdHkgc3RyaW5ncyBhbmQgY2FuXFwndCBjb250YWluIFwiLlwiLCBcIiNcIiwgXCIkXCIsIFwiL1wiLCBcIltcIiwgb3IgXCJdXCInKTtlLnNvcnQocHUpO3ZhciBhPW51bGw7Zm9yKG49MDtuPGUubGVuZ3RoO24rKyl7aWYocj1lW25dLG51bGwhPT1hJiZ2dShhLHIpKXRocm93IG5ldyBFcnJvcih0K1wiY29udGFpbnMgYSBwYXRoIFwiK2EudG9TdHJpbmcoKStcIiB0aGF0IGlzIGFuY2VzdG9yIG9mIGFub3RoZXIgcGF0aCBcIityLnRvU3RyaW5nKCkpO2E9cn19KGksbyl9fWZ1bmN0aW9uIGJmKHQsZSxuKXtpZighbnx8dm9pZCAwIT09ZSl7aWYoVmEoZSkpdGhyb3cgbmV3IEVycm9yKEhvKHQsXCJwcmlvcml0eVwiKStcImlzIFwiK2UudG9TdHJpbmcoKStcIiwgYnV0IG11c3QgYmUgYSB2YWxpZCBGaXJlYmFzZSBwcmlvcml0eSAoYSBzdHJpbmcsIGZpbml0ZSBudW1iZXIsIHNlcnZlciB2YWx1ZSwgb3IgbnVsbCkuXCIpO2lmKCFFZihlKSl0aHJvdyBuZXcgRXJyb3IoSG8odCxcInByaW9yaXR5XCIpK1wibXVzdCBiZSBhIHZhbGlkIEZpcmViYXNlIHByaW9yaXR5IChhIHN0cmluZywgZmluaXRlIG51bWJlciwgc2VydmVyIHZhbHVlLCBvciBudWxsKS5cIil9fWZ1bmN0aW9uIF9mKHQsZSxuLHIpe2lmKCEociYmdm9pZCAwPT09bnx8Z2YobikpKXRocm93IG5ldyBFcnJvcihIbyh0LGUpKyd3YXMgYW4gaW52YWxpZCBrZXkgPSBcIicrbisnXCIuICBGaXJlYmFzZSBrZXlzIG11c3QgYmUgbm9uLWVtcHR5IHN0cmluZ3MgYW5kIGNhblxcJ3QgY29udGFpbiBcIi5cIiwgXCIjXCIsIFwiJFwiLCBcIi9cIiwgXCJbXCIsIG9yIFwiXVwiKS4nKX12YXIgd2Y9L1tcXFtcXF0uIyRcXC9cXHUwMDAwLVxcdTAwMUZcXHUwMDdGXS8sSWY9L1tcXFtcXF0uIyRcXHUwMDAwLVxcdTAwMUZcXHUwMDdGXS8sVGY9MTA0ODU3NjAsRWY9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PT10fHxcInN0cmluZ1wiPT10eXBlb2YgdHx8XCJudW1iZXJcIj09dHlwZW9mIHQmJiFWYSh0KXx8dCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJkRvKHQsXCIuc3ZcIil9LFNmPWZ1bmN0aW9uKHQsZSxuLHIpe3ImJnZvaWQgMD09PWV8fENmKEhvKHQsXCJ2YWx1ZVwiKSxlLG4pfSxDZj1mdW5jdGlvbihyLHQsZSl7dmFyIGk9ZSBpbnN0YW5jZW9mIGV1P25ldyBndShlLHIpOmU7aWYodm9pZCAwPT09dCl0aHJvdyBuZXcgRXJyb3IocitcImNvbnRhaW5zIHVuZGVmaW5lZCBcIittdShpKSk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdCl0aHJvdyBuZXcgRXJyb3IocitcImNvbnRhaW5zIGEgZnVuY3Rpb24gXCIrbXUoaSkrXCIgd2l0aCBjb250ZW50cyA9IFwiK3QudG9TdHJpbmcoKSk7aWYoVmEodCkpdGhyb3cgbmV3IEVycm9yKHIrXCJjb250YWlucyBcIit0LnRvU3RyaW5nKCkrXCIgXCIrbXUoaSkpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0JiZ0Lmxlbmd0aD5UZi8zJiZRbyh0KT5UZil0aHJvdyBuZXcgRXJyb3IocitcImNvbnRhaW5zIGEgc3RyaW5nIGdyZWF0ZXIgdGhhbiBcIitUZitcIiB1dGY4IGJ5dGVzIFwiK211KGkpK1wiICgnXCIrdC5zdWJzdHJpbmcoMCw1MCkrXCIuLi4nKVwiKTtpZih0JiZcIm9iamVjdFwiPT10eXBlb2YgdCl7dmFyIG89ITEsYT0hMTtpZihzcyh0LGZ1bmN0aW9uKHQsZSl7aWYoXCIudmFsdWVcIj09PXQpbz0hMDtlbHNlIGlmKFwiLnByaW9yaXR5XCIhPT10JiZcIi5zdlwiIT09dCYmKGE9ITAsIWdmKHQpKSl0aHJvdyBuZXcgRXJyb3IocitcIiBjb250YWlucyBhbiBpbnZhbGlkIGtleSAoXCIrdCtcIikgXCIrbXUoaSkrJy4gIEtleXMgbXVzdCBiZSBub24tZW1wdHkgc3RyaW5ncyBhbmQgY2FuXFwndCBjb250YWluIFwiLlwiLCBcIiNcIiwgXCIkXCIsIFwiL1wiLCBcIltcIiwgb3IgXCJdXCInKTt2YXIgbjtuPXQsMDwodD1pKS5wYXJ0c18ubGVuZ3RoJiYodC5ieXRlTGVuZ3RoXys9MSksdC5wYXJ0c18ucHVzaChuKSx0LmJ5dGVMZW5ndGhfKz1RbyhuKSx5dSh0KSxDZihyLGUsaSksZT0odD1pKS5wYXJ0c18ucG9wKCksdC5ieXRlTGVuZ3RoXy09UW8oZSksMDx0LnBhcnRzXy5sZW5ndGgmJi0tdC5ieXRlTGVuZ3RoX30pLG8mJmEpdGhyb3cgbmV3IEVycm9yKHIrJyBjb250YWlucyBcIi52YWx1ZVwiIGNoaWxkICcrbXUoaSkrXCIgaW4gYWRkaXRpb24gdG8gYWN0dWFsIGNoaWxkcmVuLlwiKX19LGtmPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCEociYmdm9pZCAwPT09bnx8eWYobikpKXRocm93IG5ldyBFcnJvcihIbyh0LGUpKyd3YXMgYW4gaW52YWxpZCBwYXRoID0gXCInK24rJ1wiLiBQYXRocyBtdXN0IGJlIG5vbi1lbXB0eSBzdHJpbmdzIGFuZCBjYW5cXCd0IGNvbnRhaW4gXCIuXCIsIFwiI1wiLCBcIiRcIiwgXCJbXCIsIG9yIFwiXVwiJyl9LE5mPWZ1bmN0aW9uKHQsZSxuLHIpe249biYmbi5yZXBsYWNlKC9eXFwvKlxcLmluZm8oXFwvfCQpLyxcIi9cIiksa2YodCxlLG4scil9LEFmPWZ1bmN0aW9uKHQsZSl7aWYoXCIuaW5mb1wiPT09aXUoZSkpdGhyb3cgbmV3IEVycm9yKHQrXCIgZmFpbGVkID0gQ2FuJ3QgbW9kaWZ5IGRhdGEgdW5kZXIgLy5pbmZvL1wiKX0sUmY9ZnVuY3Rpb24odCxlKXt2YXIgbj1lLnBhdGgudG9TdHJpbmcoKTtpZihcInN0cmluZ1wiIT10eXBlb2YgZS5yZXBvSW5mby5ob3N0fHwwPT09ZS5yZXBvSW5mby5ob3N0Lmxlbmd0aHx8IWdmKGUucmVwb0luZm8ubmFtZXNwYWNlKSYmXCJsb2NhbGhvc3RcIiE9PWUucmVwb0luZm8uaG9zdC5zcGxpdChcIjpcIilbMF18fDAhPT1uLmxlbmd0aCYmKG49KG49bikmJm4ucmVwbGFjZSgvXlxcLypcXC5pbmZvKFxcL3wkKS8sXCIvXCIpLCF5ZihuKSkpdGhyb3cgbmV3IEVycm9yKEhvKHQsXCJ1cmxcIikrJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBVUkwgYW5kIHRoZSBwYXRoIGNhblxcJ3QgY29udGFpbiBcIi5cIiwgXCIjXCIsIFwiJFwiLCBcIltcIiwgb3IgXCJdXCIuJyl9LFBmPWZ1bmN0aW9uKCl7dGhpcy5ldmVudExpc3RzXz1bXSx0aGlzLnJlY3Vyc2lvbkRlcHRoXz0wfTtmdW5jdGlvbiBPZih0LGUpe2Zvcih2YXIgbj1udWxsLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGk9ZVtyXSxvPWkuZ2V0UGF0aCgpO251bGw9PT1ufHxkdShvLG4ucGF0aCl8fCh0LmV2ZW50TGlzdHNfLnB1c2gobiksbj1udWxsKSwobj1udWxsPT09bj97ZXZlbnRzOltdLHBhdGg6b306bikuZXZlbnRzLnB1c2goaSl9biYmdC5ldmVudExpc3RzXy5wdXNoKG4pfWZ1bmN0aW9uIERmKHQsZSxuKXtPZih0LG4pLExmKHQsZnVuY3Rpb24odCl7cmV0dXJuIGR1KHQsZSl9KX1mdW5jdGlvbiB4Zih0LGUsbil7T2YodCxuKSxMZih0LGZ1bmN0aW9uKHQpe3JldHVybiB2dSh0LGUpfHx2dShlLHQpfSl9ZnVuY3Rpb24gTGYodCxlKXt0LnJlY3Vyc2lvbkRlcHRoXysrO2Zvcih2YXIgbj0hMCxyPTA7cjx0LmV2ZW50TGlzdHNfLmxlbmd0aDtyKyspe3ZhciBpPXQuZXZlbnRMaXN0c19bcl07aSYmKGUoaS5wYXRoKT8oZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0LmV2ZW50cy5sZW5ndGg7ZSsrKXt2YXIgbixyPXQuZXZlbnRzW2VdO251bGwhPT1yJiYodC5ldmVudHNbZV09bnVsbCxuPXIuZ2V0RXZlbnRSdW5uZXIoKSxKYSYmWmEoXCJldmVudDogXCIrci50b1N0cmluZygpKSxkcyhuKSl9fSh0LmV2ZW50TGlzdHNfW3JdKSx0LmV2ZW50TGlzdHNfW3JdPW51bGwpOm49ITEpfW4mJih0LmV2ZW50TGlzdHNfPVtdKSx0LnJlY3Vyc2lvbkRlcHRoXy0tfXZhciBNZj1cInJlcG9faW50ZXJydXB0XCIsRmY9MjUsVWY9KGpmLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybih0aGlzLnJlcG9JbmZvXy5zZWN1cmU/XCJodHRwczovL1wiOlwiaHR0cDovL1wiKSt0aGlzLnJlcG9JbmZvXy5ob3N0fSxqZik7ZnVuY3Rpb24gamYodCxlLG4scil7dGhpcy5yZXBvSW5mb189dCx0aGlzLmZvcmNlUmVzdENsaWVudF89ZSx0aGlzLmF1dGhUb2tlblByb3ZpZGVyXz1uLHRoaXMuYXBwQ2hlY2tQcm92aWRlcl89cix0aGlzLmRhdGFVcGRhdGVDb3VudD0wLHRoaXMuc3RhdHNMaXN0ZW5lcl89bnVsbCx0aGlzLmV2ZW50UXVldWVfPW5ldyBQZix0aGlzLm5leHRXcml0ZUlkXz0xLHRoaXMuaW50ZXJjZXB0U2VydmVyRGF0YUNhbGxiYWNrXz1udWxsLHRoaXMub25EaXNjb25uZWN0Xz1YYygpLHRoaXMudHJhbnNhY3Rpb25RdWV1ZVRyZWVfPW5ldyB1Zix0aGlzLnBlcnNpc3RlbnRDb25uZWN0aW9uXz1udWxsLHRoaXMua2V5PXRoaXMucmVwb0luZm9fLnRvVVJMU3RyaW5nKCl9ZnVuY3Rpb24gcWYoYSx0LGUpe2lmKGEuc3RhdHNfPVBzKGEucmVwb0luZm9fKSxhLmZvcmNlUmVzdENsaWVudF98fDA8PShcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cubmF2aWdhdG9yJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudHx8XCJcIikuc2VhcmNoKC9nb29nbGVib3R8Z29vZ2xlIHdlYm1hc3RlciB0b29sc3xiaW5nYm90fHlhaG9vISBzbHVycHxiYWlkdXNwaWRlcnx5YW5kZXhib3R8ZHVja2R1Y2tib3QvaSkpYS5zZXJ2ZXJfPW5ldyBHYyhhLnJlcG9JbmZvXyxmdW5jdGlvbih0LGUsbixyKXtLZihhLHQsZSxuLHIpfSxhLmF1dGhUb2tlblByb3ZpZGVyXyxhLmFwcENoZWNrUHJvdmlkZXJfKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIFdmKGEsITApfSwwKTtlbHNle2lmKG51bGwhPWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIk9ubHkgb2JqZWN0cyBhcmUgc3VwcG9ydGVkIGZvciBvcHRpb24gZGF0YWJhc2VBdXRoVmFyaWFibGVPdmVycmlkZVwiKTt0cnl7UG8oZSl9Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhdXRoT3ZlcnJpZGUgcHJvdmlkZWQ6IFwiK3QpfX1hLnBlcnNpc3RlbnRDb25uZWN0aW9uXz1uZXcgU3UoYS5yZXBvSW5mb18sdCxmdW5jdGlvbih0LGUsbixyKXtLZihhLHQsZSxuLHIpfSxmdW5jdGlvbih0KXtXZihhLHQpfSxmdW5jdGlvbih0KXt2YXIgbjtuPWEsc3ModCxmdW5jdGlvbih0LGUpe0hmKG4sdCxlKX0pfSxhLmF1dGhUb2tlblByb3ZpZGVyXyxhLmFwcENoZWNrUHJvdmlkZXJfLGUpLGEuc2VydmVyXz1hLnBlcnNpc3RlbnRDb25uZWN0aW9uX312YXIgbjthLmF1dGhUb2tlblByb3ZpZGVyXy5hZGRUb2tlbkNoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uKHQpe2Euc2VydmVyXy5yZWZyZXNoQXV0aFRva2VuKHQpfSksYS5hcHBDaGVja1Byb3ZpZGVyXy5hZGRUb2tlbkNoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uKHQpe2Euc2VydmVyXy5yZWZyZXNoQXBwQ2hlY2tUb2tlbih0LnRva2VuKX0pLGEuc3RhdHNSZXBvcnRlcl89KG49YS5yZXBvSW5mb18sdD1mdW5jdGlvbigpe3JldHVybiBuZXcgbmgoYS5zdGF0c18sYS5zZXJ2ZXJfKX0sbj1uLnRvU3RyaW5nKCksUnNbbl18fChSc1tuXT10KCkpLFJzW25dKSxhLmluZm9EYXRhXz1uZXcgUWMsYS5pbmZvU3luY1RyZWVfPW5ldyBQbCh7c3RhcnRMaXN0ZW5pbmc6ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9W10sbz1hLmluZm9EYXRhXy5nZXROb2RlKHQuX3BhdGgpO3JldHVybiBvLmlzRW1wdHkoKXx8KGk9TGwoYS5pbmZvU3luY1RyZWVfLHQuX3BhdGgsbyksc2V0VGltZW91dChmdW5jdGlvbigpe3IoXCJva1wiKX0sMCkpLGl9LHN0b3BMaXN0ZW5pbmc6ZnVuY3Rpb24oKXt9fSksSGYoYSxcImNvbm5lY3RlZFwiLCExKSxhLnNlcnZlclN5bmNUcmVlXz1uZXcgUGwoe3N0YXJ0TGlzdGVuaW5nOmZ1bmN0aW9uKG4sdCxlLHIpe3JldHVybiBhLnNlcnZlcl8ubGlzdGVuKG4sZSx0LGZ1bmN0aW9uKHQsZSl7ZT1yKHQsZSk7eGYoYS5ldmVudFF1ZXVlXyxuLl9wYXRoLGUpfSksW119LHN0b3BMaXN0ZW5pbmc6ZnVuY3Rpb24odCxlKXthLnNlcnZlcl8udW5saXN0ZW4odCxlKX19KX1mdW5jdGlvbiBWZih0KXt0PXQuaW5mb0RhdGFfLmdldE5vZGUobmV3IGV1KFwiLmluZm8vc2VydmVyVGltZU9mZnNldFwiKSkudmFsKCl8fDA7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCkrdH1mdW5jdGlvbiBCZih0KXtyZXR1cm4gdGYoe3RpbWVzdGFtcDpWZih0KX0pfWZ1bmN0aW9uIEtmKHQsZSxuLHIsaSl7dC5kYXRhVXBkYXRlQ291bnQrKzt2YXIgbz1uZXcgZXUoZSk7bj10LmludGVyY2VwdFNlcnZlckRhdGFDYWxsYmFja18/dC5pbnRlcmNlcHRTZXJ2ZXJEYXRhQ2FsbGJhY2tfKGUsbik6bjt2YXIgYSxzLHUsYz1bXSxoPW87MDwoYz1pP3I/KGE9TW8obixmdW5jdGlvbih0KXtyZXR1cm4gdmModCl9KSxmdW5jdGlvbih0LGUsbixyKXt2YXIgaT1IbCh0LHIpO2lmKGkpe3I9R2woaSksaT1yLnBhdGgscj1yLnF1ZXJ5SWQsZT1mdShpLGUpLG49Q2guZnJvbU9iamVjdChuKTtyZXR1cm4gemwodCxpLG5ldyBwaChhaChyKSxlLG4pKX1yZXR1cm5bXX0odC5zZXJ2ZXJTeW5jVHJlZV8sbyxhLGkpKTooZT12YyhuKSxhPXQuc2VydmVyU3luY1RyZWVfLHM9byx1PWUsbnVsbD09KGk9SGwoYSxlPWkpKT9bXTooZT1HbChpKSxpPWUucGF0aCxlPWUucXVlcnlJZCxzPWZ1KGkscyksemwoYSxpLG5ldyBsaChhaChlKSxzLHUpKSkpOnI/KHM9TW8obixmdW5jdGlvbih0KXtyZXR1cm4gdmModCl9KSx1PXQuc2VydmVyU3luY1RyZWVfLHI9byxzPXMscz1DaC5mcm9tT2JqZWN0KHMpLHFsKHUsbmV3IHBoKG9oKCkscixzKSkpOihuPXZjKG4pLExsKHQuc2VydmVyU3luY1RyZWVfLG8sbikpKS5sZW5ndGgmJihoPW5wKHQsbykpLHhmKHQuZXZlbnRRdWV1ZV8saCxjKX1mdW5jdGlvbiBXZih0LGUpe0hmKHQsXCJjb25uZWN0ZWRcIixlKSwhMT09PWUmJmZ1bmN0aW9uKG4peyRmKG4sXCJvbkRpc2Nvbm5lY3RFdmVudHNcIik7dmFyIHI9QmYobiksaT1YYygpOyRjKG4ub25EaXNjb25uZWN0XyxydSgpLGZ1bmN0aW9uKHQsZSl7ZT1vZih0LGUsbi5zZXJ2ZXJTeW5jVHJlZV8scik7SmMoaSx0LGUpfSk7dmFyIG89W107JGMoaSxydSgpLGZ1bmN0aW9uKHQsZSl7bz1vLmNvbmNhdChMbChuLnNlcnZlclN5bmNUcmVlXyx0LGUpKTt0PWFwKG4sdCk7bnAobix0KX0pLG4ub25EaXNjb25uZWN0Xz1YYygpLHhmKG4uZXZlbnRRdWV1ZV8scnUoKSxvKX0odCl9ZnVuY3Rpb24gSGYodCxlLG4pe2U9bmV3IGV1KFwiLy5pbmZvL1wiK2UpLG49dmMobik7dC5pbmZvRGF0YV8udXBkYXRlU25hcHNob3QoZSxuKTtuPUxsKHQuaW5mb1N5bmNUcmVlXyxlLG4pO3hmKHQuZXZlbnRRdWV1ZV8sZSxuKX1mdW5jdGlvbiBHZih0KXtyZXR1cm4gdC5uZXh0V3JpdGVJZF8rK31mdW5jdGlvbiB6ZihyLGksdCxlLG8peyRmKHIsXCJzZXRcIix7cGF0aDppLnRvU3RyaW5nKCksdmFsdWU6dCxwcmlvcml0eTplfSk7dmFyIG49QmYociksdD12Yyh0LGUpLGU9VWwoci5zZXJ2ZXJTeW5jVHJlZV8saSksbj1hZih0LGUsbiksYT1HZihyKSxuPU9sKHIuc2VydmVyU3luY1RyZWVfLGksbixhLCEwKTtPZihyLmV2ZW50UXVldWVfLG4pLHIuc2VydmVyXy5wdXQoaS50b1N0cmluZygpLHQudmFsKCEwKSxmdW5jdGlvbih0LGUpe3ZhciBuPVwib2tcIj09PXQ7bnx8bnMoXCJzZXQgYXQgXCIraStcIiBmYWlsZWQ6IFwiK3QpO249eGwoci5zZXJ2ZXJTeW5jVHJlZV8sYSwhbik7eGYoci5ldmVudFF1ZXVlXyxpLG4pLFpmKDAsbyx0LGUpfSk7dD1hcChyLGkpO25wKHIsdCkseGYoci5ldmVudFF1ZXVlXyx0LFtdKX1mdW5jdGlvbiBRZihuLHIsaSl7bi5zZXJ2ZXJfLm9uRGlzY29ubmVjdENhbmNlbChyLnRvU3RyaW5nKCksZnVuY3Rpb24odCxlKXtcIm9rXCI9PT10JiYhZnVuY3Rpb24gdChuLGUpe2lmKGx1KGUpKXJldHVybiBuLnZhbHVlPW51bGwsbi5jaGlsZHJlbi5jbGVhcigpLCEwO2lmKG51bGwhPT1uLnZhbHVlKXtpZihuLnZhbHVlLmlzTGVhZk5vZGUoKSlyZXR1cm4hMTt2YXIgcj1uLnZhbHVlO3JldHVybiBuLnZhbHVlPW51bGwsci5mb3JFYWNoQ2hpbGQoWnUsZnVuY3Rpb24odCxlKXtKYyhuLG5ldyBldSh0KSxlKX0pLHQobixlKX1pZigwPG4uY2hpbGRyZW4uc2l6ZSlyZXR1cm4gcj1pdShlKSxlPWF1KGUpLG4uY2hpbGRyZW4uaGFzKHIpJiZ0KG4uY2hpbGRyZW4uZ2V0KHIpLGUpJiZuLmNoaWxkcmVuLmRlbGV0ZShyKSwwPT09bi5jaGlsZHJlbi5zaXplO3JldHVybiEwfShuLm9uRGlzY29ubmVjdF8sciksWmYoMCxpLHQsZSl9KX1mdW5jdGlvbiBZZihuLHIsdCxpKXt2YXIgbz12Yyh0KTtuLnNlcnZlcl8ub25EaXNjb25uZWN0UHV0KHIudG9TdHJpbmcoKSxvLnZhbCghMCksZnVuY3Rpb24odCxlKXtcIm9rXCI9PT10JiZKYyhuLm9uRGlzY29ubmVjdF8scixvKSxaZigwLGksdCxlKX0pfWZ1bmN0aW9uIFhmKHQsZSxuKXtuPVwiLmluZm9cIj09PWl1KGUuX3BhdGgpP01sKHQuaW5mb1N5bmNUcmVlXyxlLG4pOk1sKHQuc2VydmVyU3luY1RyZWVfLGUsbik7RGYodC5ldmVudFF1ZXVlXyxlLl9wYXRoLG4pfWZ1bmN0aW9uIEpmKHQpe3QucGVyc2lzdGVudENvbm5lY3Rpb25fJiZ0LnBlcnNpc3RlbnRDb25uZWN0aW9uXy5pbnRlcnJ1cHQoTWYpfWZ1bmN0aW9uICRmKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3ZhciByPVwiXCI7dC5wZXJzaXN0ZW50Q29ubmVjdGlvbl8mJihyPXQucGVyc2lzdGVudENvbm5lY3Rpb25fLmlkK1wiOlwiKSxaYS5hcHBseSh2b2lkIDAsbm8oW3JdLGVvKGUpKSl9ZnVuY3Rpb24gWmYodCxuLHIsaSl7biYmZHMoZnVuY3Rpb24oKXt2YXIgdCxlO1wib2tcIj09PXI/bihudWxsKTooZT10PShyfHxcImVycm9yXCIpLnRvVXBwZXJDYXNlKCksaSYmKGUrPVwiOiBcIitpKSwoZT1uZXcgRXJyb3IoZSkpLmNvZGU9dCxuKGUpKX0pfWZ1bmN0aW9uIHRwKHQsZSxuKXtyZXR1cm4gVWwodC5zZXJ2ZXJTeW5jVHJlZV8sZSxuKXx8aGMuRU1QVFlfTk9ERX1mdW5jdGlvbiBlcChlLHQpe3ZhciBuOyh0PXZvaWQgMD09PXQ/ZS50cmFuc2FjdGlvblF1ZXVlVHJlZV86dCl8fG9wKGUsdCksaGYodCk/KG49aXAoZSx0KSxhbygwPG4ubGVuZ3RoLFwiU2VuZGluZyB6ZXJvIGxlbmd0aCB0cmFuc2FjdGlvbiBxdWV1ZVwiKSxuLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiAwPT09dC5zdGF0dXN9KSYmZnVuY3Rpb24oaSxvLGEpe2Zvcih2YXIgdD1hLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5jdXJyZW50V3JpdGVJZH0pLGU9dHAoaSxvLHQpLG49ZSx0PWUuaGFzaCgpLHI9MDtyPGEubGVuZ3RoO3IrKyl7dmFyIHM9YVtyXTthbygwPT09cy5zdGF0dXMsXCJ0cnlUb1NlbmRUcmFuc2FjdGlvblF1ZXVlXzogaXRlbXMgaW4gcXVldWUgc2hvdWxkIGFsbCBiZSBydW4uXCIpLHMuc3RhdHVzPTEscy5yZXRyeUNvdW50Kys7dmFyIHU9ZnUobyxzLnBhdGgpO249bi51cGRhdGVDaGlsZCh1LHMuY3VycmVudE91dHB1dFNuYXBzaG90UmF3KX12YXIgZT1uLnZhbCghMCksYz1vO2kuc2VydmVyXy5wdXQoYy50b1N0cmluZygpLGUsZnVuY3Rpb24odCl7JGYoaSxcInRyYW5zYWN0aW9uIHB1dCByZXNwb25zZVwiLHtwYXRoOmMudG9TdHJpbmcoKSxzdGF0dXM6dH0pO3ZhciBlPVtdO2lmKFwib2tcIj09PXQpe2Zvcih2YXIgbj1bXSxyPTA7cjxhLmxlbmd0aDtyKyspIWZ1bmN0aW9uKHQpe2FbdF0uc3RhdHVzPTIsZT1lLmNvbmNhdCh4bChpLnNlcnZlclN5bmNUcmVlXyxhW3RdLmN1cnJlbnRXcml0ZUlkKSksYVt0XS5vbkNvbXBsZXRlJiZuLnB1c2goZnVuY3Rpb24oKXtyZXR1cm4gYVt0XS5vbkNvbXBsZXRlKG51bGwsITAsYVt0XS5jdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZCl9KSxhW3RdLnVud2F0Y2hlcigpfShyKTtvcChpLGNmKGkudHJhbnNhY3Rpb25RdWV1ZVRyZWVfLG8pKSxlcChpLGkudHJhbnNhY3Rpb25RdWV1ZVRyZWVfKSx4ZihpLmV2ZW50UXVldWVfLG8sZSk7Zm9yKHI9MDtyPG4ubGVuZ3RoO3IrKylkcyhuW3JdKX1lbHNle2lmKFwiZGF0YXN0YWxlXCI9PT10KWZvcihyPTA7cjxhLmxlbmd0aDtyKyspMz09PWFbcl0uc3RhdHVzP2Fbcl0uc3RhdHVzPTQ6YVtyXS5zdGF0dXM9MDtlbHNle25zKFwidHJhbnNhY3Rpb24gYXQgXCIrYy50b1N0cmluZygpK1wiIGZhaWxlZDogXCIrdCk7Zm9yKHI9MDtyPGEubGVuZ3RoO3IrKylhW3JdLnN0YXR1cz00LGFbcl0uYWJvcnRSZWFzb249dH1ucChpLG8pfX0sdCl9KGUsZGYodCksbikpOmZmKHQpJiZwZih0LGZ1bmN0aW9uKHQpe2VwKGUsdCl9KX1mdW5jdGlvbiBucCh0LGUpe3ZhciBuPXJwKHQsZSksZT1kZihuKTtyZXR1cm4gZnVuY3Rpb24odSxjLGgpe2lmKDA9PT1jLmxlbmd0aClyZXR1cm47Zm9yKHZhciBsPVtdLGY9W10scD1jLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQuc3RhdHVzfSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmN1cnJlbnRXcml0ZUlkfSksdD0wO3Q8Yy5sZW5ndGg7dCsrKSFmdW5jdGlvbih0KXt2YXIgZSxuLHIsaSxvPWNbdF0sYT1mdShoLG8ucGF0aCkscz0hMTthbyhudWxsIT09YSxcInJlcnVuVHJhbnNhY3Rpb25zVW5kZXJOb2RlXzogcmVsYXRpdmVQYXRoIHNob3VsZCBub3QgYmUgbnVsbC5cIiksND09PW8uc3RhdHVzPyhzPSEwLGU9by5hYm9ydFJlYXNvbixmPWYuY29uY2F0KHhsKHUuc2VydmVyU3luY1RyZWVfLG8uY3VycmVudFdyaXRlSWQsITApKSk6MD09PW8uc3RhdHVzJiYoZj1vLnJldHJ5Q291bnQ+PUZmPyhzPSEwLGU9XCJtYXhyZXRyeVwiLGYuY29uY2F0KHhsKHUuc2VydmVyU3luY1RyZWVfLG8uY3VycmVudFdyaXRlSWQsITApKSk6KG49dHAodSxvLnBhdGgscCksby5jdXJyZW50SW5wdXRTbmFwc2hvdD1uLHZvaWQgMCE9PShpPWNbdF0udXBkYXRlKG4udmFsKCkpKT8oQ2YoXCJ0cmFuc2FjdGlvbiBmYWlsZWQ6IERhdGEgcmV0dXJuZWQgXCIsaSxvLnBhdGgpLHI9dmMoaSksXCJvYmplY3RcIj09dHlwZW9mIGkmJm51bGwhPWkmJkRvKGksXCIucHJpb3JpdHlcIil8fChyPXIudXBkYXRlUHJpb3JpdHkobi5nZXRQcmlvcml0eSgpKSksYT1vLmN1cnJlbnRXcml0ZUlkLGk9QmYodSksaT1hZihyLG4saSksby5jdXJyZW50T3V0cHV0U25hcHNob3RSYXc9cixvLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJlc29sdmVkPWksby5jdXJyZW50V3JpdGVJZD1HZih1KSxwLnNwbGljZShwLmluZGV4T2YoYSksMSksKGY9Zi5jb25jYXQoT2wodS5zZXJ2ZXJTeW5jVHJlZV8sby5wYXRoLGksby5jdXJyZW50V3JpdGVJZCxvLmFwcGx5TG9jYWxseSkpKS5jb25jYXQoeGwodS5zZXJ2ZXJTeW5jVHJlZV8sYSwhMCkpKToocz0hMCxlPVwibm9kYXRhXCIsZi5jb25jYXQoeGwodS5zZXJ2ZXJTeW5jVHJlZV8sby5jdXJyZW50V3JpdGVJZCwhMCkpKSkpLHhmKHUuZXZlbnRRdWV1ZV8saCxmKSxmPVtdLHMmJihjW3RdLnN0YXR1cz0yLHM9Y1t0XS51bndhdGNoZXIsc2V0VGltZW91dChzLE1hdGguZmxvb3IoMCkpLGNbdF0ub25Db21wbGV0ZSYmKFwibm9kYXRhXCI9PT1lP2wucHVzaChmdW5jdGlvbigpe3JldHVybiBjW3RdLm9uQ29tcGxldGUobnVsbCwhMSxjW3RdLmN1cnJlbnRJbnB1dFNuYXBzaG90KX0pOmwucHVzaChmdW5jdGlvbigpe3JldHVybiBjW3RdLm9uQ29tcGxldGUobmV3IEVycm9yKGUpLCExLG51bGwpfSkpKX0odCk7b3AodSx1LnRyYW5zYWN0aW9uUXVldWVUcmVlXyk7Zm9yKHQ9MDt0PGwubGVuZ3RoO3QrKylkcyhsW3RdKTtlcCh1LHUudHJhbnNhY3Rpb25RdWV1ZVRyZWVfKX0odCxpcCh0LG4pLGUpLGV9ZnVuY3Rpb24gcnAodCxlKXtmb3IodmFyIG49dC50cmFuc2FjdGlvblF1ZXVlVHJlZV8scj1pdShlKTtudWxsIT09ciYmdm9pZCAwPT09aGYobik7KW49Y2YobixyKSxyPWl1KGU9YXUoZSkpO3JldHVybiBufWZ1bmN0aW9uIGlwKHQsZSl7dmFyIG49W107cmV0dXJuIGZ1bmN0aW9uIGUobix0LHIpe3ZhciBpPWhmKHQpO2lmKGkpZm9yKHZhciBvPTA7bzxpLmxlbmd0aDtvKyspci5wdXNoKGlbb10pO3BmKHQsZnVuY3Rpb24odCl7ZShuLHQscil9KX0odCxlLG4pLG4uc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0Lm9yZGVyLWUub3JkZXJ9KSxufWZ1bmN0aW9uIG9wKGUsdCl7dmFyIG49aGYodCk7aWYobil7Zm9yKHZhciByPTAsaT0wO2k8bi5sZW5ndGg7aSsrKTIhPT1uW2ldLnN0YXR1cyYmKG5bcl09bltpXSxyKyspO24ubGVuZ3RoPXIsbGYodCwwPG4ubGVuZ3RoP246dm9pZCAwKX1wZih0LGZ1bmN0aW9uKHQpe29wKGUsdCl9KX1mdW5jdGlvbiBhcChlLHQpe3ZhciBuPWRmKHJwKGUsdCkpLHQ9Y2YoZS50cmFuc2FjdGlvblF1ZXVlVHJlZV8sdCk7cmV0dXJuIGZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9bj90OnQucGFyZW50O251bGwhPT1yOyl7aWYoZShyKSlyZXR1cm47cj1yLnBhcmVudH19KHQsZnVuY3Rpb24odCl7c3AoZSx0KX0pLHNwKGUsdCksZnVuY3Rpb24gZSh0LG4scixpKXtyJiYhaSYmbih0KSxwZih0LGZ1bmN0aW9uKHQpe2UodCxuLCEwLGkpfSksciYmaSYmbih0KX0odCxmdW5jdGlvbih0KXtzcChlLHQpfSksbn1mdW5jdGlvbiBzcCh0LGUpe3ZhciBuPWhmKGUpO2lmKG4pe2Zvcih2YXIgcj1bXSxpPVtdLG89LTEsYT0wO2E8bi5sZW5ndGg7YSsrKTM9PT1uW2FdLnN0YXR1c3x8KDE9PT1uW2FdLnN0YXR1cz8oYW8obz09PWEtMSxcIkFsbCBTRU5UIGl0ZW1zIHNob3VsZCBiZSBhdCBiZWdpbm5pbmcgb2YgcXVldWUuXCIpLG5bbz1hXS5zdGF0dXM9MyxuW2FdLmFib3J0UmVhc29uPVwic2V0XCIpOihhbygwPT09blthXS5zdGF0dXMsXCJVbmV4cGVjdGVkIHRyYW5zYWN0aW9uIHN0YXR1cyBpbiBhYm9ydFwiKSxuW2FdLnVud2F0Y2hlcigpLGk9aS5jb25jYXQoeGwodC5zZXJ2ZXJTeW5jVHJlZV8sblthXS5jdXJyZW50V3JpdGVJZCwhMCkpLG5bYV0ub25Db21wbGV0ZSYmci5wdXNoKG5bYV0ub25Db21wbGV0ZS5iaW5kKG51bGwsbmV3IEVycm9yKFwic2V0XCIpLCExLG51bGwpKSkpOy0xPT09bz9sZihlLHZvaWQgMCk6bi5sZW5ndGg9bysxLHhmKHQuZXZlbnRRdWV1ZV8sZGYoZSksaSk7Zm9yKGE9MDthPHIubGVuZ3RoO2ErKylkcyhyW2FdKX19dmFyIHVwPWZ1bmN0aW9uKHQsZSl7dmFyIG49Y3AodCkscj1uLm5hbWVzcGFjZTtcImZpcmViYXNlLmNvbVwiPT09bi5kb21haW4mJmVzKG4uaG9zdCtcIiBpcyBubyBsb25nZXIgc3VwcG9ydGVkLiBQbGVhc2UgdXNlIDxZT1VSIEZJUkVCQVNFPi5maXJlYmFzZWlvLmNvbSBpbnN0ZWFkXCIpLHImJlwidW5kZWZpbmVkXCIhPT1yfHxcImxvY2FsaG9zdFwiPT09bi5kb21haW58fGVzKFwiQ2Fubm90IHBhcnNlIEZpcmViYXNlIHVybC4gUGxlYXNlIHVzZSBodHRwczovLzxZT1VSIEZJUkVCQVNFPi5maXJlYmFzZWlvLmNvbVwiKSxuLnNlY3VyZXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LmxvY2F0aW9uJiZ3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wmJi0xIT09d2luZG93LmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoXCJodHRwczpcIikmJm5zKFwiSW5zZWN1cmUgRmlyZWJhc2UgYWNjZXNzIGZyb20gYSBzZWN1cmUgcGFnZS4gUGxlYXNlIHVzZSBodHRwcyBpbiBjYWxscyB0byBuZXcgRmlyZWJhc2UoKS5cIik7dD1cIndzXCI9PT1uLnNjaGVtZXx8XCJ3c3NcIj09PW4uc2NoZW1lO3JldHVybntyZXBvSW5mbzpuZXcgRXMobi5ob3N0LG4uc2VjdXJlLHIsZSx0LFwiXCIsciE9PW4uc3ViZG9tYWluKSxwYXRoOm5ldyBldShuLnBhdGhTdHJpbmcpfX0sY3A9ZnVuY3Rpb24odCl7dmFyIGUsbixyLGk9XCJcIixvPVwiXCIsYT1cIlwiLHM9XCJcIix1PVwiXCIsYz0hMCxoPVwiaHR0cHNcIixsPTQ0MztyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmKDA8PShyPXQuaW5kZXhPZihcIi8vXCIpKSYmKGg9dC5zdWJzdHJpbmcoMCxyLTEpLHQ9dC5zdWJzdHJpbmcocisyKSksLTE9PT0oZT10LmluZGV4T2YoXCIvXCIpKSYmKGU9dC5sZW5ndGgpLC0xPT09KG49dC5pbmRleE9mKFwiP1wiKSkmJihuPXQubGVuZ3RoKSxpPXQuc3Vic3RyaW5nKDAsTWF0aC5taW4oZSxuKSksZTxuJiYocz1mdW5jdGlvbih0KXtmb3IodmFyIGU9XCJcIixuPXQuc3BsaXQoXCIvXCIpLHI9MDtyPG4ubGVuZ3RoO3IrKylpZigwPG5bcl0ubGVuZ3RoKXt2YXIgaT1uW3JdO3RyeXtpPWRlY29kZVVSSUNvbXBvbmVudChpLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSl9Y2F0Y2godCl7fWUrPVwiL1wiK2l9cmV0dXJuIGV9KHQuc3Vic3RyaW5nKGUsbikpKSxuPWZ1bmN0aW9uKHQpe3ZhciBlLG4scj17fTtcIj9cIj09PXQuY2hhckF0KDApJiYodD10LnN1YnN0cmluZygxKSk7dHJ5e2Zvcih2YXIgaT10byh0LnNwbGl0KFwiJlwiKSksbz1pLm5leHQoKTshby5kb25lO289aS5uZXh0KCkpe3ZhciBhLHM9by52YWx1ZTswIT09cy5sZW5ndGgmJigyPT09KGE9cy5zcGxpdChcIj1cIikpLmxlbmd0aD9yW2RlY29kZVVSSUNvbXBvbmVudChhWzBdKV09ZGVjb2RlVVJJQ29tcG9uZW50KGFbMV0pOm5zKFwiSW52YWxpZCBxdWVyeSBzZWdtZW50ICdcIitzK1wiJyBpbiBxdWVyeSAnXCIrdCtcIidcIikpfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtvJiYhby5kb25lJiYobj1pLnJldHVybikmJm4uY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19cmV0dXJuIHJ9KHQuc3Vic3RyaW5nKE1hdGgubWluKHQubGVuZ3RoLG4pKSksMDw9KHI9aS5pbmRleE9mKFwiOlwiKSk/KGM9XCJodHRwc1wiPT09aHx8XCJ3c3NcIj09PWgsbD1wYXJzZUludChpLnN1YnN0cmluZyhyKzEpLDEwKSk6cj1pLmxlbmd0aCxcImxvY2FsaG9zdFwiPT09KHI9aS5zbGljZSgwLHIpKS50b0xvd2VyQ2FzZSgpP289XCJsb2NhbGhvc3RcIjpyLnNwbGl0KFwiLlwiKS5sZW5ndGg8PTI/bz1yOihyPWkuaW5kZXhPZihcIi5cIiksYT1pLnN1YnN0cmluZygwLHIpLnRvTG93ZXJDYXNlKCksbz1pLnN1YnN0cmluZyhyKzEpLHU9YSksXCJuc1wiaW4gbiYmKHU9bi5ucykpLHtob3N0OmkscG9ydDpsLGRvbWFpbjpvLHN1YmRvbWFpbjphLHNlY3VyZTpjLHNjaGVtZTpoLHBhdGhTdHJpbmc6cyxuYW1lc3BhY2U6dX19LGhwPShscC5wcm90b3R5cGUuZ2V0UGF0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuc25hcHNob3QucmVmO3JldHVybihcInZhbHVlXCI9PT10aGlzLmV2ZW50VHlwZT90OnQucGFyZW50KS5fcGF0aH0sbHAucHJvdG90eXBlLmdldEV2ZW50VHlwZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmV2ZW50VHlwZX0sbHAucHJvdG90eXBlLmdldEV2ZW50UnVubmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXZlbnRSZWdpc3RyYXRpb24uZ2V0RXZlbnRSdW5uZXIodGhpcyl9LGxwLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBhdGgoKS50b1N0cmluZygpK1wiOlwiK3RoaXMuZXZlbnRUeXBlK1wiOlwiK1BvKHRoaXMuc25hcHNob3QuZXhwb3J0VmFsKCkpfSxscCk7ZnVuY3Rpb24gbHAodCxlLG4scil7dGhpcy5ldmVudFR5cGU9dCx0aGlzLmV2ZW50UmVnaXN0cmF0aW9uPWUsdGhpcy5zbmFwc2hvdD1uLHRoaXMucHJldk5hbWU9cn12YXIgZnA9KHBwLnByb3RvdHlwZS5nZXRQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF0aH0scHAucHJvdG90eXBlLmdldEV2ZW50VHlwZT1mdW5jdGlvbigpe3JldHVyblwiY2FuY2VsXCJ9LHBwLnByb3RvdHlwZS5nZXRFdmVudFJ1bm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmV2ZW50UmVnaXN0cmF0aW9uLmdldEV2ZW50UnVubmVyKHRoaXMpfSxwcC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXRoLnRvU3RyaW5nKCkrXCI6Y2FuY2VsXCJ9LHBwKTtmdW5jdGlvbiBwcCh0LGUsbil7dGhpcy5ldmVudFJlZ2lzdHJhdGlvbj10LHRoaXMuZXJyb3I9ZSx0aGlzLnBhdGg9bn12YXIgZHA9KHZwLnByb3RvdHlwZS5vblZhbHVlPWZ1bmN0aW9uKHQsZSl7dGhpcy5zbmFwc2hvdENhbGxiYWNrLmNhbGwobnVsbCx0LGUpfSx2cC5wcm90b3R5cGUub25DYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIGFvKHRoaXMuaGFzQ2FuY2VsQ2FsbGJhY2ssXCJSYWlzaW5nIGEgY2FuY2VsIGV2ZW50IG9uIGEgbGlzdGVuZXIgd2l0aCBubyBjYW5jZWwgY2FsbGJhY2tcIiksdGhpcy5jYW5jZWxDYWxsYmFjay5jYWxsKG51bGwsdCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2cC5wcm90b3R5cGUsXCJoYXNDYW5jZWxDYWxsYmFja1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuY2FuY2VsQ2FsbGJhY2t9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdnAucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc25hcHNob3RDYWxsYmFjaz09PXQuc25hcHNob3RDYWxsYmFja3x8dGhpcy5zbmFwc2hvdENhbGxiYWNrLnVzZXJDYWxsYmFjaz09PXQuc25hcHNob3RDYWxsYmFjay51c2VyQ2FsbGJhY2smJnRoaXMuc25hcHNob3RDYWxsYmFjay5jb250ZXh0PT09dC5zbmFwc2hvdENhbGxiYWNrLmNvbnRleHR9LHZwKTtmdW5jdGlvbiB2cCh0LGUpe3RoaXMuc25hcHNob3RDYWxsYmFjaz10LHRoaXMuY2FuY2VsQ2FsbGJhY2s9ZX12YXIgZ3A9KHlwLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbG87cmV0dXJuIFFmKHRoaXMuX3JlcG8sdGhpcy5fcGF0aCx0LndyYXBDYWxsYmFjayhmdW5jdGlvbigpe30pKSx0LnByb21pc2V9LHlwLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtBZihcIk9uRGlzY29ubmVjdC5yZW1vdmVcIix0aGlzLl9wYXRoKTt2YXIgdD1uZXcgbG87cmV0dXJuIFlmKHRoaXMuX3JlcG8sdGhpcy5fcGF0aCxudWxsLHQud3JhcENhbGxiYWNrKGZ1bmN0aW9uKCl7fSkpLHQucHJvbWlzZX0seXAucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXtBZihcIk9uRGlzY29ubmVjdC5zZXRcIix0aGlzLl9wYXRoKSxTZihcIk9uRGlzY29ubmVjdC5zZXRcIix0LHRoaXMuX3BhdGgsITEpO3ZhciBlPW5ldyBsbztyZXR1cm4gWWYodGhpcy5fcmVwbyx0aGlzLl9wYXRoLHQsZS53cmFwQ2FsbGJhY2soZnVuY3Rpb24oKXt9KSksZS5wcm9taXNlfSx5cC5wcm90b3R5cGUuc2V0V2l0aFByaW9yaXR5PWZ1bmN0aW9uKHQsZSl7QWYoXCJPbkRpc2Nvbm5lY3Quc2V0V2l0aFByaW9yaXR5XCIsdGhpcy5fcGF0aCksU2YoXCJPbkRpc2Nvbm5lY3Quc2V0V2l0aFByaW9yaXR5XCIsdCx0aGlzLl9wYXRoLCExKSxiZihcIk9uRGlzY29ubmVjdC5zZXRXaXRoUHJpb3JpdHlcIixlLCExKTt2YXIgbixyLGksbyxhPW5ldyBsbztyZXR1cm4gbj10aGlzLl9yZXBvLHI9dGhpcy5fcGF0aCx0PXQsZT1lLGk9YS53cmFwQ2FsbGJhY2soZnVuY3Rpb24oKXt9KSxvPXZjKHQsZSksbi5zZXJ2ZXJfLm9uRGlzY29ubmVjdFB1dChyLnRvU3RyaW5nKCksby52YWwoITApLGZ1bmN0aW9uKHQsZSl7XCJva1wiPT09dCYmSmMobi5vbkRpc2Nvbm5lY3RfLHIsbyksWmYoMCxpLHQsZSl9KSxhLnByb21pc2V9LHlwLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7QWYoXCJPbkRpc2Nvbm5lY3QudXBkYXRlXCIsdGhpcy5fcGF0aCksbWYoXCJPbkRpc2Nvbm5lY3QudXBkYXRlXCIsdCx0aGlzLl9wYXRoLCExKTt2YXIgZT1uZXcgbG87cmV0dXJuIGZ1bmN0aW9uKG4scixpLG8pe2lmKExvKGkpKXJldHVybiBaYShcIm9uRGlzY29ubmVjdCgpLnVwZGF0ZSgpIGNhbGxlZCB3aXRoIGVtcHR5IGRhdGEuICBEb24ndCBkbyBhbnl0aGluZy5cIiksWmYoMCxvLFwib2tcIix2b2lkIDApO24uc2VydmVyXy5vbkRpc2Nvbm5lY3RNZXJnZShyLnRvU3RyaW5nKCksaSxmdW5jdGlvbih0LGUpe1wib2tcIj09PXQmJnNzKGksZnVuY3Rpb24odCxlKXtlPXZjKGUpO0pjKG4ub25EaXNjb25uZWN0XyxodShyLHQpLGUpfSksWmYoMCxvLHQsZSl9KX0odGhpcy5fcmVwbyx0aGlzLl9wYXRoLHQsZS53cmFwQ2FsbGJhY2soZnVuY3Rpb24oKXt9KSksZS5wcm9taXNlfSx5cCk7ZnVuY3Rpb24geXAodCxlKXt0aGlzLl9yZXBvPXQsdGhpcy5fcGF0aD1lfXZhciBtcD0oT2JqZWN0LmRlZmluZVByb3BlcnR5KGJwLnByb3RvdHlwZSxcImtleVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbHUodGhpcy5fcGF0aCk/bnVsbDpzdSh0aGlzLl9wYXRoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYnAucHJvdG90eXBlLFwicmVmXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBuZXcgRXAodGhpcy5fcmVwbyx0aGlzLl9wYXRoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYnAucHJvdG90eXBlLFwiX3F1ZXJ5SWRlbnRpZmllclwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1XYyh0aGlzLl9xdWVyeVBhcmFtcyksdD1hcyh0KTtyZXR1cm5cInt9XCI9PT10P1wiZGVmYXVsdFwiOnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGJwLnByb3RvdHlwZSxcIl9xdWVyeU9iamVjdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gV2ModGhpcy5fcXVlcnlQYXJhbXMpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGJwLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe2lmKCEoKHQ9dGEodCkpaW5zdGFuY2VvZiBicCkpcmV0dXJuITE7dmFyIGU9dGhpcy5fcmVwbz09PXQuX3JlcG8sbj1kdSh0aGlzLl9wYXRoLHQuX3BhdGgpLHQ9dGhpcy5fcXVlcnlJZGVudGlmaWVyPT09dC5fcXVlcnlJZGVudGlmaWVyO3JldHVybiBlJiZuJiZ0fSxicC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKX0sYnAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcG8udG9TdHJpbmcoKStmdW5jdGlvbih0KXtmb3IodmFyIGU9XCJcIixuPXQucGllY2VOdW1fO248dC5waWVjZXNfLmxlbmd0aDtuKyspXCJcIiE9PXQucGllY2VzX1tuXSYmKGUrPVwiL1wiK2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcodC5waWVjZXNfW25dKSkpO3JldHVybiBlfHxcIi9cIn0odGhpcy5fcGF0aCl9LGJwKTtmdW5jdGlvbiBicCh0LGUsbixyKXt0aGlzLl9yZXBvPXQsdGhpcy5fcGF0aD1lLHRoaXMuX3F1ZXJ5UGFyYW1zPW4sdGhpcy5fb3JkZXJCeUNhbGxlZD1yfWZ1bmN0aW9uIF9wKHQsZSl7aWYoITA9PT10Ll9vcmRlckJ5Q2FsbGVkKXRocm93IG5ldyBFcnJvcihlK1wiOiBZb3UgY2FuJ3QgY29tYmluZSBtdWx0aXBsZSBvcmRlckJ5IGNhbGxzLlwiKX1mdW5jdGlvbiB3cCh0KXt2YXIgZT1udWxsLG49bnVsbDtpZih0Lmhhc1N0YXJ0KCkmJihlPXQuZ2V0SW5kZXhTdGFydFZhbHVlKCkpLHQuaGFzRW5kKCkmJihuPXQuZ2V0SW5kZXhFbmRWYWx1ZSgpKSx0LmdldEluZGV4KCk9PT1EdSl7dmFyIHI9XCJRdWVyeTogV2hlbiBvcmRlcmluZyBieSBrZXksIHlvdSBtYXkgb25seSBwYXNzIG9uZSBhcmd1bWVudCB0byBzdGFydEF0KCksIGVuZEF0KCksIG9yIGVxdWFsVG8oKS5cIixpPVwiUXVlcnk6IFdoZW4gb3JkZXJpbmcgYnkga2V5LCB0aGUgYXJndW1lbnQgcGFzc2VkIHRvIHN0YXJ0QXQoKSwgc3RhcnRBZnRlcigpLCBlbmRBdCgpLCBlbmRCZWZvcmUoKSwgb3IgZXF1YWxUbygpIG11c3QgYmUgYSBzdHJpbmcuXCI7aWYodC5oYXNTdGFydCgpKXtpZih0LmdldEluZGV4U3RhcnROYW1lKCkhPT1ycyl0aHJvdyBuZXcgRXJyb3Iocik7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKGkpfWlmKHQuaGFzRW5kKCkpe2lmKHQuZ2V0SW5kZXhFbmROYW1lKCkhPT1pcyl0aHJvdyBuZXcgRXJyb3Iocik7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIG4pdGhyb3cgbmV3IEVycm9yKGkpfX1lbHNlIGlmKHQuZ2V0SW5kZXgoKT09PVp1KXtpZihudWxsIT1lJiYhRWYoZSl8fG51bGwhPW4mJiFFZihuKSl0aHJvdyBuZXcgRXJyb3IoXCJRdWVyeTogV2hlbiBvcmRlcmluZyBieSBwcmlvcml0eSwgdGhlIGZpcnN0IGFyZ3VtZW50IHBhc3NlZCB0byBzdGFydEF0KCksIHN0YXJ0QWZ0ZXIoKSBlbmRBdCgpLCBlbmRCZWZvcmUoKSwgb3IgZXF1YWxUbygpIG11c3QgYmUgYSB2YWxpZCBwcmlvcml0eSB2YWx1ZSAobnVsbCwgYSBudW1iZXIsIG9yIGEgc3RyaW5nKS5cIil9ZWxzZSBpZihhbyh0LmdldEluZGV4KClpbnN0YW5jZW9mIG1jfHx0LmdldEluZGV4KCk9PT1TYyxcInVua25vd24gaW5kZXggdHlwZS5cIiksbnVsbCE9ZSYmXCJvYmplY3RcIj09dHlwZW9mIGV8fG51bGwhPW4mJlwib2JqZWN0XCI9PXR5cGVvZiBuKXRocm93IG5ldyBFcnJvcihcIlF1ZXJ5OiBGaXJzdCBhcmd1bWVudCBwYXNzZWQgdG8gc3RhcnRBdCgpLCBzdGFydEFmdGVyKCksIGVuZEF0KCksIGVuZEJlZm9yZSgpLCBvciBlcXVhbFRvKCkgY2Fubm90IGJlIGFuIG9iamVjdC5cIil9ZnVuY3Rpb24gSXAodCl7aWYodC5oYXNTdGFydCgpJiZ0Lmhhc0VuZCgpJiZ0Lmhhc0xpbWl0KCkmJiF0Lmhhc0FuY2hvcmVkTGltaXQoKSl0aHJvdyBuZXcgRXJyb3IoXCJRdWVyeTogQ2FuJ3QgY29tYmluZSBzdGFydEF0KCksIHN0YXJ0QWZ0ZXIoKSwgZW5kQXQoKSwgZW5kQmVmb3JlKCksIGFuZCBsaW1pdCgpLiBVc2UgbGltaXRUb0ZpcnN0KCkgb3IgbGltaXRUb0xhc3QoKSBpbnN0ZWFkLlwiKX12YXIgVHAsRXA9KFhpKFNwLFRwPW1wKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoU3AucHJvdG90eXBlLFwicGFyZW50XCIse2dldDpmdW5jdGlvbigpe3ZhciB0PWN1KHRoaXMuX3BhdGgpO3JldHVybiBudWxsPT09dD9udWxsOm5ldyBTcCh0aGlzLl9yZXBvLHQpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcC5wcm90b3R5cGUsXCJyb290XCIse2dldDpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzO251bGwhPT10LnBhcmVudDspdD10LnBhcmVudDtyZXR1cm4gdH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxTcCk7ZnVuY3Rpb24gU3AodCxlKXtyZXR1cm4gVHAuY2FsbCh0aGlzLHQsZSxuZXcgVWMsITEpfHx0aGlzfXZhciBDcD0oT2JqZWN0LmRlZmluZVByb3BlcnR5KGtwLnByb3RvdHlwZSxcInByaW9yaXR5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlLmdldFByaW9yaXR5KCkudmFsKCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGtwLnByb3RvdHlwZSxcImtleVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWYua2V5fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShrcC5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlLm51bUNoaWxkcmVuKCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksa3AucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBldSh0KSx0PVJwKHRoaXMucmVmLHQpO3JldHVybiBuZXcga3AodGhpcy5fbm9kZS5nZXRDaGlsZChlKSx0LFp1KX0sa3AucHJvdG90eXBlLmV4aXN0cz1mdW5jdGlvbigpe3JldHVybiF0aGlzLl9ub2RlLmlzRW1wdHkoKX0sa3AucHJvdG90eXBlLmV4cG9ydFZhbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlLnZhbCghMCl9LGtwLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKG4pe3ZhciByPXRoaXM7cmV0dXJuIXRoaXMuX25vZGUuaXNMZWFmTm9kZSgpJiYhIXRoaXMuX25vZGUuZm9yRWFjaENoaWxkKHRoaXMuX2luZGV4LGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4obmV3IGtwKGUsUnAoci5yZWYsdCksWnUpKX0pfSxrcC5wcm90b3R5cGUuaGFzQ2hpbGQ9ZnVuY3Rpb24odCl7dD1uZXcgZXUodCk7cmV0dXJuIXRoaXMuX25vZGUuZ2V0Q2hpbGQodCkuaXNFbXB0eSgpfSxrcC5wcm90b3R5cGUuaGFzQ2hpbGRyZW49ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5fbm9kZS5pc0xlYWZOb2RlKCkmJiF0aGlzLl9ub2RlLmlzRW1wdHkoKX0sa3AucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmV4cG9ydFZhbCgpfSxrcC5wcm90b3R5cGUudmFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGUudmFsKCl9LGtwKTtmdW5jdGlvbiBrcCh0LGUsbil7dGhpcy5fbm9kZT10LHRoaXMucmVmPWUsdGhpcy5faW5kZXg9bn1mdW5jdGlvbiBOcCh0LGUpe3JldHVybih0PXRhKHQpKS5fY2hlY2tOb3REZWxldGVkKFwicmVmXCIpLHZvaWQgMCE9PWU/UnAodC5fcm9vdCxlKTp0Ll9yb290fWZ1bmN0aW9uIEFwKHQsZSl7KHQ9dGEodCkpLl9jaGVja05vdERlbGV0ZWQoXCJyZWZGcm9tVVJMXCIpO3ZhciBuPXVwKGUsdC5fcmVwby5yZXBvSW5mb18ubm9kZUFkbWluKTtSZihcInJlZkZyb21VUkxcIixuKTtlPW4ucmVwb0luZm87cmV0dXJuIHQuX3JlcG8ucmVwb0luZm9fLmlzQ3VzdG9tSG9zdCgpfHxlLmhvc3Q9PT10Ll9yZXBvLnJlcG9JbmZvXy5ob3N0fHxlcyhcInJlZkZyb21VUkw6IEhvc3QgbmFtZSBkb2VzIG5vdCBtYXRjaCB0aGUgY3VycmVudCBkYXRhYmFzZTogKGZvdW5kIFwiK2UuaG9zdCtcIiBidXQgZXhwZWN0ZWQgXCIrdC5fcmVwby5yZXBvSW5mb18uaG9zdCtcIilcIiksTnAodCxuLnBhdGgudG9TdHJpbmcoKSl9ZnVuY3Rpb24gUnAodCxlKXtyZXR1cm4obnVsbD09PWl1KCh0PXRhKHQpKS5fcGF0aCk/TmY6a2YpKFwiY2hpbGRcIixcInBhdGhcIixlLCExKSxuZXcgRXAodC5fcmVwbyxodSh0Ll9wYXRoLGUpKX1mdW5jdGlvbiBQcCh0LGUpe3Q9dGEodCksQWYoXCJzZXRcIix0Ll9wYXRoKSxTZihcInNldFwiLGUsdC5fcGF0aCwhMSk7dmFyIG49bmV3IGxvO3JldHVybiB6Zih0Ll9yZXBvLHQuX3BhdGgsZSxudWxsLG4ud3JhcENhbGxiYWNrKGZ1bmN0aW9uKCl7fSkpLG4ucHJvbWlzZX1mdW5jdGlvbiBPcCh0LGUpe21mKFwidXBkYXRlXCIsZSx0Ll9wYXRoLCExKTt2YXIgbj1uZXcgbG87cmV0dXJuIGZ1bmN0aW9uKGksbyx0LGEpeyRmKGksXCJ1cGRhdGVcIix7cGF0aDpvLnRvU3RyaW5nKCksdmFsdWU6dH0pO3ZhciBzLGUsbj0hMCxyPUJmKGkpLHU9e307c3ModCxmdW5jdGlvbih0LGUpe249ITEsdVt0XT1vZihodShvLHQpLHZjKGUpLGkuc2VydmVyU3luY1RyZWVfLHIpfSksbj8oWmEoXCJ1cGRhdGUoKSBjYWxsZWQgd2l0aCBlbXB0eSBkYXRhLiAgRG9uJ3QgZG8gYW55dGhpbmcuXCIpLFpmKDAsYSxcIm9rXCIsdm9pZCAwKSk6KHM9R2YoaSksZT1EbChpLnNlcnZlclN5bmNUcmVlXyxvLHUscyksT2YoaS5ldmVudFF1ZXVlXyxlKSxpLnNlcnZlcl8ubWVyZ2Uoby50b1N0cmluZygpLHQsZnVuY3Rpb24odCxlKXt2YXIgbj1cIm9rXCI9PT10O258fG5zKFwidXBkYXRlIGF0IFwiK28rXCIgZmFpbGVkOiBcIit0KTt2YXIgcj14bChpLnNlcnZlclN5bmNUcmVlXyxzLCFuKSxuPTA8ci5sZW5ndGg/bnAoaSxvKTpvO3hmKGkuZXZlbnRRdWV1ZV8sbixyKSxaZigwLGEsdCxlKX0pLHNzKHQsZnVuY3Rpb24odCl7dD1hcChpLGh1KG8sdCkpO25wKGksdCl9KSx4ZihpLmV2ZW50UXVldWVfLG8sW10pKX0odC5fcmVwbyx0Ll9wYXRoLGUsbi53cmFwQ2FsbGJhY2soZnVuY3Rpb24oKXt9KSksbi5wcm9taXNlfWZ1bmN0aW9uIERwKGUpe3JldHVybiBlPXRhKGUpLG49ZS5fcmVwbyxyPWUsKG51bGwhPSh0PWpsKG4uc2VydmVyU3luY1RyZWVfLHIpKT9Qcm9taXNlLnJlc29sdmUodCk6bi5zZXJ2ZXJfLmdldChyKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPXZjKHQpLHQ9TGwobi5zZXJ2ZXJTeW5jVHJlZV8sci5fcGF0aCxlKTtyZXR1cm4gRGYobi5ldmVudFF1ZXVlXyxyLl9wYXRoLHQpLFByb21pc2UucmVzb2x2ZShlKX0sZnVuY3Rpb24odCl7cmV0dXJuICRmKG4sXCJnZXQgZm9yIHF1ZXJ5IFwiK1BvKHIpK1wiIGZhaWxlZDogXCIrdCksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHQpKX0pKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgQ3AodCxuZXcgRXAoZS5fcmVwbyxlLl9wYXRoKSxlLl9xdWVyeVBhcmFtcy5nZXRJbmRleCgpKX0pO3ZhciBuLHIsdH12YXIgeHA9KExwLnByb3RvdHlwZS5yZXNwb25kc1RvPWZ1bmN0aW9uKHQpe3JldHVyblwidmFsdWVcIj09PXR9LExwLnByb3RvdHlwZS5jcmVhdGVFdmVudD1mdW5jdGlvbih0LGUpe3ZhciBuPWUuX3F1ZXJ5UGFyYW1zLmdldEluZGV4KCk7cmV0dXJuIG5ldyBocChcInZhbHVlXCIsdGhpcyxuZXcgQ3AodC5zbmFwc2hvdE5vZGUsbmV3IEVwKGUuX3JlcG8sZS5fcGF0aCksbikpfSxMcC5wcm90b3R5cGUuZ2V0RXZlbnRSdW5uZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm5cImNhbmNlbFwiPT09dC5nZXRFdmVudFR5cGUoKT9mdW5jdGlvbigpe3JldHVybiBlLmNhbGxiYWNrQ29udGV4dC5vbkNhbmNlbCh0LmVycm9yKX06ZnVuY3Rpb24oKXtyZXR1cm4gZS5jYWxsYmFja0NvbnRleHQub25WYWx1ZSh0LnNuYXBzaG90LG51bGwpfX0sTHAucHJvdG90eXBlLmNyZWF0ZUNhbmNlbEV2ZW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY2FsbGJhY2tDb250ZXh0Lmhhc0NhbmNlbENhbGxiYWNrP25ldyBmcCh0aGlzLHQsZSk6bnVsbH0sTHAucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBMcCYmKCF0LmNhbGxiYWNrQ29udGV4dHx8IXRoaXMuY2FsbGJhY2tDb250ZXh0fHx0LmNhbGxiYWNrQ29udGV4dC5tYXRjaGVzKHRoaXMuY2FsbGJhY2tDb250ZXh0KSl9LExwLnByb3RvdHlwZS5oYXNBbnlDYWxsYmFjaz1mdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5jYWxsYmFja0NvbnRleHR9LExwKTtmdW5jdGlvbiBMcCh0KXt0aGlzLmNhbGxiYWNrQ29udGV4dD10fXZhciBNcD0oRnAucHJvdG90eXBlLnJlc3BvbmRzVG89ZnVuY3Rpb24odCl7dD1cImNoaWxkcmVuX3JlbW92ZWRcIj09PSh0PVwiY2hpbGRyZW5fYWRkZWRcIj09PXQ/XCJjaGlsZF9hZGRlZFwiOnQpP1wiY2hpbGRfcmVtb3ZlZFwiOnQ7cmV0dXJuIHRoaXMuZXZlbnRUeXBlPT09dH0sRnAucHJvdG90eXBlLmNyZWF0ZUNhbmNlbEV2ZW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY2FsbGJhY2tDb250ZXh0Lmhhc0NhbmNlbENhbGxiYWNrP25ldyBmcCh0aGlzLHQsZSk6bnVsbH0sRnAucHJvdG90eXBlLmNyZWF0ZUV2ZW50PWZ1bmN0aW9uKHQsZSl7YW8obnVsbCE9dC5jaGlsZE5hbWUsXCJDaGlsZCBldmVudHMgc2hvdWxkIGhhdmUgYSBjaGlsZE5hbWUuXCIpO3ZhciBuPVJwKG5ldyBFcChlLl9yZXBvLGUuX3BhdGgpLHQuY2hpbGROYW1lKSxlPWUuX3F1ZXJ5UGFyYW1zLmdldEluZGV4KCk7cmV0dXJuIG5ldyBocCh0LnR5cGUsdGhpcyxuZXcgQ3AodC5zbmFwc2hvdE5vZGUsbixlKSx0LnByZXZOYW1lKX0sRnAucHJvdG90eXBlLmdldEV2ZW50UnVubmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuXCJjYW5jZWxcIj09PXQuZ2V0RXZlbnRUeXBlKCk/ZnVuY3Rpb24oKXtyZXR1cm4gZS5jYWxsYmFja0NvbnRleHQub25DYW5jZWwodC5lcnJvcil9OmZ1bmN0aW9uKCl7cmV0dXJuIGUuY2FsbGJhY2tDb250ZXh0Lm9uVmFsdWUodC5zbmFwc2hvdCx0LnByZXZOYW1lKX19LEZwLnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRnAmJih0aGlzLmV2ZW50VHlwZT09PXQuZXZlbnRUeXBlJiYoIXRoaXMuY2FsbGJhY2tDb250ZXh0fHwhdC5jYWxsYmFja0NvbnRleHR8fHRoaXMuY2FsbGJhY2tDb250ZXh0Lm1hdGNoZXModC5jYWxsYmFja0NvbnRleHQpKSl9LEZwLnByb3RvdHlwZS5oYXNBbnlDYWxsYmFjaz1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5jYWxsYmFja0NvbnRleHR9LEZwKTtmdW5jdGlvbiBGcCh0LGUpe3RoaXMuZXZlbnRUeXBlPXQsdGhpcy5jYWxsYmFja0NvbnRleHQ9ZX1mdW5jdGlvbiBVcChuLHQsZSxyLGkpe3ZhciBvO1wib2JqZWN0XCI9PXR5cGVvZiByJiYoYT12b2lkIDAsaT1yKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYoYT1yKSxpJiZpLm9ubHlPbmNlJiYoKGk9ZnVuY3Rpb24odCxlKXtvKHQsZSksWGYobi5fcmVwbyxuLHMpfSkudXNlckNhbGxiYWNrPShvPWUpLnVzZXJDYWxsYmFjayxpLmNvbnRleHQ9ZS5jb250ZXh0LGU9aSk7dmFyIGEsZT1uZXcgZHAoZSxhfHx2b2lkIDApLHM9XCJ2YWx1ZVwiPT09dD9uZXcgeHAoZSk6bmV3IE1wKHQsZSk7cmV0dXJuIGE9bi5fcmVwbyx0PXMsdD1cIi5pbmZvXCI9PT1pdSgoZT1uKS5fcGF0aCk/RmwoYS5pbmZvU3luY1RyZWVfLGUsdCk6RmwoYS5zZXJ2ZXJTeW5jVHJlZV8sZSx0KSxEZihhLmV2ZW50UXVldWVfLGUuX3BhdGgsdCksZnVuY3Rpb24oKXtyZXR1cm4gWGYobi5fcmVwbyxuLHMpfX1mdW5jdGlvbiBqcCh0LGUsbixyKXtyZXR1cm4gVXAodCxcInZhbHVlXCIsZSxuLHIpfWZ1bmN0aW9uIHFwKHQsZSxuLHIpe3JldHVybiBVcCh0LFwiY2hpbGRfYWRkZWRcIixlLG4scil9ZnVuY3Rpb24gVnAodCxlLG4scil7cmV0dXJuIFVwKHQsXCJjaGlsZF9jaGFuZ2VkXCIsZSxuLHIpfWZ1bmN0aW9uIEJwKHQsZSxuLHIpe3JldHVybiBVcCh0LFwiY2hpbGRfbW92ZWRcIixlLG4scil9ZnVuY3Rpb24gS3AodCxlLG4scil7cmV0dXJuIFVwKHQsXCJjaGlsZF9yZW1vdmVkXCIsZSxuLHIpfWZ1bmN0aW9uIFdwKHQsZSxuKXt2YXIgcj1udWxsLG49bj9uZXcgZHAobik6bnVsbDtcInZhbHVlXCI9PT1lP3I9bmV3IHhwKG4pOmUmJihyPW5ldyBNcChlLG4pKSxYZih0Ll9yZXBvLHQscil9dmFyIEhwLFNuPWZ1bmN0aW9uKCl7fSxHcD0oWGkoenAsSHA9U24pLHpwLnByb3RvdHlwZS5fYXBwbHk9ZnVuY3Rpb24odCl7U2YoXCJlbmRBdFwiLHRoaXMuX3ZhbHVlLHQuX3BhdGgsITApO3ZhciBlPVZjKHQuX3F1ZXJ5UGFyYW1zLHRoaXMuX3ZhbHVlLHRoaXMuX2tleSk7aWYoSXAoZSksd3AoZSksdC5fcXVlcnlQYXJhbXMuaGFzRW5kKCkpdGhyb3cgbmV3IEVycm9yKFwiZW5kQXQ6IFN0YXJ0aW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGVuZEF0LCBlbmRCZWZvcmUgb3IgZXF1YWxUbykuXCIpO3JldHVybiBuZXcgbXAodC5fcmVwbyx0Ll9wYXRoLGUsdC5fb3JkZXJCeUNhbGxlZCl9LHpwKTtmdW5jdGlvbiB6cCh0LGUpe3ZhciBuPUhwLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uX3ZhbHVlPXQsbi5fa2V5PWUsbn12YXIgUXAsWXA9KFhpKFhwLFFwPVNuKSxYcC5wcm90b3R5cGUuX2FwcGx5PWZ1bmN0aW9uKHQpe1NmKFwiZW5kQmVmb3JlXCIsdGhpcy5fdmFsdWUsdC5fcGF0aCwhMSk7dmFyIGUsbixyLHI9KGU9dC5fcXVlcnlQYXJhbXMsbj10aGlzLl92YWx1ZSxyPXRoaXMuX2tleSwocj1lLmluZGV4Xz09PUR1P1ZjKGUsbj1cInN0cmluZ1wiPT10eXBlb2Ygbj9JYyhuKTpuLHIpOlZjKGUsbixudWxsPT1yP3JzOkljKHIpKSkuZW5kQmVmb3JlU2V0Xz0hMCxyKTtpZihJcChyKSx3cChyKSx0Ll9xdWVyeVBhcmFtcy5oYXNFbmQoKSl0aHJvdyBuZXcgRXJyb3IoXCJlbmRCZWZvcmU6IFN0YXJ0aW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGVuZEF0LCBlbmRCZWZvcmUgb3IgZXF1YWxUbykuXCIpO3JldHVybiBuZXcgbXAodC5fcmVwbyx0Ll9wYXRoLHIsdC5fb3JkZXJCeUNhbGxlZCl9LFhwKTtmdW5jdGlvbiBYcCh0LGUpe3ZhciBuPVFwLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uX3ZhbHVlPXQsbi5fa2V5PWUsbn12YXIgSnAsJHA9KFhpKFpwLEpwPVNuKSxacC5wcm90b3R5cGUuX2FwcGx5PWZ1bmN0aW9uKHQpe1NmKFwic3RhcnRBdFwiLHRoaXMuX3ZhbHVlLHQuX3BhdGgsITApO3ZhciBlPXFjKHQuX3F1ZXJ5UGFyYW1zLHRoaXMuX3ZhbHVlLHRoaXMuX2tleSk7aWYoSXAoZSksd3AoZSksdC5fcXVlcnlQYXJhbXMuaGFzU3RhcnQoKSl0aHJvdyBuZXcgRXJyb3IoXCJzdGFydEF0OiBTdGFydGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBzdGFydEF0LCBzdGFydEJlZm9yZSBvciBlcXVhbFRvKS5cIik7cmV0dXJuIG5ldyBtcCh0Ll9yZXBvLHQuX3BhdGgsZSx0Ll9vcmRlckJ5Q2FsbGVkKX0sWnApO2Z1bmN0aW9uIFpwKHQsZSl7dmFyIG49SnAuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5fdmFsdWU9dCxuLl9rZXk9ZSxufXZhciB0ZCxlZD0oWGkobmQsdGQ9U24pLG5kLnByb3RvdHlwZS5fYXBwbHk9ZnVuY3Rpb24odCl7U2YoXCJzdGFydEFmdGVyXCIsdGhpcy5fdmFsdWUsdC5fcGF0aCwhMSk7dmFyIGUsbixyLHI9KGU9dC5fcXVlcnlQYXJhbXMsbj10aGlzLl92YWx1ZSxyPXRoaXMuX2tleSwocj1lLmluZGV4Xz09PUR1P3FjKGUsbj1cInN0cmluZ1wiPT10eXBlb2Ygbj93YyhuKTpuLHIpOnFjKGUsbixudWxsPT1yP2lzOndjKHIpKSkuc3RhcnRBZnRlclNldF89ITAscik7aWYoSXAociksd3AociksdC5fcXVlcnlQYXJhbXMuaGFzU3RhcnQoKSl0aHJvdyBuZXcgRXJyb3IoXCJzdGFydEFmdGVyOiBTdGFydGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBzdGFydEF0LCBzdGFydEFmdGVyLCBvciBlcXVhbFRvKS5cIik7cmV0dXJuIG5ldyBtcCh0Ll9yZXBvLHQuX3BhdGgscix0Ll9vcmRlckJ5Q2FsbGVkKX0sbmQpO2Z1bmN0aW9uIG5kKHQsZSl7dmFyIG49dGQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5fdmFsdWU9dCxuLl9rZXk9ZSxufXZhciByZCxpZD0oWGkob2QscmQ9U24pLG9kLnByb3RvdHlwZS5fYXBwbHk9ZnVuY3Rpb24odCl7aWYodC5fcXVlcnlQYXJhbXMuaGFzTGltaXQoKSl0aHJvdyBuZXcgRXJyb3IoXCJsaW1pdFRvRmlyc3Q6IExpbWl0IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGxpbWl0VG9GaXJzdCBvciBsaW1pdFRvTGFzdCkuXCIpO3JldHVybiBuZXcgbXAodC5fcmVwbyx0Ll9wYXRoLChlPXQuX3F1ZXJ5UGFyYW1zLG49dGhpcy5fbGltaXQsKGU9ZS5jb3B5KCkpLmxpbWl0U2V0Xz0hMCxlLmxpbWl0Xz1uLGUudmlld0Zyb21fPVwibFwiLGUpLHQuX29yZGVyQnlDYWxsZWQpO3ZhciBlLG59LG9kKTtmdW5jdGlvbiBvZCh0KXt2YXIgZT1yZC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBlLl9saW1pdD10LGV9dmFyIGFkLHNkPShYaSh1ZCxhZD1TbiksdWQucHJvdG90eXBlLl9hcHBseT1mdW5jdGlvbih0KXtpZih0Ll9xdWVyeVBhcmFtcy5oYXNMaW1pdCgpKXRocm93IG5ldyBFcnJvcihcImxpbWl0VG9MYXN0OiBMaW1pdCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBsaW1pdFRvRmlyc3Qgb3IgbGltaXRUb0xhc3QpLlwiKTtyZXR1cm4gbmV3IG1wKHQuX3JlcG8sdC5fcGF0aCwoZT10Ll9xdWVyeVBhcmFtcyxuPXRoaXMuX2xpbWl0LChlPWUuY29weSgpKS5saW1pdFNldF89ITAsZS5saW1pdF89bixlLnZpZXdGcm9tXz1cInJcIixlKSx0Ll9vcmRlckJ5Q2FsbGVkKTt2YXIgZSxufSx1ZCk7ZnVuY3Rpb24gdWQodCl7dmFyIGU9YWQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5fbGltaXQ9dCxlfXZhciBjZCxoZD0oWGkobGQsY2Q9U24pLGxkLnByb3RvdHlwZS5fYXBwbHk9ZnVuY3Rpb24odCl7X3AodCxcIm9yZGVyQnlDaGlsZFwiKTt2YXIgZT1uZXcgZXUodGhpcy5fcGF0aCk7aWYobHUoZSkpdGhyb3cgbmV3IEVycm9yKFwib3JkZXJCeUNoaWxkOiBjYW5ub3QgcGFzcyBpbiBlbXB0eSBwYXRoLiBVc2Ugb3JkZXJCeVZhbHVlKCkgaW5zdGVhZC5cIik7ZT1uZXcgbWMoZSksZT1CYyh0Ll9xdWVyeVBhcmFtcyxlKTtyZXR1cm4gd3AoZSksbmV3IG1wKHQuX3JlcG8sdC5fcGF0aCxlLCEwKX0sbGQpO2Z1bmN0aW9uIGxkKHQpe3ZhciBlPWNkLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUuX3BhdGg9dCxlfXZhciBmZCxwZD0oWGkoZGQsZmQ9U24pLGRkLnByb3RvdHlwZS5fYXBwbHk9ZnVuY3Rpb24odCl7X3AodCxcIm9yZGVyQnlLZXlcIik7dmFyIGU9QmModC5fcXVlcnlQYXJhbXMsRHUpO3JldHVybiB3cChlKSxuZXcgbXAodC5fcmVwbyx0Ll9wYXRoLGUsITApfSxkZCk7ZnVuY3Rpb24gZGQoKXtyZXR1cm4gbnVsbCE9PWZkJiZmZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9dmFyIHZkLGdkPShYaSh5ZCx2ZD1TbikseWQucHJvdG90eXBlLl9hcHBseT1mdW5jdGlvbih0KXtfcCh0LFwib3JkZXJCeVByaW9yaXR5XCIpO3ZhciBlPUJjKHQuX3F1ZXJ5UGFyYW1zLFp1KTtyZXR1cm4gd3AoZSksbmV3IG1wKHQuX3JlcG8sdC5fcGF0aCxlLCEwKX0seWQpO2Z1bmN0aW9uIHlkKCl7cmV0dXJuIG51bGwhPT12ZCYmdmQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXZhciBtZCxiZD0oWGkoX2QsbWQ9U24pLF9kLnByb3RvdHlwZS5fYXBwbHk9ZnVuY3Rpb24odCl7X3AodCxcIm9yZGVyQnlWYWx1ZVwiKTt2YXIgZT1CYyh0Ll9xdWVyeVBhcmFtcyxTYyk7cmV0dXJuIHdwKGUpLG5ldyBtcCh0Ll9yZXBvLHQuX3BhdGgsZSwhMCl9LF9kKTtmdW5jdGlvbiBfZCgpe3JldHVybiBudWxsIT09bWQmJm1kLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc312YXIgd2QsSWQsVGQsRWQ9KFhpKFNkLHdkPVNuKSxTZC5wcm90b3R5cGUuX2FwcGx5PWZ1bmN0aW9uKHQpe2lmKFNmKFwiZXF1YWxUb1wiLHRoaXMuX3ZhbHVlLHQuX3BhdGgsITEpLHQuX3F1ZXJ5UGFyYW1zLmhhc1N0YXJ0KCkpdGhyb3cgbmV3IEVycm9yKFwiZXF1YWxUbzogU3RhcnRpbmcgcG9pbnQgd2FzIGFscmVhZHkgc2V0IChieSBhbm90aGVyIGNhbGwgdG8gc3RhcnRBdC9zdGFydEFmdGVyIG9yIGVxdWFsVG8pLlwiKTtpZih0Ll9xdWVyeVBhcmFtcy5oYXNFbmQoKSl0aHJvdyBuZXcgRXJyb3IoXCJlcXVhbFRvOiBFbmRpbmcgcG9pbnQgd2FzIGFscmVhZHkgc2V0IChieSBhbm90aGVyIGNhbGwgdG8gZW5kQXQvZW5kQmVmb3JlIG9yIGVxdWFsVG8pLlwiKTtyZXR1cm4gbmV3IEdwKHRoaXMuX3ZhbHVlLHRoaXMuX2tleSkuX2FwcGx5KG5ldyAkcCh0aGlzLl92YWx1ZSx0aGlzLl9rZXkpLl9hcHBseSh0KSl9LFNkKTtmdW5jdGlvbiBTZCh0LGUpe3ZhciBuPXdkLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uX3ZhbHVlPXQsbi5fa2V5PWUsbn1mdW5jdGlvbiBDZCh0KXtmb3IodmFyIGUsbixyPVtdLGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXJbaS0xXT1hcmd1bWVudHNbaV07dmFyIG89dGEodCk7dHJ5e2Zvcih2YXIgYT10byhyKSxzPWEubmV4dCgpOyFzLmRvbmU7cz1hLm5leHQoKSlvPXMudmFsdWUuX2FwcGx5KG8pfWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e3MmJiFzLmRvbmUmJihuPWEucmV0dXJuKSYmbi5jYWxsKGEpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX1yZXR1cm4gb31JZD1FcCxhbyghbGwsXCJfX3JlZmVyZW5jZUNvbnN0cnVjdG9yIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZFwiKSxsbD1JZCxUZD1FcCxhbyghbWwsXCJfX3JlZmVyZW5jZUNvbnN0cnVjdG9yIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZFwiKSxtbD1UZDt2YXIga2Q9XCJGSVJFQkFTRV9EQVRBQkFTRV9FTVVMQVRPUl9IT1NUXCIsTmQ9e30sQWQ9ITE7ZnVuY3Rpb24gUmQodCxlLG4scixpKXt2YXIgbz1yfHx0Lm9wdGlvbnMuZGF0YWJhc2VVUkw7dm9pZCAwPT09byYmKHQub3B0aW9ucy5wcm9qZWN0SWR8fGVzKFwiQ2FuJ3QgZGV0ZXJtaW5lIEZpcmViYXNlIERhdGFiYXNlIFVSTC4gQmUgc3VyZSB0byBpbmNsdWRlICBhIFByb2plY3QgSUQgd2hlbiBjYWxsaW5nIGZpcmViYXNlLmluaXRpYWxpemVBcHAoKS5cIiksWmEoXCJVc2luZyBkZWZhdWx0IGhvc3QgZm9yIHByb2plY3QgXCIsdC5vcHRpb25zLnByb2plY3RJZCksbz10Lm9wdGlvbnMucHJvamVjdElkK1wiLWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbVwiKTt2YXIgYSxzPXVwKG8saSksdT1zLnJlcG9JbmZvLHI9dm9pZCAwOyhyPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBwcm9jZXNzP3Byb2Nlc3MuZW52W2tkXTpyKT8oYT0hMCxvPVwiaHR0cDovL1wiK3IrXCI/bnM9XCIrdS5uYW1lc3BhY2UsdT0ocz11cChvLGkpKS5yZXBvSW5mbyk6YT0hcy5yZXBvSW5mby5zZWN1cmU7ZT1pJiZhP25ldyBicyhicy5PV05FUik6bmV3IHlzKHQubmFtZSx0Lm9wdGlvbnMsZSk7UmYoXCJJbnZhbGlkIEZpcmViYXNlIERhdGFiYXNlIFVSTFwiLHMpLGx1KHMucGF0aCl8fGVzKFwiRGF0YWJhc2UgVVJMIG11c3QgcG9pbnQgdG8gdGhlIHJvb3Qgb2YgYSBGaXJlYmFzZSBEYXRhYmFzZSAobm90IGluY2x1ZGluZyBhIGNoaWxkIHBhdGgpLlwiKTtuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPU5kW2UubmFtZV07aXx8KGk9e30sTmRbZS5uYW1lXT1pKTtlPWlbdC50b1VSTFN0cmluZygpXTtlJiZlcyhcIkRhdGFiYXNlIGluaXRpYWxpemVkIG11bHRpcGxlIHRpbWVzLiBQbGVhc2UgbWFrZSBzdXJlIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGFiYXNlIFVSTCBtYXRjaGVzIHdpdGggZWFjaCBkYXRhYmFzZSgpIGNhbGwuXCIpO3JldHVybiBlPW5ldyBVZih0LEFkLG4sciksaVt0LnRvVVJMU3RyaW5nKCldPWV9KHUsdCxlLG5ldyB2cyh0Lm5hbWUsbikpO3JldHVybiBuZXcgUGQobix0KX12YXIgUGQ9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPZC5wcm90b3R5cGUsXCJfcmVwb1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5zdGFuY2VTdGFydGVkfHwocWYodGhpcy5fcmVwb0ludGVybmFsLHRoaXMuYXBwLm9wdGlvbnMuYXBwSWQsdGhpcy5hcHAub3B0aW9ucy5kYXRhYmFzZUF1dGhWYXJpYWJsZU92ZXJyaWRlKSx0aGlzLl9pbnN0YW5jZVN0YXJ0ZWQ9ITApLHRoaXMuX3JlcG9JbnRlcm5hbH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoT2QucHJvdG90eXBlLFwiX3Jvb3RcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jvb3RJbnRlcm5hbHx8KHRoaXMuX3Jvb3RJbnRlcm5hbD1uZXcgRXAodGhpcy5fcmVwbyxydSgpKSksdGhpcy5fcm9vdEludGVybmFsfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9kLnByb3RvdHlwZS5fZGVsZXRlPWZ1bmN0aW9uKCl7dmFyIHQsZSxuO3JldHVybiB0aGlzLl9jaGVja05vdERlbGV0ZWQoXCJkZWxldGVcIiksdD10aGlzLl9yZXBvLGU9dGhpcy5hcHAubmFtZSwobj1OZFtlXSkmJm5bdC5rZXldPT09dHx8ZXMoXCJEYXRhYmFzZSBcIitlK1wiKFwiK3QucmVwb0luZm9fK1wiKSBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQuXCIpLEpmKHQpLGRlbGV0ZSBuW3Qua2V5XSx0aGlzLl9yZXBvSW50ZXJuYWw9bnVsbCx0aGlzLl9yb290SW50ZXJuYWw9bnVsbCxQcm9taXNlLnJlc29sdmUoKX0sT2QucHJvdG90eXBlLl9jaGVja05vdERlbGV0ZWQ9ZnVuY3Rpb24odCl7bnVsbD09PXRoaXMuX3Jvb3RJbnRlcm5hbCYmZXMoXCJDYW5ub3QgY2FsbCBcIit0K1wiIG9uIGEgZGVsZXRlZCBkYXRhYmFzZS5cIil9LE9kKTtmdW5jdGlvbiBPZCh0LGUpe3RoaXMuX3JlcG9JbnRlcm5hbD10LHRoaXMuYXBwPWUsdGhpcy50eXBlPVwiZGF0YWJhc2VcIix0aGlzLl9pbnN0YW5jZVN0YXJ0ZWQ9ITF9ZnVuY3Rpb24gRGQodCxlLG4scil7dm9pZCAwPT09ciYmKHI9e30pLCh0PXRhKHQpKS5fY2hlY2tOb3REZWxldGVkKFwidXNlRW11bGF0b3JcIiksdC5faW5zdGFuY2VTdGFydGVkJiZlcyhcIkNhbm5vdCBjYWxsIHVzZUVtdWxhdG9yKCkgYWZ0ZXIgaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZC5cIik7dmFyIGk9dC5fcmVwb0ludGVybmFsLG89dm9pZCAwO2kucmVwb0luZm9fLm5vZGVBZG1pbj8oci5tb2NrVXNlclRva2VuJiZlcygnbW9ja1VzZXJUb2tlbiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBBZG1pbiBTREsuIEZvciBjbGllbnQgYWNjZXNzIHdpdGggbW9jayB1c2VycywgcGxlYXNlIHVzZSB0aGUgXCJmaXJlYmFzZVwiIHBhY2thZ2UgaW5zdGVhZCBvZiBcImZpcmViYXNlLWFkbWluXCIuJyksbz1uZXcgYnMoYnMuT1dORVIpKTpyLm1vY2tVc2VyVG9rZW4mJih0PXBvKHIubW9ja1VzZXJUb2tlbix0LmFwcC5vcHRpb25zLnByb2plY3RJZCksbz1uZXcgYnModCkpLGU9ZSxuPW4sbz1vLChpPWkpLnJlcG9JbmZvXz1uZXcgRXMoZStcIjpcIituLCExLGkucmVwb0luZm9fLm5hbWVzcGFjZSxpLnJlcG9JbmZvXy53ZWJTb2NrZXRPbmx5LGkucmVwb0luZm9fLm5vZGVBZG1pbixpLnJlcG9JbmZvXy5wZXJzaXN0ZW5jZUtleSxpLnJlcG9JbmZvXy5pbmNsdWRlTmFtZXNwYWNlSW5RdWVyeVBhcmFtcyksbyYmKGkuYXV0aFRva2VuUHJvdmlkZXJfPW8pfWZ1bmN0aW9uIHhkKHQpeyh0PXRhKHQpKS5fY2hlY2tOb3REZWxldGVkKFwiZ29PbmxpbmVcIiksKHQ9dC5fcmVwbykucGVyc2lzdGVudENvbm5lY3Rpb25fJiZ0LnBlcnNpc3RlbnRDb25uZWN0aW9uXy5yZXN1bWUoTWYpfXZhciBMZD17XCIuc3ZcIjpcInRpbWVzdGFtcFwifTt2YXIgTWQ9KEZkLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57Y29tbWl0dGVkOnRoaXMuY29tbWl0dGVkLHNuYXBzaG90OnRoaXMuc25hcHNob3QudG9KU09OKCl9fSxGZCk7ZnVuY3Rpb24gRmQodCxlKXt0aGlzLmNvbW1pdHRlZD10LHRoaXMuc25hcHNob3Q9ZX1mdW5jdGlvbiBVZChpLHQsZSl7aWYoaT10YShpKSxBZihcIlJlZmVyZW5jZS50cmFuc2FjdGlvblwiLGkuX3BhdGgpLFwiLmxlbmd0aFwiPT09aS5rZXl8fFwiLmtleXNcIj09PWkua2V5KXRocm93XCJSZWZlcmVuY2UudHJhbnNhY3Rpb24gZmFpbGVkOiBcIitpLmtleStcIiBpcyBhIHJlYWQtb25seSBvYmplY3QuXCI7dmFyIGU9bnVsbD09PShuPW51bGw9PWU/dm9pZCAwOmUuYXBwbHlMb2NhbGx5KXx8dm9pZCAwPT09bnx8bixvPW5ldyBsbyxuPWpwKGksZnVuY3Rpb24oKXt9KTtyZXR1cm4gZnVuY3Rpb24odCxlLG4scixpLG8peyRmKHQsXCJ0cmFuc2FjdGlvbiBvbiBcIitlKTt2YXIgYT17cGF0aDplLHVwZGF0ZTpuLG9uQ29tcGxldGU6cixzdGF0dXM6bnVsbCxvcmRlcjpZYSgpLGFwcGx5TG9jYWxseTpvLHJldHJ5Q291bnQ6MCx1bndhdGNoZXI6aSxhYm9ydFJlYXNvbjpudWxsLGN1cnJlbnRXcml0ZUlkOm51bGwsY3VycmVudElucHV0U25hcHNob3Q6bnVsbCxjdXJyZW50T3V0cHV0U25hcHNob3RSYXc6bnVsbCxjdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZDpudWxsfSxuPXRwKHQsZSx2b2lkIDApO2EuY3VycmVudElucHV0U25hcHNob3Q9bix2b2lkIDA9PT0ocj1hLnVwZGF0ZShuLnZhbCgpKSk/KGEudW53YXRjaGVyKCksYS5jdXJyZW50T3V0cHV0U25hcHNob3RSYXc9bnVsbCxhLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJlc29sdmVkPW51bGwsYS5vbkNvbXBsZXRlJiZhLm9uQ29tcGxldGUobnVsbCwhMSxhLmN1cnJlbnRJbnB1dFNuYXBzaG90KSk6KENmKFwidHJhbnNhY3Rpb24gZmFpbGVkOiBEYXRhIHJldHVybmVkIFwiLHIsYS5wYXRoKSxhLnN0YXR1cz0wLChpPWhmKG89Y2YodC50cmFuc2FjdGlvblF1ZXVlVHJlZV8sZSkpfHxbXSkucHVzaChhKSxsZihvLGkpLG89dm9pZCAwLFwib2JqZWN0XCI9PXR5cGVvZiByJiZudWxsIT09ciYmRG8ocixcIi5wcmlvcml0eVwiKT8obz14byhyLFwiLnByaW9yaXR5XCIpLGFvKEVmKG8pLFwiSW52YWxpZCBwcmlvcml0eSByZXR1cm5lZCBieSB0cmFuc2FjdGlvbi4gUHJpb3JpdHkgbXVzdCBiZSBhIHZhbGlkIHN0cmluZywgZmluaXRlIG51bWJlciwgc2VydmVyIHZhbHVlLCBvciBudWxsLlwiKSk6bz0oVWwodC5zZXJ2ZXJTeW5jVHJlZV8sZSl8fGhjLkVNUFRZX05PREUpLmdldFByaW9yaXR5KCkudmFsKCksaT1CZih0KSxvPXZjKHIsbyksaT1hZihvLG4saSksYS5jdXJyZW50T3V0cHV0U25hcHNob3RSYXc9byxhLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJlc29sdmVkPWksYS5jdXJyZW50V3JpdGVJZD1HZih0KSxhPU9sKHQuc2VydmVyU3luY1RyZWVfLGUsaSxhLmN1cnJlbnRXcml0ZUlkLGEuYXBwbHlMb2NhbGx5KSx4Zih0LmV2ZW50UXVldWVfLGUsYSksZXAodCx0LnRyYW5zYWN0aW9uUXVldWVUcmVlXykpfShpLl9yZXBvLGkuX3BhdGgsdCxmdW5jdGlvbih0LGUsbil7dmFyIHI7dD9vLnJlamVjdCh0KToocj1uZXcgQ3AobixuZXcgRXAoaS5fcmVwbyxpLl9wYXRoKSxadSksby5yZXNvbHZlKG5ldyBNZChlLHIpKSl9LG4sZSksby5wcm9taXNlfXZhciBqZD0ocWQucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbihlKXtXbyhcIk9uRGlzY29ubmVjdC5jYW5jZWxcIiwwLDEsYXJndW1lbnRzLmxlbmd0aCksR28oXCJPbkRpc2Nvbm5lY3QuY2FuY2VsXCIsXCJvbkNvbXBsZXRlXCIsZSwhMCk7dmFyIHQ9dGhpcy5fZGVsZWdhdGUuY2FuY2VsKCk7cmV0dXJuIGUmJnQudGhlbihmdW5jdGlvbigpe3JldHVybiBlKG51bGwpfSxmdW5jdGlvbih0KXtyZXR1cm4gZSh0KX0pLHR9LHFkLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7V28oXCJPbkRpc2Nvbm5lY3QucmVtb3ZlXCIsMCwxLGFyZ3VtZW50cy5sZW5ndGgpLEdvKFwiT25EaXNjb25uZWN0LnJlbW92ZVwiLFwib25Db21wbGV0ZVwiLGUsITApO3ZhciB0PXRoaXMuX2RlbGVnYXRlLnJlbW92ZSgpO3JldHVybiBlJiZ0LnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZShudWxsKX0sZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9KSx0fSxxZC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7V28oXCJPbkRpc2Nvbm5lY3Quc2V0XCIsMSwyLGFyZ3VtZW50cy5sZW5ndGgpLEdvKFwiT25EaXNjb25uZWN0LnNldFwiLFwib25Db21wbGV0ZVwiLGUsITApO3Q9dGhpcy5fZGVsZWdhdGUuc2V0KHQpO3JldHVybiBlJiZ0LnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZShudWxsKX0sZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9KSx0fSxxZC5wcm90b3R5cGUuc2V0V2l0aFByaW9yaXR5PWZ1bmN0aW9uKHQsZSxuKXtXbyhcIk9uRGlzY29ubmVjdC5zZXRXaXRoUHJpb3JpdHlcIiwyLDMsYXJndW1lbnRzLmxlbmd0aCksR28oXCJPbkRpc2Nvbm5lY3Quc2V0V2l0aFByaW9yaXR5XCIsXCJvbkNvbXBsZXRlXCIsbiwhMCk7ZT10aGlzLl9kZWxlZ2F0ZS5zZXRXaXRoUHJpb3JpdHkodCxlKTtyZXR1cm4gbiYmZS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4obnVsbCl9LGZ1bmN0aW9uKHQpe3JldHVybiBuKHQpfSksZX0scWQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe2lmKFdvKFwiT25EaXNjb25uZWN0LnVwZGF0ZVwiLDEsMixhcmd1bWVudHMubGVuZ3RoKSxBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIG49e30scj0wO3I8dC5sZW5ndGg7KytyKW5bXCJcIityXT10W3JdO3Q9bixucyhcIlBhc3NpbmcgYW4gQXJyYXkgdG8gZmlyZWJhc2UuZGF0YWJhc2Uub25EaXNjb25uZWN0KCkudXBkYXRlKCkgaXMgZGVwcmVjYXRlZC4gVXNlIHNldCgpIGlmIHlvdSB3YW50IHRvIG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgZGF0YSwgb3IgYW4gT2JqZWN0IHdpdGggaW50ZWdlciBrZXlzIGlmIHlvdSByZWFsbHkgZG8gd2FudCB0byBvbmx5IHVwZGF0ZSBzb21lIG9mIHRoZSBjaGlsZHJlbi5cIil9R28oXCJPbkRpc2Nvbm5lY3QudXBkYXRlXCIsXCJvbkNvbXBsZXRlXCIsZSwhMCk7dmFyIGk9dGhpcy5fZGVsZWdhdGUudXBkYXRlKHQpO3JldHVybiBlJiZpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZShudWxsKX0sZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9KSxpfSxxZCk7ZnVuY3Rpb24gcWQodCl7dGhpcy5fZGVsZWdhdGU9dH12YXIgVmQ9KEJkLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gV28oXCJUcmFuc2FjdGlvblJlc3VsdC50b0pTT05cIiwwLDEsYXJndW1lbnRzLmxlbmd0aCkse2NvbW1pdHRlZDp0aGlzLmNvbW1pdHRlZCxzbmFwc2hvdDp0aGlzLnNuYXBzaG90LnRvSlNPTigpfX0sQmQpO2Z1bmN0aW9uIEJkKHQsZSl7dGhpcy5jb21taXR0ZWQ9dCx0aGlzLnNuYXBzaG90PWV9dmFyIEtkPShXZC5wcm90b3R5cGUudmFsPWZ1bmN0aW9uKCl7cmV0dXJuIFdvKFwiRGF0YVNuYXBzaG90LnZhbFwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKSx0aGlzLl9kZWxlZ2F0ZS52YWwoKX0sV2QucHJvdG90eXBlLmV4cG9ydFZhbD1mdW5jdGlvbigpe3JldHVybiBXbyhcIkRhdGFTbmFwc2hvdC5leHBvcnRWYWxcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCksdGhpcy5fZGVsZWdhdGUuZXhwb3J0VmFsKCl9LFdkLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gV28oXCJEYXRhU25hcHNob3QudG9KU09OXCIsMCwxLGFyZ3VtZW50cy5sZW5ndGgpLHRoaXMuX2RlbGVnYXRlLnRvSlNPTigpfSxXZC5wcm90b3R5cGUuZXhpc3RzPWZ1bmN0aW9uKCl7cmV0dXJuIFdvKFwiRGF0YVNuYXBzaG90LmV4aXN0c1wiLDAsMCxhcmd1bWVudHMubGVuZ3RoKSx0aGlzLl9kZWxlZ2F0ZS5leGlzdHMoKX0sV2QucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiBXbyhcIkRhdGFTbmFwc2hvdC5jaGlsZFwiLDAsMSxhcmd1bWVudHMubGVuZ3RoKSx0PVN0cmluZyh0KSxrZihcIkRhdGFTbmFwc2hvdC5jaGlsZFwiLFwicGF0aFwiLHQsITEpLG5ldyBXZCh0aGlzLl9kYXRhYmFzZSx0aGlzLl9kZWxlZ2F0ZS5jaGlsZCh0KSl9LFdkLnByb3RvdHlwZS5oYXNDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gV28oXCJEYXRhU25hcHNob3QuaGFzQ2hpbGRcIiwxLDEsYXJndW1lbnRzLmxlbmd0aCksa2YoXCJEYXRhU25hcHNob3QuaGFzQ2hpbGRcIixcInBhdGhcIix0LCExKSx0aGlzLl9kZWxlZ2F0ZS5oYXNDaGlsZCh0KX0sV2QucHJvdG90eXBlLmdldFByaW9yaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIFdvKFwiRGF0YVNuYXBzaG90LmdldFByaW9yaXR5XCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpLHRoaXMuX2RlbGVnYXRlLnByaW9yaXR5fSxXZC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBXbyhcIkRhdGFTbmFwc2hvdC5mb3JFYWNoXCIsMSwxLGFyZ3VtZW50cy5sZW5ndGgpLEdvKFwiRGF0YVNuYXBzaG90LmZvckVhY2hcIixcImFjdGlvblwiLGUsITEpLHRoaXMuX2RlbGVnYXRlLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUobmV3IFdkKG4uX2RhdGFiYXNlLHQpKX0pfSxXZC5wcm90b3R5cGUuaGFzQ2hpbGRyZW49ZnVuY3Rpb24oKXtyZXR1cm4gV28oXCJEYXRhU25hcHNob3QuaGFzQ2hpbGRyZW5cIiwwLDAsYXJndW1lbnRzLmxlbmd0aCksdGhpcy5fZGVsZWdhdGUuaGFzQ2hpbGRyZW4oKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFdkLnByb3RvdHlwZSxcImtleVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUua2V5fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLFdkLnByb3RvdHlwZS5udW1DaGlsZHJlbj1mdW5jdGlvbigpe3JldHVybiBXbyhcIkRhdGFTbmFwc2hvdC5udW1DaGlsZHJlblwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKSx0aGlzLl9kZWxlZ2F0ZS5zaXplfSxXZC5wcm90b3R5cGUuZ2V0UmVmPWZ1bmN0aW9uKCl7cmV0dXJuIFdvKFwiRGF0YVNuYXBzaG90LnJlZlwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKSxuZXcgUWQodGhpcy5fZGF0YWJhc2UsdGhpcy5fZGVsZWdhdGUucmVmKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFdkLnByb3RvdHlwZSxcInJlZlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRSZWYoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxXZCk7ZnVuY3Rpb24gV2QodCxlKXt0aGlzLl9kYXRhYmFzZT10LHRoaXMuX2RlbGVnYXRlPWV9dmFyIEhkPShHZC5wcm90b3R5cGUub249ZnVuY3Rpb24odCxuLGUscil7dmFyIGk9dGhpcztXbyhcIlF1ZXJ5Lm9uXCIsMiw0LGFyZ3VtZW50cy5sZW5ndGgpLEdvKFwiUXVlcnkub25cIixcImNhbGxiYWNrXCIsbiwhMSk7ZnVuY3Rpb24gbyh0LGUpe24uY2FsbChhLmNvbnRleHQsbmV3IEtkKGkuZGF0YWJhc2UsdCksZSl9dmFyIGE9R2QuZ2V0Q2FuY2VsQW5kQ29udGV4dEFyZ3NfKFwiUXVlcnkub25cIixlLHIpO28udXNlckNhbGxiYWNrPW4sby5jb250ZXh0PWEuY29udGV4dDt2YXIgcz1udWxsPT09KHI9YS5jYW5jZWwpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmJpbmQoYS5jb250ZXh0KTtzd2l0Y2godCl7Y2FzZVwidmFsdWVcIjpyZXR1cm4ganAodGhpcy5fZGVsZWdhdGUsbyxzKSxuO2Nhc2VcImNoaWxkX2FkZGVkXCI6cmV0dXJuIHFwKHRoaXMuX2RlbGVnYXRlLG8scyksbjtjYXNlXCJjaGlsZF9yZW1vdmVkXCI6cmV0dXJuIEtwKHRoaXMuX2RlbGVnYXRlLG8scyksbjtjYXNlXCJjaGlsZF9jaGFuZ2VkXCI6cmV0dXJuIFZwKHRoaXMuX2RlbGVnYXRlLG8scyksbjtjYXNlXCJjaGlsZF9tb3ZlZFwiOnJldHVybiBCcCh0aGlzLl9kZWxlZ2F0ZSxvLHMpLG47ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoSG8oXCJRdWVyeS5vblwiLFwiZXZlbnRUeXBlXCIpKydtdXN0IGJlIGEgdmFsaWQgZXZlbnQgdHlwZSA9IFwidmFsdWVcIiwgXCJjaGlsZF9hZGRlZFwiLCBcImNoaWxkX3JlbW92ZWRcIiwgXCJjaGlsZF9jaGFuZ2VkXCIsIG9yIFwiY2hpbGRfbW92ZWRcIi4nKX19LEdkLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24odCxlLG4pe3ZhciByO1dvKFwiUXVlcnkub2ZmXCIsMCwzLGFyZ3VtZW50cy5sZW5ndGgpLGZ1bmN0aW9uKHQsZSxuKXtpZighbnx8dm9pZCAwIT09ZSlzd2l0Y2goZSl7Y2FzZVwidmFsdWVcIjpjYXNlXCJjaGlsZF9hZGRlZFwiOmNhc2VcImNoaWxkX3JlbW92ZWRcIjpjYXNlXCJjaGlsZF9jaGFuZ2VkXCI6Y2FzZVwiY2hpbGRfbW92ZWRcIjpicmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihIbyh0LFwiZXZlbnRUeXBlXCIpKydtdXN0IGJlIGEgdmFsaWQgZXZlbnQgdHlwZSA9IFwidmFsdWVcIiwgXCJjaGlsZF9hZGRlZFwiLCBcImNoaWxkX3JlbW92ZWRcIiwgXCJjaGlsZF9jaGFuZ2VkXCIsIG9yIFwiY2hpbGRfbW92ZWRcIi4nKX19KFwiUXVlcnkub2ZmXCIsdCwhMCksR28oXCJRdWVyeS5vZmZcIixcImNhbGxiYWNrXCIsZSwhMCksem8oXCJRdWVyeS5vZmZcIixcImNvbnRleHRcIixuLCEwKSxlPygocj1mdW5jdGlvbigpe30pLnVzZXJDYWxsYmFjaz1lLHIuY29udGV4dD1uLFdwKHRoaXMuX2RlbGVnYXRlLHQscikpOldwKHRoaXMuX2RlbGVnYXRlLHQpfSxHZC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gRHAodGhpcy5fZGVsZWdhdGUpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBLZChlLmRhdGFiYXNlLHQpfSl9LEdkLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKHQsbixlLHIpe3ZhciBpPXRoaXM7V28oXCJRdWVyeS5vbmNlXCIsMSw0LGFyZ3VtZW50cy5sZW5ndGgpLEdvKFwiUXVlcnkub25jZVwiLFwiY2FsbGJhY2tcIixuLCEwKTtmdW5jdGlvbiBvKHQsZSl7dD1uZXcgS2QoaS5kYXRhYmFzZSx0KSxuJiZuLmNhbGwoYS5jb250ZXh0LHQsZSkscy5yZXNvbHZlKHQpfXZhciBhPUdkLmdldENhbmNlbEFuZENvbnRleHRBcmdzXyhcIlF1ZXJ5Lm9uXCIsZSxyKSxzPW5ldyBsbztvLnVzZXJDYWxsYmFjaz1uLG8uY29udGV4dD1hLmNvbnRleHQ7ZnVuY3Rpb24gdSh0KXthLmNhbmNlbCYmYS5jYW5jZWwuY2FsbChhLmNvbnRleHQsdCkscy5yZWplY3QodCl9c3dpdGNoKHQpe2Nhc2VcInZhbHVlXCI6anAodGhpcy5fZGVsZWdhdGUsbyx1LHtvbmx5T25jZTohMH0pO2JyZWFrO2Nhc2VcImNoaWxkX2FkZGVkXCI6cXAodGhpcy5fZGVsZWdhdGUsbyx1LHtvbmx5T25jZTohMH0pO2JyZWFrO2Nhc2VcImNoaWxkX3JlbW92ZWRcIjpLcCh0aGlzLl9kZWxlZ2F0ZSxvLHUse29ubHlPbmNlOiEwfSk7YnJlYWs7Y2FzZVwiY2hpbGRfY2hhbmdlZFwiOlZwKHRoaXMuX2RlbGVnYXRlLG8sdSx7b25seU9uY2U6ITB9KTticmVhaztjYXNlXCJjaGlsZF9tb3ZlZFwiOkJwKHRoaXMuX2RlbGVnYXRlLG8sdSx7b25seU9uY2U6ITB9KTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihIbyhcIlF1ZXJ5Lm9uY2VcIixcImV2ZW50VHlwZVwiKSsnbXVzdCBiZSBhIHZhbGlkIGV2ZW50IHR5cGUgPSBcInZhbHVlXCIsIFwiY2hpbGRfYWRkZWRcIiwgXCJjaGlsZF9yZW1vdmVkXCIsIFwiY2hpbGRfY2hhbmdlZFwiLCBvciBcImNoaWxkX21vdmVkXCIuJyl9cmV0dXJuIHMucHJvbWlzZX0sR2QucHJvdG90eXBlLmxpbWl0VG9GaXJzdD1mdW5jdGlvbih0KXtyZXR1cm4gV28oXCJRdWVyeS5saW1pdFRvRmlyc3RcIiwxLDEsYXJndW1lbnRzLmxlbmd0aCksbmV3IEdkKHRoaXMuZGF0YWJhc2UsQ2QodGhpcy5fZGVsZWdhdGUsZnVuY3Rpb24odCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fE1hdGguZmxvb3IodCkhPT10fHx0PD0wKXRocm93IG5ldyBFcnJvcihcImxpbWl0VG9GaXJzdDogRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIuXCIpO3JldHVybiBuZXcgaWQodCl9KHQpKSl9LEdkLnByb3RvdHlwZS5saW1pdFRvTGFzdD1mdW5jdGlvbih0KXtyZXR1cm4gV28oXCJRdWVyeS5saW1pdFRvTGFzdFwiLDEsMSxhcmd1bWVudHMubGVuZ3RoKSxuZXcgR2QodGhpcy5kYXRhYmFzZSxDZCh0aGlzLl9kZWxlZ2F0ZSxmdW5jdGlvbih0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8TWF0aC5mbG9vcih0KSE9PXR8fHQ8PTApdGhyb3cgbmV3IEVycm9yKFwibGltaXRUb0xhc3Q6IEZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLlwiKTtyZXR1cm4gbmV3IHNkKHQpfSh0KSkpfSxHZC5wcm90b3R5cGUub3JkZXJCeUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiBXbyhcIlF1ZXJ5Lm9yZGVyQnlDaGlsZFwiLDEsMSxhcmd1bWVudHMubGVuZ3RoKSxuZXcgR2QodGhpcy5kYXRhYmFzZSxDZCh0aGlzLl9kZWxlZ2F0ZSxmdW5jdGlvbih0KXtpZihcIiRrZXlcIj09PXQpdGhyb3cgbmV3IEVycm9yKCdvcmRlckJ5Q2hpbGQ6IFwiJGtleVwiIGlzIGludmFsaWQuICBVc2Ugb3JkZXJCeUtleSgpIGluc3RlYWQuJyk7aWYoXCIkcHJpb3JpdHlcIj09PXQpdGhyb3cgbmV3IEVycm9yKCdvcmRlckJ5Q2hpbGQ6IFwiJHByaW9yaXR5XCIgaXMgaW52YWxpZC4gIFVzZSBvcmRlckJ5UHJpb3JpdHkoKSBpbnN0ZWFkLicpO2lmKFwiJHZhbHVlXCI9PT10KXRocm93IG5ldyBFcnJvcignb3JkZXJCeUNoaWxkOiBcIiR2YWx1ZVwiIGlzIGludmFsaWQuICBVc2Ugb3JkZXJCeVZhbHVlKCkgaW5zdGVhZC4nKTtyZXR1cm4ga2YoXCJvcmRlckJ5Q2hpbGRcIixcInBhdGhcIix0LCExKSxuZXcgaGQodCl9KHQpKSl9LEdkLnByb3RvdHlwZS5vcmRlckJ5S2V5PWZ1bmN0aW9uKCl7cmV0dXJuIFdvKFwiUXVlcnkub3JkZXJCeUtleVwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKSxuZXcgR2QodGhpcy5kYXRhYmFzZSxDZCh0aGlzLl9kZWxlZ2F0ZSxuZXcgcGQpKX0sR2QucHJvdG90eXBlLm9yZGVyQnlQcmlvcml0eT1mdW5jdGlvbigpe3JldHVybiBXbyhcIlF1ZXJ5Lm9yZGVyQnlQcmlvcml0eVwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKSxuZXcgR2QodGhpcy5kYXRhYmFzZSxDZCh0aGlzLl9kZWxlZ2F0ZSxuZXcgZ2QpKX0sR2QucHJvdG90eXBlLm9yZGVyQnlWYWx1ZT1mdW5jdGlvbigpe3JldHVybiBXbyhcIlF1ZXJ5Lm9yZGVyQnlWYWx1ZVwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKSxuZXcgR2QodGhpcy5kYXRhYmFzZSxDZCh0aGlzLl9kZWxlZ2F0ZSxuZXcgYmQpKX0sR2QucHJvdG90eXBlLnN0YXJ0QXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksV28oXCJRdWVyeS5zdGFydEF0XCIsMCwyLGFyZ3VtZW50cy5sZW5ndGgpLG5ldyBHZCh0aGlzLmRhdGFiYXNlLENkKHRoaXMuX2RlbGVnYXRlLCh2b2lkIDA9PT0odD10KSYmKHQ9bnVsbCksX2YoXCJzdGFydEF0XCIsXCJrZXlcIixlPWUsITApLG5ldyAkcCh0LGUpKSkpfSxHZC5wcm90b3R5cGUuc3RhcnRBZnRlcj1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSxXbyhcIlF1ZXJ5LnN0YXJ0QWZ0ZXJcIiwwLDIsYXJndW1lbnRzLmxlbmd0aCksbmV3IEdkKHRoaXMuZGF0YWJhc2UsQ2QodGhpcy5fZGVsZWdhdGUsKHQ9dCxfZihcInN0YXJ0QWZ0ZXJcIixcImtleVwiLGU9ZSwhMCksbmV3IGVkKHQsZSkpKSl9LEdkLnByb3RvdHlwZS5lbmRBdD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSxXbyhcIlF1ZXJ5LmVuZEF0XCIsMCwyLGFyZ3VtZW50cy5sZW5ndGgpLG5ldyBHZCh0aGlzLmRhdGFiYXNlLENkKHRoaXMuX2RlbGVnYXRlLCh0PXQsX2YoXCJlbmRBdFwiLFwia2V5XCIsZT1lLCEwKSxuZXcgR3AodCxlKSkpKX0sR2QucHJvdG90eXBlLmVuZEJlZm9yZT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSxXbyhcIlF1ZXJ5LmVuZEJlZm9yZVwiLDAsMixhcmd1bWVudHMubGVuZ3RoKSxuZXcgR2QodGhpcy5kYXRhYmFzZSxDZCh0aGlzLl9kZWxlZ2F0ZSwodD10LF9mKFwiZW5kQmVmb3JlXCIsXCJrZXlcIixlPWUsITApLG5ldyBZcCh0LGUpKSkpfSxHZC5wcm90b3R5cGUuZXF1YWxUbz1mdW5jdGlvbih0LGUpe3JldHVybiBXbyhcIlF1ZXJ5LmVxdWFsVG9cIiwxLDIsYXJndW1lbnRzLmxlbmd0aCksbmV3IEdkKHRoaXMuZGF0YWJhc2UsQ2QodGhpcy5fZGVsZWdhdGUsKHQ9dCxfZihcImVxdWFsVG9cIixcImtleVwiLGU9ZSwhMCksbmV3IEVkKHQsZSkpKSl9LEdkLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBXbyhcIlF1ZXJ5LnRvU3RyaW5nXCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpLHRoaXMuX2RlbGVnYXRlLnRvU3RyaW5nKCl9LEdkLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gV28oXCJRdWVyeS50b0pTT05cIiwwLDEsYXJndW1lbnRzLmxlbmd0aCksdGhpcy5fZGVsZWdhdGUudG9KU09OKCl9LEdkLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe2lmKFdvKFwiUXVlcnkuaXNFcXVhbFwiLDEsMSxhcmd1bWVudHMubGVuZ3RoKSx0IGluc3RhbmNlb2YgR2QpcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlzRXF1YWwodC5fZGVsZWdhdGUpO3Rocm93IG5ldyBFcnJvcihcIlF1ZXJ5LmlzRXF1YWwgZmFpbGVkOiBGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIGZpcmViYXNlLmRhdGFiYXNlLlF1ZXJ5LlwiKX0sR2QuZ2V0Q2FuY2VsQW5kQ29udGV4dEFyZ3NfPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj17Y2FuY2VsOnZvaWQgMCxjb250ZXh0OnZvaWQgMH07aWYoZSYmbilyLmNhbmNlbD1lLEdvKHQsXCJjYW5jZWxcIixyLmNhbmNlbCwhMCksci5jb250ZXh0PW4sem8odCxcImNvbnRleHRcIixyLmNvbnRleHQsITApO2Vsc2UgaWYoZSlpZihcIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWUpci5jb250ZXh0PWU7ZWxzZXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihIbyh0LFwiY2FuY2VsT3JDb250ZXh0XCIpK1wiIG11c3QgZWl0aGVyIGJlIGEgY2FuY2VsIGNhbGxiYWNrIG9yIGEgY29udGV4dCBvYmplY3QuXCIpO3IuY2FuY2VsPWV9cmV0dXJuIHJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShHZC5wcm90b3R5cGUsXCJyZWZcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBRZCh0aGlzLmRhdGFiYXNlLG5ldyBFcCh0aGlzLl9kZWxlZ2F0ZS5fcmVwbyx0aGlzLl9kZWxlZ2F0ZS5fcGF0aCkpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLEdkKTtmdW5jdGlvbiBHZCh0LGUpe3RoaXMuZGF0YWJhc2U9dCx0aGlzLl9kZWxlZ2F0ZT1lfXZhciB6ZCxRZD0oWGkoWWQsemQ9SGQpLFlkLnByb3RvdHlwZS5nZXRLZXk9ZnVuY3Rpb24oKXtyZXR1cm4gV28oXCJSZWZlcmVuY2Uua2V5XCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpLHRoaXMuX2RlbGVnYXRlLmtleX0sWWQucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiBXbyhcIlJlZmVyZW5jZS5jaGlsZFwiLDEsMSxhcmd1bWVudHMubGVuZ3RoKSxcIm51bWJlclwiPT10eXBlb2YgdCYmKHQ9U3RyaW5nKHQpKSxuZXcgWWQodGhpcy5kYXRhYmFzZSxScCh0aGlzLl9kZWxlZ2F0ZSx0KSl9LFlkLnByb3RvdHlwZS5nZXRQYXJlbnQ9ZnVuY3Rpb24oKXtXbyhcIlJlZmVyZW5jZS5wYXJlbnRcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7dmFyIHQ9dGhpcy5fZGVsZWdhdGUucGFyZW50O3JldHVybiB0P25ldyBZZCh0aGlzLmRhdGFiYXNlLHQpOm51bGx9LFlkLnByb3RvdHlwZS5nZXRSb290PWZ1bmN0aW9uKCl7cmV0dXJuIFdvKFwiUmVmZXJlbmNlLnJvb3RcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCksbmV3IFlkKHRoaXMuZGF0YWJhc2UsdGhpcy5fZGVsZWdhdGUucm9vdCl9LFlkLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXtXbyhcIlJlZmVyZW5jZS5zZXRcIiwxLDIsYXJndW1lbnRzLmxlbmd0aCksR28oXCJSZWZlcmVuY2Uuc2V0XCIsXCJvbkNvbXBsZXRlXCIsZSwhMCk7dD1QcCh0aGlzLl9kZWxlZ2F0ZSx0KTtyZXR1cm4gZSYmdC50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUobnVsbCl9LGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfSksdH0sWWQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe2lmKFdvKFwiUmVmZXJlbmNlLnVwZGF0ZVwiLDEsMixhcmd1bWVudHMubGVuZ3RoKSxBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIG49e30scj0wO3I8dC5sZW5ndGg7KytyKW5bXCJcIityXT10W3JdO3Q9bixucyhcIlBhc3NpbmcgYW4gQXJyYXkgdG8gRmlyZWJhc2UudXBkYXRlKCkgaXMgZGVwcmVjYXRlZC4gVXNlIHNldCgpIGlmIHlvdSB3YW50IHRvIG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgZGF0YSwgb3IgYW4gT2JqZWN0IHdpdGggaW50ZWdlciBrZXlzIGlmIHlvdSByZWFsbHkgZG8gd2FudCB0byBvbmx5IHVwZGF0ZSBzb21lIG9mIHRoZSBjaGlsZHJlbi5cIil9QWYoXCJSZWZlcmVuY2UudXBkYXRlXCIsdGhpcy5fZGVsZWdhdGUuX3BhdGgpLEdvKFwiUmVmZXJlbmNlLnVwZGF0ZVwiLFwib25Db21wbGV0ZVwiLGUsITApO3ZhciBpPU9wKHRoaXMuX2RlbGVnYXRlLHQpO3JldHVybiBlJiZpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZShudWxsKX0sZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9KSxpfSxZZC5wcm90b3R5cGUuc2V0V2l0aFByaW9yaXR5PWZ1bmN0aW9uKHQsZSxuKXtXbyhcIlJlZmVyZW5jZS5zZXRXaXRoUHJpb3JpdHlcIiwyLDMsYXJndW1lbnRzLmxlbmd0aCksR28oXCJSZWZlcmVuY2Uuc2V0V2l0aFByaW9yaXR5XCIsXCJvbkNvbXBsZXRlXCIsbiwhMCk7ZT1mdW5jdGlvbih0LGUsbil7aWYoQWYoXCJzZXRXaXRoUHJpb3JpdHlcIix0Ll9wYXRoKSxTZihcInNldFdpdGhQcmlvcml0eVwiLGUsdC5fcGF0aCwhMSksYmYoXCJzZXRXaXRoUHJpb3JpdHlcIixuLCExKSxcIi5sZW5ndGhcIj09PXQua2V5fHxcIi5rZXlzXCI9PT10LmtleSl0aHJvd1wic2V0V2l0aFByaW9yaXR5IGZhaWxlZDogXCIrdC5rZXkrXCIgaXMgYSByZWFkLW9ubHkgb2JqZWN0LlwiO3ZhciByPW5ldyBsbztyZXR1cm4gemYodC5fcmVwbyx0Ll9wYXRoLGUsbixyLndyYXBDYWxsYmFjayhmdW5jdGlvbigpe30pKSxyLnByb21pc2V9KHRoaXMuX2RlbGVnYXRlLHQsZSk7cmV0dXJuIG4mJmUudGhlbihmdW5jdGlvbigpe3JldHVybiBuKG51bGwpfSxmdW5jdGlvbih0KXtyZXR1cm4gbih0KX0pLGV9LFlkLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7V28oXCJSZWZlcmVuY2UucmVtb3ZlXCIsMCwxLGFyZ3VtZW50cy5sZW5ndGgpLEdvKFwiUmVmZXJlbmNlLnJlbW92ZVwiLFwib25Db21wbGV0ZVwiLGUsITApO3ZhciB0LHQ9KHQ9dGhpcy5fZGVsZWdhdGUsQWYoXCJyZW1vdmVcIix0Ll9wYXRoKSxQcCh0LG51bGwpKTtyZXR1cm4gZSYmdC50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUobnVsbCl9LGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfSksdH0sWWQucHJvdG90eXBlLnRyYW5zYWN0aW9uPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO1dvKFwiUmVmZXJlbmNlLnRyYW5zYWN0aW9uXCIsMSwzLGFyZ3VtZW50cy5sZW5ndGgpLEdvKFwiUmVmZXJlbmNlLnRyYW5zYWN0aW9uXCIsXCJ0cmFuc2FjdGlvblVwZGF0ZVwiLHQsITEpLEdvKFwiUmVmZXJlbmNlLnRyYW5zYWN0aW9uXCIsXCJvbkNvbXBsZXRlXCIsZSwhMCksZnVuY3Rpb24odCxlLG4scil7aWYoKCFyfHx2b2lkIDAhPT1uKSYmXCJib29sZWFuXCIhPXR5cGVvZiBuKXRocm93IG5ldyBFcnJvcihIbyh0LGUpK1wibXVzdCBiZSBhIGJvb2xlYW4uXCIpfShcIlJlZmVyZW5jZS50cmFuc2FjdGlvblwiLFwiYXBwbHlMb2NhbGx5XCIsbiwhMCk7bj1VZCh0aGlzLl9kZWxlZ2F0ZSx0LHthcHBseUxvY2FsbHk6bn0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBWZCh0LmNvbW1pdHRlZCxuZXcgS2Qoci5kYXRhYmFzZSx0LnNuYXBzaG90KSl9KTtyZXR1cm4gZSYmbi50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKG51bGwsdC5jb21taXR0ZWQsdC5zbmFwc2hvdCl9LGZ1bmN0aW9uKHQpe3JldHVybiBlKHQsITEsbnVsbCl9KSxufSxZZC5wcm90b3R5cGUuc2V0UHJpb3JpdHk9ZnVuY3Rpb24odCxlKXtXbyhcIlJlZmVyZW5jZS5zZXRQcmlvcml0eVwiLDEsMixhcmd1bWVudHMubGVuZ3RoKSxHbyhcIlJlZmVyZW5jZS5zZXRQcmlvcml0eVwiLFwib25Db21wbGV0ZVwiLGUsITApO3Q9ZnVuY3Rpb24odCxlKXt0PXRhKHQpLEFmKFwic2V0UHJpb3JpdHlcIix0Ll9wYXRoKSxiZihcInNldFByaW9yaXR5XCIsZSwhMSk7dmFyIG49bmV3IGxvO3JldHVybiB6Zih0Ll9yZXBvLGh1KHQuX3BhdGgsXCIucHJpb3JpdHlcIiksZSxudWxsLG4ud3JhcENhbGxiYWNrKGZ1bmN0aW9uKCl7fSkpLG4ucHJvbWlzZX0odGhpcy5fZGVsZWdhdGUsdCk7cmV0dXJuIGUmJnQudGhlbihmdW5jdGlvbigpe3JldHVybiBlKG51bGwpfSxmdW5jdGlvbih0KXtyZXR1cm4gZSh0KX0pLHR9LFlkLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztXbyhcIlJlZmVyZW5jZS5wdXNoXCIsMCwyLGFyZ3VtZW50cy5sZW5ndGgpLEdvKFwiUmVmZXJlbmNlLnB1c2hcIixcIm9uQ29tcGxldGVcIixlLCEwKTt2YXIgcj1mdW5jdGlvbih0LGUpe3Q9dGEodCksQWYoXCJwdXNoXCIsdC5fcGF0aCksU2YoXCJwdXNoXCIsZSx0Ll9wYXRoLCEwKTt2YXIgbj1WZih0Ll9yZXBvKSxyPWtjKG4pLG49UnAodCxyKSxpPVJwKHQsciksZT1udWxsIT1lP1BwKGksZSkudGhlbihmdW5jdGlvbigpe3JldHVybiBpfSk6UHJvbWlzZS5yZXNvbHZlKGkpO3JldHVybiBuLnRoZW49ZS50aGVuLmJpbmQoZSksbi5jYXRjaD1lLnRoZW4uYmluZChlLHZvaWQgMCksbn0odGhpcy5fZGVsZWdhdGUsdCksdD1yLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBZZChuLmRhdGFiYXNlLHQpfSk7ZSYmdC50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUobnVsbCl9LGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfSk7cj1uZXcgWWQodGhpcy5kYXRhYmFzZSxyKTtyZXR1cm4gci50aGVuPXQudGhlbi5iaW5kKHQpLHIuY2F0Y2g9dC5jYXRjaC5iaW5kKHQsdm9pZCAwKSxyfSxZZC5wcm90b3R5cGUub25EaXNjb25uZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIEFmKFwiUmVmZXJlbmNlLm9uRGlzY29ubmVjdFwiLHRoaXMuX2RlbGVnYXRlLl9wYXRoKSxuZXcgamQobmV3IGdwKHRoaXMuX2RlbGVnYXRlLl9yZXBvLHRoaXMuX2RlbGVnYXRlLl9wYXRoKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShZZC5wcm90b3R5cGUsXCJrZXlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0S2V5KCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KFlkLnByb3RvdHlwZSxcInBhcmVudFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQYXJlbnQoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoWWQucHJvdG90eXBlLFwicm9vdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRSb290KCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksWWQpO2Z1bmN0aW9uIFlkKHQsZSl7dmFyIG49emQuY2FsbCh0aGlzLHQsbmV3IG1wKGUuX3JlcG8sZS5fcGF0aCxuZXcgVWMsITEpKXx8dGhpcztyZXR1cm4gbi5kYXRhYmFzZT10LG4uX2RlbGVnYXRlPWUsbn12YXIgWGQ9KEpkLnByb3RvdHlwZS51c2VFbXVsYXRvcj1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pLERkKHRoaXMuX2RlbGVnYXRlLHQsZSxuKX0sSmQucHJvdG90eXBlLnJlZj1mdW5jdGlvbih0KXtpZihXbyhcImRhdGFiYXNlLnJlZlwiLDAsMSxhcmd1bWVudHMubGVuZ3RoKSx0IGluc3RhbmNlb2YgUWQpe3ZhciBlPUFwKHRoaXMuX2RlbGVnYXRlLHQudG9TdHJpbmcoKSk7cmV0dXJuIG5ldyBRZCh0aGlzLGUpfWU9TnAodGhpcy5fZGVsZWdhdGUsdCk7cmV0dXJuIG5ldyBRZCh0aGlzLGUpfSxKZC5wcm90b3R5cGUucmVmRnJvbVVSTD1mdW5jdGlvbih0KXtXbyhcImRhdGFiYXNlLnJlZkZyb21VUkxcIiwxLDEsYXJndW1lbnRzLmxlbmd0aCk7dD1BcCh0aGlzLl9kZWxlZ2F0ZSx0KTtyZXR1cm4gbmV3IFFkKHRoaXMsdCl9LEpkLnByb3RvdHlwZS5nb09mZmxpbmU9ZnVuY3Rpb24oKXt2YXIgdDtXbyhcImRhdGFiYXNlLmdvT2ZmbGluZVwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKSwodD10YSh0PXRoaXMuX2RlbGVnYXRlKSkuX2NoZWNrTm90RGVsZXRlZChcImdvT2ZmbGluZVwiKSxKZih0Ll9yZXBvKX0sSmQucHJvdG90eXBlLmdvT25saW5lPWZ1bmN0aW9uKCl7cmV0dXJuIFdvKFwiZGF0YWJhc2UuZ29PbmxpbmVcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCkseGQodGhpcy5fZGVsZWdhdGUpfSxKZC5TZXJ2ZXJWYWx1ZT17VElNRVNUQU1QOkxkLGluY3JlbWVudDpmdW5jdGlvbih0KXtyZXR1cm57XCIuc3ZcIjp7aW5jcmVtZW50OnR9fX19LEpkKTtmdW5jdGlvbiBKZCh0LGUpe3ZhciBuPXRoaXM7dGhpcy5fZGVsZWdhdGU9dCx0aGlzLmFwcD1lLHRoaXMuSU5URVJOQUw9e2RlbGV0ZTpmdW5jdGlvbigpe3JldHVybiBuLl9kZWxlZ2F0ZS5fZGVsZXRlKCl9fX12YXIgJGQ9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZm9yY2VMb25nUG9sbGluZzpmdW5jdGlvbigpe1ZzLmZvcmNlRGlzYWxsb3coKSxNcy5mb3JjZUFsbG93KCl9LGZvcmNlV2ViU29ja2V0czpmdW5jdGlvbigpe01zLmZvcmNlRGlzYWxsb3coKX0saXNXZWJTb2NrZXRzQXZhaWxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIFZzLmlzQXZhaWxhYmxlKCl9LHNldFNlY3VyaXR5RGVidWdDYWxsYmFjazpmdW5jdGlvbih0LGUpe3QuX2RlbGVnYXRlLl9yZXBvLnBlcnNpc3RlbnRDb25uZWN0aW9uXy5zZWN1cml0eURlYnVnQ2FsbGJhY2tfPWV9LHN0YXRzOmZ1bmN0aW9uKHQsZSl7dmFyIGk7dD10Ll9kZWxlZ2F0ZS5fcmVwbyx2b2lkIDA9PT0oZT1lKSYmKGU9ITEpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiYodD1lPyh0LnN0YXRzTGlzdGVuZXJffHwodC5zdGF0c0xpc3RlbmVyXz1uZXcgWmModC5zdGF0c18pKSx0LnN0YXRzTGlzdGVuZXJfLmdldCgpKTp0LnN0YXRzXy5nZXQoKSxpPU9iamVjdC5rZXlzKHQpLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLm1heChlLmxlbmd0aCx0KX0sMCksc3ModCxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LHI9dC5sZW5ndGg7cjxpKzI7cisrKW4rPVwiIFwiO2NvbnNvbGUubG9nKG4rZSl9KSl9LHN0YXRzSW5jcmVtZW50Q291bnRlcjpmdW5jdGlvbih0LGUpe3Q9dC5fZGVsZWdhdGUuX3JlcG8sZT1lLHQuc3RhdHNfLmluY3JlbWVudENvdW50ZXIoZSksdD10LnN0YXRzUmVwb3J0ZXJfLGU9ZSx0LnN0YXRzVG9SZXBvcnRfW2VdPSEwfSxkYXRhVXBkYXRlQ291bnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuX2RlbGVnYXRlLl9yZXBvLmRhdGFVcGRhdGVDb3VudH0saW50ZXJjZXB0U2VydmVyRGF0YTpmdW5jdGlvbih0LGUpe3Q9dC5fZGVsZWdhdGUuX3JlcG8sZT1lLHQuaW50ZXJjZXB0U2VydmVyRGF0YUNhbGxiYWNrXz1lfSxpbml0U3RhbmRhbG9uZTpmdW5jdGlvbih0KXt2YXIgZT10LmFwcCxuPXQudXJsLHI9dC52ZXJzaW9uLGk9dC5jdXN0b21BdXRoSW1wbCxvPXQubmFtZXNwYWNlLHQ9dm9pZCAwIT09KHQ9dC5ub2RlQWRtaW4pJiZ0O3JldHVybiBEYShyKSwocj1uZXcgaWEoXCJhdXRoLWludGVybmFsXCIsbmV3IGFhKFwiZGF0YWJhc2Utc3RhbmRhbG9uZVwiKSkpLnNldENvbXBvbmVudChuZXcgZWEoXCJhdXRoLWludGVybmFsXCIsZnVuY3Rpb24oKXtyZXR1cm4gaX0sXCJQUklWQVRFXCIpKSx7aW5zdGFuY2U6bmV3IFhkKFJkKGUscix2b2lkIDAsbix0KSxlKSxuYW1lc3BhY2U6b319fSksRz1TdTtTdS5wcm90b3R5cGUuc2ltcGxlTGlzdGVuPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZW5kUmVxdWVzdChcInFcIix7cDp0fSxlKX0sU3UucHJvdG90eXBlLmVjaG89ZnVuY3Rpb24odCxlKXt0aGlzLnNlbmRSZXF1ZXN0KFwiZWNob1wiLHtkOnR9LGUpfTt2YXIgWmQsdHY9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsRGF0YUNvbm5lY3Rpb246RyxSZWFsVGltZUNvbm5lY3Rpb246SHMsaGlqYWNrSGFzaDpmdW5jdGlvbihpKXt2YXIgbz1TdS5wcm90b3R5cGUucHV0O3JldHVybiBTdS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMCE9PXImJihyPWkoKSksby5jYWxsKHRoaXMsdCxlLG4scil9LGZ1bmN0aW9uKCl7U3UucHJvdG90eXBlLnB1dD1vfX0sQ29ubmVjdGlvblRhcmdldDpFcyxxdWVyeUlkZW50aWZpZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHQuX2RlbGVnYXRlLl9xdWVyeUlkZW50aWZpZXJ9LGZvcmNlUmVzdENsaWVudDpmdW5jdGlvbih0KXtBZD10fX0pLGV2PVhkLlNlcnZlclZhbHVlO0RhKChaZD1YbCkuU0RLX1ZFUlNJT04pLFpkLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBlYShcImRhdGFiYXNlXCIsZnVuY3Rpb24odCxlKXt2YXIgbj1lLmluc3RhbmNlSWRlbnRpZmllcixyPXQuZ2V0UHJvdmlkZXIoXCJhcHBcIikuZ2V0SW1tZWRpYXRlKCksZT10LmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiKSx0PXQuZ2V0UHJvdmlkZXIoXCJhcHAtY2hlY2staW50ZXJuYWxcIik7cmV0dXJuIG5ldyBYZChSZChyLGUsdCxuKSxyKX0sXCJQVUJMSUNcIikuc2V0U2VydmljZVByb3BzKHtSZWZlcmVuY2U6UWQsUXVlcnk6SGQsRGF0YWJhc2U6WGQsRGF0YVNuYXBzaG90OktkLGVuYWJsZUxvZ2dpbmc6amEsSU5URVJOQUw6JGQsU2VydmVyVmFsdWU6ZXYsVEVTVF9BQ0NFU1M6dHZ9KS5zZXRNdWx0aXBsZUluc3RhbmNlcyghMCkpLFpkLnJlZ2lzdGVyVmVyc2lvbihcIkBmaXJlYmFzZS9kYXRhYmFzZVwiLFwiMC4xMC4wXCIpO3ZhciBudj1mdW5jdGlvbih0LGUpe3JldHVybihudj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSl9KSh0LGUpfTtmdW5jdGlvbiBydih0KXt2YXIgZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixuPWUmJnRbZV0scj0wO2lmKG4pcmV0dXJuIG4uY2FsbCh0KTtpZih0JiZcIm51bWJlclwiPT10eXBlb2YgdC5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm57dmFsdWU6KHQ9dCYmcj49dC5sZW5ndGg/dm9pZCAwOnQpJiZ0W3IrK10sZG9uZTohdH19fTt0aHJvdyBuZXcgVHlwZUVycm9yKGU/XCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiOlwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKX12YXIgej1cInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6e30saXY9e30sb3Y9enx8c2VsZjtmdW5jdGlvbiBhdigpe31mdW5jdGlvbiBzdih0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm5cImFycmF5XCI9PShlPVwib2JqZWN0XCIhPWU/ZTp0P0FycmF5LmlzQXJyYXkodCk/XCJhcnJheVwiOmU6XCJudWxsXCIpfHxcIm9iamVjdFwiPT1lJiZcIm51bWJlclwiPT10eXBlb2YgdC5sZW5ndGh9ZnVuY3Rpb24gdXYodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuXCJvYmplY3RcIj09ZSYmbnVsbCE9dHx8XCJmdW5jdGlvblwiPT1lfXZhciBjdj1cImNsb3N1cmVfdWlkX1wiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApLGh2PTA7ZnVuY3Rpb24gbHYodCxlLG4pe3JldHVybiB0LmNhbGwuYXBwbHkodC5iaW5kLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZnYoZSxuLHQpe2lmKCFlKXRocm93IEVycm9yKCk7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXt2YXIgcj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkodCxyKSxlLmFwcGx5KG4sdCl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KG4sYXJndW1lbnRzKX19ZnVuY3Rpb24gcHYodCxlLG4pe3JldHVybihwdj1GdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP2x2OmZ2KS5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZHYoZSl7dmFyIG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciB0PW4uc2xpY2UoKTtyZXR1cm4gdC5wdXNoLmFwcGx5KHQsYXJndW1lbnRzKSxlLmFwcGx5KHRoaXMsdCl9fWZ1bmN0aW9uIHZ2KCl7cmV0dXJuIERhdGUubm93KCl9ZnVuY3Rpb24gZ3YodCxvKXtmdW5jdGlvbiBlKCl7fWUucHJvdG90eXBlPW8ucHJvdG90eXBlLHQuWD1vLnByb3RvdHlwZSx0LnByb3RvdHlwZT1uZXcgZSwodC5wcm90b3R5cGUuY29uc3RydWN0b3I9dCkuS2I9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj1BcnJheShhcmd1bWVudHMubGVuZ3RoLTIpLGk9MjtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXJbaS0yXT1hcmd1bWVudHNbaV07cmV0dXJuIG8ucHJvdG90eXBlW2VdLmFwcGx5KHQscil9fWZ1bmN0aW9uIHl2KCl7dGhpcy5qPXRoaXMuaix0aGlzLmk9dGhpcy5pfXl2LnByb3RvdHlwZS5qPSExLHl2LnByb3RvdHlwZS5qYT1mdW5jdGlvbigpe3ZhciB0OyF0aGlzLmomJih0aGlzLmo9ITAsdGhpcy5HKCksMCkmJih0PXRoaXMsT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsY3YpJiZ0W2N2XXx8KHRbY3ZdPSsraHYpKX0seXYucHJvdG90eXBlLkc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpZm9yKDt0aGlzLmkubGVuZ3RoOyl0aGlzLmkuc2hpZnQoKSgpfTt2YXIgbXY9QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/ZnVuY3Rpb24odCxlKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LGUsdm9pZCAwKX06ZnVuY3Rpb24odCxlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZXx8MSE9ZS5sZW5ndGg/LTE6dC5pbmRleE9mKGUsMCk7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYobiBpbiB0JiZ0W25dPT09ZSlyZXR1cm4gbjtyZXR1cm4tMX0sYnY9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24odCxlLG4pe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodCxlLG4pfTpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXQubGVuZ3RoLGk9XCJzdHJpbmdcIj09dHlwZW9mIHQ/dC5zcGxpdChcIlwiKTp0LG89MDtvPHI7bysrKW8gaW4gaSYmZS5jYWxsKG4saVtvXSxvLHQpfTtmdW5jdGlvbiBfdigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGFyZ3VtZW50cyl9ZnVuY3Rpb24gd3YodCl7dmFyIGU9dC5sZW5ndGg7aWYoMDxlKXtmb3IodmFyIG49QXJyYXkoZSkscj0wO3I8ZTtyKyspbltyXT10W3JdO3JldHVybiBufXJldHVybltdfWZ1bmN0aW9uIEl2KHQpe3JldHVybi9eW1xcc1xceGEwXSokLy50ZXN0KHQpfXZhciBUdixFdj1TdHJpbmcucHJvdG90eXBlLnRyaW0/ZnVuY3Rpb24odCl7cmV0dXJuIHQudHJpbSgpfTpmdW5jdGlvbih0KXtyZXR1cm4vXltcXHNcXHhhMF0qKFtcXHNcXFNdKj8pW1xcc1xceGEwXSokLy5leGVjKHQpWzFdfTtmdW5jdGlvbiBTdih0LGUpe3JldHVybi0xIT10LmluZGV4T2YoZSl9ZnVuY3Rpb24gQ3YodCxlKXtyZXR1cm4gdDxlPy0xOmU8dD8xOjB9dDp7dmFyIGt2PW92Lm5hdmlnYXRvcjtpZihrdil7a3Y9a3YudXNlckFnZW50O2lmKGt2KXtUdj1rdjticmVhayB0fX1Udj1cIlwifWZ1bmN0aW9uIE52KHQsZSxuKXtmb3IodmFyIHIgaW4gdCllLmNhbGwobix0W3JdLHIsdCl9ZnVuY3Rpb24gQXYodCl7dmFyIGUsbj17fTtmb3IoZSBpbiB0KW5bZV09dFtlXTtyZXR1cm4gbn12YXIgUnY9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24gUHYodCl7Zm9yKHZhciBlLG4scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspe2ZvcihlIGluIG49YXJndW1lbnRzW3JdKXRbZV09bltlXTtmb3IodmFyIGk9MDtpPFJ2Lmxlbmd0aDtpKyspZT1SdltpXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixlKSYmKHRbZV09bltlXSl9fWZ1bmN0aW9uIE92KHQpe3JldHVybiBPdltcIiBcIl0odCksdH1PdltcIiBcIl09YXY7dmFyIER2LHh2PVN2KFR2LFwiT3BlcmFcIiksTHY9U3YoVHYsXCJUcmlkZW50XCIpfHxTdihUdixcIk1TSUVcIiksTXY9U3YoVHYsXCJFZGdlXCIpLEZ2PU12fHxMdixVdj1TdihUdixcIkdlY2tvXCIpJiYhKFN2KFR2LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiFTdihUdixcIkVkZ2VcIikpJiYhKFN2KFR2LFwiVHJpZGVudFwiKXx8U3YoVHYsXCJNU0lFXCIpKSYmIVN2KFR2LFwiRWRnZVwiKSxqdj1TdihUdi50b0xvd2VyQ2FzZSgpLFwid2Via2l0XCIpJiYhU3YoVHYsXCJFZGdlXCIpO2Z1bmN0aW9uIHF2KCl7dmFyIHQ9b3YuZG9jdW1lbnQ7cmV0dXJuIHQ/dC5kb2N1bWVudE1vZGU6dm9pZCAwfXQ6e3ZhciBWdj1cIlwiLEJ2PShCdj1UdixVdj8vcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoQnYpOk12Py9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoQnYpOkx2Py9cXGIoPzpNU0lFfHJ2KVs6IF0oW15cXCk7XSspKFxcKXw7KS8uZXhlYyhCdik6anY/L1dlYktpdFxcLyhcXFMrKS8uZXhlYyhCdik6eHY/Lyg/OlZlcnNpb24pWyBcXC9dPyhcXFMrKS8uZXhlYyhCdik6dm9pZCAwKTtpZihCdiYmKFZ2PUJ2P0J2WzFdOlwiXCIpLEx2KXtCdj1xdigpO2lmKG51bGwhPUJ2JiZCdj5wYXJzZUZsb2F0KFZ2KSl7RHY9U3RyaW5nKEJ2KTticmVhayB0fX1Edj1Wdn12YXIgS3Y9e307ZnVuY3Rpb24gV3Yocyl7cmV0dXJuIHQ9cyxlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT1FdihTdHJpbmcoRHYpKS5zcGxpdChcIi5cIiksbj1FdihTdHJpbmcocykpLnNwbGl0KFwiLlwiKSxyPU1hdGgubWF4KGUubGVuZ3RoLG4ubGVuZ3RoKSxpPTA7MD09dCYmaTxyO2krKylmb3IodmFyIG89ZVtpXXx8XCJcIixhPW5baV18fFwiXCI7bz0vKFxcZCopKFxcRCopKC4qKS8uZXhlYyhvKXx8W1wiXCIsXCJcIixcIlwiLFwiXCJdLGE9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoYSl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXSwoMCE9b1swXS5sZW5ndGh8fDAhPWFbMF0ubGVuZ3RoKSYmKHQ9Q3YoMD09b1sxXS5sZW5ndGg/MDpwYXJzZUludChvWzFdLDEwKSwwPT1hWzFdLmxlbmd0aD8wOnBhcnNlSW50KGFbMV0sMTApKXx8Q3YoMD09b1syXS5sZW5ndGgsMD09YVsyXS5sZW5ndGgpfHxDdihvWzJdLGFbMl0pLG89b1szXSxhPWFbM10sMD09dCk7KTtyZXR1cm4gMDw9dH0sbj1LdixPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobix0KT9uW3RdOm5bdF09ZSh0KTt2YXIgdCxlLG59dmFyIEh2PW92LmRvY3VtZW50JiZMdiYmKHF2KCl8fHBhcnNlSW50KER2LDEwKSl8fHZvaWQgMCxHdj0hTHZ8fDk8PU51bWJlcihIdiksenY9THYmJiFXdihcIjlcIiksUXY9ZnVuY3Rpb24oKXtpZighb3YuYWRkRXZlbnRMaXN0ZW5lcnx8IU9iamVjdC5kZWZpbmVQcm9wZXJ0eSlyZXR1cm4hMTt2YXIgdD0hMSxlPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7dD0hMH19KTt0cnl7b3YuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhdixlKSxvdi5yZW1vdmVFdmVudExpc3RlbmVyKFwidGVzdFwiLGF2LGUpfWNhdGNoKHQpe31yZXR1cm4gdH0oKTtmdW5jdGlvbiBZdih0LGUpe3RoaXMudHlwZT10LHRoaXMuYT10aGlzLnRhcmdldD1lLHRoaXMuZGVmYXVsdFByZXZlbnRlZD0hMX1mdW5jdGlvbiBYdih0LGUpe2lmKFl2LmNhbGwodGhpcyx0P3QudHlwZTpcIlwiKSx0aGlzLnJlbGF0ZWRUYXJnZXQ9dGhpcy5hPXRoaXMudGFyZ2V0PW51bGwsdGhpcy5idXR0b249dGhpcy5zY3JlZW5ZPXRoaXMuc2NyZWVuWD10aGlzLmNsaWVudFk9dGhpcy5jbGllbnRYPTAsdGhpcy5rZXk9XCJcIix0aGlzLm1ldGFLZXk9dGhpcy5zaGlmdEtleT10aGlzLmFsdEtleT10aGlzLmN0cmxLZXk9ITEsdGhpcy5wb2ludGVySWQ9MCx0aGlzLnBvaW50ZXJUeXBlPVwiXCIsdGhpcy5jPW51bGwsdCl7dmFyIG49dGhpcy50eXBlPXQudHlwZSxyPXQuY2hhbmdlZFRvdWNoZXMmJnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP3QuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDtpZih0aGlzLnRhcmdldD10LnRhcmdldHx8dC5zcmNFbGVtZW50LHRoaXMuYT1lLGU9dC5yZWxhdGVkVGFyZ2V0KXtpZihVdil7dDp7dHJ5e092KGUubm9kZU5hbWUpO3ZhciBpPSEwO2JyZWFrIHR9Y2F0Y2godCl7fWk9ITF9aXx8KGU9bnVsbCl9fWVsc2VcIm1vdXNlb3ZlclwiPT1uP2U9dC5mcm9tRWxlbWVudDpcIm1vdXNlb3V0XCI9PW4mJihlPXQudG9FbGVtZW50KTt0aGlzLnJlbGF0ZWRUYXJnZXQ9ZSxyPyh0aGlzLmNsaWVudFg9dm9pZCAwIT09ci5jbGllbnRYP3IuY2xpZW50WDpyLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1yLmNsaWVudFk/ci5jbGllbnRZOnIucGFnZVksdGhpcy5zY3JlZW5YPXIuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9ci5zY3JlZW5ZfHwwKToodGhpcy5jbGllbnRYPXZvaWQgMCE9PXQuY2xpZW50WD90LmNsaWVudFg6dC5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09dC5jbGllbnRZP3QuY2xpZW50WTp0LnBhZ2VZLHRoaXMuc2NyZWVuWD10LnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPXQuc2NyZWVuWXx8MCksdGhpcy5idXR0b249dC5idXR0b24sdGhpcy5rZXk9dC5rZXl8fFwiXCIsdGhpcy5jdHJsS2V5PXQuY3RybEtleSx0aGlzLmFsdEtleT10LmFsdEtleSx0aGlzLnNoaWZ0S2V5PXQuc2hpZnRLZXksdGhpcy5tZXRhS2V5PXQubWV0YUtleSx0aGlzLnBvaW50ZXJJZD10LnBvaW50ZXJJZHx8MCx0aGlzLnBvaW50ZXJUeXBlPVwic3RyaW5nXCI9PXR5cGVvZiB0LnBvaW50ZXJUeXBlP3QucG9pbnRlclR5cGU6SnZbdC5wb2ludGVyVHlwZV18fFwiXCIsKHRoaXMuYz10KS5kZWZhdWx0UHJldmVudGVkJiZ0aGlzLmIoKX19WXYucHJvdG90eXBlLmI9ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGd2KFh2LFl2KTt2YXIgSnY9ezI6XCJ0b3VjaFwiLDM6XCJwZW5cIiw0OlwibW91c2VcIn07WHYucHJvdG90eXBlLmI9ZnVuY3Rpb24oKXtYdi5YLmIuY2FsbCh0aGlzKTt2YXIgdD10aGlzLmM7aWYodC5wcmV2ZW50RGVmYXVsdCl0LnByZXZlbnREZWZhdWx0KCk7ZWxzZSBpZih0LnJldHVyblZhbHVlPSExLHp2KXRyeXsodC5jdHJsS2V5fHwxMTI8PXQua2V5Q29kZSYmdC5rZXlDb2RlPD0xMjMpJiYodC5rZXlDb2RlPS0xKX1jYXRjaCh0KXt9fTt2YXIgJHY9XCJjbG9zdXJlX2xpc3RlbmFibGVfXCIrKDFlNipNYXRoLnJhbmRvbSgpfDApLFp2PTA7ZnVuY3Rpb24gdGcodCxlLG4scixpKXt0aGlzLmxpc3RlbmVyPXQsdGhpcy5wcm94eT1udWxsLHRoaXMuc3JjPWUsdGhpcy50eXBlPW4sdGhpcy5jYXB0dXJlPSEhcix0aGlzLmNhPWksdGhpcy5rZXk9Kytadix0aGlzLlk9dGhpcy5aPSExfWZ1bmN0aW9uIGVnKHQpe3QuWT0hMCx0Lmxpc3RlbmVyPW51bGwsdC5wcm94eT1udWxsLHQuc3JjPW51bGwsdC5jYT1udWxsfWZ1bmN0aW9uIG5nKHQpe3RoaXMuc3JjPXQsdGhpcy5hPXt9LHRoaXMuYj0wfWZ1bmN0aW9uIHJnKHQsZSl7dmFyIG4scixpLG89ZS50eXBlO28gaW4gdC5hJiYobj10LmFbb10sKGk9MDw9KHI9bXYobixlKSkpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwobixyLDEpLGkmJihlZyhlKSwwPT10LmFbb10ubGVuZ3RoJiYoZGVsZXRlIHQuYVtvXSx0LmItLSkpKX1mdW5jdGlvbiBpZyh0LGUsbixyKXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoOysraSl7dmFyIG89dFtpXTtpZighby5ZJiZvLmxpc3RlbmVyPT1lJiZvLmNhcHR1cmU9PSEhbiYmby5jYT09cilyZXR1cm4gaX1yZXR1cm4tMX1uZy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQsZSxuLHIsaSl7dmFyIG89dC50b1N0cmluZygpOyh0PXRoaXMuYVtvXSl8fCh0PXRoaXMuYVtvXT1bXSx0aGlzLmIrKyk7dmFyIGE9aWcodCxlLHIsaSk7cmV0dXJuLTE8YT8oZT10W2FdLG58fChlLlo9ITEpKTooKGU9bmV3IHRnKGUsdGhpcy5zcmMsbywhIXIsaSkpLlo9bix0LnB1c2goZSkpLGV9O3ZhciBvZz1cImNsb3N1cmVfbG1fXCIrKDFlNipNYXRoLnJhbmRvbSgpfDApLGFnPXt9O2Z1bmN0aW9uIHNnKHQsZSxuLHIsaSl7aWYociYmci5vbmNlKXJldHVybiBmdW5jdGlvbiB0KGUsbixyLGksbyl7aWYoQXJyYXkuaXNBcnJheShuKSl7Zm9yKHZhciBhPTA7YTxuLmxlbmd0aDthKyspdChlLG5bYV0scixpLG8pO3JldHVybiBudWxsfXI9dmcocik7cmV0dXJuIGUmJmVbJHZdP2Uud2EobixyLHV2KGkpPyEhaS5jYXB0dXJlOiEhaSxvKTp1ZyhlLG4sciwhMCxpLG8pfSh0LGUsbixyLGkpO2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKXNnKHQsZVtvXSxuLHIsaSk7cmV0dXJuIG51bGx9cmV0dXJuIG49dmcobiksdCYmdFskdl0/dC52YShlLG4sdXYocik/ISFyLmNhcHR1cmU6ISFyLGkpOnVnKHQsZSxuLCExLHIsaSl9ZnVuY3Rpb24gdWcodCxlLG4scixpLG8pe2lmKCFlKXRocm93IEVycm9yKFwiSW52YWxpZCBldmVudCB0eXBlXCIpO3ZhciBhPXV2KGkpPyEhaS5jYXB0dXJlOiEhaTtpZihhJiYhR3YpcmV0dXJuIG51bGw7dmFyIHMsdSxjPXBnKHQpO2lmKGN8fCh0W29nXT1jPW5ldyBuZyh0KSksKG49Yy5hZGQoZSxuLHIsYSxvKSkucHJveHkpcmV0dXJuIG47aWYocz1mZyxyPXU9R3Y/ZnVuY3Rpb24odCl7cmV0dXJuIHMuY2FsbCh1LnNyYyx1Lmxpc3RlbmVyLHQpfTpmdW5jdGlvbih0KXtpZighKHQ9cy5jYWxsKHUuc3JjLHUubGlzdGVuZXIsdCkpKXJldHVybiB0fSwobi5wcm94eT1yKS5zcmM9dCxyLmxpc3RlbmVyPW4sdC5hZGRFdmVudExpc3RlbmVyKXZvaWQgMD09PShpPSFRdj9hOmkpJiYoaT0hMSksdC5hZGRFdmVudExpc3RlbmVyKGUudG9TdHJpbmcoKSxyLGkpO2Vsc2UgaWYodC5hdHRhY2hFdmVudCl0LmF0dGFjaEV2ZW50KGhnKGUudG9TdHJpbmcoKSkscik7ZWxzZXtpZighdC5hZGRMaXN0ZW5lcnx8IXQucmVtb3ZlTGlzdGVuZXIpdGhyb3cgRXJyb3IoXCJhZGRFdmVudExpc3RlbmVyIGFuZCBhdHRhY2hFdmVudCBhcmUgdW5hdmFpbGFibGUuXCIpO3QuYWRkTGlzdGVuZXIocil9cmV0dXJuIG59ZnVuY3Rpb24gY2codCl7dmFyIGUsbixyO1wibnVtYmVyXCIhPXR5cGVvZiB0JiZ0JiYhdC5ZJiYoKGU9dC5zcmMpJiZlWyR2XT9yZyhlLmMsdCk6KG49dC50eXBlLHI9dC5wcm94eSxlLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZS5yZW1vdmVFdmVudExpc3RlbmVyKG4scix0LmNhcHR1cmUpOmUuZGV0YWNoRXZlbnQ/ZS5kZXRhY2hFdmVudChoZyhuKSxyKTplLmFkZExpc3RlbmVyJiZlLnJlbW92ZUxpc3RlbmVyJiZlLnJlbW92ZUxpc3RlbmVyKHIpLChuPXBnKGUpKT8ocmcobix0KSwwPT1uLmImJihuLnNyYz1udWxsLGVbb2ddPW51bGwpKTplZyh0KSkpfWZ1bmN0aW9uIGhnKHQpe3JldHVybiB0IGluIGFnP2FnW3RdOmFnW3RdPVwib25cIit0fWZ1bmN0aW9uIGxnKHQsZSl7dmFyIG49dC5saXN0ZW5lcixyPXQuY2F8fHQuc3JjO3JldHVybiB0LlomJmNnKHQpLG4uY2FsbChyLGUpfWZ1bmN0aW9uIGZnKHQsZSl7aWYodC5ZKXJldHVybiEwO2lmKEd2KXJldHVybiBsZyh0LG5ldyBYdihlLHRoaXMpKTtpZighZSl0OntlPVtcIndpbmRvd1wiLFwiZXZlbnRcIl07Zm9yKHZhciBuPW92LHI9MDtyPGUubGVuZ3RoO3IrKylpZihudWxsPT0obj1uW2Vbcl1dKSl7ZT1udWxsO2JyZWFrIHR9ZT1ufXJldHVybiBsZyh0LGU9bmV3IFh2KGUsdGhpcykpfWZ1bmN0aW9uIHBnKHQpe3JldHVybih0PXRbb2ddKWluc3RhbmNlb2Ygbmc/dDpudWxsfXZhciBkZz1cIl9fY2xvc3VyZV9ldmVudHNfZm5fXCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCk7ZnVuY3Rpb24gdmcoZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOihlW2RnXXx8KGVbZGddPWZ1bmN0aW9uKHQpe3JldHVybiBlLmhhbmRsZUV2ZW50KHQpfSksZVtkZ10pfWZ1bmN0aW9uIGdnKCl7eXYuY2FsbCh0aGlzKSx0aGlzLmM9bmV3IG5nKHRoaXMpLCh0aGlzLko9dGhpcykuQz1udWxsfWZ1bmN0aW9uIHlnKHQsZSl7dmFyIG4scj10LkM7aWYocilmb3Iobj1bXTtyO3I9ci5DKW4ucHVzaChyKTtpZih0PXQuSixyPWUudHlwZXx8ZSxcInN0cmluZ1wiPT10eXBlb2YgZT9lPW5ldyBZdihlLHQpOmUgaW5zdGFuY2VvZiBZdj9lLnRhcmdldD1lLnRhcmdldHx8dDooYT1lLFB2KGU9bmV3IFl2KHIsdCksYSkpLGE9ITAsbilmb3IodmFyIGk9bi5sZW5ndGgtMTswPD1pO2ktLSl2YXIgbz1lLmE9bltpXSxhPW1nKG8sciwhMCxlKSYmYTtpZihhPW1nKG89ZS5hPXQsciwhMCxlKSYmYSxhPW1nKG8sciwhMSxlKSYmYSxuKWZvcihpPTA7aTxuLmxlbmd0aDtpKyspYT1tZyhvPWUuYT1uW2ldLHIsITEsZSkmJmF9ZnVuY3Rpb24gbWcodCxlLG4scil7aWYoIShlPXQuYy5hW1N0cmluZyhlKV0pKXJldHVybiEwO2U9ZS5jb25jYXQoKTtmb3IodmFyIGk9ITAsbz0wO288ZS5sZW5ndGg7KytvKXt2YXIgYSxzLHU9ZVtvXTt1JiYhdS5ZJiZ1LmNhcHR1cmU9PW4mJihhPXUubGlzdGVuZXIscz11LmNhfHx1LnNyYyx1LlomJnJnKHQuYyx1KSxpPSExIT09YS5jYWxsKHMscikmJmkpfXJldHVybiBpJiYhci5kZWZhdWx0UHJldmVudGVkfWd2KGdnLHl2KSxnZy5wcm90b3R5cGVbJHZdPSEwLChRcz1nZy5wcm90b3R5cGUpLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odCxlLG4scil7c2codGhpcyx0LGUsbixyKX0sUXMucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUsbixyKXshZnVuY3Rpb24gdChlLG4scixpLG8pe2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHZhciBhPTA7YTxuLmxlbmd0aDthKyspdChlLG5bYV0scixpLG8pO2Vsc2UgaT11dihpKT8hIWkuY2FwdHVyZTohIWkscj12ZyhyKSxlJiZlWyR2XT8oZT1lLmMsKG49U3RyaW5nKG4pLnRvU3RyaW5nKCkpaW4gZS5hJiYtMTwocj1pZyhhPWUuYVtuXSxyLGksbykpJiYoZWcoYVtyXSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGEsciwxKSwwPT1hLmxlbmd0aCYmKGRlbGV0ZSBlLmFbbl0sZS5iLS0pKSk6KGU9ZSYmcGcoZSkpJiYobj1lLmFbbi50b1N0cmluZygpXSwocj0oZT0tMSk8KGU9bj9pZyhuLHIsaSxvKTplKT9uW2VdOm51bGwpJiZjZyhyKSl9KHRoaXMsdCxlLG4scil9LFFzLkc9ZnVuY3Rpb24oKXtpZihnZy5YLkcuY2FsbCh0aGlzKSx0aGlzLmMpe3ZhciB0LGU9dGhpcy5jO2Zvcih0IGluIGUuYSl7Zm9yKHZhciBuPWUuYVt0XSxyPTA7cjxuLmxlbmd0aDtyKyspZWcobltyXSk7ZGVsZXRlIGUuYVt0XSxlLmItLX19dGhpcy5DPW51bGx9LFFzLnZhPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmMuYWRkKFN0cmluZyh0KSxlLCExLG4scil9LFFzLndhPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmMuYWRkKFN0cmluZyh0KSxlLCEwLG4scil9O3ZhciBiZz1vdi5KU09OLnN0cmluZ2lmeTtmdW5jdGlvbiBfZygpe3RoaXMuYj10aGlzLmE9bnVsbH12YXIgd2csSWc9KFRnLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gMDx0aGlzLmI/KHRoaXMuYi0tLHQ9dGhpcy5hLHRoaXMuYT10Lm5leHQsdC5uZXh0PW51bGwpOnQ9dGhpcy5jKCksdH0sbmV3IFRnKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBFZ30sZnVuY3Rpb24odCl7dC5yZXNldCgpfSkpO2Z1bmN0aW9uIFRnKHQsZSl7dGhpcy5jPXQsdGhpcy5mPWUsdGhpcy5iPTAsdGhpcy5hPW51bGx9ZnVuY3Rpb24gRWcoKXt0aGlzLm5leHQ9dGhpcy5iPXRoaXMuYT1udWxsfWZ1bmN0aW9uIFNnKHQsZSl7dmFyIG47d2d8fChuPW92LlByb21pc2UucmVzb2x2ZSh2b2lkIDApLHdnPWZ1bmN0aW9uKCl7bi50aGVuKE5nKX0pLENnfHwod2coKSxDZz0hMCksa2cuYWRkKHQsZSl9X2cucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUpe3ZhciBuPUlnLmdldCgpO24uc2V0KHQsZSksdGhpcy5iP3RoaXMuYi5uZXh0PW46dGhpcy5hPW4sdGhpcy5iPW59LEVnLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt0aGlzLmE9dCx0aGlzLmI9ZSx0aGlzLm5leHQ9bnVsbH07dmFyIENnPSEoRWcucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5uZXh0PXRoaXMuYj10aGlzLmE9bnVsbH0pLGtnPW5ldyBfZztmdW5jdGlvbiBOZygpe2Zvcih2YXIgdCxlO249ZT12b2lkIDAsbj1udWxsLChlPWtnKS5hJiYobj1lLmEsZS5hPWUuYS5uZXh0LGUuYXx8KGUuYj1udWxsKSxuLm5leHQ9bnVsbCksdD1uOyl7dHJ5e3QuYS5jYWxsKHQuYil9Y2F0Y2godCl7IWZ1bmN0aW9uKHQpe292LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyB0fSwwKX0odCl9dmFyIG49SWc7bi5mKHQpLG4uYjwxMDAmJihuLmIrKyx0Lm5leHQ9bi5hLG4uYT10KX1DZz0hMX1mdW5jdGlvbiBBZyh0LGUpe2dnLmNhbGwodGhpcyksdGhpcy5iPXR8fDEsdGhpcy5hPWV8fG92LHRoaXMuZj1wdih0aGlzLlphLHRoaXMpLHRoaXMuZz12digpfWZ1bmN0aW9uIFJnKHQpe3QuYWE9ITEsdC5NJiYodC5hLmNsZWFyVGltZW91dCh0Lk0pLHQuTT1udWxsKX1mdW5jdGlvbiBQZyh0LGUsbil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdCluJiYodD1wdih0LG4pKTtlbHNle2lmKCF0fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LmhhbmRsZUV2ZW50KXRocm93IEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKTt0PXB2KHQuaGFuZGxlRXZlbnQsdCl9cmV0dXJuIDIxNDc0ODM2NDc8TnVtYmVyKGUpPy0xOm92LnNldFRpbWVvdXQodCxlfHwwKX1ndihBZyxnZyksKFFzPUFnLnByb3RvdHlwZSkuYWE9ITEsUXMuTT1udWxsLFFzLlphPWZ1bmN0aW9uKCl7dmFyIHQ7dGhpcy5hYSYmKDA8KHQ9dnYoKS10aGlzLmcpJiZ0PC44KnRoaXMuYj90aGlzLk09dGhpcy5hLnNldFRpbWVvdXQodGhpcy5mLHRoaXMuYi10KToodGhpcy5NJiYodGhpcy5hLmNsZWFyVGltZW91dCh0aGlzLk0pLHRoaXMuTT1udWxsKSx5Zyh0aGlzLFwidGlja1wiKSx0aGlzLmFhJiYoUmcodGhpcyksdGhpcy5zdGFydCgpKSkpfSxRcy5zdGFydD1mdW5jdGlvbigpe3RoaXMuYWE9ITAsdGhpcy5NfHwodGhpcy5NPXRoaXMuYS5zZXRUaW1lb3V0KHRoaXMuZix0aGlzLmIpLHRoaXMuZz12digpKX0sUXMuRz1mdW5jdGlvbigpe0FnLlguRy5jYWxsKHRoaXMpLFJnKHRoaXMpLGRlbGV0ZSB0aGlzLmF9O3ZhciBPZyxEZyx4ZyxMZz0obnYoRGc9RmcseGc9T2c9eXYpLERnLnByb3RvdHlwZT1udWxsPT09eGc/T2JqZWN0LmNyZWF0ZSh4Zyk6KE1nLnByb3RvdHlwZT14Zy5wcm90b3R5cGUsbmV3IE1nKSxGZy5wcm90b3R5cGUuZj1mdW5jdGlvbih0KXt0aGlzLmI9YXJndW1lbnRzLHRoaXMuYT90aGlzLmM9ITA6ZnVuY3Rpb24gdChlKXtlLmE9UGcoZnVuY3Rpb24oKXtlLmE9bnVsbCxlLmMmJihlLmM9ITEsdChlKSl9LGUuaCk7dmFyIG49ZS5iO2UuYj1udWxsLGUuZy5hcHBseShudWxsLG4pfSh0aGlzKX0sRmcucHJvdG90eXBlLkc9ZnVuY3Rpb24oKXtPZy5wcm90b3R5cGUuRy5jYWxsKHRoaXMpLHRoaXMuYSYmKG92LmNsZWFyVGltZW91dCh0aGlzLmEpLHRoaXMuYT1udWxsLHRoaXMuYz0hMSx0aGlzLmI9bnVsbCl9LEZnKTtmdW5jdGlvbiBNZygpe3RoaXMuY29uc3RydWN0b3I9RGd9ZnVuY3Rpb24gRmcodCxlKXt2YXIgbj1PZy5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmc9dCxuLmg9ZSxuLmI9bnVsbCxuLmM9ITEsbi5hPW51bGwsbn1mdW5jdGlvbiBVZyh0KXt5di5jYWxsKHRoaXMpLHRoaXMuYj10LHRoaXMuYT17fX1ndihVZyx5dik7dmFyIGpnPVtdO2Z1bmN0aW9uIHFnKHQsZSxuLHIpe0FycmF5LmlzQXJyYXkobil8fChuJiYoamdbMF09bi50b1N0cmluZygpKSxuPWpnKTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIG89c2coZSxuW2ldLHJ8fHQuaGFuZGxlRXZlbnQsITEsdC5ifHx0KTtpZighbylicmVhazt0LmFbby5rZXldPW99fWZ1bmN0aW9uIFZnKHQpe052KHQuYSxmdW5jdGlvbih0LGUpe3RoaXMuYS5oYXNPd25Qcm9wZXJ0eShlKSYmY2codCl9LHQpLHQuYT17fX1mdW5jdGlvbiBCZygpe3RoaXMuYT0hMH1mdW5jdGlvbiBLZyh0LGUsbixyKXt0LmluZm8oZnVuY3Rpb24oKXtyZXR1cm5cIlhNTEhUVFAgVEVYVCAoXCIrZStcIik6IFwiK2Z1bmN0aW9uKHQsZSl7aWYoIXQuYSlyZXR1cm4gZTtpZighZSlyZXR1cm4gbnVsbDt0cnl7dmFyIG49SlNPTi5wYXJzZShlKTtpZihuKWZvcih0PTA7dDxuLmxlbmd0aDt0KyspaWYoQXJyYXkuaXNBcnJheShuW3RdKSl7dmFyIHI9blt0XTtpZighKHIubGVuZ3RoPDIpKXt2YXIgaT1yWzFdO2lmKEFycmF5LmlzQXJyYXkoaSkmJiEoaS5sZW5ndGg8MSkpe3I9aVswXTtpZihcIm5vb3BcIiE9ciYmXCJzdG9wXCIhPXImJlwiY2xvc2VcIiE9cilmb3IodmFyIG89MTtvPGkubGVuZ3RoO28rKylpW29dPVwiXCJ9fX1yZXR1cm4gYmcobil9Y2F0Y2godCl7cmV0dXJuIGV9fSh0LG4pKyhyP1wiIFwiK3I6XCJcIil9KX1VZy5wcm90b3R5cGUuRz1mdW5jdGlvbigpe1VnLlguRy5jYWxsKHRoaXMpLFZnKHRoaXMpfSxVZy5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcIkV2ZW50SGFuZGxlci5oYW5kbGVFdmVudCBub3QgaW1wbGVtZW50ZWRcIil9LEJnLnByb3RvdHlwZS5pbmZvPWZ1bmN0aW9uKCl7fTt2YXIgV2c9e30sSGc9bnVsbDtmdW5jdGlvbiBHZygpe3JldHVybiBIZz1IZ3x8bmV3IGdnfWZ1bmN0aW9uIHpnKHQpe1l2LmNhbGwodGhpcyxXZy5GYSx0KX1mdW5jdGlvbiBRZyh0KXt2YXIgZT1HZygpO3lnKGUsbmV3IHpnKGUpKX1mdW5jdGlvbiBZZyh0LGUpe1l2LmNhbGwodGhpcyxXZy5TVEFUX0VWRU5ULHQpLHRoaXMuc3RhdD1lfWZ1bmN0aW9uIFhnKHQpe3ZhciBlPUdnKCk7eWcoZSxuZXcgWWcoZSx0KSl9ZnVuY3Rpb24gSmcodCl7WXYuY2FsbCh0aGlzLFdnLkdhLHQpfWZ1bmN0aW9uICRnKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBFcnJvcihcIkZuIG11c3Qgbm90IGJlIG51bGwgYW5kIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gb3Yuc2V0VGltZW91dChmdW5jdGlvbigpe3QoKX0sZSl9V2cuRmE9XCJzZXJ2ZXJyZWFjaGFiaWxpdHlcIixndih6ZyxZdiksV2cuU1RBVF9FVkVOVD1cInN0YXRldmVudFwiLGd2KFlnLFl2KSxXZy5HYT1cInRpbWluZ2V2ZW50XCIsZ3YoSmcsWXYpO1NuPXtOT19FUlJPUjowLCRhOjEsbmI6MixtYjozLGhiOjQsbGI6NSxvYjo2LERhOjcsVElNRU9VVDo4LHJiOjl9LEc9e2ZiOlwiY29tcGxldGVcIixCYjpcInN1Y2Nlc3NcIixFYTpcImVycm9yXCIsRGE6XCJhYm9ydFwiLHRiOlwicmVhZHlcIix1YjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLHBiOlwiaW5jcmVtZW50YWxkYXRhXCIsc2I6XCJwcm9ncmVzc1wiLGliOlwiZG93bmxvYWRwcm9ncmVzc1wiLEpiOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gWmcoKXt9ZnVuY3Rpb24gdHkodCl7dmFyIGU7cmV0dXJuIGU9IShlPXQuYSk/dC5hPXt9OmV9ZnVuY3Rpb24gZXkoKXt9WmcucHJvdG90eXBlLmE9bnVsbDt6PXtPUEVOOlwiYVwiLGViOlwiYlwiLEVhOlwiY1wiLHFiOlwiZFwifTtmdW5jdGlvbiBueSgpe1l2LmNhbGwodGhpcyxcImRcIil9ZnVuY3Rpb24gcnkoKXtZdi5jYWxsKHRoaXMsXCJjXCIpfWZ1bmN0aW9uIGl5KCl7fWZ1bmN0aW9uIG95KHQsZSxuLHIpe3RoaXMuZz10LHRoaXMuYz1lLHRoaXMuZj1uLHRoaXMuUz1yfHwxLHRoaXMuSj1uZXcgVWcodGhpcyksdGhpcy5QPXN5LHQ9RnY/MTI1OnZvaWQgMCx0aGlzLlI9bmV3IEFnKHQpLHRoaXMuQj1udWxsLHRoaXMuYj0hMSx0aGlzLmo9dGhpcy5sPXRoaXMuaT10aGlzLkg9dGhpcy51PXRoaXMuVD10aGlzLm89bnVsbCx0aGlzLnM9W10sdGhpcy5hPW51bGwsdGhpcy5EPTAsdGhpcy5oPXRoaXMubT1udWxsLHRoaXMuTj0tMSx0aGlzLkE9ITEsdGhpcy5PPTAsdGhpcy5GPW51bGwsdGhpcy5WPXRoaXMuQz10aGlzLlU9dGhpcy5JPSExfWd2KG55LFl2KSxndihyeSxZdiksZ3YoaXksWmcpO3ZhciBheT1uZXcgaXksc3k9NDVlMyx1eT17fSxjeT17fTtmdW5jdGlvbiBoeSh0LGUsbil7dC5IPTEsdC5pPVB5KFN5KGUpKSx0Lmo9bix0Lkk9ITAsbHkodCxudWxsKX1mdW5jdGlvbiBseSh0LGUpe3QudT12digpLHB5KHQpLHQubD1TeSh0LmkpO3ZhciBhLHMsdSxjLGgsbCxuPXQubCxyPXQuUztBcnJheS5pc0FycmF5KHIpfHwocj1bU3RyaW5nKHIpXSksV3kobi5iLFwidFwiLHIpLHQuRD0wLHQuYT1GbSh0LmcsdC5nLkM/ZTpudWxsKSwwPHQuTyYmKHQuRj1uZXcgTGcocHYodC5DYSx0LHQuYSksdC5PKSkscWcodC5KLHQuYSxcInJlYWR5c3RhdGVjaGFuZ2VcIix0LlhhKSxlPXQuQj9Bdih0LkIpOnt9LHQuaj8odC5tfHwodC5tPVwiUE9TVFwiKSxlW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsdC5hLmJhKHQubCx0Lm0sdC5qLGUpKToodC5tPVwiR0VUXCIsdC5hLmJhKHQubCx0Lm0sbnVsbCxlKSksUWcoMSksYT10LmMscz10Lm0sdT10LmwsYz10LmYsaD10LlMsbD10LmosYS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5hKWlmKGwpZm9yKHZhciB0PVwiXCIsZT1sLnNwbGl0KFwiJlwiKSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByLGksbz1lW25dLnNwbGl0KFwiPVwiKTsxPG8ubGVuZ3RoJiYocj1vWzBdLG89b1sxXSx0PTI8PShpPXIuc3BsaXQoXCJfXCIpKS5sZW5ndGgmJlwidHlwZVwiPT1pWzFdP3QrKHIrXCI9XCIpK28rXCImXCI6dCsocitcIj1yZWRhY3RlZCZcIikpfWVsc2UgdD1udWxsO2Vsc2UgdD1sO3JldHVyblwiWE1MSFRUUCBSRVEgKFwiK2MrXCIpIFthdHRlbXB0IFwiK2grXCJdOiBcIitzK1wiXFxuXCIrdStcIlxcblwiK3R9KX1mdW5jdGlvbiBmeSh0LGUsbil7Zm9yKHZhciByLGksbyxhPSEwOyF0LkEmJnQuRDxuLmxlbmd0aDspe3ZhciBzPShzPW4sbz1pPXZvaWQgMCxpPShyPXQpLkQsLTE9PShvPXMuaW5kZXhPZihcIlxcblwiLGkpKT9jeTooaT1OdW1iZXIocy5zdWJzdHJpbmcoaSxvKSksaXNOYU4oaSk/dXk6KG8rPTEpK2k+cy5sZW5ndGg/Y3k6KHM9cy5zdWJzdHIobyxpKSxyLkQ9bytpLHMpKSk7aWYocz09Y3kpezQ9PWUmJih0Lmg9NCxYZygxNCksYT0hMSksS2codC5jLHQuZixudWxsLFwiW0luY29tcGxldGUgUmVzcG9uc2VdXCIpO2JyZWFrfWlmKHM9PXV5KXt0Lmg9NCxYZygxNSksS2codC5jLHQuZixuLFwiW0ludmFsaWQgQ2h1bmtdXCIpLGE9ITE7YnJlYWt9S2codC5jLHQuZixzLG51bGwpLG15KHQscyl9ND09ZSYmMD09bi5sZW5ndGgmJih0Lmg9MSxYZygxNiksYT0hMSksdC5iPXQuYiYmYSxhPzA8bi5sZW5ndGgmJiF0LlYmJih0LlY9ITAsKGU9dC5nKS5hPT10JiZlLlUmJiFlLkYmJihlLmMuaW5mbyhcIkdyZWF0LCBubyBidWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQuIEJ5dGVzIHJlY2VpdmVkOiBcIituLmxlbmd0aCksQW0oZSksZS5GPSEwLFhnKDExKSkpOihLZyh0LmMsdC5mLG4sXCJbSW52YWxpZCBDaHVua2VkIFJlc3BvbnNlXVwiKSx5eSh0KSxneSh0KSl9ZnVuY3Rpb24gcHkodCl7dC5UPXZ2KCkrdC5QLGR5KHQsdC5QKX1mdW5jdGlvbiBkeSh0LGUpe2lmKG51bGwhPXQubyl0aHJvdyBFcnJvcihcIldhdGNoRG9nIHRpbWVyIG5vdCBudWxsXCIpO3Qubz0kZyhwdih0LlZhLHQpLGUpfWZ1bmN0aW9uIHZ5KHQpe3QubyYmKG92LmNsZWFyVGltZW91dCh0Lm8pLHQubz1udWxsKX1mdW5jdGlvbiBneSh0KXswPT10Lmcudnx8dC5BfHxPbSh0LmcsdCl9ZnVuY3Rpb24geXkodCl7dnkodCk7dmFyIGU9dC5GO2UmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuamEmJmUuamEoKSx0LkY9bnVsbCxSZyh0LlIpLFZnKHQuSiksdC5hJiYoZT10LmEsdC5hPW51bGwsZS5hYm9ydCgpLGUuamEoKSl9ZnVuY3Rpb24gbXkodCxlKXt0cnl7dmFyIG4scixpLG8sYSxzPXQuZztpZigwIT1zLnYmJihzLmE9PXR8fEp5KHMuYix0KSkpaWYocy5JPXQuTiwhdC5DJiZKeShzLmIsdCkmJjM9PXMudil7dHJ5e3ZhciB1PXMua2EuYS5wYXJzZShlKX1jYXRjaCh0KXt1PW51bGx9aWYoQXJyYXkuaXNBcnJheSh1KSYmMz09dS5sZW5ndGgpe3ZhciBjPXU7aWYoMD09Y1swXSl7dDppZighcy5qKXtpZihzLmEpe2lmKCEocy5hLnUrM2UzPHQudSkpYnJlYWsgdDtQbShzKSxfbShzKX1ObShzKSxYZygxOCl9fWVsc2Ugcy5vYT1jWzFdLDA8cy5vYS1zLlAmJmNbMl08Mzc1MDAmJnMuSCYmMD09cy5vJiYhcy5tJiYocy5tPSRnKHB2KHMuU2EscyksNmUzKSk7aWYoWHkocy5iKTw9MSYmcy5lYSl7dHJ5e3MuZWEoKX1jYXRjaCh0KXt9cy5lYT12b2lkIDB9fWVsc2UgeG0ocywxMSl9ZWxzZSBpZighdC5DJiZzLmEhPXR8fFBtKHMpLCFJdihlKSlmb3IoZT11PXMua2EuYS5wYXJzZShlKSx1PTA7dTxlLmxlbmd0aDt1KyspYz1lW3VdLHMuUD1jWzBdLGM9Y1sxXSwyPT1zLnY/XCJjXCI9PWNbMF0/KHMuSj1jWzFdLHMuZ2E9Y1syXSxudWxsIT0ocj1jWzNdKSYmKHMuaGE9cixzLmMuaW5mbyhcIlZFUj1cIitzLmhhKSksbnVsbCE9KG89Y1s0XSkmJihzLnBhPW8scy5jLmluZm8oXCJTVkVSPVwiK3MucGEpKSxudWxsIT0ocj1jWzVdKSYmXCJudW1iZXJcIj09dHlwZW9mIHImJjA8ciYmKG49MS41KnIscy5EPW4scy5jLmluZm8oXCJiYWNrQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNfPVwiK24pKSxuPXMsKG89dC5hKSYmKCEocj1vLmE/by5hLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1DbGllbnQtV2lyZS1Qcm90b2NvbFwiKTpudWxsKXx8IShpPW4uYikuYSYmKFN2KHIsXCJzcGR5XCIpfHxTdihyLFwicXVpY1wiKXx8U3YocixcImgyXCIpKSYmKGkuZj1pLmcsaS5hPW5ldyBTZXQsaS5iJiYoJHkoaSxpLmIpLGkuYj1udWxsKSksIW4uQXx8KGE9by5hP28uYS5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1TZXNzaW9uLUlkXCIpOm51bGwpJiYobi5uYT1hLFJ5KG4uQixuLkEsYSkpKSxzLnY9MyxzLmYmJnMuZi50YSgpLHMuVSYmKHMuTj12digpLXQudSxzLmMuaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK3MuTitcIm1zXCIpKSxpPXQsKG49cykubGE9TW0obixuLkM/bi5nYTpudWxsLG4uZmEpLGkuQz8oWnkobi5iLGkpLG89aSwoYT1uLkQpJiZvLnNldFRpbWVvdXQoYSksby5vJiYodnkobykscHkobykpLG4uYT1pKTprbShuKSwwPHMuZy5sZW5ndGgmJlRtKHMpKTpcInN0b3BcIiE9Y1swXSYmXCJjbG9zZVwiIT1jWzBdfHx4bShzLDcpOjM9PXMudiYmKFwic3RvcFwiPT1jWzBdfHxcImNsb3NlXCI9PWNbMF0/XCJzdG9wXCI9PWNbMF0/eG0ocyw3KTpibShzKTpcIm5vb3BcIiE9Y1swXSYmcy5mJiZzLmYuc2EoYykscy5vPTApO1FnKDQpfWNhdGNoKHQpe319ZnVuY3Rpb24gYnkodCxlKXtpZih0LmZvckVhY2gmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZm9yRWFjaCl0LmZvckVhY2goZSx2b2lkIDApO2Vsc2UgaWYoc3YodCl8fFwic3RyaW5nXCI9PXR5cGVvZiB0KWJ2KHQsZSx2b2lkIDApO2Vsc2V7aWYodC5MJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LkwpdmFyIG49dC5MKCk7ZWxzZSBpZih0LksmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuSyluPXZvaWQgMDtlbHNlIGlmKHN2KHQpfHxcInN0cmluZ1wiPT10eXBlb2YgdClmb3IodmFyIG49W10scj10Lmxlbmd0aCxpPTA7aTxyO2krKyluLnB1c2goaSk7ZWxzZSBmb3IoaSBpbiBuPVtdLHI9MCx0KW5bcisrXT1pO2Zvcih2YXIgaT0ocj1mdW5jdGlvbih0KXtpZih0LksmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuSylyZXR1cm4gdC5LKCk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuIHQuc3BsaXQoXCJcIik7aWYoc3YodCkpe2Zvcih2YXIgZT1bXSxuPXQubGVuZ3RoLHI9MDtyPG47cisrKWUucHVzaCh0W3JdKTtyZXR1cm4gZX1mb3IociBpbiBlPVtdLG49MCx0KWVbbisrXT10W3JdO3JldHVybiBlfSh0KSkubGVuZ3RoLG89MDtvPGk7bysrKWUuY2FsbCh2b2lkIDAscltvXSxuJiZuW29dLHQpfX1mdW5jdGlvbiBfeSh0LGUpe3RoaXMuYj17fSx0aGlzLmE9W10sdGhpcy5jPTA7dmFyIG49YXJndW1lbnRzLmxlbmd0aDtpZigxPG4pe2lmKG4lMil0aHJvdyBFcnJvcihcIlVuZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzXCIpO2Zvcih2YXIgcj0wO3I8bjtyKz0yKXRoaXMuc2V0KGFyZ3VtZW50c1tyXSxhcmd1bWVudHNbcisxXSl9ZWxzZSBpZih0KWlmKHQgaW5zdGFuY2VvZiBfeSlmb3Iobj10LkwoKSxyPTA7cjxuLmxlbmd0aDtyKyspdGhpcy5zZXQobltyXSx0LmdldChuW3JdKSk7ZWxzZSBmb3IociBpbiB0KXRoaXMuc2V0KHIsdFtyXSl9ZnVuY3Rpb24gd3kodCl7aWYodC5jIT10LmEubGVuZ3RoKXtmb3IodmFyIGU9MCxuPTA7ZTx0LmEubGVuZ3RoOyl7dmFyIHI9dC5hW2VdO0l5KHQuYixyKSYmKHQuYVtuKytdPXIpLGUrK310LmEubGVuZ3RoPW59aWYodC5jIT10LmEubGVuZ3RoKXtmb3IodmFyIGk9e30sbj1lPTA7ZTx0LmEubGVuZ3RoOylJeShpLHI9dC5hW2VdKXx8KGlbdC5hW24rK109cl09MSksZSsrO3QuYS5sZW5ndGg9bn19ZnVuY3Rpb24gSXkodCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9KFFzPW95LnByb3RvdHlwZSkuc2V0VGltZW91dD1mdW5jdGlvbih0KXt0aGlzLlA9dH0sUXMuWGE9ZnVuY3Rpb24odCl7dD10LnRhcmdldDt2YXIgZT10aGlzLkY7ZSYmMz09dm0odCk/ZS5mKCk6dGhpcy5DYSh0KX0sUXMuQ2E9ZnVuY3Rpb24odCl7dHJ5e2lmKHQ9PXRoaXMuYSl0Ont2YXIgZT12bSh0aGlzLmEpLG49dGhpcy5hLnVhKCkscj10aGlzLmEuVygpO2lmKCEoZTwzfHwzPT1lJiYhRnYmJiF0aGlzLmEuJCgpKSl7dGhpcy5BfHw0IT1lfHw3PT1ufHxRZyg4PT1ufHxyPD0wPzM6MiksdnkodGhpcyk7dmFyIGk9dGhpcy5hLlcoKTt0aGlzLk49aTt2YXIgbz10aGlzLmEuJCgpO2lmKHRoaXMuYj0yMDA9PWkscj10aGlzLmMsdT10aGlzLm0sYz10aGlzLmwsaD10aGlzLmYsbD10aGlzLlMsZj1lLHA9aSxyLmluZm8oZnVuY3Rpb24oKXtyZXR1cm5cIlhNTEhUVFAgUkVTUCAoXCIraCtcIikgWyBhdHRlbXB0IFwiK2wrXCJdOiBcIit1K1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIrcH0pLHRoaXMuYil7aWYodGhpcy5VJiYhdGhpcy5DKXtlOntpZih0aGlzLmEpe3ZhciBhPXRoaXMuYTtpZigoYT1hLmE/YS5hLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIik6bnVsbCkmJiFJdihhKSl7dmFyIHM9YTticmVhayBlfX1zPW51bGx9aWYoIXMpe3RoaXMuYj0hMSx0aGlzLmg9MyxYZygxMikseXkodGhpcyksZ3kodGhpcyk7YnJlYWsgdH1LZyh0aGlzLmMsdGhpcy5mLHMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5DPSEwLG15KHRoaXMscyl9dGhpcy5JPyhmeSh0aGlzLGUsbyksRnYmJnRoaXMuYiYmMz09ZSYmKHFnKHRoaXMuSix0aGlzLlIsXCJ0aWNrXCIsdGhpcy5XYSksdGhpcy5SLnN0YXJ0KCkpKTooS2codGhpcy5jLHRoaXMuZixvLG51bGwpLG15KHRoaXMsbykpLDQ9PWUmJnl5KHRoaXMpLHRoaXMuYiYmIXRoaXMuQSYmKDQ9PWU/T20odGhpcy5nLHRoaXMpOih0aGlzLmI9ITEscHkodGhpcykpKX1lbHNlIDQwMD09aSYmMDxvLmluZGV4T2YoXCJVbmtub3duIFNJRFwiKT8odGhpcy5oPTMsWGcoMTIpKToodGhpcy5oPTAsWGcoMTMpKSx5eSh0aGlzKSxneSh0aGlzKX19fWNhdGNoKHQpe312YXIgdSxjLGgsbCxmLHB9LFFzLldhPWZ1bmN0aW9uKCl7dmFyIHQsZTt0aGlzLmEmJih0PXZtKHRoaXMuYSksZT10aGlzLmEuJCgpLHRoaXMuRDxlLmxlbmd0aCYmKHZ5KHRoaXMpLGZ5KHRoaXMsdCxlKSx0aGlzLmImJjQhPXQmJnB5KHRoaXMpKSl9LFFzLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuQT0hMCx5eSh0aGlzKX0sUXMuVmE9ZnVuY3Rpb24oKXt0aGlzLm89bnVsbDt2YXIgdCxlLG49dnYoKTswPD1uLXRoaXMuVD8odD10aGlzLmMsZT10aGlzLmwsdC5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuXCJUSU1FT1VUOiBcIitlfSksMiE9dGhpcy5IJiYoUWcoMyksWGcoMTcpKSx5eSh0aGlzKSx0aGlzLmg9MixneSh0aGlzKSk6ZHkodGhpcyx0aGlzLlQtbil9LChRcz1feS5wcm90b3R5cGUpLks9ZnVuY3Rpb24oKXt3eSh0aGlzKTtmb3IodmFyIHQ9W10sZT0wO2U8dGhpcy5hLmxlbmd0aDtlKyspdC5wdXNoKHRoaXMuYlt0aGlzLmFbZV1dKTtyZXR1cm4gdH0sUXMuTD1mdW5jdGlvbigpe3JldHVybiB3eSh0aGlzKSx0aGlzLmEuY29uY2F0KCl9LFFzLmdldD1mdW5jdGlvbih0LGUpe3JldHVybiBJeSh0aGlzLmIsdCk/dGhpcy5iW3RdOmV9LFFzLnNldD1mdW5jdGlvbih0LGUpe0l5KHRoaXMuYix0KXx8KHRoaXMuYysrLHRoaXMuYS5wdXNoKHQpKSx0aGlzLmJbdF09ZX0sUXMuZm9yRWFjaD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLkwoKSxyPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl0sbz10aGlzLmdldChpKTt0LmNhbGwoZSxvLGksdGhpcyl9fTt2YXIgVHk9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXlxcXFwvPyNdKilAKT8oW15cXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO2Z1bmN0aW9uIEV5KHQsZSl7dmFyIG47dGhpcy5jPXRoaXMuaj10aGlzLmY9XCJcIix0aGlzLmg9bnVsbCx0aGlzLmk9dGhpcy5nPVwiXCIsdGhpcy5hPSExLHQgaW5zdGFuY2VvZiBFeT8odGhpcy5hPXZvaWQgMCE9PWU/ZTp0LmEsQ3kodGhpcyx0LmYpLHRoaXMuaj10Lmosa3kodGhpcyx0LmMpLE55KHRoaXMsdC5oKSx0aGlzLmc9dC5nLGU9dC5iLChuPW5ldyBxeSkuYz1lLmMsZS5hJiYobi5hPW5ldyBfeShlLmEpLG4uYj1lLmIpLEF5KHRoaXMsbiksdGhpcy5pPXQuaSk6dCYmKG49U3RyaW5nKHQpLm1hdGNoKFR5KSk/KHRoaXMuYT0hIWUsQ3kodGhpcyxuWzFdfHxcIlwiLCEwKSx0aGlzLmo9T3koblsyXXx8XCJcIiksa3kodGhpcyxuWzNdfHxcIlwiLCEwKSxOeSh0aGlzLG5bNF0pLHRoaXMuZz1PeShuWzVdfHxcIlwiLCEwKSxBeSh0aGlzLG5bNl18fFwiXCIsITApLHRoaXMuaT1PeShuWzddfHxcIlwiKSk6KHRoaXMuYT0hIWUsdGhpcy5iPW5ldyBxeShudWxsLHRoaXMuYSkpfWZ1bmN0aW9uIFN5KHQpe3JldHVybiBuZXcgRXkodCl9ZnVuY3Rpb24gQ3kodCxlLG4pe3QuZj1uP095KGUsITApOmUsdC5mJiYodC5mPXQuZi5yZXBsYWNlKC86JC8sXCJcIikpfWZ1bmN0aW9uIGt5KHQsZSxuKXt0LmM9bj9PeShlLCEwKTplfWZ1bmN0aW9uIE55KHQsZSl7aWYoZSl7aWYoZT1OdW1iZXIoZSksaXNOYU4oZSl8fGU8MCl0aHJvdyBFcnJvcihcIkJhZCBwb3J0IG51bWJlciBcIitlKTt0Lmg9ZX1lbHNlIHQuaD1udWxsfWZ1bmN0aW9uIEF5KHQsZSxuKXt2YXIgcixpO2UgaW5zdGFuY2VvZiBxeT8odC5iPWUscj10LmIsKGk9dC5hKSYmIXIuZiYmKFZ5KHIpLHIuYz1udWxsLHIuYS5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS50b0xvd2VyQ2FzZSgpO2UhPW4mJihCeSh0aGlzLGUpLFd5KHRoaXMsbix0KSl9LHIpKSxyLmY9aSk6KG58fChlPUR5KGUsVXkpKSx0LmI9bmV3IHF5KGUsdC5hKSl9ZnVuY3Rpb24gUnkodCxlLG4pe3QuYi5zZXQoZSxuKX1mdW5jdGlvbiBQeSh0KXtyZXR1cm4gUnkodCxcInp4XCIsTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KStNYXRoLmFicyhNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSlednYoKSkudG9TdHJpbmcoMzYpKSx0fWZ1bmN0aW9uIE95KHQsZSl7cmV0dXJuIHQ/ZT9kZWNvZGVVUkkodC5yZXBsYWNlKC8lMjUvZyxcIiUyNTI1XCIpKTpkZWNvZGVVUklDb21wb25lbnQodCk6XCJcIn1mdW5jdGlvbiBEeSh0LGUsbil7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/KHQ9ZW5jb2RlVVJJKHQpLnJlcGxhY2UoZSx4eSksdD1uP3QucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpOnQpOm51bGx9ZnVuY3Rpb24geHkodCl7cmV0dXJuXCIlXCIrKCh0PXQuY2hhckNvZGVBdCgwKSk+PjQmMTUpLnRvU3RyaW5nKDE2KSsoMTUmdCkudG9TdHJpbmcoMTYpfUV5LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdLGU9dGhpcy5mO2UmJnQucHVzaChEeShlLEx5LCEwKSxcIjpcIik7dmFyIG49dGhpcy5jO3JldHVybiFuJiZcImZpbGVcIiE9ZXx8KHQucHVzaChcIi8vXCIpLChlPXRoaXMuaikmJnQucHVzaChEeShlLEx5LCEwKSxcIkBcIiksdC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcobikpLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksbnVsbCE9KG49dGhpcy5oKSYmdC5wdXNoKFwiOlwiLFN0cmluZyhuKSkpLChuPXRoaXMuZykmJih0aGlzLmMmJlwiL1wiIT1uLmNoYXJBdCgwKSYmdC5wdXNoKFwiL1wiKSx0LnB1c2goRHkobixcIi9cIj09bi5jaGFyQXQoMCk/Rnk6TXksITApKSksKG49dGhpcy5iLnRvU3RyaW5nKCkpJiZ0LnB1c2goXCI/XCIsbiksKG49dGhpcy5pKSYmdC5wdXNoKFwiI1wiLER5KG4sankpKSx0LmpvaW4oXCJcIil9O3ZhciBMeT0vWyNcXC9cXD9AXS9nLE15PS9bI1xcPzpdL2csRnk9L1sjXFw/XS9nLFV5PS9bI1xcP0BdL2csank9LyMvZztmdW5jdGlvbiBxeSh0LGUpe3RoaXMuYj10aGlzLmE9bnVsbCx0aGlzLmM9dHx8bnVsbCx0aGlzLmY9ISFlfWZ1bmN0aW9uIFZ5KG4pe24uYXx8KG4uYT1uZXcgX3ksbi5iPTAsbi5jJiZmdW5jdGlvbih0LGUpe2lmKHQpe3Q9dC5zcGxpdChcIiZcIik7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByLGk9dFtuXS5pbmRleE9mKFwiPVwiKSxvPW51bGw7MDw9aT8ocj10W25dLnN1YnN0cmluZygwLGkpLG89dFtuXS5zdWJzdHJpbmcoaSsxKSk6cj10W25dLGUocixvP2RlY29kZVVSSUNvbXBvbmVudChvLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIil9fX0obi5jLGZ1bmN0aW9uKHQsZSl7bi5hZGQoZGVjb2RlVVJJQ29tcG9uZW50KHQucmVwbGFjZSgvXFwrL2csXCIgXCIpKSxlKX0pKX1mdW5jdGlvbiBCeSh0LGUpe1Z5KHQpLGU9SHkodCxlKSxJeSh0LmEuYixlKSYmKHQuYz1udWxsLHQuYi09dC5hLmdldChlKS5sZW5ndGgsSXkoKHQ9dC5hKS5iLGUpJiYoZGVsZXRlIHQuYltlXSx0LmMtLSx0LmEubGVuZ3RoPjIqdC5jJiZ3eSh0KSkpfWZ1bmN0aW9uIEt5KHQsZSl7cmV0dXJuIFZ5KHQpLGU9SHkodCxlKSxJeSh0LmEuYixlKX1mdW5jdGlvbiBXeSh0LGUsbil7QnkodCxlKSwwPG4ubGVuZ3RoJiYodC5jPW51bGwsdC5hLnNldChIeSh0LGUpLHd2KG4pKSx0LmIrPW4ubGVuZ3RoKX1mdW5jdGlvbiBIeSh0LGUpe3JldHVybiBlPVN0cmluZyhlKSxlPXQuZj9lLnRvTG93ZXJDYXNlKCk6ZX0oUXM9cXkucHJvdG90eXBlKS5hZGQ9ZnVuY3Rpb24odCxlKXtWeSh0aGlzKSx0aGlzLmM9bnVsbCx0PUh5KHRoaXMsdCk7dmFyIG49dGhpcy5hLmdldCh0KTtyZXR1cm4gbnx8dGhpcy5hLnNldCh0LG49W10pLG4ucHVzaChlKSx0aGlzLmIrPTEsdGhpc30sUXMuZm9yRWFjaD1mdW5jdGlvbihuLHIpe1Z5KHRoaXMpLHRoaXMuYS5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7YnYodCxmdW5jdGlvbih0KXtuLmNhbGwocix0LGUsdGhpcyl9LHRoaXMpfSx0aGlzKX0sUXMuTD1mdW5jdGlvbigpe1Z5KHRoaXMpO2Zvcih2YXIgdD10aGlzLmEuSygpLGU9dGhpcy5hLkwoKSxuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKylmb3IodmFyIGk9dFtyXSxvPTA7bzxpLmxlbmd0aDtvKyspbi5wdXNoKGVbcl0pO3JldHVybiBufSxRcy5LPWZ1bmN0aW9uKHQpe1Z5KHRoaXMpO3ZhciBlPVtdO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KUt5KHRoaXMsdCkmJihlPV92KGUsdGhpcy5hLmdldChIeSh0aGlzLHQpKSkpO2Vsc2V7dD10aGlzLmEuSygpO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWU9X3YoZSx0W25dKX1yZXR1cm4gZX0sUXMuc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFZ5KHRoaXMpLHRoaXMuYz1udWxsLEt5KHRoaXMsdD1IeSh0aGlzLHQpKSYmKHRoaXMuYi09dGhpcy5hLmdldCh0KS5sZW5ndGgpLHRoaXMuYS5zZXQodCxbZV0pLHRoaXMuYis9MSx0aGlzfSxRcy5nZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmMDwodD10aGlzLksodCkpLmxlbmd0aD9TdHJpbmcodFswXSk6ZX0sUXMudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmMpcmV0dXJuIHRoaXMuYztpZighdGhpcy5hKXJldHVyblwiXCI7Zm9yKHZhciB0PVtdLGU9dGhpcy5hLkwoKSxuPTA7bjxlLmxlbmd0aDtuKyspZm9yKHZhciByPWVbbl0saT1lbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHIpKSxyPXRoaXMuSyhyKSxvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBhPWk7XCJcIiE9PXJbb10mJihhKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJbb10pKSksdC5wdXNoKGEpfXJldHVybiB0aGlzLmM9dC5qb2luKFwiJlwiKX07dmFyIEd5PWZ1bmN0aW9uKHQsZSl7dGhpcy5iPXQsdGhpcy5hPWV9O2Z1bmN0aW9uIHp5KHQpe3RoaXMuZz10fHxReSx0PW92LlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZz8wPCh0PW92LnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpKS5sZW5ndGgmJihcImhxXCI9PXRbMF0ubmV4dEhvcFByb3RvY29sfHxcImgyXCI9PXRbMF0ubmV4dEhvcFByb3RvY29sKTohIShvdi5pYSYmb3YuaWEueWEmJm92LmlhLnlhKCkmJm92LmlhLnlhKCkuTGIpLHRoaXMuZj10P3RoaXMuZzoxLHRoaXMuYT1udWxsLDE8dGhpcy5mJiYodGhpcy5hPW5ldyBTZXQpLHRoaXMuYj1udWxsLHRoaXMuYz1bXX12YXIgUXk9MTA7ZnVuY3Rpb24gWXkodCl7cmV0dXJuIHQuYnx8dC5hJiZ0LmEuc2l6ZT49dC5mfWZ1bmN0aW9uIFh5KHQpe3JldHVybiB0LmI/MTp0LmE/dC5hLnNpemU6MH1mdW5jdGlvbiBKeSh0LGUpe3JldHVybiB0LmI/dC5iPT1lOnQuYSYmdC5hLmhhcyhlKX1mdW5jdGlvbiAkeSh0LGUpe3QuYT90LmEuYWRkKGUpOnQuYj1lfWZ1bmN0aW9uIFp5KHQsZSl7dC5iJiZ0LmI9PWU/dC5iPW51bGw6dC5hJiZ0LmEuaGFzKGUpJiZ0LmEuZGVsZXRlKGUpfWZ1bmN0aW9uIHRtKHQpe3ZhciBlLG47aWYobnVsbCE9dC5iKXJldHVybiB0LmMuY29uY2F0KHQuYi5zKTtpZihudWxsPT10LmF8fDA9PT10LmEuc2l6ZSlyZXR1cm4gd3YodC5jKTt2YXIgcj10LmM7dHJ5e2Zvcih2YXIgaT1ydih0LmEudmFsdWVzKCkpLG89aS5uZXh0KCk7IW8uZG9uZTtvPWkubmV4dCgpKXZhciBhPW8udmFsdWUscj1yLmNvbmNhdChhLnMpfWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJihuPWkucmV0dXJuKSYmbi5jYWxsKGkpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX1yZXR1cm4gcn1mdW5jdGlvbiBlbSgpe31mdW5jdGlvbiBubSgpe3RoaXMuYT1uZXcgZW19ZnVuY3Rpb24gcm0odCxlLG4scixpKXt0cnl7ZS5vbmxvYWQ9bnVsbCxlLm9uZXJyb3I9bnVsbCxlLm9uYWJvcnQ9bnVsbCxlLm9udGltZW91dD1udWxsLGkocil9Y2F0Y2godCl7fX16eS5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dmFyIGUsdDtpZih0aGlzLmM9dG0odGhpcyksdGhpcy5iKXRoaXMuYi5jYW5jZWwoKSx0aGlzLmI9bnVsbDtlbHNlIGlmKHRoaXMuYSYmMCE9PXRoaXMuYS5zaXplKXt0cnl7Zm9yKHZhciBuPXJ2KHRoaXMuYS52YWx1ZXMoKSkscj1uLm5leHQoKTshci5kb25lO3I9bi5uZXh0KCkpci52YWx1ZS5jYW5jZWwoKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtyJiYhci5kb25lJiYodD1uLnJldHVybikmJnQuY2FsbChuKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5hLmNsZWFyKCl9fSxlbS5wcm90b3R5cGUuc3RyaW5naWZ5PWZ1bmN0aW9uKHQpe3JldHVybiBvdi5KU09OLnN0cmluZ2lmeSh0LHZvaWQgMCl9LGVtLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXtyZXR1cm4gb3YuSlNPTi5wYXJzZSh0LHZvaWQgMCl9O3ZhciBpbT1vdi5KU09OLnBhcnNlO2Z1bmN0aW9uIG9tKHQpe2dnLmNhbGwodGhpcyksdGhpcy5oZWFkZXJzPW5ldyBfeSx0aGlzLkg9dHx8bnVsbCx0aGlzLmI9ITEsdGhpcy5zPXRoaXMuYT1udWxsLHRoaXMuQj1cIlwiLHRoaXMuaD0wLHRoaXMuZj1cIlwiLHRoaXMuZz10aGlzLkE9dGhpcy5sPXRoaXMudT0hMSx0aGlzLm89MCx0aGlzLm09bnVsbCx0aGlzLkk9YW0sdGhpcy5EPXRoaXMuRj0hMX1ndihvbSxnZyk7dmFyIGFtPVwiXCIsc209L15odHRwcz8kL2ksdW09W1wiUE9TVFwiLFwiUFVUXCJdO2Z1bmN0aW9uIGNtKHQpe3JldHVyblwiY29udGVudC10eXBlXCI9PXQudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBobSh0LGUpe3QuYj0hMSx0LmEmJih0Lmc9ITAsdC5hLmFib3J0KCksdC5nPSExKSx0LmY9ZSx0Lmg9NSxsbSh0KSxwbSh0KX1mdW5jdGlvbiBsbSh0KXt0LnV8fCh0LnU9ITAseWcodCxcImNvbXBsZXRlXCIpLHlnKHQsXCJlcnJvclwiKSl9ZnVuY3Rpb24gZm0odCl7aWYodC5iJiZ2b2lkIDAhPT1pdiYmKCF0LnNbMV18fDQhPXZtKHQpfHwyIT10LlcoKSkpaWYodC5sJiY0PT12bSh0KSlQZyh0LnphLDAsdCk7ZWxzZSBpZih5Zyh0LFwicmVhZHlzdGF0ZWNoYW5nZVwiKSw0PT12bSh0KSl7dC5iPSExO3RyeXt2YXIgZSxuLHIsaSxvPXQuVygpO3Q6c3dpdGNoKG8pe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYT0hMDticmVhayB0O2RlZmF1bHQ6YT0hMX0oZT1hKXx8KChuPTA9PT1vKSYmKCEoaT1TdHJpbmcodC5CKS5tYXRjaChUeSlbMV18fG51bGwpJiZvdi5zZWxmJiZvdi5zZWxmLmxvY2F0aW9uJiYoaT0ocj1vdi5zZWxmLmxvY2F0aW9uLnByb3RvY29sKS5zdWJzdHIoMCxyLmxlbmd0aC0xKSksbj0hc20udGVzdChpP2kudG9Mb3dlckNhc2UoKTpcIlwiKSksZT1uKTtpZihlKXlnKHQsXCJjb21wbGV0ZVwiKSx5Zyh0LFwic3VjY2Vzc1wiKTtlbHNle3QuaD02O3RyeXt2YXIgcz0yPHZtKHQpP3QuYS5zdGF0dXNUZXh0OlwiXCJ9Y2F0Y2gobyl7cz1cIlwifXQuZj1zK1wiIFtcIit0LlcoKStcIl1cIixsbSh0KX19ZmluYWxseXtwbSh0KX19fWZ1bmN0aW9uIHBtKHQsZSl7aWYodC5hKXtkbSh0KTt2YXIgbj10LmEscj10LnNbMF0/YXY6bnVsbDt0LmE9bnVsbCx0LnM9bnVsbCxlfHx5Zyh0LFwicmVhZHlcIik7dHJ5e24ub25yZWFkeXN0YXRlY2hhbmdlPXJ9Y2F0Y2godCl7fX19ZnVuY3Rpb24gZG0odCl7dC5hJiZ0LkQmJih0LmEub250aW1lb3V0PW51bGwpLHQubSYmKG92LmNsZWFyVGltZW91dCh0Lm0pLHQubT1udWxsKX1mdW5jdGlvbiB2bSh0KXtyZXR1cm4gdC5hP3QuYS5yZWFkeVN0YXRlOjB9ZnVuY3Rpb24gZ20odCxlLG4pe3Q6e2ZvcihyIGluIG4pe3ZhciByPSExO2JyZWFrIHR9cj0hMH12YXIgaTtyfHwoaT1cIlwiLE52KG4sZnVuY3Rpb24odCxlKXtpKz1lLGkrPVwiOlwiLGkrPXQsaSs9XCJcXHJcXG5cIn0pLG49aSxcInN0cmluZ1wiPT10eXBlb2YgdD9udWxsIT1uJiZlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKG4pKTpSeSh0LGUsbikpfWZ1bmN0aW9uIHltKHQsZSxuKXtyZXR1cm4gbiYmbi5pbnRlcm5hbENoYW5uZWxQYXJhbXMmJm4uaW50ZXJuYWxDaGFubmVsUGFyYW1zW3RdfHxlfWZ1bmN0aW9uIG1tKHQpe3RoaXMucGE9MCx0aGlzLmc9W10sdGhpcy5jPW5ldyBCZyx0aGlzLmdhPXRoaXMubGE9dGhpcy5CPXRoaXMuZmE9dGhpcy5hPXRoaXMubmE9dGhpcy5BPXRoaXMuVj10aGlzLmk9dGhpcy5PPXRoaXMubD1udWxsLHRoaXMuT2E9dGhpcy5SPTAsdGhpcy5MYT15bShcImZhaWxGYXN0XCIsITEsdCksdGhpcy5IPXRoaXMubT10aGlzLmo9dGhpcy5oPXRoaXMuZj1udWxsLHRoaXMuUz0hMCx0aGlzLkk9dGhpcy5vYT10aGlzLlA9LTEsdGhpcy5UPXRoaXMubz10aGlzLnU9MCx0aGlzLkhhPXltKFwiYmFzZVJldHJ5RGVsYXlNc1wiLDVlMyx0KSx0aGlzLlJhPXltKFwicmV0cnlEZWxheVNlZWRNc1wiLDFlNCx0KSx0aGlzLk1hPXltKFwiZm9yd2FyZENoYW5uZWxNYXhSZXRyaWVzXCIsMix0KSx0aGlzLm1hPXltKFwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsMmU0LHQpLHRoaXMuTmE9dCYmdC5nfHx2b2lkIDAsdGhpcy5EPXZvaWQgMCx0aGlzLkM9dCYmdC5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMSx0aGlzLko9XCJcIix0aGlzLmI9bmV3IHp5KHQmJnQuY29uY3VycmVudFJlcXVlc3RMaW1pdCksdGhpcy5rYT1uZXcgbm0sdGhpcy5kYT10JiZ0LmZhc3RIYW5kc2hha2V8fCExLHRoaXMuSWE9dCYmdC5ifHwhMSx0JiZ0LmYmJih0aGlzLmMuYT0hMSksdCYmdC5mb3JjZUxvbmdQb2xsaW5nJiYodGhpcy5TPSExKSx0aGlzLlU9IXRoaXMuZGEmJnRoaXMuUyYmdCYmdC5kZXRlY3RCdWZmZXJpbmdQcm94eXx8ITEsdGhpcy5lYT12b2lkIDAsdGhpcy5OPTAsdGhpcy5GPSExLHRoaXMucz1udWxsLCh0aGlzLkthPXQmJnQuY3x8ITEpJiZ0aGlzLmMuaW5mbyhcIk9wdC1pbiB0byBlbmFibGUgQ2hyb21lIE9yaWdpbiBUcmlhbHMuXCIpfWZ1bmN0aW9uIGJtKHQpe3ZhciBlLG47d20odCksMz09dC52JiYoZT10LlIrKyxSeShuPVN5KHQuQiksXCJTSURcIix0LkopLFJ5KG4sXCJSSURcIixlKSxSeShuLFwiVFlQRVwiLFwidGVybWluYXRlXCIpLFNtKHQsbiksKGU9bmV3IG95KHQsdC5jLGUsdm9pZCAwKSkuSD0yLGUuaT1QeShTeShuKSksbj0hMSwhKG49b3YubmF2aWdhdG9yJiZvdi5uYXZpZ2F0b3Iuc2VuZEJlYWNvbj9vdi5uYXZpZ2F0b3Iuc2VuZEJlYWNvbihlLmkudG9TdHJpbmcoKSxcIlwiKTpuKSYmb3YuSW1hZ2UmJigobmV3IEltYWdlKS5zcmM9ZS5pLG49ITApLG58fChlLmE9Rm0oZS5nLG51bGwpLGUuYS5iYShlLmkpKSxlLnU9dnYoKSxweShlKSksTG0odCl9ZnVuY3Rpb24gX20odCl7dC5hJiYoQW0odCksdC5hLmNhbmNlbCgpLHQuYT1udWxsKX1mdW5jdGlvbiB3bSh0KXtfbSh0KSx0LmomJihvdi5jbGVhclRpbWVvdXQodC5qKSx0Lmo9bnVsbCksUG0odCksdC5iLmNhbmNlbCgpLHQuaCYmKFwibnVtYmVyXCI9PXR5cGVvZiB0LmgmJm92LmNsZWFyVGltZW91dCh0LmgpLHQuaD1udWxsKX1mdW5jdGlvbiBJbSh0LGUpe3QuZy5wdXNoKG5ldyBHeSh0Lk9hKyssZSkpLDM9PXQudiYmVG0odCl9ZnVuY3Rpb24gVG0odCl7WXkodC5iKXx8dC5ofHwodC5oPSEwLFNnKHQuQmEsdCksdC51PTApfWZ1bmN0aW9uIEVtKHQsZSl7dmFyIG49ZT9lLmY6dC5SKysscj1TeSh0LkIpO1J5KHIsXCJTSURcIix0LkopLFJ5KHIsXCJSSURcIixuKSxSeShyLFwiQUlEXCIsdC5QKSxTbSh0LHIpLHQuaSYmdC5sJiZnbShyLHQuaSx0LmwpLG49bmV3IG95KHQsdC5jLG4sdC51KzEpLG51bGw9PT10LmkmJihuLkI9dC5sKSxlJiYodC5nPWUucy5jb25jYXQodC5nKSksZT1DbSh0LG4sMWUzKSxuLnNldFRpbWVvdXQoTWF0aC5yb3VuZCguNSp0Lm1hKStNYXRoLnJvdW5kKC41KnQubWEqTWF0aC5yYW5kb20oKSkpLCR5KHQuYixuKSxoeShuLHIsZSl9ZnVuY3Rpb24gU20odCxuKXt0LmYmJmJ5KHt9LGZ1bmN0aW9uKHQsZSl7UnkobixlLHQpfSl9ZnVuY3Rpb24gQ20odCxlLG4pe249TWF0aC5taW4odC5nLmxlbmd0aCxuKTt2YXIgcj10LmY/cHYodC5mLkphLHQuZix0KTpudWxsO3Q6Zm9yKHZhciBpPXQuZyxvPS0xOzspe3ZhciBhPVtcImNvdW50PVwiK25dOy0xPT1vPzA8bj8obz1pWzBdLmIsYS5wdXNoKFwib2ZzPVwiK28pKTpvPTA6YS5wdXNoKFwib2ZzPVwiK28pO2Zvcih2YXIgcz0hMCx1PTA7dTxuO3UrKyl7dmFyIGM9aVt1XS5iLGg9aVt1XS5hO2lmKChjLT1vKTwwKW89TWF0aC5tYXgoMCxpW3VdLmItMTAwKSxzPSExO2Vsc2UgdHJ5eyFmdW5jdGlvbih0LHIsZSl7dmFyIGk9ZXx8XCJcIjt0cnl7YnkodCxmdW5jdGlvbih0LGUpe3ZhciBuPXQ7dXYodCkmJihuPWJnKHQpKSxyLnB1c2goaStlK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChuKSl9KX1jYXRjaCh0KXt0aHJvdyByLnB1c2goaStcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksdH19KGgsYSxcInJlcVwiK2MrXCJfXCIpfWNhdGNoKHQpe3ImJnIoaCl9fWlmKHMpe3I9YS5qb2luKFwiJlwiKTticmVhayB0fX1yZXR1cm4gdD10Lmcuc3BsaWNlKDAsbiksZS5zPXQscn1mdW5jdGlvbiBrbSh0KXt0LmF8fHQuanx8KHQuVD0xLFNnKHQuQWEsdCksdC5vPTApfWZ1bmN0aW9uIE5tKHQpe3JldHVybiEodC5hfHx0Lmp8fDM8PXQubykmJih0LlQrKyx0Lmo9JGcocHYodC5BYSx0KSxEbSh0LHQubykpLHQubysrLDEpfWZ1bmN0aW9uIEFtKHQpe251bGwhPXQucyYmKG92LmNsZWFyVGltZW91dCh0LnMpLHQucz1udWxsKX1mdW5jdGlvbiBSbSh0KXt0LmE9bmV3IG95KHQsdC5jLFwicnBjXCIsdC5UKSxudWxsPT09dC5pJiYodC5hLkI9dC5sKSx0LmEuTz0wO3ZhciBlPVN5KHQubGEpO1J5KGUsXCJSSURcIixcInJwY1wiKSxSeShlLFwiU0lEXCIsdC5KKSxSeShlLFwiQ0lcIix0Lkg/XCIwXCI6XCIxXCIpLFJ5KGUsXCJBSURcIix0LlApLFNtKHQsZSksUnkoZSxcIlRZUEVcIixcInhtbGh0dHBcIiksdC5pJiZ0LmwmJmdtKGUsdC5pLHQubCksdC5EJiZ0LmEuc2V0VGltZW91dCh0LkQpO3ZhciBuPXQuYTt0PXQuZ2Esbi5IPTEsbi5pPVB5KFN5KGUpKSxuLmo9bnVsbCxuLkk9ITAsbHkobix0KX1mdW5jdGlvbiBQbSh0KXtudWxsIT10Lm0mJihvdi5jbGVhclRpbWVvdXQodC5tKSx0Lm09bnVsbCl9ZnVuY3Rpb24gT20odCxlKXt2YXIgbixyLGksbz1udWxsO2lmKHQuYT09ZSl7UG0odCksQW0odCksdC5hPW51bGw7dmFyIGE9Mn1lbHNle2lmKCFKeSh0LmIsZSkpcmV0dXJuO289ZS5zLFp5KHQuYixlKSxhPTF9aWYodC5JPWUuTiwwIT10LnYpaWYoZS5iKTE9PWE/KG89ZS5qP2Uuai5sZW5ndGg6MCxlPXZ2KCktZS51LG49dC51LHlnKGE9R2coKSxuZXcgSmcoYSkpLFRtKHQpKTprbSh0KTtlbHNlIGlmKDM9PShuPWUuaCl8fDA9PW4mJjA8dC5JfHwoMSE9YXx8KGk9ZSxYeSgocj10KS5iKT49ci5iLmYtKHIuaD8xOjApfHwoci5oPyhyLmc9aS5zLmNvbmNhdChyLmcpLDApOjE9PXIudnx8Mj09ci52fHxyLnU+PShyLkxhPzA6ci5NYSl8fChyLmg9JGcocHYoci5CYSxyLGkpLERtKHIsci51KSksci51KyssMCkpKSkmJigyIT1hfHwhTm0odCkpKXN3aXRjaChvJiYwPG8ubGVuZ3RoJiYoZT10LmIsZS5jPWUuYy5jb25jYXQobykpLG4pe2Nhc2UgMTp4bSh0LDUpO2JyZWFrO2Nhc2UgNDp4bSh0LDEwKTticmVhaztjYXNlIDM6eG0odCw2KTticmVhaztkZWZhdWx0OnhtKHQsMil9fWZ1bmN0aW9uIERtKHQsZSl7dmFyIG49dC5IYStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqdC5SYSk7cmV0dXJuIHQuZnx8KG4qPTIpLG4qZX1mdW5jdGlvbiB4bSh0LGUpe3ZhciBuLHIsaSxvO3QuYy5pbmZvKFwiRXJyb3IgY29kZSBcIitlKSwyPT1lPyhyPW51bGwsdC5mJiYocj1udWxsKSxvPXB2KHQuWWEsdCkscnx8KHI9bmV3IEV5KFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLG92LmxvY2F0aW9uJiZcImh0dHBcIj09b3YubG9jYXRpb24ucHJvdG9jb2x8fEN5KHIsXCJodHRwc1wiKSxQeShyKSksbj1yLnRvU3RyaW5nKCkscj1vLG89bmV3IEJnLG92LkltYWdlPygoaT1uZXcgSW1hZ2UpLm9ubG9hZD1kdihybSxvLGksXCJUZXN0TG9hZEltYWdlOiBsb2FkZWRcIiwhMCxyKSxpLm9uZXJyb3I9ZHYocm0sbyxpLFwiVGVzdExvYWRJbWFnZTogZXJyb3JcIiwhMSxyKSxpLm9uYWJvcnQ9ZHYocm0sbyxpLFwiVGVzdExvYWRJbWFnZTogYWJvcnRcIiwhMSxyKSxpLm9udGltZW91dD1kdihybSxvLGksXCJUZXN0TG9hZEltYWdlOiB0aW1lb3V0XCIsITEsciksb3Yuc2V0VGltZW91dChmdW5jdGlvbigpe2kub250aW1lb3V0JiZpLm9udGltZW91dCgpfSwxZTQpLGkuc3JjPW4pOnIoITEpKTpYZygyKSx0LnY9MCx0LmYmJnQuZi5yYShlKSxMbSh0KSx3bSh0KX1mdW5jdGlvbiBMbSh0KXt0LnY9MCx0Lkk9LTEsdC5mJiYoMD09dG0odC5iKS5sZW5ndGgmJjA9PXQuZy5sZW5ndGh8fCh0LmIuYy5sZW5ndGg9MCx3dih0LmcpLHQuZy5sZW5ndGg9MCksdC5mLnFhKCkpfWZ1bmN0aW9uIE1tKHQsZSxuKXt2YXIgcixpLG8sYSxzLHU9KGE9bilpbnN0YW5jZW9mIEV5P1N5KGEpOm5ldyBFeShhLHZvaWQgMCk7cmV0dXJuXCJcIiE9dS5jPyhlJiZreSh1LGUrXCIuXCIrdS5jKSxOeSh1LHUuaCkpOihzPW92LmxvY2F0aW9uLHI9cy5wcm90b2NvbCxpPWU/ZStcIi5cIitzLmhvc3RuYW1lOnMuaG9zdG5hbWUsbz0rcy5wb3J0LGE9bixzPW5ldyBFeShudWxsLHZvaWQgMCksciYmQ3kocyxyKSxpJiZreShzLGkpLG8mJk55KHMsbyksYSYmKHMuZz1hKSx1PXMpLHQuViYmTnYodC5WLGZ1bmN0aW9uKHQsZSl7UnkodSxlLHQpfSksZT10LkEsbj10Lm5hLGUmJm4mJlJ5KHUsZSxuKSxSeSh1LFwiVkVSXCIsdC5oYSksU20odCx1KSx1fWZ1bmN0aW9uIEZtKHQsZSl7aWYoZSYmIXQuQyl0aHJvdyBFcnJvcihcIkNhbid0IGNyZWF0ZSBzZWNvbmRhcnkgZG9tYWluIGNhcGFibGUgWGhySW8gb2JqZWN0LlwiKTtyZXR1cm4oZT1uZXcgb20odC5OYSkpLkY9dC5DLGV9ZnVuY3Rpb24gVW0oKXt9ZnVuY3Rpb24gam0oKXtpZihMdiYmISgxMDw9TnVtYmVyKEh2KSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKX1mdW5jdGlvbiBxbSh0LGUpe2dnLmNhbGwodGhpcyksdGhpcy5hPW5ldyBtbShlKSx0aGlzLm89dCx0aGlzLmI9ZSYmZS5tZXNzYWdlVXJsUGFyYW1zfHxudWxsLHQ9ZSYmZS5tZXNzYWdlSGVhZGVyc3x8bnVsbCxlJiZlLmNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQmJih0P3RbXCJYLUNsaWVudC1Qcm90b2NvbFwiXT1cIndlYmNoYW5uZWxcIjp0PXtcIlgtQ2xpZW50LVByb3RvY29sXCI6XCJ3ZWJjaGFubmVsXCJ9KSx0aGlzLmEubD10LHQ9ZSYmZS5pbml0TWVzc2FnZUhlYWRlcnN8fG51bGwsZSYmZS5tZXNzYWdlQ29udGVudFR5cGUmJih0P3RbXCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCJdPWUubWVzc2FnZUNvbnRlbnRUeXBlOnQ9e1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiOmUubWVzc2FnZUNvbnRlbnRUeXBlfSksZSYmZS5hJiYodD90W1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCJdPWUuYTp0PXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmUuYX0pLHRoaXMuYS5PPXQsKHQ9ZSYmZS5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtKSYmIUl2KHQpJiYodGhpcy5hLmk9dCksdGhpcy5tPWUmJmUuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITEsdGhpcy5sPWUmJmUuc2VuZFJhd0pzb258fCExLChlPWUmJmUuaHR0cFNlc3Npb25JZFBhcmFtKSYmIUl2KGUpJiYodGhpcy5hLkE9ZSxudWxsIT09KHQ9dGhpcy5iKSYmZSBpbiB0JiYoZSBpbih0PXRoaXMuYikmJmRlbGV0ZSB0W2VdKSksdGhpcy5mPW5ldyBLbSh0aGlzKX1mdW5jdGlvbiBWbSh0KXtueS5jYWxsKHRoaXMpO3ZhciBlPXQuX19zbV9fO2lmKGUpe3Q6e2Zvcih2YXIgbiBpbiBlKXt0PW47YnJlYWsgdH10PXZvaWQgMH0odGhpcy5jPXQpPyh0PXRoaXMuYyx0aGlzLmRhdGE9bnVsbCE9PWUmJnQgaW4gZT9lW3RdOnZvaWQgMCk6dGhpcy5kYXRhPWV9ZWxzZSB0aGlzLmRhdGE9dH1mdW5jdGlvbiBCbSgpe3J5LmNhbGwodGhpcyksdGhpcy5zdGF0dXM9MX1mdW5jdGlvbiBLbSh0KXt0aGlzLmE9dH0oUXM9b20ucHJvdG90eXBlKS5iYT1mdW5jdGlvbih0LGUsbixyKXtpZih0aGlzLmEpdGhyb3cgRXJyb3IoXCJbZ29vZy5uZXQuWGhySW9dIE9iamVjdCBpcyBhY3RpdmUgd2l0aCBhbm90aGVyIHJlcXVlc3Q9XCIrdGhpcy5CK1wiOyBuZXdVcmk9XCIrdCk7ZT1lP2UudG9VcHBlckNhc2UoKTpcIkdFVFwiLHRoaXMuQj10LHRoaXMuZj1cIlwiLHRoaXMuaD0wLHRoaXMudT0hMSx0aGlzLmI9ITAsdGhpcy5hPW5ldyBYTUxIdHRwUmVxdWVzdCx0aGlzLnM9dGhpcy5IP3R5KHRoaXMuSCk6dHkoYXkpLHRoaXMuYS5vbnJlYWR5c3RhdGVjaGFuZ2U9cHYodGhpcy56YSx0aGlzKTt0cnl7dGhpcy5BPSEwLHRoaXMuYS5vcGVuKGUsU3RyaW5nKHQpLCEwKSx0aGlzLkE9ITF9Y2F0Y2godCl7cmV0dXJuIHZvaWQgaG0odGhpcyx0KX10PW58fFwiXCI7dmFyIGksbz1uZXcgX3kodGhpcy5oZWFkZXJzKTtyJiZieShyLGZ1bmN0aW9uKHQsZSl7by5zZXQoZSx0KX0pLHI9ZnVuY3Rpb24odCl7dDp7Zm9yKHZhciBlPWNtLG49dC5sZW5ndGgscj1cInN0cmluZ1wiPT10eXBlb2YgdD90LnNwbGl0KFwiXCIpOnQsaT0wO2k8bjtpKyspaWYoaSBpbiByJiZlLmNhbGwodm9pZCAwLHJbaV0saSx0KSl7ZT1pO2JyZWFrIHR9ZT0tMX1yZXR1cm4gZTwwP251bGw6XCJzdHJpbmdcIj09dHlwZW9mIHQ/dC5jaGFyQXQoZSk6dFtlXX0oby5MKCkpLG49b3YuRm9ybURhdGEmJnQgaW5zdGFuY2VvZiBvdi5Gb3JtRGF0YSwwPD1tdih1bSxlKSYmIXImJiFuJiZvLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIiksby5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dGhpcy5hLnNldFJlcXVlc3RIZWFkZXIoZSx0KX0sdGhpcyksdGhpcy5JJiYodGhpcy5hLnJlc3BvbnNlVHlwZT10aGlzLkkpLFwid2l0aENyZWRlbnRpYWxzXCJpbiB0aGlzLmEmJnRoaXMuYS53aXRoQ3JlZGVudGlhbHMhPT10aGlzLkYmJih0aGlzLmEud2l0aENyZWRlbnRpYWxzPXRoaXMuRik7dHJ5e2RtKHRoaXMpLDA8dGhpcy5vJiYoKHRoaXMuRD0oaT10aGlzLmEsTHYmJld2KDkpJiZcIm51bWJlclwiPT10eXBlb2YgaS50aW1lb3V0JiZ2b2lkIDAhPT1pLm9udGltZW91dCkpPyh0aGlzLmEudGltZW91dD10aGlzLm8sdGhpcy5hLm9udGltZW91dD1wdih0aGlzLnhhLHRoaXMpKTp0aGlzLm09UGcodGhpcy54YSx0aGlzLm8sdGhpcykpLHRoaXMubD0hMCx0aGlzLmEuc2VuZCh0KSx0aGlzLmw9ITF9Y2F0Y2godCl7aG0odGhpcyx0KX19LFFzLnhhPWZ1bmN0aW9uKCl7dm9pZCAwIT09aXYmJnRoaXMuYSYmKHRoaXMuZj1cIlRpbWVkIG91dCBhZnRlciBcIit0aGlzLm8rXCJtcywgYWJvcnRpbmdcIix0aGlzLmg9OCx5Zyh0aGlzLFwidGltZW91dFwiKSx0aGlzLmFib3J0KDgpKX0sUXMuYWJvcnQ9ZnVuY3Rpb24odCl7dGhpcy5hJiZ0aGlzLmImJih0aGlzLmI9ITEsdGhpcy5nPSEwLHRoaXMuYS5hYm9ydCgpLHRoaXMuZz0hMSx0aGlzLmg9dHx8Nyx5Zyh0aGlzLFwiY29tcGxldGVcIikseWcodGhpcyxcImFib3J0XCIpLHBtKHRoaXMpKX0sUXMuRz1mdW5jdGlvbigpe3RoaXMuYSYmKHRoaXMuYiYmKHRoaXMuYj0hMSx0aGlzLmc9ITAsdGhpcy5hLmFib3J0KCksdGhpcy5nPSExKSxwbSh0aGlzLCEwKSksb20uWC5HLmNhbGwodGhpcyl9LFFzLnphPWZ1bmN0aW9uKCl7dGhpcy5qfHwodGhpcy5BfHx0aGlzLmx8fHRoaXMuZz9mbSh0aGlzKTp0aGlzLlVhKCkpfSxRcy5VYT1mdW5jdGlvbigpe2ZtKHRoaXMpfSxRcy5XPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiAyPHZtKHRoaXMpP3RoaXMuYS5zdGF0dXM6LTF9Y2F0Y2godCl7cmV0dXJuLTF9fSxRcy4kPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmE/dGhpcy5hLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKHQpe3JldHVyblwiXCJ9fSxRcy5QYT1mdW5jdGlvbih0KXtpZih0aGlzLmEpe3ZhciBlPXRoaXMuYS5yZXNwb25zZVRleHQ7cmV0dXJuIHQmJjA9PWUuaW5kZXhPZih0KSYmKGU9ZS5zdWJzdHJpbmcodC5sZW5ndGgpKSxpbShlKX19LFFzLnVhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaH0sUXMuUWE9ZnVuY3Rpb24oKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdGhpcy5mP3RoaXMuZjpTdHJpbmcodGhpcy5mKX0sKFFzPW1tLnByb3RvdHlwZSkuaGE9OCxRcy52PTEsUXMuQmE9ZnVuY3Rpb24odCl7aWYodGhpcy5oKWlmKHRoaXMuaD1udWxsLDE9PXRoaXMudil7aWYoIXQpe3RoaXMuUj1NYXRoLmZsb29yKDFlNSpNYXRoLnJhbmRvbSgpKSx0PXRoaXMuUisrO3ZhciBlLG49bmV3IG95KHRoaXMsdGhpcy5jLHQsdm9pZCAwKSxyPXRoaXMubDtpZih0aGlzLk8mJihyP1B2KHI9QXYociksdGhpcy5PKTpyPXRoaXMuTyksbnVsbD09PXRoaXMuaSYmKG4uQj1yKSx0aGlzLmRhKXQ6e2Zvcih2YXIgaT1lPTA7aTx0aGlzLmcubGVuZ3RoO2krKyl7dmFyIG89dGhpcy5nW2ldO2lmKFwiX19kYXRhX19cImluIG8uYSYmXCJzdHJpbmdcIj09dHlwZW9mKG89by5hLl9fZGF0YV9fKT9vPW8ubGVuZ3RoOm89dm9pZCAwLHZvaWQgMD09PW8pYnJlYWs7aWYoNDA5NjwoZSs9bykpe2U9aTticmVhayB0fWlmKDQwOTY9PT1lfHxpPT09dGhpcy5nLmxlbmd0aC0xKXtlPWkrMTticmVhayB0fX1lPTFlM31lbHNlIGU9MWUzO2U9Q20odGhpcyxuLGUpLFJ5KGk9U3kodGhpcy5CKSxcIlJJRFwiLHQpLFJ5KGksXCJDVkVSXCIsMjIpLHRoaXMuQSYmUnkoaSxcIlgtSFRUUC1TZXNzaW9uLUlkXCIsdGhpcy5BKSxTbSh0aGlzLGkpLHRoaXMuaSYmciYmZ20oaSx0aGlzLmksciksJHkodGhpcy5iLG4pLHRoaXMuSWEmJlJ5KGksXCJUWVBFXCIsXCJpbml0XCIpLHRoaXMuZGE/KFJ5KGksXCIkcmVxXCIsZSksUnkoaSxcIlNJRFwiLFwibnVsbFwiKSxuLlU9ITAsaHkobixpLG51bGwpKTpoeShuLGksZSksdGhpcy52PTJ9fWVsc2UgMz09dGhpcy52JiYodD9FbSh0aGlzLHQpOjA9PXRoaXMuZy5sZW5ndGh8fFl5KHRoaXMuYil8fEVtKHRoaXMpKX0sUXMuQWE9ZnVuY3Rpb24oKXt2YXIgdDt0aGlzLmo9bnVsbCxSbSh0aGlzKSx0aGlzLlUmJiEodGhpcy5GfHxudWxsPT10aGlzLmF8fHRoaXMuTjw9MCkmJih0PTIqdGhpcy5OLHRoaXMuYy5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVyIGVuYWJsZWQ6IFwiK3QpLHRoaXMucz0kZyhwdih0aGlzLlRhLHRoaXMpLHQpKX0sUXMuVGE9ZnVuY3Rpb24oKXt0aGlzLnMmJih0aGlzLnM9bnVsbCx0aGlzLmMuaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lb3V0IHJlYWNoZWQuXCIpLHRoaXMuYy5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSx0aGlzLkg9ITEsdGhpcy5GPSEwLFhnKDEwKSxfbSh0aGlzKSxSbSh0aGlzKSl9LFFzLlNhPWZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5tJiYodGhpcy5tPW51bGwsX20odGhpcyksTm0odGhpcyksWGcoMTkpKX0sUXMuWWE9ZnVuY3Rpb24odCl7dD8odGhpcy5jLmluZm8oXCJTdWNjZXNzZnVsbHkgcGluZ2VkIGdvb2dsZS5jb21cIiksWGcoMikpOih0aGlzLmMuaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksWGcoMSkpfSwoUXM9VW0ucHJvdG90eXBlKS50YT1mdW5jdGlvbigpe30sUXMuc2E9ZnVuY3Rpb24oKXt9LFFzLnJhPWZ1bmN0aW9uKCl7fSxRcy5xYT1mdW5jdGlvbigpe30sUXMuSmE9ZnVuY3Rpb24oKXt9LGptLnByb3RvdHlwZS5hPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBxbSh0LGUpfSxndihxbSxnZykscW0ucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXt0aGlzLmEuZj10aGlzLmYsdGhpcy5tJiYodGhpcy5hLkM9ITApO3ZhciB0PXRoaXMuYSxlPXRoaXMubyxuPXRoaXMuYnx8dm9pZCAwO1hnKDApLHQuZmE9ZSx0LlY9bnx8e30sdC5IPXQuUyx0LkI9TW0odCxudWxsLHQuZmEpLFRtKHQpfSxxbS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtibSh0aGlzLmEpfSxxbS5wcm90b3R5cGUuaD1mdW5jdGlvbih0KXt2YXIgZTtcInN0cmluZ1wiPT10eXBlb2YgdD8oKGU9e30pLl9fZGF0YV9fPXQsSW0odGhpcy5hLGUpKTp0aGlzLmw/KChlPXt9KS5fX2RhdGFfXz1iZyh0KSxJbSh0aGlzLmEsZSkpOkltKHRoaXMuYSx0KX0scW0ucHJvdG90eXBlLkc9ZnVuY3Rpb24oKXt0aGlzLmEuZj1udWxsLGRlbGV0ZSB0aGlzLmYsYm0odGhpcy5hKSxkZWxldGUgdGhpcy5hLHFtLlguRy5jYWxsKHRoaXMpfSxndihWbSxueSksZ3YoQm0scnkpLGd2KEttLFVtKSxLbS5wcm90b3R5cGUudGE9ZnVuY3Rpb24oKXt5Zyh0aGlzLmEsXCJhXCIpfSxLbS5wcm90b3R5cGUuc2E9ZnVuY3Rpb24odCl7eWcodGhpcy5hLG5ldyBWbSh0KSl9LEttLnByb3RvdHlwZS5yYT1mdW5jdGlvbih0KXt5Zyh0aGlzLmEsbmV3IEJtKX0sS20ucHJvdG90eXBlLnFhPWZ1bmN0aW9uKCl7eWcodGhpcy5hLFwiYlwiKX0sam0ucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9am0ucHJvdG90eXBlLmEscW0ucHJvdG90eXBlLnNlbmQ9cW0ucHJvdG90eXBlLmgscW0ucHJvdG90eXBlLm9wZW49cW0ucHJvdG90eXBlLmcsU24uTk9fRVJST1I9MCxTbi5USU1FT1VUPTgsU24uSFRUUF9FUlJPUj02LEcuQ09NUExFVEU9XCJjb21wbGV0ZVwiLChleS5FdmVudFR5cGU9eikuT1BFTj1cImFcIix6LkNMT1NFPVwiYlwiLHouRVJST1I9XCJjXCIsei5NRVNTQUdFPVwiZFwiLGdnLnByb3RvdHlwZS5saXN0ZW49Z2cucHJvdG90eXBlLnZhLG9tLnByb3RvdHlwZS5saXN0ZW5PbmNlPW9tLnByb3RvdHlwZS53YSxvbS5wcm90b3R5cGUuZ2V0TGFzdEVycm9yPW9tLnByb3RvdHlwZS5RYSxvbS5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1vbS5wcm90b3R5cGUudWEsb20ucHJvdG90eXBlLmdldFN0YXR1cz1vbS5wcm90b3R5cGUuVyxvbS5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPW9tLnByb3RvdHlwZS5QYSxvbS5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PW9tLnByb3RvdHlwZS4kLG9tLnByb3RvdHlwZS5zZW5kPW9tLnByb3RvdHlwZS5iYTt2YXIgV209R2csSG09U24sR209Ryx6bT1XZyxRbT0xMCxZbT0xMSxYbT1leSxKbT1vbSwkbT0oWm0ucHJvdG90eXBlLnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZT1NYXRoLm1heCh0LHRoaXMucHJldmlvdXNWYWx1ZSksdGhpcy5wcmV2aW91c1ZhbHVlfSxabS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciB0PSsrdGhpcy5wcmV2aW91c1ZhbHVlO3JldHVybiB0aGlzLmkmJnRoaXMuaSh0KSx0fSxabSk7ZnVuY3Rpb24gWm0odCxlKXt2YXIgbj10aGlzO3RoaXMucHJldmlvdXNWYWx1ZT10LGUmJihlLnNlcXVlbmNlTnVtYmVySGFuZGxlcj1mdW5jdGlvbih0KXtyZXR1cm4gbi50KHQpfSx0aGlzLmk9ZnVuY3Rpb24odCl7cmV0dXJuIGUud3JpdGVTZXF1ZW5jZU51bWJlcih0KX0pfSRtLm89LTE7dmFyIHRiLGViPXtPSzpcIm9rXCIsQ0FOQ0VMTEVEOlwiY2FuY2VsbGVkXCIsVU5LTk9XTjpcInVua25vd25cIixJTlZBTElEX0FSR1VNRU5UOlwiaW52YWxpZC1hcmd1bWVudFwiLERFQURMSU5FX0VYQ0VFREVEOlwiZGVhZGxpbmUtZXhjZWVkZWRcIixOT1RfRk9VTkQ6XCJub3QtZm91bmRcIixBTFJFQURZX0VYSVNUUzpcImFscmVhZHktZXhpc3RzXCIsUEVSTUlTU0lPTl9ERU5JRUQ6XCJwZXJtaXNzaW9uLWRlbmllZFwiLFVOQVVUSEVOVElDQVRFRDpcInVuYXV0aGVudGljYXRlZFwiLFJFU09VUkNFX0VYSEFVU1RFRDpcInJlc291cmNlLWV4aGF1c3RlZFwiLEZBSUxFRF9QUkVDT05ESVRJT046XCJmYWlsZWQtcHJlY29uZGl0aW9uXCIsQUJPUlRFRDpcImFib3J0ZWRcIixPVVRfT0ZfUkFOR0U6XCJvdXQtb2YtcmFuZ2VcIixVTklNUExFTUVOVEVEOlwidW5pbXBsZW1lbnRlZFwiLElOVEVSTkFMOlwiaW50ZXJuYWxcIixVTkFWQUlMQUJMRTpcInVuYXZhaWxhYmxlXCIsREFUQV9MT1NTOlwiZGF0YS1sb3NzXCJ9LG5iPShYaShpYix0Yj1FcnJvciksaWIpLHJiPW5ldyBkYShcIkBmaXJlYmFzZS9maXJlc3RvcmVcIik7ZnVuY3Rpb24gaWIodCxlKXt2YXIgbj10aGlzO3JldHVybihuPXRiLmNhbGwodGhpcyxlKXx8dGhpcykuY29kZT10LG4ubWVzc2FnZT1lLG4ubmFtZT1cIkZpcmViYXNlRXJyb3JcIixuLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIG4ubmFtZStcIjogW2NvZGU9XCIrbi5jb2RlK1wiXTogXCIrbi5tZXNzYWdlfSxufWZ1bmN0aW9uIG9iKCl7cmV0dXJuIHJiLmxvZ0xldmVsfWZ1bmN0aW9uIGFiKHQpe2Zvcih2YXIgZSxuPVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKW5bci0xXT1hcmd1bWVudHNbcl07cmIubG9nTGV2ZWw8PXVhLkRFQlVHJiYoZT1uLm1hcChjYikscmIuZGVidWcuYXBwbHkocmIsbm8oW1wiRmlyZXN0b3JlICg4LjUuMCk6IFwiK3RdLGUpKSl9ZnVuY3Rpb24gc2IodCl7Zm9yKHZhciBlLG49W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspbltyLTFdPWFyZ3VtZW50c1tyXTtyYi5sb2dMZXZlbDw9dWEuRVJST1ImJihlPW4ubWFwKGNiKSxyYi5lcnJvci5hcHBseShyYixubyhbXCJGaXJlc3RvcmUgKDguNS4wKTogXCIrdF0sZSkpKX1mdW5jdGlvbiB1Yih0KXtmb3IodmFyIGUsbj1bXSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyluW3ItMV09YXJndW1lbnRzW3JdO3JiLmxvZ0xldmVsPD11YS5XQVJOJiYoZT1uLm1hcChjYikscmIud2Fybi5hcHBseShyYixubyhbXCJGaXJlc3RvcmUgKDguNS4wKTogXCIrdF0sZSkpKX1mdW5jdGlvbiBjYihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gZTt0cnl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpfWNhdGNoKHQpe3JldHVybiBlfX1mdW5jdGlvbiBoYih0KXt0PVwiRklSRVNUT1JFICg4LjUuMCkgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogXCIrKHQ9dm9pZCAwPT09dD9cIlVuZXhwZWN0ZWQgc3RhdGVcIjp0KTt0aHJvdyBzYih0KSxuZXcgRXJyb3IodCl9ZnVuY3Rpb24gbGIodCl7dHx8aGIoKX12YXIgZmI9KHBiLnU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiLGU9TWF0aC5mbG9vcigyNTYvdC5sZW5ndGgpKnQubGVuZ3RoLG49XCJcIjtuLmxlbmd0aDwyMDspZm9yKHZhciByPWZ1bmN0aW9uKHQpe3ZhciBlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiYoc2VsZi5jcnlwdG98fHNlbGYubXNDcnlwdG8pLG49bmV3IFVpbnQ4QXJyYXkodCk7aWYoZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5nZXRSYW5kb21WYWx1ZXMpZS5nZXRSYW5kb21WYWx1ZXMobik7ZWxzZSBmb3IodmFyIHI9MDtyPHQ7cisrKW5bcl09TWF0aC5mbG9vcigyNTYqTWF0aC5yYW5kb20oKSk7cmV0dXJuIG59KDQwKSxpPTA7aTxyLmxlbmd0aDsrK2kpbi5sZW5ndGg8MjAmJnJbaV08ZSYmKG4rPXQuY2hhckF0KHJbaV0ldC5sZW5ndGgpKTtyZXR1cm4gbn0scGIpO2Z1bmN0aW9uIHBiKCl7fWZ1bmN0aW9uIGRiKHQsZSl7cmV0dXJuIHQ8ZT8tMTplPHQ/MTowfWZ1bmN0aW9uIHZiKHQsbixyKXtyZXR1cm4gdC5sZW5ndGg9PT1uLmxlbmd0aCYmdC5ldmVyeShmdW5jdGlvbih0LGUpe3JldHVybiByKHQsbltlXSl9KX1mdW5jdGlvbiBnYih0KXtyZXR1cm4gdCtcIlxcMFwifXZhciB5Yj0oX2Iubm93PWZ1bmN0aW9uKCl7cmV0dXJuIF9iLmZyb21NaWxsaXMoRGF0ZS5ub3coKSl9LF9iLmZyb21EYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBfYi5mcm9tTWlsbGlzKHQuZ2V0VGltZSgpKX0sX2IuZnJvbU1pbGxpcz1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLmZsb29yKHQvMWUzKTtyZXR1cm4gbmV3IF9iKGUsTWF0aC5mbG9vcigxZTYqKHQtMWUzKmUpKSl9LF9iLnByb3RvdHlwZS50b0RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUodGhpcy50b01pbGxpcygpKX0sX2IucHJvdG90eXBlLnRvTWlsbGlzPWZ1bmN0aW9uKCl7cmV0dXJuIDFlMyp0aGlzLnNlY29uZHMrdGhpcy5uYW5vc2Vjb25kcy8xZTZ9LF9iLnByb3RvdHlwZS5fY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNlY29uZHM9PT10LnNlY29uZHM/ZGIodGhpcy5uYW5vc2Vjb25kcyx0Lm5hbm9zZWNvbmRzKTpkYih0aGlzLnNlY29uZHMsdC5zZWNvbmRzKX0sX2IucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2Vjb25kcz09PXRoaXMuc2Vjb25kcyYmdC5uYW5vc2Vjb25kcz09PXRoaXMubmFub3NlY29uZHN9LF9iLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiVGltZXN0YW1wKHNlY29uZHM9XCIrdGhpcy5zZWNvbmRzK1wiLCBuYW5vc2Vjb25kcz1cIit0aGlzLm5hbm9zZWNvbmRzK1wiKVwifSxfYi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3NlY29uZHM6dGhpcy5zZWNvbmRzLG5hbm9zZWNvbmRzOnRoaXMubmFub3NlY29uZHN9fSxfYi5wcm90b3R5cGUudmFsdWVPZj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuc2Vjb25kcy0gLTYyMTM1NTk2ODAwO3JldHVybiBTdHJpbmcodCkucGFkU3RhcnQoMTIsXCIwXCIpK1wiLlwiK1N0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LFwiMFwiKX0sX2IpLG1iPShiYi5mcm9tVGltZXN0YW1wPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYmIodCl9LGJiLm1pbj1mdW5jdGlvbigpe3JldHVybiBuZXcgYmIobmV3IHliKDAsMCkpfSxiYi5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRpbWVzdGFtcC5fY29tcGFyZVRvKHQudGltZXN0YW1wKX0sYmIucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwodC50aW1lc3RhbXApfSxiYi5wcm90b3R5cGUudG9NaWNyb3NlY29uZHM9ZnVuY3Rpb24oKXtyZXR1cm4gMWU2KnRoaXMudGltZXN0YW1wLnNlY29uZHMrdGhpcy50aW1lc3RhbXAubmFub3NlY29uZHMvMWUzfSxiYi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlNuYXBzaG90VmVyc2lvbihcIit0aGlzLnRpbWVzdGFtcC50b1N0cmluZygpK1wiKVwifSxiYi5wcm90b3R5cGUudG9UaW1lc3RhbXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aW1lc3RhbXB9LGJiKTtmdW5jdGlvbiBiYih0KXt0aGlzLnRpbWVzdGFtcD10fWZ1bmN0aW9uIF9iKHQsZSl7aWYodGhpcy5zZWNvbmRzPXQsKHRoaXMubmFub3NlY29uZHM9ZSk8MCl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiK2UpO2lmKDFlOTw9ZSl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiK2UpO2lmKHQ8LTYyMTM1NTk2ODAwKXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIit0KTtpZigyNTM0MDIzMDA4MDA8PXQpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiK3QpfWZ1bmN0aW9uIHdiKHQpe3ZhciBlLG49MDtmb3IoZSBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpJiZuKys7cmV0dXJuIG59ZnVuY3Rpb24gSWIodCxlKXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmZShuLHRbbl0pfWZ1bmN0aW9uIFRiKHQpe2Zvcih2YXIgZSBpbiB0KWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpKXJldHVybiExO3JldHVybiEwfXZhciBFYixTYixTbj0oT2JqZWN0LmRlZmluZVByb3BlcnR5KExiLnByb3RvdHlwZSxcImxlbmd0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW59LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksTGIucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT1MYi5jb21wYXJhdG9yKHRoaXMsdCl9LExiLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LHRoaXMubGltaXQoKSk7cmV0dXJuIHQgaW5zdGFuY2VvZiBMYj90LmZvckVhY2goZnVuY3Rpb24odCl7ZS5wdXNoKHQpfSk6ZS5wdXNoKHQpLHRoaXMuY29uc3RydWN0KGUpfSxMYi5wcm90b3R5cGUubGltaXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vZmZzZXQrdGhpcy5sZW5ndGh9LExiLnByb3RvdHlwZS5wb3BGaXJzdD1mdW5jdGlvbih0KXtyZXR1cm4gdD12b2lkIDA9PT10PzE6dCx0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLHRoaXMub2Zmc2V0K3QsdGhpcy5sZW5ndGgtdCl9LExiLnByb3RvdHlwZS5wb3BMYXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsdGhpcy5vZmZzZXQsdGhpcy5sZW5ndGgtMSl9LExiLnByb3RvdHlwZS5maXJzdFNlZ21lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldF19LExiLnByb3RvdHlwZS5sYXN0U2VnbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCh0aGlzLmxlbmd0aC0xKX0sTGIucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldCt0XX0sTGIucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMubGVuZ3RofSxMYi5wcm90b3R5cGUuaXNQcmVmaXhPZj1mdW5jdGlvbih0KXtpZih0Lmxlbmd0aDx0aGlzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMubGVuZ3RoO2UrKylpZih0aGlzLmdldChlKSE9PXQuZ2V0KGUpKXJldHVybiExO3JldHVybiEwfSxMYi5wcm90b3R5cGUuaXNJbW1lZGlhdGVQYXJlbnRPZj1mdW5jdGlvbih0KXtpZih0aGlzLmxlbmd0aCsxIT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLmxlbmd0aDtlKyspaWYodGhpcy5nZXQoZSkhPT10LmdldChlKSlyZXR1cm4hMTtyZXR1cm4hMH0sTGIucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMub2Zmc2V0LG49dGhpcy5saW1pdCgpO2U8bjtlKyspdCh0aGlzLnNlZ21lbnRzW2VdKX0sTGIucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCx0aGlzLmxpbWl0KCkpfSxMYi5jb21wYXJhdG9yPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPU1hdGgubWluKHQubGVuZ3RoLGUubGVuZ3RoKSxyPTA7cjxuO3IrKyl7dmFyIGk9dC5nZXQociksbz1lLmdldChyKTtpZihpPG8pcmV0dXJuLTE7aWYobzxpKXJldHVybiAxfXJldHVybiB0Lmxlbmd0aDxlLmxlbmd0aD8tMTp0Lmxlbmd0aD5lLmxlbmd0aD8xOjB9LExiKSxDYj0oWGkoeGIsU2I9U24pLHhiLnByb3RvdHlwZS5jb25zdHJ1Y3Q9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgeGIodCxlLG4pfSx4Yi5wcm90b3R5cGUuY2Fub25pY2FsU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9BcnJheSgpLmpvaW4oXCIvXCIpfSx4Yi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKX0seGIuZnJvbVN0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtmb3IodmFyIG49W10scj0wLGk9dDtyPGkubGVuZ3RoO3IrKyl7dmFyIG89aVtyXTtpZigwPD1vLmluZGV4T2YoXCIvL1wiKSl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkludmFsaWQgc2VnbWVudCAoXCIrbytcIikuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gLy8gaW4gdGhlbS5cIik7bi5wdXNoLmFwcGx5KG4sby5zcGxpdChcIi9cIikuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiAwPHQubGVuZ3RofSkpfXJldHVybiBuZXcgeGIobil9LHhiLmVtcHR5UGF0aD1mdW5jdGlvbigpe3JldHVybiBuZXcgeGIoW10pfSx4Yiksa2I9L15bX2EtekEtWl1bX2EtekEtWjAtOV0qJC8sTmI9KFhpKERiLEViPVNuKSxEYi5wcm90b3R5cGUuY29uc3RydWN0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IERiKHQsZSxuKX0sRGIuaXNWYWxpZElkZW50aWZpZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGtiLnRlc3QodCl9LERiLnByb3RvdHlwZS5jYW5vbmljYWxTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b0FycmF5KCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0PXQucmVwbGFjZSgvXFxcXC9nLFwiXFxcXFxcXFxcIikucmVwbGFjZSgvYC9nLFwiXFxcXGBcIiksdD0hRGIuaXNWYWxpZElkZW50aWZpZXIodCk/XCJgXCIrdCtcImBcIjp0fSkuam9pbihcIi5cIil9LERiLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpfSxEYi5wcm90b3R5cGUuaXNLZXlGaWVsZD1mdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5sZW5ndGgmJlwiX19uYW1lX19cIj09PXRoaXMuZ2V0KDApfSxEYi5rZXlGaWVsZD1mdW5jdGlvbigpe3JldHVybiBuZXcgRGIoW1wiX19uYW1lX19cIl0pfSxEYi5mcm9tU2VydmVyRm9ybWF0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPVwiXCIscj0wLGk9ZnVuY3Rpb24oKXtpZigwPT09bi5sZW5ndGgpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJJbnZhbGlkIGZpZWxkIHBhdGggKFwiK3QrXCIpLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nXCIpO2UucHVzaChuKSxuPVwiXCJ9LG89ITE7cjx0Lmxlbmd0aDspe3ZhciBhPXRbcl07aWYoXCJcXFxcXCI9PT1hKXtpZihyKzE9PT10Lmxlbmd0aCl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIlBhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6IFwiK3QpO3ZhciBzPXRbcisxXTtpZihcIlxcXFxcIiE9PXMmJlwiLlwiIT09cyYmXCJgXCIhPT1zKXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiUGF0aCBoYXMgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2U6IFwiK3QpO24rPXMscis9Mn1lbHNlXCJgXCI9PT1hP289IW86XCIuXCIhPT1hfHxvP24rPWE6aSgpLHIrK31pZihpKCksbyl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIlVudGVybWluYXRlZCBgIGluIHBhdGg6IFwiK3QpO3JldHVybiBuZXcgRGIoZSl9LERiLmVtcHR5UGF0aD1mdW5jdGlvbigpe3JldHVybiBuZXcgRGIoW10pfSxEYiksQWI9KE9iLnByb3RvdHlwZS5jb3ZlcnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLmZpZWxkcztlPG4ubGVuZ3RoO2UrKylpZihuW2VdLmlzUHJlZml4T2YodCkpcmV0dXJuITA7cmV0dXJuITF9LE9iLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB2Yih0aGlzLmZpZWxkcyx0LmZpZWxkcyxmdW5jdGlvbih0LGUpe3JldHVybiB0LmlzRXF1YWwoZSl9KX0sT2IpLFJiPShQYi5mcm9tQmFzZTY0U3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUGIoYXRvYih0KSl9LFBiLmZyb21VaW50OEFycmF5PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUGIoZnVuY3Rpb24odCl7Zm9yKHZhciBlPVwiXCIsbj0wO248dC5sZW5ndGg7KytuKWUrPVN0cmluZy5mcm9tQ2hhckNvZGUodFtuXSk7cmV0dXJuIGV9KHQpKX0sUGIucHJvdG90eXBlLnRvQmFzZTY0PWZ1bmN0aW9uKCl7cmV0dXJuIHQ9dGhpcy5iaW5hcnlTdHJpbmcsYnRvYSh0KTt2YXIgdH0sUGIucHJvdG90eXBlLnRvVWludDhBcnJheT1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpLG49MDtuPHQubGVuZ3RoO24rKyllW25dPXQuY2hhckNvZGVBdChuKTtyZXR1cm4gZX0odGhpcy5iaW5hcnlTdHJpbmcpfSxQYi5wcm90b3R5cGUuYXBwcm94aW1hdGVCeXRlU2l6ZT1mdW5jdGlvbigpe3JldHVybiAyKnRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aH0sUGIucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbih0KXtyZXR1cm4gZGIodGhpcy5iaW5hcnlTdHJpbmcsdC5iaW5hcnlTdHJpbmcpfSxQYi5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5iaW5hcnlTdHJpbmc9PT10LmJpbmFyeVN0cmluZ30sUGIpO2Z1bmN0aW9uIFBiKHQpe3RoaXMuYmluYXJ5U3RyaW5nPXR9ZnVuY3Rpb24gT2IodCl7KHRoaXMuZmllbGRzPXQpLnNvcnQoTmIuY29tcGFyYXRvcil9ZnVuY3Rpb24gRGIoKXtyZXR1cm4gbnVsbCE9PUViJiZFYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9ZnVuY3Rpb24geGIoKXtyZXR1cm4gbnVsbCE9PVNiJiZTYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9ZnVuY3Rpb24gTGIodCxlLG4pe3ZvaWQgMD09PWU/ZT0wOmU+dC5sZW5ndGgmJmhiKCksdm9pZCAwPT09bj9uPXQubGVuZ3RoLWU6bj50Lmxlbmd0aC1lJiZoYigpLHRoaXMuc2VnbWVudHM9dCx0aGlzLm9mZnNldD1lLHRoaXMubGVuPW59UmIuRU1QVFlfQllURV9TVFJJTkc9bmV3IFJiKFwiXCIpO3ZhciBNYj1uZXcgUmVnRXhwKC9eXFxkezR9LVxcZFxcZC1cXGRcXGRUXFxkXFxkOlxcZFxcZDpcXGRcXGQoPzpcXC4oXFxkKykpP1okLyk7ZnVuY3Rpb24gRmIodCl7aWYobGIoISF0KSxcInN0cmluZ1wiIT10eXBlb2YgdClyZXR1cm57c2Vjb25kczpVYih0LnNlY29uZHMpLG5hbm9zOlViKHQubmFub3MpfTt2YXIgZT0wLG49TWIuZXhlYyh0KTtsYighIW4pLG5bMV0mJihuPSgobj1uWzFdKStcIjAwMDAwMDAwMFwiKS5zdWJzdHIoMCw5KSxlPU51bWJlcihuKSk7dD1uZXcgRGF0ZSh0KTtyZXR1cm57c2Vjb25kczpNYXRoLmZsb29yKHQuZ2V0VGltZSgpLzFlMyksbmFub3M6ZX19ZnVuY3Rpb24gVWIodCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/dDpcInN0cmluZ1wiPT10eXBlb2YgdD9OdW1iZXIodCk6MH1mdW5jdGlvbiBqYih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD9SYi5mcm9tQmFzZTY0U3RyaW5nKHQpOlJiLmZyb21VaW50OEFycmF5KHQpfWZ1bmN0aW9uIHFiKHQpe3JldHVyblwic2VydmVyX3RpbWVzdGFtcFwiPT09KG51bGw9PT0odD0oKG51bGw9PT0odD1udWxsPT10P3ZvaWQgMDp0Lm1hcFZhbHVlKXx8dm9pZCAwPT09dD92b2lkIDA6dC5maWVsZHMpfHx7fSkuX190eXBlX18pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnN0cmluZ1ZhbHVlKX1mdW5jdGlvbiBWYih0KXt0PUZiKHQubWFwVmFsdWUuZmllbGRzLl9fbG9jYWxfd3JpdGVfdGltZV9fLnRpbWVzdGFtcFZhbHVlKTtyZXR1cm4gbmV3IHliKHQuc2Vjb25kcyx0Lm5hbm9zKX1mdW5jdGlvbiBCYih0KXtyZXR1cm4gbnVsbD09dH1mdW5jdGlvbiBLYih0KXtyZXR1cm4gMD09PXQmJjEvdD09LTEvMH1mdW5jdGlvbiBXYih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmTnVtYmVyLmlzSW50ZWdlcih0KSYmIUtiKHQpJiZ0PD1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUiYmdD49TnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJ9dmFyIEhiPShHYi5mcm9tUGF0aD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEdiKENiLmZyb21TdHJpbmcodCkpfSxHYi5mcm9tTmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEdiKENiLmZyb21TdHJpbmcodCkucG9wRmlyc3QoNSkpfSxHYi5wcm90b3R5cGUuaGFzQ29sbGVjdGlvbklkPWZ1bmN0aW9uKHQpe3JldHVybiAyPD10aGlzLnBhdGgubGVuZ3RoJiZ0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGgtMik9PT10fSxHYi5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PXQmJjA9PT1DYi5jb21wYXJhdG9yKHRoaXMucGF0aCx0LnBhdGgpfSxHYi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXRoLnRvU3RyaW5nKCl9LEdiLmNvbXBhcmF0b3I9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQ2IuY29tcGFyYXRvcih0LnBhdGgsZS5wYXRoKX0sR2IuaXNEb2N1bWVudEtleT1mdW5jdGlvbih0KXtyZXR1cm4gdC5sZW5ndGglMj09MH0sR2IuZnJvbVNlZ21lbnRzPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgR2IobmV3IENiKHQuc2xpY2UoKSkpfSxHYik7ZnVuY3Rpb24gR2IodCl7dGhpcy5wYXRoPXR9ZnVuY3Rpb24gemIodCl7cmV0dXJuXCJudWxsVmFsdWVcImluIHQ/MDpcImJvb2xlYW5WYWx1ZVwiaW4gdD8xOlwiaW50ZWdlclZhbHVlXCJpbiB0fHxcImRvdWJsZVZhbHVlXCJpbiB0PzI6XCJ0aW1lc3RhbXBWYWx1ZVwiaW4gdD8zOlwic3RyaW5nVmFsdWVcImluIHQ/NTpcImJ5dGVzVmFsdWVcImluIHQ/NjpcInJlZmVyZW5jZVZhbHVlXCJpbiB0Pzc6XCJnZW9Qb2ludFZhbHVlXCJpbiB0Pzg6XCJhcnJheVZhbHVlXCJpbiB0Pzk6XCJtYXBWYWx1ZVwiaW4gdD9xYih0KT80OjEwOmhiKCl9ZnVuY3Rpb24gUWIocixpKXt2YXIgdCxlLG49emIocik7aWYobiE9PXpiKGkpKXJldHVybiExO3N3aXRjaChuKXtjYXNlIDA6cmV0dXJuITA7Y2FzZSAxOnJldHVybiByLmJvb2xlYW5WYWx1ZT09PWkuYm9vbGVhblZhbHVlO2Nhc2UgNDpyZXR1cm4gVmIocikuaXNFcXVhbChWYihpKSk7Y2FzZSAzOnJldHVybiBmdW5jdGlvbih0KXtpZihcInN0cmluZ1wiPT10eXBlb2Ygci50aW1lc3RhbXBWYWx1ZSYmXCJzdHJpbmdcIj09dHlwZW9mIHQudGltZXN0YW1wVmFsdWUmJnIudGltZXN0YW1wVmFsdWUubGVuZ3RoPT09dC50aW1lc3RhbXBWYWx1ZS5sZW5ndGgpcmV0dXJuIHIudGltZXN0YW1wVmFsdWU9PT10LnRpbWVzdGFtcFZhbHVlO3ZhciBlPUZiKHIudGltZXN0YW1wVmFsdWUpLHQ9RmIodC50aW1lc3RhbXBWYWx1ZSk7cmV0dXJuIGUuc2Vjb25kcz09PXQuc2Vjb25kcyYmZS5uYW5vcz09PXQubmFub3N9KGkpO2Nhc2UgNTpyZXR1cm4gci5zdHJpbmdWYWx1ZT09PWkuc3RyaW5nVmFsdWU7Y2FzZSA2OnJldHVybiBlPWksamIoci5ieXRlc1ZhbHVlKS5pc0VxdWFsKGpiKGUuYnl0ZXNWYWx1ZSkpO2Nhc2UgNzpyZXR1cm4gci5yZWZlcmVuY2VWYWx1ZT09PWkucmVmZXJlbmNlVmFsdWU7Y2FzZSA4OnJldHVybiB0PWksVWIoKGU9cikuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSk9PT1VYih0Lmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpJiZVYihlLmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKT09PVViKHQuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpO2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24odCxlKXtpZihcImludGVnZXJWYWx1ZVwiaW4gdCYmXCJpbnRlZ2VyVmFsdWVcImluIGUpcmV0dXJuIFViKHQuaW50ZWdlclZhbHVlKT09PVViKGUuaW50ZWdlclZhbHVlKTtpZihcImRvdWJsZVZhbHVlXCJpbiB0JiZcImRvdWJsZVZhbHVlXCJpbiBlKXt0PVViKHQuZG91YmxlVmFsdWUpLGU9VWIoZS5kb3VibGVWYWx1ZSk7cmV0dXJuIHQ9PT1lP0tiKHQpPT09S2IoZSk6aXNOYU4odCkmJmlzTmFOKGUpfXJldHVybiExfShyLGkpO2Nhc2UgOTpyZXR1cm4gdmIoci5hcnJheVZhbHVlLnZhbHVlc3x8W10saS5hcnJheVZhbHVlLnZhbHVlc3x8W10sUWIpO2Nhc2UgMTA6cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQsZT1yLm1hcFZhbHVlLmZpZWxkc3x8e30sbj1pLm1hcFZhbHVlLmZpZWxkc3x8e307aWYod2IoZSkhPT13YihuKSlyZXR1cm4hMTtmb3IodCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkmJih2b2lkIDA9PT1uW3RdfHwhUWIoZVt0XSxuW3RdKSkpcmV0dXJuITE7cmV0dXJuITB9KCk7ZGVmYXVsdDpyZXR1cm4gaGIoKX19ZnVuY3Rpb24gWWIodCxlKXtyZXR1cm4gdm9pZCAwIT09KHQudmFsdWVzfHxbXSkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gUWIodCxlKX0pfWZ1bmN0aW9uIFhiKHQsZSl7dmFyIG4scixpLG89emIodCksYT16YihlKTtpZihvIT09YSlyZXR1cm4gZGIobyxhKTtzd2l0Y2gobyl7Y2FzZSAwOnJldHVybiAwO2Nhc2UgMTpyZXR1cm4gZGIodC5ib29sZWFuVmFsdWUsZS5ib29sZWFuVmFsdWUpO2Nhc2UgMjpyZXR1cm4gcj1lLGk9VWIodC5pbnRlZ2VyVmFsdWV8fHQuZG91YmxlVmFsdWUpLHI9VWIoci5pbnRlZ2VyVmFsdWV8fHIuZG91YmxlVmFsdWUpLGk8cj8tMTpyPGk/MTppPT09cj8wOmlzTmFOKGkpP2lzTmFOKHIpPzA6LTE6MTtjYXNlIDM6cmV0dXJuIEpiKHQudGltZXN0YW1wVmFsdWUsZS50aW1lc3RhbXBWYWx1ZSk7Y2FzZSA0OnJldHVybiBKYihWYih0KSxWYihlKSk7Y2FzZSA1OnJldHVybiBkYih0LnN0cmluZ1ZhbHVlLGUuc3RyaW5nVmFsdWUpO2Nhc2UgNjpyZXR1cm4gZnVuY3Rpb24odCxlKXt0PWpiKHQpLGU9amIoZSk7cmV0dXJuIHQuY29tcGFyZVRvKGUpfSh0LmJ5dGVzVmFsdWUsZS5ieXRlc1ZhbHVlKTtjYXNlIDc6cmV0dXJuIGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuc3BsaXQoXCIvXCIpLHI9ZS5zcGxpdChcIi9cIiksaT0wO2k8bi5sZW5ndGgmJmk8ci5sZW5ndGg7aSsrKXt2YXIgbz1kYihuW2ldLHJbaV0pO2lmKDAhPT1vKXJldHVybiBvfXJldHVybiBkYihuLmxlbmd0aCxyLmxlbmd0aCl9KHQucmVmZXJlbmNlVmFsdWUsZS5yZWZlcmVuY2VWYWx1ZSk7Y2FzZSA4OnJldHVybiBuPXQuZ2VvUG9pbnRWYWx1ZSxpPWUuZ2VvUG9pbnRWYWx1ZSwwIT09KHI9ZGIoVWIobi5sYXRpdHVkZSksVWIoaS5sYXRpdHVkZSkpKT9yOmRiKFViKG4ubG9uZ2l0dWRlKSxVYihpLmxvbmdpdHVkZSkpO2Nhc2UgOTpyZXR1cm4gZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC52YWx1ZXN8fFtdLHI9ZS52YWx1ZXN8fFtdLGk9MDtpPG4ubGVuZ3RoJiZpPHIubGVuZ3RoOysraSl7dmFyIG89WGIobltpXSxyW2ldKTtpZihvKXJldHVybiBvfXJldHVybiBkYihuLmxlbmd0aCxyLmxlbmd0aCl9KHQuYXJyYXlWYWx1ZSxlLmFycmF5VmFsdWUpO2Nhc2UgMTA6cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5maWVsZHN8fHt9LHI9T2JqZWN0LmtleXMobiksaT1lLmZpZWxkc3x8e30sbz1PYmplY3Qua2V5cyhpKTtyLnNvcnQoKSxvLnNvcnQoKTtmb3IodmFyIGE9MDthPHIubGVuZ3RoJiZhPG8ubGVuZ3RoOysrYSl7dmFyIHM9ZGIoclthXSxvW2FdKTtpZigwIT09cylyZXR1cm4gcztzPVhiKG5bclthXV0saVtvW2FdXSk7aWYoMCE9PXMpcmV0dXJuIHN9cmV0dXJuIGRiKHIubGVuZ3RoLG8ubGVuZ3RoKX0odC5tYXBWYWx1ZSxlLm1hcFZhbHVlKTtkZWZhdWx0OnRocm93IGhiKCl9fWZ1bmN0aW9uIEpiKHQsZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQmJlwic3RyaW5nXCI9PXR5cGVvZiBlJiZ0Lmxlbmd0aD09PWUubGVuZ3RoKXJldHVybiBkYih0LGUpO3ZhciBuPUZiKHQpLHQ9RmIoZSksZT1kYihuLnNlY29uZHMsdC5zZWNvbmRzKTtyZXR1cm4gMCE9PWU/ZTpkYihuLm5hbm9zLHQubmFub3MpfWZ1bmN0aW9uICRiKHQpe3JldHVybiBmdW5jdGlvbiBhKHQpe3JldHVyblwibnVsbFZhbHVlXCJpbiB0P1wibnVsbFwiOlwiYm9vbGVhblZhbHVlXCJpbiB0P1wiXCIrdC5ib29sZWFuVmFsdWU6XCJpbnRlZ2VyVmFsdWVcImluIHQ/XCJcIit0LmludGVnZXJWYWx1ZTpcImRvdWJsZVZhbHVlXCJpbiB0P1wiXCIrdC5kb3VibGVWYWx1ZTpcInRpbWVzdGFtcFZhbHVlXCJpbiB0P2Z1bmN0aW9uKHQpe3ZhciB0PUZiKHQpO3JldHVyblwidGltZShcIit0LnNlY29uZHMrXCIsXCIrdC5uYW5vcytcIilcIn0odC50aW1lc3RhbXBWYWx1ZSk6XCJzdHJpbmdWYWx1ZVwiaW4gdD90LnN0cmluZ1ZhbHVlOlwiYnl0ZXNWYWx1ZVwiaW4gdD9qYih0LmJ5dGVzVmFsdWUpLnRvQmFzZTY0KCk6XCJyZWZlcmVuY2VWYWx1ZVwiaW4gdD8oZT10LnJlZmVyZW5jZVZhbHVlLEhiLmZyb21OYW1lKGUpLnRvU3RyaW5nKCkpOlwiZ2VvUG9pbnRWYWx1ZVwiaW4gdD9cImdlbyhcIisoZT10Lmdlb1BvaW50VmFsdWUpLmxhdGl0dWRlK1wiLFwiK2UubG9uZ2l0dWRlK1wiKVwiOlwiYXJyYXlWYWx1ZVwiaW4gdD9mdW5jdGlvbih0KXtmb3IodmFyIGU9XCJbXCIsbj0hMCxyPTAsaT10LnZhbHVlc3x8W107cjxpLmxlbmd0aDtyKyspbj9uPSExOmUrPVwiLFwiLGUrPWEoaVtyXSk7cmV0dXJuIGUrXCJdXCJ9KHQuYXJyYXlWYWx1ZSk6XCJtYXBWYWx1ZVwiaW4gdD9mdW5jdGlvbih0KXtmb3IodmFyIGU9XCJ7XCIsbj0hMCxyPTAsaT1PYmplY3Qua2V5cyh0LmZpZWxkc3x8e30pLnNvcnQoKTtyPGkubGVuZ3RoO3IrKyl7dmFyIG89aVtyXTtuP249ITE6ZSs9XCIsXCIsZSs9bytcIjpcIithKHQuZmllbGRzW29dKX1yZXR1cm4gZStcIn1cIn0odC5tYXBWYWx1ZSk6aGIoKTt2YXIgZX0odCl9ZnVuY3Rpb24gWmIodCxlKXtyZXR1cm57cmVmZXJlbmNlVmFsdWU6XCJwcm9qZWN0cy9cIit0LnByb2plY3RJZCtcIi9kYXRhYmFzZXMvXCIrdC5kYXRhYmFzZStcIi9kb2N1bWVudHMvXCIrZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpfX1mdW5jdGlvbiB0Xyh0KXtyZXR1cm4gdCYmXCJpbnRlZ2VyVmFsdWVcImluIHR9ZnVuY3Rpb24gZV8odCl7cmV0dXJuISF0JiZcImFycmF5VmFsdWVcImluIHR9ZnVuY3Rpb24gbl8odCl7cmV0dXJuIHQmJlwibnVsbFZhbHVlXCJpbiB0fWZ1bmN0aW9uIHJfKHQpe3JldHVybiB0JiZcImRvdWJsZVZhbHVlXCJpbiB0JiZpc05hTihOdW1iZXIodC5kb3VibGVWYWx1ZSkpfWZ1bmN0aW9uIGlfKHQpe3JldHVybiB0JiZcIm1hcFZhbHVlXCJpbiB0fXZhciBvXz0oYV8uZW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGFfKHttYXBWYWx1ZTp7fX0pfSxhXy5wcm90b3R5cGUuZmllbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFfLmV4dHJhY3ROZXN0ZWRWYWx1ZSh0aGlzLmJ1aWxkUHJvdG8oKSx0KX0sYV8ucHJvdG90eXBlLnRvUHJvdG89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWVsZChOYi5lbXB0eVBhdGgoKSl9LGFfLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt0aGlzLnNldE92ZXJsYXkodCxlKX0sYV8ucHJvdG90eXBlLnNldEFsbD1mdW5jdGlvbih0KXt2YXIgbj10aGlzO3QuZm9yRWFjaChmdW5jdGlvbih0LGUpe3Q/bi5zZXQoZSx0KTpuLmRlbGV0ZShlKX0pfSxhXy5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3RoaXMuc2V0T3ZlcmxheSh0LG51bGwpfSxhXy5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gUWIodGhpcy5idWlsZFByb3RvKCksdC5idWlsZFByb3RvKCkpfSxhXy5wcm90b3R5cGUuc2V0T3ZlcmxheT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLm92ZXJsYXlNYXAscj0wO3I8dC5sZW5ndGgtMTsrK3IpdmFyIGk9dC5nZXQociksbz1uLmdldChpKSxuPShvIGluc3RhbmNlb2YgTWFwfHwobz1vJiYxMD09PXpiKG8pP25ldyBNYXAoT2JqZWN0LmVudHJpZXMoby5tYXBWYWx1ZS5maWVsZHN8fHt9KSk6bmV3IE1hcCxuLnNldChpLG8pKSxvKTtuLnNldCh0Lmxhc3RTZWdtZW50KCksZSl9LGFfLnByb3RvdHlwZS5hcHBseU92ZXJsYXk9ZnVuY3Rpb24ocix0KXt2YXIgaT10aGlzLG89ITEsZT1hXy5leHRyYWN0TmVzdGVkVmFsdWUodGhpcy5wYXJ0aWFsVmFsdWUsciksYT1pXyhlKT9PYmplY3QuYXNzaWduKHt9LGUubWFwVmFsdWUuZmllbGRzKTp7fTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG47dCBpbnN0YW5jZW9mIE1hcD9udWxsIT0obj1pLmFwcGx5T3ZlcmxheShyLmNoaWxkKGUpLHQpKSYmKGFbZV09bixvPSEwKTpudWxsIT09dD8oYVtlXT10LG89ITApOmEuaGFzT3duUHJvcGVydHkoZSkmJihkZWxldGUgYVtlXSxvPSEwKX0pLG8/e21hcFZhbHVlOntmaWVsZHM6YX19Om51bGx9LGFfLnByb3RvdHlwZS5idWlsZFByb3RvPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5hcHBseU92ZXJsYXkoTmIuZW1wdHlQYXRoKCksdGhpcy5vdmVybGF5TWFwKTtyZXR1cm4gbnVsbCE9dCYmKHRoaXMucGFydGlhbFZhbHVlPXQsdGhpcy5vdmVybGF5TWFwLmNsZWFyKCkpLHRoaXMucGFydGlhbFZhbHVlfSxhXy5leHRyYWN0TmVzdGVkVmFsdWU9ZnVuY3Rpb24odCxlKXtpZihlLmlzRW1wdHkoKSlyZXR1cm4gdDtmb3IodmFyIG49dCxyPTA7cjxlLmxlbmd0aC0xOysrcil7aWYoIW4ubWFwVmFsdWUuZmllbGRzKXJldHVybiBudWxsO2lmKCFpXyhuPW4ubWFwVmFsdWUuZmllbGRzW2UuZ2V0KHIpXSkpcmV0dXJuIG51bGx9cmV0dXJuKG49KG4ubWFwVmFsdWUuZmllbGRzfHx7fSlbZS5sYXN0U2VnbWVudCgpXSl8fG51bGx9LGFfLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgYV8odGhpcy5idWlsZFByb3RvKCkpfSxhXyk7ZnVuY3Rpb24gYV8odCl7dGhpcy5vdmVybGF5TWFwPW5ldyBNYXAsdGhpcy5wYXJ0aWFsVmFsdWU9dH12YXIgc189KGNfLm5ld0ludmFsaWREb2N1bWVudD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGNfKHQsMCxtYi5taW4oKSxvXy5lbXB0eSgpLDApfSxjXy5uZXdGb3VuZERvY3VtZW50PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IGNfKHQsMSxlLG4sMCl9LGNfLm5ld05vRG9jdW1lbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGNfKHQsMixlLG9fLmVtcHR5KCksMCl9LGNfLm5ld1Vua25vd25Eb2N1bWVudD1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgY18odCwzLGUsb18uZW1wdHkoKSwyKX0sY18ucHJvdG90eXBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy52ZXJzaW9uPXQsdGhpcy5kb2N1bWVudFR5cGU9MSx0aGlzLmRhdGE9ZSx0aGlzLmRvY3VtZW50U3RhdGU9MCx0aGlzfSxjXy5wcm90b3R5cGUuY29udmVydFRvTm9Eb2N1bWVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy52ZXJzaW9uPXQsdGhpcy5kb2N1bWVudFR5cGU9Mix0aGlzLmRhdGE9b18uZW1wdHkoKSx0aGlzLmRvY3VtZW50U3RhdGU9MCx0aGlzfSxjXy5wcm90b3R5cGUuY29udmVydFRvVW5rbm93bkRvY3VtZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZlcnNpb249dCx0aGlzLmRvY3VtZW50VHlwZT0zLHRoaXMuZGF0YT1vXy5lbXB0eSgpLHRoaXMuZG9jdW1lbnRTdGF0ZT0yLHRoaXN9LGNfLnByb3RvdHlwZS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlPTIsdGhpc30sY18ucHJvdG90eXBlLnNldEhhc0xvY2FsTXV0YXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZT0xLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjXy5wcm90b3R5cGUsXCJoYXNMb2NhbE11dGF0aW9uc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMuZG9jdW1lbnRTdGF0ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoY18ucHJvdG90eXBlLFwiaGFzQ29tbWl0dGVkTXV0YXRpb25zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiAyPT09dGhpcy5kb2N1bWVudFN0YXRlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjXy5wcm90b3R5cGUsXCJoYXNQZW5kaW5nV3JpdGVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0xvY2FsTXV0YXRpb25zfHx0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9uc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxjXy5wcm90b3R5cGUuaXNWYWxpZERvY3VtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLmRvY3VtZW50VHlwZX0sY18ucHJvdG90eXBlLmlzRm91bmREb2N1bWVudD1mdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5kb2N1bWVudFR5cGV9LGNfLnByb3RvdHlwZS5pc05vRG9jdW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXRoaXMuZG9jdW1lbnRUeXBlfSxjXy5wcm90b3R5cGUuaXNVbmtub3duRG9jdW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gMz09PXRoaXMuZG9jdW1lbnRUeXBlfSxjXy5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGNfJiZ0aGlzLmtleS5pc0VxdWFsKHQua2V5KSYmdGhpcy52ZXJzaW9uLmlzRXF1YWwodC52ZXJzaW9uKSYmdGhpcy5kb2N1bWVudFR5cGU9PT10LmRvY3VtZW50VHlwZSYmdGhpcy5kb2N1bWVudFN0YXRlPT09dC5kb2N1bWVudFN0YXRlJiZ0aGlzLmRhdGEuaXNFcXVhbCh0LmRhdGEpfSxjXy5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGNfKHRoaXMua2V5LHRoaXMuZG9jdW1lbnRUeXBlLHRoaXMudmVyc2lvbix0aGlzLmRhdGEuY2xvbmUoKSx0aGlzLmRvY3VtZW50U3RhdGUpfSxjXy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIkRvY3VtZW50KFwiK3RoaXMua2V5K1wiLCBcIit0aGlzLnZlcnNpb24rXCIsIFwiK0pTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS50b1Byb3RvKCkpK1wiLCB7ZG9jdW1lbnRUeXBlOiBcIit0aGlzLmRvY3VtZW50VHlwZStcIn0pLCB7ZG9jdW1lbnRTdGF0ZTogXCIrdGhpcy5kb2N1bWVudFN0YXRlK1wifSlcIn0sY18pLHVfPWZ1bmN0aW9uKHQsZSxuLHIsaSxvLGEpe3ZvaWQgMD09PWUmJihlPW51bGwpLHZvaWQgMD09PW4mJihuPVtdKSx2b2lkIDA9PT1yJiYocj1bXSksdm9pZCAwPT09aSYmKGk9bnVsbCksdm9pZCAwPT09byYmKG89bnVsbCksdm9pZCAwPT09YSYmKGE9bnVsbCksdGhpcy5wYXRoPXQsdGhpcy5jb2xsZWN0aW9uR3JvdXA9ZSx0aGlzLm9yZGVyQnk9bix0aGlzLmZpbHRlcnM9cix0aGlzLmxpbWl0PWksdGhpcy5zdGFydEF0PW8sdGhpcy5lbmRBdD1hLHRoaXMuaD1udWxsfTtmdW5jdGlvbiBjXyh0LGUsbixyLGkpe3RoaXMua2V5PXQsdGhpcy5kb2N1bWVudFR5cGU9ZSx0aGlzLnZlcnNpb249bix0aGlzLmRhdGE9cix0aGlzLmRvY3VtZW50U3RhdGU9aX1mdW5jdGlvbiBoXyh0LGUsbixyLGksbyxhKXtyZXR1cm4gbmV3IHVfKHQsZT12b2lkIDA9PT1lP251bGw6ZSxuPXZvaWQgMD09PW4/W106bixyPXZvaWQgMD09PXI/W106cixpPXZvaWQgMD09PWk/bnVsbDppLG89dm9pZCAwPT09bz9udWxsOm8sYT12b2lkIDA9PT1hP251bGw6YSl9ZnVuY3Rpb24gbF8odCl7dmFyIGU9dDtyZXR1cm4gbnVsbD09PWUuaCYmKHQ9ZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpLG51bGwhPT1lLmNvbGxlY3Rpb25Hcm91cCYmKHQrPVwifGNnOlwiK2UuY29sbGVjdGlvbkdyb3VwKSx0Kz1cInxmOlwiLHQrPWUuZmlsdGVycy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuKHQ9dCkuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkrdC5vcC50b1N0cmluZygpKyRiKHQudmFsdWUpfSkuam9pbihcIixcIiksdCs9XCJ8b2I6XCIsdCs9ZS5vcmRlckJ5Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4odD10KS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSt0LmRpcn0pLmpvaW4oXCIsXCIpLEJiKGUubGltaXQpfHwodCs9XCJ8bDpcIix0Kz1lLmxpbWl0KSxlLnN0YXJ0QXQmJih0Kz1cInxsYjpcIix0Kz1xXyhlLnN0YXJ0QXQpKSxlLmVuZEF0JiYodCs9XCJ8dWI6XCIsdCs9cV8oZS5lbmRBdCkpLGUuaD10KSxlLmh9ZnVuY3Rpb24gZl8odCxlKXtpZih0LmxpbWl0IT09ZS5saW1pdClyZXR1cm4hMTtpZih0Lm9yZGVyQnkubGVuZ3RoIT09ZS5vcmRlckJ5Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG4scixpPTA7aTx0Lm9yZGVyQnkubGVuZ3RoO2krKylpZihuPXQub3JkZXJCeVtpXSxyPWUub3JkZXJCeVtpXSxuLmRpciE9PXIuZGlyfHwhbi5maWVsZC5pc0VxdWFsKHIuZmllbGQpKXJldHVybiExO2lmKHQuZmlsdGVycy5sZW5ndGghPT1lLmZpbHRlcnMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbyxhLHM9MDtzPHQuZmlsdGVycy5sZW5ndGg7cysrKWlmKG89dC5maWx0ZXJzW3NdLGE9ZS5maWx0ZXJzW3NdLG8ub3AhPT1hLm9wfHwhby5maWVsZC5pc0VxdWFsKGEuZmllbGQpfHwhUWIoby52YWx1ZSxhLnZhbHVlKSlyZXR1cm4hMTtyZXR1cm4gdC5jb2xsZWN0aW9uR3JvdXA9PT1lLmNvbGxlY3Rpb25Hcm91cCYmISF0LnBhdGguaXNFcXVhbChlLnBhdGgpJiYhIUtfKHQuc3RhcnRBdCxlLnN0YXJ0QXQpJiZLXyh0LmVuZEF0LGUuZW5kQXQpfWZ1bmN0aW9uIHBfKHQpe3JldHVybiBIYi5pc0RvY3VtZW50S2V5KHQucGF0aCkmJm51bGw9PT10LmNvbGxlY3Rpb25Hcm91cCYmMD09PXQuZmlsdGVycy5sZW5ndGh9dmFyIGRfLHZfPShYaShnXyxkXz1mdW5jdGlvbigpe30pLGdfLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQuaXNLZXlGaWVsZCgpP1wiaW5cIj09PWV8fFwibm90LWluXCI9PT1lP3RoaXMubCh0LGUsbik6bmV3IF9fKHQsZSxuKTpcImFycmF5LWNvbnRhaW5zXCI9PT1lP25ldyBQXyh0LG4pOlwiaW5cIj09PWU/bmV3IE9fKHQsbik6XCJub3QtaW5cIj09PWU/bmV3IERfKHQsbik6XCJhcnJheS1jb250YWlucy1hbnlcIj09PWU/bmV3IHhfKHQsbik6bmV3IGdfKHQsZSxuKX0sZ18ubD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG5ldyhcImluXCI9PT1lP3dfOklfKSh0LG4pfSxnXy5wcm90b3R5cGUubWF0Y2hlcz1mdW5jdGlvbih0KXt0PXQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtyZXR1cm5cIiE9XCI9PT10aGlzLm9wP251bGwhPT10JiZ0aGlzLm0oWGIodCx0aGlzLnZhbHVlKSk6bnVsbCE9PXQmJnpiKHRoaXMudmFsdWUpPT09emIodCkmJnRoaXMubShYYih0LHRoaXMudmFsdWUpKX0sZ18ucHJvdG90eXBlLm09ZnVuY3Rpb24odCl7c3dpdGNoKHRoaXMub3Ape2Nhc2VcIjxcIjpyZXR1cm4gdDwwO2Nhc2VcIjw9XCI6cmV0dXJuIHQ8PTA7Y2FzZVwiPT1cIjpyZXR1cm4gMD09PXQ7Y2FzZVwiIT1cIjpyZXR1cm4gMCE9PXQ7Y2FzZVwiPlwiOnJldHVybiAwPHQ7Y2FzZVwiPj1cIjpyZXR1cm4gMDw9dDtkZWZhdWx0OnJldHVybiBoYigpfX0sZ18ucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gMDw9W1wiPFwiLFwiPD1cIixcIj5cIixcIj49XCIsXCIhPVwiLFwibm90LWluXCJdLmluZGV4T2YodGhpcy5vcCl9LGdfKTtmdW5jdGlvbiBnXyh0LGUsbil7dmFyIHI9dGhpcztyZXR1cm4ocj1kXy5jYWxsKHRoaXMpfHx0aGlzKS5maWVsZD10LHIub3A9ZSxyLnZhbHVlPW4scn12YXIgeV8sbV8sYl8sX189KFhpKFNfLGJfPXZfKSxTXy5wcm90b3R5cGUubWF0Y2hlcz1mdW5jdGlvbih0KXt0PUhiLmNvbXBhcmF0b3IodC5rZXksdGhpcy5rZXkpO3JldHVybiB0aGlzLm0odCl9LFNfKSx3Xz0oWGkoRV8sbV89dl8pLEVfLnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmtleXMuc29tZShmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0VxdWFsKGUua2V5KX0pfSxFXyksSV89KFhpKFRfLHlfPXZfKSxUXy5wcm90b3R5cGUubWF0Y2hlcz1mdW5jdGlvbihlKXtyZXR1cm4hdGhpcy5rZXlzLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNFcXVhbChlLmtleSl9KX0sVF8pO2Z1bmN0aW9uIFRfKHQsZSl7dmFyIG49dGhpcztyZXR1cm4obj15Xy5jYWxsKHRoaXMsdCxcIm5vdC1pblwiLGUpfHx0aGlzKS5rZXlzPUNfKDAsZSksbn1mdW5jdGlvbiBFXyh0LGUpe3ZhciBuPXRoaXM7cmV0dXJuKG49bV8uY2FsbCh0aGlzLHQsXCJpblwiLGUpfHx0aGlzKS5rZXlzPUNfKDAsZSksbn1mdW5jdGlvbiBTXyh0LGUsbil7dmFyIHI9dGhpcztyZXR1cm4ocj1iXy5jYWxsKHRoaXMsdCxlLG4pfHx0aGlzKS5rZXk9SGIuZnJvbU5hbWUobi5yZWZlcmVuY2VWYWx1ZSkscn1mdW5jdGlvbiBDXyh0LGUpe3JldHVybigobnVsbD09PShlPWUuYXJyYXlWYWx1ZSl8fHZvaWQgMD09PWU/dm9pZCAwOmUudmFsdWVzKXx8W10pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gSGIuZnJvbU5hbWUodC5yZWZlcmVuY2VWYWx1ZSl9KX12YXIga18sTl8sQV8sUl8sUF89KFhpKGpfLFJfPXZfKSxqXy5wcm90b3R5cGUubWF0Y2hlcz1mdW5jdGlvbih0KXt0PXQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtyZXR1cm4gZV8odCkmJlliKHQuYXJyYXlWYWx1ZSx0aGlzLnZhbHVlKX0sal8pLE9fPShYaShVXyxBXz12XyksVV8ucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24odCl7dD10LmRhdGEuZmllbGQodGhpcy5maWVsZCk7cmV0dXJuIG51bGwhPT10JiZZYih0aGlzLnZhbHVlLmFycmF5VmFsdWUsdCl9LFVfKSxEXz0oWGkoRl8sTl89dl8pLEZfLnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKHQpe2lmKFliKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSx7bnVsbFZhbHVlOlwiTlVMTF9WQUxVRVwifSkpcmV0dXJuITE7dD10LmRhdGEuZmllbGQodGhpcy5maWVsZCk7cmV0dXJuIG51bGwhPT10JiYhWWIodGhpcy52YWx1ZS5hcnJheVZhbHVlLHQpfSxGXykseF89KFhpKE1fLGtfPXZfKSxNXy5wcm90b3R5cGUubWF0Y2hlcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLHQ9dC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO3JldHVybiEoIWVfKHQpfHwhdC5hcnJheVZhbHVlLnZhbHVlcykmJnQuYXJyYXlWYWx1ZS52YWx1ZXMuc29tZShmdW5jdGlvbih0KXtyZXR1cm4gWWIoZS52YWx1ZS5hcnJheVZhbHVlLHQpfSl9LE1fKSxMXz1mdW5jdGlvbih0LGUpe3RoaXMucG9zaXRpb249dCx0aGlzLmJlZm9yZT1lfTtmdW5jdGlvbiBNXyh0LGUpe3JldHVybiBrXy5jYWxsKHRoaXMsdCxcImFycmF5LWNvbnRhaW5zLWFueVwiLGUpfHx0aGlzfWZ1bmN0aW9uIEZfKHQsZSl7cmV0dXJuIE5fLmNhbGwodGhpcyx0LFwibm90LWluXCIsZSl8fHRoaXN9ZnVuY3Rpb24gVV8odCxlKXtyZXR1cm4gQV8uY2FsbCh0aGlzLHQsXCJpblwiLGUpfHx0aGlzfWZ1bmN0aW9uIGpfKHQsZSl7cmV0dXJuIFJfLmNhbGwodGhpcyx0LFwiYXJyYXktY29udGFpbnNcIixlKXx8dGhpc31mdW5jdGlvbiBxXyh0KXtyZXR1cm4odC5iZWZvcmU/XCJiXCI6XCJhXCIpK1wiOlwiK3QucG9zaXRpb24ubWFwKCRiKS5qb2luKFwiLFwiKX12YXIgVl89ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1cImFzY1wiKSx0aGlzLmZpZWxkPXQsdGhpcy5kaXI9ZX07ZnVuY3Rpb24gQl8odCxlLG4pe2Zvcih2YXIgcj0wLGk9MDtpPHQucG9zaXRpb24ubGVuZ3RoO2krKyl7dmFyIG89ZVtpXSxhPXQucG9zaXRpb25baV0scj1vLmZpZWxkLmlzS2V5RmllbGQoKT9IYi5jb21wYXJhdG9yKEhiLmZyb21OYW1lKGEucmVmZXJlbmNlVmFsdWUpLG4ua2V5KTpYYihhLG4uZGF0YS5maWVsZChvLmZpZWxkKSk7aWYoXCJkZXNjXCI9PT1vLmRpciYmKHIqPS0xKSwwIT09cilicmVha31yZXR1cm4gdC5iZWZvcmU/cjw9MDpyPDB9ZnVuY3Rpb24gS18odCxlKXtpZihudWxsPT09dClyZXR1cm4gbnVsbD09PWU7aWYobnVsbD09PWUpcmV0dXJuITE7aWYodC5iZWZvcmUhPT1lLmJlZm9yZXx8dC5wb3NpdGlvbi5sZW5ndGghPT1lLnBvc2l0aW9uLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQucG9zaXRpb24ubGVuZ3RoO24rKylpZighUWIodC5wb3NpdGlvbltuXSxlLnBvc2l0aW9uW25dKSlyZXR1cm4hMTtyZXR1cm4hMH12YXIgV189ZnVuY3Rpb24odCxlLG4scixpLG8sYSxzKXt2b2lkIDA9PT1lJiYoZT1udWxsKSx2b2lkIDA9PT1uJiYobj1bXSksdm9pZCAwPT09ciYmKHI9W10pLHZvaWQgMD09PWkmJihpPW51bGwpLHZvaWQgMD09PW8mJihvPVwiRlwiKSx2b2lkIDA9PT1hJiYoYT1udWxsKSx2b2lkIDA9PT1zJiYocz1udWxsKSx0aGlzLnBhdGg9dCx0aGlzLmNvbGxlY3Rpb25Hcm91cD1lLHRoaXMuZXhwbGljaXRPcmRlckJ5PW4sdGhpcy5maWx0ZXJzPXIsdGhpcy5saW1pdD1pLHRoaXMubGltaXRUeXBlPW8sdGhpcy5zdGFydEF0PWEsdGhpcy5lbmRBdD1zLHRoaXMucD1udWxsLHRoaXMuVD1udWxsLHRoaXMuc3RhcnRBdCx0aGlzLmVuZEF0fTtmdW5jdGlvbiBIXyh0LGUsbixyLGksbyxhLHMpe3JldHVybiBuZXcgV18odCxlLG4scixpLG8sYSxzKX1mdW5jdGlvbiBHXyh0KXtyZXR1cm4gbmV3IFdfKHQpfWZ1bmN0aW9uIHpfKHQpe3JldHVybiFCYih0LmxpbWl0KSYmXCJGXCI9PT10LmxpbWl0VHlwZX1mdW5jdGlvbiBRXyh0KXtyZXR1cm4hQmIodC5saW1pdCkmJlwiTFwiPT09dC5saW1pdFR5cGV9ZnVuY3Rpb24gWV8odCl7cmV0dXJuIDA8dC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoP3QuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkOm51bGx9ZnVuY3Rpb24gWF8odCl7Zm9yKHZhciBlPTAsbj10LmZpbHRlcnM7ZTxuLmxlbmd0aDtlKyspe3ZhciByPW5bZV07aWYoci5nKCkpcmV0dXJuIHIuZmllbGR9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSl8odCl7cmV0dXJuIG51bGwhPT10LmNvbGxlY3Rpb25Hcm91cH1mdW5jdGlvbiAkXyh0KXt2YXIgZT10O2lmKG51bGw9PT1lLnApe2UucD1bXTt2YXIgbj1YXyhlKSx0PVlfKGUpO2lmKG51bGwhPT1uJiZudWxsPT09dCluLmlzS2V5RmllbGQoKXx8ZS5wLnB1c2gobmV3IFZfKG4pKSxlLnAucHVzaChuZXcgVl8oTmIua2V5RmllbGQoKSxcImFzY1wiKSk7ZWxzZXtmb3IodmFyIHI9ITEsaT0wLG89ZS5leHBsaWNpdE9yZGVyQnk7aTxvLmxlbmd0aDtpKyspe3ZhciBhPW9baV07ZS5wLnB1c2goYSksYS5maWVsZC5pc0tleUZpZWxkKCkmJihyPSEwKX1yfHwobj0wPGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aD9lLmV4cGxpY2l0T3JkZXJCeVtlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGgtMV0uZGlyOlwiYXNjXCIsZS5wLnB1c2gobmV3IFZfKE5iLmtleUZpZWxkKCksbikpKX19cmV0dXJuIGUucH1mdW5jdGlvbiBaXyh0KXt2YXIgZT10O2lmKCFlLlQpaWYoXCJGXCI9PT1lLmxpbWl0VHlwZSllLlQ9aF8oZS5wYXRoLGUuY29sbGVjdGlvbkdyb3VwLCRfKGUpLGUuZmlsdGVycyxlLmxpbWl0LGUuc3RhcnRBdCxlLmVuZEF0KTtlbHNle2Zvcih2YXIgbj1bXSxyPTAsaT0kXyhlKTtyPGkubGVuZ3RoO3IrKyl7dmFyIG89aVtyXSxhPVwiZGVzY1wiPT09by5kaXI/XCJhc2NcIjpcImRlc2NcIjtuLnB1c2gobmV3IFZfKG8uZmllbGQsYSkpfXZhciBzPWUuZW5kQXQ/bmV3IExfKGUuZW5kQXQucG9zaXRpb24sIWUuZW5kQXQuYmVmb3JlKTpudWxsLHQ9ZS5zdGFydEF0P25ldyBMXyhlLnN0YXJ0QXQucG9zaXRpb24sIWUuc3RhcnRBdC5iZWZvcmUpOm51bGw7ZS5UPWhfKGUucGF0aCxlLmNvbGxlY3Rpb25Hcm91cCxuLGUuZmlsdGVycyxlLmxpbWl0LHMsdCl9cmV0dXJuIGUuVH1mdW5jdGlvbiB0dyh0LGUsbil7cmV0dXJuIG5ldyBXXyh0LnBhdGgsdC5jb2xsZWN0aW9uR3JvdXAsdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSx0LmZpbHRlcnMuc2xpY2UoKSxlLG4sdC5zdGFydEF0LHQuZW5kQXQpfWZ1bmN0aW9uIGV3KHQsZSl7cmV0dXJuIGZfKFpfKHQpLFpfKGUpKSYmdC5saW1pdFR5cGU9PT1lLmxpbWl0VHlwZX1mdW5jdGlvbiBudyh0KXtyZXR1cm4gbF8oWl8odCkpK1wifGx0OlwiK3QubGltaXRUeXBlfWZ1bmN0aW9uIHJ3KHQpe3JldHVyblwiUXVlcnkodGFyZ2V0PVwiKyhlPVpfKHQpLG49ZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpLG51bGwhPT1lLmNvbGxlY3Rpb25Hcm91cCYmKG4rPVwiIGNvbGxlY3Rpb25Hcm91cD1cIitlLmNvbGxlY3Rpb25Hcm91cCksMDxlLmZpbHRlcnMubGVuZ3RoJiYobis9XCIsIGZpbHRlcnM6IFtcIitlLmZpbHRlcnMubWFwKGZ1bmN0aW9uKHQpe3JldHVybih0PXQpLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpK1wiIFwiK3Qub3ArXCIgXCIrJGIodC52YWx1ZSl9KS5qb2luKFwiLCBcIikrXCJdXCIpLEJiKGUubGltaXQpfHwobis9XCIsIGxpbWl0OiBcIitlLmxpbWl0KSwwPGUub3JkZXJCeS5sZW5ndGgmJihuKz1cIiwgb3JkZXJCeTogW1wiK2Uub3JkZXJCeS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuKHQ9dCkuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkrXCIgKFwiK3QuZGlyK1wiKVwifSkuam9pbihcIiwgXCIpK1wiXVwiKSxlLnN0YXJ0QXQmJihuKz1cIiwgc3RhcnRBdDogXCIrcV8oZS5zdGFydEF0KSksZS5lbmRBdCYmKG4rPVwiLCBlbmRBdDogXCIrcV8oZS5lbmRBdCkpLFwiVGFyZ2V0KFwiK24rXCIpXCIpK1wiOyBsaW1pdFR5cGU9XCIrdC5saW1pdFR5cGUrXCIpXCI7dmFyIGUsbn1mdW5jdGlvbiBpdyhpLHQpe3JldHVybiB0LmlzRm91bmREb2N1bWVudCgpJiYoZT1pLG49dC5rZXkucGF0aCxudWxsIT09ZS5jb2xsZWN0aW9uR3JvdXA/dC5rZXkuaGFzQ29sbGVjdGlvbklkKGUuY29sbGVjdGlvbkdyb3VwKSYmZS5wYXRoLmlzUHJlZml4T2Yobik6SGIuaXNEb2N1bWVudEtleShlLnBhdGgpP2UucGF0aC5pc0VxdWFsKG4pOmUucGF0aC5pc0ltbWVkaWF0ZVBhcmVudE9mKG4pKSYmZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj1pLmV4cGxpY2l0T3JkZXJCeTtlPG4ubGVuZ3RoO2UrKyl7dmFyIHI9bltlXTtpZighci5maWVsZC5pc0tleUZpZWxkKCkmJm51bGw9PT10LmRhdGEuZmllbGQoci5maWVsZCkpcmV0dXJufXJldHVybiAxfSh0KSYmZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj1pLmZpbHRlcnM7ZTxuLmxlbmd0aDtlKyspaWYoIW5bZV0ubWF0Y2hlcyh0KSlyZXR1cm47cmV0dXJuIDF9KHQpJiYobj10LCghKHQ9aSkuc3RhcnRBdHx8Ql8odC5zdGFydEF0LCRfKHQpLG4pKSYmKCF0LmVuZEF0fHwhQl8odC5lbmRBdCwkXyh0KSxuKSkpO3ZhciBlLG59ZnVuY3Rpb24gb3cocyl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPSExLHI9MCxpPSRfKHMpO3I8aS5sZW5ndGg7cisrKXt2YXIgbz1pW3JdLGE9ZnVuY3Rpb24odCxyLGUpe3ZhciBuPXQuZmllbGQuaXNLZXlGaWVsZCgpP0hiLmNvbXBhcmF0b3Ioci5rZXksZS5rZXkpOmZ1bmN0aW9uKHQsZSl7dmFyIG49ci5kYXRhLmZpZWxkKHQpLHQ9ZS5kYXRhLmZpZWxkKHQpO3JldHVybiBudWxsIT09biYmbnVsbCE9PXQ/WGIobix0KTpoYigpfSh0LmZpZWxkLGUpO3N3aXRjaCh0LmRpcil7Y2FzZVwiYXNjXCI6cmV0dXJuIG47Y2FzZVwiZGVzY1wiOnJldHVybi0xKm47ZGVmYXVsdDpyZXR1cm4gaGIoKX19KG8sdCxlKTtpZigwIT09YSlyZXR1cm4gYTtuPW58fG8uZmllbGQuaXNLZXlGaWVsZCgpfXJldHVybiAwfX1mdW5jdGlvbiBhdyh0LGUpe2lmKHQuSSl7aWYoaXNOYU4oZSkpcmV0dXJue2RvdWJsZVZhbHVlOlwiTmFOXCJ9O2lmKGU9PT0xLzApcmV0dXJue2RvdWJsZVZhbHVlOlwiSW5maW5pdHlcIn07aWYoZT09PS0xLzApcmV0dXJue2RvdWJsZVZhbHVlOlwiLUluZmluaXR5XCJ9fXJldHVybntkb3VibGVWYWx1ZTpLYihlKT9cIi0wXCI6ZX19ZnVuY3Rpb24gc3codCl7cmV0dXJue2ludGVnZXJWYWx1ZTpcIlwiK3R9fWZ1bmN0aW9uIHV3KHQsZSl7cmV0dXJuIFdiKGUpP3N3KGUpOmF3KHQsZSl9Rz1mdW5jdGlvbigpe3RoaXMuXz12b2lkIDB9O2Z1bmN0aW9uIGN3KHQsZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBJdz90Xyh0PWUpfHx0JiZcImRvdWJsZVZhbHVlXCJpbiB0P2U6e2ludGVnZXJWYWx1ZTowfTpudWxsfXZhciBodyxsdyxmdz0oWGkodncsbHc9RyksdncpLHB3PShYaShkdyxodz1HKSxkdyk7ZnVuY3Rpb24gZHcodCl7dmFyIGU9dGhpcztyZXR1cm4oZT1ody5jYWxsKHRoaXMpfHx0aGlzKS5lbGVtZW50cz10LGV9ZnVuY3Rpb24gdncoKXtyZXR1cm4gbnVsbCE9PWx3JiZsdy5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9ZnVuY3Rpb24gZ3codCxlKXtmb3IodmFyIG49U3coZSkscj0wLGk9dC5lbGVtZW50cztyPGkubGVuZ3RoO3IrKykhZnVuY3Rpb24oZSl7bi5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiBRYih0LGUpfSl8fG4ucHVzaChlKX0oaVtyXSk7cmV0dXJue2FycmF5VmFsdWU6e3ZhbHVlczpufX19dmFyIHl3LG13PShYaShidyx5dz1HKSxidyk7ZnVuY3Rpb24gYncodCl7dmFyIGU9dGhpcztyZXR1cm4oZT15dy5jYWxsKHRoaXMpfHx0aGlzKS5lbGVtZW50cz10LGV9ZnVuY3Rpb24gX3codCxlKXtmb3IodmFyIG49U3coZSkscj0wLGk9dC5lbGVtZW50cztyPGkubGVuZ3RoO3IrKykhZnVuY3Rpb24oZSl7bj1uLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4hUWIodCxlKX0pfShpW3JdKTtyZXR1cm57YXJyYXlWYWx1ZTp7dmFsdWVzOm59fX12YXIgd3csSXc9KFhpKFR3LHd3PUcpLFR3KTtmdW5jdGlvbiBUdyh0LGUpe3ZhciBuPXRoaXM7cmV0dXJuKG49d3cuY2FsbCh0aGlzKXx8dGhpcykuUj10LG4uQT1lLG59ZnVuY3Rpb24gRXcodCl7cmV0dXJuIFViKHQuaW50ZWdlclZhbHVlfHx0LmRvdWJsZVZhbHVlKX1mdW5jdGlvbiBTdyh0KXtyZXR1cm4gZV8odCkmJnQuYXJyYXlWYWx1ZS52YWx1ZXM/dC5hcnJheVZhbHVlLnZhbHVlcy5zbGljZSgpOltdfWZ1bmN0aW9uIEN3KHQsZSl7dGhpcy52ZXJzaW9uPXQsdGhpcy50cmFuc2Zvcm1SZXN1bHRzPWV9dmFyIGt3PWZ1bmN0aW9uKHQsZSl7dGhpcy5maWVsZD10LHRoaXMudHJhbnNmb3JtPWV9LE53PShBdy5ub25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBd30sQXcuZXhpc3RzPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgQXcodm9pZCAwLHQpfSxBdy51cGRhdGVUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgQXcodCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdy5wcm90b3R5cGUsXCJpc05vbmVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMudXBkYXRlVGltZSYmdm9pZCAwPT09dGhpcy5leGlzdHN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksQXcucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXhpc3RzPT09dC5leGlzdHMmJih0aGlzLnVwZGF0ZVRpbWU/ISF0LnVwZGF0ZVRpbWUmJnRoaXMudXBkYXRlVGltZS5pc0VxdWFsKHQudXBkYXRlVGltZSk6IXQudXBkYXRlVGltZSl9LEF3KTtmdW5jdGlvbiBBdyh0LGUpe3RoaXMudXBkYXRlVGltZT10LHRoaXMuZXhpc3RzPWV9ZnVuY3Rpb24gUncodCxlKXtyZXR1cm4gdm9pZCAwIT09dC51cGRhdGVUaW1lP2UuaXNGb3VuZERvY3VtZW50KCkmJmUudmVyc2lvbi5pc0VxdWFsKHQudXBkYXRlVGltZSk6dm9pZCAwPT09dC5leGlzdHN8fHQuZXhpc3RzPT09ZS5pc0ZvdW5kRG9jdW1lbnQoKX1Tbj1mdW5jdGlvbigpe307ZnVuY3Rpb24gUHcodCxlLG4pe3ZhciByLGksbyxhO3QgaW5zdGFuY2VvZiBNdz8oaT1lLG89bixSdygocj10KS5wcmVjb25kaXRpb24saSkmJihhPXIudmFsdWUuY2xvbmUoKSxvPUJ3KHIuZmllbGRUcmFuc2Zvcm1zLG8saSksYS5zZXRBbGwobyksaS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KER3KGkpLGEpLnNldEhhc0xvY2FsTXV0YXRpb25zKCkpKTp0IGluc3RhbmNlb2YgRnc/KG89ZSxpPW4sUncoKGE9dCkucHJlY29uZGl0aW9uLG8pJiYobj1CdyhhLmZpZWxkVHJhbnNmb3JtcyxpLG8pLChpPW8uZGF0YSkuc2V0QWxsKHF3KGEpKSxpLnNldEFsbChuKSxvLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoRHcobyksaSkuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSkpOihlPWUsUncodC5wcmVjb25kaXRpb24sZSkmJmUuY29udmVydFRvTm9Eb2N1bWVudChtYi5taW4oKSkpfWZ1bmN0aW9uIE93KHQsZSl7cmV0dXJuIHQudHlwZT09PWUudHlwZSYmISF0LmtleS5pc0VxdWFsKGUua2V5KSYmISF0LnByZWNvbmRpdGlvbi5pc0VxdWFsKGUucHJlY29uZGl0aW9uKSYmKG49dC5maWVsZFRyYW5zZm9ybXMscj1lLmZpZWxkVHJhbnNmb3JtcywhISh2b2lkIDA9PT1uJiZ2b2lkIDA9PT1yfHxuJiZyJiZ2YihuLHIsZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1lLCh0PXQpLmZpZWxkLmlzRXF1YWwoZS5maWVsZCkmJih0PXQudHJhbnNmb3JtLGU9ZS50cmFuc2Zvcm0sdCBpbnN0YW5jZW9mIHB3JiZlIGluc3RhbmNlb2YgcHd8fHQgaW5zdGFuY2VvZiBtdyYmZSBpbnN0YW5jZW9mIG13P3ZiKHQuZWxlbWVudHMsZS5lbGVtZW50cyxRYik6dCBpbnN0YW5jZW9mIEl3JiZlIGluc3RhbmNlb2YgSXc/UWIodC5BLGUuQSk6dCBpbnN0YW5jZW9mIGZ3JiZlIGluc3RhbmNlb2YgZncpfSkpKSYmKDA9PT10LnR5cGU/dC52YWx1ZS5pc0VxdWFsKGUudmFsdWUpOjEhPT10LnR5cGV8fHQuZGF0YS5pc0VxdWFsKGUuZGF0YSkmJnQuZmllbGRNYXNrLmlzRXF1YWwoZS5maWVsZE1hc2spKTt2YXIgbixyfWZ1bmN0aW9uIER3KHQpe3JldHVybiB0LmlzRm91bmREb2N1bWVudCgpP3QudmVyc2lvbjptYi5taW4oKX12YXIgeHcsTHcsTXc9KFhpKGp3LEx3PVNuKSxqdyksRnc9KFhpKFV3LHh3PVNuKSxVdyk7ZnVuY3Rpb24gVXcodCxlLG4scixpKXt2b2lkIDA9PT1pJiYoaT1bXSk7dmFyIG89dGhpcztyZXR1cm4obz14dy5jYWxsKHRoaXMpfHx0aGlzKS5rZXk9dCxvLmRhdGE9ZSxvLmZpZWxkTWFzaz1uLG8ucHJlY29uZGl0aW9uPXIsby5maWVsZFRyYW5zZm9ybXM9aSxvLnR5cGU9MSxvfWZ1bmN0aW9uIGp3KHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPVtdKTt2YXIgaT10aGlzO3JldHVybihpPUx3LmNhbGwodGhpcyl8fHRoaXMpLmtleT10LGkudmFsdWU9ZSxpLnByZWNvbmRpdGlvbj1uLGkuZmllbGRUcmFuc2Zvcm1zPXIsaS50eXBlPTAsaX1mdW5jdGlvbiBxdyhuKXt2YXIgcj1uZXcgTWFwO3JldHVybiBuLmZpZWxkTWFzay5maWVsZHMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZTt0LmlzRW1wdHkoKXx8KGU9bi5kYXRhLmZpZWxkKHQpLHIuc2V0KHQsZSkpfSkscn1mdW5jdGlvbiBWdyh0LGUsbil7dmFyIHI9bmV3IE1hcDtsYih0Lmxlbmd0aD09PW4ubGVuZ3RoKTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIG89dFtpXSxhPW8udHJhbnNmb3JtLHM9ZS5kYXRhLmZpZWxkKG8uZmllbGQpO3Iuc2V0KG8uZmllbGQsKG89YSxhPXMscz1uW2ldLG8gaW5zdGFuY2VvZiBwdz9ndyhvLGEpOm8gaW5zdGFuY2VvZiBtdz9fdyhvLGEpOnMpKX1yZXR1cm4gcn1mdW5jdGlvbiBCdyh0LGUsbil7Zm9yKHZhciByLGk9bmV3IE1hcCxvPTAsYT10O288YS5sZW5ndGg7bysrKXt2YXIgcz1hW29dLHU9cy50cmFuc2Zvcm0sYz1uLmRhdGEuZmllbGQocy5maWVsZCk7aS5zZXQocy5maWVsZCwocj1jLHM9ZSxjPXZvaWQgMCwodT11KWluc3RhbmNlb2YgZnc/KGM9e2ZpZWxkczp7X190eXBlX186e3N0cmluZ1ZhbHVlOlwic2VydmVyX3RpbWVzdGFtcFwifSxfX2xvY2FsX3dyaXRlX3RpbWVfXzp7dGltZXN0YW1wVmFsdWU6e3NlY29uZHM6cy5zZWNvbmRzLG5hbm9zOnMubmFub3NlY29uZHN9fX19LHImJihjLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX189cikse21hcFZhbHVlOmN9KTp1IGluc3RhbmNlb2YgcHc/Z3codSxyKTp1IGluc3RhbmNlb2YgbXc/X3codSxyKToodT1jdyhjPXUscikscj1Fdyh1KStFdyhjLkEpLHRfKHUpJiZ0XyhjLkEpP3N3KHIpOmF3KGMuUixyKSkpKX1yZXR1cm4gaX1mdW5jdGlvbiBLdyh0KXt0aGlzLmNvdW50PXR9dmFyIFd3LEh3LEd3LHp3PShYaShYdyxHdz1TbiksWHcpLFF3PShYaShZdyxIdz1TbiksWXcpO2Z1bmN0aW9uIFl3KHQsZSl7dmFyIG49dGhpcztyZXR1cm4obj1Idy5jYWxsKHRoaXMpfHx0aGlzKS5rZXk9dCxuLnByZWNvbmRpdGlvbj1lLG4udHlwZT0zLG4uZmllbGRUcmFuc2Zvcm1zPVtdLG59ZnVuY3Rpb24gWHcodCxlKXt2YXIgbj10aGlzO3JldHVybihuPUd3LmNhbGwodGhpcyl8fHRoaXMpLmtleT10LG4ucHJlY29uZGl0aW9uPWUsbi50eXBlPTIsbi5maWVsZFRyYW5zZm9ybXM9W10sbn1mdW5jdGlvbiBKdyh0KXtzd2l0Y2godCl7Y2FzZSBlYi5PSzpyZXR1cm4gaGIoKSwwO2Nhc2UgZWIuQ0FOQ0VMTEVEOmNhc2UgZWIuVU5LTk9XTjpjYXNlIGViLkRFQURMSU5FX0VYQ0VFREVEOmNhc2UgZWIuUkVTT1VSQ0VfRVhIQVVTVEVEOmNhc2UgZWIuSU5URVJOQUw6Y2FzZSBlYi5VTkFWQUlMQUJMRTpjYXNlIGViLlVOQVVUSEVOVElDQVRFRDpyZXR1cm47Y2FzZSBlYi5JTlZBTElEX0FSR1VNRU5UOmNhc2UgZWIuTk9UX0ZPVU5EOmNhc2UgZWIuQUxSRUFEWV9FWElTVFM6Y2FzZSBlYi5QRVJNSVNTSU9OX0RFTklFRDpjYXNlIGViLkZBSUxFRF9QUkVDT05ESVRJT046Y2FzZSBlYi5BQk9SVEVEOmNhc2UgZWIuT1VUX09GX1JBTkdFOmNhc2UgZWIuVU5JTVBMRU1FTlRFRDpjYXNlIGViLkRBVEFfTE9TUzpyZXR1cm4gMTtkZWZhdWx0OnJldHVybiBoYigpLDB9fWZ1bmN0aW9uICR3KHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHNiKFwiR1JQQyBlcnJvciBoYXMgbm8gLmNvZGVcIiksZWIuVU5LTk9XTjtzd2l0Y2godCl7Y2FzZSBXdy5PSzpyZXR1cm4gZWIuT0s7Y2FzZSBXdy5DQU5DRUxMRUQ6cmV0dXJuIGViLkNBTkNFTExFRDtjYXNlIFd3LlVOS05PV046cmV0dXJuIGViLlVOS05PV047Y2FzZSBXdy5ERUFETElORV9FWENFRURFRDpyZXR1cm4gZWIuREVBRExJTkVfRVhDRUVERUQ7Y2FzZSBXdy5SRVNPVVJDRV9FWEhBVVNURUQ6cmV0dXJuIGViLlJFU09VUkNFX0VYSEFVU1RFRDtjYXNlIFd3LklOVEVSTkFMOnJldHVybiBlYi5JTlRFUk5BTDtjYXNlIFd3LlVOQVZBSUxBQkxFOnJldHVybiBlYi5VTkFWQUlMQUJMRTtjYXNlIFd3LlVOQVVUSEVOVElDQVRFRDpyZXR1cm4gZWIuVU5BVVRIRU5USUNBVEVEO2Nhc2UgV3cuSU5WQUxJRF9BUkdVTUVOVDpyZXR1cm4gZWIuSU5WQUxJRF9BUkdVTUVOVDtjYXNlIFd3Lk5PVF9GT1VORDpyZXR1cm4gZWIuTk9UX0ZPVU5EO2Nhc2UgV3cuQUxSRUFEWV9FWElTVFM6cmV0dXJuIGViLkFMUkVBRFlfRVhJU1RTO2Nhc2UgV3cuUEVSTUlTU0lPTl9ERU5JRUQ6cmV0dXJuIGViLlBFUk1JU1NJT05fREVOSUVEO2Nhc2UgV3cuRkFJTEVEX1BSRUNPTkRJVElPTjpyZXR1cm4gZWIuRkFJTEVEX1BSRUNPTkRJVElPTjtjYXNlIFd3LkFCT1JURUQ6cmV0dXJuIGViLkFCT1JURUQ7Y2FzZSBXdy5PVVRfT0ZfUkFOR0U6cmV0dXJuIGViLk9VVF9PRl9SQU5HRTtjYXNlIFd3LlVOSU1QTEVNRU5URUQ6cmV0dXJuIGViLlVOSU1QTEVNRU5URUQ7Y2FzZSBXdy5EQVRBX0xPU1M6cmV0dXJuIGViLkRBVEFfTE9TUztkZWZhdWx0OnJldHVybiBoYigpfX0oRz1Xdz1Xd3x8e30pW0cuT0s9MF09XCJPS1wiLEdbRy5DQU5DRUxMRUQ9MV09XCJDQU5DRUxMRURcIixHW0cuVU5LTk9XTj0yXT1cIlVOS05PV05cIixHW0cuSU5WQUxJRF9BUkdVTUVOVD0zXT1cIklOVkFMSURfQVJHVU1FTlRcIixHW0cuREVBRExJTkVfRVhDRUVERUQ9NF09XCJERUFETElORV9FWENFRURFRFwiLEdbRy5OT1RfRk9VTkQ9NV09XCJOT1RfRk9VTkRcIixHW0cuQUxSRUFEWV9FWElTVFM9Nl09XCJBTFJFQURZX0VYSVNUU1wiLEdbRy5QRVJNSVNTSU9OX0RFTklFRD03XT1cIlBFUk1JU1NJT05fREVOSUVEXCIsR1tHLlVOQVVUSEVOVElDQVRFRD0xNl09XCJVTkFVVEhFTlRJQ0FURURcIixHW0cuUkVTT1VSQ0VfRVhIQVVTVEVEPThdPVwiUkVTT1VSQ0VfRVhIQVVTVEVEXCIsR1tHLkZBSUxFRF9QUkVDT05ESVRJT049OV09XCJGQUlMRURfUFJFQ09ORElUSU9OXCIsR1tHLkFCT1JURUQ9MTBdPVwiQUJPUlRFRFwiLEdbRy5PVVRfT0ZfUkFOR0U9MTFdPVwiT1VUX09GX1JBTkdFXCIsR1tHLlVOSU1QTEVNRU5URUQ9MTJdPVwiVU5JTVBMRU1FTlRFRFwiLEdbRy5JTlRFUk5BTD0xM109XCJJTlRFUk5BTFwiLEdbRy5VTkFWQUlMQUJMRT0xNF09XCJVTkFWQUlMQUJMRVwiLEdbRy5EQVRBX0xPU1M9MTVdPVwiREFUQV9MT1NTXCI7dmFyIFp3PShpSS5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBpSSh0aGlzLmNvbXBhcmF0b3IsdGhpcy5yb290Lmluc2VydCh0LGUsdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsbnVsbCxlSS5CTEFDSyxudWxsLG51bGwpKX0saUkucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGlJKHRoaXMuY29tcGFyYXRvcix0aGlzLnJvb3QucmVtb3ZlKHQsdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsbnVsbCxlSS5CTEFDSyxudWxsLG51bGwpKX0saUkucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5yb290OyFlLmlzRW1wdHkoKTspe3ZhciBuPXRoaXMuY29tcGFyYXRvcih0LGUua2V5KTtpZigwPT09bilyZXR1cm4gZS52YWx1ZTtuPDA/ZT1lLmxlZnQ6MDxuJiYoZT1lLnJpZ2h0KX1yZXR1cm4gbnVsbH0saUkucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLnJvb3Q7IW4uaXNFbXB0eSgpOyl7dmFyIHI9dGhpcy5jb21wYXJhdG9yKHQsbi5rZXkpO2lmKDA9PT1yKXJldHVybiBlK24ubGVmdC5zaXplO249cjwwP24ubGVmdDooZSs9bi5sZWZ0LnNpemUrMSxuLnJpZ2h0KX1yZXR1cm4tMX0saUkucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LmlzRW1wdHkoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGlJLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdC5zaXplfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGlJLnByb3RvdHlwZS5taW5LZXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290Lm1pbktleSgpfSxpSS5wcm90b3R5cGUubWF4S2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdC5tYXhLZXkoKX0saUkucHJvdG90eXBlLmlub3JkZXJUcmF2ZXJzYWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucm9vdC5pbm9yZGVyVHJhdmVyc2FsKHQpfSxpSS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihuKXt0aGlzLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24odCxlKXtyZXR1cm4gbih0LGUpLCExfSl9LGlJLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBuPVtdO3JldHVybiB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5wdXNoKHQrXCI6XCIrZSksITF9KSxcIntcIituLmpvaW4oXCIsIFwiKStcIn1cIn0saUkucHJvdG90eXBlLnJldmVyc2VUcmF2ZXJzYWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucm9vdC5yZXZlcnNlVHJhdmVyc2FsKHQpfSxpSS5wcm90b3R5cGUuZ2V0SXRlcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRJKHRoaXMucm9vdCxudWxsLHRoaXMuY29tcGFyYXRvciwhMSl9LGlJLnByb3RvdHlwZS5nZXRJdGVyYXRvckZyb209ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB0SSh0aGlzLnJvb3QsdCx0aGlzLmNvbXBhcmF0b3IsITEpfSxpSS5wcm90b3R5cGUuZ2V0UmV2ZXJzZUl0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0SSh0aGlzLnJvb3QsbnVsbCx0aGlzLmNvbXBhcmF0b3IsITApfSxpSS5wcm90b3R5cGUuZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHRJKHRoaXMucm9vdCx0LHRoaXMuY29tcGFyYXRvciwhMCl9LGlJKSx0ST0ockkucHJvdG90eXBlLmdldE5leHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5vZGVTdGFjay5wb3AoKSxlPXtrZXk6dC5rZXksdmFsdWU6dC52YWx1ZX07aWYodGhpcy5pc1JldmVyc2UpZm9yKHQ9dC5sZWZ0OyF0LmlzRW1wdHkoKTspdGhpcy5ub2RlU3RhY2sucHVzaCh0KSx0PXQucmlnaHQ7ZWxzZSBmb3IodD10LnJpZ2h0OyF0LmlzRW1wdHkoKTspdGhpcy5ub2RlU3RhY2sucHVzaCh0KSx0PXQubGVmdDtyZXR1cm4gZX0sckkucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gMDx0aGlzLm5vZGVTdGFjay5sZW5ndGh9LHJJLnByb3RvdHlwZS5wZWVrPWZ1bmN0aW9uKCl7aWYoMD09PXRoaXMubm9kZVN0YWNrLmxlbmd0aClyZXR1cm4gbnVsbDt2YXIgdD10aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGgtMV07cmV0dXJue2tleTp0LmtleSx2YWx1ZTp0LnZhbHVlfX0sckkpLGVJPShuSS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0LGUsbixyLGkpe3JldHVybiBuZXcgbkkobnVsbCE9dD90OnRoaXMua2V5LG51bGwhPWU/ZTp0aGlzLnZhbHVlLG51bGwhPW4/bjp0aGlzLmNvbG9yLG51bGwhPXI/cjp0aGlzLmxlZnQsbnVsbCE9aT9pOnRoaXMucmlnaHQpfSxuSS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiExfSxuSS5wcm90b3R5cGUuaW5vcmRlclRyYXZlcnNhbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sZWZ0Lmlub3JkZXJUcmF2ZXJzYWwodCl8fHQodGhpcy5rZXksdGhpcy52YWx1ZSl8fHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbCh0KX0sbkkucHJvdG90eXBlLnJldmVyc2VUcmF2ZXJzYWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbCh0KXx8dCh0aGlzLmtleSx0aGlzLnZhbHVlKXx8dGhpcy5sZWZ0LnJldmVyc2VUcmF2ZXJzYWwodCl9LG5JLnByb3RvdHlwZS5taW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZWZ0LmlzRW1wdHkoKT90aGlzOnRoaXMubGVmdC5taW4oKX0sbkkucHJvdG90eXBlLm1pbktleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbigpLmtleX0sbkkucHJvdG90eXBlLm1heEtleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0LmlzRW1wdHkoKT90aGlzLmtleTp0aGlzLnJpZ2h0Lm1heEtleSgpfSxuSS5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLGk9bih0LHIua2V5KTtyZXR1cm4ocj1pPDA/ci5jb3B5KG51bGwsbnVsbCxudWxsLHIubGVmdC5pbnNlcnQodCxlLG4pLG51bGwpOjA9PT1pP3IuY29weShudWxsLGUsbnVsbCxudWxsLG51bGwpOnIuY29weShudWxsLG51bGwsbnVsbCxudWxsLHIucmlnaHQuaW5zZXJ0KHQsZSxuKSkpLmZpeFVwKCl9LG5JLnByb3RvdHlwZS5yZW1vdmVNaW49ZnVuY3Rpb24oKXtpZih0aGlzLmxlZnQuaXNFbXB0eSgpKXJldHVybiBuSS5FTVBUWTt2YXIgdD10aGlzO3JldHVybih0PSh0PSF0LmxlZnQuaXNSZWQoKSYmIXQubGVmdC5sZWZ0LmlzUmVkKCk/dC5tb3ZlUmVkTGVmdCgpOnQpLmNvcHkobnVsbCxudWxsLG51bGwsdC5sZWZ0LnJlbW92ZU1pbigpLG51bGwpKS5maXhVcCgpfSxuSS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scj10aGlzO2lmKGUodCxyLmtleSk8MClyPShyPSEoci5sZWZ0LmlzRW1wdHkoKXx8ci5sZWZ0LmlzUmVkKCl8fHIubGVmdC5sZWZ0LmlzUmVkKCkpP3IubW92ZVJlZExlZnQoKTpyKS5jb3B5KG51bGwsbnVsbCxudWxsLHIubGVmdC5yZW1vdmUodCxlKSxudWxsKTtlbHNle2lmKDA9PT1lKHQsKHI9ISgocj1yLmxlZnQuaXNSZWQoKT9yLnJvdGF0ZVJpZ2h0KCk6cikucmlnaHQuaXNFbXB0eSgpfHxyLnJpZ2h0LmlzUmVkKCl8fHIucmlnaHQubGVmdC5pc1JlZCgpKT9yLm1vdmVSZWRSaWdodCgpOnIpLmtleSkpe2lmKHIucmlnaHQuaXNFbXB0eSgpKXJldHVybiBuSS5FTVBUWTtuPXIucmlnaHQubWluKCkscj1yLmNvcHkobi5rZXksbi52YWx1ZSxudWxsLG51bGwsci5yaWdodC5yZW1vdmVNaW4oKSl9cj1yLmNvcHkobnVsbCxudWxsLG51bGwsbnVsbCxyLnJpZ2h0LnJlbW92ZSh0LGUpKX1yZXR1cm4gci5maXhVcCgpfSxuSS5wcm90b3R5cGUuaXNSZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2xvcn0sbkkucHJvdG90eXBlLmZpeFVwPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdD0odD0odD10LnJpZ2h0LmlzUmVkKCkmJiF0LmxlZnQuaXNSZWQoKT90LnJvdGF0ZUxlZnQoKTp0KS5sZWZ0LmlzUmVkKCkmJnQubGVmdC5sZWZ0LmlzUmVkKCk/dC5yb3RhdGVSaWdodCgpOnQpLmxlZnQuaXNSZWQoKSYmdC5yaWdodC5pc1JlZCgpP3QuY29sb3JGbGlwKCk6dH0sbkkucHJvdG90eXBlLm1vdmVSZWRMZWZ0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb2xvckZsaXAoKTtyZXR1cm4gdD10LnJpZ2h0LmxlZnQuaXNSZWQoKT8odD0odD10LmNvcHkobnVsbCxudWxsLG51bGwsbnVsbCx0LnJpZ2h0LnJvdGF0ZVJpZ2h0KCkpKS5yb3RhdGVMZWZ0KCkpLmNvbG9yRmxpcCgpOnR9LG5JLnByb3RvdHlwZS5tb3ZlUmVkUmlnaHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvbG9yRmxpcCgpO3JldHVybiB0PXQubGVmdC5sZWZ0LmlzUmVkKCk/KHQ9dC5yb3RhdGVSaWdodCgpKS5jb2xvckZsaXAoKTp0fSxuSS5wcm90b3R5cGUucm90YXRlTGVmdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29weShudWxsLG51bGwsbkkuUkVELG51bGwsdGhpcy5yaWdodC5sZWZ0KTtyZXR1cm4gdGhpcy5yaWdodC5jb3B5KG51bGwsbnVsbCx0aGlzLmNvbG9yLHQsbnVsbCl9LG5JLnByb3RvdHlwZS5yb3RhdGVSaWdodD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29weShudWxsLG51bGwsbkkuUkVELHRoaXMubGVmdC5yaWdodCxudWxsKTtyZXR1cm4gdGhpcy5sZWZ0LmNvcHkobnVsbCxudWxsLHRoaXMuY29sb3IsbnVsbCx0KX0sbkkucHJvdG90eXBlLmNvbG9yRmxpcD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubGVmdC5jb3B5KG51bGwsbnVsbCwhdGhpcy5sZWZ0LmNvbG9yLG51bGwsbnVsbCksZT10aGlzLnJpZ2h0LmNvcHkobnVsbCxudWxsLCF0aGlzLnJpZ2h0LmNvbG9yLG51bGwsbnVsbCk7cmV0dXJuIHRoaXMuY29weShudWxsLG51bGwsIXRoaXMuY29sb3IsdCxlKX0sbkkucHJvdG90eXBlLmNoZWNrTWF4RGVwdGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNoZWNrKCk7cmV0dXJuIE1hdGgucG93KDIsdCk8PXRoaXMuc2l6ZSsxfSxuSS5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZih0aGlzLmlzUmVkKCkmJnRoaXMubGVmdC5pc1JlZCgpKXRocm93IGhiKCk7aWYodGhpcy5yaWdodC5pc1JlZCgpKXRocm93IGhiKCk7dmFyIHQ9dGhpcy5sZWZ0LmNoZWNrKCk7aWYodCE9PXRoaXMucmlnaHQuY2hlY2soKSl0aHJvdyBoYigpO3JldHVybiB0Kyh0aGlzLmlzUmVkKCk/MDoxKX0sbkkpO2Z1bmN0aW9uIG5JKHQsZSxuLHIsaSl7dGhpcy5rZXk9dCx0aGlzLnZhbHVlPWUsdGhpcy5jb2xvcj1udWxsIT1uP246bkkuUkVELHRoaXMubGVmdD1udWxsIT1yP3I6bkkuRU1QVFksdGhpcy5yaWdodD1udWxsIT1pP2k6bkkuRU1QVFksdGhpcy5zaXplPXRoaXMubGVmdC5zaXplKzErdGhpcy5yaWdodC5zaXplfWZ1bmN0aW9uIHJJKHQsZSxuLHIpe3RoaXMuaXNSZXZlcnNlPXIsdGhpcy5ub2RlU3RhY2s9W107Zm9yKHZhciBpPTE7IXQuaXNFbXB0eSgpOylpZihpPWU/bih0LmtleSxlKToxLHImJihpKj0tMSksaTwwKXQ9dGhpcy5pc1JldmVyc2U/dC5sZWZ0OnQucmlnaHQ7ZWxzZXtpZigwPT09aSl7dGhpcy5ub2RlU3RhY2sucHVzaCh0KTticmVha310aGlzLm5vZGVTdGFjay5wdXNoKHQpLHQ9dGhpcy5pc1JldmVyc2U/dC5yaWdodDp0LmxlZnR9fWZ1bmN0aW9uIGlJKHQsZSl7dGhpcy5jb21wYXJhdG9yPXQsdGhpcy5yb290PWV8fGVJLkVNUFRZfWZ1bmN0aW9uIG9JKCl7dGhpcy5zaXplPTB9ZUkuRU1QVFk9bnVsbCxlSS5SRUQ9ITAsZUkuQkxBQ0s9ITEsZUkuRU1QVFk9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvSS5wcm90b3R5cGUsXCJrZXlcIix7Z2V0OmZ1bmN0aW9uKCl7dGhyb3cgaGIoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkob0kucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7dGhyb3cgaGIoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkob0kucHJvdG90eXBlLFwiY29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7dGhyb3cgaGIoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkob0kucHJvdG90eXBlLFwibGVmdFwiLHtnZXQ6ZnVuY3Rpb24oKXt0aHJvdyBoYigpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvSS5wcm90b3R5cGUsXCJyaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXt0aHJvdyBoYigpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLG9JLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQsZSxuLHIsaSl7cmV0dXJuIHRoaXN9LG9JLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgZUkodCxlKX0sb0kucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzfSxvSS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiEwfSxvSS5wcm90b3R5cGUuaW5vcmRlclRyYXZlcnNhbD1mdW5jdGlvbih0KXtyZXR1cm4hMX0sb0kucHJvdG90eXBlLnJldmVyc2VUcmF2ZXJzYWw9ZnVuY3Rpb24odCl7cmV0dXJuITF9LG9JLnByb3RvdHlwZS5taW5LZXk9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sb0kucHJvdG90eXBlLm1heEtleT1mdW5jdGlvbigpe3JldHVybiBudWxsfSxvSS5wcm90b3R5cGUuaXNSZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sb0kucHJvdG90eXBlLmNoZWNrTWF4RGVwdGg9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sb0kucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9LG5ldyBvSSk7dmFyIGFJPShoSS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dGhpcy5kYXRhLmdldCh0KX0saEkucHJvdG90eXBlLmZpcnN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5taW5LZXkoKX0saEkucHJvdG90eXBlLmxhc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLm1heEtleSgpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaEkucHJvdG90eXBlLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLnNpemV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksaEkucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGF0YS5pbmRleE9mKHQpfSxoSS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihuKXt0aGlzLmRhdGEuaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbih0LGUpe3JldHVybiBuKHQpLCExfSl9LGhJLnByb3RvdHlwZS5mb3JFYWNoSW5SYW5nZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHRbMF0pO24uaGFzTmV4dCgpOyl7dmFyIHI9bi5nZXROZXh0KCk7aWYoMDw9dGhpcy5jb21wYXJhdG9yKHIua2V5LHRbMV0pKXJldHVybjtlKHIua2V5KX19LGhJLnByb3RvdHlwZS5mb3JFYWNoV2hpbGU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dm9pZCAwIT09ZT90aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGUpOnRoaXMuZGF0YS5nZXRJdGVyYXRvcigpO24uaGFzTmV4dCgpOylpZighdChuLmdldE5leHQoKS5rZXkpKXJldHVybn0saEkucHJvdG90eXBlLmZpcnN0QWZ0ZXJPckVxdWFsPWZ1bmN0aW9uKHQpe3Q9dGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KTtyZXR1cm4gdC5oYXNOZXh0KCk/dC5nZXROZXh0KCkua2V5Om51bGx9LGhJLnByb3RvdHlwZS5nZXRJdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiBuZXcgc0kodGhpcy5kYXRhLmdldEl0ZXJhdG9yKCkpfSxoSS5wcm90b3R5cGUuZ2V0SXRlcmF0b3JGcm9tPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgc0kodGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KSl9LGhJLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpLmluc2VydCh0LCEwKSl9LGhJLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzKHQpP3RoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpKTp0aGlzfSxoSS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuaXNFbXB0eSgpfSxoSS5wcm90b3R5cGUudW5pb25XaXRoPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIGUuc2l6ZTx0LnNpemUmJihlPXQsdD10aGlzKSx0LmZvckVhY2goZnVuY3Rpb24odCl7ZT1lLmFkZCh0KX0pLGV9LGhJLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIGhJKSlyZXR1cm4hMTtpZih0aGlzLnNpemUhPT10LnNpemUpcmV0dXJuITE7Zm9yKHZhciBlPXRoaXMuZGF0YS5nZXRJdGVyYXRvcigpLG49dC5kYXRhLmdldEl0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgcj1lLmdldE5leHQoKS5rZXksaT1uLmdldE5leHQoKS5rZXk7aWYoMCE9PXRoaXMuY29tcGFyYXRvcihyLGkpKXJldHVybiExfXJldHVybiEwfSxoSS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5wdXNoKHQpfSksZX0saEkucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5wdXNoKHQpfSksXCJTb3J0ZWRTZXQoXCIrZS50b1N0cmluZygpK1wiKVwifSxoSS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgaEkodGhpcy5jb21wYXJhdG9yKTtyZXR1cm4gZS5kYXRhPXQsZX0saEkpLHNJPShjSS5wcm90b3R5cGUuZ2V0TmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXIuZ2V0TmV4dCgpLmtleX0sY0kucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyLmhhc05leHQoKX0sY0kpLHVJPW5ldyBadyhIYi5jb21wYXJhdG9yKTtmdW5jdGlvbiBjSSh0KXt0aGlzLml0ZXI9dH1mdW5jdGlvbiBoSSh0KXt0aGlzLmNvbXBhcmF0b3I9dCx0aGlzLmRhdGE9bmV3IFp3KHRoaXMuY29tcGFyYXRvcil9dmFyIGxJPW5ldyBadyhIYi5jb21wYXJhdG9yKTt2YXIgZkk9bmV3IFp3KEhiLmNvbXBhcmF0b3IpO3ZhciBwST1uZXcgYUkoSGIuY29tcGFyYXRvcik7ZnVuY3Rpb24gZEkoKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07Zm9yKHZhciBuPXBJLHI9MCxpPXQ7cjxpLmxlbmd0aDtyKyspdmFyIG89aVtyXSxuPW4uYWRkKG8pO3JldHVybiBufXZhciB2ST1uZXcgYUkoZGIpO3ZhciBnST0oQ0kuY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgTWFwO3JldHVybiBuLnNldCh0LHlJLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LGUpKSxuZXcgQ0kobWIubWluKCksbix2SSx1SSxkSSgpKX0sQ0kpLHlJPShTSS5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IFNJKFJiLkVNUFRZX0JZVEVfU1RSSU5HLGUsZEkoKSxkSSgpLGRJKCkpfSxTSSksbUk9ZnVuY3Rpb24odCxlLG4scil7dGhpcy52PXQsdGhpcy5yZW1vdmVkVGFyZ2V0SWRzPWUsdGhpcy5rZXk9bix0aGlzLlA9cn0sYkk9ZnVuY3Rpb24odCxlKXt0aGlzLnRhcmdldElkPXQsdGhpcy5WPWV9LF9JPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PW4mJihuPVJiLkVNUFRZX0JZVEVfU1RSSU5HKSx2b2lkIDA9PT1yJiYocj1udWxsKSx0aGlzLnN0YXRlPXQsdGhpcy50YXJnZXRJZHM9ZSx0aGlzLnJlc3VtZVRva2VuPW4sdGhpcy5jYXVzZT1yfSx3ST0oT2JqZWN0LmRlZmluZVByb3BlcnR5KEVJLnByb3RvdHlwZSxcImN1cnJlbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRUkucHJvdG90eXBlLFwicmVzdW1lVG9rZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQ30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRUkucHJvdG90eXBlLFwia1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuU30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRUkucHJvdG90eXBlLFwiT1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5GfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLEVJLnByb3RvdHlwZS4kPWZ1bmN0aW9uKHQpezA8dC5hcHByb3hpbWF0ZUJ5dGVTaXplKCkmJih0aGlzLkY9ITAsdGhpcy5DPXQpfSxFSS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe3ZhciBuPWRJKCkscj1kSSgpLGk9ZEkoKTtyZXR1cm4gdGhpcy5ELmZvckVhY2goZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZSAwOm49bi5hZGQodCk7YnJlYWs7Y2FzZSAyOnI9ci5hZGQodCk7YnJlYWs7Y2FzZSAxOmk9aS5hZGQodCk7YnJlYWs7ZGVmYXVsdDpoYigpfX0pLG5ldyB5SSh0aGlzLkMsdGhpcy5OLG4scixpKX0sRUkucHJvdG90eXBlLkw9ZnVuY3Rpb24oKXt0aGlzLkY9ITEsdGhpcy5EPU5JKCl9LEVJLnByb3RvdHlwZS5CPWZ1bmN0aW9uKHQsZSl7dGhpcy5GPSEwLHRoaXMuRD10aGlzLkQuaW5zZXJ0KHQsZSl9LEVJLnByb3RvdHlwZS5xPWZ1bmN0aW9uKHQpe3RoaXMuRj0hMCx0aGlzLkQ9dGhpcy5ELnJlbW92ZSh0KX0sRUkucHJvdG90eXBlLlU9ZnVuY3Rpb24oKXt0aGlzLlMrPTF9LEVJLnByb3RvdHlwZS5LPWZ1bmN0aW9uKCl7LS10aGlzLlN9LEVJLnByb3RvdHlwZS5qPWZ1bmN0aW9uKCl7dGhpcy5GPSEwLHRoaXMuTj0hMH0sRUkpLElJPShUSS5wcm90b3R5cGUuWD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXQudjtlPG4ubGVuZ3RoO2UrKyl7dmFyIHI9bltlXTt0LlAmJnQuUC5pc0ZvdW5kRG9jdW1lbnQoKT90aGlzLloocix0LlApOnRoaXMudHQocix0LmtleSx0LlApfWZvcih2YXIgaT0wLG89dC5yZW1vdmVkVGFyZ2V0SWRzO2k8by5sZW5ndGg7aSsrKXI9b1tpXSx0aGlzLnR0KHIsdC5rZXksdC5QKX0sVEkucHJvdG90eXBlLmV0PWZ1bmN0aW9uKG4pe3ZhciByPXRoaXM7dGhpcy5mb3JFYWNoVGFyZ2V0KG4sZnVuY3Rpb24odCl7dmFyIGU9ci5udCh0KTtzd2l0Y2gobi5zdGF0ZSl7Y2FzZSAwOnIuc3QodCkmJmUuJChuLnJlc3VtZVRva2VuKTticmVhaztjYXNlIDE6ZS5LKCksZS5rfHxlLkwoKSxlLiQobi5yZXN1bWVUb2tlbik7YnJlYWs7Y2FzZSAyOmUuSygpLGUua3x8ci5yZW1vdmVUYXJnZXQodCk7YnJlYWs7Y2FzZSAzOnIuc3QodCkmJihlLmooKSxlLiQobi5yZXN1bWVUb2tlbikpO2JyZWFrO2Nhc2UgNDpyLnN0KHQpJiYoci5pdCh0KSxlLiQobi5yZXN1bWVUb2tlbikpO2JyZWFrO2RlZmF1bHQ6aGIoKX19KX0sVEkucHJvdG90eXBlLmZvckVhY2hUYXJnZXQ9ZnVuY3Rpb24odCxuKXt2YXIgcj10aGlzOzA8dC50YXJnZXRJZHMubGVuZ3RoP3QudGFyZ2V0SWRzLmZvckVhY2gobik6dGhpcy5HLmZvckVhY2goZnVuY3Rpb24odCxlKXtyLnN0KGUpJiZuKGUpfSl9LFRJLnByb3RvdHlwZS5ydD1mdW5jdGlvbih0KXt2YXIgZT10LnRhcmdldElkLG49dC5WLmNvdW50LHQ9dGhpcy5vdChlKTt0JiYocF8odD10LnRhcmdldCk/MD09PW4/KHQ9bmV3IEhiKHQucGF0aCksdGhpcy50dChlLHQsc18ubmV3Tm9Eb2N1bWVudCh0LG1iLm1pbigpKSkpOmxiKDE9PT1uKTp0aGlzLmN0KGUpIT09biYmKHRoaXMuaXQoZSksdGhpcy5ZPXRoaXMuWS5hZGQoZSkpKX0sVEkucHJvdG90eXBlLnV0PWZ1bmN0aW9uKHIpe3ZhciBpPXRoaXMsbz1uZXcgTWFwO3RoaXMuRy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49aS5vdChlKTtuJiYodC5jdXJyZW50JiZwXyhuLnRhcmdldCkmJihuPW5ldyBIYihuLnRhcmdldC5wYXRoKSxudWxsIT09aS5ILmdldChuKXx8aS5hdChlLG4pfHxpLnR0KGUsbixzXy5uZXdOb0RvY3VtZW50KG4scikpKSx0Lk8mJihvLnNldChlLHQuTSgpKSx0LkwoKSkpfSk7dmFyIGE9ZEkoKTt0aGlzLkouZm9yRWFjaChmdW5jdGlvbih0LGUpe3ZhciBuPSEwO2UuZm9yRWFjaFdoaWxlKGZ1bmN0aW9uKHQpe3Q9aS5vdCh0KTtyZXR1cm4hdHx8Mj09PXQucHVycG9zZXx8KG49ITEpfSksbiYmKGE9YS5hZGQodCkpfSk7dmFyIHQ9bmV3IGdJKHIsbyx0aGlzLlksdGhpcy5ILGEpO3JldHVybiB0aGlzLkg9dUksdGhpcy5KPWtJKCksdGhpcy5ZPW5ldyBhSShkYiksdH0sVEkucHJvdG90eXBlLlo9ZnVuY3Rpb24odCxlKXt2YXIgbjt0aGlzLnN0KHQpJiYobj10aGlzLmF0KHQsZS5rZXkpPzI6MCx0aGlzLm50KHQpLkIoZS5rZXksbiksdGhpcy5IPXRoaXMuSC5pbnNlcnQoZS5rZXksZSksdGhpcy5KPXRoaXMuSi5pbnNlcnQoZS5rZXksdGhpcy5odChlLmtleSkuYWRkKHQpKSl9LFRJLnByb3RvdHlwZS50dD1mdW5jdGlvbih0LGUsbil7dmFyIHI7dGhpcy5zdCh0KSYmKHI9dGhpcy5udCh0KSx0aGlzLmF0KHQsZSk/ci5CKGUsMSk6ci5xKGUpLHRoaXMuSj10aGlzLkouaW5zZXJ0KGUsdGhpcy5odChlKS5kZWxldGUodCkpLG4mJih0aGlzLkg9dGhpcy5ILmluc2VydChlLG4pKSl9LFRJLnByb3RvdHlwZS5yZW1vdmVUYXJnZXQ9ZnVuY3Rpb24odCl7dGhpcy5HLmRlbGV0ZSh0KX0sVEkucHJvdG90eXBlLmN0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubnQodCkuTSgpO3JldHVybiB0aGlzLlcuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5zaXplK2UuYWRkZWREb2N1bWVudHMuc2l6ZS1lLnJlbW92ZWREb2N1bWVudHMuc2l6ZX0sVEkucHJvdG90eXBlLlU9ZnVuY3Rpb24odCl7dGhpcy5udCh0KS5VKCl9LFRJLnByb3RvdHlwZS5udD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLkcuZ2V0KHQpO3JldHVybiBlfHwoZT1uZXcgd0ksdGhpcy5HLnNldCh0LGUpKSxlfSxUSS5wcm90b3R5cGUuaHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5KLmdldCh0KTtyZXR1cm4gZXx8KGU9bmV3IGFJKGRiKSx0aGlzLko9dGhpcy5KLmluc2VydCh0LGUpKSxlfSxUSS5wcm90b3R5cGUuc3Q9ZnVuY3Rpb24odCl7dmFyIGU9bnVsbCE9PXRoaXMub3QodCk7cmV0dXJuIGV8fGFiKFwiV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yXCIsXCJEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXRcIix0KSxlfSxUSS5wcm90b3R5cGUub3Q9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5HLmdldCh0KTtyZXR1cm4gZSYmZS5rP251bGw6dGhpcy5XLmx0KHQpfSxUSS5wcm90b3R5cGUuaXQ9ZnVuY3Rpb24oZSl7dmFyIG49dGhpczt0aGlzLkcuc2V0KGUsbmV3IHdJKSx0aGlzLlcuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe24udHQoZSx0LG51bGwpfSl9LFRJLnByb3RvdHlwZS5hdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLlcuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5oYXMoZSl9LFRJKTtmdW5jdGlvbiBUSSh0KXt0aGlzLlc9dCx0aGlzLkc9bmV3IE1hcCx0aGlzLkg9dUksdGhpcy5KPWtJKCksdGhpcy5ZPW5ldyBhSShkYil9ZnVuY3Rpb24gRUkoKXt0aGlzLlM9MCx0aGlzLkQ9TkkoKSx0aGlzLkM9UmIuRU1QVFlfQllURV9TVFJJTkcsdGhpcy5OPSExLHRoaXMuRj0hMH1mdW5jdGlvbiBTSSh0LGUsbixyLGkpe3RoaXMucmVzdW1lVG9rZW49dCx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmFkZGVkRG9jdW1lbnRzPW4sdGhpcy5tb2RpZmllZERvY3VtZW50cz1yLHRoaXMucmVtb3ZlZERvY3VtZW50cz1pfWZ1bmN0aW9uIENJKHQsZSxuLHIsaSl7dGhpcy5zbmFwc2hvdFZlcnNpb249dCx0aGlzLnRhcmdldENoYW5nZXM9ZSx0aGlzLnRhcmdldE1pc21hdGNoZXM9bix0aGlzLmRvY3VtZW50VXBkYXRlcz1yLHRoaXMucmVzb2x2ZWRMaW1ib0RvY3VtZW50cz1pfWZ1bmN0aW9uIGtJKCl7cmV0dXJuIG5ldyBadyhIYi5jb21wYXJhdG9yKX1mdW5jdGlvbiBOSSgpe3JldHVybiBuZXcgWncoSGIuY29tcGFyYXRvcil9dmFyIEFJPXthc2M6XCJBU0NFTkRJTkdcIixkZXNjOlwiREVTQ0VORElOR1wifSxSST17XCI8XCI6XCJMRVNTX1RIQU5cIixcIjw9XCI6XCJMRVNTX1RIQU5fT1JfRVFVQUxcIixcIj5cIjpcIkdSRUFURVJfVEhBTlwiLFwiPj1cIjpcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiLFwiPT1cIjpcIkVRVUFMXCIsXCIhPVwiOlwiTk9UX0VRVUFMXCIsXCJhcnJheS1jb250YWluc1wiOlwiQVJSQVlfQ09OVEFJTlNcIixpbjpcIklOXCIsXCJub3QtaW5cIjpcIk5PVF9JTlwiLFwiYXJyYXktY29udGFpbnMtYW55XCI6XCJBUlJBWV9DT05UQUlOU19BTllcIn0sUEk9ZnVuY3Rpb24odCxlKXt0aGlzLmRhdGFiYXNlSWQ9dCx0aGlzLkk9ZX07ZnVuY3Rpb24gT0kodCxlKXtyZXR1cm4gdC5JP25ldyBEYXRlKDFlMyplLnNlY29uZHMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFwuXFxkKi8sXCJcIikucmVwbGFjZShcIlpcIixcIlwiKStcIi5cIisoXCIwMDAwMDAwMDBcIitlLm5hbm9zZWNvbmRzKS5zbGljZSgtOSkrXCJaXCI6e3NlY29uZHM6XCJcIitlLnNlY29uZHMsbmFub3M6ZS5uYW5vc2Vjb25kc319ZnVuY3Rpb24gREkodCxlKXtyZXR1cm4gdC5JP2UudG9CYXNlNjQoKTplLnRvVWludDhBcnJheSgpfWZ1bmN0aW9uIHhJKHQpe3JldHVybiBsYighIXQpLG1iLmZyb21UaW1lc3RhbXAoKHQ9RmIodCksbmV3IHliKHQuc2Vjb25kcyx0Lm5hbm9zKSkpfWZ1bmN0aW9uIExJKHQsZSl7cmV0dXJuIG5ldyBDYihbXCJwcm9qZWN0c1wiLHQucHJvamVjdElkLFwiZGF0YWJhc2VzXCIsdC5kYXRhYmFzZV0pLmNoaWxkKFwiZG9jdW1lbnRzXCIpLmNoaWxkKGUpLmNhbm9uaWNhbFN0cmluZygpfWZ1bmN0aW9uIE1JKHQpe3Q9Q2IuZnJvbVN0cmluZyh0KTtyZXR1cm4gbGIoblQodCkpLHR9ZnVuY3Rpb24gRkkodCxlKXtyZXR1cm4gTEkodC5kYXRhYmFzZUlkLGUucGF0aCl9ZnVuY3Rpb24gVUkodCxlKXtlPU1JKGUpO2lmKGUuZ2V0KDEpIT09dC5kYXRhYmFzZUlkLnByb2plY3RJZCl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBwcm9qZWN0OiBcIitlLmdldCgxKStcIiB2cyBcIit0LmRhdGFiYXNlSWQucHJvamVjdElkKTtpZihlLmdldCgzKSE9PXQuZGF0YWJhc2VJZC5kYXRhYmFzZSl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBkYXRhYmFzZTogXCIrZS5nZXQoMykrXCIgdnMgXCIrdC5kYXRhYmFzZUlkLmRhdGFiYXNlKTtyZXR1cm4gbmV3IEhiKEJJKGUpKX1mdW5jdGlvbiBqSSh0LGUpe3JldHVybiBMSSh0LmRhdGFiYXNlSWQsZSl9ZnVuY3Rpb24gcUkodCl7dD1NSSh0KTtyZXR1cm4gND09PXQubGVuZ3RoP0NiLmVtcHR5UGF0aCgpOkJJKHQpfWZ1bmN0aW9uIFZJKHQpe3JldHVybiBuZXcgQ2IoW1wicHJvamVjdHNcIix0LmRhdGFiYXNlSWQucHJvamVjdElkLFwiZGF0YWJhc2VzXCIsdC5kYXRhYmFzZUlkLmRhdGFiYXNlXSkuY2Fub25pY2FsU3RyaW5nKCl9ZnVuY3Rpb24gQkkodCl7cmV0dXJuIGxiKDQ8dC5sZW5ndGgmJlwiZG9jdW1lbnRzXCI9PT10LmdldCg0KSksdC5wb3BGaXJzdCg1KX1mdW5jdGlvbiBLSSh0LGUsbil7cmV0dXJue25hbWU6RkkodCxlKSxmaWVsZHM6bi50b1Byb3RvKCkubWFwVmFsdWUuZmllbGRzfX1mdW5jdGlvbiBXSSh0LGUsbil7dmFyIHI9VUkodCxlLm5hbWUpLHQ9eEkoZS51cGRhdGVUaW1lKSxlPW5ldyBvXyh7bWFwVmFsdWU6e2ZpZWxkczplLmZpZWxkc319KSxlPXNfLm5ld0ZvdW5kRG9jdW1lbnQocix0LGUpO3JldHVybiBuJiZlLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpLG4/ZS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTplfWZ1bmN0aW9uIEhJKHQsZSl7dmFyIG4scixpO2lmKGUgaW5zdGFuY2VvZiBNdyluPXt1cGRhdGU6S0kodCxlLmtleSxlLnZhbHVlKX07ZWxzZSBpZihlIGluc3RhbmNlb2Ygencpbj17ZGVsZXRlOkZJKHQsZS5rZXkpfTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBGdyluPXt1cGRhdGU6S0kodCxlLmtleSxlLmRhdGEpLHVwZGF0ZU1hc2s6KGk9ZS5maWVsZE1hc2sscj1bXSxpLmZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiByLnB1c2godC5jYW5vbmljYWxTdHJpbmcoKSl9KSx7ZmllbGRQYXRoczpyfSl9O2Vsc2V7aWYoIShlIGluc3RhbmNlb2YgUXcpKXJldHVybiBoYigpO249e3ZlcmlmeTpGSSh0LGUua2V5KX19cmV0dXJuIDA8ZS5maWVsZFRyYW5zZm9ybXMubGVuZ3RoJiYobi51cGRhdGVUcmFuc2Zvcm1zPWUuZmllbGRUcmFuc2Zvcm1zLm1hcChmdW5jdGlvbih0KXt2YXIgZT10LnRyYW5zZm9ybTtpZihlIGluc3RhbmNlb2YgZncpcmV0dXJue2ZpZWxkUGF0aDp0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLHNldFRvU2VydmVyVmFsdWU6XCJSRVFVRVNUX1RJTUVcIn07aWYoZSBpbnN0YW5jZW9mIHB3KXJldHVybntmaWVsZFBhdGg6dC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxhcHBlbmRNaXNzaW5nRWxlbWVudHM6e3ZhbHVlczplLmVsZW1lbnRzfX07aWYoZSBpbnN0YW5jZW9mIG13KXJldHVybntmaWVsZFBhdGg6dC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxyZW1vdmVBbGxGcm9tQXJyYXk6e3ZhbHVlczplLmVsZW1lbnRzfX07aWYoZSBpbnN0YW5jZW9mIEl3KXJldHVybntmaWVsZFBhdGg6dC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxpbmNyZW1lbnQ6ZS5BfTt0aHJvdyBoYigpfSkpLGUucHJlY29uZGl0aW9uLmlzTm9uZXx8KG4uY3VycmVudERvY3VtZW50PXZvaWQgMCE9PShpPWUucHJlY29uZGl0aW9uKS51cGRhdGVUaW1lP3t1cGRhdGVUaW1lOihlPXQsdD1pLnVwZGF0ZVRpbWUsT0koZSx0LnRvVGltZXN0YW1wKCkpKX06dm9pZCAwIT09aS5leGlzdHM/e2V4aXN0czppLmV4aXN0c306aGIoKSksbn1mdW5jdGlvbiBHSShlLHQpe3ZhciBuPXQuY3VycmVudERvY3VtZW50P3ZvaWQgMCE9PShhPXQuY3VycmVudERvY3VtZW50KS51cGRhdGVUaW1lP053LnVwZGF0ZVRpbWUoeEkoYS51cGRhdGVUaW1lKSk6dm9pZCAwIT09YS5leGlzdHM/TncuZXhpc3RzKGEuZXhpc3RzKTpOdy5ub25lKCk6Tncubm9uZSgpLHI9dC51cGRhdGVUcmFuc2Zvcm1zP3QudXBkYXRlVHJhbnNmb3Jtcy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIG4scj1udWxsO1wic2V0VG9TZXJ2ZXJWYWx1ZVwiaW4gZT8obGIoXCJSRVFVRVNUX1RJTUVcIj09PWUuc2V0VG9TZXJ2ZXJWYWx1ZSkscj1uZXcgZncpOlwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzXCJpbiBlPyhuPWUuYXBwZW5kTWlzc2luZ0VsZW1lbnRzLnZhbHVlc3x8W10scj1uZXcgcHcobikpOlwicmVtb3ZlQWxsRnJvbUFycmF5XCJpbiBlPyhuPWUucmVtb3ZlQWxsRnJvbUFycmF5LnZhbHVlc3x8W10scj1uZXcgbXcobikpOlwiaW5jcmVtZW50XCJpbiBlP3I9bmV3IEl3KHQsZS5pbmNyZW1lbnQpOmhiKCk7ZT1OYi5mcm9tU2VydmVyRm9ybWF0KGUuZmllbGRQYXRoKTtyZXR1cm4gbmV3IGt3KGUscil9KGUsdCl9KTpbXTtpZih0LnVwZGF0ZSl7dC51cGRhdGUubmFtZTt2YXIgaT1VSShlLHQudXBkYXRlLm5hbWUpLG89bmV3IG9fKHttYXBWYWx1ZTp7ZmllbGRzOnQudXBkYXRlLmZpZWxkc319KTtpZih0LnVwZGF0ZU1hc2spe3ZhciBhPShhPXQudXBkYXRlTWFzay5maWVsZFBhdGhzfHxbXSxuZXcgQWIoYS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIE5iLmZyb21TZXJ2ZXJGb3JtYXQodCl9KSkpO3JldHVybiBuZXcgRncoaSxvLGEsbixyKX1yZXR1cm4gbmV3IE13KGksbyxuLHIpfWlmKHQuZGVsZXRlKXtyPVVJKGUsdC5kZWxldGUpO3JldHVybiBuZXcgencocixuKX1pZih0LnZlcmlmeSl7dD1VSShlLHQudmVyaWZ5KTtyZXR1cm4gbmV3IFF3KHQsbil9cmV0dXJuIGhiKCl9ZnVuY3Rpb24gekkodCxlKXtyZXR1cm57ZG9jdW1lbnRzOltqSSh0LGUucGF0aCldfX1mdW5jdGlvbiBRSSh0LGUpe3ZhciBuPXtzdHJ1Y3R1cmVkUXVlcnk6e319LHI9ZS5wYXRoO251bGwhPT1lLmNvbGxlY3Rpb25Hcm91cD8obi5wYXJlbnQ9akkodCxyKSxuLnN0cnVjdHVyZWRRdWVyeS5mcm9tPVt7Y29sbGVjdGlvbklkOmUuY29sbGVjdGlvbkdyb3VwLGFsbERlc2NlbmRhbnRzOiEwfV0pOihuLnBhcmVudD1qSSh0LHIucG9wTGFzdCgpKSxuLnN0cnVjdHVyZWRRdWVyeS5mcm9tPVt7Y29sbGVjdGlvbklkOnIubGFzdFNlZ21lbnQoKX1dKTtyPWZ1bmN0aW9uKHQpe2lmKDAhPT10Lmxlbmd0aCl7dD10Lm1hcChmdW5jdGlvbih0KXtpZihcIj09XCI9PT10Lm9wKXtpZihyXyh0LnZhbHVlKSlyZXR1cm57dW5hcnlGaWx0ZXI6e2ZpZWxkOiRJKHQuZmllbGQpLG9wOlwiSVNfTkFOXCJ9fTtpZihuXyh0LnZhbHVlKSlyZXR1cm57dW5hcnlGaWx0ZXI6e2ZpZWxkOiRJKHQuZmllbGQpLG9wOlwiSVNfTlVMTFwifX19ZWxzZSBpZihcIiE9XCI9PT10Lm9wKXtpZihyXyh0LnZhbHVlKSlyZXR1cm57dW5hcnlGaWx0ZXI6e2ZpZWxkOiRJKHQuZmllbGQpLG9wOlwiSVNfTk9UX05BTlwifX07aWYobl8odC52YWx1ZSkpcmV0dXJue3VuYXJ5RmlsdGVyOntmaWVsZDokSSh0LmZpZWxkKSxvcDpcIklTX05PVF9OVUxMXCJ9fX1yZXR1cm57ZmllbGRGaWx0ZXI6e2ZpZWxkOiRJKHQuZmllbGQpLG9wOihlPXQub3AsUklbZV0pLHZhbHVlOnQudmFsdWV9fTt2YXIgZX0pO3JldHVybiAxPT09dC5sZW5ndGg/dFswXTp7Y29tcG9zaXRlRmlsdGVyOntvcDpcIkFORFwiLGZpbHRlcnM6dH19fX0oZS5maWx0ZXJzKTtyJiYobi5zdHJ1Y3R1cmVkUXVlcnkud2hlcmU9cik7cj1mdW5jdGlvbih0KXtpZigwIT09dC5sZW5ndGgpcmV0dXJuIHQubWFwKGZ1bmN0aW9uKHQpe3JldHVybntmaWVsZDokSSgodD10KS5maWVsZCksZGlyZWN0aW9uOih0PXQuZGlyLEFJW3RdKX19KX0oZS5vcmRlckJ5KTtyJiYobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeT1yKTtyPWUubGltaXQscj10Lkl8fEJiKHIpP3I6e3ZhbHVlOnJ9O3JldHVybiBudWxsIT09ciYmKG4uc3RydWN0dXJlZFF1ZXJ5LmxpbWl0PXIpLGUuc3RhcnRBdCYmKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQ9WEkoZS5zdGFydEF0KSksZS5lbmRBdCYmKG4uc3RydWN0dXJlZFF1ZXJ5LmVuZEF0PVhJKGUuZW5kQXQpKSxufWZ1bmN0aW9uIFlJKHQpe3ZhciBlPXFJKHQucGFyZW50KSxuPXQuc3RydWN0dXJlZFF1ZXJ5LHI9bi5mcm9tP24uZnJvbS5sZW5ndGg6MCxpPW51bGw7MDxyJiYobGIoMT09PXIpLChzPW4uZnJvbVswXSkuYWxsRGVzY2VuZGFudHM/aT1zLmNvbGxlY3Rpb25JZDplPWUuY2hpbGQocy5jb2xsZWN0aW9uSWQpKTt2YXIgbz1bXTtuLndoZXJlJiYobz1mdW5jdGlvbiBlKHQpe3JldHVybiB0P3ZvaWQgMCE9PXQudW5hcnlGaWx0ZXI/W2VUKHQpXTp2b2lkIDAhPT10LmZpZWxkRmlsdGVyP1t0VCh0KV06dm9pZCAwIT09dC5jb21wb3NpdGVGaWx0ZXI/dC5jb21wb3NpdGVGaWx0ZXIuZmlsdGVycy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9KS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5jb25jYXQoZSl9KTpoYigpOltdfShuLndoZXJlKSk7dmFyIGE9W10sdD1udWxsLHI9bnVsbCxzPW51bGw7cmV0dXJuIEhfKGUsaSxhPW4ub3JkZXJCeT9uLm9yZGVyQnkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgVl8oWkkoKGU9dCkuZmllbGQpLGZ1bmN0aW9uKCl7c3dpdGNoKGUuZGlyZWN0aW9uKXtjYXNlXCJBU0NFTkRJTkdcIjpyZXR1cm5cImFzY1wiO2Nhc2VcIkRFU0NFTkRJTkdcIjpyZXR1cm5cImRlc2NcIjtkZWZhdWx0OnJldHVybn19KCkpO3ZhciBlfSk6YSxvLHQ9bi5saW1pdD9CYihvPVwib2JqZWN0XCI9PXR5cGVvZihvPW4ubGltaXQpP28udmFsdWU6byk/bnVsbDpvOnQsXCJGXCIscj1uLnN0YXJ0QXQ/Skkobi5zdGFydEF0KTpyLHM9bi5lbmRBdD9KSShuLmVuZEF0KTpzKX1mdW5jdGlvbiBYSSh0KXtyZXR1cm57YmVmb3JlOnQuYmVmb3JlLHZhbHVlczp0LnBvc2l0aW9ufX1mdW5jdGlvbiBKSSh0KXt2YXIgZT0hIXQuYmVmb3JlLHQ9dC52YWx1ZXN8fFtdO3JldHVybiBuZXcgTF8odCxlKX1mdW5jdGlvbiAkSSh0KXtyZXR1cm57ZmllbGRQYXRoOnQuY2Fub25pY2FsU3RyaW5nKCl9fWZ1bmN0aW9uIFpJKHQpe3JldHVybiBOYi5mcm9tU2VydmVyRm9ybWF0KHQuZmllbGRQYXRoKX1mdW5jdGlvbiB0VCh0KXtyZXR1cm4gdl8uY3JlYXRlKFpJKHQuZmllbGRGaWx0ZXIuZmllbGQpLGZ1bmN0aW9uKCl7c3dpdGNoKHQuZmllbGRGaWx0ZXIub3Ape2Nhc2VcIkVRVUFMXCI6cmV0dXJuXCI9PVwiO2Nhc2VcIk5PVF9FUVVBTFwiOnJldHVyblwiIT1cIjtjYXNlXCJHUkVBVEVSX1RIQU5cIjpyZXR1cm5cIj5cIjtjYXNlXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIjpyZXR1cm5cIj49XCI7Y2FzZVwiTEVTU19USEFOXCI6cmV0dXJuXCI8XCI7Y2FzZVwiTEVTU19USEFOX09SX0VRVUFMXCI6cmV0dXJuXCI8PVwiO2Nhc2VcIkFSUkFZX0NPTlRBSU5TXCI6cmV0dXJuXCJhcnJheS1jb250YWluc1wiO2Nhc2VcIklOXCI6cmV0dXJuXCJpblwiO2Nhc2VcIk5PVF9JTlwiOnJldHVyblwibm90LWluXCI7Y2FzZVwiQVJSQVlfQ09OVEFJTlNfQU5ZXCI6cmV0dXJuXCJhcnJheS1jb250YWlucy1hbnlcIjtjYXNlXCJPUEVSQVRPUl9VTlNQRUNJRklFRFwiOmRlZmF1bHQ6cmV0dXJuIGhiKCl9fSgpLHQuZmllbGRGaWx0ZXIudmFsdWUpfWZ1bmN0aW9uIGVUKHQpe3N3aXRjaCh0LnVuYXJ5RmlsdGVyLm9wKXtjYXNlXCJJU19OQU5cIjp2YXIgZT1aSSh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtyZXR1cm4gdl8uY3JlYXRlKGUsXCI9PVwiLHtkb3VibGVWYWx1ZTpOYU59KTtjYXNlXCJJU19OVUxMXCI6ZT1aSSh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtyZXR1cm4gdl8uY3JlYXRlKGUsXCI9PVwiLHtudWxsVmFsdWU6XCJOVUxMX1ZBTFVFXCJ9KTtjYXNlXCJJU19OT1RfTkFOXCI6dmFyIG49WkkodC51bmFyeUZpbHRlci5maWVsZCk7cmV0dXJuIHZfLmNyZWF0ZShuLFwiIT1cIix7ZG91YmxlVmFsdWU6TmFOfSk7Y2FzZVwiSVNfTk9UX05VTExcIjpuPVpJKHQudW5hcnlGaWx0ZXIuZmllbGQpO3JldHVybiB2Xy5jcmVhdGUobixcIiE9XCIse251bGxWYWx1ZTpcIk5VTExfVkFMVUVcIn0pO2Nhc2VcIk9QRVJBVE9SX1VOU1BFQ0lGSUVEXCI6ZGVmYXVsdDpyZXR1cm4gaGIoKX19ZnVuY3Rpb24gblQodCl7cmV0dXJuIDQ8PXQubGVuZ3RoJiZcInByb2plY3RzXCI9PT10LmdldCgwKSYmXCJkYXRhYmFzZXNcIj09PXQuZ2V0KDIpfWZ1bmN0aW9uIHJUKHQpe2Zvcih2YXIgZT1cIlwiLG49MDtuPHQubGVuZ3RoO24rKykwPGUubGVuZ3RoJiYoZT1pVChlKSksZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1lLHI9dC5sZW5ndGgsaT0wO2k8cjtpKyspe3ZhciBvPXQuY2hhckF0KGkpO3N3aXRjaChvKXtjYXNlXCJcXDBcIjpuKz1cIlx1MDAwMVx1MDAxMFwiO2JyZWFrO2Nhc2VcIlx1MDAwMVwiOm4rPVwiXHUwMDAxXHUwMDExXCI7YnJlYWs7ZGVmYXVsdDpuKz1vfX1yZXR1cm4gbn0odC5nZXQobiksZSk7cmV0dXJuIGlUKGUpfWZ1bmN0aW9uIGlUKHQpe3JldHVybiB0K1wiXHUwMDAxXHUwMDAxXCJ9ZnVuY3Rpb24gb1QodCl7dmFyIGU9dC5sZW5ndGg7aWYobGIoMjw9ZSksMj09PWUpcmV0dXJuIGxiKFwiXHUwMDAxXCI9PT10LmNoYXJBdCgwKSYmXCJcdTAwMDFcIj09PXQuY2hhckF0KDEpKSxDYi5lbXB0eVBhdGgoKTtmb3IodmFyIG49ZS0yLHI9W10saT1cIlwiLG89MDtvPGU7KXt2YXIgYT10LmluZGV4T2YoXCJcdTAwMDFcIixvKTtzd2l0Y2goKGE8MHx8bjxhKSYmaGIoKSx0LmNoYXJBdChhKzEpKXtjYXNlXCJcdTAwMDFcIjp2YXIgcz10LnN1YnN0cmluZyhvLGEpLHU9dm9pZCAwOzA9PT1pLmxlbmd0aD91PXM6KHU9aSs9cyxpPVwiXCIpLHIucHVzaCh1KTticmVhaztjYXNlXCJcdTAwMTBcIjppKz10LnN1YnN0cmluZyhvLGEpLGkrPVwiXFwwXCI7YnJlYWs7Y2FzZVwiXHUwMDExXCI6aSs9dC5zdWJzdHJpbmcobyxhKzEpO2JyZWFrO2RlZmF1bHQ6aGIoKX1vPWErMn1yZXR1cm4gbmV3IENiKHIpfWZ1bmN0aW9uIGFUKHQsZSxuKXt0aGlzLm93bmVySWQ9dCx0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uPWUsdGhpcy5sZWFzZVRpbWVzdGFtcE1zPW59dmFyIHNUPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWNvbmRzPXQsdGhpcy5uYW5vc2Vjb25kcz1lfTthVC5zdG9yZT1cIm93bmVyXCIsYVQua2V5PVwib3duZXJcIjtmdW5jdGlvbiB1VCh0LGUsbil7dGhpcy51c2VySWQ9dCx0aGlzLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkPWUsdGhpcy5sYXN0U3RyZWFtVG9rZW49bn11VC5zdG9yZT1cIm11dGF0aW9uUXVldWVzXCIsdVQua2V5UGF0aD1cInVzZXJJZFwiO2Z1bmN0aW9uIGNUKHQsZSxuLHIsaSl7dGhpcy51c2VySWQ9dCx0aGlzLmJhdGNoSWQ9ZSx0aGlzLmxvY2FsV3JpdGVUaW1lTXM9bix0aGlzLmJhc2VNdXRhdGlvbnM9cix0aGlzLm11dGF0aW9ucz1pfWNULnN0b3JlPVwibXV0YXRpb25zXCIsY1Qua2V5UGF0aD1cImJhdGNoSWRcIixjVC51c2VyTXV0YXRpb25zSW5kZXg9XCJ1c2VyTXV0YXRpb25zSW5kZXhcIixjVC51c2VyTXV0YXRpb25zS2V5UGF0aD1bXCJ1c2VySWRcIixcImJhdGNoSWRcIl07dmFyIGhUPShsVC5wcmVmaXhGb3JVc2VyPWZ1bmN0aW9uKHQpe3JldHVyblt0XX0sbFQucHJlZml4Rm9yUGF0aD1mdW5jdGlvbih0LGUpe3JldHVyblt0LHJUKGUpXX0sbFQua2V5PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm5bdCxyVChlKSxuXX0sbFQpO2Z1bmN0aW9uIGxUKCl7fWhULnN0b3JlPVwiZG9jdW1lbnRNdXRhdGlvbnNcIixoVC5QTEFDRUhPTERFUj1uZXcgaFQ7ZnVuY3Rpb24gZlQodCxlKXt0aGlzLnBhdGg9dCx0aGlzLnJlYWRUaW1lPWV9ZnVuY3Rpb24gcFQodCxlKXt0aGlzLnBhdGg9dCx0aGlzLnZlcnNpb249ZX12YXIgZFQ9ZnVuY3Rpb24odCxlLG4scixpLG8pe3RoaXMudW5rbm93bkRvY3VtZW50PXQsdGhpcy5ub0RvY3VtZW50PWUsdGhpcy5kb2N1bWVudD1uLHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zPXIsdGhpcy5yZWFkVGltZT1pLHRoaXMucGFyZW50UGF0aD1vfTtkVC5zdG9yZT1cInJlbW90ZURvY3VtZW50c1wiLGRULnJlYWRUaW1lSW5kZXg9XCJyZWFkVGltZUluZGV4XCIsZFQucmVhZFRpbWVJbmRleFBhdGg9XCJyZWFkVGltZVwiLGRULmNvbGxlY3Rpb25SZWFkVGltZUluZGV4PVwiY29sbGVjdGlvblJlYWRUaW1lSW5kZXhcIixkVC5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleFBhdGg9W1wicGFyZW50UGF0aFwiLFwicmVhZFRpbWVcIl07ZnVuY3Rpb24gdlQodCl7dGhpcy5ieXRlU2l6ZT10fXZULnN0b3JlPVwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIix2VC5rZXk9XCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiO2Z1bmN0aW9uIGdUKHQsZSxuLHIsaSxvLGEpe3RoaXMudGFyZ2V0SWQ9dCx0aGlzLmNhbm9uaWNhbElkPWUsdGhpcy5yZWFkVGltZT1uLHRoaXMucmVzdW1lVG9rZW49cix0aGlzLmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcj1pLHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbj1vLHRoaXMucXVlcnk9YX1nVC5zdG9yZT1cInRhcmdldHNcIixnVC5rZXlQYXRoPVwidGFyZ2V0SWRcIixnVC5xdWVyeVRhcmdldHNJbmRleE5hbWU9XCJxdWVyeVRhcmdldHNJbmRleFwiLGdULnF1ZXJ5VGFyZ2V0c0tleVBhdGg9W1wiY2Fub25pY2FsSWRcIixcInRhcmdldElkXCJdO3ZhciB5VD1mdW5jdGlvbih0LGUsbil7dGhpcy50YXJnZXRJZD10LHRoaXMucGF0aD1lLHRoaXMuc2VxdWVuY2VOdW1iZXI9bn07eVQuc3RvcmU9XCJ0YXJnZXREb2N1bWVudHNcIix5VC5rZXlQYXRoPVtcInRhcmdldElkXCIsXCJwYXRoXCJdLHlULmRvY3VtZW50VGFyZ2V0c0luZGV4PVwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIix5VC5kb2N1bWVudFRhcmdldHNLZXlQYXRoPVtcInBhdGhcIixcInRhcmdldElkXCJdO2Z1bmN0aW9uIG1UKHQsZSxuLHIpe3RoaXMuaGlnaGVzdFRhcmdldElkPXQsdGhpcy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI9ZSx0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb249bix0aGlzLnRhcmdldENvdW50PXJ9bVQua2V5PVwidGFyZ2V0R2xvYmFsS2V5XCIsbVQuc3RvcmU9XCJ0YXJnZXRHbG9iYWxcIjtmdW5jdGlvbiBiVCh0LGUpe3RoaXMuY29sbGVjdGlvbklkPXQsdGhpcy5wYXJlbnQ9ZX1iVC5zdG9yZT1cImNvbGxlY3Rpb25QYXJlbnRzXCIsYlQua2V5UGF0aD1bXCJjb2xsZWN0aW9uSWRcIixcInBhcmVudFwiXTtmdW5jdGlvbiBfVCh0LGUsbixyKXt0aGlzLmNsaWVudElkPXQsdGhpcy51cGRhdGVUaW1lTXM9ZSx0aGlzLm5ldHdvcmtFbmFibGVkPW4sdGhpcy5pbkZvcmVncm91bmQ9cn1fVC5zdG9yZT1cImNsaWVudE1ldGFkYXRhXCIsX1Qua2V5UGF0aD1cImNsaWVudElkXCI7ZnVuY3Rpb24gd1QodCxlLG4pe3RoaXMuYnVuZGxlSWQ9dCx0aGlzLmNyZWF0ZVRpbWU9ZSx0aGlzLnZlcnNpb249bn13VC5zdG9yZT1cImJ1bmRsZXNcIix3VC5rZXlQYXRoPVwiYnVuZGxlSWRcIjtmdW5jdGlvbiBJVCh0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5yZWFkVGltZT1lLHRoaXMuYnVuZGxlZFF1ZXJ5PW59SVQuc3RvcmU9XCJuYW1lZFF1ZXJpZXNcIixJVC5rZXlQYXRoPVwibmFtZVwiO3ZhciBUVCxFVD1ubyhubyhbXSxubyhubyhbXSxubyhubyhbXSxubyhubyhbXSxbdVQuc3RvcmUsY1Quc3RvcmUsaFQuc3RvcmUsZFQuc3RvcmUsZ1Quc3RvcmUsYVQuc3RvcmUsbVQuc3RvcmUseVQuc3RvcmVdKSxbX1Quc3RvcmVdKSksW3ZULnN0b3JlXSkpLFtiVC5zdG9yZV0pKSxbd1Quc3RvcmUsSVQuc3RvcmVdKSxTVD1cIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIixTbj0oRlQucHJvdG90eXBlLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXI9ZnVuY3Rpb24odCl7dGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5wdXNoKHQpfSxGVC5wcm90b3R5cGUucmFpc2VPbkNvbW1pdHRlZEV2ZW50PWZ1bmN0aW9uKCl7dGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KX0sRlQpLENUPWZ1bmN0aW9uKCl7dmFyIG49dGhpczt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24odCxlKXtuLnJlc29sdmU9dCxuLnJlamVjdD1lfSl9LGtUPShNVC5wcm90b3R5cGUuY2F0Y2g9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dCh2b2lkIDAsdCl9LE1ULnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKHIsaSl7dmFyIG89dGhpcztyZXR1cm4gdGhpcy5jYWxsYmFja0F0dGFjaGVkJiZoYigpLHRoaXMuY2FsbGJhY2tBdHRhY2hlZD0hMCx0aGlzLmlzRG9uZT90aGlzLmVycm9yP3RoaXMud3JhcEZhaWx1cmUoaSx0aGlzLmVycm9yKTp0aGlzLndyYXBTdWNjZXNzKHIsdGhpcy5yZXN1bHQpOm5ldyBNVChmdW5jdGlvbihlLG4pe28ubmV4dENhbGxiYWNrPWZ1bmN0aW9uKHQpe28ud3JhcFN1Y2Nlc3Mocix0KS5uZXh0KGUsbil9LG8uY2F0Y2hDYWxsYmFjaz1mdW5jdGlvbih0KXtvLndyYXBGYWlsdXJlKGksdCkubmV4dChlLG4pfX0pfSxNVC5wcm90b3R5cGUudG9Qcm9taXNlPWZ1bmN0aW9uKCl7dmFyIG49dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCxlKXtuLm5leHQodCxlKX0pfSxNVC5wcm90b3R5cGUud3JhcFVzZXJGdW5jdGlvbj1mdW5jdGlvbih0KXt0cnl7dmFyIGU9dCgpO3JldHVybiBlIGluc3RhbmNlb2YgTVQ/ZTpNVC5yZXNvbHZlKGUpfWNhdGNoKHQpe3JldHVybiBNVC5yZWplY3QodCl9fSxNVC5wcm90b3R5cGUud3JhcFN1Y2Nlc3M9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD90aGlzLndyYXBVc2VyRnVuY3Rpb24oZnVuY3Rpb24oKXtyZXR1cm4gdChlKX0pOk1ULnJlc29sdmUoZSl9LE1ULnByb3RvdHlwZS53cmFwRmFpbHVyZT1mdW5jdGlvbih0LGUpe3JldHVybiB0P3RoaXMud3JhcFVzZXJGdW5jdGlvbihmdW5jdGlvbigpe3JldHVybiB0KGUpfSk6TVQucmVqZWN0KGUpfSxNVC5yZXNvbHZlPWZ1bmN0aW9uKG4pe3JldHVybiBuZXcgTVQoZnVuY3Rpb24odCxlKXt0KG4pfSl9LE1ULnJlamVjdD1mdW5jdGlvbihuKXtyZXR1cm4gbmV3IE1UKGZ1bmN0aW9uKHQsZSl7ZShuKX0pfSxNVC53YWl0Rm9yPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgTVQoZnVuY3Rpb24oZSxuKXt2YXIgcj0wLGk9MCxvPSExO3QuZm9yRWFjaChmdW5jdGlvbih0KXsrK3IsdC5uZXh0KGZ1bmN0aW9uKCl7KytpLG8mJmk9PT1yJiZlKCl9LGZ1bmN0aW9uKHQpe3JldHVybiBuKHQpfSl9KSxvPSEwLGk9PT1yJiZlKCl9KX0sTVQub3I9ZnVuY3Rpb24odCl7Zm9yKHZhciBuPU1ULnJlc29sdmUoITEpLGU9MCxyPXQ7ZTxyLmxlbmd0aDtlKyspIWZ1bmN0aW9uKGUpe249bi5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiB0P01ULnJlc29sdmUodCk6ZSgpfSl9KHJbZV0pO3JldHVybiBufSxNVC5mb3JFYWNoPWZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpcyxpPVtdO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCxlKXtpLnB1c2gobi5jYWxsKHIsdCxlKSl9KSx0aGlzLndhaXRGb3IoaSl9LE1UKSxOVD0oTFQub3Blbj1mdW5jdGlvbih0LGUsbixyKXt0cnl7cmV0dXJuIG5ldyBMVChlLHQudHJhbnNhY3Rpb24ocixuKSl9Y2F0Y2godCl7dGhyb3cgbmV3IFBUKGUsdCl9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoTFQucHJvdG90eXBlLFwiZHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnQucHJvbWlzZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxMVC5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24odCl7dCYmdGhpcy5mdC5yZWplY3QodCksdGhpcy5hYm9ydGVkfHwoYWIoXCJTaW1wbGVEYlwiLFwiQWJvcnRpbmcgdHJhbnNhY3Rpb246XCIsdD90Lm1lc3NhZ2U6XCJDbGllbnQtaW5pdGlhdGVkIGFib3J0XCIpLHRoaXMuYWJvcnRlZD0hMCx0aGlzLnRyYW5zYWN0aW9uLmFib3J0KCkpfSxMVC5wcm90b3R5cGUuc3RvcmU9ZnVuY3Rpb24odCl7dD10aGlzLnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHQpO3JldHVybiBuZXcgalQodCl9LExUKSxBVD0oeFQuZGVsZXRlPWZ1bmN0aW9uKHQpe3JldHVybiBhYihcIlNpbXBsZURiXCIsXCJSZW1vdmluZyBkYXRhYmFzZTpcIix0KSxWVCh3aW5kb3cuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKHQpKS50b1Byb21pc2UoKX0seFQueXQ9ZnVuY3Rpb24oKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgaW5kZXhlZERCKXJldHVybiExO2lmKHhULmd0KCkpcmV0dXJuITA7dmFyIHQ9dm8oKSxlPXhULl90KHQpLG49MDxlJiZlPDEwLGU9eFQuRXQodCksZT0wPGUmJmU8NC41O3JldHVybiEoMDx0LmluZGV4T2YoXCJNU0lFIFwiKXx8MDx0LmluZGV4T2YoXCJUcmlkZW50L1wiKXx8MDx0LmluZGV4T2YoXCJFZGdlL1wiKXx8bnx8ZSl9LHhULmd0PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHByb2Nlc3MmJlwiWUVTXCI9PT0obnVsbD09PSh0PXByb2Nlc3MuZW52KXx8dm9pZCAwPT09dD92b2lkIDA6dC5UdCl9LHhULkl0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc3RvcmUoZSl9LHhULl90PWZ1bmN0aW9uKHQpe3Q9dC5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSx0PXQ/dFsxXS5zcGxpdChcIl9cIikuc2xpY2UoMCwyKS5qb2luKFwiLlwiKTpcIi0xXCI7cmV0dXJuIE51bWJlcih0KX0seFQuRXQ9ZnVuY3Rpb24odCl7dD10Lm1hdGNoKC9BbmRyb2lkIChbXFxkLl0rKS9pKSx0PXQ/dFsxXS5zcGxpdChcIi5cIikuc2xpY2UoMCwyKS5qb2luKFwiLlwiKTpcIi0xXCI7cmV0dXJuIE51bWJlcih0KX0seFQucHJvdG90eXBlLkF0PWZ1bmN0aW9uKG8pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxpPXRoaXM7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5kYj9bMywyXTooYWIoXCJTaW1wbGVEYlwiLFwiT3BlbmluZyBkYXRhYmFzZTpcIix0aGlzLm5hbWUpLGU9dGhpcyxbNCxuZXcgUHJvbWlzZShmdW5jdGlvbihlLG4pe3ZhciByPWluZGV4ZWREQi5vcGVuKGkubmFtZSxpLnZlcnNpb24pO3Iub25zdWNjZXNzPWZ1bmN0aW9uKHQpe3Q9dC50YXJnZXQucmVzdWx0O2UodCl9LHIub25ibG9ja2VkPWZ1bmN0aW9uKCl7bihuZXcgUFQobyxcIkNhbm5vdCB1cGdyYWRlIEluZGV4ZWREQiBzY2hlbWEgd2hpbGUgYW5vdGhlciB0YWIgaXMgb3Blbi4gQ2xvc2UgYWxsIHRhYnMgdGhhdCBhY2Nlc3MgRmlyZXN0b3JlIGFuZCByZWxvYWQgdGhpcyBwYWdlIHRvIHByb2NlZWQuXCIpKX0sci5vbmVycm9yPWZ1bmN0aW9uKHQpe3Q9dC50YXJnZXQuZXJyb3I7XCJWZXJzaW9uRXJyb3JcIj09PXQubmFtZT9uKG5ldyBuYihlYi5GQUlMRURfUFJFQ09ORElUSU9OLFwiQSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBGaXJlc3RvcmUgU0RLIHdhcyBwcmV2aW91c2x5IHVzZWQgYW5kIHNvIHRoZSBwZXJzaXN0ZWQgZGF0YSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB2ZXJzaW9uIG9mIHRoZSBTREsgeW91IGFyZSBub3cgdXNpbmcuIFRoZSBTREsgd2lsbCBvcGVyYXRlIHdpdGggcGVyc2lzdGVuY2UgZGlzYWJsZWQuIElmIHlvdSBuZWVkIHBlcnNpc3RlbmNlLCBwbGVhc2UgcmUtdXBncmFkZSB0byBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIFNESyBvciBlbHNlIGNsZWFyIHRoZSBwZXJzaXN0ZWQgSW5kZXhlZERCIGRhdGEgZm9yIHlvdXIgYXBwIHRvIHN0YXJ0IGZyZXNoLlwiKSk6bihuZXcgUFQobyx0KSl9LHIub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKHQpe2FiKFwiU2ltcGxlRGJcIiwnRGF0YWJhc2UgXCInK2kubmFtZSsnXCIgcmVxdWlyZXMgdXBncmFkZSBmcm9tIHZlcnNpb246Jyx0Lm9sZFZlcnNpb24pO3ZhciBlPXQudGFyZ2V0LnJlc3VsdDtpLnd0LlJ0KGUsci50cmFuc2FjdGlvbix0Lm9sZFZlcnNpb24saS52ZXJzaW9uKS5uZXh0KGZ1bmN0aW9uKCl7YWIoXCJTaW1wbGVEYlwiLFwiRGF0YWJhc2UgdXBncmFkZSB0byB2ZXJzaW9uIFwiK2kudmVyc2lvbitcIiBjb21wbGV0ZVwiKX0pfX0pXSk7Y2FzZSAxOmUuZGI9dC5zZW50KCksdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm5bMiwodGhpcy5idCYmKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlPWZ1bmN0aW9uKHQpe3JldHVybiBpLmJ0KHQpfSksdGhpcy5kYildfX0pfSl9LHhULnByb3RvdHlwZS52dD1mdW5jdGlvbihlKXt0aGlzLmJ0PWUsdGhpcy5kYiYmKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlPWZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfSl9LHhULnByb3RvdHlwZS5ydW5UcmFuc2FjdGlvbj1mdW5jdGlvbihzLG4sdSxjKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGksbyxhLGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDppPVwicmVhZG9ubHlcIj09PW4sbz0wLGU9ZnVuY3Rpb24oKXt2YXIgZSxuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDorK28sdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsNCwsNV0pLFs0LGEuQXQocyldO2Nhc2UgMjpyZXR1cm4gYS5kYj10LnNlbnQoKSxlPU5ULm9wZW4oYS5kYixzLGk/XCJyZWFkb25seVwiOlwicmVhZHdyaXRlXCIsdSksbj1jKGUpLmNhdGNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmFib3J0KHQpLGtULnJlamVjdCh0KX0pLnRvUHJvbWlzZSgpLHI9e30sbi5jYXRjaChmdW5jdGlvbigpe30pLFs0LGUuZHRdO2Nhc2UgMzpyZXR1cm5bMiwoci52YWx1ZT0odC5zZW50KCksbikscildO2Nhc2UgNDpyZXR1cm4gbj10LnNlbnQoKSxyPVwiRmlyZWJhc2VFcnJvclwiIT09bi5uYW1lJiZvPDMsYWIoXCJTaW1wbGVEYlwiLFwiVHJhbnNhY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6XCIsbi5tZXNzYWdlLFwiUmV0cnlpbmc6XCIsciksYS5jbG9zZSgpLHI/WzMsNV06WzIse3ZhbHVlOlByb21pc2UucmVqZWN0KG4pfV07Y2FzZSA1OnJldHVyblsyXX19KX0sYT10aGlzLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuWzUsZSgpXTtjYXNlIDI6aWYoXCJvYmplY3RcIj09dHlwZW9mKGU9dC5zZW50KCkpKXJldHVyblsyLGUudmFsdWVdO3QubGFiZWw9MztjYXNlIDM6cmV0dXJuWzMsMV07Y2FzZSA0OnJldHVyblsyXX19KX0pfSx4VC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLmRiJiZ0aGlzLmRiLmNsb3NlKCksdGhpcy5kYj12b2lkIDB9LHhUKSxSVD0oT2JqZWN0LmRlZmluZVByb3BlcnR5KERULnByb3RvdHlwZSxcImlzRG9uZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5WdH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRFQucHJvdG90eXBlLFwiRHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuU3R9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KERULnByb3RvdHlwZSxcImN1cnNvclwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5QdD10fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLERULnByb3RvdHlwZS5kb25lPWZ1bmN0aW9uKCl7dGhpcy5WdD0hMH0sRFQucHJvdG90eXBlLkN0PWZ1bmN0aW9uKHQpe3RoaXMuU3Q9dH0sRFQucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbigpe3JldHVybiBWVCh0aGlzLlB0LmRlbGV0ZSgpKX0sRFQpLFBUPShYaShPVCxUVD1uYiksT1QpO2Z1bmN0aW9uIE9UKHQsZSl7dmFyIG49dGhpcztyZXR1cm4obj1UVC5jYWxsKHRoaXMsZWIuVU5BVkFJTEFCTEUsXCJJbmRleGVkREIgdHJhbnNhY3Rpb24gJ1wiK3QrXCInIGZhaWxlZDogXCIrZSl8fHRoaXMpLm5hbWU9XCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCIsbn1mdW5jdGlvbiBEVCh0KXt0aGlzLlB0PXQsdGhpcy5WdD0hMSx0aGlzLlN0PW51bGx9ZnVuY3Rpb24geFQodCxlLG4pe3RoaXMubmFtZT10LHRoaXMudmVyc2lvbj1lLHRoaXMud3Q9biwxMi4yPT09eFQuX3Qodm8oKSkmJnNiKFwiRmlyZXN0b3JlIHBlcnNpc3RlbmNlIHN1ZmZlcnMgZnJvbSBhIGJ1ZyBpbiBpT1MgMTIuMiBTYWZhcmkgdGhhdCBtYXkgY2F1c2UgeW91ciBhcHAgdG8gc3RvcCB3b3JraW5nLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIil9ZnVuY3Rpb24gTFQoZSx0KXt2YXIgbj10aGlzO3RoaXMuYWN0aW9uPWUsdGhpcy50cmFuc2FjdGlvbj10LHRoaXMuYWJvcnRlZD0hMSx0aGlzLmZ0PW5ldyBDVCx0aGlzLnRyYW5zYWN0aW9uLm9uY29tcGxldGU9ZnVuY3Rpb24oKXtuLmZ0LnJlc29sdmUoKX0sdGhpcy50cmFuc2FjdGlvbi5vbmFib3J0PWZ1bmN0aW9uKCl7dC5lcnJvcj9uLmZ0LnJlamVjdChuZXcgUFQoZSx0LmVycm9yKSk6bi5mdC5yZXNvbHZlKCl9LHRoaXMudHJhbnNhY3Rpb24ub25lcnJvcj1mdW5jdGlvbih0KXt0PUtUKHQudGFyZ2V0LmVycm9yKTtuLmZ0LnJlamVjdChuZXcgUFQoZSx0KSl9fWZ1bmN0aW9uIE1UKHQpe3ZhciBlPXRoaXM7dGhpcy5uZXh0Q2FsbGJhY2s9bnVsbCx0aGlzLmNhdGNoQ2FsbGJhY2s9bnVsbCx0aGlzLnJlc3VsdD12b2lkIDAsdGhpcy5lcnJvcj12b2lkIDAsdGhpcy5pc0RvbmU9ITEsdGhpcy5jYWxsYmFja0F0dGFjaGVkPSExLHQoZnVuY3Rpb24odCl7ZS5pc0RvbmU9ITAsZS5yZXN1bHQ9dCxlLm5leHRDYWxsYmFjayYmZS5uZXh0Q2FsbGJhY2sodCl9LGZ1bmN0aW9uKHQpe2UuaXNEb25lPSEwLGUuZXJyb3I9dCxlLmNhdGNoQ2FsbGJhY2smJmUuY2F0Y2hDYWxsYmFjayh0KX0pfWZ1bmN0aW9uIEZUKCl7dGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycz1bXX1mdW5jdGlvbiBVVCh0KXtyZXR1cm5cIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIj09PXQubmFtZX12YXIgalQ9KHFULnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24odCxlKXt0PXZvaWQgMCE9PWU/KGFiKFwiU2ltcGxlRGJcIixcIlBVVFwiLHRoaXMuc3RvcmUubmFtZSx0LGUpLHRoaXMuc3RvcmUucHV0KGUsdCkpOihhYihcIlNpbXBsZURiXCIsXCJQVVRcIix0aGlzLnN0b3JlLm5hbWUsXCI8YXV0by1rZXk+XCIsdCksdGhpcy5zdG9yZS5wdXQodCkpO3JldHVybiBWVCh0KX0scVQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4gYWIoXCJTaW1wbGVEYlwiLFwiQUREXCIsdGhpcy5zdG9yZS5uYW1lLHQsdCksVlQodGhpcy5zdG9yZS5hZGQodCkpfSxxVC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIFZUKHRoaXMuc3RvcmUuZ2V0KGUpKS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSxhYihcIlNpbXBsZURiXCIsXCJHRVRcIixuLnN0b3JlLm5hbWUsZSx0KSx0fSl9LHFULnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFiKFwiU2ltcGxlRGJcIixcIkRFTEVURVwiLHRoaXMuc3RvcmUubmFtZSx0KSxWVCh0aGlzLnN0b3JlLmRlbGV0ZSh0KSl9LHFULnByb3RvdHlwZS5jb3VudD1mdW5jdGlvbigpe3JldHVybiBhYihcIlNpbXBsZURiXCIsXCJDT1VOVFwiLHRoaXMuc3RvcmUubmFtZSksVlQodGhpcy5zdG9yZS5jb3VudCgpKX0scVQucHJvdG90eXBlLk50PWZ1bmN0aW9uKHQsZSl7dmFyIGU9dGhpcy5jdXJzb3IodGhpcy5vcHRpb25zKHQsZSkpLG49W107cmV0dXJuIHRoaXMueHQoZSxmdW5jdGlvbih0LGUpe24ucHVzaChlKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gbn0pfSxxVC5wcm90b3R5cGUuRnQ9ZnVuY3Rpb24odCxlKXthYihcIlNpbXBsZURiXCIsXCJERUxFVEUgQUxMXCIsdGhpcy5zdG9yZS5uYW1lKTtlPXRoaXMub3B0aW9ucyh0LGUpO2Uua3Q9ITE7ZT10aGlzLmN1cnNvcihlKTtyZXR1cm4gdGhpcy54dChlLGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbi5kZWxldGUoKX0pfSxxVC5wcm90b3R5cGUuT3Q9ZnVuY3Rpb24odCxlKXtlP249dDoobj17fSxlPXQpO3ZhciBuPXRoaXMuY3Vyc29yKG4pO3JldHVybiB0aGlzLnh0KG4sZSl9LHFULnByb3RvdHlwZS4kdD1mdW5jdGlvbihyKXt2YXIgdD10aGlzLmN1cnNvcih7fSk7cmV0dXJuIG5ldyBrVChmdW5jdGlvbihuLGUpe3Qub25lcnJvcj1mdW5jdGlvbih0KXt0PUtUKHQudGFyZ2V0LmVycm9yKTtlKHQpfSx0Lm9uc3VjY2Vzcz1mdW5jdGlvbih0KXt2YXIgZT10LnRhcmdldC5yZXN1bHQ7ZT9yKGUucHJpbWFyeUtleSxlLnZhbHVlKS5uZXh0KGZ1bmN0aW9uKHQpe3Q/ZS5jb250aW51ZSgpOm4oKX0pOm4oKX19KX0scVQucHJvdG90eXBlLnh0PWZ1bmN0aW9uKHQsaSl7dmFyIG89W107cmV0dXJuIG5ldyBrVChmdW5jdGlvbihyLGUpe3Qub25lcnJvcj1mdW5jdGlvbih0KXtlKHQudGFyZ2V0LmVycm9yKX0sdC5vbnN1Y2Nlc3M9ZnVuY3Rpb24odCl7dmFyIGUsbj10LnRhcmdldC5yZXN1bHQ7bj8oZT1uZXcgUlQobiksKHQ9aShuLnByaW1hcnlLZXksbi52YWx1ZSxlKSlpbnN0YW5jZW9mIGtUJiYodD10LmNhdGNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmRvbmUoKSxrVC5yZWplY3QodCl9KSxvLnB1c2godCkpLGUuaXNEb25lP3IoKTpudWxsPT09ZS5EdD9uLmNvbnRpbnVlKCk6bi5jb250aW51ZShlLkR0KSk6cigpfX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4ga1Qud2FpdEZvcihvKX0pfSxxVC5wcm90b3R5cGUub3B0aW9ucz1mdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiB2b2lkIDAhPT10JiYoXCJzdHJpbmdcIj09dHlwZW9mIHQ/bj10OmU9dCkse2luZGV4Om4scmFuZ2U6ZX19LHFULnByb3RvdHlwZS5jdXJzb3I9ZnVuY3Rpb24odCl7dmFyIGU9XCJuZXh0XCI7aWYodC5yZXZlcnNlJiYoZT1cInByZXZcIiksdC5pbmRleCl7dmFyIG49dGhpcy5zdG9yZS5pbmRleCh0LmluZGV4KTtyZXR1cm4gdC5rdD9uLm9wZW5LZXlDdXJzb3IodC5yYW5nZSxlKTpuLm9wZW5DdXJzb3IodC5yYW5nZSxlKX1yZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKHQucmFuZ2UsZSl9LHFUKTtmdW5jdGlvbiBxVCh0KXt0aGlzLnN0b3JlPXR9ZnVuY3Rpb24gVlQodCl7cmV0dXJuIG5ldyBrVChmdW5jdGlvbihlLG4pe3Qub25zdWNjZXNzPWZ1bmN0aW9uKHQpe3Q9dC50YXJnZXQucmVzdWx0O2UodCl9LHQub25lcnJvcj1mdW5jdGlvbih0KXt0PUtUKHQudGFyZ2V0LmVycm9yKTtuKHQpfX0pfXZhciBCVD0hMTtmdW5jdGlvbiBLVCh0KXt2YXIgZT1BVC5fdCh2bygpKTtpZigxMi4yPD1lJiZlPDEzKXtlPVwiQW4gaW50ZXJuYWwgZXJyb3Igd2FzIGVuY291bnRlcmVkIGluIHRoZSBJbmRleGVkIERhdGFiYXNlIHNlcnZlclwiO2lmKDA8PXQubWVzc2FnZS5pbmRleE9mKGUpKXt2YXIgbj1uZXcgbmIoXCJpbnRlcm5hbFwiLFwiSU9TX0lOREVYRUREQl9CVUcxOiBJbmRleGVkRGIgaGFzIHRocm93biAnXCIrZStcIicuIFRoaXMgaXMgbGlrZWx5IGR1ZSB0byBhbiB1bmF2b2lkYWJsZSBidWcgaW4gaU9TLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIik7cmV0dXJuIEJUfHwoQlQ9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IG59LDApKSxufX1yZXR1cm4gdH12YXIgV1QsSFQ9KFhpKEdULFdUPVNuKSxHVCk7ZnVuY3Rpb24gR1QodCxlKXt2YXIgbj10aGlzO3JldHVybihuPVdULmNhbGwodGhpcyl8fHRoaXMpLk10PXQsbi5jdXJyZW50U2VxdWVuY2VOdW1iZXI9ZSxufWZ1bmN0aW9uIHpUKHQsZSl7cmV0dXJuIEFULkl0KHQuTXQsZSl9dmFyIFFUPSh0RS5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuLHIsaSxvLGEscyx1PWUubXV0YXRpb25SZXN1bHRzLGM9MDtjPHRoaXMubXV0YXRpb25zLmxlbmd0aDtjKyspe3ZhciBoPXRoaXMubXV0YXRpb25zW2NdO2gua2V5LmlzRXF1YWwodC5rZXkpJiYobj1oLHI9dCxpPXVbY10saD1zPWE9bz12b2lkIDAsbiBpbnN0YW5jZW9mIE13PyhhPXIscz1pLGg9KG89bikudmFsdWUuY2xvbmUoKSxvPVZ3KG8uZmllbGRUcmFuc2Zvcm1zLGEscy50cmFuc2Zvcm1SZXN1bHRzKSxoLnNldEFsbChvKSxhLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQocy52ZXJzaW9uLGgpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpKTpuIGluc3RhbmNlb2YgRnc/KG89cixhPWksUncoKHM9bikucHJlY29uZGl0aW9uLG8pPyhoPVZ3KHMuZmllbGRUcmFuc2Zvcm1zLG8sYS50cmFuc2Zvcm1SZXN1bHRzKSwobj1vLmRhdGEpLnNldEFsbChxdyhzKSksbi5zZXRBbGwoaCksby5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KGEudmVyc2lvbixuKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSk6by5jb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQoYS52ZXJzaW9uKSk6ci5jb252ZXJ0VG9Ob0RvY3VtZW50KGkudmVyc2lvbikuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkpfX0sdEUucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLmJhc2VNdXRhdGlvbnM7ZTxuLmxlbmd0aDtlKyspKHI9bltlXSkua2V5LmlzRXF1YWwodC5rZXkpJiZQdyhyLHQsdGhpcy5sb2NhbFdyaXRlVGltZSk7Zm9yKHZhciByLGk9MCxvPXRoaXMubXV0YXRpb25zO2k8by5sZW5ndGg7aSsrKShyPW9baV0pLmtleS5pc0VxdWFsKHQua2V5KSYmUHcocix0LHRoaXMubG9jYWxXcml0ZVRpbWUpfSx0RS5wcm90b3R5cGUuYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQ9ZnVuY3Rpb24obil7dmFyIHI9dGhpczt0aGlzLm11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPW4uZ2V0KHQua2V5KSx0PWU7ci5hcHBseVRvTG9jYWxWaWV3KHQpLGUuaXNWYWxpZERvY3VtZW50KCl8fHQuY29udmVydFRvTm9Eb2N1bWVudChtYi5taW4oKSl9KX0sdEUucHJvdG90eXBlLmtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdXRhdGlvbnMucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuYWRkKGUua2V5KX0sZEkoKSl9LHRFLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmJhdGNoSWQ9PT10LmJhdGNoSWQmJnZiKHRoaXMubXV0YXRpb25zLHQubXV0YXRpb25zLE93KSYmdmIodGhpcy5iYXNlTXV0YXRpb25zLHQuYmFzZU11dGF0aW9ucyxPdyl9LHRFKSxZVD0oWlQuZnJvbT1mdW5jdGlvbih0LGUsbil7bGIodC5tdXRhdGlvbnMubGVuZ3RoPT09bi5sZW5ndGgpO2Zvcih2YXIgcj1mSSxpPXQubXV0YXRpb25zLG89MDtvPGkubGVuZ3RoO28rKylyPXIuaW5zZXJ0KGlbb10ua2V5LG5bb10udmVyc2lvbik7cmV0dXJuIG5ldyBaVCh0LGUsbixyKX0sWlQpLFhUPSgkVC5wcm90b3R5cGUud2l0aFNlcXVlbmNlTnVtYmVyPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgJFQodGhpcy50YXJnZXQsdGhpcy50YXJnZXRJZCx0aGlzLnB1cnBvc2UsdCx0aGlzLnNuYXBzaG90VmVyc2lvbix0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sdGhpcy5yZXN1bWVUb2tlbil9LCRULnByb3RvdHlwZS53aXRoUmVzdW1lVG9rZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3ICRUKHRoaXMudGFyZ2V0LHRoaXMudGFyZ2V0SWQsdGhpcy5wdXJwb3NlLHRoaXMuc2VxdWVuY2VOdW1iZXIsZSx0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sdCl9LCRULnByb3RvdHlwZS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3ICRUKHRoaXMudGFyZ2V0LHRoaXMudGFyZ2V0SWQsdGhpcy5wdXJwb3NlLHRoaXMuc2VxdWVuY2VOdW1iZXIsdGhpcy5zbmFwc2hvdFZlcnNpb24sdCx0aGlzLnJlc3VtZVRva2VuKX0sJFQpLEpUPWZ1bmN0aW9uKHQpe3RoaXMuTHQ9dH07ZnVuY3Rpb24gJFQodCxlLG4scixpLG8sYSl7dm9pZCAwPT09aSYmKGk9bWIubWluKCkpLHZvaWQgMD09PW8mJihvPW1iLm1pbigpKSx2b2lkIDA9PT1hJiYoYT1SYi5FTVBUWV9CWVRFX1NUUklORyksdGhpcy50YXJnZXQ9dCx0aGlzLnRhcmdldElkPWUsdGhpcy5wdXJwb3NlPW4sdGhpcy5zZXF1ZW5jZU51bWJlcj1yLHRoaXMuc25hcHNob3RWZXJzaW9uPWksdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uPW8sdGhpcy5yZXN1bWVUb2tlbj1hfWZ1bmN0aW9uIFpUKHQsZSxuLHIpe3RoaXMuYmF0Y2g9dCx0aGlzLmNvbW1pdFZlcnNpb249ZSx0aGlzLm11dGF0aW9uUmVzdWx0cz1uLHRoaXMuZG9jVmVyc2lvbnM9cn1mdW5jdGlvbiB0RSh0LGUsbixyKXt0aGlzLmJhdGNoSWQ9dCx0aGlzLmxvY2FsV3JpdGVUaW1lPWUsdGhpcy5iYXNlTXV0YXRpb25zPW4sdGhpcy5tdXRhdGlvbnM9cn1mdW5jdGlvbiBlRSh0LGUpe2lmKGUuZG9jdW1lbnQpcmV0dXJuIFdJKHQuTHQsZS5kb2N1bWVudCwhIWUuaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtpZihlLm5vRG9jdW1lbnQpe3ZhciBuPUhiLmZyb21TZWdtZW50cyhlLm5vRG9jdW1lbnQucGF0aCkscj1hRShlLm5vRG9jdW1lbnQucmVhZFRpbWUpLG49c18ubmV3Tm9Eb2N1bWVudChuLHIpO3JldHVybiBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucz9uLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpOm59aWYoZS51bmtub3duRG9jdW1lbnQpe249SGIuZnJvbVNlZ21lbnRzKGUudW5rbm93bkRvY3VtZW50LnBhdGgpLHI9YUUoZS51bmtub3duRG9jdW1lbnQudmVyc2lvbik7cmV0dXJuIHNfLm5ld1Vua25vd25Eb2N1bWVudChuLHIpfXJldHVybiBoYigpfWZ1bmN0aW9uIG5FKHQsZSxuKXt2YXIgcj1yRShuKSxuPWUua2V5LnBhdGgucG9wTGFzdCgpLnRvQXJyYXkoKTtpZihlLmlzRm91bmREb2N1bWVudCgpKXt2YXIgaT17bmFtZTpGSShvPXQuTHQsKGE9ZSkua2V5KSxmaWVsZHM6YS5kYXRhLnRvUHJvdG8oKS5tYXBWYWx1ZS5maWVsZHMsdXBkYXRlVGltZTpPSShvLGEudmVyc2lvbi50b1RpbWVzdGFtcCgpKX0sbz1lLmhhc0NvbW1pdHRlZE11dGF0aW9ucztyZXR1cm4gbmV3IGRUKG51bGwsbnVsbCxpLG8scixuKX1pZihlLmlzTm9Eb2N1bWVudCgpKXt2YXIgYT1lLmtleS5wYXRoLnRvQXJyYXkoKSxpPW9FKGUudmVyc2lvbiksbz1lLmhhc0NvbW1pdHRlZE11dGF0aW9ucztyZXR1cm4gbmV3IGRUKG51bGwsbmV3IGZUKGEsaSksbnVsbCxvLHIsbil9aWYoZS5pc1Vua25vd25Eb2N1bWVudCgpKXtvPWUua2V5LnBhdGgudG9BcnJheSgpLGU9b0UoZS52ZXJzaW9uKTtyZXR1cm4gbmV3IGRUKG5ldyBwVChvLGUpLG51bGwsbnVsbCwhMCxyLG4pfXJldHVybiBoYigpfWZ1bmN0aW9uIHJFKHQpe3Q9dC50b1RpbWVzdGFtcCgpO3JldHVyblt0LnNlY29uZHMsdC5uYW5vc2Vjb25kc119ZnVuY3Rpb24gaUUodCl7dD1uZXcgeWIodFswXSx0WzFdKTtyZXR1cm4gbWIuZnJvbVRpbWVzdGFtcCh0KX1mdW5jdGlvbiBvRSh0KXt0PXQudG9UaW1lc3RhbXAoKTtyZXR1cm4gbmV3IHNUKHQuc2Vjb25kcyx0Lm5hbm9zZWNvbmRzKX1mdW5jdGlvbiBhRSh0KXt0PW5ldyB5Yih0LnNlY29uZHMsdC5uYW5vc2Vjb25kcyk7cmV0dXJuIG1iLmZyb21UaW1lc3RhbXAodCl9ZnVuY3Rpb24gc0UoZSx0KXtmb3IodmFyIG49KHQuYmFzZU11dGF0aW9uc3x8W10pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gR0koZS5MdCx0KX0pLHI9MDtyPHQubXV0YXRpb25zLmxlbmd0aC0xOysrcil7dmFyIGksbz10Lm11dGF0aW9uc1tyXTtyKzE8dC5tdXRhdGlvbnMubGVuZ3RoJiZ2b2lkIDAhPT10Lm11dGF0aW9uc1tyKzFdLnRyYW5zZm9ybSYmKGk9dC5tdXRhdGlvbnNbcisxXSxvLnVwZGF0ZVRyYW5zZm9ybXM9aS50cmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zLHQubXV0YXRpb25zLnNwbGljZShyKzEsMSksKytyKX12YXIgYT10Lm11dGF0aW9ucy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIEdJKGUuTHQsdCl9KSxzPXliLmZyb21NaWxsaXModC5sb2NhbFdyaXRlVGltZU1zKTtyZXR1cm4gbmV3IFFUKHQuYmF0Y2hJZCxzLG4sYSl9ZnVuY3Rpb24gdUUodCl7dmFyIGU9YUUodC5yZWFkVGltZSksbj12b2lkIDAhPT10Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24/YUUodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTptYi5taW4oKSxyPXZvaWQgMCE9PXQucXVlcnkuZG9jdW1lbnRzPyhsYigxPT09KHI9dC5xdWVyeSkuZG9jdW1lbnRzLmxlbmd0aCksWl8oR18ocUkoci5kb2N1bWVudHNbMF0pKSkpOlpfKFlJKHQucXVlcnkpKTtyZXR1cm4gbmV3IFhUKHIsdC50YXJnZXRJZCwwLHQubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLGUsbixSYi5mcm9tQmFzZTY0U3RyaW5nKHQucmVzdW1lVG9rZW4pKX1mdW5jdGlvbiBjRSh0LGUpe3ZhciBuPW9FKGUuc25hcHNob3RWZXJzaW9uKSxyPW9FKGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiksaT0ocF8oZS50YXJnZXQpP3pJOlFJKSh0Lkx0LGUudGFyZ2V0KSx0PWUucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtyZXR1cm4gbmV3IGdUKGUudGFyZ2V0SWQsbF8oZS50YXJnZXQpLG4sdCxlLnNlcXVlbmNlTnVtYmVyLHIsaSl9ZnVuY3Rpb24gaEUodCl7dmFyIGU9WUkoe3BhcmVudDp0LnBhcmVudCxzdHJ1Y3R1cmVkUXVlcnk6dC5zdHJ1Y3R1cmVkUXVlcnl9KTtyZXR1cm5cIkxBU1RcIj09PXQubGltaXRUeXBlP3R3KGUsZS5saW1pdCxcIkxcIik6ZX12YXIgbEU9KGZFLnByb3RvdHlwZS5nZXRCdW5kbGVNZXRhZGF0YT1mdW5jdGlvbih0LGUpe3JldHVybiBwRSh0KS5nZXQoZSkubmV4dChmdW5jdGlvbih0KXtpZih0KXJldHVybntpZDoodD10KS5idW5kbGVJZCxjcmVhdGVUaW1lOmFFKHQuY3JlYXRlVGltZSksdmVyc2lvbjp0LnZlcnNpb259fSl9LGZFLnByb3RvdHlwZS5zYXZlQnVuZGxlTWV0YWRhdGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gcEUodCkucHV0KHtidW5kbGVJZDooZT1lKS5pZCxjcmVhdGVUaW1lOm9FKHhJKGUuY3JlYXRlVGltZSkpLHZlcnNpb246ZS52ZXJzaW9ufSl9LGZFLnByb3RvdHlwZS5nZXROYW1lZFF1ZXJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGRFKHQpLmdldChlKS5uZXh0KGZ1bmN0aW9uKHQpe2lmKHQpcmV0dXJue25hbWU6KHQ9dCkubmFtZSxxdWVyeTpoRSh0LmJ1bmRsZWRRdWVyeSkscmVhZFRpbWU6YUUodC5yZWFkVGltZSl9fSl9LGZFLnByb3RvdHlwZS5zYXZlTmFtZWRRdWVyeT1mdW5jdGlvbih0LGUpe3JldHVybiBkRSh0KS5wdXQoe25hbWU6KGU9ZSkubmFtZSxyZWFkVGltZTpvRSh4SShlLnJlYWRUaW1lKSksYnVuZGxlZFF1ZXJ5OmUuYnVuZGxlZFF1ZXJ5fSl9LGZFKTtmdW5jdGlvbiBmRSgpe31mdW5jdGlvbiBwRSh0KXtyZXR1cm4gelQodCx3VC5zdG9yZSl9ZnVuY3Rpb24gZEUodCl7cmV0dXJuIHpUKHQsSVQuc3RvcmUpfXZhciB2RT0oX0UucHJvdG90eXBlLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuQnQuYWRkKGUpLGtULnJlc29sdmUoKX0sX0UucHJvdG90eXBlLmdldENvbGxlY3Rpb25QYXJlbnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGtULnJlc29sdmUodGhpcy5CdC5nZXRFbnRyaWVzKGUpKX0sX0UpLGdFPShiRS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3ZhciBlPXQubGFzdFNlZ21lbnQoKSxuPXQucG9wTGFzdCgpLHI9dGhpcy5pbmRleFtlXXx8bmV3IGFJKENiLmNvbXBhcmF0b3IpLHQ9IXIuaGFzKG4pO3JldHVybiB0aGlzLmluZGV4W2VdPXIuYWRkKG4pLHR9LGJFLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7dmFyIGU9dC5sYXN0U2VnbWVudCgpLHQ9dC5wb3BMYXN0KCksZT10aGlzLmluZGV4W2VdO3JldHVybiBlJiZlLmhhcyh0KX0sYkUucHJvdG90eXBlLmdldEVudHJpZXM9ZnVuY3Rpb24odCl7cmV0dXJuKHRoaXMuaW5kZXhbdF18fG5ldyBhSShDYi5jb21wYXJhdG9yKSkudG9BcnJheSgpfSxiRSkseUU9KG1FLnByb3RvdHlwZS5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodGhpcy5xdC5oYXMoZSkpcmV0dXJuIGtULnJlc29sdmUoKTt2YXIgcj1lLmxhc3RTZWdtZW50KCksaT1lLnBvcExhc3QoKTt0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoZnVuY3Rpb24oKXtuLnF0LmFkZChlKX0pO2k9e2NvbGxlY3Rpb25JZDpyLHBhcmVudDpyVChpKX07cmV0dXJuIHdFKHQpLnB1dChpKX0sbUUucHJvdG90eXBlLmdldENvbGxlY3Rpb25QYXJlbnRzPWZ1bmN0aW9uKHQsaSl7dmFyIG89W10sZT1JREJLZXlSYW5nZS5ib3VuZChbaSxcIlwiXSxbZ2IoaSksXCJcIl0sITEsITApO3JldHVybiB3RSh0KS5OdChlKS5uZXh0KGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dDtlPG4ubGVuZ3RoO2UrKyl7dmFyIHI9bltlXTtpZihyLmNvbGxlY3Rpb25JZCE9PWkpYnJlYWs7by5wdXNoKG9UKHIucGFyZW50KSl9cmV0dXJuIG99KX0sbUUpO2Z1bmN0aW9uIG1FKCl7dGhpcy5xdD1uZXcgZ0V9ZnVuY3Rpb24gYkUoKXt0aGlzLmluZGV4PXt9fWZ1bmN0aW9uIF9FKCl7dGhpcy5CdD1uZXcgZ0V9ZnVuY3Rpb24gd0UodCl7cmV0dXJuIHpUKHQsYlQuc3RvcmUpfXZhciBJRT17ZGlkUnVuOiExLHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDowLHRhcmdldHNSZW1vdmVkOjAsZG9jdW1lbnRzUmVtb3ZlZDowfSxURT0oRUUud2l0aENhY2hlU2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEVFKHQsRUUuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsRUUuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKX0sRUUpO2Z1bmN0aW9uIEVFKHQsZSxuKXt0aGlzLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQ9dCx0aGlzLnBlcmNlbnRpbGVUb0NvbGxlY3Q9ZSx0aGlzLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3Q9bn1mdW5jdGlvbiBTRSh0LGUsbil7dmFyIHI9dC5zdG9yZShjVC5zdG9yZSksaT10LnN0b3JlKGhULnN0b3JlKSxvPVtdLHQ9SURCS2V5UmFuZ2Uub25seShuLmJhdGNoSWQpLGE9MCx0PXIuT3Qoe3JhbmdlOnR9LGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gYSsrLG4uZGVsZXRlKCl9KTtvLnB1c2godC5uZXh0KGZ1bmN0aW9uKCl7bGIoMT09PWEpfSkpO2Zvcih2YXIgcz1bXSx1PTAsYz1uLm11dGF0aW9uczt1PGMubGVuZ3RoO3UrKyl7dmFyIGg9Y1t1XSxsPWhULmtleShlLGgua2V5LnBhdGgsbi5iYXRjaElkKTtvLnB1c2goaS5kZWxldGUobCkpLHMucHVzaChoLmtleSl9cmV0dXJuIGtULndhaXRGb3IobykubmV4dChmdW5jdGlvbigpe3JldHVybiBzfSl9ZnVuY3Rpb24gQ0UodCl7aWYoIXQpcmV0dXJuIDA7dmFyIGU7aWYodC5kb2N1bWVudCllPXQuZG9jdW1lbnQ7ZWxzZSBpZih0LnVua25vd25Eb2N1bWVudCllPXQudW5rbm93bkRvY3VtZW50O2Vsc2V7aWYoIXQubm9Eb2N1bWVudCl0aHJvdyBoYigpO2U9dC5ub0RvY3VtZW50fXJldHVybiBKU09OLnN0cmluZ2lmeShlKS5sZW5ndGh9VEUuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEU9MTAsVEUuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUPTFlMyxURS5ERUZBVUxUPW5ldyBURSg0MTk0MzA0MCxURS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSxURS5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpLFRFLkRJU0FCTEVEPW5ldyBURSgtMSwwLDApO3ZhciBrRT0oTkUuS3Q9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIGxiKFwiXCIhPT10LnVpZCksbmV3IE5FKHQuaXNBdXRoZW50aWNhdGVkKCk/dC51aWQ6XCJcIixlLG4scil9LE5FLnByb3RvdHlwZS5jaGVja0VtcHR5PWZ1bmN0aW9uKHQpe3ZhciByPSEwLGU9SURCS2V5UmFuZ2UuYm91bmQoW3RoaXMudXNlcklkLE51bWJlci5ORUdBVElWRV9JTkZJTklUWV0sW3RoaXMudXNlcklkLE51bWJlci5QT1NJVElWRV9JTkZJTklUWV0pO3JldHVybiBSRSh0KS5PdCh7aW5kZXg6Y1QudXNlck11dGF0aW9uc0luZGV4LHJhbmdlOmV9LGZ1bmN0aW9uKHQsZSxuKXtyPSExLG4uZG9uZSgpfSkubmV4dChmdW5jdGlvbigpe3JldHVybiByfSl9LE5FLnByb3RvdHlwZS5hZGRNdXRhdGlvbkJhdGNoPWZ1bmN0aW9uKGQsdixnLHkpe3ZhciBtPXRoaXMsYj1QRShkKSxfPVJFKGQpO3JldHVybiBfLmFkZCh7fSkubmV4dChmdW5jdGlvbih0KXtsYihcIm51bWJlclwiPT10eXBlb2YgdCk7Zm9yKHZhciBlLG4scixpLG8sYT1uZXcgUVQodCx2LGcseSkscz0oZT1tLlIsbj1tLnVzZXJJZCxpPShyPWEpLmJhc2VNdXRhdGlvbnMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBISShlLkx0LHQpfSksbz1yLm11dGF0aW9ucy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIEhJKGUuTHQsdCl9KSxuZXcgY1QobixyLmJhdGNoSWQsci5sb2NhbFdyaXRlVGltZS50b01pbGxpcygpLGksbykpLHU9W10sYz1uZXcgYUkoZnVuY3Rpb24odCxlKXtyZXR1cm4gZGIodC5jYW5vbmljYWxTdHJpbmcoKSxlLmNhbm9uaWNhbFN0cmluZygpKX0pLGg9MCxsPXk7aDxsLmxlbmd0aDtoKyspe3ZhciBmPWxbaF0scD1oVC5rZXkobS51c2VySWQsZi5rZXkucGF0aCx0KSxjPWMuYWRkKGYua2V5LnBhdGgucG9wTGFzdCgpKTt1LnB1c2goXy5wdXQocykpLHUucHVzaChiLnB1dChwLGhULlBMQUNFSE9MREVSKSl9cmV0dXJuIGMuZm9yRWFjaChmdW5jdGlvbih0KXt1LnB1c2gobS5VdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChkLHQpKX0pLGQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcihmdW5jdGlvbigpe20uUXRbdF09YS5rZXlzKCl9KSxrVC53YWl0Rm9yKHUpLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gYX0pfSl9LE5FLnByb3RvdHlwZS5sb29rdXBNdXRhdGlvbkJhdGNoPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztyZXR1cm4gUkUodCkuZ2V0KGUpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIHQ/KGxiKHQudXNlcklkPT09bi51c2VySWQpLHNFKG4uUix0KSk6bnVsbH0pfSxORS5wcm90b3R5cGUuanQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLlF0W2VdP2tULnJlc29sdmUodGhpcy5RdFtlXSk6dGhpcy5sb29rdXBNdXRhdGlvbkJhdGNoKHQsZSkubmV4dChmdW5jdGlvbih0KXtpZih0KXt0PXQua2V5cygpO3JldHVybiBuLlF0W2VdPXR9cmV0dXJuIG51bGx9KX0sTkUucHJvdG90eXBlLmdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcyxpPWUrMSxlPUlEQktleVJhbmdlLmxvd2VyQm91bmQoW3RoaXMudXNlcklkLGldKSxvPW51bGw7cmV0dXJuIFJFKHQpLk90KHtpbmRleDpjVC51c2VyTXV0YXRpb25zSW5kZXgscmFuZ2U6ZX0sZnVuY3Rpb24odCxlLG4pe2UudXNlcklkPT09ci51c2VySWQmJihsYihlLmJhdGNoSWQ+PWkpLG89c0Uoci5SLGUpKSxuLmRvbmUoKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gb30pfSxORS5wcm90b3R5cGUuZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZD1mdW5jdGlvbih0KXt2YXIgZT1JREJLZXlSYW5nZS51cHBlckJvdW5kKFt0aGlzLnVzZXJJZCxOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldKSxyPS0xO3JldHVybiBSRSh0KS5PdCh7aW5kZXg6Y1QudXNlck11dGF0aW9uc0luZGV4LHJhbmdlOmUscmV2ZXJzZTohMH0sZnVuY3Rpb24odCxlLG4pe3I9ZS5iYXRjaElkLG4uZG9uZSgpfSkubmV4dChmdW5jdGlvbigpe3JldHVybiByfSl9LE5FLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPUlEQktleVJhbmdlLmJvdW5kKFt0aGlzLnVzZXJJZCwtMV0sW3RoaXMudXNlcklkLE51bWJlci5QT1NJVElWRV9JTkZJTklUWV0pO3JldHVybiBSRSh0KS5OdChjVC51c2VyTXV0YXRpb25zSW5kZXgsbikubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHNFKGUuUix0KX0pfSl9LE5FLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleT1mdW5jdGlvbihvLGEpe3ZhciBzPXRoaXMsdD1oVC5wcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLGEucGF0aCksdD1JREJLZXlSYW5nZS5sb3dlckJvdW5kKHQpLHU9W107cmV0dXJuIFBFKG8pLk90KHtyYW5nZTp0fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9dFswXSxpPXRbMV0sdD10WzJdLGk9b1QoaSk7aWYocj09PXMudXNlcklkJiZhLnBhdGguaXNFcXVhbChpKSlyZXR1cm4gUkUobykuZ2V0KHQpLm5leHQoZnVuY3Rpb24odCl7aWYoIXQpdGhyb3cgaGIoKTtsYih0LnVzZXJJZD09PXMudXNlcklkKSx1LnB1c2goc0Uocy5SLHQpKX0pO24uZG9uZSgpfSkubmV4dChmdW5jdGlvbigpe3JldHVybiB1fSl9LE5FLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXM9ZnVuY3Rpb24oZSx0KXt2YXIgYT10aGlzLHM9bmV3IGFJKGRiKSxuPVtdO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24obyl7dmFyIHQ9aFQucHJlZml4Rm9yUGF0aChhLnVzZXJJZCxvLnBhdGgpLHQ9SURCS2V5UmFuZ2UubG93ZXJCb3VuZCh0KSx0PVBFKGUpLk90KHtyYW5nZTp0fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9dFswXSxpPXRbMV0sdD10WzJdLGk9b1QoaSk7cj09PWEudXNlcklkJiZvLnBhdGguaXNFcXVhbChpKT9zPXMuYWRkKHQpOm4uZG9uZSgpfSk7bi5wdXNoKHQpfSksa1Qud2FpdEZvcihuKS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIGEuV3QoZSxzKX0pfSxORS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnk9ZnVuY3Rpb24odCxlKXt2YXIgbz10aGlzLGE9ZS5wYXRoLHM9YS5sZW5ndGgrMSxlPWhULnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsYSksZT1JREJLZXlSYW5nZS5sb3dlckJvdW5kKGUpLHU9bmV3IGFJKGRiKTtyZXR1cm4gUEUodCkuT3Qoe3JhbmdlOmV9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10WzBdLGk9dFsxXSx0PXRbMl0saT1vVChpKTtyPT09by51c2VySWQmJmEuaXNQcmVmaXhPZihpKT9pLmxlbmd0aD09PXMmJih1PXUuYWRkKHQpKTpuLmRvbmUoKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gby5XdCh0LHUpfSl9LE5FLnByb3RvdHlwZS5XdD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj1bXSxpPVtdO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7aS5wdXNoKFJFKGUpLmdldCh0KS5uZXh0KGZ1bmN0aW9uKHQpe2lmKG51bGw9PT10KXRocm93IGhiKCk7bGIodC51c2VySWQ9PT1uLnVzZXJJZCksci5wdXNoKHNFKG4uUix0KSl9KSl9KSxrVC53YWl0Rm9yKGkpLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gcn0pfSxORS5wcm90b3R5cGUucmVtb3ZlTXV0YXRpb25CYXRjaD1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7cmV0dXJuIFNFKGUuTXQsdGhpcy51c2VySWQsbikubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gZS5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKGZ1bmN0aW9uKCl7ci5HdChuLmJhdGNoSWQpfSksa1QuZm9yRWFjaCh0LGZ1bmN0aW9uKHQpe3JldHVybiByLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsdCl9KX0pfSxORS5wcm90b3R5cGUuR3Q9ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuUXRbdF19LE5FLnByb3RvdHlwZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjaz1mdW5jdGlvbihlKXt2YXIgaT10aGlzO3JldHVybiB0aGlzLmNoZWNrRW1wdHkoZSkubmV4dChmdW5jdGlvbih0KXtpZighdClyZXR1cm4ga1QucmVzb2x2ZSgpO3ZhciB0PUlEQktleVJhbmdlLmxvd2VyQm91bmQoaFQucHJlZml4Rm9yVXNlcihpLnVzZXJJZCkpLHI9W107cmV0dXJuIFBFKGUpLk90KHtyYW5nZTp0fSxmdW5jdGlvbih0LGUsbil7dFswXT09PWkudXNlcklkPyh0PW9UKHRbMV0pLHIucHVzaCh0KSk6bi5kb25lKCl9KS5uZXh0KGZ1bmN0aW9uKCl7bGIoMD09PXIubGVuZ3RoKX0pfSl9LE5FLnByb3RvdHlwZS5jb250YWluc0tleT1mdW5jdGlvbih0LGUpe3JldHVybiBBRSh0LHRoaXMudXNlcklkLGUpfSxORS5wcm90b3R5cGUuenQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gT0UodCkuZ2V0KHRoaXMudXNlcklkKS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiB0fHxuZXcgdVQoZS51c2VySWQsLTEsXCJcIil9KX0sTkUpO2Z1bmN0aW9uIE5FKHQsZSxuLHIpe3RoaXMudXNlcklkPXQsdGhpcy5SPWUsdGhpcy5VdD1uLHRoaXMucmVmZXJlbmNlRGVsZWdhdGU9cix0aGlzLlF0PXt9fWZ1bmN0aW9uIEFFKHQsbyxlKXt2YXIgZT1oVC5wcmVmaXhGb3JQYXRoKG8sZS5wYXRoKSxhPWVbMV0sZT1JREJLZXlSYW5nZS5sb3dlckJvdW5kKGUpLHM9ITE7cmV0dXJuIFBFKHQpLk90KHtyYW5nZTplLGt0OiEwfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9dFswXSxpPXRbMV07dFsyXSxyPT09byYmaT09PWEmJihzPSEwKSxuLmRvbmUoKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gc30pfWZ1bmN0aW9uIFJFKHQpe3JldHVybiB6VCh0LGNULnN0b3JlKX1mdW5jdGlvbiBQRSh0KXtyZXR1cm4gelQodCxoVC5zdG9yZSl9ZnVuY3Rpb24gT0UodCl7cmV0dXJuIHpUKHQsdVQuc3RvcmUpfXZhciBERT0oTUUucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5IdCs9Mix0aGlzLkh0fSxNRS5KdD1mdW5jdGlvbigpe3JldHVybiBuZXcgTUUoMCl9LE1FLll0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBNRSgtMSl9LE1FKSx4RT0oTEUucHJvdG90eXBlLmFsbG9jYXRlVGFyZ2V0SWQ9ZnVuY3Rpb24obil7dmFyIHI9dGhpcztyZXR1cm4gdGhpcy5YdChuKS5uZXh0KGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBERSh0LmhpZ2hlc3RUYXJnZXRJZCk7cmV0dXJuIHQuaGlnaGVzdFRhcmdldElkPWUubmV4dCgpLHIuWnQobix0KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIHQuaGlnaGVzdFRhcmdldElkfSl9KX0sTEUucHJvdG90eXBlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuWHQodCkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gbWIuZnJvbVRpbWVzdGFtcChuZXcgeWIodC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnNlY29uZHMsdC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLm5hbm9zZWNvbmRzKSl9KX0sTEUucHJvdG90eXBlLmdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5YdCh0KS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcn0pfSxMRS5wcm90b3R5cGUuc2V0VGFyZ2V0c01ldGFkYXRhPWZ1bmN0aW9uKGUsbixyKXt2YXIgaT10aGlzO3JldHVybiB0aGlzLlh0KGUpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyPW4sciYmKHQubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbj1yLnRvVGltZXN0YW1wKCkpLG4+dC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXImJih0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcj1uKSxpLlp0KGUsdCl9KX0sTEUucHJvdG90eXBlLmFkZFRhcmdldERhdGE9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzO3JldHVybiB0aGlzLnRlKGUsbikubmV4dChmdW5jdGlvbigpe3JldHVybiByLlh0KGUpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIHQudGFyZ2V0Q291bnQrPTEsci5lZShuLHQpLHIuWnQoZSx0KX0pfSl9LExFLnByb3RvdHlwZS51cGRhdGVUYXJnZXREYXRhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGUodCxlKX0sTEUucHJvdG90eXBlLnJlbW92ZVRhcmdldERhdGE9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3JldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsdC50YXJnZXRJZCkubmV4dChmdW5jdGlvbigpe3JldHVybiBGRShlKS5kZWxldGUodC50YXJnZXRJZCl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIG4uWHQoZSl9KS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiBsYigwPHQudGFyZ2V0Q291bnQpLC0tdC50YXJnZXRDb3VudCxuLlp0KGUsdCl9KX0sTEUucHJvdG90eXBlLnJlbW92ZVRhcmdldHM9ZnVuY3Rpb24obixyLGkpe3ZhciBvPXRoaXMsYT0wLHM9W107cmV0dXJuIEZFKG4pLk90KGZ1bmN0aW9uKHQsZSl7ZT11RShlKTtlLnNlcXVlbmNlTnVtYmVyPD1yJiZudWxsPT09aS5nZXQoZS50YXJnZXRJZCkmJihhKysscy5wdXNoKG8ucmVtb3ZlVGFyZ2V0RGF0YShuLGUpKSl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIGtULndhaXRGb3Iocyl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIGF9KX0sTEUucHJvdG90eXBlLmZvckVhY2hUYXJnZXQ9ZnVuY3Rpb24odCxuKXtyZXR1cm4gRkUodCkuT3QoZnVuY3Rpb24odCxlKXtlPXVFKGUpO24oZSl9KX0sTEUucHJvdG90eXBlLlh0PWZ1bmN0aW9uKHQpe3JldHVybiBVRSh0KS5nZXQobVQua2V5KS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiBsYihudWxsIT09dCksdH0pfSxMRS5wcm90b3R5cGUuWnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gVUUodCkucHV0KG1ULmtleSxlKX0sTEUucHJvdG90eXBlLnRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEZFKHQpLnB1dChjRSh0aGlzLlIsZSkpfSxMRS5wcm90b3R5cGUuZWU9ZnVuY3Rpb24odCxlKXt2YXIgbj0hMTtyZXR1cm4gdC50YXJnZXRJZD5lLmhpZ2hlc3RUYXJnZXRJZCYmKGUuaGlnaGVzdFRhcmdldElkPXQudGFyZ2V0SWQsbj0hMCksdC5zZXF1ZW5jZU51bWJlcj5lLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciYmKGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyPXQuc2VxdWVuY2VOdW1iZXIsbj0hMCksbn0sTEUucHJvdG90eXBlLmdldFRhcmdldENvdW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLlh0KHQpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIHQudGFyZ2V0Q291bnR9KX0sTEUucHJvdG90eXBlLmdldFRhcmdldERhdGE9ZnVuY3Rpb24odCxyKXt2YXIgZT1sXyhyKSxlPUlEQktleVJhbmdlLmJvdW5kKFtlLE51bWJlci5ORUdBVElWRV9JTkZJTklUWV0sW2UsTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSksaT1udWxsO3JldHVybiBGRSh0KS5PdCh7cmFuZ2U6ZSxpbmRleDpnVC5xdWVyeVRhcmdldHNJbmRleE5hbWV9LGZ1bmN0aW9uKHQsZSxuKXtlPXVFKGUpO2ZfKHIsZS50YXJnZXQpJiYoaT1lLG4uZG9uZSgpKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gaX0pfSxMRS5wcm90b3R5cGUuYWRkTWF0Y2hpbmdLZXlzPWZ1bmN0aW9uKG4sdCxyKXt2YXIgaT10aGlzLG89W10sYT1qRShuKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPXJUKHQucGF0aCk7by5wdXNoKGEucHV0KG5ldyB5VChyLGUpKSksby5wdXNoKGkucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKG4scix0KSl9KSxrVC53YWl0Rm9yKG8pfSxMRS5wcm90b3R5cGUucmVtb3ZlTWF0Y2hpbmdLZXlzPWZ1bmN0aW9uKG4sdCxyKXt2YXIgaT10aGlzLG89akUobik7cmV0dXJuIGtULmZvckVhY2godCxmdW5jdGlvbih0KXt2YXIgZT1yVCh0LnBhdGgpO3JldHVybiBrVC53YWl0Rm9yKFtvLmRlbGV0ZShbcixlXSksaS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UobixyLHQpXSl9KX0sTEUucHJvdG90eXBlLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkPWZ1bmN0aW9uKHQsZSl7dD1qRSh0KSxlPUlEQktleVJhbmdlLmJvdW5kKFtlXSxbZSsxXSwhMSwhMCk7cmV0dXJuIHQuZGVsZXRlKGUpfSxMRS5wcm90b3R5cGUuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQ9ZnVuY3Rpb24odCxlKXt2YXIgZT1JREJLZXlSYW5nZS5ib3VuZChbZV0sW2UrMV0sITEsITApLHQ9akUodCkscj1kSSgpO3JldHVybiB0Lk90KHtyYW5nZTplLGt0OiEwfSxmdW5jdGlvbih0LGUsbil7dD1vVCh0WzFdKSx0PW5ldyBIYih0KTtyPXIuYWRkKHQpfSkubmV4dChmdW5jdGlvbigpe3JldHVybiByfSl9LExFLnByb3RvdHlwZS5jb250YWluc0tleT1mdW5jdGlvbih0LGUpe3ZhciBlPXJUKGUucGF0aCksZT1JREJLZXlSYW5nZS5ib3VuZChbZV0sW2diKGUpXSwhMSwhMCksaT0wO3JldHVybiBqRSh0KS5PdCh7aW5kZXg6eVQuZG9jdW1lbnRUYXJnZXRzSW5kZXgsa3Q6ITAscmFuZ2U6ZX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPXRbMF07dFsxXSwwIT09ciYmKGkrKyxuLmRvbmUoKSl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIDA8aX0pfSxMRS5wcm90b3R5cGUubHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRkUodCkuZ2V0KGUpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIHQ/dUUodCk6bnVsbH0pfSxMRSk7ZnVuY3Rpb24gTEUodCxlKXt0aGlzLnJlZmVyZW5jZURlbGVnYXRlPXQsdGhpcy5SPWV9ZnVuY3Rpb24gTUUodCl7dGhpcy5IdD10fWZ1bmN0aW9uIEZFKHQpe3JldHVybiB6VCh0LGdULnN0b3JlKX1mdW5jdGlvbiBVRSh0KXtyZXR1cm4gelQodCxtVC5zdG9yZSl9ZnVuY3Rpb24gakUodCl7cmV0dXJuIHpUKHQseVQuc3RvcmUpfWZ1bmN0aW9uIHFFKGUpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtpZihlLmNvZGUhPT1lYi5GQUlMRURfUFJFQ09ORElUSU9OfHxlLm1lc3NhZ2UhPT1TVCl0aHJvdyBlO3JldHVybiBhYihcIkxvY2FsU3RvcmVcIixcIlVuZXhwZWN0ZWRseSBsb3N0IHByaW1hcnkgbGVhc2VcIiksWzJdfSl9KX1mdW5jdGlvbiBWRSh0LGUpe3ZhciBuPXRbMF0scj10WzFdLHQ9ZVswXSxlPWVbMV0sdD1kYihuLHQpO3JldHVybiAwPT09dD9kYihyLGUpOnR9dmFyIEJFPShZRS5wcm90b3R5cGUuaWU9ZnVuY3Rpb24oKXtyZXR1cm4rK3RoaXMuc2V9LFlFLnByb3RvdHlwZS5yZT1mdW5jdGlvbih0KXt2YXIgZT1bdCx0aGlzLmllKCldO3RoaXMuYnVmZmVyLnNpemU8dGhpcy5uZT90aGlzLmJ1ZmZlcj10aGlzLmJ1ZmZlci5hZGQoZSk6VkUoZSx0PXRoaXMuYnVmZmVyLmxhc3QoKSk8MCYmKHRoaXMuYnVmZmVyPXRoaXMuYnVmZmVyLmRlbGV0ZSh0KS5hZGQoZSkpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoWUUucHJvdG90eXBlLFwibWF4VmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVyLmxhc3QoKVswXX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxZRSksS0U9KFFFLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXstMSE9PXRoaXMuZ2FyYmFnZUNvbGxlY3Rvci5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCYmdGhpcy51ZSh0KX0sUUUucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmNlJiYodGhpcy5jZS5jYW5jZWwoKSx0aGlzLmNlPW51bGwpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoUUUucHJvdG90eXBlLFwic3RhcnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMuY2V9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksUUUucHJvdG90eXBlLnVlPWZ1bmN0aW9uKG4pe3ZhciB0PXRoaXMsZT10aGlzLm9lPzNlNTo2ZTQ7YWIoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsXCJHYXJiYWdlIGNvbGxlY3Rpb24gc2NoZWR1bGVkIGluIFwiK2UrXCJtc1wiKSx0aGlzLmNlPXRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImxydV9nYXJiYWdlX2NvbGxlY3Rpb25cIixlLGZ1bmN0aW9uKCl7cmV0dXJuICRpKHQsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6dGhpcy5jZT1udWxsLHRoaXMub2U9ITAsdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsMywsN10pLFs0LG4uY29sbGVjdEdhcmJhZ2UodGhpcy5nYXJiYWdlQ29sbGVjdG9yKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSxbMyw3XTtjYXNlIDM6cmV0dXJuIFVUKGU9dC5zZW50KCkpPyhhYihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIixcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgZ2FyYmFnZSBjb2xsZWN0aW9uOiBcIixlKSxbMyw2XSk6WzMsNF07Y2FzZSA0OnJldHVybls0LHFFKGUpXTtjYXNlIDU6dC5zZW50KCksdC5sYWJlbD02O2Nhc2UgNjpyZXR1cm5bMyw3XTtjYXNlIDc6cmV0dXJuWzQsdGhpcy51ZShuKV07Y2FzZSA4OnJldHVybiB0LnNlbnQoKSxbMl19fSl9KX0pfSxRRSksV0U9KHpFLnByb3RvdHlwZS5jYWxjdWxhdGVUYXJnZXRDb3VudD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmFlLmhlKHQpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguZmxvb3IoZS8xMDAqdCl9KX0sekUucHJvdG90eXBlLm50aFNlcXVlbmNlTnVtYmVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZigwPT09ZSlyZXR1cm4ga1QucmVzb2x2ZSgkbS5vKTt2YXIgcj1uZXcgQkUoZSk7cmV0dXJuIHRoaXMuYWUuZm9yRWFjaFRhcmdldCh0LGZ1bmN0aW9uKHQpe3JldHVybiByLnJlKHQuc2VxdWVuY2VOdW1iZXIpfSkubmV4dChmdW5jdGlvbigpe3JldHVybiBuLmFlLmxlKHQsZnVuY3Rpb24odCl7cmV0dXJuIHIucmUodCl9KX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gci5tYXhWYWx1ZX0pfSx6RS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0cz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMuYWUucmVtb3ZlVGFyZ2V0cyh0LGUsbil9LHpFLnByb3RvdHlwZS5yZW1vdmVPcnBoYW5lZERvY3VtZW50cz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmFlLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsZSl9LHpFLnByb3RvdHlwZS5jb2xsZWN0PWZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpcztyZXR1cm4tMT09PXRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQ/KGFiKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IGRpc2FibGVkXCIpLGtULnJlc29sdmUoSUUpKTp0aGlzLmdldENhY2hlU2l6ZShlKS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiB0PHIucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQ/KGFiKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IENhY2hlIHNpemUgXCIrdCtcIiBpcyBsb3dlciB0aGFuIHRocmVzaG9sZCBcIityLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkKSxJRSk6ci5mZShlLG4pfSl9LHpFLnByb3RvdHlwZS5nZXRDYWNoZVNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYWUuZ2V0Q2FjaGVTaXplKHQpfSx6RS5wcm90b3R5cGUuZmU9ZnVuY3Rpb24oZSxuKXt2YXIgcixpLG8sYSxzLHUsYyxoPXRoaXMsbD1EYXRlLm5vdygpO3JldHVybiB0aGlzLmNhbGN1bGF0ZVRhcmdldENvdW50KGUsdGhpcy5wYXJhbXMucGVyY2VudGlsZVRvQ29sbGVjdCkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gaT10PmgucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3Q/KGFiKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLFwiQ2FwcGluZyBzZXF1ZW5jZSBudW1iZXJzIHRvIGNvbGxlY3QgZG93biB0byB0aGUgbWF4aW11bSBvZiBcIitoLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0K1wiIGZyb20gXCIrdCksaC5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCk6dCxhPURhdGUubm93KCksaC5udGhTZXF1ZW5jZU51bWJlcihlLGkpfSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gcj10LHM9RGF0ZS5ub3coKSxoLnJlbW92ZVRhcmdldHMoZSxyLG4pfSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gbz10LHU9RGF0ZS5ub3coKSxoLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKGUscil9KS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiBjPURhdGUubm93KCksb2IoKTw9dWEuREVCVUcmJmFiKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLFwiTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcblxcdENvdW50ZWQgdGFyZ2V0cyBpbiBcIisoYS1sKStcIm1zXFxuXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkIFwiK2krXCIgaW4gXCIrKHMtYSkrXCJtc1xcblxcdFJlbW92ZWQgXCIrbytcIiB0YXJnZXRzIGluIFwiKyh1LXMpK1wibXNcXG5cXHRSZW1vdmVkIFwiK3QrXCIgZG9jdW1lbnRzIGluIFwiKyhjLXUpK1wibXNcXG5Ub3RhbCBEdXJhdGlvbjogXCIrKGMtbCkrXCJtc1wiKSxrVC5yZXNvbHZlKHtkaWRSdW46ITAsc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOmksdGFyZ2V0c1JlbW92ZWQ6byxkb2N1bWVudHNSZW1vdmVkOnR9KX0pfSx6RSksSEU9KEdFLnByb3RvdHlwZS5oZT1mdW5jdGlvbih0KXt2YXIgbj10aGlzLmRlKHQpO3JldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQodCkubmV4dChmdW5jdGlvbihlKXtyZXR1cm4gbi5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiBlK3R9KX0pfSxHRS5wcm90b3R5cGUuZGU9ZnVuY3Rpb24odCl7dmFyIGU9MDtyZXR1cm4gdGhpcy5sZSh0LGZ1bmN0aW9uKHQpe2UrK30pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gZX0pfSxHRS5wcm90b3R5cGUuZm9yRWFjaFRhcmdldD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldCh0LGUpfSxHRS5wcm90b3R5cGUubGU9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpcy53ZSh0LGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4oZSl9KX0sR0UucHJvdG90eXBlLmFkZFJlZmVyZW5jZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIFhFKHQsbil9LEdFLnByb3RvdHlwZS5yZW1vdmVSZWZlcmVuY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBYRSh0LG4pfSxHRS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0cz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5yZW1vdmVUYXJnZXRzKHQsZSxuKX0sR0UucHJvdG90eXBlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkPVhFLEdFLnByb3RvdHlwZS5fZT1mdW5jdGlvbih0LGUpe3JldHVybiByPWUsaT0hMSxPRShuPXQpLiR0KGZ1bmN0aW9uKHQpe3JldHVybiBBRShuLHQscikubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gdCYmKGk9ITApLGtULnJlc29sdmUoIXQpfSl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIGl9KTt2YXIgbixyLGl9LEdFLnByb3RvdHlwZS5yZW1vdmVPcnBoYW5lZERvY3VtZW50cz1mdW5jdGlvbihuLHIpe3ZhciBpPXRoaXMsbz10aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKSxhPVtdLHM9MDtyZXR1cm4gdGhpcy53ZShuLGZ1bmN0aW9uKGUsdCl7dDw9ciYmKHQ9aS5fZShuLGUpLm5leHQoZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIHMrKyxvLmdldEVudHJ5KG4sZSkubmV4dChmdW5jdGlvbigpe3JldHVybiBvLnJlbW92ZUVudHJ5KGUpLGpFKG4pLmRlbGV0ZShbMCxyVChlLnBhdGgpXSl9KX0pLGEucHVzaCh0KSl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIGtULndhaXRGb3IoYSl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIG8uYXBwbHkobil9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIHN9KX0sR0UucHJvdG90eXBlLnJlbW92ZVRhcmdldD1mdW5jdGlvbih0LGUpe2U9ZS53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO3JldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YSh0LGUpfSxHRS5wcm90b3R5cGUudXBkYXRlTGltYm9Eb2N1bWVudD1YRSxHRS5wcm90b3R5cGUud2U9ZnVuY3Rpb24odCxyKXt2YXIgaSx0PWpFKHQpLG89JG0ubztyZXR1cm4gdC5PdCh7aW5kZXg6eVQuZG9jdW1lbnRUYXJnZXRzSW5kZXh9LGZ1bmN0aW9uKHQsZSl7dmFyIG49dFswXSx0PSh0WzFdLGUucGF0aCksZT1lLnNlcXVlbmNlTnVtYmVyOzA9PT1uPyhvIT09JG0ubyYmcihuZXcgSGIob1QoaSkpLG8pLG89ZSxpPXQpOm89JG0ub30pLm5leHQoZnVuY3Rpb24oKXtvIT09JG0ubyYmcihuZXcgSGIob1QoaSkpLG8pfSl9LEdFLnByb3RvdHlwZS5nZXRDYWNoZVNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodCl9LEdFKTtmdW5jdGlvbiBHRSh0LGUpe3RoaXMuZGI9dCx0aGlzLmdhcmJhZ2VDb2xsZWN0b3I9bmV3IFdFKHRoaXMsZSl9ZnVuY3Rpb24gekUodCxlKXt0aGlzLmFlPXQsdGhpcy5wYXJhbXM9ZX1mdW5jdGlvbiBRRSh0LGUpe3RoaXMuZ2FyYmFnZUNvbGxlY3Rvcj10LHRoaXMuYXN5bmNRdWV1ZT1lLHRoaXMub2U9ITEsdGhpcy5jZT1udWxsfWZ1bmN0aW9uIFlFKHQpe3RoaXMubmU9dCx0aGlzLmJ1ZmZlcj1uZXcgYUkoVkUpLHRoaXMuc2U9MH1mdW5jdGlvbiBYRSh0LGUpe3JldHVybiBqRSh0KS5wdXQoKHQ9dC5jdXJyZW50U2VxdWVuY2VOdW1iZXIsbmV3IHlUKDAsclQoZS5wYXRoKSx0KSkpfXZhciBKRSwkRT0oaVMucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm1hcEtleUZuKHQpLGU9dGhpcy5pbm5lcltlXTtpZih2b2lkIDAhPT1lKWZvcih2YXIgbj0wLHI9ZTtuPHIubGVuZ3RoO24rKyl7dmFyIGk9cltuXSxvPWlbMF0saT1pWzFdO2lmKHRoaXMuZXF1YWxzRm4obyx0KSlyZXR1cm4gaX19LGlTLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZ2V0KHQpfSxpUy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5tYXBLZXlGbih0KSxyPXRoaXMuaW5uZXJbbl07aWYodm9pZCAwIT09cil7Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspaWYodGhpcy5lcXVhbHNGbihyW2ldWzBdLHQpKXJldHVybiB2b2lkKHJbaV09W3QsZV0pO3IucHVzaChbdCxlXSl9ZWxzZSB0aGlzLmlubmVyW25dPVtbdCxlXV19LGlTLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5tYXBLZXlGbih0KSxuPXRoaXMuaW5uZXJbZV07aWYodm9pZCAwPT09bilyZXR1cm4hMTtmb3IodmFyIHI9MDtyPG4ubGVuZ3RoO3IrKylpZih0aGlzLmVxdWFsc0ZuKG5bcl1bMF0sdCkpcmV0dXJuIDE9PT1uLmxlbmd0aD9kZWxldGUgdGhpcy5pbm5lcltlXTpuLnNwbGljZShyLDEpLCEwO3JldHVybiExfSxpUy5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihhKXtJYih0aGlzLmlubmVyLGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAscj1lO248ci5sZW5ndGg7bisrKXt2YXIgaT1yW25dLG89aVswXSxpPWlbMV07YShvLGkpfX0pfSxpUy5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiBUYih0aGlzLmlubmVyKX0saVMpLEc9KHJTLnByb3RvdHlwZS5nZXRSZWFkVGltZT1mdW5jdGlvbih0KXt0PXRoaXMuY2hhbmdlcy5nZXQodCk7cmV0dXJuIHQ/dC5yZWFkVGltZTptYi5taW4oKX0sclMucHJvdG90eXBlLmFkZEVudHJ5PWZ1bmN0aW9uKHQsZSl7dGhpcy5hc3NlcnROb3RBcHBsaWVkKCksdGhpcy5jaGFuZ2VzLnNldCh0LmtleSx7ZG9jdW1lbnQ6dCxyZWFkVGltZTplfSl9LHJTLnByb3RvdHlwZS5yZW1vdmVFbnRyeT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPW51bGwpLHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLHRoaXMuY2hhbmdlcy5zZXQodCx7ZG9jdW1lbnQ6c18ubmV3SW52YWxpZERvY3VtZW50KHQpLHJlYWRUaW1lOmV9KX0sclMucHJvdG90eXBlLmdldEVudHJ5PWZ1bmN0aW9uKHQsZSl7dGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7dmFyIG49dGhpcy5jaGFuZ2VzLmdldChlKTtyZXR1cm4gdm9pZCAwIT09bj9rVC5yZXNvbHZlKG4uZG9jdW1lbnQpOnRoaXMuZ2V0RnJvbUNhY2hlKHQsZSl9LHJTLnByb3RvdHlwZS5nZXRFbnRyaWVzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZ2V0QWxsRnJvbUNhY2hlKHQsZSl9LHJTLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksdGhpcy5jaGFuZ2VzQXBwbGllZD0hMCx0aGlzLmFwcGx5Q2hhbmdlcyh0KX0sclMucHJvdG90eXBlLmFzc2VydE5vdEFwcGxpZWQ9ZnVuY3Rpb24oKXt9LHJTKSxaRT0oblMucHJvdG90eXBlLmFkZEVudHJ5PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gYVModCkucHV0KHNTKGUpLG4pfSxuUy5wcm90b3R5cGUucmVtb3ZlRW50cnk9ZnVuY3Rpb24odCxlKXt0PWFTKHQpLGU9c1MoZSk7cmV0dXJuIHQuZGVsZXRlKGUpfSxuUy5wcm90b3R5cGUudXBkYXRlTWV0YWRhdGE9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzO3JldHVybiB0aGlzLmdldE1ldGFkYXRhKGUpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuYnl0ZVNpemUrPW4sci5tZShlLHQpfSl9LG5TLnByb3RvdHlwZS5nZXRFbnRyeT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuIGFTKHQpLmdldChzUyhlKSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gbi55ZShlLHQpfSl9LG5TLnByb3RvdHlwZS5nZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuIGFTKHQpLmdldChzUyhlKSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm57ZG9jdW1lbnQ6bi55ZShlLHQpLHNpemU6Q0UodCl9fSl9LG5TLnByb3RvdHlwZS5nZXRFbnRyaWVzPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPXVJO3JldHVybiB0aGlzLnBlKHQsZSxmdW5jdGlvbih0LGUpe2U9bi55ZSh0LGUpO3I9ci5pbnNlcnQodCxlKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gcn0pfSxuUy5wcm90b3R5cGUuRWU9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLGk9dUksbz1uZXcgWncoSGIuY29tcGFyYXRvcik7cmV0dXJuIHRoaXMucGUodCxlLGZ1bmN0aW9uKHQsZSl7dmFyIG49ci55ZSh0LGUpO2k9aS5pbnNlcnQodCxuKSxvPW8uaW5zZXJ0KHQsQ0UoZSkpfSkubmV4dChmdW5jdGlvbigpe3JldHVybntkb2N1bWVudHM6aSxUZTpvfX0pfSxuUy5wcm90b3R5cGUucGU9ZnVuY3Rpb24odCxlLGkpe2lmKGUuaXNFbXB0eSgpKXJldHVybiBrVC5yZXNvbHZlKCk7dmFyIG49SURCS2V5UmFuZ2UuYm91bmQoZS5maXJzdCgpLnBhdGgudG9BcnJheSgpLGUubGFzdCgpLnBhdGgudG9BcnJheSgpKSxvPWUuZ2V0SXRlcmF0b3IoKSxhPW8uZ2V0TmV4dCgpO3JldHVybiBhUyh0KS5PdCh7cmFuZ2U6bn0sZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj1IYi5mcm9tU2VnbWVudHModCk7YSYmSGIuY29tcGFyYXRvcihhLHIpPDA7KWkoYSxudWxsKSxhPW8uZ2V0TmV4dCgpO2EmJmEuaXNFcXVhbChyKSYmKGkoYSxlKSxhPW8uaGFzTmV4dCgpP28uZ2V0TmV4dCgpOm51bGwpLGE/bi5DdChhLnBhdGgudG9BcnJheSgpKTpuLmRvbmUoKX0pLm5leHQoZnVuY3Rpb24oKXtmb3IoO2E7KWkoYSxudWxsKSxhPW8uaGFzTmV4dCgpP28uZ2V0TmV4dCgpOm51bGx9KX0sblMucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnk9ZnVuY3Rpb24odCxyLGUpe3ZhciBuLGk9dGhpcyxvPXVJLGE9ci5wYXRoLmxlbmd0aCsxLHM9e307cmV0dXJuIGUuaXNFcXVhbChtYi5taW4oKSk/KG49ci5wYXRoLnRvQXJyYXkoKSxzLnJhbmdlPUlEQktleVJhbmdlLmxvd2VyQm91bmQobikpOihuPXIucGF0aC50b0FycmF5KCksZT1yRShlKSxzLnJhbmdlPUlEQktleVJhbmdlLmxvd2VyQm91bmQoW24sZV0sITApLHMuaW5kZXg9ZFQuY29sbGVjdGlvblJlYWRUaW1lSW5kZXgpLGFTKHQpLk90KHMsZnVuY3Rpb24odCxlLG4pe3QubGVuZ3RoPT09YSYmKGU9ZUUoaS5SLGUpLHIucGF0aC5pc1ByZWZpeE9mKGUua2V5LnBhdGgpP2l3KHIsZSkmJihvPW8uaW5zZXJ0KGUua2V5LGUpKTpuLmRvbmUoKSl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIG99KX0sblMucHJvdG90eXBlLm5ld0NoYW5nZUJ1ZmZlcj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHRTKHRoaXMsISF0JiZ0LnRyYWNrUmVtb3ZhbHMpfSxuUy5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0KS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiB0LmJ5dGVTaXplfSl9LG5TLnByb3RvdHlwZS5nZXRNZXRhZGF0YT1mdW5jdGlvbih0KXtyZXR1cm4gb1ModCkuZ2V0KHZULmtleSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gbGIoISF0KSx0fSl9LG5TLnByb3RvdHlwZS5tZT1mdW5jdGlvbih0LGUpe3JldHVybiBvUyh0KS5wdXQodlQua2V5LGUpfSxuUy5wcm90b3R5cGUueWU9ZnVuY3Rpb24odCxlKXtpZihlKXtlPWVFKHRoaXMuUixlKTtpZighZS5pc05vRG9jdW1lbnQoKXx8IWUudmVyc2lvbi5pc0VxdWFsKG1iLm1pbigpKSlyZXR1cm4gZX1yZXR1cm4gc18ubmV3SW52YWxpZERvY3VtZW50KHQpfSxuUyksdFM9KFhpKGVTLEpFPUcpLGVTLnByb3RvdHlwZS5hcHBseUNoYW5nZXM9ZnVuY3Rpb24oaSl7dmFyIG89dGhpcyxhPVtdLHM9MCx1PW5ldyBhSShmdW5jdGlvbih0LGUpe3JldHVybiBkYih0LmNhbm9uaWNhbFN0cmluZygpLGUuY2Fub25pY2FsU3RyaW5nKCkpfSk7cmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG4scj1vLkFlLmdldCh0KTtlLmRvY3VtZW50LmlzVmFsaWREb2N1bWVudCgpPyhuPW5FKG8uSWUuUixlLmRvY3VtZW50LG8uZ2V0UmVhZFRpbWUodCkpLHU9dS5hZGQodC5wYXRoLnBvcExhc3QoKSksZT1DRShuKSxzKz1lLXIsYS5wdXNoKG8uSWUuYWRkRW50cnkoaSx0LG4pKSk6KHMtPXIsby50cmFja1JlbW92YWxzPyhyPW5FKG8uSWUuUixzXy5uZXdOb0RvY3VtZW50KHQsbWIubWluKCkpLG8uZ2V0UmVhZFRpbWUodCkpLGEucHVzaChvLkllLmFkZEVudHJ5KGksdCxyKSkpOmEucHVzaChvLkllLnJlbW92ZUVudHJ5KGksdCkpKX0pLHUuZm9yRWFjaChmdW5jdGlvbih0KXthLnB1c2goby5JZS5VdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChpLHQpKX0pLGEucHVzaCh0aGlzLkllLnVwZGF0ZU1ldGFkYXRhKGkscykpLGtULndhaXRGb3IoYSl9LGVTLnByb3RvdHlwZS5nZXRGcm9tQ2FjaGU9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLkllLmdlKHQsZSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gbi5BZS5zZXQoZSx0LnNpemUpLHQuZG9jdW1lbnR9KX0sZVMucHJvdG90eXBlLmdldEFsbEZyb21DYWNoZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuIHRoaXMuSWUuRWUodCxlKS5uZXh0KGZ1bmN0aW9uKHQpe3ZhciBlPXQuZG9jdW1lbnRzO3JldHVybiB0LlRlLmZvckVhY2goZnVuY3Rpb24odCxlKXtuLkFlLnNldCh0LGUpfSksZX0pfSxlUyk7ZnVuY3Rpb24gZVModCxlKXt2YXIgbj10aGlzO3JldHVybihuPUpFLmNhbGwodGhpcyl8fHRoaXMpLkllPXQsbi50cmFja1JlbW92YWxzPWUsbi5BZT1uZXcgJEUoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9TdHJpbmcoKX0sZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5pc0VxdWFsKGUpfSksbn1mdW5jdGlvbiBuUyh0LGUpe3RoaXMuUj10LHRoaXMuVXQ9ZX1mdW5jdGlvbiByUygpe3RoaXMuY2hhbmdlcz1uZXcgJEUoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9TdHJpbmcoKX0sZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5pc0VxdWFsKGUpfSksdGhpcy5jaGFuZ2VzQXBwbGllZD0hMX1mdW5jdGlvbiBpUyh0LGUpe3RoaXMubWFwS2V5Rm49dCx0aGlzLmVxdWFsc0ZuPWUsdGhpcy5pbm5lcj17fX1mdW5jdGlvbiBvUyh0KXtyZXR1cm4gelQodCx2VC5zdG9yZSl9ZnVuY3Rpb24gYVModCl7cmV0dXJuIHpUKHQsZFQuc3RvcmUpfWZ1bmN0aW9uIHNTKHQpe3JldHVybiB0LnBhdGgudG9BcnJheSgpfXZhciB1Uz0oY1MucHJvdG90eXBlLlJ0PWZ1bmN0aW9uKGUsbix0LHIpe3ZhciBpPXRoaXM7bGIodDxyJiYwPD10JiZyPD0xMSk7dmFyIG89bmV3IE5UKFwiY3JlYXRlT3JVcGdyYWRlXCIsbik7dDwxJiYxPD1yJiYoZS5jcmVhdGVPYmplY3RTdG9yZShhVC5zdG9yZSksKGE9ZSkuY3JlYXRlT2JqZWN0U3RvcmUodVQuc3RvcmUse2tleVBhdGg6dVQua2V5UGF0aH0pLGEuY3JlYXRlT2JqZWN0U3RvcmUoY1Quc3RvcmUse2tleVBhdGg6Y1Qua2V5UGF0aCxhdXRvSW5jcmVtZW50OiEwfSkuY3JlYXRlSW5kZXgoY1QudXNlck11dGF0aW9uc0luZGV4LGNULnVzZXJNdXRhdGlvbnNLZXlQYXRoLHt1bmlxdWU6ITB9KSxhLmNyZWF0ZU9iamVjdFN0b3JlKGhULnN0b3JlKSxoUyhlKSxlLmNyZWF0ZU9iamVjdFN0b3JlKGRULnN0b3JlKSk7dmFyIGEscz1rVC5yZXNvbHZlKCk7cmV0dXJuIHQ8MyYmMzw9ciYmKDAhPT10JiYoKGE9ZSkuZGVsZXRlT2JqZWN0U3RvcmUoeVQuc3RvcmUpLGEuZGVsZXRlT2JqZWN0U3RvcmUoZ1Quc3RvcmUpLGEuZGVsZXRlT2JqZWN0U3RvcmUobVQuc3RvcmUpLGhTKGUpKSxzPXMubmV4dChmdW5jdGlvbigpe3JldHVybiB0PW8uc3RvcmUobVQuc3RvcmUpLGU9bmV3IG1UKDAsMCxtYi5taW4oKS50b1RpbWVzdGFtcCgpLDApLHQucHV0KG1ULmtleSxlKTt2YXIgdCxlfSkpLHQ8NCYmNDw9ciYmKHM9KHM9MCE9PXQ/cy5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIG49ZSwocj1vKS5zdG9yZShjVC5zdG9yZSkuTnQoKS5uZXh0KGZ1bmN0aW9uKHQpe24uZGVsZXRlT2JqZWN0U3RvcmUoY1Quc3RvcmUpLG4uY3JlYXRlT2JqZWN0U3RvcmUoY1Quc3RvcmUse2tleVBhdGg6Y1Qua2V5UGF0aCxhdXRvSW5jcmVtZW50OiEwfSkuY3JlYXRlSW5kZXgoY1QudXNlck11dGF0aW9uc0luZGV4LGNULnVzZXJNdXRhdGlvbnNLZXlQYXRoLHt1bmlxdWU6ITB9KTt2YXIgZT1yLnN0b3JlKGNULnN0b3JlKSx0PXQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLnB1dCh0KX0pO3JldHVybiBrVC53YWl0Rm9yKHQpfSk7dmFyIG4scn0pOnMpLm5leHQoZnVuY3Rpb24oKXtlLmNyZWF0ZU9iamVjdFN0b3JlKF9ULnN0b3JlLHtrZXlQYXRoOl9ULmtleVBhdGh9KX0pKSx0PDUmJjU8PXImJihzPXMubmV4dChmdW5jdGlvbigpe3JldHVybiBpLlJlKG8pfSkpLHQ8NiYmNjw9ciYmKHM9cy5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIGUuY3JlYXRlT2JqZWN0U3RvcmUodlQuc3RvcmUpLGkuYmUobyl9KSksdDw3JiY3PD1yJiYocz1zLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gaS52ZShvKX0pKSx0PDgmJjg8PXImJihzPXMubmV4dChmdW5jdGlvbigpe3JldHVybiBpLlBlKGUsbyl9KSksdDw5JiY5PD1yJiYocz1zLm5leHQoZnVuY3Rpb24oKXt2YXIgdDsodD1lKS5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpJiZ0LmRlbGV0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpLCh0PW4ub2JqZWN0U3RvcmUoZFQuc3RvcmUpKS5jcmVhdGVJbmRleChkVC5yZWFkVGltZUluZGV4LGRULnJlYWRUaW1lSW5kZXhQYXRoLHt1bmlxdWU6ITF9KSx0LmNyZWF0ZUluZGV4KGRULmNvbGxlY3Rpb25SZWFkVGltZUluZGV4LGRULmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCx7dW5pcXVlOiExfSl9KSksdDwxMCYmMTA8PXImJihzPXMubmV4dChmdW5jdGlvbigpe3JldHVybiBpLlZlKG8pfSkpLHM9dDwxMSYmMTE8PXI/cy5uZXh0KGZ1bmN0aW9uKCl7ZS5jcmVhdGVPYmplY3RTdG9yZSh3VC5zdG9yZSx7a2V5UGF0aDp3VC5rZXlQYXRofSksZS5jcmVhdGVPYmplY3RTdG9yZShJVC5zdG9yZSx7a2V5UGF0aDpJVC5rZXlQYXRofSl9KTpzfSxjUy5wcm90b3R5cGUuYmU9ZnVuY3Rpb24oZSl7dmFyIG49MDtyZXR1cm4gZS5zdG9yZShkVC5zdG9yZSkuT3QoZnVuY3Rpb24odCxlKXtuKz1DRShlKX0pLm5leHQoZnVuY3Rpb24oKXt2YXIgdD1uZXcgdlQobik7cmV0dXJuIGUuc3RvcmUodlQuc3RvcmUpLnB1dCh2VC5rZXksdCl9KX0sY1MucHJvdG90eXBlLlJlPWZ1bmN0aW9uKG4pe3ZhciByPXRoaXMsdD1uLnN0b3JlKHVULnN0b3JlKSxpPW4uc3RvcmUoY1Quc3RvcmUpO3JldHVybiB0Lk50KCkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4ga1QuZm9yRWFjaCh0LGZ1bmN0aW9uKGUpe3ZhciB0PUlEQktleVJhbmdlLmJvdW5kKFtlLnVzZXJJZCwtMV0sW2UudXNlcklkLGUubGFzdEFja25vd2xlZGdlZEJhdGNoSWRdKTtyZXR1cm4gaS5OdChjVC51c2VyTXV0YXRpb25zSW5kZXgsdCkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4ga1QuZm9yRWFjaCh0LGZ1bmN0aW9uKHQpe2xiKHQudXNlcklkPT09ZS51c2VySWQpO3Q9c0Uoci5SLHQpO3JldHVybiBTRShuLGUudXNlcklkLHQpLm5leHQoZnVuY3Rpb24oKXt9KX0pfSl9KX0pfSxjUy5wcm90b3R5cGUudmU9ZnVuY3Rpb24odCl7dmFyIG89dC5zdG9yZSh5VC5zdG9yZSksZT10LnN0b3JlKGRULnN0b3JlKTtyZXR1cm4gdC5zdG9yZShtVC5zdG9yZSkuZ2V0KG1ULmtleSkubmV4dChmdW5jdGlvbihyKXt2YXIgaT1bXTtyZXR1cm4gZS5PdChmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBDYih0KSx0PVswLHJUKG4pXTtpLnB1c2goby5nZXQodCkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gdD9rVC5yZXNvbHZlKCk6by5wdXQobmV3IHlUKDAsclQobiksci5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpKX0pKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4ga1Qud2FpdEZvcihpKX0pfSl9LGNTLnByb3RvdHlwZS5QZT1mdW5jdGlvbih0LGUpe3QuY3JlYXRlT2JqZWN0U3RvcmUoYlQuc3RvcmUse2tleVBhdGg6YlQua2V5UGF0aH0pO2Z1bmN0aW9uIHIodCl7aWYoaS5hZGQodCkpe3ZhciBlPXQubGFzdFNlZ21lbnQoKSx0PXQucG9wTGFzdCgpO3JldHVybiBuLnB1dCh7Y29sbGVjdGlvbklkOmUscGFyZW50OnJUKHQpfSl9fXZhciBuPWUuc3RvcmUoYlQuc3RvcmUpLGk9bmV3IGdFO3JldHVybiBlLnN0b3JlKGRULnN0b3JlKS5PdCh7a3Q6ITB9LGZ1bmN0aW9uKHQsZSl7dD1uZXcgQ2IodCk7cmV0dXJuIHIodC5wb3BMYXN0KCkpfSkubmV4dChmdW5jdGlvbigpe3JldHVybiBlLnN0b3JlKGhULnN0b3JlKS5PdCh7a3Q6ITB9LGZ1bmN0aW9uKHQsZSl7dFswXTt2YXIgbj10WzFdLG49KHRbMl0sb1QobikpO3JldHVybiByKG4ucG9wTGFzdCgpKX0pfSl9LGNTLnByb3RvdHlwZS5WZT1mdW5jdGlvbih0KXt2YXIgbj10aGlzLHI9dC5zdG9yZShnVC5zdG9yZSk7cmV0dXJuIHIuT3QoZnVuY3Rpb24odCxlKXtlPXVFKGUpLGU9Y0Uobi5SLGUpO3JldHVybiByLnB1dChlKX0pfSxjUyk7ZnVuY3Rpb24gY1ModCl7dGhpcy5SPXR9ZnVuY3Rpb24gaFModCl7dC5jcmVhdGVPYmplY3RTdG9yZSh5VC5zdG9yZSx7a2V5UGF0aDp5VC5rZXlQYXRofSkuY3JlYXRlSW5kZXgoeVQuZG9jdW1lbnRUYXJnZXRzSW5kZXgseVQuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCx7dW5pcXVlOiEwfSksdC5jcmVhdGVPYmplY3RTdG9yZShnVC5zdG9yZSx7a2V5UGF0aDpnVC5rZXlQYXRofSkuY3JlYXRlSW5kZXgoZ1QucXVlcnlUYXJnZXRzSW5kZXhOYW1lLGdULnF1ZXJ5VGFyZ2V0c0tleVBhdGgse3VuaXF1ZTohMH0pLHQuY3JlYXRlT2JqZWN0U3RvcmUobVQuc3RvcmUpfXZhciBsUz1cIkZhaWxlZCB0byBvYnRhaW4gZXhjbHVzaXZlIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2UgbGF5ZXIuIFRvIGFsbG93IHNoYXJlZCBhY2Nlc3MsIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24gaGFzIHRvIGJlIGVuYWJsZWQgaW4gYWxsIHRhYnMuIElmIHlvdSBhcmUgdXNpbmcgYGV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiOnRydWVgLCBtYWtlIHN1cmUgdGhhdCBvbmx5IG9uZSB0YWIgaGFzIHBlcnNpc3RlbmNlIGVuYWJsZWQgYXQgYW55IGdpdmVuIHRpbWUuXCIsZlM9KHBTLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuamUoKS50aGVuKGZ1bmN0aW9uKCl7aWYoIWUuaXNQcmltYXJ5JiYhZS5hbGxvd1RhYlN5bmNocm9uaXphdGlvbil0aHJvdyBuZXcgbmIoZWIuRkFJTEVEX1BSRUNPTkRJVElPTixsUyk7cmV0dXJuIGUuV2UoKSxlLkdlKCksZS56ZSgpLGUucnVuVHJhbnNhY3Rpb24oXCJnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXJcIixcInJlYWRvbmx5XCIsZnVuY3Rpb24odCl7cmV0dXJuIGUucWUuZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpfSl9KS50aGVuKGZ1bmN0aW9uKHQpe2UuTmU9bmV3ICRtKHQsZS5EZSl9KS50aGVuKGZ1bmN0aW9uKCl7ZS54ZT0hMH0pLmNhdGNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLkJlJiZlLkJlLmNsb3NlKCksUHJvbWlzZS5yZWplY3QodCl9KX0scFMucHJvdG90eXBlLkhlPWZ1bmN0aW9uKG4pe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuTWU9ZnVuY3Rpb24oZSl7cmV0dXJuICRpKHQsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0YXJ0ZWQ/WzIsbihlKV06WzJdfSl9KX0sbih0aGlzLmlzUHJpbWFyeSl9LHBTLnByb3RvdHlwZS5zZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcj1mdW5jdGlvbihuKXt2YXIgdD10aGlzO3RoaXMuQmUudnQoZnVuY3Rpb24oZSl7cmV0dXJuICRpKHQsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIG51bGw9PT1lLm5ld1ZlcnNpb24/WzQsbigpXTpbMywyXTtjYXNlIDE6dC5zZW50KCksdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm5bMl19fSl9KX0pfSxwUy5wcm90b3R5cGUuc2V0TmV0d29ya0VuYWJsZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm5ldHdvcmtFbmFibGVkIT09dCYmKHRoaXMubmV0d29ya0VuYWJsZWQ9dCx0aGlzLlNlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24oKXtyZXR1cm4gJGkoZSx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5zdGFydGVkP1s0LHRoaXMuamUoKV06WzMsMl07Y2FzZSAxOnQuc2VudCgpLHQubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzJdfX0pfSl9KSl9LHBTLnByb3RvdHlwZS5qZT1mdW5jdGlvbigpe3ZhciBuPXRoaXM7cmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIixcInJlYWR3cml0ZVwiLGZ1bmN0aW9uKGUpe3JldHVybiB2UyhlKS5wdXQobmV3IF9UKG4uY2xpZW50SWQsRGF0ZS5ub3coKSxuLm5ldHdvcmtFbmFibGVkLG4uaW5Gb3JlZ3JvdW5kKSkubmV4dChmdW5jdGlvbigpe2lmKG4uaXNQcmltYXJ5KXJldHVybiBuLkplKGUpLm5leHQoZnVuY3Rpb24odCl7dHx8KG4uaXNQcmltYXJ5PSExLG4uU2UuZW5xdWV1ZVJldHJ5YWJsZShmdW5jdGlvbigpe3JldHVybiBuLk1lKCExKX0pKX0pfSkubmV4dChmdW5jdGlvbigpe3JldHVybiBuLlllKGUpfSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc1ByaW1hcnkmJiF0P24uWGUoZSkubmV4dChmdW5jdGlvbigpe3JldHVybiExfSk6ISF0JiZuLlplKGUpLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4hMH0pfSl9KS5jYXRjaChmdW5jdGlvbih0KXtpZihVVCh0KSlyZXR1cm4gYWIoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLFwiRmFpbGVkIHRvIGV4dGVuZCBvd25lciBsZWFzZTogXCIsdCksbi5pc1ByaW1hcnk7aWYoIW4uYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pdGhyb3cgdDtyZXR1cm4gYWIoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLFwiUmVsZWFzaW5nIG93bmVyIGxlYXNlIGFmdGVyIGVycm9yIGR1cmluZyBsZWFzZSByZWZyZXNoXCIsdCksITF9KS50aGVuKGZ1bmN0aW9uKHQpe24uaXNQcmltYXJ5IT09dCYmbi5TZS5lbnF1ZXVlUmV0cnlhYmxlKGZ1bmN0aW9uKCl7cmV0dXJuIG4uTWUodCl9KSxuLmlzUHJpbWFyeT10fSl9LHBTLnByb3RvdHlwZS5KZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiBkUyh0KS5nZXQoYVQua2V5KS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiBrVC5yZXNvbHZlKGUudG4odCkpfSl9LHBTLnByb3RvdHlwZS5lbj1mdW5jdGlvbih0KXtyZXR1cm4gdlModCkuZGVsZXRlKHRoaXMuY2xpZW50SWQpfSxwUy5wcm90b3R5cGUubm49ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyLGksbz10aGlzO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIXRoaXMuaXNQcmltYXJ5fHx0aGlzLnNuKHRoaXMuJGUsMThlNSk/WzMsMl06KHRoaXMuJGU9RGF0ZS5ub3coKSxbNCx0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIixcInJlYWR3cml0ZS1wcmltYXJ5XCIsZnVuY3Rpb24odCl7dmFyIHI9elQodCxfVC5zdG9yZSk7cmV0dXJuIHIuTnQoKS5uZXh0KGZ1bmN0aW9uKHQpe3ZhciBlPW8ucm4odCwxOGU1KSxuPXQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybi0xPT09ZS5pbmRleE9mKHQpfSk7cmV0dXJuIGtULmZvckVhY2gobixmdW5jdGlvbih0KXtyZXR1cm4gci5kZWxldGUodC5jbGllbnRJZCl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIG59KX0pfSkuY2F0Y2goZnVuY3Rpb24oKXtyZXR1cm5bXX0pXSk7Y2FzZSAxOmlmKGU9dC5zZW50KCksdGhpcy5LZSlmb3Iobj0wLHI9ZTtuPHIubGVuZ3RoO24rKylpPXJbbl0sdGhpcy5LZS5yZW1vdmVJdGVtKHRoaXMub24oaS5jbGllbnRJZCkpO3QubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzJdfX0pfSl9LHBTLnByb3RvdHlwZS56ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5PZT10aGlzLlNlLmVucXVldWVBZnRlckRlbGF5KFwiY2xpZW50X21ldGFkYXRhX3JlZnJlc2hcIiw0ZTMsZnVuY3Rpb24oKXtyZXR1cm4gdC5qZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC5ubigpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiB0LnplKCl9KX0pfSxwUy5wcm90b3R5cGUudG49ZnVuY3Rpb24odCl7cmV0dXJuISF0JiZ0Lm93bmVySWQ9PT10aGlzLmNsaWVudElkfSxwUy5wcm90b3R5cGUuWWU9ZnVuY3Rpb24oZSl7dmFyIHI9dGhpcztyZXR1cm4gdGhpcy5DZT9rVC5yZXNvbHZlKCEwKTpkUyhlKS5nZXQoYVQua2V5KS5uZXh0KGZ1bmN0aW9uKHQpe2lmKG51bGwhPT10JiZyLnNuKHQubGVhc2VUaW1lc3RhbXBNcyw1ZTMpJiYhci5jbih0Lm93bmVySWQpKXtpZihyLnRuKHQpJiZyLm5ldHdvcmtFbmFibGVkKXJldHVybiEwO2lmKCFyLnRuKHQpKXtpZighdC5hbGxvd1RhYlN5bmNocm9uaXphdGlvbil0aHJvdyBuZXcgbmIoZWIuRkFJTEVEX1BSRUNPTkRJVElPTixsUyk7cmV0dXJuITF9fXJldHVybiEoIXIubmV0d29ya0VuYWJsZWR8fCFyLmluRm9yZWdyb3VuZCl8fHZTKGUpLk50KCkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09ci5ybih0LDVlMykuZmluZChmdW5jdGlvbih0KXtpZihyLmNsaWVudElkIT09dC5jbGllbnRJZCl7dmFyIGU9IXIubmV0d29ya0VuYWJsZWQmJnQubmV0d29ya0VuYWJsZWQsbj0hci5pbkZvcmVncm91bmQmJnQuaW5Gb3JlZ3JvdW5kLHQ9ci5uZXR3b3JrRW5hYmxlZD09PXQubmV0d29ya0VuYWJsZWQ7aWYoZXx8biYmdClyZXR1cm4hMH1yZXR1cm4hMX0pfSl9KS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiByLmlzUHJpbWFyeSE9PXQmJmFiKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIixcIkNsaWVudCBcIisodD9cImlzXCI6XCJpcyBub3RcIikrXCIgZWxpZ2libGUgZm9yIGEgcHJpbWFyeSBsZWFzZS5cIiksdH0pfSxwUy5wcm90b3R5cGUuc2h1dGRvd249ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIG49dGhpcztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLnhlPSExLHRoaXMudW4oKSx0aGlzLk9lJiYodGhpcy5PZS5jYW5jZWwoKSx0aGlzLk9lPW51bGwpLHRoaXMuYW4oKSx0aGlzLmhuKCksWzQsdGhpcy5CZS5ydW5UcmFuc2FjdGlvbihcInNodXRkb3duXCIsXCJyZWFkd3JpdGVcIixbYVQuc3RvcmUsX1Quc3RvcmVdLGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBIVCh0LCRtLm8pO3JldHVybiBuLlhlKGUpLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gbi5lbihlKX0pfSldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksdGhpcy5CZS5jbG9zZSgpLHRoaXMubG4oKSxbMl19fSl9KX0scFMucHJvdG90eXBlLnJuPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztyZXR1cm4gdC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIG4uc24odC51cGRhdGVUaW1lTXMsZSkmJiFuLmNuKHQuY2xpZW50SWQpfSl9LHBTLnByb3RvdHlwZS5mbj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRBY3RpdmVDbGllbnRzXCIsXCJyZWFkb25seVwiLGZ1bmN0aW9uKHQpe3JldHVybiB2Uyh0KS5OdCgpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIGUucm4odCwxOGU1KS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xpZW50SWR9KX0pfSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwUy5wcm90b3R5cGUsXCJzdGFydGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnhlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHBTLnByb3RvdHlwZS5nZXRNdXRhdGlvblF1ZXVlPWZ1bmN0aW9uKHQpe3JldHVybiBrRS5LdCh0LHRoaXMuUix0aGlzLlV0LHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpfSxwUy5wcm90b3R5cGUuZ2V0VGFyZ2V0Q2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xZX0scFMucHJvdG90eXBlLmdldFJlbW90ZURvY3VtZW50Q2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5VZX0scFMucHJvdG90eXBlLmdldEluZGV4TWFuYWdlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLlV0fSxwUy5wcm90b3R5cGUuZ2V0QnVuZGxlQ2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5RZX0scFMucHJvdG90eXBlLnJ1blRyYW5zYWN0aW9uPWZ1bmN0aW9uKGUsbixyKXt2YXIgaT10aGlzO2FiKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIixcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLGUpO3ZhciBvLHQ9XCJyZWFkb25seVwiPT09bj9cInJlYWRvbmx5XCI6XCJyZWFkd3JpdGVcIjtyZXR1cm4gdGhpcy5CZS5ydW5UcmFuc2FjdGlvbihlLHQsRVQsZnVuY3Rpb24odCl7cmV0dXJuIG89bmV3IEhUKHQsaS5OZT9pLk5lLm5leHQoKTokbS5vKSxcInJlYWR3cml0ZS1wcmltYXJ5XCI9PT1uP2kuSmUobykubmV4dChmdW5jdGlvbih0KXtyZXR1cm4hIXR8fGkuWWUobyl9KS5uZXh0KGZ1bmN0aW9uKHQpe2lmKCF0KXRocm93IHNiKFwiRmFpbGVkIHRvIG9idGFpbiBwcmltYXJ5IGxlYXNlIGZvciBhY3Rpb24gJ1wiK2UrXCInLlwiKSxpLmlzUHJpbWFyeT0hMSxpLlNlLmVucXVldWVSZXRyeWFibGUoZnVuY3Rpb24oKXtyZXR1cm4gaS5NZSghMSl9KSxuZXcgbmIoZWIuRkFJTEVEX1BSRUNPTkRJVElPTixTVCk7cmV0dXJuIHIobyl9KS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiBpLlplKG8pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gdH0pfSk6aS5kbihvKS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIHIobyl9KX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG8ucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksdH0pfSxwUy5wcm90b3R5cGUuZG49ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gZFModCkuZ2V0KGFULmtleSkubmV4dChmdW5jdGlvbih0KXtpZihudWxsIT09dCYmZS5zbih0LmxlYXNlVGltZXN0YW1wTXMsNWUzKSYmIWUuY24odC5vd25lcklkKSYmIWUudG4odCkmJiEoZS5DZXx8ZS5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiYmdC5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikpdGhyb3cgbmV3IG5iKGViLkZBSUxFRF9QUkVDT05ESVRJT04sbFMpfSl9LHBTLnByb3RvdHlwZS5aZT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgYVQodGhpcy5jbGllbnRJZCx0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uLERhdGUubm93KCkpO3JldHVybiBkUyh0KS5wdXQoYVQua2V5LGUpfSxwUy55dD1mdW5jdGlvbigpe3JldHVybiBBVC55dCgpfSxwUy5wcm90b3R5cGUuWGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWRTKHQpO3JldHVybiBuLmdldChhVC5rZXkpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIGUudG4odCk/KGFiKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIixcIlJlbGVhc2luZyBwcmltYXJ5IGxlYXNlLlwiKSxuLmRlbGV0ZShhVC5rZXkpKTprVC5yZXNvbHZlKCl9KX0scFMucHJvdG90eXBlLnNuPWZ1bmN0aW9uKHQsZSl7dmFyIG49RGF0ZS5ub3coKTtyZXR1cm4hKHQ8bi1lfHxuPHQmJihzYihcIkRldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogXCIrdCtcIiA+IFwiK24pLDEpKX0scFMucHJvdG90eXBlLldlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztudWxsIT09dGhpcy5kb2N1bWVudCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyJiYodGhpcy5rZT1mdW5jdGlvbigpe3QuU2UuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbigpe3JldHVybiB0LmluRm9yZWdyb3VuZD1cInZpc2libGVcIj09PXQuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlLHQuamUoKX0pfSx0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsdGhpcy5rZSksdGhpcy5pbkZvcmVncm91bmQ9XCJ2aXNpYmxlXCI9PT10aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSl9LHBTLnByb3RvdHlwZS5hbj1mdW5jdGlvbigpe3RoaXMua2UmJih0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsdGhpcy5rZSksdGhpcy5rZT1udWxsKX0scFMucHJvdG90eXBlLkdlPWZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzO1wiZnVuY3Rpb25cIj09dHlwZW9mKG51bGw9PT0odD10aGlzLndpbmRvdyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuYWRkRXZlbnRMaXN0ZW5lcikmJih0aGlzLkZlPWZ1bmN0aW9uKCl7ZS51bigpLGUuU2UuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbigpe3JldHVybiBlLnNodXRkb3duKCl9KX0sdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLHRoaXMuRmUpKX0scFMucHJvdG90eXBlLmhuPWZ1bmN0aW9uKCl7dGhpcy5GZSYmKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIix0aGlzLkZlKSx0aGlzLkZlPW51bGwpfSxwUy5wcm90b3R5cGUuY249ZnVuY3Rpb24odCl7dHJ5e3ZhciBlPW51bGwhPT0obnVsbD09PShlPXRoaXMuS2UpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldEl0ZW0odGhpcy5vbih0KSkpO3JldHVybiBhYihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsXCJDbGllbnQgJ1wiK3QrXCInIFwiKyhlP1wiaXNcIjpcImlzIG5vdFwiKStcIiB6b21iaWVkIGluIExvY2FsU3RvcmFnZVwiKSxlfWNhdGNoKHQpe3JldHVybiBzYihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsXCJGYWlsZWQgdG8gZ2V0IHpvbWJpZWQgY2xpZW50IGlkLlwiLHQpLCExfX0scFMucHJvdG90eXBlLnVuPWZ1bmN0aW9uKCl7aWYodGhpcy5LZSl0cnl7dGhpcy5LZS5zZXRJdGVtKHRoaXMub24odGhpcy5jbGllbnRJZCksU3RyaW5nKERhdGUubm93KCkpKX1jYXRjaCh0KXtzYihcIkZhaWxlZCB0byBzZXQgem9tYmllIGNsaWVudCBpZC5cIix0KX19LHBTLnByb3RvdHlwZS5sbj1mdW5jdGlvbigpe2lmKHRoaXMuS2UpdHJ5e3RoaXMuS2UucmVtb3ZlSXRlbSh0aGlzLm9uKHRoaXMuY2xpZW50SWQpKX1jYXRjaCh0KXt9fSxwUy5wcm90b3R5cGUub249ZnVuY3Rpb24odCl7cmV0dXJuXCJmaXJlc3RvcmVfem9tYmllX1wiK3RoaXMucGVyc2lzdGVuY2VLZXkrXCJfXCIrdH0scFMpO2Z1bmN0aW9uIHBTKHQsZSxuLHIsaSxvLGEscyx1LGMpe2lmKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb249dCx0aGlzLnBlcnNpc3RlbmNlS2V5PWUsdGhpcy5jbGllbnRJZD1uLHRoaXMuU2U9aSx0aGlzLndpbmRvdz1vLHRoaXMuZG9jdW1lbnQ9YSx0aGlzLkRlPXUsdGhpcy5DZT1jLHRoaXMuTmU9bnVsbCx0aGlzLnhlPSExLHRoaXMuaXNQcmltYXJ5PSExLHRoaXMubmV0d29ya0VuYWJsZWQ9ITAsdGhpcy5GZT1udWxsLHRoaXMuaW5Gb3JlZ3JvdW5kPSExLHRoaXMua2U9bnVsbCx0aGlzLk9lPW51bGwsdGhpcy4kZT1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksdGhpcy5NZT1mdW5jdGlvbih0KXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9LCFwUy55dCgpKXRocm93IG5ldyBuYihlYi5VTklNUExFTUVOVEVELFwiVGhpcyBwbGF0Zm9ybSBpcyBlaXRoZXIgbWlzc2luZyBJbmRleGVkREIgb3IgaXMga25vd24gdG8gaGF2ZSBhbiBpbmNvbXBsZXRlIGltcGxlbWVudGF0aW9uLiBPZmZsaW5lIHBlcnNpc3RlbmNlIGhhcyBiZWVuIGRpc2FibGVkLlwiKTt0aGlzLnJlZmVyZW5jZURlbGVnYXRlPW5ldyBIRSh0aGlzLHIpLHRoaXMuTGU9ZStcIm1haW5cIix0aGlzLlI9bmV3IEpUKHMpLHRoaXMuQmU9bmV3IEFUKHRoaXMuTGUsMTEsbmV3IHVTKHRoaXMuUikpLHRoaXMucWU9bmV3IHhFKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUsdGhpcy5SKSx0aGlzLlV0PW5ldyB5RSx0aGlzLlVlPShlPXRoaXMuUixzPXRoaXMuVXQsbmV3IFpFKGUscykpLHRoaXMuUWU9bmV3IGxFLHRoaXMud2luZG93JiZ0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2U/dGhpcy5LZT10aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2U6KHRoaXMuS2U9bnVsbCwhMT09PWMmJnNiKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIixcIkxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZS4gQXMgYSByZXN1bHQsIHBlcnNpc3RlbmNlIG1heSBub3Qgd29yayByZWxpYWJseS4gSW4gcGFydGljdWxhciBlbmFibGVQZXJzaXN0ZW5jZSgpIGNvdWxkIGZhaWwgaW1tZWRpYXRlbHkgYWZ0ZXIgcmVmcmVzaGluZyB0aGUgcGFnZS5cIikpfWZ1bmN0aW9uIGRTKHQpe3JldHVybiB6VCh0LGFULnN0b3JlKX1mdW5jdGlvbiB2Uyh0KXtyZXR1cm4gelQodCxfVC5zdG9yZSl9ZnVuY3Rpb24gZ1ModCxlKXt2YXIgbj10LnByb2plY3RJZDtyZXR1cm4gdC5pc0RlZmF1bHREYXRhYmFzZXx8KG4rPVwiLlwiK3QuZGF0YWJhc2UpLFwiZmlyZXN0b3JlL1wiK2UrXCIvXCIrbitcIi9cIn1mdW5jdGlvbiB5Uyh0LGUpe3RoaXMucHJvZ3Jlc3M9dCx0aGlzLnduPWV9dmFyIG1TPShTUy5wcm90b3R5cGUubW49ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzO3JldHVybiB0aGlzLl9uLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KGUsbikubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gci55bihlLG4sdCl9KX0sU1MucHJvdG90eXBlLnluPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdGhpcy5VZS5nZXRFbnRyeSh0LGUpLm5leHQoZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj1yO2U8bi5sZW5ndGg7ZSsrKW5bZV0uYXBwbHlUb0xvY2FsVmlldyh0KTtyZXR1cm4gdH0pfSxTUy5wcm90b3R5cGUuZ249ZnVuY3Rpb24odCxpKXt0LmZvckVhY2goZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxyPWk7bjxyLmxlbmd0aDtuKyspcltuXS5hcHBseVRvTG9jYWxWaWV3KGUpfSl9LFNTLnByb3RvdHlwZS5wbj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7cmV0dXJuIHRoaXMuVWUuZ2V0RW50cmllcyhlLHQpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIG4uRW4oZSx0KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX0pfSxTUy5wcm90b3R5cGUuRW49ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLl9uLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LGUpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIG4uZ24oZSx0KX0pfSxTUy5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHI9ZSxIYi5pc0RvY3VtZW50S2V5KHIucGF0aCkmJm51bGw9PT1yLmNvbGxlY3Rpb25Hcm91cCYmMD09PXIuZmlsdGVycy5sZW5ndGg/dGhpcy5Ubih0LGUucGF0aCk6Sl8oZSk/dGhpcy5Jbih0LGUsbik6dGhpcy5Bbih0LGUsbik7dmFyIHJ9LFNTLnByb3RvdHlwZS5Ubj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm1uKHQsbmV3IEhiKGUpKS5uZXh0KGZ1bmN0aW9uKHQpe3ZhciBlPWxJO3JldHVybiBlPXQuaXNGb3VuZERvY3VtZW50KCk/ZS5pbnNlcnQodC5rZXksdCk6ZX0pfSxTUy5wcm90b3R5cGUuSW49ZnVuY3Rpb24obixyLGkpe3ZhciBvPXRoaXMsYT1yLmNvbGxlY3Rpb25Hcm91cCxzPWxJO3JldHVybiB0aGlzLlV0LmdldENvbGxlY3Rpb25QYXJlbnRzKG4sYSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4ga1QuZm9yRWFjaCh0LGZ1bmN0aW9uKHQpe3ZhciBlLGU9KGU9cix0PXQuY2hpbGQoYSksbmV3IFdfKHQsbnVsbCxlLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLGUuZmlsdGVycy5zbGljZSgpLGUubGltaXQsZS5saW1pdFR5cGUsZS5zdGFydEF0LGUuZW5kQXQpKTtyZXR1cm4gby5BbihuLGUsaSkubmV4dChmdW5jdGlvbih0KXt0LmZvckVhY2goZnVuY3Rpb24odCxlKXtzPXMuaW5zZXJ0KHQsZSl9KX0pfSkubmV4dChmdW5jdGlvbigpe3JldHVybiBzfSl9KX0sU1MucHJvdG90eXBlLkFuPWZ1bmN0aW9uKGUsbix0KXt2YXIgYyxoLHI9dGhpcztyZXR1cm4gdGhpcy5VZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsbix0KS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiBjPXQsci5fbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeShlLG4pfSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gaD10LHIuUm4oZSxoLGMpLm5leHQoZnVuY3Rpb24odCl7Yz10O2Zvcih2YXIgZT0wLG49aDtlPG4ubGVuZ3RoO2UrKylmb3IodmFyIHI9bltlXSxpPTAsbz1yLm11dGF0aW9ucztpPG8ubGVuZ3RoO2krKyl7dmFyIGE9b1tpXSxzPWEua2V5LHU9Yy5nZXQocyk7bnVsbD09dSYmKHU9c18ubmV3SW52YWxpZERvY3VtZW50KHMpLGM9Yy5pbnNlcnQocyx1KSksUHcoYSx1LHIubG9jYWxXcml0ZVRpbWUpLHUuaXNGb3VuZERvY3VtZW50KCl8fChjPWMucmVtb3ZlKHMpKX19KX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7aXcobixlKXx8KGM9Yy5yZW1vdmUodCkpfSksY30pfSxTUy5wcm90b3R5cGUuUm49ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj1kSSgpLGk9MCxvPWU7aTxvLmxlbmd0aDtpKyspZm9yKHZhciBhPTAscz1vW2ldLm11dGF0aW9uczthPHMubGVuZ3RoO2ErKyl7dmFyIHU9c1thXTt1IGluc3RhbmNlb2YgRncmJm51bGw9PT1uLmdldCh1LmtleSkmJihyPXIuYWRkKHUua2V5KSl9dmFyIGM9bjtyZXR1cm4gdGhpcy5VZS5nZXRFbnRyaWVzKHQscikubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7ZS5pc0ZvdW5kRG9jdW1lbnQoKSYmKGM9Yy5pbnNlcnQodCxlKSl9KSxjfSl9LFNTKSxiUz0oRVMuUG49ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49ZEkoKSxyPWRJKCksaT0wLG89ZS5kb2NDaGFuZ2VzO2k8by5sZW5ndGg7aSsrKXt2YXIgYT1vW2ldO3N3aXRjaChhLnR5cGUpe2Nhc2UgMDpuPW4uYWRkKGEuZG9jLmtleSk7YnJlYWs7Y2FzZSAxOnI9ci5hZGQoYS5kb2Mua2V5KX19cmV0dXJuIG5ldyBFUyh0LGUuZnJvbUNhY2hlLG4scil9LEVTKSxfUz0oVFMucHJvdG90eXBlLlZuPWZ1bmN0aW9uKHQpe3RoaXMuU249dH0sVFMucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnk9ZnVuY3Rpb24oZSxyLGksbyl7dmFyIGE9dGhpcztyZXR1cm4gMD09PXIuZmlsdGVycy5sZW5ndGgmJm51bGw9PT1yLmxpbWl0JiZudWxsPT1yLnN0YXJ0QXQmJm51bGw9PXIuZW5kQXQmJigwPT09ci5leHBsaWNpdE9yZGVyQnkubGVuZ3RofHwxPT09ci5leHBsaWNpdE9yZGVyQnkubGVuZ3RoJiZyLmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpfHxpLmlzRXF1YWwobWIubWluKCkpP3RoaXMuRG4oZSxyKTp0aGlzLlNuLnBuKGUsbykubmV4dChmdW5jdGlvbih0KXt2YXIgbj1hLkNuKHIsdCk7cmV0dXJuKHpfKHIpfHxRXyhyKSkmJmEuTm4oci5saW1pdFR5cGUsbixvLGkpP2EuRG4oZSxyKToob2IoKTw9dWEuREVCVUcmJmFiKFwiUXVlcnlFbmdpbmVcIixcIlJlLXVzaW5nIHByZXZpb3VzIHJlc3VsdCBmcm9tICVzIHRvIGV4ZWN1dGUgcXVlcnk6ICVzXCIsaS50b1N0cmluZygpLHJ3KHIpKSxhLlNuLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSxyLGkpLm5leHQoZnVuY3Rpb24oZSl7cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbih0KXtlPWUuaW5zZXJ0KHQua2V5LHQpfSksZX0pKX0pfSxUUy5wcm90b3R5cGUuQ249ZnVuY3Rpb24obix0KXt2YXIgcj1uZXcgYUkob3cobikpO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCxlKXtpdyhuLGUpJiYocj1yLmFkZChlKSl9KSxyfSxUUy5wcm90b3R5cGUuTm49ZnVuY3Rpb24odCxlLG4scil7aWYobi5zaXplIT09ZS5zaXplKXJldHVybiEwO2U9XCJGXCI9PT10P2UubGFzdCgpOmUuZmlyc3QoKTtyZXR1cm4hIWUmJihlLmhhc1BlbmRpbmdXcml0ZXN8fDA8ZS52ZXJzaW9uLmNvbXBhcmVUbyhyKSl9LFRTLnByb3RvdHlwZS5Ebj1mdW5jdGlvbih0LGUpe3JldHVybiBvYigpPD11YS5ERUJVRyYmYWIoXCJRdWVyeUVuZ2luZVwiLFwiVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTpcIixydyhlKSksdGhpcy5Tbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsZSxtYi5taW4oKSl9LFRTKSx3Uz0oSVMucHJvdG90eXBlLmNvbGxlY3RHYXJiYWdlPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb2xsZWN0IGdhcmJhZ2VcIixcInJlYWR3cml0ZS1wcmltYXJ5XCIsZnVuY3Rpb24odCl7cmV0dXJuIGUuY29sbGVjdCh0LG4uRm4pfSl9LElTKTtmdW5jdGlvbiBJUyh0LGUsbixyKXt0aGlzLnBlcnNpc3RlbmNlPXQsdGhpcy54bj1lLHRoaXMuUj1yLHRoaXMuRm49bmV3IFp3KGRiKSx0aGlzLmtuPW5ldyAkRShsXyxmXyksdGhpcy5Pbj1tYi5taW4oKSx0aGlzLl9uPXQuZ2V0TXV0YXRpb25RdWV1ZShuKSx0aGlzLiRuPXQuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLHRoaXMucWU9dC5nZXRUYXJnZXRDYWNoZSgpLHRoaXMuTW49bmV3IG1TKHRoaXMuJG4sdGhpcy5fbix0aGlzLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcigpKSx0aGlzLlFlPXQuZ2V0QnVuZGxlQ2FjaGUoKSx0aGlzLnhuLlZuKHRoaXMuTW4pfWZ1bmN0aW9uIFRTKCl7fWZ1bmN0aW9uIEVTKHQsZSxuLHIpe3RoaXMudGFyZ2V0SWQ9dCx0aGlzLmZyb21DYWNoZT1lLHRoaXMuYm49bix0aGlzLnZuPXJ9ZnVuY3Rpb24gU1ModCxlLG4pe3RoaXMuVWU9dCx0aGlzLl9uPWUsdGhpcy5VdD1ufWZ1bmN0aW9uIENTKHQsZSxuLHIpe3JldHVybiBuZXcgd1ModCxlLG4scil9ZnVuY3Rpb24ga1MoaSxvKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixtLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbj0oZT1pKS5fbixtPWUuTW4sWzQsZS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkhhbmRsZSB1c2VyIGNoYW5nZVwiLFwicmVhZG9ubHlcIixmdW5jdGlvbihnKXt2YXIgeTtyZXR1cm4gZS5fbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXMoZykubmV4dChmdW5jdGlvbih0KXtyZXR1cm4geT10LG49ZS5wZXJzaXN0ZW5jZS5nZXRNdXRhdGlvblF1ZXVlKG8pLG09bmV3IG1TKGUuJG4sbixlLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcigpKSxuLmdldEFsbE11dGF0aW9uQmF0Y2hlcyhnKX0pLm5leHQoZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49W10scj1kSSgpLGk9MCxvPXk7aTxvLmxlbmd0aDtpKyspe3ZhciBhPW9baV07ZS5wdXNoKGEuYmF0Y2hJZCk7Zm9yKHZhciBzPTAsdT1hLm11dGF0aW9ucztzPHUubGVuZ3RoO3MrKyl2YXIgYz11W3NdLHI9ci5hZGQoYy5rZXkpfWZvcih2YXIgaD0wLGw9dDtoPGwubGVuZ3RoO2grKyl7dmFyIGY9bFtoXTtuLnB1c2goZi5iYXRjaElkKTtmb3IodmFyIHA9MCxkPWYubXV0YXRpb25zO3A8ZC5sZW5ndGg7cCsrKXt2YXIgdj1kW3BdO3I9ci5hZGQodi5rZXkpfX1yZXR1cm4gbS5wbihnLHIpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJue0xuOnQscmVtb3ZlZEJhdGNoSWRzOmUsYWRkZWRCYXRjaElkczpufX0pfSl9KV07Y2FzZSAxOnJldHVybiByPXQuc2VudCgpLFsyLChlLl9uPW4sZS5Nbj1tLGUueG4uVm4oZS5NbikscildfX0pfSl9ZnVuY3Rpb24gTlModCxoKXt2YXIgbD10O3JldHVybiBsLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQWNrbm93bGVkZ2UgYmF0Y2hcIixcInJlYWR3cml0ZS1wcmltYXJ5XCIsZnVuY3Rpb24odCl7dmFyIGUscixpLG8sYSxuLHMsdT1oLmJhdGNoLmtleXMoKSxjPWwuJG4ubmV3Q2hhbmdlQnVmZmVyKHt0cmFja1JlbW92YWxzOiEwfSk7cmV0dXJuIGU9bCxyPXQsbz1jLGE9KGk9aCkuYmF0Y2gsbj1hLmtleXMoKSxzPWtULnJlc29sdmUoKSxuLmZvckVhY2goZnVuY3Rpb24obil7cz1zLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gby5nZXRFbnRyeShyLG4pfSkubmV4dChmdW5jdGlvbih0KXt2YXIgZT1pLmRvY1ZlcnNpb25zLmdldChuKTtsYihudWxsIT09ZSksdC52ZXJzaW9uLmNvbXBhcmVUbyhlKTwwJiYoYS5hcHBseVRvUmVtb3RlRG9jdW1lbnQodCxpKSx0LmlzVmFsaWREb2N1bWVudCgpJiZvLmFkZEVudHJ5KHQsaS5jb21taXRWZXJzaW9uKSl9KX0pLHMubmV4dChmdW5jdGlvbigpe3JldHVybiBlLl9uLnJlbW92ZU11dGF0aW9uQmF0Y2gocixhKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0KX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gbC5fbi5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gbC5Nbi5wbih0LHUpfSl9KX1mdW5jdGlvbiBBUyh0KXt2YXIgZT10O3JldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGxhc3QgcmVtb3RlIHNuYXBzaG90IHZlcnNpb25cIixcInJlYWRvbmx5XCIsZnVuY3Rpb24odCl7cmV0dXJuIGUucWUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KX0pfWZ1bmN0aW9uIFJTKHQscil7dmFyIHU9dCxjPXIuc25hcHNob3RWZXJzaW9uLGg9dS5GbjtyZXR1cm4gdS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IHJlbW90ZSBldmVudFwiLFwicmVhZHdyaXRlLXByaW1hcnlcIixmdW5jdGlvbihhKXt2YXIgdD11LiRuLm5ld0NoYW5nZUJ1ZmZlcih7dHJhY2tSZW1vdmFsczohMH0pO2g9dS5Gbjt2YXIgcz1bXTtyLnRhcmdldENoYW5nZXMuZm9yRWFjaChmdW5jdGlvbih0LGUpe3ZhciBuLHIsaSxvPWguZ2V0KGUpO28mJihzLnB1c2godS5xZS5yZW1vdmVNYXRjaGluZ0tleXMoYSx0LnJlbW92ZWREb2N1bWVudHMsZSkubmV4dChmdW5jdGlvbigpe3JldHVybiB1LnFlLmFkZE1hdGNoaW5nS2V5cyhhLHQuYWRkZWREb2N1bWVudHMsZSl9KSksMDwoaT10LnJlc3VtZVRva2VuKS5hcHByb3hpbWF0ZUJ5dGVTaXplKCkmJihuPW8ud2l0aFJlc3VtZVRva2VuKGksYykud2l0aFNlcXVlbmNlTnVtYmVyKGEuY3VycmVudFNlcXVlbmNlTnVtYmVyKSxoPWguaW5zZXJ0KGUsbikscj1vLGk9dCxsYigwPChvPW4pLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSksKDA9PT1yLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKXx8M2U4PD1vLnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpLXIuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCl8fDA8aS5hZGRlZERvY3VtZW50cy5zaXplK2kubW9kaWZpZWREb2N1bWVudHMuc2l6ZStpLnJlbW92ZWREb2N1bWVudHMuc2l6ZSkmJnMucHVzaCh1LnFlLnVwZGF0ZVRhcmdldERhdGEoYSxuKSkpKX0pO3ZhciBlLG49dUk7cmV0dXJuIHIuZG9jdW1lbnRVcGRhdGVzLmZvckVhY2goZnVuY3Rpb24odCxlKXtyLnJlc29sdmVkTGltYm9Eb2N1bWVudHMuaGFzKHQpJiZzLnB1c2godS5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KGEsdCkpfSkscy5wdXNoKFBTKGEsdCxyLmRvY3VtZW50VXBkYXRlcyxjLHZvaWQgMCkubmV4dChmdW5jdGlvbih0KXtuPXR9KSksYy5pc0VxdWFsKG1iLm1pbigpKXx8KGU9dS5xZS5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGEpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIHUucWUuc2V0VGFyZ2V0c01ldGFkYXRhKGEsYS5jdXJyZW50U2VxdWVuY2VOdW1iZXIsYyl9KSxzLnB1c2goZSkpLGtULndhaXRGb3IocykubmV4dChmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGEpfSkubmV4dChmdW5jdGlvbigpe3JldHVybiB1Lk1uLkVuKGEsbil9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIG59KX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHUuRm49aCx0fSl9ZnVuY3Rpb24gUFModCxhLGUscyx1KXt2YXIgbj1kSSgpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG49bi5hZGQodCl9KSxhLmdldEVudHJpZXModCxuKS5uZXh0KGZ1bmN0aW9uKGkpe3ZhciBvPXVJO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odCxlKXt2YXIgbj1pLmdldCh0KSxyPShudWxsPT11P3ZvaWQgMDp1LmdldCh0KSl8fHM7ZS5pc05vRG9jdW1lbnQoKSYmZS52ZXJzaW9uLmlzRXF1YWwobWIubWluKCkpPyhhLnJlbW92ZUVudHJ5KHQsciksbz1vLmluc2VydCh0LGUpKTohbi5pc1ZhbGlkRG9jdW1lbnQoKXx8MDxlLnZlcnNpb24uY29tcGFyZVRvKG4udmVyc2lvbil8fDA9PT1lLnZlcnNpb24uY29tcGFyZVRvKG4udmVyc2lvbikmJm4uaGFzUGVuZGluZ1dyaXRlcz8oYS5hZGRFbnRyeShlLHIpLG89by5pbnNlcnQodCxlKSk6YWIoXCJMb2NhbFN0b3JlXCIsXCJJZ25vcmluZyBvdXRkYXRlZCB3YXRjaCB1cGRhdGUgZm9yIFwiLHQsXCIuIEN1cnJlbnQgdmVyc2lvbjpcIixuLnZlcnNpb24sXCIgV2F0Y2ggdmVyc2lvbjpcIixlLnZlcnNpb24pfSksb30pfWZ1bmN0aW9uIE9TKHQscil7dmFyIGk9dDtyZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFsbG9jYXRlIHRhcmdldFwiLFwicmVhZHdyaXRlXCIsZnVuY3Rpb24oZSl7dmFyIG47cmV0dXJuIGkucWUuZ2V0VGFyZ2V0RGF0YShlLHIpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIHQ/KG49dCxrVC5yZXNvbHZlKG4pKTppLnFlLmFsbG9jYXRlVGFyZ2V0SWQoZSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gbj1uZXcgWFQocix0LDAsZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLGkucWUuYWRkVGFyZ2V0RGF0YShlLG4pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gbn0pfSl9KX0pLnRoZW4oZnVuY3Rpb24odCl7dmFyIGU9aS5Gbi5nZXQodC50YXJnZXRJZCk7cmV0dXJuKG51bGw9PT1lfHwwPHQuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhlLnNuYXBzaG90VmVyc2lvbikpJiYoaS5Gbj1pLkZuLmluc2VydCh0LnRhcmdldElkLHQpLGkua24uc2V0KHIsdC50YXJnZXRJZCkpLHR9KX1mdW5jdGlvbiBEUyhpLG8sYSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOm49KGU9aSkuRm4uZ2V0KG8pLHI9YT9cInJlYWR3cml0ZVwiOlwicmVhZHdyaXRlLXByaW1hcnlcIix0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSw0LCw1XSksYT9bMywzXTpbNCxlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVsZWFzZSB0YXJnZXRcIixyLGZ1bmN0aW9uKHQpe3JldHVybiBlLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVRhcmdldCh0LG4pfSldO2Nhc2UgMjp0LnNlbnQoKSx0LmxhYmVsPTM7Y2FzZSAzOnJldHVyblszLDVdO2Nhc2UgNDppZighVVQocj10LnNlbnQoKSkpdGhyb3cgcjtyZXR1cm4gYWIoXCJMb2NhbFN0b3JlXCIsXCJGYWlsZWQgdG8gdXBkYXRlIHNlcXVlbmNlIG51bWJlcnMgZm9yIHRhcmdldCBcIitvK1wiOiBcIityKSxbMyw1XTtjYXNlIDU6cmV0dXJuIGUuRm49ZS5Gbi5yZW1vdmUobyksZS5rbi5kZWxldGUobi50YXJnZXQpLFsyXX19KX0pfWZ1bmN0aW9uIHhTKHQsbyxhKXt2YXIgcz10LHU9bWIubWluKCksYz1kSSgpO3JldHVybiBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiRXhlY3V0ZSBxdWVyeVwiLFwicmVhZG9ubHlcIixmdW5jdGlvbihlKXtyZXR1cm4gdD1zLG49ZSxyPVpfKG8pLCh2b2lkIDAhPT0odD0oaT10KS5rbi5nZXQocikpP2tULnJlc29sdmUoaS5Gbi5nZXQodCkpOmkucWUuZ2V0VGFyZ2V0RGF0YShuLHIpKS5uZXh0KGZ1bmN0aW9uKHQpe2lmKHQpcmV0dXJuIHU9dC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLHMucWUuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSx0LnRhcmdldElkKS5uZXh0KGZ1bmN0aW9uKHQpe2M9dH0pfSkubmV4dChmdW5jdGlvbigpe3JldHVybiBzLnhuLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSxvLGE/dTptYi5taW4oKSxhP2M6ZEkoKSl9KS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybntkb2N1bWVudHM6dCxCbjpjfX0pO3ZhciB0LG4scixpfSl9ZnVuY3Rpb24gTFModCxlKXt2YXIgbj10LHI9bi5xZSx0PW4uRm4uZ2V0KGUpO3JldHVybiB0P1Byb21pc2UucmVzb2x2ZSh0LnRhcmdldCk6bi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCB0YXJnZXQgZGF0YVwiLFwicmVhZG9ubHlcIixmdW5jdGlvbih0KXtyZXR1cm4gci5sdCh0LGUpLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIHQ/dC50YXJnZXQ6bnVsbH0pfSl9ZnVuY3Rpb24gTVModCl7dmFyIGE9dDtyZXR1cm4gYS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXcgZG9jdW1lbnQgY2hhbmdlc1wiLFwicmVhZG9ubHlcIixmdW5jdGlvbih0KXtyZXR1cm4gZT1hLiRuLG49dCx0PWEuT24scj1lLGk9dUksbz1yRSh0KSx0PWFTKG4pLG49SURCS2V5UmFuZ2UubG93ZXJCb3VuZChvLCEwKSx0Lk90KHtpbmRleDpkVC5yZWFkVGltZUluZGV4LHJhbmdlOm59LGZ1bmN0aW9uKHQsZSl7dmFyIG49ZUUoci5SLGUpO2k9aS5pbnNlcnQobi5rZXksbiksbz1lLnJlYWRUaW1lfSkubmV4dChmdW5jdGlvbigpe3JldHVybnt3bjppLHJlYWRUaW1lOmlFKG8pfX0pO3ZhciBlLG4scixpLG99KS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPXQud24sdD10LnJlYWRUaW1lO3JldHVybiBhLk9uPXQsZX0pfWZ1bmN0aW9uIEZTKG4pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtyZXR1cm5bMiwoZT1uKS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlN5bmNocm9uaXplIGxhc3QgZG9jdW1lbnQgY2hhbmdlIHJlYWQgdGltZVwiLFwicmVhZG9ubHlcIixmdW5jdGlvbih0KXtyZXR1cm4gdD1hUyh0KSxyPW1iLm1pbigpLHQuT3Qoe2luZGV4OmRULnJlYWRUaW1lSW5kZXgscmV2ZXJzZTohMH0sZnVuY3Rpb24odCxlLG4pe2UucmVhZFRpbWUmJihyPWlFKGUucmVhZFRpbWUpKSxuLmRvbmUoKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gcn0pO3ZhciByfSkudGhlbihmdW5jdGlvbih0KXtlLk9uPXR9KV19KX0pfXZhciBVUyxqUyxxUz0oc0MucHJvdG90eXBlLmdldEJ1bmRsZU1ldGFkYXRhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGtULnJlc29sdmUodGhpcy5Lbi5nZXQoZSkpfSxzQy5wcm90b3R5cGUuc2F2ZUJ1bmRsZU1ldGFkYXRhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuS24uc2V0KGUuaWQse2lkOmUuaWQsdmVyc2lvbjplLnZlcnNpb24sY3JlYXRlVGltZTp4SShlLmNyZWF0ZVRpbWUpfSksa1QucmVzb2x2ZSgpfSxzQy5wcm90b3R5cGUuZ2V0TmFtZWRRdWVyeT1mdW5jdGlvbih0LGUpe3JldHVybiBrVC5yZXNvbHZlKHRoaXMuam4uZ2V0KGUpKX0sc0MucHJvdG90eXBlLnNhdmVOYW1lZFF1ZXJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuam4uc2V0KGUubmFtZSx7bmFtZTooZT1lKS5uYW1lLHF1ZXJ5OmhFKGUuYnVuZGxlZFF1ZXJ5KSxyZWFkVGltZTp4SShlLnJlYWRUaW1lKX0pLGtULnJlc29sdmUoKX0sc0MpLFZTPShhQy5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLlduLmlzRW1wdHkoKX0sYUMucHJvdG90eXBlLmFkZFJlZmVyZW5jZT1mdW5jdGlvbih0LGUpe2U9bmV3IEJTKHQsZSk7dGhpcy5Xbj10aGlzLlduLmFkZChlKSx0aGlzLnpuPXRoaXMuem4uYWRkKGUpfSxhQy5wcm90b3R5cGUuSm49ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3QuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gbi5hZGRSZWZlcmVuY2UodCxlKX0pfSxhQy5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlPWZ1bmN0aW9uKHQsZSl7dGhpcy5ZbihuZXcgQlModCxlKSl9LGFDLnByb3RvdHlwZS5Ybj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBuLnJlbW92ZVJlZmVyZW5jZSh0LGUpfSl9LGFDLnByb3RvdHlwZS5abj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49bmV3IEhiKG5ldyBDYihbXSkpLHI9bmV3IEJTKG4sdCksdD1uZXcgQlMobix0KzEpLGk9W107cmV0dXJuIHRoaXMuem4uZm9yRWFjaEluUmFuZ2UoW3IsdF0sZnVuY3Rpb24odCl7ZS5Zbih0KSxpLnB1c2godC5rZXkpfSksaX0sYUMucHJvdG90eXBlLnRzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLlduLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUuWW4odCl9KX0sYUMucHJvdG90eXBlLlluPWZ1bmN0aW9uKHQpe3RoaXMuV249dGhpcy5Xbi5kZWxldGUodCksdGhpcy56bj10aGlzLnpuLmRlbGV0ZSh0KX0sYUMucHJvdG90eXBlLmVzPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBIYihuZXcgQ2IoW10pKSxuPW5ldyBCUyhlLHQpLHQ9bmV3IEJTKGUsdCsxKSxyPWRJKCk7cmV0dXJuIHRoaXMuem4uZm9yRWFjaEluUmFuZ2UoW24sdF0sZnVuY3Rpb24odCl7cj1yLmFkZCh0LmtleSl9KSxyfSxhQy5wcm90b3R5cGUuY29udGFpbnNLZXk9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEJTKHQsMCksZT10aGlzLlduLmZpcnN0QWZ0ZXJPckVxdWFsKGUpO3JldHVybiBudWxsIT09ZSYmdC5pc0VxdWFsKGUua2V5KX0sYUMpLEJTPShvQy5Hbj1mdW5jdGlvbih0LGUpe3JldHVybiBIYi5jb21wYXJhdG9yKHQua2V5LGUua2V5KXx8ZGIodC5ucyxlLm5zKX0sb0MuSG49ZnVuY3Rpb24odCxlKXtyZXR1cm4gZGIodC5ucyxlLm5zKXx8SGIuY29tcGFyYXRvcih0LmtleSxlLmtleSl9LG9DKSxLUz0oaUMucHJvdG90eXBlLmNoZWNrRW1wdHk9ZnVuY3Rpb24odCl7cmV0dXJuIGtULnJlc29sdmUoMD09PXRoaXMuX24ubGVuZ3RoKX0saUMucHJvdG90eXBlLmFkZE11dGF0aW9uQmF0Y2g9ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9dGhpcy5zczt0aGlzLnNzKyssMDx0aGlzLl9uLmxlbmd0aCYmdGhpcy5fblt0aGlzLl9uLmxlbmd0aC0xXTtuPW5ldyBRVChpLGUsbixyKTt0aGlzLl9uLnB1c2gobik7Zm9yKHZhciBvPTAsYT1yO288YS5sZW5ndGg7bysrKXt2YXIgcz1hW29dO3RoaXMucnM9dGhpcy5ycy5hZGQobmV3IEJTKHMua2V5LGkpKSx0aGlzLlV0LmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQscy5rZXkucGF0aC5wb3BMYXN0KCkpfXJldHVybiBrVC5yZXNvbHZlKG4pfSxpQy5wcm90b3R5cGUubG9va3VwTXV0YXRpb25CYXRjaD1mdW5jdGlvbih0LGUpe3JldHVybiBrVC5yZXNvbHZlKHRoaXMub3MoZSkpfSxpQy5wcm90b3R5cGUuZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQ9ZnVuY3Rpb24odCxlKXtlKz0xLGU9dGhpcy5jcyhlKSxlPWU8MD8wOmU7cmV0dXJuIGtULnJlc29sdmUodGhpcy5fbi5sZW5ndGg+ZT90aGlzLl9uW2VdOm51bGwpfSxpQy5wcm90b3R5cGUuZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZD1mdW5jdGlvbigpe3JldHVybiBrVC5yZXNvbHZlKDA9PT10aGlzLl9uLmxlbmd0aD8tMTp0aGlzLnNzLTEpfSxpQy5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzPWZ1bmN0aW9uKHQpe3JldHVybiBrVC5yZXNvbHZlKHRoaXMuX24uc2xpY2UoKSl9LGlDLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj1uZXcgQlMoZSwwKSxlPW5ldyBCUyhlLE51bWJlci5QT1NJVElWRV9JTkZJTklUWSksaT1bXTtyZXR1cm4gdGhpcy5ycy5mb3JFYWNoSW5SYW5nZShbcixlXSxmdW5jdGlvbih0KXt0PW4ub3ModC5ucyk7aS5wdXNoKHQpfSksa1QucmVzb2x2ZShpKX0saUMucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj1uZXcgYUkoZGIpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9bmV3IEJTKHQsMCksdD1uZXcgQlModCxOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO24ucnMuZm9yRWFjaEluUmFuZ2UoW2UsdF0sZnVuY3Rpb24odCl7cj1yLmFkZCh0Lm5zKX0pfSksa1QucmVzb2x2ZSh0aGlzLnVzKHIpKX0saUMucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5PWZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5wYXRoLHI9bi5sZW5ndGgrMSxlPW47SGIuaXNEb2N1bWVudEtleShlKXx8KGU9ZS5jaGlsZChcIlwiKSk7dmFyIGU9bmV3IEJTKG5ldyBIYihlKSwwKSxpPW5ldyBhSShkYik7cmV0dXJuIHRoaXMucnMuZm9yRWFjaFdoaWxlKGZ1bmN0aW9uKHQpe3ZhciBlPXQua2V5LnBhdGg7cmV0dXJuISFuLmlzUHJlZml4T2YoZSkmJihlLmxlbmd0aD09PXImJihpPWkuYWRkKHQubnMpKSwhMCl9LGUpLGtULnJlc29sdmUodGhpcy51cyhpKSl9LGlDLnByb3RvdHlwZS51cz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49W107cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXt0PWUub3ModCk7bnVsbCE9PXQmJm4ucHVzaCh0KX0pLG59LGlDLnByb3RvdHlwZS5yZW1vdmVNdXRhdGlvbkJhdGNoPWZ1bmN0aW9uKG4scil7dmFyIGk9dGhpcztsYigwPT09dGhpcy5ocyhyLmJhdGNoSWQsXCJyZW1vdmVkXCIpKSx0aGlzLl9uLnNoaWZ0KCk7dmFyIG89dGhpcy5ycztyZXR1cm4ga1QuZm9yRWFjaChyLm11dGF0aW9ucyxmdW5jdGlvbih0KXt2YXIgZT1uZXcgQlModC5rZXksci5iYXRjaElkKTtyZXR1cm4gbz1vLmRlbGV0ZShlKSxpLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKG4sdC5rZXkpfSkubmV4dChmdW5jdGlvbigpe2kucnM9b30pfSxpQy5wcm90b3R5cGUuR3Q9ZnVuY3Rpb24odCl7fSxpQy5wcm90b3R5cGUuY29udGFpbnNLZXk9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgQlMoZSwwKSxuPXRoaXMucnMuZmlyc3RBZnRlck9yRXF1YWwobik7cmV0dXJuIGtULnJlc29sdmUoZS5pc0VxdWFsKG4mJm4ua2V5KSl9LGlDLnByb3RvdHlwZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjaz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbi5sZW5ndGgsa1QucmVzb2x2ZSgpfSxpQy5wcm90b3R5cGUuaHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jcyh0KX0saUMucHJvdG90eXBlLmNzPWZ1bmN0aW9uKHQpe3JldHVybiAwPT09dGhpcy5fbi5sZW5ndGg/MDp0LXRoaXMuX25bMF0uYmF0Y2hJZH0saUMucHJvdG90eXBlLm9zPWZ1bmN0aW9uKHQpe3Q9dGhpcy5jcyh0KTtyZXR1cm4gdDwwfHx0Pj10aGlzLl9uLmxlbmd0aD9udWxsOnRoaXMuX25bdF19LGlDKSxXUz0ockMucHJvdG90eXBlLmFkZEVudHJ5PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1lLmtleSxpPXRoaXMuZG9jcy5nZXQociksbz1pP2kuc2l6ZTowLGk9dGhpcy5scyhlKTtyZXR1cm4gdGhpcy5kb2NzPXRoaXMuZG9jcy5pbnNlcnQocix7ZG9jdW1lbnQ6ZS5jbG9uZSgpLHNpemU6aSxyZWFkVGltZTpufSksdGhpcy5zaXplKz1pLW8sdGhpcy5VdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LHIucGF0aC5wb3BMYXN0KCkpfSxyQy5wcm90b3R5cGUucmVtb3ZlRW50cnk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kb2NzLmdldCh0KTtlJiYodGhpcy5kb2NzPXRoaXMuZG9jcy5yZW1vdmUodCksdGhpcy5zaXplLT1lLnNpemUpfSxyQy5wcm90b3R5cGUuZ2V0RW50cnk9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmRvY3MuZ2V0KGUpO3JldHVybiBrVC5yZXNvbHZlKG4/bi5kb2N1bWVudC5jbG9uZSgpOnNfLm5ld0ludmFsaWREb2N1bWVudChlKSl9LHJDLnByb3RvdHlwZS5nZXRFbnRyaWVzPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPXVJO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9bi5kb2NzLmdldCh0KTtyPXIuaW5zZXJ0KHQsZT9lLmRvY3VtZW50LmNsb25lKCk6c18ubmV3SW52YWxpZERvY3VtZW50KHQpKX0pLGtULnJlc29sdmUocil9LHJDLnByb3RvdHlwZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5PWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9dUksaT1uZXcgSGIoZS5wYXRoLmNoaWxkKFwiXCIpKSxvPXRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20oaSk7by5oYXNOZXh0KCk7KXt2YXIgYT1vLmdldE5leHQoKSxzPWEua2V5LHU9YS52YWx1ZSxhPXUuZG9jdW1lbnQsdT11LnJlYWRUaW1lO2lmKCFlLnBhdGguaXNQcmVmaXhPZihzLnBhdGgpKWJyZWFrO3UuY29tcGFyZVRvKG4pPD0wfHxpdyhlLGEpJiYocj1yLmluc2VydChhLmtleSxhLmNsb25lKCkpKX1yZXR1cm4ga1QucmVzb2x2ZShyKX0sckMucHJvdG90eXBlLmZzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGtULmZvckVhY2godGhpcy5kb2NzLGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfSl9LHJDLnByb3RvdHlwZS5uZXdDaGFuZ2VCdWZmZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBIUyh0aGlzKX0sckMucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIGtULnJlc29sdmUodGhpcy5zaXplKX0sckMpLEhTPShYaShuQyxqUz1HKSxuQy5wcm90b3R5cGUuYXBwbHlDaGFuZ2VzPWZ1bmN0aW9uKG4pe3ZhciByPXRoaXMsaT1bXTtyZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCxlKXtlLmRvY3VtZW50LmlzVmFsaWREb2N1bWVudCgpP2kucHVzaChyLkllLmFkZEVudHJ5KG4sZS5kb2N1bWVudCxyLmdldFJlYWRUaW1lKHQpKSk6ci5JZS5yZW1vdmVFbnRyeSh0KX0pLGtULndhaXRGb3IoaSl9LG5DLnByb3RvdHlwZS5nZXRGcm9tQ2FjaGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5JZS5nZXRFbnRyeSh0LGUpfSxuQy5wcm90b3R5cGUuZ2V0QWxsRnJvbUNhY2hlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuSWUuZ2V0RW50cmllcyh0LGUpfSxuQyksR1M9KGVDLnByb3RvdHlwZS5mb3JFYWNoVGFyZ2V0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIHRoaXMuZHMuZm9yRWFjaChmdW5jdGlvbih0LGUpe3JldHVybiBuKGUpfSksa1QucmVzb2x2ZSgpfSxlQy5wcm90b3R5cGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbj1mdW5jdGlvbih0KXtyZXR1cm4ga1QucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pfSxlQy5wcm90b3R5cGUuZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyPWZ1bmN0aW9uKHQpe3JldHVybiBrVC5yZXNvbHZlKHRoaXMud3MpfSxlQy5wcm90b3R5cGUuYWxsb2NhdGVUYXJnZXRJZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQ9dGhpcy55cy5uZXh0KCksa1QucmVzb2x2ZSh0aGlzLmhpZ2hlc3RUYXJnZXRJZCl9LGVDLnByb3RvdHlwZS5zZXRUYXJnZXRzTWV0YWRhdGE9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuJiYodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uPW4pLGU+dGhpcy53cyYmKHRoaXMud3M9ZSksa1QucmVzb2x2ZSgpfSxlQy5wcm90b3R5cGUudGU9ZnVuY3Rpb24odCl7dGhpcy5kcy5zZXQodC50YXJnZXQsdCk7dmFyIGU9dC50YXJnZXRJZDtlPnRoaXMuaGlnaGVzdFRhcmdldElkJiYodGhpcy55cz1uZXcgREUoZSksdGhpcy5oaWdoZXN0VGFyZ2V0SWQ9ZSksdC5zZXF1ZW5jZU51bWJlcj50aGlzLndzJiYodGhpcy53cz10LnNlcXVlbmNlTnVtYmVyKX0sZUMucHJvdG90eXBlLmFkZFRhcmdldERhdGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZShlKSx0aGlzLnRhcmdldENvdW50Kz0xLGtULnJlc29sdmUoKX0sZUMucHJvdG90eXBlLnVwZGF0ZVRhcmdldERhdGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZShlKSxrVC5yZXNvbHZlKCl9LGVDLnByb3RvdHlwZS5yZW1vdmVUYXJnZXREYXRhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZHMuZGVsZXRlKGUudGFyZ2V0KSx0aGlzLl9zLlpuKGUudGFyZ2V0SWQpLC0tdGhpcy50YXJnZXRDb3VudCxrVC5yZXNvbHZlKCl9LGVDLnByb3RvdHlwZS5yZW1vdmVUYXJnZXRzPWZ1bmN0aW9uKG4scixpKXt2YXIgbz10aGlzLGE9MCxzPVtdO3JldHVybiB0aGlzLmRzLmZvckVhY2goZnVuY3Rpb24odCxlKXtlLnNlcXVlbmNlTnVtYmVyPD1yJiZudWxsPT09aS5nZXQoZS50YXJnZXRJZCkmJihvLmRzLmRlbGV0ZSh0KSxzLnB1c2goby5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChuLGUudGFyZ2V0SWQpKSxhKyspfSksa1Qud2FpdEZvcihzKS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIGF9KX0sZUMucHJvdG90eXBlLmdldFRhcmdldENvdW50PWZ1bmN0aW9uKHQpe3JldHVybiBrVC5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpfSxlQy5wcm90b3R5cGUuZ2V0VGFyZ2V0RGF0YT1mdW5jdGlvbih0LGUpe2U9dGhpcy5kcy5nZXQoZSl8fG51bGw7cmV0dXJuIGtULnJlc29sdmUoZSl9LGVDLnByb3RvdHlwZS5hZGRNYXRjaGluZ0tleXM9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLl9zLkpuKGUsbiksa1QucmVzb2x2ZSgpfSxlQy5wcm90b3R5cGUucmVtb3ZlTWF0Y2hpbmdLZXlzPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9zLlhuKHQsbik7dmFyIHI9dGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSxpPVtdO3JldHVybiByJiZ0LmZvckVhY2goZnVuY3Rpb24odCl7aS5wdXNoKHIubWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSx0KSl9KSxrVC53YWl0Rm9yKGkpfSxlQy5wcm90b3R5cGUucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fcy5abihlKSxrVC5yZXNvbHZlKCl9LGVDLnByb3RvdHlwZS5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZD1mdW5jdGlvbih0LGUpe2U9dGhpcy5fcy5lcyhlKTtyZXR1cm4ga1QucmVzb2x2ZShlKX0sZUMucHJvdG90eXBlLmNvbnRhaW5zS2V5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGtULnJlc29sdmUodGhpcy5fcy5jb250YWluc0tleShlKSl9LGVDKSx6Uz0odEMucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfSx0Qy5wcm90b3R5cGUuc2h1dGRvd249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54ZT0hMSxQcm9taXNlLnJlc29sdmUoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRDLnByb3RvdHlwZSxcInN0YXJ0ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueGV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdEMucHJvdG90eXBlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyPWZ1bmN0aW9uKCl7fSx0Qy5wcm90b3R5cGUuc2V0TmV0d29ya0VuYWJsZWQ9ZnVuY3Rpb24oKXt9LHRDLnByb3RvdHlwZS5nZXRJbmRleE1hbmFnZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5VdH0sdEMucHJvdG90eXBlLmdldE11dGF0aW9uUXVldWU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nc1t0LnRvS2V5KCldO3JldHVybiBlfHwoZT1uZXcgS1ModGhpcy5VdCx0aGlzLnJlZmVyZW5jZURlbGVnYXRlKSx0aGlzLmdzW3QudG9LZXkoKV09ZSksZX0sdEMucHJvdG90eXBlLmdldFRhcmdldENhY2hlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucWV9LHRDLnByb3RvdHlwZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuVWV9LHRDLnByb3RvdHlwZS5nZXRCdW5kbGVDYWNoZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLlFlfSx0Qy5wcm90b3R5cGUucnVuVHJhbnNhY3Rpb249ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7YWIoXCJNZW1vcnlQZXJzaXN0ZW5jZVwiLFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsdCk7dmFyIGk9bmV3IFFTKHRoaXMuTmUubmV4dCgpKTtyZXR1cm4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5FcygpLG4oaSkubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gci5yZWZlcmVuY2VEZWxlZ2F0ZS5UcyhpKS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX0pLnRvUHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGkucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksdH0pfSx0Qy5wcm90b3R5cGUuSXM9ZnVuY3Rpb24oZSxuKXtyZXR1cm4ga1Qub3IoT2JqZWN0LnZhbHVlcyh0aGlzLmdzKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuY29udGFpbnNLZXkoZSxuKX19KSl9LHRDKSxRUz0oWGkoWlMsVVM9U24pLFpTKSxZUz0oJFMuYnM9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyAkUyh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KCRTLnByb3RvdHlwZSxcInZzXCIse2dldDpmdW5jdGlvbigpe2lmKHRoaXMuUnMpcmV0dXJuIHRoaXMuUnM7dGhyb3cgaGIoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSwkUy5wcm90b3R5cGUuYWRkUmVmZXJlbmNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5Bcy5hZGRSZWZlcmVuY2UobixlKSx0aGlzLnZzLmRlbGV0ZShuLnRvU3RyaW5nKCkpLGtULnJlc29sdmUoKX0sJFMucHJvdG90eXBlLnJlbW92ZVJlZmVyZW5jZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMuQXMucmVtb3ZlUmVmZXJlbmNlKG4sZSksdGhpcy52cy5hZGQobi50b1N0cmluZygpKSxrVC5yZXNvbHZlKCl9LCRTLnByb3RvdHlwZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnZzLmFkZChlLnRvU3RyaW5nKCkpLGtULnJlc29sdmUoKX0sJFMucHJvdG90eXBlLnJlbW92ZVRhcmdldD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5Bcy5abihlLnRhcmdldElkKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBuLnZzLmFkZCh0LnRvU3RyaW5nKCkpfSk7dmFyIHI9dGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO3JldHVybiByLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsZS50YXJnZXRJZCkubmV4dChmdW5jdGlvbih0KXt0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG4udnMuYWRkKHQudG9TdHJpbmcoKSl9KX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gci5yZW1vdmVUYXJnZXREYXRhKHQsZSl9KX0sJFMucHJvdG90eXBlLkVzPWZ1bmN0aW9uKCl7dGhpcy5Scz1uZXcgU2V0fSwkUy5wcm90b3R5cGUuVHM9ZnVuY3Rpb24obil7dmFyIHI9dGhpcyxpPXRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpO3JldHVybiBrVC5mb3JFYWNoKHRoaXMudnMsZnVuY3Rpb24odCl7dmFyIGU9SGIuZnJvbVBhdGgodCk7cmV0dXJuIHIuUHMobixlKS5uZXh0KGZ1bmN0aW9uKHQpe3R8fGkucmVtb3ZlRW50cnkoZSl9KX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gci5Scz1udWxsLGkuYXBwbHkobil9KX0sJFMucHJvdG90eXBlLnVwZGF0ZUxpbWJvRG9jdW1lbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLlBzKHQsZSkubmV4dChmdW5jdGlvbih0KXt0P24udnMuZGVsZXRlKGUudG9TdHJpbmcoKSk6bi52cy5hZGQoZS50b1N0cmluZygpKX0pfSwkUy5wcm90b3R5cGUucHM9ZnVuY3Rpb24odCl7cmV0dXJuIDB9LCRTLnByb3RvdHlwZS5Qcz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuIGtULm9yKFtmdW5jdGlvbigpe3JldHVybiBrVC5yZXNvbHZlKG4uQXMuY29udGFpbnNLZXkoZSkpfSxmdW5jdGlvbigpe3JldHVybiBuLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodCxlKX0sZnVuY3Rpb24oKXtyZXR1cm4gbi5wZXJzaXN0ZW5jZS5Jcyh0LGUpfV0pfSwkUyksWFM9KEpTLnByb3RvdHlwZS5pc0F1dGhlbnRpY2F0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy51aWR9LEpTLnByb3RvdHlwZS50b0tleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQXV0aGVudGljYXRlZCgpP1widWlkOlwiK3RoaXMudWlkOlwiYW5vbnltb3VzLXVzZXJcIn0sSlMucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHQudWlkPT09dGhpcy51aWR9LEpTKTtmdW5jdGlvbiBKUyh0KXt0aGlzLnVpZD10fWZ1bmN0aW9uICRTKHQpe3RoaXMucGVyc2lzdGVuY2U9dCx0aGlzLkFzPW5ldyBWUyx0aGlzLlJzPW51bGx9ZnVuY3Rpb24gWlModCl7dmFyIGU9dGhpcztyZXR1cm4oZT1VUy5jYWxsKHRoaXMpfHx0aGlzKS5jdXJyZW50U2VxdWVuY2VOdW1iZXI9dCxlfWZ1bmN0aW9uIHRDKHQsZSl7dmFyIG49dGhpczt0aGlzLmdzPXt9LHRoaXMuTmU9bmV3ICRtKDApLHRoaXMueGU9ITEsdGhpcy54ZT0hMCx0aGlzLnJlZmVyZW5jZURlbGVnYXRlPXQodGhpcyksdGhpcy5xZT1uZXcgR1ModGhpcyksdGhpcy5VdD1uZXcgdkUsdGhpcy5VZT0odD10aGlzLlV0LG5ldyBXUyh0LGZ1bmN0aW9uKHQpe3JldHVybiBuLnJlZmVyZW5jZURlbGVnYXRlLnBzKHQpfSkpLHRoaXMuUj1uZXcgSlQoZSksdGhpcy5RZT1uZXcgcVModGhpcy5SKX1mdW5jdGlvbiBlQyh0KXt0aGlzLnBlcnNpc3RlbmNlPXQsdGhpcy5kcz1uZXcgJEUobF8sZl8pLHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbj1tYi5taW4oKSx0aGlzLmhpZ2hlc3RUYXJnZXRJZD0wLHRoaXMud3M9MCx0aGlzLl9zPW5ldyBWUyx0aGlzLnRhcmdldENvdW50PTAsdGhpcy55cz1ERS5KdCgpfWZ1bmN0aW9uIG5DKHQpe3ZhciBlPXRoaXM7cmV0dXJuKGU9alMuY2FsbCh0aGlzKXx8dGhpcykuSWU9dCxlfWZ1bmN0aW9uIHJDKHQsZSl7dGhpcy5VdD10LHRoaXMubHM9ZSx0aGlzLmRvY3M9bmV3IFp3KEhiLmNvbXBhcmF0b3IpLHRoaXMuc2l6ZT0wfWZ1bmN0aW9uIGlDKHQsZSl7dGhpcy5VdD10LHRoaXMucmVmZXJlbmNlRGVsZWdhdGU9ZSx0aGlzLl9uPVtdLHRoaXMuc3M9MSx0aGlzLnJzPW5ldyBhSShCUy5Hbil9ZnVuY3Rpb24gb0ModCxlKXt0aGlzLmtleT10LHRoaXMubnM9ZX1mdW5jdGlvbiBhQygpe3RoaXMuV249bmV3IGFJKEJTLkduKSx0aGlzLnpuPW5ldyBhSShCUy5Ibil9ZnVuY3Rpb24gc0ModCl7dGhpcy5SPXQsdGhpcy5Lbj1uZXcgTWFwLHRoaXMuam49bmV3IE1hcH1mdW5jdGlvbiB1Qyh0LGUpe3JldHVyblwiZmlyZXN0b3JlX2NsaWVudHNfXCIrdCtcIl9cIitlfWZ1bmN0aW9uIGNDKHQsZSxuKXtuPVwiZmlyZXN0b3JlX211dGF0aW9uc19cIit0K1wiX1wiK247cmV0dXJuIGUuaXNBdXRoZW50aWNhdGVkKCkmJihuKz1cIl9cIitlLnVpZCksbn1mdW5jdGlvbiBoQyh0LGUpe3JldHVyblwiZmlyZXN0b3JlX3RhcmdldHNfXCIrdCtcIl9cIitlfVhTLlVOQVVUSEVOVElDQVRFRD1uZXcgWFMobnVsbCksWFMuR09PR0xFX0NSRURFTlRJQUxTPW5ldyBYUyhcImdvb2dsZS1jcmVkZW50aWFscy11aWRcIiksWFMuRklSU1RfUEFSVFk9bmV3IFhTKFwiZmlyc3QtcGFydHktdWlkXCIpO3ZhciBsQyxmQz0oTEMuVnM9ZnVuY3Rpb24odCxlLG4pe3ZhciByLGk9SlNPTi5wYXJzZShuKSxvPVwib2JqZWN0XCI9PXR5cGVvZiBpJiYtMSE9PVtcInBlbmRpbmdcIixcImFja25vd2xlZGdlZFwiLFwicmVqZWN0ZWRcIl0uaW5kZXhPZihpLnN0YXRlKSYmKHZvaWQgMD09PWkuZXJyb3J8fFwib2JqZWN0XCI9PXR5cGVvZiBpLmVycm9yKTtyZXR1cm4gbyYmaS5lcnJvciYmKG89XCJzdHJpbmdcIj09dHlwZW9mIGkuZXJyb3IubWVzc2FnZSYmXCJzdHJpbmdcIj09dHlwZW9mIGkuZXJyb3IuY29kZSkmJihyPW5ldyBuYihpLmVycm9yLmNvZGUsaS5lcnJvci5tZXNzYWdlKSksbz9uZXcgTEModCxlLGkuc3RhdGUscik6KHNiKFwiU2hhcmVkQ2xpZW50U3RhdGVcIixcIkZhaWxlZCB0byBwYXJzZSBtdXRhdGlvbiBzdGF0ZSBmb3IgSUQgJ1wiK2UrXCInOiBcIituKSxudWxsKX0sTEMucHJvdG90eXBlLlNzPWZ1bmN0aW9uKCl7dmFyIHQ9e3N0YXRlOnRoaXMuc3RhdGUsdXBkYXRlVGltZU1zOkRhdGUubm93KCl9O3JldHVybiB0aGlzLmVycm9yJiYodC5lcnJvcj17Y29kZTp0aGlzLmVycm9yLmNvZGUsbWVzc2FnZTp0aGlzLmVycm9yLm1lc3NhZ2V9KSxKU09OLnN0cmluZ2lmeSh0KX0sTEMpLHBDPSh4Qy5Wcz1mdW5jdGlvbih0LGUpe3ZhciBuLHI9SlNPTi5wYXJzZShlKSxpPVwib2JqZWN0XCI9PXR5cGVvZiByJiYtMSE9PVtcIm5vdC1jdXJyZW50XCIsXCJjdXJyZW50XCIsXCJyZWplY3RlZFwiXS5pbmRleE9mKHIuc3RhdGUpJiYodm9pZCAwPT09ci5lcnJvcnx8XCJvYmplY3RcIj09dHlwZW9mIHIuZXJyb3IpO3JldHVybiBpJiZyLmVycm9yJiYoaT1cInN0cmluZ1wiPT10eXBlb2Ygci5lcnJvci5tZXNzYWdlJiZcInN0cmluZ1wiPT10eXBlb2Ygci5lcnJvci5jb2RlKSYmKG49bmV3IG5iKHIuZXJyb3IuY29kZSxyLmVycm9yLm1lc3NhZ2UpKSxpP25ldyB4Qyh0LHIuc3RhdGUsbik6KHNiKFwiU2hhcmVkQ2xpZW50U3RhdGVcIixcIkZhaWxlZCB0byBwYXJzZSB0YXJnZXQgc3RhdGUgZm9yIElEICdcIit0K1wiJzogXCIrZSksbnVsbCl9LHhDLnByb3RvdHlwZS5Tcz1mdW5jdGlvbigpe3ZhciB0PXtzdGF0ZTp0aGlzLnN0YXRlLHVwZGF0ZVRpbWVNczpEYXRlLm5vdygpfTtyZXR1cm4gdGhpcy5lcnJvciYmKHQuZXJyb3I9e2NvZGU6dGhpcy5lcnJvci5jb2RlLG1lc3NhZ2U6dGhpcy5lcnJvci5tZXNzYWdlfSksSlNPTi5zdHJpbmdpZnkodCl9LHhDKSxkQz0oREMuVnM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49SlNPTi5wYXJzZShlKSxyPVwib2JqZWN0XCI9PXR5cGVvZiBuJiZuLmFjdGl2ZVRhcmdldElkcyBpbnN0YW5jZW9mIEFycmF5LGk9dkksbz0wO3ImJm88bi5hY3RpdmVUYXJnZXRJZHMubGVuZ3RoOysrbylyPVdiKG4uYWN0aXZlVGFyZ2V0SWRzW29dKSxpPWkuYWRkKG4uYWN0aXZlVGFyZ2V0SWRzW29dKTtyZXR1cm4gcj9uZXcgREModCxpKTooc2IoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLFwiRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnXCIrdCtcIic6IFwiK2UpLG51bGwpfSxEQyksdkM9KE9DLlZzPWZ1bmN0aW9uKHQpe3ZhciBlPUpTT04ucGFyc2UodCk7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJi0xIT09W1wiVW5rbm93blwiLFwiT25saW5lXCIsXCJPZmZsaW5lXCJdLmluZGV4T2YoZS5vbmxpbmVTdGF0ZSkmJlwic3RyaW5nXCI9PXR5cGVvZiBlLmNsaWVudElkP25ldyBPQyhlLmNsaWVudElkLGUub25saW5lU3RhdGUpOihzYihcIlNoYXJlZENsaWVudFN0YXRlXCIsXCJGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiBcIit0KSxudWxsKX0sT0MpLGdDPShQQy5wcm90b3R5cGUuRHM9ZnVuY3Rpb24odCl7dGhpcy5hY3RpdmVUYXJnZXRJZHM9dGhpcy5hY3RpdmVUYXJnZXRJZHMuYWRkKHQpfSxQQy5wcm90b3R5cGUuQ3M9ZnVuY3Rpb24odCl7dGhpcy5hY3RpdmVUYXJnZXRJZHM9dGhpcy5hY3RpdmVUYXJnZXRJZHMuZGVsZXRlKHQpfSxQQy5wcm90b3R5cGUuU3M9ZnVuY3Rpb24oKXt2YXIgdD17YWN0aXZlVGFyZ2V0SWRzOnRoaXMuYWN0aXZlVGFyZ2V0SWRzLnRvQXJyYXkoKSx1cGRhdGVUaW1lTXM6RGF0ZS5ub3coKX07cmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpfSxQQykseUM9KFJDLnl0PWZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fCF0LmxvY2FsU3RvcmFnZSl9LFJDLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxvLGEscyx1LGMsaCxsPXRoaXM7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLnN5bmNFbmdpbmUuZm4oKV07Y2FzZSAxOmZvcihhPXQuc2VudCgpLGU9MCxuPWE7ZTxuLmxlbmd0aDtlKyspKHI9bltlXSkhPT10aGlzLk5zJiYoaT10aGlzLmdldEl0ZW0odUModGhpcy5wZXJzaXN0ZW5jZUtleSxyKSkpJiYobz1kQy5WcyhyLGkpKSYmKHRoaXMua3M9dGhpcy5rcy5pbnNlcnQoby5jbGllbnRJZCxvKSk7Zm9yKHRoaXMuS3MoKSwoYT10aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLlVzKSkmJihzPXRoaXMuanMoYSkpJiZ0aGlzLldzKHMpLHU9MCxjPXRoaXMuT3M7dTxjLmxlbmd0aDt1KyspaD1jW3VdLHRoaXMuRnMoaCk7cmV0dXJuIHRoaXMuT3M9W10sdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGwuc2h1dGRvd24oKX0pLHRoaXMuc3RhcnRlZD0hMCxbMl19fSl9KX0sUkMucHJvdG90eXBlLndyaXRlU2VxdWVuY2VOdW1iZXI9ZnVuY3Rpb24odCl7dGhpcy5zZXRJdGVtKHRoaXMuTXMsSlNPTi5zdHJpbmdpZnkodCkpfSxSQy5wcm90b3R5cGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuR3ModGhpcy5rcyl9LFJDLnByb3RvdHlwZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0PWZ1bmN0aW9uKG4pe3ZhciByPSExO3JldHVybiB0aGlzLmtzLmZvckVhY2goZnVuY3Rpb24odCxlKXtlLmFjdGl2ZVRhcmdldElkcy5oYXMobikmJihyPSEwKX0pLHJ9LFJDLnByb3RvdHlwZS5hZGRQZW5kaW5nTXV0YXRpb249ZnVuY3Rpb24odCl7dGhpcy56cyh0LFwicGVuZGluZ1wiKX0sUkMucHJvdG90eXBlLnVwZGF0ZU11dGF0aW9uU3RhdGU9ZnVuY3Rpb24odCxlLG4pe3RoaXMuenModCxlLG4pLHRoaXMuSHModCl9LFJDLnByb3RvdHlwZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlLG49XCJub3QtY3VycmVudFwiO3JldHVybiB0aGlzLmlzQWN0aXZlUXVlcnlUYXJnZXQodCkmJighKGU9dGhpcy5zdG9yYWdlLmdldEl0ZW0oaEModGhpcy5wZXJzaXN0ZW5jZUtleSx0KSkpfHwoZT1wQy5Wcyh0LGUpKSYmKG49ZS5zdGF0ZSkpLHRoaXMuSnMuRHModCksdGhpcy5LcygpLG59LFJDLnByb3RvdHlwZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0PWZ1bmN0aW9uKHQpe3RoaXMuSnMuQ3ModCksdGhpcy5LcygpfSxSQy5wcm90b3R5cGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkpzLmFjdGl2ZVRhcmdldElkcy5oYXModCl9LFJDLnByb3RvdHlwZS5jbGVhclF1ZXJ5U3RhdGU9ZnVuY3Rpb24odCl7dGhpcy5yZW1vdmVJdGVtKGhDKHRoaXMucGVyc2lzdGVuY2VLZXksdCkpfSxSQy5wcm90b3R5cGUudXBkYXRlUXVlcnlTdGF0ZT1mdW5jdGlvbih0LGUsbil7dGhpcy5Zcyh0LGUsbil9LFJDLnByb3RvdHlwZS5oYW5kbGVVc2VyQ2hhbmdlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO2UuZm9yRWFjaChmdW5jdGlvbih0KXtyLkhzKHQpfSksdGhpcy5jdXJyZW50VXNlcj10LG4uZm9yRWFjaChmdW5jdGlvbih0KXtyLmFkZFBlbmRpbmdNdXRhdGlvbih0KX0pfSxSQy5wcm90b3R5cGUuc2V0T25saW5lU3RhdGU9ZnVuY3Rpb24odCl7dGhpcy5Ycyh0KX0sUkMucHJvdG90eXBlLm5vdGlmeUJ1bmRsZUxvYWRlZD1mdW5jdGlvbigpe3RoaXMuWnMoKX0sUkMucHJvdG90eXBlLnNodXRkb3duPWZ1bmN0aW9uKCl7dGhpcy5zdGFydGVkJiYodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIix0aGlzLnhzKSx0aGlzLnJlbW92ZUl0ZW0odGhpcy4kcyksdGhpcy5zdGFydGVkPSExKX0sUkMucHJvdG90eXBlLmdldEl0ZW09ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7cmV0dXJuIGFiKFwiU2hhcmVkQ2xpZW50U3RhdGVcIixcIlJFQURcIix0LGUpLGV9LFJDLnByb3RvdHlwZS5zZXRJdGVtPWZ1bmN0aW9uKHQsZSl7YWIoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLFwiU0VUXCIsdCxlKSx0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0LGUpfSxSQy5wcm90b3R5cGUucmVtb3ZlSXRlbT1mdW5jdGlvbih0KXthYihcIlNoYXJlZENsaWVudFN0YXRlXCIsXCJSRU1PVkVcIix0KSx0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbSh0KX0sUkMucHJvdG90eXBlLkZzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbz10O28uc3RvcmFnZUFyZWE9PT10aGlzLnN0b3JhZ2UmJihhYihcIlNoYXJlZENsaWVudFN0YXRlXCIsXCJFVkVOVFwiLG8ua2V5LG8ubmV3VmFsdWUpLG8ua2V5IT09dGhpcy4kcz90aGlzLlNlLmVucXVldWVSZXRyeWFibGUoZnVuY3Rpb24oKXtyZXR1cm4gJGkoZSx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyLGk7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7aWYodGhpcy5zdGFydGVkKXtpZihudWxsIT09by5rZXkpaWYodGhpcy5Mcy50ZXN0KG8ua2V5KSl7aWYobnVsbD09by5uZXdWYWx1ZSlyZXR1cm4gZT10aGlzLnRpKG8ua2V5KSxbMix0aGlzLmVpKGUsbnVsbCldO2lmKGU9dGhpcy5uaShvLmtleSxvLm5ld1ZhbHVlKSlyZXR1cm5bMix0aGlzLmVpKGUuY2xpZW50SWQsZSldfWVsc2UgaWYodGhpcy5Ccy50ZXN0KG8ua2V5KSl7aWYobnVsbCE9PW8ubmV3VmFsdWUmJihuPXRoaXMuc2koby5rZXksby5uZXdWYWx1ZSkpKXJldHVyblsyLHRoaXMuaWkobildfWVsc2UgaWYodGhpcy5xcy50ZXN0KG8ua2V5KSl7aWYobnVsbCE9PW8ubmV3VmFsdWUmJihyPXRoaXMucmkoby5rZXksby5uZXdWYWx1ZSkpKXJldHVyblsyLHRoaXMub2kocildfWVsc2UgaWYoby5rZXk9PT10aGlzLlVzKXtpZihudWxsIT09by5uZXdWYWx1ZSYmKGk9dGhpcy5qcyhvLm5ld1ZhbHVlKSkpcmV0dXJuWzIsdGhpcy5XcyhpKV19ZWxzZSBpZihvLmtleT09PXRoaXMuTXMpKGk9ZnVuY3Rpb24odCl7dmFyIGU9JG0ubztpZihudWxsIT10KXRyeXt2YXIgbj1KU09OLnBhcnNlKHQpO2xiKFwibnVtYmVyXCI9PXR5cGVvZiBuKSxlPW59Y2F0Y2godCl7c2IoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLFwiRmFpbGVkIHRvIHJlYWQgc2VxdWVuY2UgbnVtYmVyIGZyb20gV2ViU3RvcmFnZVwiLHQpfXJldHVybiBlfShvLm5ld1ZhbHVlKSkhPT0kbS5vJiZ0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlcihpKTtlbHNlIGlmKG8ua2V5PT09dGhpcy5RcylyZXR1cm5bMix0aGlzLnN5bmNFbmdpbmUuY2koKV19ZWxzZSB0aGlzLk9zLnB1c2gobyk7cmV0dXJuWzJdfSl9KX0pOnNiKFwiUmVjZWl2ZWQgV2ViU3RvcmFnZSBub3RpZmljYXRpb24gZm9yIGxvY2FsIGNoYW5nZS4gQW5vdGhlciBjbGllbnQgbWlnaHQgaGF2ZSBnYXJiYWdlLWNvbGxlY3RlZCBvdXIgc3RhdGVcIikpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoUkMucHJvdG90eXBlLFwiSnNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua3MuZ2V0KHRoaXMuTnMpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLFJDLnByb3RvdHlwZS5Lcz1mdW5jdGlvbigpe3RoaXMuc2V0SXRlbSh0aGlzLiRzLHRoaXMuSnMuU3MoKSl9LFJDLnByb3RvdHlwZS56cz1mdW5jdGlvbih0LGUsbil7bj1uZXcgZkModGhpcy5jdXJyZW50VXNlcix0LGUsbiksdD1jQyh0aGlzLnBlcnNpc3RlbmNlS2V5LHRoaXMuY3VycmVudFVzZXIsdCk7dGhpcy5zZXRJdGVtKHQsbi5TcygpKX0sUkMucHJvdG90eXBlLkhzPWZ1bmN0aW9uKHQpe3Q9Y0ModGhpcy5wZXJzaXN0ZW5jZUtleSx0aGlzLmN1cnJlbnRVc2VyLHQpO3RoaXMucmVtb3ZlSXRlbSh0KX0sUkMucHJvdG90eXBlLlhzPWZ1bmN0aW9uKHQpe3Q9e2NsaWVudElkOnRoaXMuTnMsb25saW5lU3RhdGU6dH07dGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy5VcyxKU09OLnN0cmluZ2lmeSh0KSl9LFJDLnByb3RvdHlwZS5Zcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9aEModGhpcy5wZXJzaXN0ZW5jZUtleSx0KSxuPW5ldyBwQyh0LGUsbik7dGhpcy5zZXRJdGVtKHIsbi5TcygpKX0sUkMucHJvdG90eXBlLlpzPWZ1bmN0aW9uKCl7dGhpcy5zZXRJdGVtKHRoaXMuUXMsXCJ2YWx1ZS1ub3QtdXNlZFwiKX0sUkMucHJvdG90eXBlLnRpPWZ1bmN0aW9uKHQpe3Q9dGhpcy5Mcy5leGVjKHQpO3JldHVybiB0P3RbMV06bnVsbH0sUkMucHJvdG90eXBlLm5pPWZ1bmN0aW9uKHQsZSl7dD10aGlzLnRpKHQpO3JldHVybiBkQy5Wcyh0LGUpfSxSQy5wcm90b3R5cGUuc2k9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLkJzLmV4ZWModCksdD1OdW1iZXIoblsxXSksbj12b2lkIDAhPT1uWzJdP25bMl06bnVsbDtyZXR1cm4gZkMuVnMobmV3IFhTKG4pLHQsZSl9LFJDLnByb3RvdHlwZS5yaT1mdW5jdGlvbih0LGUpe3Q9dGhpcy5xcy5leGVjKHQpLHQ9TnVtYmVyKHRbMV0pO3JldHVybiBwQy5Wcyh0LGUpfSxSQy5wcm90b3R5cGUuanM9ZnVuY3Rpb24odCl7cmV0dXJuIHZDLlZzKHQpfSxSQy5wcm90b3R5cGUuaWk9ZnVuY3Rpb24oZSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3JldHVybiBlLnVzZXIudWlkPT09dGhpcy5jdXJyZW50VXNlci51aWQ/WzIsdGhpcy5zeW5jRW5naW5lLnVpKGUuYmF0Y2hJZCxlLnN0YXRlLGUuZXJyb3IpXTooYWIoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLFwiSWdub3JpbmcgbXV0YXRpb24gZm9yIG5vbi1hY3RpdmUgdXNlciBcIitlLnVzZXIudWlkKSxbMl0pfSl9KX0sUkMucHJvdG90eXBlLm9pPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN5bmNFbmdpbmUuYWkodC50YXJnZXRJZCx0LnN0YXRlLHQuZXJyb3IpfSxSQy5wcm90b3R5cGUuZWk9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9ZT90aGlzLmtzLmluc2VydCh0LGUpOnRoaXMua3MucmVtb3ZlKHQpLGk9dGhpcy5Hcyh0aGlzLmtzKSxvPXRoaXMuR3MociksYT1bXSxzPVtdO3JldHVybiBvLmZvckVhY2goZnVuY3Rpb24odCl7aS5oYXModCl8fGEucHVzaCh0KX0pLGkuZm9yRWFjaChmdW5jdGlvbih0KXtvLmhhcyh0KXx8cy5wdXNoKHQpfSksdGhpcy5zeW5jRW5naW5lLmhpKGEscykudGhlbihmdW5jdGlvbigpe24ua3M9cn0pfSxSQy5wcm90b3R5cGUuV3M9ZnVuY3Rpb24odCl7dGhpcy5rcy5nZXQodC5jbGllbnRJZCkmJnRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQub25saW5lU3RhdGUpfSxSQy5wcm90b3R5cGUuR3M9ZnVuY3Rpb24odCl7dmFyIG49dkk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0LGUpe249bi51bmlvbldpdGgoZS5hY3RpdmVUYXJnZXRJZHMpfSksbn0sUkMpLG1DPShBQy5wcm90b3R5cGUuYWRkUGVuZGluZ011dGF0aW9uPWZ1bmN0aW9uKHQpe30sQUMucHJvdG90eXBlLnVwZGF0ZU11dGF0aW9uU3RhdGU9ZnVuY3Rpb24odCxlLG4pe30sQUMucHJvdG90eXBlLmFkZExvY2FsUXVlcnlUYXJnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubGkuRHModCksdGhpcy5maVt0XXx8XCJub3QtY3VycmVudFwifSxBQy5wcm90b3R5cGUudXBkYXRlUXVlcnlTdGF0ZT1mdW5jdGlvbih0LGUsbil7dGhpcy5maVt0XT1lfSxBQy5wcm90b3R5cGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldD1mdW5jdGlvbih0KXt0aGlzLmxpLkNzKHQpfSxBQy5wcm90b3R5cGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxpLmFjdGl2ZVRhcmdldElkcy5oYXModCl9LEFDLnByb3RvdHlwZS5jbGVhclF1ZXJ5U3RhdGU9ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuZmlbdF19LEFDLnByb3RvdHlwZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saS5hY3RpdmVUYXJnZXRJZHN9LEFDLnByb3RvdHlwZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxpLmFjdGl2ZVRhcmdldElkcy5oYXModCl9LEFDLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxpPW5ldyBnQyxQcm9taXNlLnJlc29sdmUoKX0sQUMucHJvdG90eXBlLmhhbmRsZVVzZXJDaGFuZ2U9ZnVuY3Rpb24odCxlLG4pe30sQUMucHJvdG90eXBlLnNldE9ubGluZVN0YXRlPWZ1bmN0aW9uKHQpe30sQUMucHJvdG90eXBlLnNodXRkb3duPWZ1bmN0aW9uKCl7fSxBQy5wcm90b3R5cGUud3JpdGVTZXF1ZW5jZU51bWJlcj1mdW5jdGlvbih0KXt9LEFDLnByb3RvdHlwZS5ub3RpZnlCdW5kbGVMb2FkZWQ9ZnVuY3Rpb24oKXt9LEFDKSxiQz0oTkMucHJvdG90eXBlLmRpPWZ1bmN0aW9uKHQpe30sTkMucHJvdG90eXBlLnNodXRkb3duPWZ1bmN0aW9uKCl7fSxOQyksX0M9KGtDLnByb3RvdHlwZS5kaT1mdW5jdGlvbih0KXt0aGlzLmdpLnB1c2godCl9LGtDLnByb3RvdHlwZS5zaHV0ZG93bj1mdW5jdGlvbigpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsdGhpcy53aSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsdGhpcy5taSl9LGtDLnByb3RvdHlwZS5waT1mdW5jdGlvbigpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsdGhpcy53aSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsdGhpcy5taSl9LGtDLnByb3RvdHlwZS5faT1mdW5jdGlvbigpe2FiKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogQVZBSUxBQkxFXCIpO2Zvcih2YXIgdD0wLGU9dGhpcy5naTt0PGUubGVuZ3RoO3QrKykoMCxlW3RdKSgwKX0sa0MucHJvdG90eXBlLnlpPWZ1bmN0aW9uKCl7YWIoXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRVwiKTtmb3IodmFyIHQ9MCxlPXRoaXMuZ2k7dDxlLmxlbmd0aDt0KyspKDAsZVt0XSkoMSl9LGtDLnl0PWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmdm9pZCAwIT09d2luZG93LmFkZEV2ZW50TGlzdGVuZXImJnZvaWQgMCE9PXdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyfSxrQyksd0M9e0JhdGNoR2V0RG9jdW1lbnRzOlwiYmF0Y2hHZXRcIixDb21taXQ6XCJjb21taXRcIixSdW5RdWVyeTpcInJ1blF1ZXJ5XCJ9LElDPShDQy5wcm90b3R5cGUuSWk9ZnVuY3Rpb24odCl7dGhpcy5BaT10fSxDQy5wcm90b3R5cGUuUmk9ZnVuY3Rpb24odCl7dGhpcy5iaT10fSxDQy5wcm90b3R5cGUub25NZXNzYWdlPWZ1bmN0aW9uKHQpe3RoaXMudmk9dH0sQ0MucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5UaSgpfSxDQy5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0KXt0aGlzLkVpKHQpfSxDQy5wcm90b3R5cGUuUGk9ZnVuY3Rpb24oKXt0aGlzLkFpKCl9LENDLnByb3RvdHlwZS5WaT1mdW5jdGlvbih0KXt0aGlzLmJpKHQpfSxDQy5wcm90b3R5cGUuU2k9ZnVuY3Rpb24odCl7dGhpcy52aSh0KX0sQ0MpLFRDPShTQy5wcm90b3R5cGUuTmk9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9dGhpcy54aShlLHQpO2FiKFwiUmVzdENvbm5lY3Rpb25cIixcIlNlbmRpbmc6IFwiLGksbik7dD17fTtyZXR1cm4gdGhpcy5GaSh0LHIpLHRoaXMua2koZSxpLHQsbikudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gYWIoXCJSZXN0Q29ubmVjdGlvblwiLFwiUmVjZWl2ZWQ6IFwiLHQpLHR9LGZ1bmN0aW9uKHQpe3Rocm93IHViKFwiUmVzdENvbm5lY3Rpb25cIixlK1wiIGZhaWxlZCB3aXRoIGVycm9yOiBcIix0LFwidXJsOiBcIixpLFwicmVxdWVzdDpcIixuKSx0fSl9LFNDLnByb3RvdHlwZS5PaT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdGhpcy5OaSh0LGUsbixyKX0sU0MucHJvdG90eXBlLkZpPWZ1bmN0aW9uKHQsZSl7aWYodFtcIlgtR29vZy1BcGktQ2xpZW50XCJdPVwiZ2wtanMvIGZpcmUvOC41LjBcIix0W1wiQ29udGVudC1UeXBlXCJdPVwidGV4dC9wbGFpblwiLHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkJiYodFtcIlgtRmlyZWJhc2UtR01QSURcIl09dGhpcy5kYXRhYmFzZUluZm8uYXBwSWQpLGUpZm9yKHZhciBuIGluIGUuYXV0aEhlYWRlcnMpZS5hdXRoSGVhZGVycy5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZS5hdXRoSGVhZGVyc1tuXSl9LFNDLnByb3RvdHlwZS54aT1mdW5jdGlvbih0LGUpe3Q9d0NbdF07cmV0dXJuIHRoaXMuRGkrXCIvdjEvXCIrZStcIjpcIit0fSxYaShFQyxsQz1TQyksRUMucHJvdG90eXBlLmtpPWZ1bmN0aW9uKG8sZSxhLHMpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLHIpe3ZhciBpPW5ldyBKbTtpLmxpc3Rlbk9uY2UoR20uQ09NUExFVEUsZnVuY3Rpb24oKXt0cnl7c3dpdGNoKGkuZ2V0TGFzdEVycm9yQ29kZSgpKXtjYXNlIEhtLk5PX0VSUk9SOnZhciB0PWkuZ2V0UmVzcG9uc2VKc29uKCk7YWIoXCJDb25uZWN0aW9uXCIsXCJYSFIgcmVjZWl2ZWQ6XCIsSlNPTi5zdHJpbmdpZnkodCkpLG4odCk7YnJlYWs7Y2FzZSBIbS5USU1FT1VUOmFiKFwiQ29ubmVjdGlvblwiLCdSUEMgXCInK28rJ1wiIHRpbWVkIG91dCcpLHIobmV3IG5iKGViLkRFQURMSU5FX0VYQ0VFREVELFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7YnJlYWs7Y2FzZSBIbS5IVFRQX0VSUk9SOnZhciBlPWkuZ2V0U3RhdHVzKCk7YWIoXCJDb25uZWN0aW9uXCIsJ1JQQyBcIicrbysnXCIgZmFpbGVkIHdpdGggc3RhdHVzOicsZSxcInJlc3BvbnNlIHRleHQ6XCIsaS5nZXRSZXNwb25zZVRleHQoKSksMDxlPyh0PWkuZ2V0UmVzcG9uc2VKc29uKCkuZXJyb3IpJiZ0LnN0YXR1cyYmdC5tZXNzYWdlPyhlPXQuc3RhdHVzLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLFwiLVwiKSxlPTA8PU9iamVjdC52YWx1ZXMoZWIpLmluZGV4T2YoZSk/ZTplYi5VTktOT1dOLHIobmV3IG5iKGUsdC5tZXNzYWdlKSkpOnIobmV3IG5iKGViLlVOS05PV04sXCJTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzIFwiK2kuZ2V0U3RhdHVzKCkpKTpyKG5ldyBuYihlYi5VTkFWQUlMQUJMRSxcIkNvbm5lY3Rpb24gZmFpbGVkLlwiKSk7YnJlYWs7ZGVmYXVsdDpoYigpfX1maW5hbGx5e2FiKFwiQ29ubmVjdGlvblwiLCdSUEMgXCInK28rJ1wiIGNvbXBsZXRlZC4nKX19KTt2YXIgdD1KU09OLnN0cmluZ2lmeShzKTtpLnNlbmQoZSxcIlBPU1RcIix0LGEsMTUpfSl9LEVDLnByb3RvdHlwZS4kaT1mdW5jdGlvbih0LGUpe3ZhciBuPVt0aGlzLkRpLFwiL1wiLFwiZ29vZ2xlLmZpcmVzdG9yZS52MS5GaXJlc3RvcmVcIixcIi9cIix0LFwiL2NoYW5uZWxcIl0scj1uZXcgam0saT1XbSgpLHQ9e2h0dHBTZXNzaW9uSWRQYXJhbTpcImdzZXNzaW9uaWRcIixpbml0TWVzc2FnZUhlYWRlcnM6e30sbWVzc2FnZVVybFBhcmFtczp7ZGF0YWJhc2U6XCJwcm9qZWN0cy9cIit0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkK1wiL2RhdGFiYXNlcy9cIit0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2V9LHNlbmRSYXdKc29uOiEwLHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6ITAsaW50ZXJuYWxDaGFubmVsUGFyYW1zOntmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXM6NmU1fSxmb3JjZUxvbmdQb2xsaW5nOnRoaXMuZm9yY2VMb25nUG9sbGluZyxkZXRlY3RCdWZmZXJpbmdQcm94eTp0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZ307dGhpcy5GaSh0LmluaXRNZXNzYWdlSGVhZGVycyxlKSxnbygpfHxtbygpfHwwPD12bygpLmluZGV4T2YoXCJFbGVjdHJvbi9cIil8fCgwPD0oZT12bygpKS5pbmRleE9mKFwiTVNJRSBcIil8fDA8PWUuaW5kZXhPZihcIlRyaWRlbnQvXCIpKXx8MDw9dm8oKS5pbmRleE9mKFwiTVNBcHBIb3N0L1wiKXx8eW8oKXx8KHQuaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbT1cIiRodHRwSGVhZGVyc1wiKTtuPW4uam9pbihcIlwiKTthYihcIkNvbm5lY3Rpb25cIixcIkNyZWF0aW5nIFdlYkNoYW5uZWw6IFwiK24sdCk7dmFyIG89ci5jcmVhdGVXZWJDaGFubmVsKG4sdCksYT0hMSxzPSExLHU9bmV3IElDKHtFaTpmdW5jdGlvbih0KXtzP2FiKFwiQ29ubmVjdGlvblwiLFwiTm90IHNlbmRpbmcgYmVjYXVzZSBXZWJDaGFubmVsIGlzIGNsb3NlZDpcIix0KTooYXx8KGFiKFwiQ29ubmVjdGlvblwiLFwiT3BlbmluZyBXZWJDaGFubmVsIHRyYW5zcG9ydC5cIiksby5vcGVuKCksYT0hMCksYWIoXCJDb25uZWN0aW9uXCIsXCJXZWJDaGFubmVsIHNlbmRpbmc6XCIsdCksby5zZW5kKHQpKX0sVGk6ZnVuY3Rpb24oKXtyZXR1cm4gby5jbG9zZSgpfX0pLHQ9ZnVuY3Rpb24odCxlLG4pe3QubGlzdGVuKGUsZnVuY3Rpb24odCl7dHJ5e24odCl9Y2F0Y2godCl7c2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IHR9LDApfX0pfTtyZXR1cm4gdChvLFhtLkV2ZW50VHlwZS5PUEVOLGZ1bmN0aW9uKCl7c3x8YWIoXCJDb25uZWN0aW9uXCIsXCJXZWJDaGFubmVsIHRyYW5zcG9ydCBvcGVuZWQuXCIpfSksdChvLFhtLkV2ZW50VHlwZS5DTE9TRSxmdW5jdGlvbigpe3N8fChzPSEwLGFiKFwiQ29ubmVjdGlvblwiLFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgY2xvc2VkXCIpLHUuVmkoKSl9KSx0KG8sWG0uRXZlbnRUeXBlLkVSUk9SLGZ1bmN0aW9uKHQpe3N8fChzPSEwLHViKFwiQ29ubmVjdGlvblwiLFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgZXJyb3JlZDpcIix0KSx1LlZpKG5ldyBuYihlYi5VTkFWQUlMQUJMRSxcIlRoZSBvcGVyYXRpb24gY291bGQgbm90IGJlIGNvbXBsZXRlZFwiKSkpfSksdChvLFhtLkV2ZW50VHlwZS5NRVNTQUdFLGZ1bmN0aW9uKHQpe3ZhciBlLG4scixpO3N8fChsYighIShlPXQuZGF0YVswXSkpLChuPWUuZXJyb3J8fChudWxsPT09KGk9ZVswXSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZXJyb3IpKT8oYWIoXCJDb25uZWN0aW9uXCIsXCJXZWJDaGFubmVsIHJlY2VpdmVkIGVycm9yOlwiLG4pLHI9bi5zdGF0dXMsdD1mdW5jdGlvbigpe3ZhciB0PVd3W3JdO2lmKHZvaWQgMCE9PXQpcmV0dXJuICR3KHQpfSgpLGk9bi5tZXNzYWdlLHZvaWQgMD09PXQmJih0PWViLklOVEVSTkFMLGk9XCJVbmtub3duIGVycm9yIHN0YXR1czogXCIrcitcIiB3aXRoIG1lc3NhZ2UgXCIrbi5tZXNzYWdlKSxzPSEwLHUuVmkobmV3IG5iKHQsaSkpLG8uY2xvc2UoKSk6KGFiKFwiQ29ubmVjdGlvblwiLFwiV2ViQ2hhbm5lbCByZWNlaXZlZDpcIixlKSx1LlNpKGUpKSl9KSx0KGksem0uU1RBVF9FVkVOVCxmdW5jdGlvbih0KXt0LnN0YXQ9PT1RbT9hYihcIkNvbm5lY3Rpb25cIixcIkRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eVwiKTp0LnN0YXQ9PT1ZbSYmYWIoXCJDb25uZWN0aW9uXCIsXCJEZXRlY3RlZCBubyBidWZmZXJpbmcgcHJveHlcIil9KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dS5QaSgpfSwwKSx1fSxFQyk7ZnVuY3Rpb24gRUModCl7dmFyIGU9dGhpcztyZXR1cm4oZT1sQy5jYWxsKHRoaXMsdCl8fHRoaXMpLmZvcmNlTG9uZ1BvbGxpbmc9dC5mb3JjZUxvbmdQb2xsaW5nLGUuYXV0b0RldGVjdExvbmdQb2xsaW5nPXQuYXV0b0RldGVjdExvbmdQb2xsaW5nLGV9ZnVuY3Rpb24gU0ModCl7dGhpcy5kYXRhYmFzZUluZm89dCx0aGlzLmRhdGFiYXNlSWQ9dC5kYXRhYmFzZUlkO3ZhciBlPXQuc3NsP1wiaHR0cHNcIjpcImh0dHBcIjt0aGlzLkRpPWUrXCI6Ly9cIit0Lmhvc3QsdGhpcy5DaT1cInByb2plY3RzL1wiK3RoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQrXCIvZGF0YWJhc2VzL1wiK3RoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZStcIi9kb2N1bWVudHNcIn1mdW5jdGlvbiBDQyh0KXt0aGlzLkVpPXQuRWksdGhpcy5UaT10LlRpfWZ1bmN0aW9uIGtDKCl7dmFyIHQ9dGhpczt0aGlzLndpPWZ1bmN0aW9uKCl7cmV0dXJuIHQuX2koKX0sdGhpcy5taT1mdW5jdGlvbigpe3JldHVybiB0LnlpKCl9LHRoaXMuZ2k9W10sdGhpcy5waSgpfWZ1bmN0aW9uIE5DKCl7fWZ1bmN0aW9uIEFDKCl7dGhpcy5saT1uZXcgZ0MsdGhpcy5maT17fSx0aGlzLm9ubGluZVN0YXRlSGFuZGxlcj1udWxsLHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyPW51bGx9ZnVuY3Rpb24gUkModCxlLG4scixpKXt0aGlzLndpbmRvdz10LHRoaXMuU2U9ZSx0aGlzLnBlcnNpc3RlbmNlS2V5PW4sdGhpcy5Ocz1yLHRoaXMuc3luY0VuZ2luZT1udWxsLHRoaXMub25saW5lU3RhdGVIYW5kbGVyPW51bGwsdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXI9bnVsbCx0aGlzLnhzPXRoaXMuRnMuYmluZCh0aGlzKSx0aGlzLmtzPW5ldyBadyhkYiksdGhpcy5zdGFydGVkPSExLHRoaXMuT3M9W107bj1uLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLFwiXFxcXCQmXCIpO3RoaXMuc3RvcmFnZT10aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UsdGhpcy5jdXJyZW50VXNlcj1pLHRoaXMuJHM9dUModGhpcy5wZXJzaXN0ZW5jZUtleSx0aGlzLk5zKSx0aGlzLk1zPVwiZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl9cIit0aGlzLnBlcnNpc3RlbmNlS2V5LHRoaXMua3M9dGhpcy5rcy5pbnNlcnQodGhpcy5OcyxuZXcgZ0MpLHRoaXMuTHM9bmV3IFJlZ0V4cChcIl5maXJlc3RvcmVfY2xpZW50c19cIituK1wiXyhbXl9dKikkXCIpLHRoaXMuQnM9bmV3IFJlZ0V4cChcIl5maXJlc3RvcmVfbXV0YXRpb25zX1wiK24rXCJfKFxcXFxkKykoPzpfKC4qKSk/JFwiKSx0aGlzLnFzPW5ldyBSZWdFeHAoXCJeZmlyZXN0b3JlX3RhcmdldHNfXCIrbitcIl8oXFxcXGQrKSRcIiksdGhpcy5Vcz1cImZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfXCIrdGhpcy5wZXJzaXN0ZW5jZUtleSx0aGlzLlFzPVwiZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfXCIrdGhpcy5wZXJzaXN0ZW5jZUtleSx0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLHRoaXMueHMpfWZ1bmN0aW9uIFBDKCl7dGhpcy5hY3RpdmVUYXJnZXRJZHM9dkl9ZnVuY3Rpb24gT0ModCxlKXt0aGlzLmNsaWVudElkPXQsdGhpcy5vbmxpbmVTdGF0ZT1lfWZ1bmN0aW9uIERDKHQsZSl7dGhpcy5jbGllbnRJZD10LHRoaXMuYWN0aXZlVGFyZ2V0SWRzPWV9ZnVuY3Rpb24geEModCxlLG4pe3RoaXMudGFyZ2V0SWQ9dCx0aGlzLnN0YXRlPWUsdGhpcy5lcnJvcj1ufWZ1bmN0aW9uIExDKHQsZSxuLHIpe3RoaXMudXNlcj10LHRoaXMuYmF0Y2hJZD1lLHRoaXMuc3RhdGU9bix0aGlzLmVycm9yPXJ9ZnVuY3Rpb24gTUMoKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpudWxsfWZ1bmN0aW9uIEZDKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50P2RvY3VtZW50Om51bGx9ZnVuY3Rpb24gVUModCl7cmV0dXJuIG5ldyBQSSh0LCEwKX1mdW5jdGlvbiBqQyh0LGUsbixyLGkpe3ZhciBvPXRoaXM7dGhpcy5sb2NhbFN0b3JlPXQsdGhpcy5kYXRhc3RvcmU9ZSx0aGlzLmFzeW5jUXVldWU9bix0aGlzLnJlbW90ZVN5bmNlcj17fSx0aGlzLmtyPVtdLHRoaXMuT3I9bmV3IE1hcCx0aGlzLiRyPW5ldyBTZXQsdGhpcy5Ncj1bXSx0aGlzLkxyPWksdGhpcy5Mci5kaShmdW5jdGlvbih0KXtuLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24oKXtyZXR1cm4gJGkobyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdWsodGhpcyk/KGFiKFwiUmVtb3RlU3RvcmVcIixcIlJlc3RhcnRpbmcgc3RyZWFtcyBmb3IgbmV0d29yayByZWFjaGFiaWxpdHkgY2hhbmdlLlwiKSxbNCxmdW5jdGlvbihuKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4oZT1uKS4kci5hZGQoNCksWzQsZWsoZSldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksZS5Cci5zZXQoXCJVbmtub3duXCIpLGUuJHIuZGVsZXRlKDQpLFs0LHRrKGUpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFsyXX19KX0pfSh0aGlzKV0pOlszLDJdO2Nhc2UgMTp0LnNlbnQoKSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVyblsyXX19KX0pfSl9KSx0aGlzLkJyPW5ldyB6QyhuLHIpfXZhciBxQyxWQyxCQyxLQz0oWkMucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5xaT0wfSxaQy5wcm90b3R5cGUuS2k9ZnVuY3Rpb24oKXt0aGlzLnFpPXRoaXMuQml9LFpDLnByb3RvdHlwZS5qaT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuY2FuY2VsKCk7dmFyIG49TWF0aC5mbG9vcih0aGlzLnFpK3RoaXMuV2koKSkscj1NYXRoLm1heCgwLERhdGUubm93KCktdGhpcy5RaSksaT1NYXRoLm1heCgwLG4tcik7MDxpJiZhYihcIkV4cG9uZW50aWFsQmFja29mZlwiLFwiQmFja2luZyBvZmYgZm9yIFwiK2krXCIgbXMgKGJhc2UgZGVsYXk6IFwiK3RoaXMucWkrXCIgbXMsIGRlbGF5IHdpdGggaml0dGVyOiBcIituK1wiIG1zLCBsYXN0IGF0dGVtcHQ6IFwiK3IrXCIgbXMgYWdvKVwiKSx0aGlzLlVpPXRoaXMuU2UuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy50aW1lcklkLGksZnVuY3Rpb24oKXtyZXR1cm4gZS5RaT1EYXRlLm5vdygpLHQoKX0pLHRoaXMucWkqPXRoaXMuTGksdGhpcy5xaTx0aGlzLk1pJiYodGhpcy5xaT10aGlzLk1pKSx0aGlzLnFpPnRoaXMuQmkmJih0aGlzLnFpPXRoaXMuQmkpfSxaQy5wcm90b3R5cGUuR2k9ZnVuY3Rpb24oKXtudWxsIT09dGhpcy5VaSYmKHRoaXMuVWkuc2tpcERlbGF5KCksdGhpcy5VaT1udWxsKX0sWkMucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe251bGwhPT10aGlzLlVpJiYodGhpcy5VaS5jYW5jZWwoKSx0aGlzLlVpPW51bGwpfSxaQy5wcm90b3R5cGUuV2k9ZnVuY3Rpb24oKXtyZXR1cm4oTWF0aC5yYW5kb20oKS0uNSkqdGhpcy5xaX0sWkMpLEc9KCRDLnByb3RvdHlwZS50cj1mdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5zdGF0ZXx8Mj09PXRoaXMuc3RhdGV8fDQ9PT10aGlzLnN0YXRlfSwkQy5wcm90b3R5cGUuZXI9ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXRoaXMuc3RhdGV9LCRDLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpezMhPT10aGlzLnN0YXRlP3RoaXMuYXV0aCgpOnRoaXMubnIoKX0sJEMucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy50cigpP1s0LHRoaXMuY2xvc2UoMCldOlszLDJdO2Nhc2UgMTp0LnNlbnQoKSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVyblsyXX19KX0pfSwkQy5wcm90b3R5cGUuc3I9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPTAsdGhpcy5aaS5yZXNldCgpfSwkQy5wcm90b3R5cGUuaXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZXIoKSYmbnVsbD09PXRoaXMuWGkmJih0aGlzLlhpPXRoaXMuU2UuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy56aSw2ZTQsZnVuY3Rpb24oKXtyZXR1cm4gdC5ycigpfSkpfSwkQy5wcm90b3R5cGUuY3I9ZnVuY3Rpb24odCl7dGhpcy51cigpLHRoaXMuc3RyZWFtLnNlbmQodCl9LCRDLnByb3RvdHlwZS5ycj1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lcigpP1syLHRoaXMuY2xvc2UoMCldOlsyXX0pfSl9LCRDLnByb3RvdHlwZS51cj1mdW5jdGlvbigpe3RoaXMuWGkmJih0aGlzLlhpLmNhbmNlbCgpLHRoaXMuWGk9bnVsbCl9LCRDLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihlLG4pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLnVyKCksdGhpcy5aaS5jYW5jZWwoKSx0aGlzLllpKyssMyE9PWU/dGhpcy5aaS5yZXNldCgpOm4mJm4uY29kZT09PWViLlJFU09VUkNFX0VYSEFVU1RFRD8oc2Iobi50b1N0cmluZygpKSxzYihcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSx0aGlzLlppLktpKCkpOm4mJm4uY29kZT09PWViLlVOQVVUSEVOVElDQVRFRCYmdGhpcy5KaS5pbnZhbGlkYXRlVG9rZW4oKSxudWxsIT09dGhpcy5zdHJlYW0mJih0aGlzLmFyKCksdGhpcy5zdHJlYW0uY2xvc2UoKSx0aGlzLnN0cmVhbT1udWxsKSx0aGlzLnN0YXRlPWUsWzQsdGhpcy5saXN0ZW5lci5SaShuKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxbMl19fSl9KX0sJEMucHJvdG90eXBlLmFyPWZ1bmN0aW9uKCl7fSwkQy5wcm90b3R5cGUuYXV0aD1mdW5jdGlvbigpe3ZhciBuPXRoaXM7dGhpcy5zdGF0ZT0xO3ZhciB0PXRoaXMuaHIodGhpcy5ZaSksZT10aGlzLllpO3RoaXMuSmkuZ2V0VG9rZW4oKS50aGVuKGZ1bmN0aW9uKHQpe24uWWk9PT1lJiZuLmxyKHQpfSxmdW5jdGlvbihlKXt0KGZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG5iKGViLlVOS05PV04sXCJGZXRjaGluZyBhdXRoIHRva2VuIGZhaWxlZDogXCIrZS5tZXNzYWdlKTtyZXR1cm4gbi5kcih0KX0pfSl9LCRDLnByb3RvdHlwZS5scj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy5ocih0aGlzLllpKTt0aGlzLnN0cmVhbT10aGlzLndyKHQpLHRoaXMuc3RyZWFtLklpKGZ1bmN0aW9uKCl7bihmdW5jdGlvbigpe3JldHVybiBlLnN0YXRlPTIsZS5saXN0ZW5lci5JaSgpfSl9KSx0aGlzLnN0cmVhbS5SaShmdW5jdGlvbih0KXtuKGZ1bmN0aW9uKCl7cmV0dXJuIGUuZHIodCl9KX0pLHRoaXMuc3RyZWFtLm9uTWVzc2FnZShmdW5jdGlvbih0KXtuKGZ1bmN0aW9uKCl7cmV0dXJuIGUub25NZXNzYWdlKHQpfSl9KX0sJEMucHJvdG90eXBlLm5yPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnN0YXRlPTQsdGhpcy5aaS5qaShmdW5jdGlvbigpe3JldHVybiAkaSh0LHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdGF0ZT0wLHRoaXMuc3RhcnQoKSxbMl19KX0pfSl9LCRDLnByb3RvdHlwZS5kcj1mdW5jdGlvbih0KXtyZXR1cm4gYWIoXCJQZXJzaXN0ZW50U3RyZWFtXCIsXCJjbG9zZSB3aXRoIGVycm9yOiBcIit0KSx0aGlzLnN0cmVhbT1udWxsLHRoaXMuY2xvc2UoMyx0KX0sJEMucHJvdG90eXBlLmhyPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHQpe24uU2UuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbigpe3JldHVybiBuLllpPT09ZT90KCk6KGFiKFwiUGVyc2lzdGVudFN0cmVhbVwiLFwic3RyZWFtIGNhbGxiYWNrIHNraXBwZWQgYnkgZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlci5cIiksUHJvbWlzZS5yZXNvbHZlKCkpfSl9fSwkQyksV0M9KFhpKEpDLEJDPUcpLEpDLnByb3RvdHlwZS53cj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5IaS4kaShcIkxpc3RlblwiLHQpfSxKQy5wcm90b3R5cGUub25NZXNzYWdlPWZ1bmN0aW9uKHQpe3RoaXMuWmkucmVzZXQoKTt2YXIgZT1mdW5jdGlvbih0LGUpe2lmKFwidGFyZ2V0Q2hhbmdlXCJpbiBlKXtlLnRhcmdldENoYW5nZTt2YXIgbj1cIk5PX0NIQU5HRVwiPT09KG89ZS50YXJnZXRDaGFuZ2UudGFyZ2V0Q2hhbmdlVHlwZXx8XCJOT19DSEFOR0VcIik/MDpcIkFERFwiPT09bz8xOlwiUkVNT1ZFXCI9PT1vPzI6XCJDVVJSRU5UXCI9PT1vPzM6XCJSRVNFVFwiPT09bz80OmhiKCkscj1lLnRhcmdldENoYW5nZS50YXJnZXRJZHN8fFtdLGk9KGE9ZS50YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4sdC5JPyhsYih2b2lkIDA9PT1hfHxcInN0cmluZ1wiPT10eXBlb2YgYSksUmIuZnJvbUJhc2U2NFN0cmluZyhhfHxcIlwiKSk6KGxiKHZvaWQgMD09PWF8fGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSxSYi5mcm9tVWludDhBcnJheShhfHxuZXcgVWludDhBcnJheSkpKSxvPShzPWUudGFyZ2V0Q2hhbmdlLmNhdXNlKSYmKHU9dm9pZCAwPT09KGM9cykuY29kZT9lYi5VTktOT1dOOiR3KGMuY29kZSksbmV3IG5iKHUsYy5tZXNzYWdlfHxcIlwiKSksYT1uZXcgX0kobixyLGksb3x8bnVsbCl9ZWxzZSBpZihcImRvY3VtZW50Q2hhbmdlXCJpbiBlKXtlLmRvY3VtZW50Q2hhbmdlLChuPWUuZG9jdW1lbnRDaGFuZ2UpLmRvY3VtZW50LG4uZG9jdW1lbnQubmFtZSxuLmRvY3VtZW50LnVwZGF0ZVRpbWU7dmFyIHI9VUkodCxuLmRvY3VtZW50Lm5hbWUpLGk9eEkobi5kb2N1bWVudC51cGRhdGVUaW1lKSxzPW5ldyBvXyh7bWFwVmFsdWU6e2ZpZWxkczpuLmRvY3VtZW50LmZpZWxkc319KSx1PShvPXNfLm5ld0ZvdW5kRG9jdW1lbnQocixpLHMpLG4udGFyZ2V0SWRzfHxbXSksYz1uLnJlbW92ZWRUYXJnZXRJZHN8fFtdO2E9bmV3IG1JKHUsYyxvLmtleSxvKX1lbHNlIGlmKFwiZG9jdW1lbnREZWxldGVcImluIGUpZS5kb2N1bWVudERlbGV0ZSwobj1lLmRvY3VtZW50RGVsZXRlKS5kb2N1bWVudCxyPVVJKHQsbi5kb2N1bWVudCksaT1uLnJlYWRUaW1lP3hJKG4ucmVhZFRpbWUpOm1iLm1pbigpLHM9c18ubmV3Tm9Eb2N1bWVudChyLGkpLG89bi5yZW1vdmVkVGFyZ2V0SWRzfHxbXSxhPW5ldyBtSShbXSxvLHMua2V5LHMpO2Vsc2UgaWYoXCJkb2N1bWVudFJlbW92ZVwiaW4gZSllLmRvY3VtZW50UmVtb3ZlLChuPWUuZG9jdW1lbnRSZW1vdmUpLmRvY3VtZW50LHI9VUkodCxuLmRvY3VtZW50KSxpPW4ucmVtb3ZlZFRhcmdldElkc3x8W10sYT1uZXcgbUkoW10saSxyLG51bGwpO2Vsc2V7aWYoIShcImZpbHRlclwiaW4gZSkpcmV0dXJuIGhiKCk7ZS5maWx0ZXI7ZT1lLmZpbHRlcjtlLnRhcmdldElkLG49ZS5jb3VudHx8MCxyPW5ldyBLdyhuKSxpPWUudGFyZ2V0SWQsYT1uZXcgYkkoaSxyKX1yZXR1cm4gYX0odGhpcy5SLHQpLHQ9ZnVuY3Rpb24odCl7aWYoIShcInRhcmdldENoYW5nZVwiaW4gdCkpcmV0dXJuIG1iLm1pbigpO3Q9dC50YXJnZXRDaGFuZ2U7cmV0dXJuKCF0LnRhcmdldElkc3x8IXQudGFyZ2V0SWRzLmxlbmd0aCkmJnQucmVhZFRpbWU/eEkodC5yZWFkVGltZSk6bWIubWluKCl9KHQpO3JldHVybiB0aGlzLmxpc3RlbmVyLl9yKGUsdCl9LEpDLnByb3RvdHlwZS5tcj1mdW5jdGlvbih0KXt2YXIgZSxuLHIsaT17fTtpLmRhdGFiYXNlPVZJKHRoaXMuUiksaS5hZGRUYXJnZXQ9KGU9dGhpcy5SLChyPXBfKHI9KG49dCkudGFyZ2V0KT97ZG9jdW1lbnRzOnpJKGUscil9OntxdWVyeTpRSShlLHIpfSkudGFyZ2V0SWQ9bi50YXJnZXRJZCwwPG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpP3IucmVzdW1lVG9rZW49REkoZSxuLnJlc3VtZVRva2VuKTowPG4uc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhtYi5taW4oKSkmJihyLnJlYWRUaW1lPU9JKGUsbi5zbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKSkpLHIpO3ZhciBvLHQ9KHRoaXMuUixvPXQsbnVsbD09KHQ9ZnVuY3Rpb24oKXtzd2l0Y2goby5wdXJwb3NlKXtjYXNlIDA6cmV0dXJuIG51bGw7Y2FzZSAxOnJldHVyblwiZXhpc3RlbmNlLWZpbHRlci1taXNtYXRjaFwiO2Nhc2UgMjpyZXR1cm5cImxpbWJvLWRvY3VtZW50XCI7ZGVmYXVsdDpyZXR1cm4gaGIoKX19KCkpP251bGw6e1wiZ29vZy1saXN0ZW4tdGFnc1wiOnR9KTt0JiYoaS5sYWJlbHM9dCksdGhpcy5jcihpKX0sSkMucHJvdG90eXBlLnlyPWZ1bmN0aW9uKHQpe3ZhciBlPXt9O2UuZGF0YWJhc2U9VkkodGhpcy5SKSxlLnJlbW92ZVRhcmdldD10LHRoaXMuY3IoZSl9LEpDKSxIQz0oWGkoWEMsVkM9RyksT2JqZWN0LmRlZmluZVByb3BlcnR5KFhDLnByb3RvdHlwZSxcInByXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLFhDLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuZ3I9ITEsdGhpcy5sYXN0U3RyZWFtVG9rZW49dm9pZCAwLFZDLnByb3RvdHlwZS5zdGFydC5jYWxsKHRoaXMpfSxYQy5wcm90b3R5cGUuYXI9ZnVuY3Rpb24oKXt0aGlzLmdyJiZ0aGlzLkVyKFtdKX0sWEMucHJvdG90eXBlLndyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkhpLiRpKFwiV3JpdGVcIix0KX0sWEMucHJvdG90eXBlLm9uTWVzc2FnZT1mdW5jdGlvbih0KXtpZihsYighIXQuc3RyZWFtVG9rZW4pLHRoaXMubGFzdFN0cmVhbVRva2VuPXQuc3RyZWFtVG9rZW4sdGhpcy5ncil7dGhpcy5aaS5yZXNldCgpO3ZhciBlPShuPXQud3JpdGVSZXN1bHRzLHI9dC5jb21taXRUaW1lLG4mJjA8bi5sZW5ndGg/KGxiKHZvaWQgMCE9PXIpLG4ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuPXIsKHQ9KGU9dCkudXBkYXRlVGltZT94SShlLnVwZGF0ZVRpbWUpOnhJKG4pKS5pc0VxdWFsKG1iLm1pbigpKSYmKHQ9eEkobikpLG5ldyBDdyh0LGUudHJhbnNmb3JtUmVzdWx0c3x8W10pO3ZhciBlLG59KSk6W10pLG49eEkodC5jb21taXRUaW1lKTtyZXR1cm4gdGhpcy5saXN0ZW5lci5UcihuLGUpfXZhciBuLHI7cmV0dXJuIGxiKCF0LndyaXRlUmVzdWx0c3x8MD09PXQud3JpdGVSZXN1bHRzLmxlbmd0aCksdGhpcy5ncj0hMCx0aGlzLmxpc3RlbmVyLklyKCl9LFhDLnByb3RvdHlwZS5Bcj1mdW5jdGlvbigpe3ZhciB0PXt9O3QuZGF0YWJhc2U9VkkodGhpcy5SKSx0aGlzLmNyKHQpfSxYQy5wcm90b3R5cGUuRXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyx0PXtzdHJlYW1Ub2tlbjp0aGlzLmxhc3RTdHJlYW1Ub2tlbix3cml0ZXM6dC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIEhJKGUuUix0KX0pfTt0aGlzLmNyKHQpfSxYQyksR0M9KFhpKFlDLHFDPWZ1bmN0aW9uKCl7fSksWUMucHJvdG90eXBlLmJyPWZ1bmN0aW9uKCl7aWYodGhpcy5Scil0aHJvdyBuZXcgbmIoZWIuRkFJTEVEX1BSRUNPTkRJVElPTixcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKX0sWUMucHJvdG90eXBlLk5pPWZ1bmN0aW9uKGUsbixyKXt2YXIgaT10aGlzO3JldHVybiB0aGlzLmJyKCksdGhpcy5jcmVkZW50aWFscy5nZXRUb2tlbigpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGkuSGkuTmkoZSxuLHIsdCl9KS5jYXRjaChmdW5jdGlvbih0KXt0aHJvd1wiRmlyZWJhc2VFcnJvclwiPT09dC5uYW1lPyh0LmNvZGU9PT1lYi5VTkFVVEhFTlRJQ0FURUQmJmkuY3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksdCk6bmV3IG5iKGViLlVOS05PV04sdC50b1N0cmluZygpKX0pfSxZQy5wcm90b3R5cGUuT2k9ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPXRoaXM7cmV0dXJuIHRoaXMuYnIoKSx0aGlzLmNyZWRlbnRpYWxzLmdldFRva2VuKCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gaS5IaS5PaShlLG4scix0KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe3Rocm93XCJGaXJlYmFzZUVycm9yXCI9PT10Lm5hbWU/KHQuY29kZT09PWViLlVOQVVUSEVOVElDQVRFRCYmaS5jcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSx0KTpuZXcgbmIoZWIuVU5LTk9XTix0LnRvU3RyaW5nKCkpfSl9LFlDLnByb3RvdHlwZS50ZXJtaW5hdGU9ZnVuY3Rpb24oKXt0aGlzLlJyPSEwfSxZQyksekM9KFFDLnByb3RvdHlwZS5Tcj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7MD09PXRoaXMudnImJih0aGlzLkRyKFwiVW5rbm93blwiKSx0aGlzLlByPXRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcIm9ubGluZV9zdGF0ZV90aW1lb3V0XCIsMWU0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuUHI9bnVsbCx0LkNyKFwiQmFja2VuZCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gMTAgc2Vjb25kcy5cIiksdC5EcihcIk9mZmxpbmVcIiksUHJvbWlzZS5yZXNvbHZlKCl9KSl9LFFDLnByb3RvdHlwZS5Ocj1mdW5jdGlvbih0KXtcIk9ubGluZVwiPT09dGhpcy5zdGF0ZT90aGlzLkRyKFwiVW5rbm93blwiKToodGhpcy52cisrLDE8PXRoaXMudnImJih0aGlzLkZyKCksdGhpcy5DcihcIkNvbm5lY3Rpb24gZmFpbGVkIDEgdGltZXMuIE1vc3QgcmVjZW50IGVycm9yOiBcIit0LnRvU3RyaW5nKCkpLHRoaXMuRHIoXCJPZmZsaW5lXCIpKSl9LFFDLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5GcigpLHRoaXMudnI9MCxcIk9ubGluZVwiPT09dCYmKHRoaXMuVnI9ITEpLHRoaXMuRHIodCl9LFFDLnByb3RvdHlwZS5Ecj1mdW5jdGlvbih0KXt0IT09dGhpcy5zdGF0ZSYmKHRoaXMuc3RhdGU9dCx0aGlzLm9ubGluZVN0YXRlSGFuZGxlcih0KSl9LFFDLnByb3RvdHlwZS5Dcj1mdW5jdGlvbih0KXt0PVwiQ291bGQgbm90IHJlYWNoIENsb3VkIEZpcmVzdG9yZSBiYWNrZW5kLiBcIit0K1wiXFxuVGhpcyB0eXBpY2FsbHkgaW5kaWNhdGVzIHRoYXQgeW91ciBkZXZpY2UgZG9lcyBub3QgaGF2ZSBhIGhlYWx0aHkgSW50ZXJuZXQgY29ubmVjdGlvbiBhdCB0aGUgbW9tZW50LiBUaGUgY2xpZW50IHdpbGwgb3BlcmF0ZSBpbiBvZmZsaW5lIG1vZGUgdW50aWwgaXQgaXMgYWJsZSB0byBzdWNjZXNzZnVsbHkgY29ubmVjdCB0byB0aGUgYmFja2VuZC5cIjt0aGlzLlZyPyhzYih0KSx0aGlzLlZyPSExKTphYihcIk9ubGluZVN0YXRlVHJhY2tlclwiLHQpfSxRQy5wcm90b3R5cGUuRnI9ZnVuY3Rpb24oKXtudWxsIT09dGhpcy5QciYmKHRoaXMuUHIuY2FuY2VsKCksdGhpcy5Qcj1udWxsKX0sUUMpO2Z1bmN0aW9uIFFDKHQsZSl7dGhpcy5hc3luY1F1ZXVlPXQsdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXI9ZSx0aGlzLnN0YXRlPVwiVW5rbm93blwiLHRoaXMudnI9MCx0aGlzLlByPW51bGwsdGhpcy5Wcj0hMH1mdW5jdGlvbiBZQyh0LGUsbil7dmFyIHI9dGhpcztyZXR1cm4ocj1xQy5jYWxsKHRoaXMpfHx0aGlzKS5jcmVkZW50aWFscz10LHIuSGk9ZSxyLlI9bixyLlJyPSExLHJ9ZnVuY3Rpb24gWEModCxlLG4scixpKXt2YXIgbz10aGlzO3JldHVybihvPVZDLmNhbGwodGhpcyx0LFwid3JpdGVfc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiLFwid3JpdGVfc3RyZWFtX2lkbGVcIixlLG4saSl8fHRoaXMpLlI9cixvLmdyPSExLG99ZnVuY3Rpb24gSkModCxlLG4scixpKXt2YXIgbz10aGlzO3JldHVybihvPUJDLmNhbGwodGhpcyx0LFwibGlzdGVuX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIixcImxpc3Rlbl9zdHJlYW1faWRsZVwiLGUsbixpKXx8dGhpcykuUj1yLG99ZnVuY3Rpb24gJEModCxlLG4scixpLG8pe3RoaXMuU2U9dCx0aGlzLnppPW4sdGhpcy5IaT1yLHRoaXMuSmk9aSx0aGlzLmxpc3RlbmVyPW8sdGhpcy5zdGF0ZT0wLHRoaXMuWWk9MCx0aGlzLlhpPW51bGwsdGhpcy5zdHJlYW09bnVsbCx0aGlzLlppPW5ldyBLQyh0LGUpfWZ1bmN0aW9uIFpDKHQsZSxuLHIsaSl7dm9pZCAwPT09biYmKG49MWUzKSx2b2lkIDA9PT1yJiYocj0xLjUpLHZvaWQgMD09PWkmJihpPTZlNCksdGhpcy5TZT10LHRoaXMudGltZXJJZD1lLHRoaXMuTWk9bix0aGlzLkxpPXIsdGhpcy5CaT1pLHRoaXMucWk9MCx0aGlzLlVpPW51bGwsdGhpcy5RaT1EYXRlLm5vdygpLHRoaXMucmVzZXQoKX1mdW5jdGlvbiB0ayhyKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOmlmKCF1ayhyKSlyZXR1cm5bMyw0XTtlPTAsbj1yLk1yLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGU8bi5sZW5ndGg/WzQsKDAsbltlXSkoITApXTpbMyw0XTtjYXNlIDI6dC5zZW50KCksdC5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4gZSsrLFszLDFdO2Nhc2UgNDpyZXR1cm5bMl19fSl9KX1mdW5jdGlvbiBlayhyKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOmU9MCxuPXIuTXIsdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gZTxuLmxlbmd0aD9bNCwoMCxuW2VdKSghMSldOlszLDRdO2Nhc2UgMjp0LnNlbnQoKSx0LmxhYmVsPTM7Y2FzZSAzOnJldHVybiBlKyssWzMsMV07Y2FzZSA0OnJldHVyblsyXX19KX0pfWZ1bmN0aW9uIG5rKHQsZSl7dC5Pci5oYXMoZS50YXJnZXRJZCl8fCh0Lk9yLnNldChlLnRhcmdldElkLGUpLHNrKHQpP2FrKHQpOnlrKHQpLmVyKCkmJmlrKHQsZSkpfWZ1bmN0aW9uIHJrKHQsZSl7dmFyIG49dCx0PXlrKG4pO24uT3IuZGVsZXRlKGUpLHQuZXIoKSYmb2sobixlKSwwPT09bi5Pci5zaXplJiYodC5lcigpP3QuaXIoKTp1ayhuKSYmbi5Cci5zZXQoXCJVbmtub3duXCIpKX1mdW5jdGlvbiBpayh0LGUpe3QucXIuVShlLnRhcmdldElkKSx5ayh0KS5tcihlKX1mdW5jdGlvbiBvayh0LGUpe3QucXIuVShlKSx5ayh0KS55cihlKX1mdW5jdGlvbiBhayhlKXtlLnFyPW5ldyBJSSh7Z2V0UmVtb3RlS2V5c0ZvclRhcmdldDpmdW5jdGlvbih0KXtyZXR1cm4gZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KX0sbHQ6ZnVuY3Rpb24odCl7cmV0dXJuIGUuT3IuZ2V0KHQpfHxudWxsfX0pLHlrKGUpLnN0YXJ0KCksZS5Cci5TcigpfWZ1bmN0aW9uIHNrKHQpe3JldHVybiB1ayh0KSYmIXlrKHQpLnRyKCkmJjA8dC5Pci5zaXplfWZ1bmN0aW9uIHVrKHQpe3JldHVybiAwPT09dC4kci5zaXplfWZ1bmN0aW9uIGNrKHQpe3QucXI9dm9pZCAwfWZ1bmN0aW9uIGhrKGEscyx1KXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIG4sbztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOmlmKGEuQnIuc2V0KFwiT25saW5lXCIpLCEocyBpbnN0YW5jZW9mIF9JJiYyPT09cy5zdGF0ZSYmcy5jYXVzZSkpcmV0dXJuWzMsNl07dC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsMywsNV0pLFs0LGZ1bmN0aW9uKG8sYSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6ZT1hLmNhdXNlLG49MCxyPWEudGFyZ2V0SWRzLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIG48ci5sZW5ndGg/KGk9cltuXSxvLk9yLmhhcyhpKT9bNCxvLnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4oaSxlKV06WzMsM10pOlszLDVdO2Nhc2UgMjp0LnNlbnQoKSxvLk9yLmRlbGV0ZShpKSxvLnFyLnJlbW92ZVRhcmdldChpKSx0LmxhYmVsPTM7Y2FzZSAzOnQubGFiZWw9NDtjYXNlIDQ6cmV0dXJuIG4rKyxbMywxXTtjYXNlIDU6cmV0dXJuWzJdfX0pfSl9KGEscyldO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksWzMsNV07Y2FzZSAzOnJldHVybiBuPXQuc2VudCgpLGFiKFwiUmVtb3RlU3RvcmVcIixcIkZhaWxlZCB0byByZW1vdmUgdGFyZ2V0cyAlczogJXMgXCIscy50YXJnZXRJZHMuam9pbihcIixcIiksbiksWzQsbGsoYSxuKV07Y2FzZSA0OnJldHVybiB0LnNlbnQoKSxbMyw1XTtjYXNlIDU6cmV0dXJuWzMsMTNdO2Nhc2UgNjppZihzIGluc3RhbmNlb2YgbUk/YS5xci5YKHMpOnMgaW5zdGFuY2VvZiBiST9hLnFyLnJ0KHMpOmEucXIuZXQocyksdS5pc0VxdWFsKG1iLm1pbigpKSlyZXR1cm5bMywxM107dC5sYWJlbD03O2Nhc2UgNzpyZXR1cm4gdC50cnlzLnB1c2goWzcsMTEsLDEzXSksWzQsQVMoYS5sb2NhbFN0b3JlKV07Y2FzZSA4OnJldHVybiBvPXQuc2VudCgpLDA8PXUuY29tcGFyZVRvKG8pP1s0LChpPXUsKGU9KHI9YSkucXIudXQoaSkpLnRhcmdldENoYW5nZXMuZm9yRWFjaChmdW5jdGlvbih0LGUpe3ZhciBuOzA8dC5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkmJigobj1yLk9yLmdldChlKSkmJnIuT3Iuc2V0KGUsbi53aXRoUmVzdW1lVG9rZW4odC5yZXN1bWVUb2tlbixpKSkpfSksZS50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9ci5Pci5nZXQodCk7ZSYmKHIuT3Iuc2V0KHQsZS53aXRoUmVzdW1lVG9rZW4oUmIuRU1QVFlfQllURV9TVFJJTkcsZS5zbmFwc2hvdFZlcnNpb24pKSxvayhyLHQpLGU9bmV3IFhUKGUudGFyZ2V0LHQsMSxlLnNlcXVlbmNlTnVtYmVyKSxpayhyLGUpKX0pLHIucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQoZSkpXTpbMywxMF07Y2FzZSA5OnQuc2VudCgpLHQubGFiZWw9MTA7Y2FzZSAxMDpyZXR1cm5bMywxM107Y2FzZSAxMTpyZXR1cm4gYWIoXCJSZW1vdGVTdG9yZVwiLFwiRmFpbGVkIHRvIHJhaXNlIHNuYXBzaG90OlwiLG89dC5zZW50KCkpLFs0LGxrKGEsbyldO2Nhc2UgMTI6cmV0dXJuIHQuc2VudCgpLFszLDEzXTtjYXNlIDEzOnJldHVyblsyXX12YXIgcixpLGV9KX0pfWZ1bmN0aW9uIGxrKG4scixpKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOmlmKCFVVChyKSl0aHJvdyByO3JldHVybiBuLiRyLmFkZCgxKSxbNCxlayhuKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxuLkJyLnNldChcIk9mZmxpbmVcIiksaT1pfHxmdW5jdGlvbigpe3JldHVybiBBUyhuLmxvY2FsU3RvcmUpfSxuLmFzeW5jUXVldWUuZW5xdWV1ZVJldHJ5YWJsZShmdW5jdGlvbigpe3JldHVybiAkaShlLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBhYihcIlJlbW90ZVN0b3JlXCIsXCJSZXRyeWluZyBJbmRleGVkREIgYWNjZXNzXCIpLFs0LGkoKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxuLiRyLmRlbGV0ZSgxKSxbNCx0ayhuKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSxbMl19fSl9KX0pLFsyXX19KX0pfWZ1bmN0aW9uIGZrKGUsbil7cmV0dXJuIG4oKS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gbGsoZSx0LG4pfSl9ZnVuY3Rpb24gcGsodSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBpLG8sYSxzO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6bz1tayhpPXUpLGE9MDxpLmtyLmxlbmd0aD9pLmtyW2kua3IubGVuZ3RoLTFdLmJhdGNoSWQ6LTEsdC5sYWJlbD0xO2Nhc2UgMTppZighKHVrKGkpJiZpLmtyLmxlbmd0aDwxMCkpcmV0dXJuWzMsN107dC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdC50cnlzLnB1c2goWzIsNCwsNl0pLFs0LChlPWkubG9jYWxTdG9yZSxuPWEsKHI9ZSkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLFwicmVhZG9ubHlcIixmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09biYmKG49LTEpLHIuX24uZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCxuKX0pKV07Y2FzZSAzOnJldHVybiBudWxsPT09KHM9dC5zZW50KCkpPygwPT09aS5rci5sZW5ndGgmJm8uaXIoKSxbMyw3XSk6KGE9cy5iYXRjaElkLGZ1bmN0aW9uKHQsZSl7dC5rci5wdXNoKGUpO3Q9bWsodCk7dC5lcigpJiZ0LnByJiZ0LkVyKGUubXV0YXRpb25zKX0oaSxzKSxbMyw2XSk7Y2FzZSA0OnJldHVybiBzPXQuc2VudCgpLFs0LGxrKGkscyldO2Nhc2UgNTpyZXR1cm4gdC5zZW50KCksWzMsNl07Y2FzZSA2OnJldHVyblszLDFdO2Nhc2UgNzpyZXR1cm4gZGsoaSkmJnZrKGkpLFsyXX12YXIgZSxuLHJ9KX0pfWZ1bmN0aW9uIGRrKHQpe3JldHVybiB1ayh0KSYmIW1rKHQpLnRyKCkmJjA8dC5rci5sZW5ndGh9ZnVuY3Rpb24gdmsodCl7bWsodCkuc3RhcnQoKX1mdW5jdGlvbiBnayhuLHIpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPW4scj8oZS4kci5kZWxldGUoMiksWzQsdGsoZSldKTpbMywyXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLFszLDVdO2Nhc2UgMjpyZXR1cm4gcj9bMyw0XTooZS4kci5hZGQoMiksWzQsZWsoZSldKTtjYXNlIDM6dC5zZW50KCksZS5Cci5zZXQoXCJVbmtub3duXCIpLHQubGFiZWw9NDtjYXNlIDQ6dC5sYWJlbD01O2Nhc2UgNTpyZXR1cm5bMl19fSl9KX1mdW5jdGlvbiB5ayhuKXt2YXIgdCxlLHIsaT10aGlzO3JldHVybiBuLlVyfHwobi5Vcj0odD1uLmRhdGFzdG9yZSxlPW4uYXN5bmNRdWV1ZSxyPXtJaTpmdW5jdGlvbihuKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7cmV0dXJuIG4uT3IuZm9yRWFjaChmdW5jdGlvbih0LGUpe2lrKG4sdCl9KSxbMl19KX0pfS5iaW5kKG51bGwsbiksUmk6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7cmV0dXJuIGNrKGUpLHNrKGUpPyhlLkJyLk5yKG4pLGFrKGUpKTplLkJyLnNldChcIlVua25vd25cIiksWzJdfSl9KX0uYmluZChudWxsLG4pLF9yOmhrLmJpbmQobnVsbCxuKX0sdC5icigpLG5ldyBXQyhlLHQuSGksdC5jcmVkZW50aWFscyx0LlIscikpLG4uTXIucHVzaChmdW5jdGlvbihlKXtyZXR1cm4gJGkoaSx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT8obi5Vci5zcigpLHNrKG4pP2FrKG4pOm4uQnIuc2V0KFwiVW5rbm93blwiKSxbMywzXSk6WzMsMV07Y2FzZSAxOnJldHVybls0LG4uVXIuc3RvcCgpXTtjYXNlIDI6dC5zZW50KCksY2sobiksdC5sYWJlbD0zO2Nhc2UgMzpyZXR1cm5bMl19fSl9KX0pKSxuLlVyfWZ1bmN0aW9uIG1rKG4pe3ZhciB0LGUscixpPXRoaXM7cmV0dXJuIG4uUXJ8fChuLlFyPSh0PW4uZGF0YXN0b3JlLGU9bi5hc3luY1F1ZXVlLHI9e0lpOmZ1bmN0aW9uKGUpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gbWsoZSkuQXIoKSxbMl19KX0pfS5iaW5kKG51bGwsbiksUmk6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbiYmbWsoZSkucHI/WzQsZnVuY3Rpb24ocixpKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBKdyhuPWkuY29kZSkmJm4hPT1lYi5BQk9SVEVEPyhlPXIua3Iuc2hpZnQoKSxtayhyKS5zcigpLFs0LGZrKHIsZnVuY3Rpb24oKXtyZXR1cm4gci5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUoZS5iYXRjaElkLGkpfSldKTpbMywzXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLFs0LHBrKHIpXTtjYXNlIDI6dC5zZW50KCksdC5sYWJlbD0zO2Nhc2UgMzpyZXR1cm5bMl19fSl9KX0oZSxuKV06WzMsMl07Y2FzZSAxOnQuc2VudCgpLHQubGFiZWw9MjtjYXNlIDI6cmV0dXJuIGRrKGUpJiZ2ayhlKSxbMl19fSl9KX0uYmluZChudWxsLG4pLElyOmZ1bmN0aW9uKG8pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHIsaTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtmb3IoZT1tayhvKSxuPTAscj1vLmtyO248ci5sZW5ndGg7bisrKWk9cltuXSxlLkVyKGkubXV0YXRpb25zKTtyZXR1cm5bMl19KX0pfS5iaW5kKG51bGwsbiksVHI6ZnVuY3Rpb24ocixpLG8pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9ci5rci5zaGlmdCgpLG49WVQuZnJvbShlLGksbyksWzQsZmsocixmdW5jdGlvbigpe3JldHVybiByLnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZShuKX0pXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLFs0LHBrKHIpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFsyXX19KX0pfS5iaW5kKG51bGwsbil9LHQuYnIoKSxuZXcgSEMoZSx0LkhpLHQuY3JlZGVudGlhbHMsdC5SLHIpKSxuLk1yLnB1c2goZnVuY3Rpb24oZSl7cmV0dXJuICRpKGksdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU/KG4uUXIuc3IoKSxbNCxwayhuKV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksWzMsNF07Y2FzZSAyOnJldHVybls0LG4uUXIuc3RvcCgpXTtjYXNlIDM6dC5zZW50KCksMDxuLmtyLmxlbmd0aCYmKGFiKFwiUmVtb3RlU3RvcmVcIixcIlN0b3BwaW5nIHdyaXRlIHN0cmVhbSB3aXRoIFwiK24ua3IubGVuZ3RoK1wiIHBlbmRpbmcgd3JpdGVzXCIpLG4ua3I9W10pLHQubGFiZWw9NDtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9KSksbi5Rcn12YXIgYms9KF9rLmNyZWF0ZUFuZFNjaGVkdWxlPWZ1bmN0aW9uKHQsZSxuLHIsaSl7aT1uZXcgX2sodCxlLERhdGUubm93KCkrbixyLGkpO3JldHVybiBpLnN0YXJ0KG4pLGl9LF9rLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMudGltZXJIYW5kbGU9c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBlLmhhbmRsZURlbGF5RWxhcHNlZCgpfSx0KX0sX2sucHJvdG90eXBlLnNraXBEZWxheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpfSxfay5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe251bGwhPT10aGlzLnRpbWVySGFuZGxlJiYodGhpcy5jbGVhclRpbWVvdXQoKSx0aGlzLmRlZmVycmVkLnJlamVjdChuZXcgbmIoZWIuQ0FOQ0VMTEVELFwiT3BlcmF0aW9uIGNhbmNlbGxlZFwiKyh0P1wiOiBcIit0OlwiXCIpKSkpfSxfay5wcm90b3R5cGUuaGFuZGxlRGVsYXlFbGFwc2VkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbigpe3JldHVybiBudWxsIT09ZS50aW1lckhhbmRsZT8oZS5jbGVhclRpbWVvdXQoKSxlLm9wKCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZS5kZWZlcnJlZC5yZXNvbHZlKHQpfSkpOlByb21pc2UucmVzb2x2ZSgpfSl9LF9rLnByb3RvdHlwZS5jbGVhclRpbWVvdXQ9ZnVuY3Rpb24oKXtudWxsIT09dGhpcy50aW1lckhhbmRsZSYmKHRoaXMucmVtb3ZhbENhbGxiYWNrKHRoaXMpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVySGFuZGxlKSx0aGlzLnRpbWVySGFuZGxlPW51bGwpfSxfayk7ZnVuY3Rpb24gX2sodCxlLG4scixpKXt0aGlzLmFzeW5jUXVldWU9dCx0aGlzLnRpbWVySWQ9ZSx0aGlzLnRhcmdldFRpbWVNcz1uLHRoaXMub3A9cix0aGlzLnJlbW92YWxDYWxsYmFjaz1pLHRoaXMuZGVmZXJyZWQ9bmV3IENULHRoaXMudGhlbj10aGlzLmRlZmVycmVkLnByb21pc2UudGhlbi5iaW5kKHRoaXMuZGVmZXJyZWQucHJvbWlzZSksdGhpcy5kZWZlcnJlZC5wcm9taXNlLmNhdGNoKGZ1bmN0aW9uKHQpe30pfWZ1bmN0aW9uIHdrKHQsZSl7aWYoc2IoXCJBc3luY1F1ZXVlXCIsZStcIjogXCIrdCksVVQodCkpcmV0dXJuIG5ldyBuYihlYi5VTkFWQUlMQUJMRSxlK1wiOiBcIit0KTt0aHJvdyB0fWZ1bmN0aW9uIElrKCl7dGhpcy5xdWVyaWVzPW5ldyAkRShudyxldyksdGhpcy5vbmxpbmVTdGF0ZT1cIlVua25vd25cIix0aGlzLkdyPW5ldyBTZXR9dmFyIFRrPShBay5lbXB0eVNldD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEFrKHQuY29tcGFyYXRvcil9LEFrLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPXRoaXMua2V5ZWRNYXAuZ2V0KHQpfSxBay5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmtleWVkTWFwLmdldCh0KX0sQWsucHJvdG90eXBlLmZpcnN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1pbktleSgpfSxBay5wcm90b3R5cGUubGFzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvcnRlZFNldC5tYXhLZXkoKX0sQWsucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb3J0ZWRTZXQuaXNFbXB0eSgpfSxBay5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbih0KXt0PXRoaXMua2V5ZWRNYXAuZ2V0KHQpO3JldHVybiB0P3RoaXMuc29ydGVkU2V0LmluZGV4T2YodCk6LTF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBay5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvcnRlZFNldC5zaXplfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLEFrLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKG4pe3RoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24odCxlKXtyZXR1cm4gbih0KSwhMX0pfSxBay5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZGVsZXRlKHQua2V5KTtyZXR1cm4gZS5jb3B5KGUua2V5ZWRNYXAuaW5zZXJ0KHQua2V5LHQpLGUuc29ydGVkU2V0Lmluc2VydCh0LG51bGwpKX0sQWsucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldCh0KTtyZXR1cm4gZT90aGlzLmNvcHkodGhpcy5rZXllZE1hcC5yZW1vdmUodCksdGhpcy5zb3J0ZWRTZXQucmVtb3ZlKGUpKTp0aGlzfSxBay5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBBaykpcmV0dXJuITE7aWYodGhpcy5zaXplIT09dC5zaXplKXJldHVybiExO2Zvcih2YXIgZT10aGlzLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpLG49dC5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciByPWUuZ2V0TmV4dCgpLmtleSxpPW4uZ2V0TmV4dCgpLmtleTtpZighci5pc0VxdWFsKGkpKXJldHVybiExfXJldHVybiEwfSxBay5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UucHVzaCh0LnRvU3RyaW5nKCkpfSksMD09PWUubGVuZ3RoP1wiRG9jdW1lbnRTZXQgKClcIjpcIkRvY3VtZW50U2V0IChcXG4gIFwiK2Uuam9pbihcIiAgXFxuXCIpK1wiXFxuKVwifSxBay5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBBaztyZXR1cm4gbi5jb21wYXJhdG9yPXRoaXMuY29tcGFyYXRvcixuLmtleWVkTWFwPXQsbi5zb3J0ZWRTZXQ9ZSxufSxBayksRWs9KE5rLnByb3RvdHlwZS50cmFjaz1mdW5jdGlvbih0KXt2YXIgZT10LmRvYy5rZXksbj10aGlzLktyLmdldChlKTshbnx8MCE9PXQudHlwZSYmMz09PW4udHlwZT90aGlzLktyPXRoaXMuS3IuaW5zZXJ0KGUsdCk6Mz09PXQudHlwZSYmMSE9PW4udHlwZT90aGlzLktyPXRoaXMuS3IuaW5zZXJ0KGUse3R5cGU6bi50eXBlLGRvYzp0LmRvY30pOjI9PT10LnR5cGUmJjI9PT1uLnR5cGU/dGhpcy5Lcj10aGlzLktyLmluc2VydChlLHt0eXBlOjIsZG9jOnQuZG9jfSk6Mj09PXQudHlwZSYmMD09PW4udHlwZT90aGlzLktyPXRoaXMuS3IuaW5zZXJ0KGUse3R5cGU6MCxkb2M6dC5kb2N9KToxPT09dC50eXBlJiYwPT09bi50eXBlP3RoaXMuS3I9dGhpcy5Lci5yZW1vdmUoZSk6MT09PXQudHlwZSYmMj09PW4udHlwZT90aGlzLktyPXRoaXMuS3IuaW5zZXJ0KGUse3R5cGU6MSxkb2M6bi5kb2N9KTowPT09dC50eXBlJiYxPT09bi50eXBlP3RoaXMuS3I9dGhpcy5Lci5pbnNlcnQoZSx7dHlwZToyLGRvYzp0LmRvY30pOmhiKCl9LE5rLnByb3RvdHlwZS5qcj1mdW5jdGlvbigpe3ZhciBuPVtdO3JldHVybiB0aGlzLktyLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24odCxlKXtuLnB1c2goZSl9KSxufSxOayksU2s9KGtrLmZyb21Jbml0aWFsRG9jdW1lbnRzPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPVtdO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odCl7aS5wdXNoKHt0eXBlOjAsZG9jOnR9KX0pLG5ldyBrayh0LGUsVGsuZW1wdHlTZXQoZSksaSxuLHIsITAsITEpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoa2sucHJvdG90eXBlLFwiaGFzUGVuZGluZ1dyaXRlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5tdXRhdGVkS2V5cy5pc0VtcHR5KCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksa2sucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7aWYoISh0aGlzLmZyb21DYWNoZT09PXQuZnJvbUNhY2hlJiZ0aGlzLnN5bmNTdGF0ZUNoYW5nZWQ9PT10LnN5bmNTdGF0ZUNoYW5nZWQmJnRoaXMubXV0YXRlZEtleXMuaXNFcXVhbCh0Lm11dGF0ZWRLZXlzKSYmZXcodGhpcy5xdWVyeSx0LnF1ZXJ5KSYmdGhpcy5kb2NzLmlzRXF1YWwodC5kb2NzKSYmdGhpcy5vbGREb2NzLmlzRXF1YWwodC5vbGREb2NzKSkpcmV0dXJuITE7dmFyIGU9dGhpcy5kb2NDaGFuZ2VzLG49dC5kb2NDaGFuZ2VzO2lmKGUubGVuZ3RoIT09bi5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspaWYoZVtyXS50eXBlIT09bltyXS50eXBlfHwhZVtyXS5kb2MuaXNFcXVhbChuW3JdLmRvYykpcmV0dXJuITE7cmV0dXJuITB9LGtrKSxDaz1mdW5jdGlvbigpe3RoaXMuV3I9dm9pZCAwLHRoaXMubGlzdGVuZXJzPVtdfTtmdW5jdGlvbiBrayh0LGUsbixyLGksbyxhLHMpe3RoaXMucXVlcnk9dCx0aGlzLmRvY3M9ZSx0aGlzLm9sZERvY3M9bix0aGlzLmRvY0NoYW5nZXM9cix0aGlzLm11dGF0ZWRLZXlzPWksdGhpcy5mcm9tQ2FjaGU9byx0aGlzLnN5bmNTdGF0ZUNoYW5nZWQ9YSx0aGlzLmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPXN9ZnVuY3Rpb24gTmsoKXt0aGlzLktyPW5ldyBadyhIYi5jb21wYXJhdG9yKX1mdW5jdGlvbiBBayhuKXt0aGlzLmNvbXBhcmF0b3I9bj9mdW5jdGlvbih0LGUpe3JldHVybiBuKHQsZSl8fEhiLmNvbXBhcmF0b3IodC5rZXksZS5rZXkpfTpmdW5jdGlvbih0LGUpe3JldHVybiBIYi5jb21wYXJhdG9yKHQua2V5LGUua2V5KX0sdGhpcy5rZXllZE1hcD1sSSx0aGlzLnNvcnRlZFNldD1uZXcgWncodGhpcy5jb21wYXJhdG9yKX1mdW5jdGlvbiBSayhhLHMpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxvO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6aWYoZT1hLG49cy5xdWVyeSxyPSExLChpPWUucXVlcmllcy5nZXQobikpfHwocj0hMCxpPW5ldyBDayksIXIpcmV0dXJuWzMsNF07dC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsMywsNF0pLG89aSxbNCxlLm9uTGlzdGVuKG4pXTtjYXNlIDI6cmV0dXJuIG8uV3I9dC5zZW50KCksWzMsNF07Y2FzZSAzOnJldHVybiBvPXQuc2VudCgpLG89d2sobyxcIkluaXRpYWxpemF0aW9uIG9mIHF1ZXJ5ICdcIitydyhzLnF1ZXJ5KStcIicgZmFpbGVkXCIpLFsyLHZvaWQgcy5vbkVycm9yKG8pXTtjYXNlIDQ6cmV0dXJuIGUucXVlcmllcy5zZXQobixpKSxpLmxpc3RlbmVycy5wdXNoKHMpLHMuenIoZS5vbmxpbmVTdGF0ZSksaS5XciYmcy5IcihpLldyKSYmT2soZSksWzJdfX0pfSl9ZnVuY3Rpb24gUGsoYSxzKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyLGksbztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gZT1hLG49cy5xdWVyeSxyPSExLChpPWUucXVlcmllcy5nZXQobikpJiYwPD0obz1pLmxpc3RlbmVycy5pbmRleE9mKHMpKSYmKGkubGlzdGVuZXJzLnNwbGljZShvLDEpLHI9MD09PWkubGlzdGVuZXJzLmxlbmd0aCkscj9bMiwoZS5xdWVyaWVzLmRlbGV0ZShuKSxlLm9uVW5saXN0ZW4obikpXTpbMl19KX0pfWZ1bmN0aW9uIE9rKHQpe3QuR3IuZm9yRWFjaChmdW5jdGlvbih0KXt0Lm5leHQoKX0pfXZhciBEaz0ocWsucHJvdG90eXBlLkhyPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyl7Zm9yKHZhciBlPVtdLG49MCxyPXQuZG9jQ2hhbmdlcztuPHIubGVuZ3RoO24rKyl7dmFyIGk9cltuXTszIT09aS50eXBlJiZlLnB1c2goaSl9dD1uZXcgU2sodC5xdWVyeSx0LmRvY3MsdC5vbGREb2NzLGUsdC5tdXRhdGVkS2V5cyx0LmZyb21DYWNoZSx0LnN5bmNTdGF0ZUNoYW5nZWQsITApfXZhciBvPSExO3JldHVybiB0aGlzLllyP3RoaXMuWnIodCkmJih0aGlzLkpyLm5leHQodCksbz0hMCk6dGhpcy5lbyh0LHRoaXMub25saW5lU3RhdGUpJiYodGhpcy5ubyh0KSxvPSEwKSx0aGlzLlhyPXQsb30scWsucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24odCl7dGhpcy5Kci5lcnJvcih0KX0scWsucHJvdG90eXBlLnpyPWZ1bmN0aW9uKHQpe3RoaXMub25saW5lU3RhdGU9dDt2YXIgZT0hMTtyZXR1cm4gdGhpcy5YciYmIXRoaXMuWXImJnRoaXMuZW8odGhpcy5Ycix0KSYmKHRoaXMubm8odGhpcy5YciksZT0hMCksZX0scWsucHJvdG90eXBlLmVvPWZ1bmN0aW9uKHQsZSl7aWYoIXQuZnJvbUNhY2hlKXJldHVybiEwO3ZhciBuPVwiT2ZmbGluZVwiIT09ZTtyZXR1cm4hKHRoaXMub3B0aW9ucy5zbyYmbnx8dC5kb2NzLmlzRW1wdHkoKSYmXCJPZmZsaW5lXCIhPT1lKX0scWsucHJvdG90eXBlLlpyPWZ1bmN0aW9uKHQpe2lmKDA8dC5kb2NDaGFuZ2VzLmxlbmd0aClyZXR1cm4hMDt2YXIgZT10aGlzLlhyJiZ0aGlzLlhyLmhhc1BlbmRpbmdXcml0ZXMhPT10Lmhhc1BlbmRpbmdXcml0ZXM7cmV0dXJuISghdC5zeW5jU3RhdGVDaGFuZ2VkJiYhZSkmJiEwPT09dGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXN9LHFrLnByb3RvdHlwZS5ubz1mdW5jdGlvbih0KXt0PVNrLmZyb21Jbml0aWFsRG9jdW1lbnRzKHQucXVlcnksdC5kb2NzLHQubXV0YXRlZEtleXMsdC5mcm9tQ2FjaGUpLHRoaXMuWXI9ITAsdGhpcy5Kci5uZXh0KHQpfSxxaykseGs9KGprLnByb3RvdHlwZS5pbz1mdW5jdGlvbigpe3JldHVyblwibWV0YWRhdGFcImluIHRoaXMucGF5bG9hZH0samspLExrPShVay5wcm90b3R5cGUucW49ZnVuY3Rpb24odCl7cmV0dXJuIFVJKHRoaXMuUix0KX0sVWsucHJvdG90eXBlLlVuPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm1ldGFkYXRhLmV4aXN0cz9XSSh0aGlzLlIsdC5kb2N1bWVudCwhMSk6c18ubmV3Tm9Eb2N1bWVudCh0aGlzLnFuKHQubWV0YWRhdGEubmFtZSksdGhpcy5Rbih0Lm1ldGFkYXRhLnJlYWRUaW1lKSl9LFVrLnByb3RvdHlwZS5Rbj14SSxVayksTWs9KEZrLnByb3RvdHlwZS5vbz1mdW5jdGlvbih0KXt0aGlzLnByb2dyZXNzLmJ5dGVzTG9hZGVkKz10LmJ5dGVMZW5ndGg7dmFyIGU9dGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ7cmV0dXJuIHQucGF5bG9hZC5uYW1lZFF1ZXJ5P3RoaXMucXVlcmllcy5wdXNoKHQucGF5bG9hZC5uYW1lZFF1ZXJ5KTp0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YT8odGhpcy5kb2N1bWVudHMucHVzaCh7bWV0YWRhdGE6dC5wYXlsb2FkLmRvY3VtZW50TWV0YWRhdGF9KSx0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YS5leGlzdHN8fCsrZSk6dC5wYXlsb2FkLmRvY3VtZW50JiYodGhpcy5kb2N1bWVudHNbdGhpcy5kb2N1bWVudHMubGVuZ3RoLTFdLmRvY3VtZW50PXQucGF5bG9hZC5kb2N1bWVudCwrK2UpLGUhPT10aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZD8odGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ9ZSxPYmplY3QuYXNzaWduKHt9LHRoaXMucHJvZ3Jlc3MpKTpudWxsfSxGay5wcm90b3R5cGUuY289ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBNYXAsbj1uZXcgTGsodGhpcy5SKSxyPTAsaT10O3I8aS5sZW5ndGg7cisrKXt2YXIgbz1pW3JdO2lmKG8ubWV0YWRhdGEucXVlcmllcylmb3IodmFyIGE9bi5xbihvLm1ldGFkYXRhLm5hbWUpLHM9MCx1PW8ubWV0YWRhdGEucXVlcmllcztzPHUubGVuZ3RoO3MrKyl7dmFyIGM9dVtzXSxoPShlLmdldChjKXx8ZEkoKSkuYWRkKGEpO2Uuc2V0KGMsaCl9fXJldHVybiBlfSxGay5wcm90b3R5cGUuY29tcGxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyLGk7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxmdW5jdGlvbihsLGYscCxkKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIG4scixpLG8sZSxhLHMsdSxjLGg7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpmb3Iobj1sLHI9ZEkoKSxpPXVJLG89ZkksZT0wLGE9cDtlPGEubGVuZ3RoO2UrKylzPWFbZV0sdT1mLnFuKHMubWV0YWRhdGEubmFtZSkscy5kb2N1bWVudCYmKHI9ci5hZGQodSkpLGk9aS5pbnNlcnQodSxmLlVuKHMpKSxvPW8uaW5zZXJ0KHUsZi5RbihzLm1ldGFkYXRhLnJlYWRUaW1lKSk7cmV0dXJuIGM9bi4kbi5uZXdDaGFuZ2VCdWZmZXIoe3RyYWNrUmVtb3ZhbHM6ITB9KSxbNCxPUyhuLFpfKEdfKENiLmZyb21TdHJpbmcoXCJfX2J1bmRsZV9fL2RvY3MvXCIrZCkpKSldO2Nhc2UgMTpyZXR1cm4gaD10LnNlbnQoKSxbMixuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgYnVuZGxlIGRvY3VtZW50c1wiLFwicmVhZHdyaXRlXCIsZnVuY3Rpb24oZSl7cmV0dXJuIFBTKGUsYyxpLG1iLm1pbigpLG8pLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIGMuYXBwbHkoZSksdH0pLm5leHQoZnVuY3Rpb24odCl7cmV0dXJuIG4ucWUucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSxoLnRhcmdldElkKS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIG4ucWUuYWRkTWF0Y2hpbmdLZXlzKGUscixoLnRhcmdldElkKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gbi5Nbi5FbihlLHQpfSkubmV4dChmdW5jdGlvbigpe3JldHVybiB0fSl9KX0pXX19KX0pfSh0aGlzLmxvY2FsU3RvcmUsbmV3IExrKHRoaXMuUiksdGhpcy5kb2N1bWVudHMsdGhpcy5yby5pZCldO2Nhc2UgMTplPXQuc2VudCgpLG49dGhpcy5jbyh0aGlzLmRvY3VtZW50cykscj0wLGk9dGhpcy5xdWVyaWVzLHQubGFiZWw9MjtjYXNlIDI6cmV0dXJuIHI8aS5sZW5ndGg/KGk9aVtyXSxbNCxmdW5jdGlvbihlLGksbyl7cmV0dXJuIHZvaWQgMD09PW8mJihvPWRJKCkpLCRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxPUyhlLFpfKGhFKGkuYnVuZGxlZFF1ZXJ5KSkpXTtjYXNlIDE6cmV0dXJuIG49dC5zZW50KCksWzIsKHI9ZSkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIG5hbWVkIHF1ZXJ5XCIsXCJyZWFkd3JpdGVcIixmdW5jdGlvbih0KXt2YXIgZT14SShpLnJlYWRUaW1lKTtpZigwPD1uLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8oZSkpcmV0dXJuIHIuUWUuc2F2ZU5hbWVkUXVlcnkodCxpKTtlPW4ud2l0aFJlc3VtZVRva2VuKFJiLkVNUFRZX0JZVEVfU1RSSU5HLGUpO3JldHVybiByLkZuPXIuRm4uaW5zZXJ0KGUudGFyZ2V0SWQsZSksci5xZS51cGRhdGVUYXJnZXREYXRhKHQsZSkubmV4dChmdW5jdGlvbigpe3JldHVybiByLnFlLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsbi50YXJnZXRJZCl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIHIucWUuYWRkTWF0Y2hpbmdLZXlzKHQsbyxuLnRhcmdldElkKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gci5RZS5zYXZlTmFtZWRRdWVyeSh0LGkpfSl9KV19fSl9KX0odGhpcy5sb2NhbFN0b3JlLGksbi5nZXQoaS5uYW1lKSldKTpbMyw1XTtjYXNlIDM6dC5zZW50KCksdC5sYWJlbD00O2Nhc2UgNDpyZXR1cm4gcisrLFszLDJdO2Nhc2UgNTpyZXR1cm5bMiwodGhpcy5wcm9ncmVzcy50YXNrU3RhdGU9XCJTdWNjZXNzXCIsbmV3IHlTKE9iamVjdC5hc3NpZ24oe30sdGhpcy5wcm9ncmVzcyksZSkpXX19KX0pfSxGayk7ZnVuY3Rpb24gRmsodCxlLG4pe3RoaXMucm89dCx0aGlzLmxvY2FsU3RvcmU9ZSx0aGlzLlI9bix0aGlzLnF1ZXJpZXM9W10sdGhpcy5kb2N1bWVudHM9W10sdGhpcy5wcm9ncmVzcz1Wayh0KX1mdW5jdGlvbiBVayh0KXt0aGlzLlI9dH1mdW5jdGlvbiBqayh0LGUpe3RoaXMucGF5bG9hZD10LHRoaXMuYnl0ZUxlbmd0aD1lfWZ1bmN0aW9uIHFrKHQsZSxuKXt0aGlzLnF1ZXJ5PXQsdGhpcy5Kcj1lLHRoaXMuWXI9ITEsdGhpcy5Ycj1udWxsLHRoaXMub25saW5lU3RhdGU9XCJVbmtub3duXCIsdGhpcy5vcHRpb25zPW58fHt9fWZ1bmN0aW9uIFZrKHQpe3JldHVybnt0YXNrU3RhdGU6XCJSdW5uaW5nXCIsZG9jdW1lbnRzTG9hZGVkOjAsYnl0ZXNMb2FkZWQ6MCx0b3RhbERvY3VtZW50czp0LnRvdGFsRG9jdW1lbnRzLHRvdGFsQnl0ZXM6dC50b3RhbEJ5dGVzfX12YXIgQms9ZnVuY3Rpb24odCl7dGhpcy5rZXk9dH0sS2s9ZnVuY3Rpb24odCl7dGhpcy5rZXk9dH0sV2s9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShZay5wcm90b3R5cGUsXCJ3b1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51b30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxZay5wcm90b3R5cGUuX289ZnVuY3Rpb24odCxlKXt2YXIgYT10aGlzLHM9ZT9lLm1vOm5ldyBFayx1PShlfHx0aGlzKS5mbyxjPShlfHx0aGlzKS5tdXRhdGVkS2V5cyxoPXUsbD0hMSxmPXpfKHRoaXMucXVlcnkpJiZ1LnNpemU9PT10aGlzLnF1ZXJ5LmxpbWl0P3UubGFzdCgpOm51bGwscD1RXyh0aGlzLnF1ZXJ5KSYmdS5zaXplPT09dGhpcy5xdWVyeS5saW1pdD91LmZpcnN0KCk6bnVsbDtpZih0Lmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24odCxlKXt2YXIgbj11LmdldCh0KSxyPWl3KGEucXVlcnksZSk/ZTpudWxsLGk9ISFuJiZhLm11dGF0ZWRLZXlzLmhhcyhuLmtleSksbz0hIXImJihyLmhhc0xvY2FsTXV0YXRpb25zfHxhLm11dGF0ZWRLZXlzLmhhcyhyLmtleSkmJnIuaGFzQ29tbWl0dGVkTXV0YXRpb25zKSxlPSExO24mJnI/bi5kYXRhLmlzRXF1YWwoci5kYXRhKT9pIT09byYmKHMudHJhY2soe3R5cGU6Myxkb2M6cn0pLGU9ITApOmEueW8obixyKXx8KHMudHJhY2soe3R5cGU6Mixkb2M6cn0pLGU9ITAsKGYmJjA8YS5sbyhyLGYpfHxwJiZhLmxvKHIscCk8MCkmJihsPSEwKSk6IW4mJnI/KHMudHJhY2soe3R5cGU6MCxkb2M6cn0pLGU9ITApOm4mJiFyJiYocy50cmFjayh7dHlwZToxLGRvYzpufSksZT0hMCwoZnx8cCkmJihsPSEwKSksZSYmKGM9cj8oaD1oLmFkZChyKSxvP2MuYWRkKHQpOmMuZGVsZXRlKHQpKTooaD1oLmRlbGV0ZSh0KSxjLmRlbGV0ZSh0KSkpfSksel8odGhpcy5xdWVyeSl8fFFfKHRoaXMucXVlcnkpKWZvcig7aC5zaXplPnRoaXMucXVlcnkubGltaXQ7KXt2YXIgbj16Xyh0aGlzLnF1ZXJ5KT9oLmxhc3QoKTpoLmZpcnN0KCksaD1oLmRlbGV0ZShuLmtleSksYz1jLmRlbGV0ZShuLmtleSk7cy50cmFjayh7dHlwZToxLGRvYzpufSl9cmV0dXJue2ZvOmgsbW86cyxObjpsLG11dGF0ZWRLZXlzOmN9fSxZay5wcm90b3R5cGUueW89ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5oYXNMb2NhbE11dGF0aW9ucyYmZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMmJiFlLmhhc0xvY2FsTXV0YXRpb25zfSxZay5wcm90b3R5cGUuYXBwbHlDaGFuZ2VzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzLHI9dGhpcy5mbzt0aGlzLmZvPXQuZm8sdGhpcy5tdXRhdGVkS2V5cz10Lm11dGF0ZWRLZXlzO3ZhciBpPXQubW8uanIoKTtpLnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gcj10LnR5cGUsaT1lLnR5cGUsbihyKS1uKGkpfHxvLmxvKHQuZG9jLGUuZG9jKTtmdW5jdGlvbiBuKHQpe3N3aXRjaCh0KXtjYXNlIDA6cmV0dXJuIDE7Y2FzZSAyOmNhc2UgMzpyZXR1cm4gMjtjYXNlIDE6cmV0dXJuIDA7ZGVmYXVsdDpyZXR1cm4gaGIoKX19dmFyIHIsaX0pLHRoaXMucG8obik7dmFyIGE9ZT90aGlzLkVvKCk6W10sbj0wPT09dGhpcy5oby5zaXplJiZ0aGlzLmN1cnJlbnQ/MTowLGU9biE9PXRoaXMuYW87cmV0dXJuIHRoaXMuYW89biwwIT09aS5sZW5ndGh8fGU/e3NuYXBzaG90Om5ldyBTayh0aGlzLnF1ZXJ5LHQuZm8scixpLHQubXV0YXRlZEtleXMsMD09bixlLCExKSxUbzphfTp7VG86YX19LFlrLnByb3RvdHlwZS56cj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jdXJyZW50JiZcIk9mZmxpbmVcIj09PXQ/KHRoaXMuY3VycmVudD0hMSx0aGlzLmFwcGx5Q2hhbmdlcyh7Zm86dGhpcy5mbyxtbzpuZXcgRWssbXV0YXRlZEtleXM6dGhpcy5tdXRhdGVkS2V5cyxObjohMX0sITEpKTp7VG86W119fSxZay5wcm90b3R5cGUuSW89ZnVuY3Rpb24odCl7cmV0dXJuIXRoaXMudW8uaGFzKHQpJiYhIXRoaXMuZm8uaGFzKHQpJiYhdGhpcy5mby5nZXQodCkuaGFzTG9jYWxNdXRhdGlvbnN9LFlrLnByb3RvdHlwZS5wbz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3QmJih0LmFkZGVkRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUudW89ZS51by5hZGQodCl9KSx0Lm1vZGlmaWVkRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24odCl7fSksdC5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUudW89ZS51by5kZWxldGUodCl9KSx0aGlzLmN1cnJlbnQ9dC5jdXJyZW50KX0sWWsucHJvdG90eXBlLkVvPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighdGhpcy5jdXJyZW50KXJldHVybltdO3ZhciBuPXRoaXMuaG87dGhpcy5obz1kSSgpLHRoaXMuZm8uZm9yRWFjaChmdW5jdGlvbih0KXtlLklvKHQua2V5KSYmKGUuaG89ZS5oby5hZGQodC5rZXkpKX0pO3ZhciByPVtdO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24odCl7ZS5oby5oYXModCl8fHIucHVzaChuZXcgS2sodCkpfSksdGhpcy5oby5mb3JFYWNoKGZ1bmN0aW9uKHQpe24uaGFzKHQpfHxyLnB1c2gobmV3IEJrKHQpKX0pLHJ9LFlrLnByb3RvdHlwZS5Bbz1mdW5jdGlvbih0KXt0aGlzLnVvPXQuQm4sdGhpcy5obz1kSSgpO3Q9dGhpcy5fbyh0LmRvY3VtZW50cyk7cmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKHQsITApfSxZay5wcm90b3R5cGUuUm89ZnVuY3Rpb24oKXtyZXR1cm4gU2suZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSx0aGlzLmZvLHRoaXMubXV0YXRlZEtleXMsMD09PXRoaXMuYW8pfSxZayksSGs9ZnVuY3Rpb24odCxlLG4pe3RoaXMucXVlcnk9dCx0aGlzLnRhcmdldElkPWUsdGhpcy52aWV3PW59LEdrPWZ1bmN0aW9uKHQpe3RoaXMua2V5PXQsdGhpcy5ibz0hMX0sems9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRay5wcm90b3R5cGUsXCJpc1ByaW1hcnlDbGllbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuITA9PT10aGlzLk9vfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLFFrKTtmdW5jdGlvbiBRayh0LGUsbixyLGksbyl7dGhpcy5sb2NhbFN0b3JlPXQsdGhpcy5yZW1vdGVTdG9yZT1lLHRoaXMuZXZlbnRNYW5hZ2VyPW4sdGhpcy5zaGFyZWRDbGllbnRTdGF0ZT1yLHRoaXMuY3VycmVudFVzZXI9aSx0aGlzLm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zPW8sdGhpcy52bz17fSx0aGlzLlBvPW5ldyAkRShudyxldyksdGhpcy5Wbz1uZXcgTWFwLHRoaXMuU289bmV3IFNldCx0aGlzLkRvPW5ldyBadyhIYi5jb21wYXJhdG9yKSx0aGlzLkNvPW5ldyBNYXAsdGhpcy5Obz1uZXcgVlMsdGhpcy54bz17fSx0aGlzLkZvPW5ldyBNYXAsdGhpcy5rbz1ERS5ZdCgpLHRoaXMub25saW5lU3RhdGU9XCJVbmtub3duXCIsdGhpcy5Pbz12b2lkIDB9ZnVuY3Rpb24gWWsodCxlKXt0aGlzLnF1ZXJ5PXQsdGhpcy51bz1lLHRoaXMuYW89bnVsbCx0aGlzLmN1cnJlbnQ9ITEsdGhpcy5obz1kSSgpLHRoaXMubXV0YXRlZEtleXM9ZEkoKSx0aGlzLmxvPW93KHQpLHRoaXMuZm89bmV3IFRrKHRoaXMubG8pfWZ1bmN0aW9uIFhrKGksbyxhLHMpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gaS4kbz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIsaSxvLGEpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuKGU9aS52aWV3Ll9vKG8pKS5Obj9bNCx4UyhyLmxvY2FsU3RvcmUsaS5xdWVyeSwhMSkudGhlbihmdW5jdGlvbih0KXt0PXQuZG9jdW1lbnRzO3JldHVybiBpLnZpZXcuX28odCxlKX0pXTpbMywyXTtjYXNlIDE6ZT10LnNlbnQoKSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVybiBuPWEmJmEudGFyZ2V0Q2hhbmdlcy5nZXQoaS50YXJnZXRJZCksbj1pLnZpZXcuYXBwbHlDaGFuZ2VzKGUsci5pc1ByaW1hcnlDbGllbnQsbiksWzIsKGFOKHIsaS50YXJnZXRJZCxuLlRvKSxuLnNuYXBzaG90KV19fSl9KX0oaSx0LGUsbil9LFs0LHhTKGkubG9jYWxTdG9yZSxvLCEwKV07Y2FzZSAxOnJldHVybiBuPXQuc2VudCgpLHI9bmV3IFdrKG8sbi5CbiksZT1yLl9vKG4uZG9jdW1lbnRzKSxuPXlJLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShhLHMmJlwiT2ZmbGluZVwiIT09aS5vbmxpbmVTdGF0ZSksbj1yLmFwcGx5Q2hhbmdlcyhlLGkuaXNQcmltYXJ5Q2xpZW50LG4pLGFOKGksYSxuLlRvKSxyPW5ldyBIayhvLGEsciksWzIsKGkuUG8uc2V0KG8sciksaS5Wby5oYXMoYSk/aS5Wby5nZXQoYSkucHVzaChvKTppLlZvLnNldChhLFtvXSksbi5zbmFwc2hvdCldfX0pfSl9ZnVuY3Rpb24gSmsoZixwLGQpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgYSxsO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6bD12TihmKSx0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSw1LCw2XSksWzQsKGk9bC5sb2NhbFN0b3JlLHM9cCxjPWksaD15Yi5ub3coKSxvPXMucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuYWRkKGUua2V5KX0sZEkoKSksYy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvY2FsbHkgd3JpdGUgbXV0YXRpb25zXCIsXCJyZWFkd3JpdGVcIixmdW5jdGlvbihhKXtyZXR1cm4gYy5Nbi5wbihhLG8pLm5leHQoZnVuY3Rpb24odCl7dT10O2Zvcih2YXIgZT1bXSxuPTAscj1zO248ci5sZW5ndGg7bisrKXt2YXIgaT1yW25dLG89ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bnVsbCxyPTAsaT10LmZpZWxkVHJhbnNmb3JtcztyPGkubGVuZ3RoO3IrKyl7dmFyIG89aVtyXSxhPWUuZGF0YS5maWVsZChvLmZpZWxkKSxhPWN3KG8udHJhbnNmb3JtLGF8fG51bGwpO251bGwhPWEmJihuPW51bGw9PW4/b18uZW1wdHkoKTpuKS5zZXQoby5maWVsZCxhKX1yZXR1cm4gbnx8bnVsbH0oaSx1LmdldChpLmtleSkpO251bGwhPW8mJmUucHVzaChuZXcgRncoaS5rZXksbyxmdW5jdGlvbiBhKHQpe3ZhciBzPVtdO3JldHVybiBJYih0LmZpZWxkc3x8e30sZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgTmIoW3RdKTtpZihpXyhlKSlpZigwPT09KGU9YShlLm1hcFZhbHVlKS5maWVsZHMpLmxlbmd0aClzLnB1c2gobik7ZWxzZSBmb3IodmFyIHI9MCxpPWU7cjxpLmxlbmd0aDtyKyspe3ZhciBvPWlbcl07cy5wdXNoKG4uY2hpbGQobykpfWVsc2Ugcy5wdXNoKG4pfSksbmV3IEFiKHMpfShvLnRvUHJvdG8oKS5tYXBWYWx1ZSksTncuZXhpc3RzKCEwKSkpfXJldHVybiBjLl9uLmFkZE11dGF0aW9uQmF0Y2goYSxoLGUscyl9KX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQodSkse2JhdGNoSWQ6dC5iYXRjaElkLGNoYW5nZXM6dX19KSldO2Nhc2UgMjpyZXR1cm4gYT10LnNlbnQoKSxsLnNoYXJlZENsaWVudFN0YXRlLmFkZFBlbmRpbmdNdXRhdGlvbihhLmJhdGNoSWQpLGU9bCxuPWEuYmF0Y2hJZCxyPWQsaT0oaT0oaT1lLnhvW2UuY3VycmVudFVzZXIudG9LZXkoKV0pfHxuZXcgWncoZGIpKS5pbnNlcnQobixyKSxlLnhvW2UuY3VycmVudFVzZXIudG9LZXkoKV09aSxbNCx1TihsLGEuY2hhbmdlcyldO2Nhc2UgMzpyZXR1cm4gdC5zZW50KCksWzQscGsobC5yZW1vdGVTdG9yZSldO2Nhc2UgNDpyZXR1cm4gdC5zZW50KCksWzMsNl07Y2FzZSA1OnJldHVybiBsPXQuc2VudCgpLGw9d2sobCxcIkZhaWxlZCB0byBwZXJzaXN0IHdyaXRlXCIpLGQucmVqZWN0KGwpLFszLDZdO2Nhc2UgNjpyZXR1cm5bMl19dmFyIGUsbixyLGkscyx1LGMsaCxvfSl9KX1mdW5jdGlvbiAkayhyLGkpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgbixlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6bj1yLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDQsLDZdKSxbNCxSUyhuLmxvY2FsU3RvcmUsaSldO2Nhc2UgMjpyZXR1cm4gZT10LnNlbnQoKSxpLnRhcmdldENoYW5nZXMuZm9yRWFjaChmdW5jdGlvbih0LGUpe2U9bi5Dby5nZXQoZSk7ZSYmKGxiKHQuYWRkZWREb2N1bWVudHMuc2l6ZSt0Lm1vZGlmaWVkRG9jdW1lbnRzLnNpemUrdC5yZW1vdmVkRG9jdW1lbnRzLnNpemU8PTEpLDA8dC5hZGRlZERvY3VtZW50cy5zaXplP2UuYm89ITA6MDx0Lm1vZGlmaWVkRG9jdW1lbnRzLnNpemU/bGIoZS5ibyk6MDx0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSYmKGxiKGUuYm8pLGUuYm89ITEpKX0pLFs0LHVOKG4sZSxpKV07Y2FzZSAzOnJldHVybiB0LnNlbnQoKSxbMyw2XTtjYXNlIDQ6cmV0dXJuWzQscUUodC5zZW50KCkpXTtjYXNlIDU6cmV0dXJuIHQuc2VudCgpLFszLDZdO2Nhc2UgNjpyZXR1cm5bMl19fSl9KX1mdW5jdGlvbiBaayh0LG4sZSl7dmFyIHIsdD10Oyh0LmlzUHJpbWFyeUNsaWVudCYmMD09PWV8fCF0LmlzUHJpbWFyeUNsaWVudCYmMT09PWUpJiYocj1bXSx0LlBvLmZvckVhY2goZnVuY3Rpb24odCxlKXtlPWUudmlldy56cihuKTtlLnNuYXBzaG90JiZyLnB1c2goZS5zbmFwc2hvdCl9KSxmdW5jdGlvbih0LGkpe3Qub25saW5lU3RhdGU9aTt2YXIgbz0hMTt0LnF1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wLHI9ZS5saXN0ZW5lcnM7bjxyLmxlbmd0aDtuKyspcltuXS56cihpKSYmKG89ITApfSksbyYmT2sodCl9KHQuZXZlbnRNYW5hZ2VyLG4pLHIubGVuZ3RoJiZ0LnZvLl9yKHIpLHQub25saW5lU3RhdGU9bix0LmlzUHJpbWFyeUNsaWVudCYmdC5zaGFyZWRDbGllbnRTdGF0ZS5zZXRPbmxpbmVTdGF0ZShuKSl9ZnVuY3Rpb24gdE4oYSxzLHUpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6bj1hLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDQsLDZdKSxbNCwoZT1uLmxvY2FsU3RvcmUscj1zLChpPWUpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVqZWN0IGJhdGNoXCIsXCJyZWFkd3JpdGUtcHJpbWFyeVwiLGZ1bmN0aW9uKGUpe3ZhciBuO3JldHVybiBpLl9uLmxvb2t1cE11dGF0aW9uQmF0Y2goZSxyKS5uZXh0KGZ1bmN0aW9uKHQpe3JldHVybiBsYihudWxsIT09dCksbj10LmtleXMoKSxpLl9uLnJlbW92ZU11dGF0aW9uQmF0Y2goZSx0KX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gaS5fbi5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayhlKX0pLm5leHQoZnVuY3Rpb24oKXtyZXR1cm4gaS5Nbi5wbihlLG4pfSl9KSldO2Nhc2UgMjpyZXR1cm4gbz10LnNlbnQoKSxyTihuLHMsdSksbk4obixzKSxuLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUocyxcInJlamVjdGVkXCIsdSksWzQsdU4obixvKV07Y2FzZSAzOnJldHVybiB0LnNlbnQoKSxbMyw2XTtjYXNlIDQ6cmV0dXJuWzQscUUodC5zZW50KCkpXTtjYXNlIDU6cmV0dXJuIHQuc2VudCgpLFszLDZdO2Nhc2UgNjpyZXR1cm5bMl19dmFyIGUscixpfSl9KX1mdW5jdGlvbiBlTihvLGEpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgbixyLGk7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDp1aygobj1vKS5yZW1vdGVTdG9yZSl8fGFiKFwiU3luY0VuZ2luZVwiLFwiVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICdhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIiksdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsMywsNF0pLFs0LChlPW4ubG9jYWxTdG9yZSkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgaGlnaGVzdCB1bmFja25vd2xlZGdlZCBiYXRjaCBpZFwiLFwicmVhZG9ubHlcIixmdW5jdGlvbih0KXtyZXR1cm4gZS5fbi5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHQpfSldO2Nhc2UgMjpyZXR1cm4tMT09PShyPXQuc2VudCgpKT9bMix2b2lkIGEucmVzb2x2ZSgpXTooKGk9bi5Gby5nZXQocil8fFtdKS5wdXNoKGEpLG4uRm8uc2V0KHIsaSksWzMsNF0pO2Nhc2UgMzpyZXR1cm4gaT10LnNlbnQoKSxpPXdrKGksXCJJbml0aWFsaXphdGlvbiBvZiB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIG9wZXJhdGlvbiBmYWlsZWRcIiksYS5yZWplY3QoaSksWzMsNF07Y2FzZSA0OnJldHVyblsyXX12YXIgZX0pfSl9ZnVuY3Rpb24gbk4odCxlKXsodC5Gby5nZXQoZSl8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QucmVzb2x2ZSgpfSksdC5Gby5kZWxldGUoZSl9ZnVuY3Rpb24gck4odCxlLG4pe3ZhciByPXQsaT1yLnhvW3IuY3VycmVudFVzZXIudG9LZXkoKV07aSYmKCh0PWkuZ2V0KGUpKSYmKG4/dC5yZWplY3Qobik6dC5yZXNvbHZlKCksaT1pLnJlbW92ZShlKSksci54b1tyLmN1cnJlbnRVc2VyLnRvS2V5KCldPWkpfWZ1bmN0aW9uIGlOKGUsdCxuKXt2b2lkIDA9PT1uJiYobj1udWxsKSxlLnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodCk7Zm9yKHZhciByPTAsaT1lLlZvLmdldCh0KTtyPGkubGVuZ3RoO3IrKyl7dmFyIG89aVtyXTtlLlBvLmRlbGV0ZShvKSxuJiZlLnZvLk1vKG8sbil9ZS5Wby5kZWxldGUodCksZS5pc1ByaW1hcnlDbGllbnQmJmUuTm8uWm4odCkuZm9yRWFjaChmdW5jdGlvbih0KXtlLk5vLmNvbnRhaW5zS2V5KHQpfHxvTihlLHQpfSl9ZnVuY3Rpb24gb04odCxlKXt0LlNvLmRlbGV0ZShlLnBhdGguY2Fub25pY2FsU3RyaW5nKCkpO3ZhciBuPXQuRG8uZ2V0KGUpO251bGwhPT1uJiYocmsodC5yZW1vdGVTdG9yZSxuKSx0LkRvPXQuRG8ucmVtb3ZlKGUpLHQuQ28uZGVsZXRlKG4pLHNOKHQpKX1mdW5jdGlvbiBhTih0LGUsbil7Zm9yKHZhciByLGksbyxhPTAscz1uO2E8cy5sZW5ndGg7YSsrKXt2YXIgdT1zW2FdO3UgaW5zdGFuY2VvZiBCaz8odC5Oby5hZGRSZWZlcmVuY2UodS5rZXksZSkscj10LG89dm9pZCAwLGk9KG89KGk9dSkua2V5KS5wYXRoLmNhbm9uaWNhbFN0cmluZygpLHIuRG8uZ2V0KG8pfHxyLlNvLmhhcyhpKXx8KGFiKFwiU3luY0VuZ2luZVwiLFwiTmV3IGRvY3VtZW50IGluIGxpbWJvOiBcIitvKSxyLlNvLmFkZChpKSxzTihyKSkpOnUgaW5zdGFuY2VvZiBLaz8oYWIoXCJTeW5jRW5naW5lXCIsXCJEb2N1bWVudCBubyBsb25nZXIgaW4gbGltYm86IFwiK3Uua2V5KSx0Lk5vLnJlbW92ZVJlZmVyZW5jZSh1LmtleSxlKSx0Lk5vLmNvbnRhaW5zS2V5KHUua2V5KXx8b04odCx1LmtleSkpOmhiKCl9fWZ1bmN0aW9uIHNOKHQpe2Zvcig7MDx0LlNvLnNpemUmJnQuRG8uc2l6ZTx0Lm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOyl7dmFyIGU9dC5Tby52YWx1ZXMoKS5uZXh0KCkudmFsdWU7dC5Tby5kZWxldGUoZSk7dmFyIG49bmV3IEhiKENiLmZyb21TdHJpbmcoZSkpLGU9dC5rby5uZXh0KCk7dC5Dby5zZXQoZSxuZXcgR2sobikpLHQuRG89dC5Eby5pbnNlcnQobixlKSxuayh0LnJlbW90ZVN0b3JlLG5ldyBYVChaXyhHXyhuLnBhdGgpKSxlLDIsJG0ubykpfX1mdW5jdGlvbiB1TihlLGEscyl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBuLHIsaSxvO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHI9W10saT1bXSxvPVtdLChuPWUpLlBvLmlzRW1wdHkoKT9bMywzXToobi5Qby5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7by5wdXNoKG4uJG8oZSxhLHMpLnRoZW4oZnVuY3Rpb24odCl7dCYmKG4uaXNQcmltYXJ5Q2xpZW50JiZuLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUoZS50YXJnZXRJZCx0LmZyb21DYWNoZT9cIm5vdC1jdXJyZW50XCI6XCJjdXJyZW50XCIpLHIucHVzaCh0KSx0PWJTLlBuKGUudGFyZ2V0SWQsdCksaS5wdXNoKHQpKX0pKX0pLFs0LFByb21pc2UuYWxsKG8pXSk7Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxuLnZvLl9yKHIpLFs0LGZ1bmN0aW9uKHUsYyl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciByLGUsbixpLG8sYSxzO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cj11LHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCxyLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlc1wiLFwicmVhZHdyaXRlXCIsZnVuY3Rpb24obil7cmV0dXJuIGtULmZvckVhY2goYyxmdW5jdGlvbihlKXtyZXR1cm4ga1QuZm9yRWFjaChlLmJuLGZ1bmN0aW9uKHQpe3JldHVybiByLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZShuLGUudGFyZ2V0SWQsdCl9KS5uZXh0KGZ1bmN0aW9uKCl7cmV0dXJuIGtULmZvckVhY2goZS52bixmdW5jdGlvbih0KXtyZXR1cm4gci5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UobixlLnRhcmdldElkLHQpfSl9KX0pfSldO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksWzMsNF07Y2FzZSAzOmlmKCFVVChlPXQuc2VudCgpKSl0aHJvdyBlO3JldHVybiBhYihcIkxvY2FsU3RvcmVcIixcIkZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVyczogXCIrZSksWzMsNF07Y2FzZSA0OmZvcihuPTAsaT1jO248aS5sZW5ndGg7bisrKXM9aVtuXSxvPXMudGFyZ2V0SWQscy5mcm9tQ2FjaGV8fChhPXIuRm4uZ2V0KG8pLHM9YS5zbmFwc2hvdFZlcnNpb24scz1hLndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHMpLHIuRm49ci5Gbi5pbnNlcnQobyxzKSk7cmV0dXJuWzJdfX0pfSl9KG4ubG9jYWxTdG9yZSxpKV07Y2FzZSAyOnQuc2VudCgpLHQubGFiZWw9MztjYXNlIDM6cmV0dXJuWzJdfX0pfSl9ZnVuY3Rpb24gY04oaSxvKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIG4scjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybihuPWkpLmN1cnJlbnRVc2VyLmlzRXF1YWwobyk/WzMsM106KGFiKFwiU3luY0VuZ2luZVwiLFwiVXNlciBjaGFuZ2UuIE5ldyB1c2VyOlwiLG8udG9LZXkoKSksWzQsa1Mobi5sb2NhbFN0b3JlLG8pXSk7Y2FzZSAxOnJldHVybiByPXQuc2VudCgpLG4uY3VycmVudFVzZXI9bywoZT1uKS5Gby5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZm9yRWFjaChmdW5jdGlvbih0KXt0LnJlamVjdChuZXcgbmIoZWIuQ0FOQ0VMTEVELFwiJ3dhaXRGb3JQZW5kaW5nV3JpdGVzJyBwcm9taXNlIGlzIHJlamVjdGVkIGR1ZSB0byBhIHVzZXIgY2hhbmdlLlwiKSl9KX0pLGUuRm8uY2xlYXIoKSxuLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UobyxyLnJlbW92ZWRCYXRjaElkcyxyLmFkZGVkQmF0Y2hJZHMpLFs0LHVOKG4sci5MbildO2Nhc2UgMjp0LnNlbnQoKSx0LmxhYmVsPTM7Y2FzZSAzOnJldHVyblsyXX12YXIgZX0pfSl9ZnVuY3Rpb24gaE4ocyx1LGMsaCl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBvLGE7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCwoZT0obz1zKS5sb2NhbFN0b3JlLG49dSxpPShyPWUpLl9uLHIucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb29rdXAgbXV0YXRpb24gZG9jdW1lbnRzXCIsXCJyZWFkb25seVwiLGZ1bmN0aW9uKGUpe3JldHVybiBpLmp0KGUsbikubmV4dChmdW5jdGlvbih0KXtyZXR1cm4gdD9yLk1uLnBuKGUsdCk6a1QucmVzb2x2ZShudWxsKX0pfSkpXTtjYXNlIDE6cmV0dXJuIG51bGw9PT0oYT10LnNlbnQoKSk/WzMsNl06XCJwZW5kaW5nXCIhPT1jP1szLDNdOls0LHBrKG8ucmVtb3RlU3RvcmUpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFszLDRdO2Nhc2UgMzpcImFja25vd2xlZGdlZFwiPT09Y3x8XCJyZWplY3RlZFwiPT09Yz8ock4obyx1LGh8fG51bGwpLG5OKG8sdSksby5sb2NhbFN0b3JlLl9uLkd0KHUpKTpoYigpLHQubGFiZWw9NDtjYXNlIDQ6cmV0dXJuWzQsdU4obyxhKV07Y2FzZSA1OnJldHVybiB0LnNlbnQoKSxbMyw3XTtjYXNlIDY6YWIoXCJTeW5jRW5naW5lXCIsXCJDYW5ub3QgYXBwbHkgbXV0YXRpb24gYmF0Y2ggd2l0aCBpZDogXCIrdSksdC5sYWJlbD03O2Nhc2UgNzpyZXR1cm5bMl19dmFyIGUsbixyLGl9KX0pfWZ1bmN0aW9uIGxOKGgsbCl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciByLGUsaSxvLGEscyx1LGM7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZE4ocj1oKSx2TihyKSwhMCE9PWx8fCEwPT09ci5Pbz9bMywzXTooZT1yLnNoYXJlZENsaWVudFN0YXRlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpLFs0LGZOKHIsZS50b0FycmF5KCkpXSk7Y2FzZSAxOnJldHVybiBpPXQuc2VudCgpLHIuT289ITAsWzQsZ2soci5yZW1vdGVTdG9yZSwhMCldO2Nhc2UgMjpmb3IodC5zZW50KCksbz0wLGE9aTtvPGEubGVuZ3RoO28rKylzPWFbb10sbmsoci5yZW1vdGVTdG9yZSxzKTtyZXR1cm5bMyw3XTtjYXNlIDM6cmV0dXJuITEhPT1sfHwhMT09PXIuT28/WzMsN106KHU9W10sYz1Qcm9taXNlLnJlc29sdmUoKSxyLlZvLmZvckVhY2goZnVuY3Rpb24odCxlKXtyLnNoYXJlZENsaWVudFN0YXRlLmlzTG9jYWxRdWVyeVRhcmdldChlKT91LnB1c2goZSk6Yz1jLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaU4ocixlKSxEUyhyLmxvY2FsU3RvcmUsZSwhMCl9KSxyayhyLnJlbW90ZVN0b3JlLGUpfSksWzQsY10pO2Nhc2UgNDpyZXR1cm4gdC5zZW50KCksWzQsZk4ocix1KV07Y2FzZSA1OnJldHVybiB0LnNlbnQoKSwobj1yKS5Dby5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7cmsobi5yZW1vdGVTdG9yZSxlKX0pLG4uTm8udHMoKSxuLkNvPW5ldyBNYXAsbi5Ebz1uZXcgWncoSGIuY29tcGFyYXRvciksci5Pbz0hMSxbNCxnayhyLnJlbW90ZVN0b3JlLCExKV07Y2FzZSA2OnQuc2VudCgpLHQubGFiZWw9NztjYXNlIDc6cmV0dXJuWzJdfXZhciBufSl9KX1mdW5jdGlvbiBmTihwLGQpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxvLGEscyx1LGMsaCxsLGY7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDplPXAsbj1bXSxyPVtdLGk9MCxvPWQsdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gaTxvLmxlbmd0aD8oYT1vW2ldLHM9dm9pZCAwLCh1PWUuVm8uZ2V0KGEpKSYmMCE9PXUubGVuZ3RoP1s0LE9TKGUubG9jYWxTdG9yZSxaXyh1WzBdKSldOlszLDddKTpbMywxM107Y2FzZSAyOnM9dC5zZW50KCksYz0wLGg9dSx0LmxhYmVsPTM7Y2FzZSAzOnJldHVybiBjPGgubGVuZ3RoPyhsPWhbY10sbD1lLlBvLmdldChsKSxbNCxmdW5jdGlvbihyLGkpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQseFMoKGU9cikubG9jYWxTdG9yZSxpLnF1ZXJ5LCEwKV07Y2FzZSAxOnJldHVybiBuPXQuc2VudCgpLG49aS52aWV3LkFvKG4pLFsyLChlLmlzUHJpbWFyeUNsaWVudCYmYU4oZSxpLnRhcmdldElkLG4uVG8pLG4pXX19KX0pfShlLGwpXSk6WzMsNl07Y2FzZSA0OihsPXQuc2VudCgpKS5zbmFwc2hvdCYmci5wdXNoKGwuc25hcHNob3QpLHQubGFiZWw9NTtjYXNlIDU6cmV0dXJuIGMrKyxbMywzXTtjYXNlIDY6cmV0dXJuWzMsMTFdO2Nhc2UgNzpyZXR1cm5bNCxMUyhlLmxvY2FsU3RvcmUsYSldO2Nhc2UgODpyZXR1cm4gZj10LnNlbnQoKSxbNCxPUyhlLmxvY2FsU3RvcmUsZildO2Nhc2UgOTpyZXR1cm4gcz10LnNlbnQoKSxbNCxYayhlLHBOKGYpLGEsITEpXTtjYXNlIDEwOnQuc2VudCgpLHQubGFiZWw9MTE7Y2FzZSAxMTpuLnB1c2gocyksdC5sYWJlbD0xMjtjYXNlIDEyOnJldHVybiBpKyssWzMsMV07Y2FzZSAxMzpyZXR1cm5bMiwoZS52by5fcihyKSxuKV19fSl9KX1mdW5jdGlvbiBwTih0KXtyZXR1cm4gSF8odC5wYXRoLHQuY29sbGVjdGlvbkdyb3VwLHQub3JkZXJCeSx0LmZpbHRlcnMsdC5saW1pdCxcIkZcIix0LnN0YXJ0QXQsdC5lbmRBdCl9ZnVuY3Rpb24gZE4odCl7cmV0dXJuIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQ9JGsuYmluZChudWxsLHQpLHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10O2lmKCh0PW4uQ28uZ2V0KGUpKSYmdC5ibylyZXR1cm4gZEkoKS5hZGQodC5rZXkpO3ZhciByPWRJKCk7aWYoIShlPW4uVm8uZ2V0KGUpKSlyZXR1cm4gcjtmb3IodmFyIGk9MCxvPWU7aTxvLmxlbmd0aDtpKyspdmFyIGE9b1tpXSxhPW4uUG8uZ2V0KGEpLHI9ci51bmlvbldpdGgoYS52aWV3LndvKTtyZXR1cm4gcn0uYmluZChudWxsLHQpLHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdExpc3Rlbj1mdW5jdGlvbihvLGEscyl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuKGU9bykuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShhLFwicmVqZWN0ZWRcIixzKSxpPWUuQ28uZ2V0KGEpLChuPWkmJmkua2V5KT8ocj0ocj1uZXcgWncoSGIuY29tcGFyYXRvcikpLmluc2VydChuLHNfLm5ld05vRG9jdW1lbnQobixtYi5taW4oKSkpLGk9ZEkoKS5hZGQobiksaT1uZXcgZ0kobWIubWluKCksbmV3IE1hcCxuZXcgYUkoZGIpLHIsaSksWzQsJGsoZSxpKV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksZS5Ebz1lLkRvLnJlbW92ZShuKSxlLkNvLmRlbGV0ZShhKSxzTihlKSxbMyw0XTtjYXNlIDI6cmV0dXJuWzQsRFMoZS5sb2NhbFN0b3JlLGEsITEpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaU4oZSxhLHMpfSkuY2F0Y2gocUUpXTtjYXNlIDM6dC5zZW50KCksdC5sYWJlbD00O2Nhc2UgNDpyZXR1cm5bMl19fSl9KX0uYmluZChudWxsLHQpLHQudm8uX3I9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dCxyPSExLGk9MCxvPWU7aTxvLmxlbmd0aDtpKyspe3ZhciBhPW9baV0scz1hLnF1ZXJ5LHM9bi5xdWVyaWVzLmdldChzKTtpZihzKXtmb3IodmFyIHU9MCxjPXMubGlzdGVuZXJzO3U8Yy5sZW5ndGg7dSsrKWNbdV0uSHIoYSkmJihyPSEwKTtzLldyPWF9fXImJk9rKG4pfS5iaW5kKG51bGwsdC5ldmVudE1hbmFnZXIpLHQudm8uTW89ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQ7aWYodD1yLnF1ZXJpZXMuZ2V0KGUpKWZvcih2YXIgaT0wLG89dC5saXN0ZW5lcnM7aTxvLmxlbmd0aDtpKyspb1tpXS5vbkVycm9yKG4pO3IucXVlcmllcy5kZWxldGUoZSl9LmJpbmQobnVsbCx0LmV2ZW50TWFuYWdlciksdH1mdW5jdGlvbiB2Tih0KXtyZXR1cm4gdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGU9ZnVuY3Rpb24oaSxvKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6ZT1pLG49by5iYXRjaC5iYXRjaElkLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDQsLDZdKSxbNCxOUyhlLmxvY2FsU3RvcmUsbyldO2Nhc2UgMjpyZXR1cm4gcj10LnNlbnQoKSxyTihlLG4sbnVsbCksbk4oZSxuKSxlLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUobixcImFja25vd2xlZGdlZFwiKSxbNCx1TihlLHIpXTtjYXNlIDM6cmV0dXJuIHQuc2VudCgpLFszLDZdO2Nhc2UgNDpyZXR1cm5bNCxxRSh0LnNlbnQoKSldO2Nhc2UgNTpyZXR1cm4gdC5zZW50KCksWzMsNl07Y2FzZSA2OnJldHVyblsyXX19KX0pfS5iaW5kKG51bGwsdCksdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGU9dE4uYmluZChudWxsLHQpLHR9ZnVuY3Rpb24gZ04odCxlLG4pe3ZhciByPXQ7IWZ1bmN0aW9uKGYscCxkKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIHMsdSxjLGgsbDtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0LnRyeXMucHVzaChbMCwxNCwsMTVdKSxbNCxwLmdldE1ldGFkYXRhKCldO2Nhc2UgMTpyZXR1cm4gcz10LnNlbnQoKSxbNCwocj1mLmxvY2FsU3RvcmUsbz1yLGE9eEkoKGk9cykuY3JlYXRlVGltZSksby5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcImhhc05ld2VyQnVuZGxlXCIsXCJyZWFkb25seVwiLGZ1bmN0aW9uKHQpe3JldHVybiBvLlFlLmdldEJ1bmRsZU1ldGFkYXRhKHQsaS5pZCl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiEhdCYmMDw9dC5jcmVhdGVUaW1lLmNvbXBhcmVUbyhhKX0pKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKT9bNCxwLmNsb3NlKCldOlszLDRdO2Nhc2UgMzpyZXR1cm5bMiwodC5zZW50KCksdm9pZCBkLl9jb21wbGV0ZVdpdGgoe3Rhc2tTdGF0ZTpcIlN1Y2Nlc3NcIixkb2N1bWVudHNMb2FkZWQ6cy50b3RhbERvY3VtZW50cyxieXRlc0xvYWRlZDpzLnRvdGFsQnl0ZXMsdG90YWxEb2N1bWVudHM6cy50b3RhbERvY3VtZW50cyx0b3RhbEJ5dGVzOnMudG90YWxCeXRlc30pKV07Y2FzZSA0OnJldHVybiBkLl91cGRhdGVQcm9ncmVzcyhWayhzKSksdT1uZXcgTWsocyxmLmxvY2FsU3RvcmUscC5SKSxbNCxwLkxvKCldO2Nhc2UgNTpjPXQuc2VudCgpLHQubGFiZWw9NjtjYXNlIDY6cmV0dXJuIGM/WzQsdS5vbyhjKV06WzMsMTBdO2Nhc2UgNzpyZXR1cm4oaD10LnNlbnQoKSkmJmQuX3VwZGF0ZVByb2dyZXNzKGgpLFs0LHAuTG8oKV07Y2FzZSA4OmM9dC5zZW50KCksdC5sYWJlbD05O2Nhc2UgOTpyZXR1cm5bMyw2XTtjYXNlIDEwOnJldHVybls0LHUuY29tcGxldGUoKV07Y2FzZSAxMTpyZXR1cm4gbD10LnNlbnQoKSxbNCx1TihmLGwud24sdm9pZCAwKV07Y2FzZSAxMjpyZXR1cm4gdC5zZW50KCksWzQsKHI9Zi5sb2NhbFN0b3JlLGU9cywobj1yKS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgYnVuZGxlXCIsXCJyZWFkd3JpdGVcIixmdW5jdGlvbih0KXtyZXR1cm4gbi5RZS5zYXZlQnVuZGxlTWV0YWRhdGEodCxlKX0pKV07Y2FzZSAxMzpyZXR1cm4gdC5zZW50KCksZC5fY29tcGxldGVXaXRoKGwucHJvZ3Jlc3MpLFszLDE1XTtjYXNlIDE0OnJldHVybiB1YihcIlN5bmNFbmdpbmVcIixcIkxvYWRpbmcgYnVuZGxlIGZhaWxlZCB3aXRoIFwiKyhsPXQuc2VudCgpKSksZC5fZmFpbFdpdGgobCksWzMsMTVdO2Nhc2UgMTU6cmV0dXJuWzJdfXZhciBlLG4scixpLG8sYX0pfSl9KHIsZSxuKS50aGVuKGZ1bmN0aW9uKCl7ci5zaGFyZWRDbGllbnRTdGF0ZS5ub3RpZnlCdW5kbGVMb2FkZWQoKX0pfXZhciB5TixtTixiTj0oQ04ucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oZSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuUj1VQyhlLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSx0aGlzLnNoYXJlZENsaWVudFN0YXRlPXRoaXMuQm8oZSksdGhpcy5wZXJzaXN0ZW5jZT10aGlzLnFvKGUpLFs0LHRoaXMucGVyc2lzdGVuY2Uuc3RhcnQoKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSx0aGlzLmdjU2NoZWR1bGVyPXRoaXMuVW8oZSksdGhpcy5sb2NhbFN0b3JlPXRoaXMuUW8oZSksWzJdfX0pfSl9LENOLnByb3RvdHlwZS5Vbz1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbH0sQ04ucHJvdG90eXBlLlFvPWZ1bmN0aW9uKHQpe3JldHVybiBDUyh0aGlzLnBlcnNpc3RlbmNlLG5ldyBfUyx0LmluaXRpYWxVc2VyLHRoaXMuUil9LENOLnByb3RvdHlwZS5xbz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHpTKFlTLmJzLHRoaXMuUil9LENOLnByb3RvdHlwZS5Cbz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG1DfSxDTi5wcm90b3R5cGUudGVybWluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuZ2NTY2hlZHVsZXImJnRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpLFs0LHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc2h1dGRvd24oKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxbNCx0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCldO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksWzJdfX0pfSl9LENOKSxfTj0oWGkoU04sbU49Yk4pLFNOLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKGUpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LG1OLnByb3RvdHlwZS5pbml0aWFsaXplLmNhbGwodGhpcyxlKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxbNCxGUyh0aGlzLmxvY2FsU3RvcmUpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFs0LHRoaXMuS28uaW5pdGlhbGl6ZSh0aGlzLGUpXTtjYXNlIDM6cmV0dXJuIHQuc2VudCgpLFs0LHZOKHRoaXMuS28uc3luY0VuZ2luZSldO2Nhc2UgNDpyZXR1cm4gdC5zZW50KCksWzQscGsodGhpcy5Lby5yZW1vdGVTdG9yZSldO2Nhc2UgNTpyZXR1cm4gdC5zZW50KCksWzJdfX0pfSl9LFNOLnByb3RvdHlwZS5Rbz1mdW5jdGlvbih0KXtyZXR1cm4gQ1ModGhpcy5wZXJzaXN0ZW5jZSxuZXcgX1MsdC5pbml0aWFsVXNlcix0aGlzLlIpfSxTTi5wcm90b3R5cGUuVW89ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5nYXJiYWdlQ29sbGVjdG9yO3JldHVybiBuZXcgS0UoZSx0LmFzeW5jUXVldWUpfSxTTi5wcm90b3R5cGUucW89ZnVuY3Rpb24odCl7dmFyIGU9Z1ModC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCx0LmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSksbj12b2lkIDAhPT10aGlzLmNhY2hlU2l6ZUJ5dGVzP1RFLndpdGhDYWNoZVNpemUodGhpcy5jYWNoZVNpemVCeXRlcyk6VEUuREVGQVVMVDtyZXR1cm4gbmV3IGZTKHRoaXMuc3luY2hyb25pemVUYWJzLGUsdC5jbGllbnRJZCxuLHQuYXN5bmNRdWV1ZSxNQygpLEZDKCksdGhpcy5SLHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsISF0aGlzLmZvcmNlT3duZXJzaGlwKX0sU04ucHJvdG90eXBlLkJvPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgbUN9LFNOKSx3Tj0oWGkoRU4seU49X04pLEVOLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKHIpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXM7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx5Ti5wcm90b3R5cGUuaW5pdGlhbGl6ZS5jYWxsKHRoaXMscildO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksZT10aGlzLktvLnN5bmNFbmdpbmUsdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSBpbnN0YW5jZW9mIHlDPyh0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmU9e3VpOmhOLmJpbmQobnVsbCxlKSxhaTpmdW5jdGlvbihpLG8sYSxzKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuKGU9aSkuT28/KGFiKFwiU3luY0VuZ2luZVwiLFwiSWdub3JpbmcgdW5leHBlY3RlZCBxdWVyeSBzdGF0ZSBub3RpZmljYXRpb24uXCIpLFszLDhdKTpbMywxXTtjYXNlIDE6aWYoIWUuVm8uaGFzKG8pKXJldHVyblszLDhdO3N3aXRjaChhKXtjYXNlXCJjdXJyZW50XCI6Y2FzZVwibm90LWN1cnJlbnRcIjpyZXR1cm5bMywyXTtjYXNlXCJyZWplY3RlZFwiOnJldHVyblszLDVdfXJldHVyblszLDddO2Nhc2UgMjpyZXR1cm5bNCxNUyhlLmxvY2FsU3RvcmUpXTtjYXNlIDM6cmV0dXJuIG49dC5zZW50KCkscj1nSS5jcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZShvLFwiY3VycmVudFwiPT09YSksWzQsdU4oZSxuLHIpXTtjYXNlIDQ6cmV0dXJuIHQuc2VudCgpLFszLDhdO2Nhc2UgNTpyZXR1cm5bNCxEUyhlLmxvY2FsU3RvcmUsbywhMCldO2Nhc2UgNjpyZXR1cm4gdC5zZW50KCksaU4oZSxvLHMpLFszLDhdO2Nhc2UgNzpoYigpLHQubGFiZWw9ODtjYXNlIDg6cmV0dXJuWzJdfX0pfSl9LmJpbmQobnVsbCxlKSxoaTpmdW5jdGlvbihjLGgsbCl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBuLGUscixpLG8sYSxzLHU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDppZighKG49ZE4oYykpLk9vKXJldHVyblszLDEwXTtlPTAscj1oLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGU8ci5sZW5ndGg/KHI9cltlXSxuLlZvLmhhcyhyKT8oYWIoXCJTeW5jRW5naW5lXCIsXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiK3IpLFszLDVdKTpbNCxMUyhuLmxvY2FsU3RvcmUscildKTpbMyw2XTtjYXNlIDI6cmV0dXJuIGk9dC5zZW50KCksWzQsT1Mobi5sb2NhbFN0b3JlLGkpXTtjYXNlIDM6cmV0dXJuIG89dC5zZW50KCksWzQsWGsobixwTihpKSxvLnRhcmdldElkLCExKV07Y2FzZSA0OnQuc2VudCgpLG5rKG4ucmVtb3RlU3RvcmUsbyksdC5sYWJlbD01O2Nhc2UgNTpyZXR1cm4gZSsrLFszLDFdO2Nhc2UgNjphPWZ1bmN0aW9uKGUpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIG4uVm8uaGFzKGUpP1s0LERTKG4ubG9jYWxTdG9yZSxlLCExKS50aGVuKGZ1bmN0aW9uKCl7cmsobi5yZW1vdGVTdG9yZSxlKSxpTihuLGUpfSkuY2F0Y2gocUUpXTpbMywyXTtjYXNlIDE6dC5zZW50KCksdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm5bMl19fSl9LHM9MCx1PWwsdC5sYWJlbD03O2Nhc2UgNzpyZXR1cm4gczx1Lmxlbmd0aD8odT11W3NdLFs1LGEodSldKTpbMywxMF07Y2FzZSA4OnQuc2VudCgpLHQubGFiZWw9OTtjYXNlIDk6cmV0dXJuIHMrKyxbMyw3XTtjYXNlIDEwOnJldHVyblsyXX19KX0pfS5iaW5kKG51bGwsZSksZm46ZnVuY3Rpb24odCl7cmV0dXJuIHQubG9jYWxTdG9yZS5wZXJzaXN0ZW5jZS5mbigpfS5iaW5kKG51bGwsZSksY2k6ZnVuY3Rpb24obil7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3JldHVyblsyLE1TKChlPW4pLmxvY2FsU3RvcmUpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHVOKGUsdCl9KV19KX0pfS5iaW5kKG51bGwsZSl9LFs0LHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKV0pOlszLDNdO2Nhc2UgMjp0LnNlbnQoKSx0LmxhYmVsPTM7Y2FzZSAzOnJldHVybls0LHRoaXMucGVyc2lzdGVuY2UuSGUoZnVuY3Rpb24oZSl7cmV0dXJuICRpKG4sdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsbE4odGhpcy5Lby5zeW5jRW5naW5lLGUpXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLHRoaXMuZ2NTY2hlZHVsZXImJihlJiYhdGhpcy5nY1NjaGVkdWxlci5zdGFydGVkP3RoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKTplfHx0aGlzLmdjU2NoZWR1bGVyLnN0b3AoKSksWzJdfX0pfSl9KV07Y2FzZSA0OnJldHVybiB0LnNlbnQoKSxbMl19fSl9KX0sRU4ucHJvdG90eXBlLkJvPWZ1bmN0aW9uKHQpe3ZhciBlPU1DKCk7aWYoIXlDLnl0KGUpKXRocm93IG5ldyBuYihlYi5VTklNUExFTUVOVEVELFwiSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLlwiKTt2YXIgbj1nUyh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLHQuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KTtyZXR1cm4gbmV3IHlDKGUsdC5hc3luY1F1ZXVlLG4sdC5jbGllbnRJZCx0LmluaXRpYWxVc2VyKX0sRU4pLElOPShUTi5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbihuLHIpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMubG9jYWxTdG9yZT9bMywyXToodGhpcy5sb2NhbFN0b3JlPW4ubG9jYWxTdG9yZSx0aGlzLnNoYXJlZENsaWVudFN0YXRlPW4uc2hhcmVkQ2xpZW50U3RhdGUsdGhpcy5kYXRhc3RvcmU9dGhpcy5jcmVhdGVEYXRhc3RvcmUociksdGhpcy5yZW1vdGVTdG9yZT10aGlzLmNyZWF0ZVJlbW90ZVN0b3JlKHIpLHRoaXMuZXZlbnRNYW5hZ2VyPXRoaXMuY3JlYXRlRXZlbnRNYW5hZ2VyKHIpLHRoaXMuc3luY0VuZ2luZT10aGlzLmNyZWF0ZVN5bmNFbmdpbmUociwhbi5zeW5jaHJvbml6ZVRhYnMpLHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyPWZ1bmN0aW9uKHQpe3JldHVybiBaayhlLnN5bmNFbmdpbmUsdCwxKX0sdGhpcy5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZT1jTi5iaW5kKG51bGwsdGhpcy5zeW5jRW5naW5lKSxbNCxnayh0aGlzLnJlbW90ZVN0b3JlLHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpXSk7Y2FzZSAxOnQuc2VudCgpLHQubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzJdfX0pfSl9LFROLnByb3RvdHlwZS5jcmVhdGVFdmVudE1hbmFnZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBJa30sVE4ucHJvdG90eXBlLmNyZWF0ZURhdGFzdG9yZT1mdW5jdGlvbih0KXt2YXIgZT1VQyh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSxuPShuPXQuZGF0YWJhc2VJbmZvLG5ldyBUQyhuKSk7cmV0dXJuIHQ9dC5jcmVkZW50aWFscyxuZXcgR0ModCxuLGUpfSxUTi5wcm90b3R5cGUuY3JlYXRlUmVtb3RlU3RvcmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMubG9jYWxTdG9yZSxyPXRoaXMuZGF0YXN0b3JlLGk9dC5hc3luY1F1ZXVlLG89ZnVuY3Rpb24odCl7cmV0dXJuIFprKGUuc3luY0VuZ2luZSx0LDApfSx0PW5ldyhfQy55dCgpP19DOmJDKTtyZXR1cm4gbmV3IGpDKG4scixpLG8sdCl9LFROLnByb3RvdHlwZS5jcmVhdGVTeW5jRW5naW5lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKHQsZSxuLHIsaSxvLGEpe289bmV3IHprKHQsZSxuLHIsaSxvKTtyZXR1cm4gYSYmKG8uT289ITApLG99KHRoaXMubG9jYWxTdG9yZSx0aGlzLnJlbW90ZVN0b3JlLHRoaXMuZXZlbnRNYW5hZ2VyLHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsdC5pbml0aWFsVXNlcix0Lm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zLGUpfSxUTi5wcm90b3R5cGUudGVybWluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPW4sYWIoXCJSZW1vdGVTdG9yZVwiLFwiUmVtb3RlU3RvcmUgc2h1dHRpbmcgZG93bi5cIiksZS4kci5hZGQoNSksWzQsZWsoZSldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksZS5Mci5zaHV0ZG93bigpLGUuQnIuc2V0KFwiVW5rbm93blwiKSxbMl19fSl9KX0odGhpcy5yZW1vdGVTdG9yZSl9LFROKTtmdW5jdGlvbiBUTigpe31mdW5jdGlvbiBFTih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuKG49eU4uY2FsbCh0aGlzLHQsZSwhMSl8fHRoaXMpLktvPXQsbi5jYWNoZVNpemVCeXRlcz1lLG4uc3luY2hyb25pemVUYWJzPSEwLG59ZnVuY3Rpb24gU04odCxlLG4pe3ZhciByPXRoaXM7cmV0dXJuKHI9bU4uY2FsbCh0aGlzKXx8dGhpcykuS289dCxyLmNhY2hlU2l6ZUJ5dGVzPWUsci5mb3JjZU93bmVyc2hpcD1uLHIuc3luY2hyb25pemVUYWJzPSExLHJ9ZnVuY3Rpb24gQ04oKXt0aGlzLnN5bmNocm9uaXplVGFicz0hMX1mdW5jdGlvbiBrTihuLHIpe3ZvaWQgMD09PXImJihyPTEwMjQwKTt2YXIgaT0wO3JldHVybntyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3JldHVybiBpPG4uYnl0ZUxlbmd0aD8oZT17dmFsdWU6bi5zbGljZShpLGkrciksZG9uZTohMX0sWzIsKGkrPXIsZSldKTpbMix7ZG9uZTohMH1dfSl9KX0sY2FuY2VsOmZ1bmN0aW9uKCl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3JldHVyblsyXX0pfSl9LHJlbGVhc2VMb2NrOmZ1bmN0aW9uKCl7fSxjbG9zZWQ6UHJvbWlzZS5yZWplY3QoXCJ1bmltcGxlbWVudGVkXCIpfX12YXIgTk49KEZOLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKHQpe3RoaXMub2JzZXJ2ZXIubmV4dCYmdGhpcy5qbyh0aGlzLm9ic2VydmVyLm5leHQsdCl9LEZOLnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbih0KXt0aGlzLm9ic2VydmVyLmVycm9yP3RoaXMuam8odGhpcy5vYnNlcnZlci5lcnJvcix0KTpjb25zb2xlLmVycm9yKFwiVW5jYXVnaHQgRXJyb3IgaW4gc25hcHNob3QgbGlzdGVuZXI6XCIsdCl9LEZOLnByb3RvdHlwZS5Xbz1mdW5jdGlvbigpe3RoaXMubXV0ZWQ9ITB9LEZOLnByb3RvdHlwZS5qbz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5tdXRlZHx8c2V0VGltZW91dChmdW5jdGlvbigpe24ubXV0ZWR8fHQoZSl9LDApfSxGTiksQU49KE1OLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLkdvLmNhbmNlbCgpfSxNTi5wcm90b3R5cGUuZ2V0TWV0YWRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5tZXRhZGF0YS5wcm9taXNlXX0pfSl9LE1OLnByb3RvdHlwZS5Mbz1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMuZ2V0TWV0YWRhdGEoKV07Y2FzZSAxOnJldHVyblsyLCh0LnNlbnQoKSx0aGlzLkhvKCkpXX19KX0pfSxNTi5wcm90b3R5cGUuSG89ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGhpcy5KbygpXTtjYXNlIDE6cmV0dXJuIG51bGw9PT0oZT10LnNlbnQoKSk/WzIsbnVsbF06KHI9dGhpcy56by5kZWNvZGUoZSksbj1OdW1iZXIociksaXNOYU4obikmJnRoaXMuWW8oXCJsZW5ndGggc3RyaW5nIChcIityK1wiKSBpcyBub3QgdmFsaWQgbnVtYmVyXCIpLFs0LHRoaXMuWG8obildKTtjYXNlIDI6cmV0dXJuIHI9dC5zZW50KCksWzIsbmV3IHhrKEpTT04ucGFyc2UociksZS5sZW5ndGgrbildfX0pfSl9LE1OLnByb3RvdHlwZS5abz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlci5maW5kSW5kZXgoZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1cIntcIi5jaGFyQ29kZUF0KDApfSl9LE1OLnByb3RvdHlwZS5Kbz1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuWm8oKTwwP1s0LHRoaXMudGMoKV06WzMsM107Y2FzZSAxOmlmKHQuc2VudCgpKXJldHVyblszLDNdO3QubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzMsMF07Y2FzZSAzOnJldHVybiAwPT09dGhpcy5idWZmZXIubGVuZ3RoP1syLG51bGxdOigoZT10aGlzLlpvKCkpPDAmJnRoaXMuWW8oXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gYSBsZW5ndGggc3RyaW5nIGlzIGV4cGVjdGVkLlwiKSxuPXRoaXMuYnVmZmVyLnNsaWNlKDAsZSksWzIsKHRoaXMuYnVmZmVyPXRoaXMuYnVmZmVyLnNsaWNlKGUpLG4pXSl9fSl9KX0sTU4ucHJvdG90eXBlLlhvPWZ1bmN0aW9uKG4pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGg8bj9bNCx0aGlzLnRjKCldOlszLDNdO2Nhc2UgMTp0LnNlbnQoKSYmdGhpcy5ZbyhcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBtb3JlIGlzIGV4cGVjdGVkLlwiKSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVyblszLDBdO2Nhc2UgMzpyZXR1cm4gZT10aGlzLnpvLmRlY29kZSh0aGlzLmJ1ZmZlci5zbGljZSgwLG4pKSxbMiwodGhpcy5idWZmZXI9dGhpcy5idWZmZXIuc2xpY2UobiksZSldfX0pfSl9LE1OLnByb3RvdHlwZS5Zbz1mdW5jdGlvbih0KXt0aHJvdyB0aGlzLkdvLmNhbmNlbCgpLG5ldyBFcnJvcihcIkludmFsaWQgYnVuZGxlIGZvcm1hdDogXCIrdCl9LE1OLnByb3RvdHlwZS50Yz1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGhpcy5Hby5yZWFkKCldO2Nhc2UgMTpyZXR1cm4oZT10LnNlbnQoKSkuZG9uZXx8KChuPW5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLmxlbmd0aCtlLnZhbHVlLmxlbmd0aCkpLnNldCh0aGlzLmJ1ZmZlciksbi5zZXQoZS52YWx1ZSx0aGlzLmJ1ZmZlci5sZW5ndGgpLHRoaXMuYnVmZmVyPW4pLFsyLGUuZG9uZV19fSl9KX0sTU4pLFJOPShMTi5wcm90b3R5cGUubG9va3VwPWZ1bmN0aW9uKHIpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXM7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDppZih0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLDA8dGhpcy5tdXRhdGlvbnMubGVuZ3RoKXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cIik7cmV0dXJuWzQsZnVuY3Rpb24oYSxzKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIG4sZSxyLGksbztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPVZJKChuPWEpLlIpK1wiL2RvY3VtZW50c1wiLHI9e2RvY3VtZW50czpzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gRkkobi5SLHQpfSl9LFs0LG4uT2koXCJCYXRjaEdldERvY3VtZW50c1wiLGUscildO2Nhc2UgMTpyZXR1cm4gcj10LnNlbnQoKSxpPW5ldyBNYXAsci5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlLHQ9KGU9bi5SLFwiZm91bmRcImluKHQ9dCk/ZnVuY3Rpb24odCxlKXtsYighIWUuZm91bmQpLGUuZm91bmQubmFtZSxlLmZvdW5kLnVwZGF0ZVRpbWU7dmFyIG49VUkodCxlLmZvdW5kLm5hbWUpLHQ9eEkoZS5mb3VuZC51cGRhdGVUaW1lKSxlPW5ldyBvXyh7bWFwVmFsdWU6e2ZpZWxkczplLmZvdW5kLmZpZWxkc319KTtyZXR1cm4gc18ubmV3Rm91bmREb2N1bWVudChuLHQsZSl9KGUsdCk6XCJtaXNzaW5nXCJpbiB0P2Z1bmN0aW9uKHQsZSl7bGIoISFlLm1pc3NpbmcpLGxiKCEhZS5yZWFkVGltZSk7dD1VSSh0LGUubWlzc2luZyksZT14SShlLnJlYWRUaW1lKTtyZXR1cm4gc18ubmV3Tm9Eb2N1bWVudCh0LGUpfShlLHQpOmhiKCkpO2kuc2V0KHQua2V5LnRvU3RyaW5nKCksdCl9KSxvPVtdLFsyLChzLmZvckVhY2goZnVuY3Rpb24odCl7dD1pLmdldCh0LnRvU3RyaW5nKCkpO2xiKCEhdCksby5wdXNoKHQpfSksbyldfX0pfSl9KHRoaXMuZGF0YXN0b3JlLHIpXTtjYXNlIDE6cmV0dXJuWzIsKChlPXQuc2VudCgpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBuLnJlY29yZFZlcnNpb24odCl9KSxlKV19fSl9KX0sTE4ucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe3RoaXMud3JpdGUoZS50b011dGF0aW9uKHQsdGhpcy5wcmVjb25kaXRpb24odCkpKSx0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpfSxMTi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7dHJ5e3RoaXMud3JpdGUoZS50b011dGF0aW9uKHQsdGhpcy5wcmVjb25kaXRpb25Gb3JVcGRhdGUodCkpKX1jYXRjaCh0KXt0aGlzLmxhc3RXcml0ZUVycm9yPXR9dGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKX0sTE4ucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt0aGlzLndyaXRlKG5ldyB6dyh0LHRoaXMucHJlY29uZGl0aW9uKHQpKSksdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKX0sTE4ucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXM7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDppZih0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLHRoaXMubGFzdFdyaXRlRXJyb3IpdGhyb3cgdGhpcy5sYXN0V3JpdGVFcnJvcjtyZXR1cm4gZT10aGlzLnJlYWRWZXJzaW9ucyx0aGlzLm11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuZGVsZXRlKHQua2V5LnRvU3RyaW5nKCkpfSksZS5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7ZT1IYi5mcm9tUGF0aChlKTtuLm11dGF0aW9ucy5wdXNoKG5ldyBRdyhlLG4ucHJlY29uZGl0aW9uKGUpKSl9KSxbNCxmdW5jdGlvbihpLG8pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbj1WSSgoZT1pKS5SKStcIi9kb2N1bWVudHNcIixyPXt3cml0ZXM6by5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIEhJKGUuUix0KX0pfSxbNCxlLk5pKFwiQ29tbWl0XCIsbixyKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxbMl19fSl9KX0odGhpcy5kYXRhc3RvcmUsdGhpcy5tdXRhdGlvbnMpXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLHRoaXMuY29tbWl0dGVkPSEwLFsyXX19KX0pfSxMTi5wcm90b3R5cGUucmVjb3JkVmVyc2lvbj1mdW5jdGlvbih0KXt2YXIgZTtpZih0LmlzRm91bmREb2N1bWVudCgpKWU9dC52ZXJzaW9uO2Vsc2V7aWYoIXQuaXNOb0RvY3VtZW50KCkpdGhyb3cgaGIoKTtlPW1iLm1pbigpfXZhciBuPXRoaXMucmVhZFZlcnNpb25zLmdldCh0LmtleS50b1N0cmluZygpKTtpZihuKXtpZighZS5pc0VxdWFsKG4pKXRocm93IG5ldyBuYihlYi5BQk9SVEVELFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKX1lbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldCh0LmtleS50b1N0cmluZygpLGUpfSxMTi5wcm90b3R5cGUucHJlY29uZGl0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO3JldHVybiF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpJiZlP053LnVwZGF0ZVRpbWUoZSk6Tncubm9uZSgpfSxMTi5wcm90b3R5cGUucHJlY29uZGl0aW9uRm9yVXBkYXRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO2lmKHRoaXMud3JpdHRlbkRvY3MuaGFzKHQudG9TdHJpbmcoKSl8fCFlKXJldHVybiBOdy5leGlzdHMoITApO2lmKGUuaXNFcXVhbChtYi5taW4oKSkpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJDYW4ndCB1cGRhdGUgYSBkb2N1bWVudCB0aGF0IGRvZXNuJ3QgZXhpc3QuXCIpO3JldHVybiBOdy51cGRhdGVUaW1lKGUpfSxMTi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSx0aGlzLm11dGF0aW9ucy5wdXNoKHQpfSxMTi5wcm90b3R5cGUuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkPWZ1bmN0aW9uKCl7fSxMTiksUE49KHhOLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLm5jKCl9LHhOLnByb3RvdHlwZS5uYz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5aaS5qaShmdW5jdGlvbigpe3JldHVybiAkaSh0LHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHI9dGhpcztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gZT1uZXcgUk4odGhpcy5kYXRhc3RvcmUpLChuPXRoaXMuc2MoZSkpJiZuLnRoZW4oZnVuY3Rpb24odCl7ci5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24oKXtyZXR1cm4gZS5jb21taXQoKS50aGVuKGZ1bmN0aW9uKCl7ci5kZWZlcnJlZC5yZXNvbHZlKHQpfSkuY2F0Y2goZnVuY3Rpb24odCl7ci5pYyh0KX0pfSl9KS5jYXRjaChmdW5jdGlvbih0KXtyLmljKHQpfSksWzJdfSl9KX0pfSx4Ti5wcm90b3R5cGUuc2M9ZnVuY3Rpb24odCl7dHJ5e3ZhciBlPXRoaXMudXBkYXRlRnVuY3Rpb24odCk7cmV0dXJuIUJiKGUpJiZlLmNhdGNoJiZlLnRoZW4/ZToodGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoXCJUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2VcIikpLG51bGwpfWNhdGNoKHQpe3JldHVybiB0aGlzLmRlZmVycmVkLnJlamVjdCh0KSxudWxsfX0seE4ucHJvdG90eXBlLmljPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7MDx0aGlzLmVjJiZ0aGlzLnJjKHQpPygtLXRoaXMuZWMsdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24oKXtyZXR1cm4gZS5uYygpLFByb21pc2UucmVzb2x2ZSgpfSkpOnRoaXMuZGVmZXJyZWQucmVqZWN0KHQpfSx4Ti5wcm90b3R5cGUucmM9ZnVuY3Rpb24odCl7aWYoXCJGaXJlYmFzZUVycm9yXCIhPT10Lm5hbWUpcmV0dXJuITE7dD10LmNvZGU7cmV0dXJuXCJhYm9ydGVkXCI9PT10fHxcImZhaWxlZC1wcmVjb25kaXRpb25cIj09PXR8fCFKdyh0KX0seE4pLE9OPShETi5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMucmVjZWl2ZWRJbml0aWFsVXNlci5wcm9taXNlXTtjYXNlIDE6cmV0dXJuWzIsKHQuc2VudCgpLHthc3luY1F1ZXVlOnRoaXMuYXN5bmNRdWV1ZSxkYXRhYmFzZUluZm86dGhpcy5kYXRhYmFzZUluZm8sY2xpZW50SWQ6dGhpcy5jbGllbnRJZCxjcmVkZW50aWFsczp0aGlzLmNyZWRlbnRpYWxzLGluaXRpYWxVc2VyOnRoaXMudXNlcixtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczoxMDB9KV19fSl9KX0sRE4ucHJvdG90eXBlLnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuY3JlZGVudGlhbExpc3RlbmVyPXQsdGhpcy5yZWNlaXZlZEluaXRpYWxVc2VyLnByb21pc2UudGhlbihmdW5jdGlvbigpe3JldHVybiBlLmNyZWRlbnRpYWxMaXN0ZW5lcihlLnVzZXIpfSl9LEROLnByb3RvdHlwZS52ZXJpZnlOb3RUZXJtaW5hdGVkPWZ1bmN0aW9uKCl7aWYodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKXRocm93IG5ldyBuYihlYi5GQUlMRURfUFJFQ09ORElUSU9OLFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpfSxETi5wcm90b3R5cGUudGVybWluYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmFzeW5jUXVldWUuZW50ZXJSZXN0cmljdGVkTW9kZSgpO3ZhciBuPW5ldyBDVDtyZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKGZ1bmN0aW9uKCl7cmV0dXJuICRpKHQsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHQudHJ5cy5wdXNoKFswLDUsLDZdKSx0aGlzLm9ubGluZUNvbXBvbmVudHM/WzQsdGhpcy5vbmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpXTpbMywyXTtjYXNlIDE6dC5zZW50KCksdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdGhpcy5vZmZsaW5lQ29tcG9uZW50cz9bNCx0aGlzLm9mZmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpXTpbMyw0XTtjYXNlIDM6dC5zZW50KCksdC5sYWJlbD00O2Nhc2UgNDpyZXR1cm4gdGhpcy5jcmVkZW50aWFscy5yZW1vdmVDaGFuZ2VMaXN0ZW5lcigpLG4ucmVzb2x2ZSgpLFszLDZdO2Nhc2UgNTpyZXR1cm4gZT10LnNlbnQoKSxlPXdrKGUsXCJGYWlsZWQgdG8gc2h1dGRvd24gcGVyc2lzdGVuY2VcIiksbi5yZWplY3QoZSksWzMsNl07Y2FzZSA2OnJldHVyblsyXX19KX0pfSksbi5wcm9taXNlfSxETik7ZnVuY3Rpb24gRE4odCxlLG4pe3ZhciByPXRoaXM7dGhpcy5jcmVkZW50aWFscz10LHRoaXMuYXN5bmNRdWV1ZT1lLHRoaXMuZGF0YWJhc2VJbmZvPW4sdGhpcy51c2VyPVhTLlVOQVVUSEVOVElDQVRFRCx0aGlzLmNsaWVudElkPWZiLnUoKSx0aGlzLmNyZWRlbnRpYWxMaXN0ZW5lcj1mdW5jdGlvbigpe30sdGhpcy5yZWNlaXZlZEluaXRpYWxVc2VyPW5ldyBDVCx0aGlzLmNyZWRlbnRpYWxzLnNldENoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uKHQpe2FiKFwiRmlyZXN0b3JlQ2xpZW50XCIsXCJSZWNlaXZlZCB1c2VyPVwiLHQudWlkKSxyLnVzZXI9dCxyLmNyZWRlbnRpYWxMaXN0ZW5lcih0KSxyLnJlY2VpdmVkSW5pdGlhbFVzZXIucmVzb2x2ZSgpfSl9ZnVuY3Rpb24geE4odCxlLG4scil7dGhpcy5hc3luY1F1ZXVlPXQsdGhpcy5kYXRhc3RvcmU9ZSx0aGlzLnVwZGF0ZUZ1bmN0aW9uPW4sdGhpcy5kZWZlcnJlZD1yLHRoaXMuZWM9NSx0aGlzLlppPW5ldyBLQyh0aGlzLmFzeW5jUXVldWUsXCJ0cmFuc2FjdGlvbl9yZXRyeVwiKX1mdW5jdGlvbiBMTih0KXt0aGlzLmRhdGFzdG9yZT10LHRoaXMucmVhZFZlcnNpb25zPW5ldyBNYXAsdGhpcy5tdXRhdGlvbnM9W10sdGhpcy5jb21taXR0ZWQ9ITEsdGhpcy5sYXN0V3JpdGVFcnJvcj1udWxsLHRoaXMud3JpdHRlbkRvY3M9bmV3IFNldH1mdW5jdGlvbiBNTih0LGUpe3ZhciBuPXRoaXM7dGhpcy5Hbz10LHRoaXMuUj1lLHRoaXMubWV0YWRhdGE9bmV3IENULHRoaXMuYnVmZmVyPW5ldyBVaW50OEFycmF5LHRoaXMuem89bmV3IFRleHREZWNvZGVyKFwidXRmLThcIiksdGhpcy5IbygpLnRoZW4oZnVuY3Rpb24odCl7dCYmdC5pbygpP24ubWV0YWRhdGEucmVzb2x2ZSh0LnBheWxvYWQubWV0YWRhdGEpOm4ubWV0YWRhdGEucmVqZWN0KG5ldyBFcnJvcihcIlRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBidW5kbGUgaXMgbm90IGEgbWV0YWRhdGEsIGl0IGlzXFxuICAgICAgICAgICAgIFwiK0pTT04uc3RyaW5naWZ5KG51bGw9PXQ/dm9pZCAwOnQucGF5bG9hZCkpKX0sZnVuY3Rpb24odCl7cmV0dXJuIG4ubWV0YWRhdGEucmVqZWN0KHQpfSl9ZnVuY3Rpb24gRk4odCl7dGhpcy5vYnNlcnZlcj10LHRoaXMubXV0ZWQ9ITF9ZnVuY3Rpb24gVU4oaSxvKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyPXRoaXM7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gaS5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSxhYihcIkZpcmVzdG9yZUNsaWVudFwiLFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKSxbNCxpLmdldENvbmZpZ3VyYXRpb24oKV07Y2FzZSAxOnJldHVybiBlPXQuc2VudCgpLFs0LG8uaW5pdGlhbGl6ZShlKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSxuPWUuaW5pdGlhbFVzZXIsaS5zZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24oZSl7bi5pc0VxdWFsKGUpfHwobj1lLGkuYXN5bmNRdWV1ZS5lbnF1ZXVlUmV0cnlhYmxlKGZ1bmN0aW9uKCl7cmV0dXJuICRpKHIsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsa1Moby5sb2NhbFN0b3JlLGUpXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLFsyXX19KX0pfSkpfSksby5wZXJzaXN0ZW5jZS5zZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcihmdW5jdGlvbigpe3JldHVybiBpLnRlcm1pbmF0ZSgpfSksaS5vZmZsaW5lQ29tcG9uZW50cz1vLFsyXX19KX0pfWZ1bmN0aW9uIGpOKHIsaSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gci5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSxbNCxxTihyKV07Y2FzZSAxOnJldHVybiBlPXQuc2VudCgpLGFiKFwiRmlyZXN0b3JlQ2xpZW50XCIsXCJJbml0aWFsaXppbmcgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksWzQsci5nZXRDb25maWd1cmF0aW9uKCldO2Nhc2UgMjpyZXR1cm4gbj10LnNlbnQoKSxbNCxpLmluaXRpYWxpemUoZSxuKV07Y2FzZSAzOnJldHVybiB0LnNlbnQoKSxyLnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcihmdW5jdGlvbih0KXtyZXR1cm4gci5hc3luY1F1ZXVlLmVucXVldWVSZXRyeWFibGUoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24ocixpKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybihlPXIpLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLGFiKFwiUmVtb3RlU3RvcmVcIixcIlJlbW90ZVN0b3JlIHJlY2VpdmVkIG5ldyBjcmVkZW50aWFsc1wiKSxuPXVrKGUpLGUuJHIuYWRkKDMpLFs0LGVrKGUpXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLG4mJmUuQnIuc2V0KFwiVW5rbm93blwiKSxbNCxlLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKGkpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLGUuJHIuZGVsZXRlKDMpLFs0LHRrKGUpXTtjYXNlIDM6cmV0dXJuIHQuc2VudCgpLFsyXX19KX0pfShpLnJlbW90ZVN0b3JlLHQpfSl9KSxyLm9ubGluZUNvbXBvbmVudHM9aSxbMl19fSl9KX1mdW5jdGlvbiBxTihlKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZS5vZmZsaW5lQ29tcG9uZW50cz9bMywyXTooYWIoXCJGaXJlc3RvcmVDbGllbnRcIixcIlVzaW5nIGRlZmF1bHQgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLFs0LFVOKGUsbmV3IGJOKV0pO2Nhc2UgMTp0LnNlbnQoKSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVyblsyLGUub2ZmbGluZUNvbXBvbmVudHNdfX0pfSl9ZnVuY3Rpb24gVk4oZSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGUub25saW5lQ29tcG9uZW50cz9bMywyXTooYWIoXCJGaXJlc3RvcmVDbGllbnRcIixcIlVzaW5nIGRlZmF1bHQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksWzQsak4oZSxuZXcgSU4pXSk7Y2FzZSAxOnQuc2VudCgpLHQubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzIsZS5vbmxpbmVDb21wb25lbnRzXX19KX0pfWZ1bmN0aW9uIEJOKHQpe3JldHVybiBxTih0KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LnBlcnNpc3RlbmNlfSl9ZnVuY3Rpb24gS04odCl7cmV0dXJuIHFOKHQpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQubG9jYWxTdG9yZX0pfWZ1bmN0aW9uIFdOKHQpe3JldHVybiBWTih0KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlbW90ZVN0b3JlfSl9ZnVuY3Rpb24gSE4odCl7cmV0dXJuIFZOKHQpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuc3luY0VuZ2luZX0pfWZ1bmN0aW9uIEdOKHIpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsVk4ocildO2Nhc2UgMTpyZXR1cm4gZT10LnNlbnQoKSxbMiwoKG49ZS5ldmVudE1hbmFnZXIpLm9uTGlzdGVuPWZ1bmN0aW9uKGEscyl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpLG87cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1kTihhKSwobz1lLlBvLmdldChzKSk/KG49by50YXJnZXRJZCxlLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQobikscj1vLnZpZXcuUm8oKSxbMyw0XSk6WzMsMV07Y2FzZSAxOnJldHVybls0LE9TKGUubG9jYWxTdG9yZSxaXyhzKSldO2Nhc2UgMjpyZXR1cm4gaT10LnNlbnQoKSxvPWUuc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldChpLnRhcmdldElkKSxuPWkudGFyZ2V0SWQsWzQsWGsoZSxzLG4sXCJjdXJyZW50XCI9PT1vKV07Y2FzZSAzOnI9dC5zZW50KCksZS5pc1ByaW1hcnlDbGllbnQmJm5rKGUucmVtb3RlU3RvcmUsaSksdC5sYWJlbD00O2Nhc2UgNDpyZXR1cm5bMixyXX19KX0pfS5iaW5kKG51bGwsZS5zeW5jRW5naW5lKSxuLm9uVW5saXN0ZW49ZnVuY3Rpb24oaSxvKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49KGU9aSkuUG8uZ2V0KG8pLDE8KHI9ZS5Wby5nZXQobi50YXJnZXRJZCkpLmxlbmd0aD9bMiwoZS5Wby5zZXQobi50YXJnZXRJZCxyLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4hZXcodCxvKX0pKSx2b2lkIGUuUG8uZGVsZXRlKG8pKV06ZS5pc1ByaW1hcnlDbGllbnQ/KGUuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChuLnRhcmdldElkKSxlLnNoYXJlZENsaWVudFN0YXRlLmlzQWN0aXZlUXVlcnlUYXJnZXQobi50YXJnZXRJZCk/WzMsMl06WzQsRFMoZS5sb2NhbFN0b3JlLG4udGFyZ2V0SWQsITEpLnRoZW4oZnVuY3Rpb24oKXtlLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShuLnRhcmdldElkKSxyayhlLnJlbW90ZVN0b3JlLG4udGFyZ2V0SWQpLGlOKGUsbi50YXJnZXRJZCl9KS5jYXRjaChxRSldKTpbMywzXTtjYXNlIDE6dC5zZW50KCksdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm5bMyw1XTtjYXNlIDM6cmV0dXJuIGlOKGUsbi50YXJnZXRJZCksWzQsRFMoZS5sb2NhbFN0b3JlLG4udGFyZ2V0SWQsITApXTtjYXNlIDQ6dC5zZW50KCksdC5sYWJlbD01O2Nhc2UgNTpyZXR1cm5bMl19fSl9KX0uYmluZChudWxsLGUuc3luY0VuZ2luZSksbildfX0pfSl9ZnVuY3Rpb24gek4obixyLGkpe3ZhciB0PXRoaXM7dm9pZCAwPT09aSYmKGk9e30pO3ZhciBvPW5ldyBDVDtyZXR1cm4gbi5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24oKXtyZXR1cm4gJGkodCx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1mdW5jdGlvbihuLHIsaSxvLGEpe3ZhciB0PW5ldyBOTih7bmV4dDpmdW5jdGlvbih0KXtyLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24oKXtyZXR1cm4gUGsobixzKX0pO3ZhciBlPXQuZG9jcy5oYXMoaSk7IWUmJnQuZnJvbUNhY2hlP2EucmVqZWN0KG5ldyBuYihlYi5VTkFWQUlMQUJMRSxcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgYmVjYXVzZSB0aGUgY2xpZW50IGlzIG9mZmxpbmUuXCIpKTplJiZ0LmZyb21DYWNoZSYmbyYmXCJzZXJ2ZXJcIj09PW8uc291cmNlP2EucmVqZWN0KG5ldyBuYihlYi5VTkFWQUlMQUJMRSwnRmFpbGVkIHRvIGdldCBkb2N1bWVudCBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgZG9lcyBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudC4pJykpOmEucmVzb2x2ZSh0KX0sZXJyb3I6ZnVuY3Rpb24odCl7cmV0dXJuIGEucmVqZWN0KHQpfX0pLHM9bmV3IERrKEdfKGkucGF0aCksdCx7aW5jbHVkZU1ldGFkYXRhQ2hhbmdlczohMCxzbzohMH0pO3JldHVybiBSayhuLHMpfSxbNCxHTihuKV07Y2FzZSAxOnJldHVyblsyLGUuYXBwbHkodm9pZCAwLFt0LnNlbnQoKSxuLmFzeW5jUXVldWUscixpLG9dKV19fSl9KX0pLG8ucHJvbWlzZX1mdW5jdGlvbiBRTihuLHIsaSl7dmFyIHQ9dGhpczt2b2lkIDA9PT1pJiYoaT17fSk7dmFyIG89bmV3IENUO3JldHVybiBuLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbigpe3JldHVybiAkaSh0LHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPWZ1bmN0aW9uKGUsbix0LHIsaSl7dmFyIG89bmV3IE5OKHtuZXh0OmZ1bmN0aW9uKHQpe24uZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbigpe3JldHVybiBQayhlLGEpfSksdC5mcm9tQ2FjaGUmJlwic2VydmVyXCI9PT1yLnNvdXJjZT9pLnJlamVjdChuZXcgbmIoZWIuVU5BVkFJTEFCTEUsJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnRzIGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhlc2UgZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudHMuKScpKTppLnJlc29sdmUodCl9LGVycm9yOmZ1bmN0aW9uKHQpe3JldHVybiBpLnJlamVjdCh0KX19KSxhPW5ldyBEayh0LG8se2luY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ITAsc286ITB9KTtyZXR1cm4gUmsoZSxhKX0sWzQsR04obildO2Nhc2UgMTpyZXR1cm5bMixlLmFwcGx5KHZvaWQgMCxbdC5zZW50KCksbi5hc3luY1F1ZXVlLHIsaSxvXSldfX0pfSl9KSxvLnByb21pc2V9ZnVuY3Rpb24gWU4odCxlKXt0aGlzLnVzZXI9ZSx0aGlzLnR5cGU9XCJPQXV0aFwiLHRoaXMuYXV0aEhlYWRlcnM9e30sdGhpcy5hdXRoSGVhZGVycy5BdXRob3JpemF0aW9uPVwiQmVhcmVyIFwiK3R9dmFyIFhOPWZ1bmN0aW9uKHQsZSxuLHIsaSxvLGEpe3RoaXMuZGF0YWJhc2VJZD10LHRoaXMuYXBwSWQ9ZSx0aGlzLnBlcnNpc3RlbmNlS2V5PW4sdGhpcy5ob3N0PXIsdGhpcy5zc2w9aSx0aGlzLmZvcmNlTG9uZ1BvbGxpbmc9byx0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZz1hfSxKTj0oT2JqZWN0LmRlZmluZVByb3BlcnR5KGNBLnByb3RvdHlwZSxcImlzRGVmYXVsdERhdGFiYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVyblwiKGRlZmF1bHQpXCI9PT10aGlzLmRhdGFiYXNlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGNBLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgY0EmJnQucHJvamVjdElkPT09dGhpcy5wcm9qZWN0SWQmJnQuZGF0YWJhc2U9PT10aGlzLmRhdGFiYXNlfSxjQSksJE49bmV3IE1hcCxaTj0odUEucHJvdG90eXBlLmdldFRva2VuPWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKX0sdUEucHJvdG90eXBlLmludmFsaWRhdGVUb2tlbj1mdW5jdGlvbigpe30sdUEucHJvdG90eXBlLnNldENoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKHQpeyh0aGlzLmNoYW5nZUxpc3RlbmVyPXQpKFhTLlVOQVVUSEVOVElDQVRFRCl9LHVBLnByb3RvdHlwZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbigpe3RoaXMuY2hhbmdlTGlzdGVuZXI9bnVsbH0sdUEpLHRBPShzQS5wcm90b3R5cGUuZ2V0VG9rZW49ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudG9rZW4pfSxzQS5wcm90b3R5cGUuaW52YWxpZGF0ZVRva2VuPWZ1bmN0aW9uKCl7fSxzQS5wcm90b3R5cGUuc2V0Q2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24odCl7KHRoaXMuY2hhbmdlTGlzdGVuZXI9dCkodGhpcy50b2tlbi51c2VyKX0sc0EucHJvdG90eXBlLnJlbW92ZUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKCl7dGhpcy5jaGFuZ2VMaXN0ZW5lcj1udWxsfSxzQSksZUE9KGFBLnByb3RvdHlwZS5nZXRUb2tlbj1mdW5jdGlvbigpe3ZhciBlPXRoaXMsbj10aGlzLmNjLHQ9dGhpcy5mb3JjZVJlZnJlc2g7cmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoPSExLHRoaXMuYXV0aD90aGlzLmF1dGguZ2V0VG9rZW4odCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZS5jYyE9PW4/KGFiKFwiRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyXCIsXCJnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuXCIpLGUuZ2V0VG9rZW4oKSk6dD8obGIoXCJzdHJpbmdcIj09dHlwZW9mIHQuYWNjZXNzVG9rZW4pLG5ldyBZTih0LmFjY2Vzc1Rva2VuLGUuY3VycmVudFVzZXIpKTpudWxsfSk6UHJvbWlzZS5yZXNvbHZlKG51bGwpfSxhQS5wcm90b3R5cGUuaW52YWxpZGF0ZVRva2VuPWZ1bmN0aW9uKCl7dGhpcy5mb3JjZVJlZnJlc2g9ITB9LGFBLnByb3RvdHlwZS5zZXRDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbih0KXt0aGlzLmNoYW5nZUxpc3RlbmVyPXQsdGhpcy5yZWNlaXZlZEluaXRpYWxVc2VyJiZ0KHRoaXMuY3VycmVudFVzZXIpfSxhQS5wcm90b3R5cGUucmVtb3ZlQ2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24oKXt0aGlzLmF1dGgmJnRoaXMuYXV0aC5yZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm9jKSx0aGlzLm9jPW51bGwsdGhpcy5jaGFuZ2VMaXN0ZW5lcj1udWxsfSxhQS5wcm90b3R5cGUudWM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmF1dGgmJnRoaXMuYXV0aC5nZXRVaWQoKTtyZXR1cm4gbGIobnVsbD09PXR8fFwic3RyaW5nXCI9PXR5cGVvZiB0KSxuZXcgWFModCl9LGFBKSxuQT0oT2JqZWN0LmRlZmluZVByb3BlcnR5KG9BLnByb3RvdHlwZSxcImF1dGhIZWFkZXJzXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PXtcIlgtR29vZy1BdXRoVXNlclwiOnRoaXMuaGN9LGU9dGhpcy5hYy5hdXRoLmdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkoW10pO3JldHVybiBlJiYodC5BdXRob3JpemF0aW9uPWUpLHRoaXMubGMmJih0W1wiWC1Hb29nLUlhbS1BdXRob3JpemF0aW9uLVRva2VuXCJdPXRoaXMubGMpLHR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksb0EpLHJBPShpQS5wcm90b3R5cGUuZ2V0VG9rZW49ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBuQSh0aGlzLmFjLHRoaXMuaGMsdGhpcy5sYykpfSxpQS5wcm90b3R5cGUuc2V0Q2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24odCl7dChYUy5GSVJTVF9QQVJUWSl9LGlBLnByb3RvdHlwZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbigpe30saUEucHJvdG90eXBlLmludmFsaWRhdGVUb2tlbj1mdW5jdGlvbigpe30saUEpO2Z1bmN0aW9uIGlBKHQsZSxuKXt0aGlzLmFjPXQsdGhpcy5oYz1lLHRoaXMubGM9bn1mdW5jdGlvbiBvQSh0LGUsbil7dGhpcy5hYz10LHRoaXMuaGM9ZSx0aGlzLmxjPW4sdGhpcy50eXBlPVwiRmlyc3RQYXJ0eVwiLHRoaXMudXNlcj1YUy5GSVJTVF9QQVJUWX1mdW5jdGlvbiBhQSh0KXt2YXIgZT10aGlzO3RoaXMub2M9bnVsbCx0aGlzLmN1cnJlbnRVc2VyPVhTLlVOQVVUSEVOVElDQVRFRCx0aGlzLnJlY2VpdmVkSW5pdGlhbFVzZXI9ITEsdGhpcy5jYz0wLHRoaXMuY2hhbmdlTGlzdGVuZXI9bnVsbCx0aGlzLmZvcmNlUmVmcmVzaD0hMSx0aGlzLm9jPWZ1bmN0aW9uKCl7ZS5jYysrLGUuY3VycmVudFVzZXI9ZS51YygpLGUucmVjZWl2ZWRJbml0aWFsVXNlcj0hMCxlLmNoYW5nZUxpc3RlbmVyJiZlLmNoYW5nZUxpc3RlbmVyKGUuY3VycmVudFVzZXIpfSx0aGlzLmNjPTAsdGhpcy5hdXRoPXQuZ2V0SW1tZWRpYXRlKHtvcHRpb25hbDohMH0pLHRoaXMuYXV0aD90aGlzLmF1dGguYWRkQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vYyk6KHRoaXMub2MobnVsbCksdC5nZXQoKS50aGVuKGZ1bmN0aW9uKHQpe2UuYXV0aD10LGUub2MmJmUuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcihlLm9jKX0sZnVuY3Rpb24oKXt9KSl9ZnVuY3Rpb24gc0EodCl7dGhpcy50b2tlbj10LHRoaXMuY2hhbmdlTGlzdGVuZXI9bnVsbH1mdW5jdGlvbiB1QSgpe3RoaXMuY2hhbmdlTGlzdGVuZXI9bnVsbH1mdW5jdGlvbiBjQSh0LGUpe3RoaXMucHJvamVjdElkPXQsdGhpcy5kYXRhYmFzZT1lfHxcIihkZWZhdWx0KVwifWZ1bmN0aW9uIGhBKHQsZSxuKXtpZighbil0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkZ1bmN0aW9uIFwiK3QrXCIoKSBjYW5ub3QgYmUgY2FsbGVkIHdpdGggYW4gZW1wdHkgXCIrZStcIi5cIil9ZnVuY3Rpb24gbEEodCxlKXtpZih2b2lkIDA9PT1lKXJldHVybnttZXJnZTohMX07aWYodm9pZCAwIT09ZS5tZXJnZUZpZWxkcyYmdm9pZCAwIT09ZS5tZXJnZSl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkludmFsaWQgb3B0aW9ucyBwYXNzZWQgdG8gZnVuY3Rpb24gXCIrdCsnKCk6IFlvdSBjYW5ub3Qgc3BlY2lmeSBib3RoIFwibWVyZ2VcIiBhbmQgXCJtZXJnZUZpZWxkc1wiLicpO3JldHVybiBlfWZ1bmN0aW9uIGZBKHQsZSxuLHIpe2lmKCEwPT09ZSYmITA9PT1yKXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULHQrXCIgYW5kIFwiK24rXCIgY2Fubm90IGJlIHVzZWQgdG9nZXRoZXIuXCIpfWZ1bmN0aW9uIHBBKHQpe2lmKCFIYi5pc0RvY3VtZW50S2V5KHQpKXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50IHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgXCIrdCtcIiBoYXMgXCIrdC5sZW5ndGgrXCIuXCIpfWZ1bmN0aW9uIGRBKHQpe2lmKEhiLmlzRG9jdW1lbnRLZXkodCkpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJJbnZhbGlkIGNvbGxlY3Rpb24gcmVmZXJlbmNlLiBDb2xsZWN0aW9uIHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCBcIit0K1wiIGhhcyBcIit0Lmxlbmd0aCtcIi5cIil9ZnVuY3Rpb24gdkEoZSl7aWYodm9pZCAwPT09ZSlyZXR1cm5cInVuZGVmaW5lZFwiO2lmKG51bGw9PT1lKXJldHVyblwibnVsbFwiO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiAyMDxlLmxlbmd0aCYmKGU9ZS5zdWJzdHJpbmcoMCwyMCkrXCIuLi5cIiksSlNPTi5zdHJpbmdpZnkoZSk7aWYoXCJudW1iZXJcIj09dHlwZW9mIGV8fFwiYm9vbGVhblwiPT10eXBlb2YgZSlyZXR1cm5cIlwiK2U7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUpcmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT9cImEgZnVuY3Rpb25cIjpoYigpO2lmKGUgaW5zdGFuY2VvZiBBcnJheSlyZXR1cm5cImFuIGFycmF5XCI7dmFyIHQ9ZnVuY3Rpb24oKXtpZihlLmNvbnN0cnVjdG9yKXt2YXIgdD0vZnVuY3Rpb25cXHMrKFteXFxzKF0rKVxccypcXCgvLmV4ZWMoZS5jb25zdHJ1Y3Rvci50b1N0cmluZygpKTtpZih0JiYxPHQubGVuZ3RoKXJldHVybiB0WzFdfXJldHVybiBudWxsfSgpO3JldHVybiB0P1wiYSBjdXN0b20gXCIrdCtcIiBvYmplY3RcIjpcImFuIG9iamVjdFwifWZ1bmN0aW9uIGdBKHQsZSl7aWYoKHQ9XCJfZGVsZWdhdGVcImluIHQ/dC5fZGVsZWdhdGU6dClpbnN0YW5jZW9mIGUpcmV0dXJuIHQ7aWYoZS5uYW1lPT09dC5jb25zdHJ1Y3Rvci5uYW1lKXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiVHlwZSBkb2VzIG5vdCBtYXRjaCB0aGUgZXhwZWN0ZWQgaW5zdGFuY2UuIERpZCB5b3UgcGFzcyBhIHJlZmVyZW5jZSBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBTREs/XCIpO3Q9dkEodCk7dGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJFeHBlY3RlZCB0eXBlICdcIitlLm5hbWUrXCInLCBidXQgaXQgd2FzOiBcIit0KX1mdW5jdGlvbiB5QSh0LGUpe2lmKGU8PTApdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJGdW5jdGlvbiBcIit0K1wiKCkgcmVxdWlyZXMgYSBwb3NpdGl2ZSBudW1iZXIsIGJ1dCBpdCB3YXM6IFwiK2UrXCIuXCIpfXZhciBtQSxiQT0oTkEucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaG9zdD09PXQuaG9zdCYmdGhpcy5zc2w9PT10LnNzbCYmdGhpcy5jcmVkZW50aWFscz09PXQuY3JlZGVudGlhbHMmJnRoaXMuY2FjaGVTaXplQnl0ZXM9PT10LmNhY2hlU2l6ZUJ5dGVzJiZ0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmc9PT10LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcmJnRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nPT09dC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcmJnRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcz09PXQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc30sTkEpLF9BPShPYmplY3QuZGVmaW5lUHJvcGVydHkoa0EucHJvdG90eXBlLFwiYXBwXCIse2dldDpmdW5jdGlvbigpe2lmKCF0aGlzLl9hcHApdGhyb3cgbmV3IG5iKGViLkZBSUxFRF9QUkVDT05ESVRJT04sXCJGaXJlc3RvcmUgd2FzIG5vdCBpbml0aWFsaXplZCB1c2luZyB0aGUgRmlyZWJhc2UgU0RLLiAnYXBwJyBpcyBub3QgYXZhaWxhYmxlXCIpO3JldHVybiB0aGlzLl9hcHB9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGtBLnByb3RvdHlwZSxcIl9pbml0aWFsaXplZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW59LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGtBLnByb3RvdHlwZSxcIl90ZXJtaW5hdGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT10aGlzLl90ZXJtaW5hdGVUYXNrfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGtBLnByb3RvdHlwZS5fc2V0U2V0dGluZ3M9ZnVuY3Rpb24odCl7aWYodGhpcy5fc2V0dGluZ3NGcm96ZW4pdGhyb3cgbmV3IG5iKGViLkZBSUxFRF9QUkVDT05ESVRJT04sXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBpdHMgc2V0dGluZ3MgY2FuIG5vIGxvbmdlciBiZSBjaGFuZ2VkLiBZb3UgY2FuIG9ubHkgbW9kaWZ5IHNldHRpbmdzIGJlZm9yZSBjYWxsaW5nIGFueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC5cIik7dGhpcy5fc2V0dGluZ3M9bmV3IGJBKHQpLHZvaWQgMCE9PXQuY3JlZGVudGlhbHMmJih0aGlzLl9jcmVkZW50aWFscz1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gbmV3IFpOO3N3aXRjaCh0LnR5cGUpe2Nhc2VcImdhcGlcIjp2YXIgZT10LmNsaWVudDtyZXR1cm4gbGIoIShcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWV8fCFlLmF1dGh8fCFlLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSkpLG5ldyByQShlLHQuc2Vzc2lvbkluZGV4fHxcIjBcIix0LmlhbVRva2VufHxudWxsKTtjYXNlXCJwcm92aWRlclwiOnJldHVybiB0LmNsaWVudDtkZWZhdWx0OnRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwibWFrZUNyZWRlbnRpYWxzUHJvdmlkZXIgZmFpbGVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWwgdHlwZVwiKX19KHQuY3JlZGVudGlhbHMpKX0sa0EucHJvdG90eXBlLl9nZXRTZXR0aW5ncz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZXR0aW5nc30sa0EucHJvdG90eXBlLl9mcmVlemVTZXR0aW5ncz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbj0hMCx0aGlzLl9zZXR0aW5nc30sa0EucHJvdG90eXBlLl9kZWxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGVybWluYXRlVGFza3x8KHRoaXMuX3Rlcm1pbmF0ZVRhc2s9dGhpcy5fdGVybWluYXRlKCkpLHRoaXMuX3Rlcm1pbmF0ZVRhc2t9LGtBLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57YXBwOnRoaXMuX2FwcCxkYXRhYmFzZUlkOnRoaXMuX2RhdGFiYXNlSWQsc2V0dGluZ3M6dGhpcy5fc2V0dGluZ3N9fSxrQS5wcm90b3R5cGUuX3Rlcm1pbmF0ZT1mdW5jdGlvbigpe3JldHVybih0PSROLmdldCh0aGlzKSkmJihhYihcIkNvbXBvbmVudFByb3ZpZGVyXCIsXCJSZW1vdmluZyBEYXRhc3RvcmVcIiksJE4uZGVsZXRlKHRoaXMpLHQudGVybWluYXRlKCkpLFByb21pc2UucmVzb2x2ZSgpO3ZhciB0fSxrQSksd0E9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDQS5wcm90b3R5cGUsXCJfcGF0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa2V5LnBhdGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KENBLnByb3RvdHlwZSxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDQS5wcm90b3R5cGUsXCJwYXRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoQ0EucHJvdG90eXBlLFwicGFyZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiBuZXcgVEEodGhpcy5maXJlc3RvcmUsdGhpcy5jb252ZXJ0ZXIsdGhpcy5fa2V5LnBhdGgucG9wTGFzdCgpKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxDQS5wcm90b3R5cGUud2l0aENvbnZlcnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IENBKHRoaXMuZmlyZXN0b3JlLHQsdGhpcy5fa2V5KX0sQ0EpLElBPShTQS5wcm90b3R5cGUud2l0aENvbnZlcnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFNBKHRoaXMuZmlyZXN0b3JlLHQsdGhpcy5fcXVlcnkpfSxTQSksVEE9KFhpKEVBLG1BPUlBKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRUEucHJvdG90eXBlLFwiaWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGgubGFzdFNlZ21lbnQoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRUEucHJvdG90eXBlLFwicGF0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRUEucHJvdG90eXBlLFwicGFyZW50XCIse2dldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3BhdGgucG9wTGFzdCgpO3JldHVybiB0LmlzRW1wdHkoKT9udWxsOm5ldyB3QSh0aGlzLmZpcmVzdG9yZSxudWxsLG5ldyBIYih0KSl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksRUEucHJvdG90eXBlLndpdGhDb252ZXJ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBFQSh0aGlzLmZpcmVzdG9yZSx0LHRoaXMuX3BhdGgpfSxFQSk7ZnVuY3Rpb24gRUEodCxlLG4pe3ZhciByPXRoaXM7cmV0dXJuKHI9bUEuY2FsbCh0aGlzLHQsZSxHXyhuKSl8fHRoaXMpLl9wYXRoPW4sci50eXBlPVwiY29sbGVjdGlvblwiLHJ9ZnVuY3Rpb24gU0EodCxlLG4pe3RoaXMuY29udmVydGVyPWUsdGhpcy5fcXVlcnk9bix0aGlzLnR5cGU9XCJxdWVyeVwiLHRoaXMuZmlyZXN0b3JlPXR9ZnVuY3Rpb24gQ0EodCxlLG4pe3RoaXMuY29udmVydGVyPWUsdGhpcy5fa2V5PW4sdGhpcy50eXBlPVwiZG9jdW1lbnRcIix0aGlzLmZpcmVzdG9yZT10fWZ1bmN0aW9uIGtBKHQsZSl7dGhpcy50eXBlPVwiZmlyZXN0b3JlLWxpdGVcIix0aGlzLl9wZXJzaXN0ZW5jZUtleT1cIihsaXRlKVwiLHRoaXMuX3NldHRpbmdzPW5ldyBiQSh7fSksdGhpcy5fc2V0dGluZ3NGcm96ZW49ITEsdCBpbnN0YW5jZW9mIEpOPyh0aGlzLl9kYXRhYmFzZUlkPXQsdGhpcy5fY3JlZGVudGlhbHM9bmV3IFpOKToodGhpcy5fYXBwPXQsdGhpcy5fZGF0YWJhc2VJZD1mdW5jdGlvbih0KXtpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5hcHBseSh0Lm9wdGlvbnMsW1wicHJvamVjdElkXCJdKSl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCwnXCJwcm9qZWN0SWRcIiBub3QgcHJvdmlkZWQgaW4gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcC4nKTtyZXR1cm4gbmV3IEpOKHQub3B0aW9ucy5wcm9qZWN0SWQpfSh0KSx0aGlzLl9jcmVkZW50aWFscz1uZXcgZUEoZSkpfWZ1bmN0aW9uIE5BKHQpe3ZhciBlO2lmKHZvaWQgMD09PXQuaG9zdCl7aWYodm9pZCAwIT09dC5zc2wpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTt0aGlzLmhvc3Q9XCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIix0aGlzLnNzbD0hMH1lbHNlIHRoaXMuaG9zdD10Lmhvc3QsdGhpcy5zc2w9bnVsbD09PShlPXQuc3NsKXx8dm9pZCAwPT09ZXx8ZTtpZih0aGlzLmNyZWRlbnRpYWxzPXQuY3JlZGVudGlhbHMsdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzPSEhdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLHZvaWQgMD09PXQuY2FjaGVTaXplQnl0ZXMpdGhpcy5jYWNoZVNpemVCeXRlcz00MTk0MzA0MDtlbHNle2lmKC0xIT09dC5jYWNoZVNpemVCeXRlcyYmdC5jYWNoZVNpemVCeXRlczwxMDQ4NTc2KXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO3RoaXMuY2FjaGVTaXplQnl0ZXM9dC5jYWNoZVNpemVCeXRlc310aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmc9ISF0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmc9ISF0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyxmQShcImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmdcIix0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsXCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcIix0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyl9ZnVuY3Rpb24gQUEodCxlKXtmb3IodmFyIG4scj1bXSxpPTI7aTxhcmd1bWVudHMubGVuZ3RoO2krKylyW2ktMl09YXJndW1lbnRzW2ldO2lmKHQ9dGEodCksaEEoXCJjb2xsZWN0aW9uXCIsXCJwYXRoXCIsZSksdCBpbnN0YW5jZW9mIF9BKXJldHVybiBkQShuPUNiLmZyb21TdHJpbmcuYXBwbHkoQ2Isbm8oW2VdLHIpKSksbmV3IFRBKHQsbnVsbCxuKTtpZighKHQgaW5zdGFuY2VvZiB3QXx8dCBpbnN0YW5jZW9mIFRBKSl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7cmV0dXJuIGRBKG49Q2IuZnJvbVN0cmluZy5hcHBseShDYixubyhbdC5wYXRoXSxyKSkuY2hpbGQoQ2IuZnJvbVN0cmluZyhlKSkpLG5ldyBUQSh0LmZpcmVzdG9yZSxudWxsLG4pfWZ1bmN0aW9uIFJBKHQsZSl7Zm9yKHZhciBuLHI9W10saT0yO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspcltpLTJdPWFyZ3VtZW50c1tpXTtpZih0PXRhKHQpLGhBKFwiZG9jXCIsXCJwYXRoXCIsZT0xPT09YXJndW1lbnRzLmxlbmd0aD9mYi51KCk6ZSksdCBpbnN0YW5jZW9mIF9BKXJldHVybiBwQShuPUNiLmZyb21TdHJpbmcuYXBwbHkoQ2Isbm8oW2VdLHIpKSksbmV3IHdBKHQsbnVsbCxuZXcgSGIobikpO2lmKCEodCBpbnN0YW5jZW9mIHdBfHx0IGluc3RhbmNlb2YgVEEpKXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtyZXR1cm4gcEEobj10Ll9wYXRoLmNoaWxkKENiLmZyb21TdHJpbmcuYXBwbHkoQ2Isbm8oW2VdLHIpKSkpLG5ldyB3QSh0LmZpcmVzdG9yZSx0IGluc3RhbmNlb2YgVEE/dC5jb252ZXJ0ZXI6bnVsbCxuZXcgSGIobikpfWZ1bmN0aW9uIFBBKHQsZSl7cmV0dXJuIHQ9dGEodCksZT10YShlKSwodCBpbnN0YW5jZW9mIHdBfHx0IGluc3RhbmNlb2YgVEEpJiYoZSBpbnN0YW5jZW9mIHdBfHxlIGluc3RhbmNlb2YgVEEpJiZ0LmZpcmVzdG9yZT09PWUuZmlyZXN0b3JlJiZ0LnBhdGg9PT1lLnBhdGgmJnQuY29udmVydGVyPT09ZS5jb252ZXJ0ZXJ9ZnVuY3Rpb24gT0EodCxlKXtyZXR1cm4gdD10YSh0KSxlPXRhKGUpLHQgaW5zdGFuY2VvZiBJQSYmZSBpbnN0YW5jZW9mIElBJiZ0LmZpcmVzdG9yZT09PWUuZmlyZXN0b3JlJiZldyh0Ll9xdWVyeSxlLl9xdWVyeSkmJnQuY29udmVydGVyPT09ZS5jb252ZXJ0ZXJ9dmFyIERBPShPYmplY3QuZGVmaW5lUHJvcGVydHkoeEEucHJvdG90eXBlLFwiaXNTaHV0dGluZ0Rvd25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2N9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSkseEEucHJvdG90eXBlLmVucXVldWVBbmRGb3JnZXQ9ZnVuY3Rpb24odCl7dGhpcy5lbnF1ZXVlKHQpfSx4QS5wcm90b3R5cGUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQ9ZnVuY3Rpb24odCl7dGhpcy5UYygpLHRoaXMuSWModCl9LHhBLnByb3RvdHlwZS5lbnRlclJlc3RyaWN0ZWRNb2RlPWZ1bmN0aW9uKCl7dmFyIHQ7dGhpcy53Y3x8KHRoaXMud2M9ITAsKHQ9RkMoKSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQucmVtb3ZlRXZlbnRMaXN0ZW5lciYmdC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMuRWMpKX0seEEucHJvdG90eXBlLmVucXVldWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuVGMoKSx0aGlzLndjP25ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe30pOnRoaXMuSWModCl9LHhBLnByb3RvdHlwZS5lbnF1ZXVlUmV0cnlhYmxlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uKCl7cmV0dXJuIGUuZGMucHVzaCh0KSxlLkFjKCl9KX0seEEucHJvdG90eXBlLkFjPWZ1bmN0aW9uKCl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG49dGhpcztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOmlmKDA9PT10aGlzLmRjLmxlbmd0aClyZXR1cm5bMyw1XTt0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSwzLCw0XSksWzQsdGhpcy5kY1swXSgpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLHRoaXMuZGMuc2hpZnQoKSx0aGlzLlppLnJlc2V0KCksWzMsNF07Y2FzZSAzOmlmKCFVVChlPXQuc2VudCgpKSl0aHJvdyBlO3JldHVybiBhYihcIkFzeW5jUXVldWVcIixcIk9wZXJhdGlvbiBmYWlsZWQgd2l0aCByZXRyeWFibGUgZXJyb3I6IFwiK2UpLFszLDRdO2Nhc2UgNDowPHRoaXMuZGMubGVuZ3RoJiZ0aGlzLlppLmppKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWMoKX0pLHQubGFiZWw9NTtjYXNlIDU6cmV0dXJuWzJdfX0pfSl9LHhBLnByb3RvdHlwZS5JYz1mdW5jdGlvbih0KXt2YXIgcj10aGlzLGU9dGhpcy5mYy50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHIueWM9ITAsdCgpLmNhdGNoKGZ1bmN0aW9uKHQpe3Rocm93IHIubWM9dCxyLnljPSExLHNiKFwiSU5URVJOQUwgVU5IQU5ETEVEIEVSUk9SOiBcIiwobj0oZT10KS5tZXNzYWdlfHxcIlwiLG49ZS5zdGFjaz9lLnN0YWNrLmluY2x1ZGVzKGUubWVzc2FnZSk/ZS5zdGFjazplLm1lc3NhZ2UrXCJcXG5cIitlLnN0YWNrOm4pKSx0O3ZhciBlLG59KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiByLnljPSExLHR9KX0pO3JldHVybiB0aGlzLmZjPWV9LHhBLnByb3RvdHlwZS5lbnF1ZXVlQWZ0ZXJEZWxheT1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt0aGlzLlRjKCksLTE8dGhpcy5nYy5pbmRleE9mKHQpJiYoZT0wKTtuPWJrLmNyZWF0ZUFuZFNjaGVkdWxlKHRoaXMsdCxlLG4sZnVuY3Rpb24odCl7cmV0dXJuIHIuUmModCl9KTtyZXR1cm4gdGhpcy5fYy5wdXNoKG4pLG59LHhBLnByb3RvdHlwZS5UYz1mdW5jdGlvbigpe3RoaXMubWMmJmhiKCl9LHhBLnByb3RvdHlwZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzPWZ1bmN0aW9uKCl7fSx4QS5wcm90b3R5cGUuYmM9ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxlPXRoaXMuZmNdO2Nhc2UgMTp0LnNlbnQoKSx0LmxhYmVsPTI7Y2FzZSAyOmlmKGUhPT10aGlzLmZjKXJldHVyblszLDBdO3QubGFiZWw9MztjYXNlIDM6cmV0dXJuWzJdfX0pfSl9LHhBLnByb3RvdHlwZS52Yz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMuX2M7ZTxuLmxlbmd0aDtlKyspaWYobltlXS50aW1lcklkPT09dClyZXR1cm4hMDtyZXR1cm4hMX0seEEucHJvdG90eXBlLlBjPWZ1bmN0aW9uKHIpe3ZhciBpPXRoaXM7cmV0dXJuIHRoaXMuYmMoKS50aGVuKGZ1bmN0aW9uKCl7aS5fYy5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudGFyZ2V0VGltZU1zLWUudGFyZ2V0VGltZU1zfSk7Zm9yKHZhciB0PTAsZT1pLl9jO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgbj1lW3RdO2lmKG4uc2tpcERlbGF5KCksXCJhbGxcIiE9PXImJm4udGltZXJJZD09PXIpYnJlYWt9cmV0dXJuIGkuYmMoKX0pfSx4QS5wcm90b3R5cGUuVmM9ZnVuY3Rpb24odCl7dGhpcy5nYy5wdXNoKHQpfSx4QS5wcm90b3R5cGUuUmM9ZnVuY3Rpb24odCl7dD10aGlzLl9jLmluZGV4T2YodCk7dGhpcy5fYy5zcGxpY2UodCwxKX0seEEpO2Z1bmN0aW9uIHhBKCl7dmFyIGU9dGhpczt0aGlzLmZjPVByb21pc2UucmVzb2x2ZSgpLHRoaXMuZGM9W10sdGhpcy53Yz0hMSx0aGlzLl9jPVtdLHRoaXMubWM9bnVsbCx0aGlzLnljPSExLHRoaXMuZ2M9W10sdGhpcy5aaT1uZXcgS0ModGhpcyxcImFzeW5jX3F1ZXVlX3JldHJ5XCIpLHRoaXMuRWM9ZnVuY3Rpb24oKXt2YXIgdD1GQygpO3QmJmFiKFwiQXN5bmNRdWV1ZVwiLFwiVmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VkIHRvIFwiK3QudmlzaWJpbGl0eVN0YXRlKSxlLlppLkdpKCl9O3ZhciB0PUZDKCk7dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5hZGRFdmVudExpc3RlbmVyJiZ0LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsdGhpcy5FYyl9ZnVuY3Rpb24gTEEoaSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGkmJm51bGwhPT1pKWZvcih2YXIgdD1pLGU9MCxuPVtcIm5leHRcIixcImVycm9yXCIsXCJjb21wbGV0ZVwiXTtlPG4ubGVuZ3RoO2UrKyl7dmFyIHI9bltlXTtpZihyIGluIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRbcl0pcmV0dXJuIDF9fSgpfXZhciBNQSxGQT0ocUEucHJvdG90eXBlLm9uUHJvZ3Jlc3M9ZnVuY3Rpb24odCxlLG4pe3RoaXMuX3Byb2dyZXNzT2JzZXJ2ZXI9e25leHQ6dCxlcnJvcjplLGNvbXBsZXRlOm59fSxxQS5wcm90b3R5cGUuY2F0Y2g9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS5jYXRjaCh0KX0scUEucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLnRoZW4odCxlKX0scUEucHJvdG90eXBlLl9jb21wbGV0ZVdpdGg9ZnVuY3Rpb24odCl7dGhpcy5fdXBkYXRlUHJvZ3Jlc3ModCksdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSYmdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSgpLHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVzb2x2ZSh0KX0scUEucHJvdG90eXBlLl9mYWlsV2l0aD1mdW5jdGlvbih0KXt0aGlzLl9sYXN0UHJvZ3Jlc3MudGFza1N0YXRlPVwiRXJyb3JcIix0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQmJnRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCh0aGlzLl9sYXN0UHJvZ3Jlc3MpLHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3ImJnRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IodCksdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZWplY3QodCl9LHFBLnByb3RvdHlwZS5fdXBkYXRlUHJvZ3Jlc3M9ZnVuY3Rpb24odCl7dGhpcy5fbGFzdFByb2dyZXNzPXQsdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0JiZ0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodCl9LHFBKSxVQT0oWGkoakEsTUE9X0EpLGpBLnByb3RvdHlwZS5fdGVybWluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudHx8QkEodGhpcyksdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnRlcm1pbmF0ZSgpfSxqQSk7ZnVuY3Rpb24gakEodCxlKXt2YXIgbj10aGlzO3JldHVybihuPU1BLmNhbGwodGhpcyx0LGUpfHx0aGlzKS50eXBlPVwiZmlyZXN0b3JlXCIsbi5fcXVldWU9bmV3IERBLG4uX3BlcnNpc3RlbmNlS2V5PVwibmFtZVwiaW4gdD90Lm5hbWU6XCJbREVGQVVMVF1cIixufWZ1bmN0aW9uIHFBKCl7dGhpcy5fcHJvZ3Jlc3NPYnNlcnZlcj17fSx0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyPW5ldyBDVCx0aGlzLl9sYXN0UHJvZ3Jlc3M9e3Rhc2tTdGF0ZTpcIlJ1bm5pbmdcIix0b3RhbEJ5dGVzOjAsdG90YWxEb2N1bWVudHM6MCxieXRlc0xvYWRlZDowLGRvY3VtZW50c0xvYWRlZDowfX1mdW5jdGlvbiBWQSh0KXtyZXR1cm4gdC5fZmlyZXN0b3JlQ2xpZW50fHxCQSh0KSx0Ll9maXJlc3RvcmVDbGllbnQudmVyaWZ5Tm90VGVybWluYXRlZCgpLHQuX2ZpcmVzdG9yZUNsaWVudH1mdW5jdGlvbiBCQSh0KXt2YXIgZSxuLHIsaT10Ll9mcmVlemVTZXR0aW5ncygpLGk9KGU9dC5fZGF0YWJhc2VJZCxuPShudWxsPT09KHI9dC5fYXBwKXx8dm9pZCAwPT09cj92b2lkIDA6ci5vcHRpb25zLmFwcElkKXx8XCJcIixyPXQuX3BlcnNpc3RlbmNlS2V5LG5ldyBYTihlLG4scixpLmhvc3QsaS5zc2wsaS5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLGkuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nKSk7dC5fZmlyZXN0b3JlQ2xpZW50PW5ldyBPTih0Ll9jcmVkZW50aWFscyx0Ll9xdWV1ZSxpKX1mdW5jdGlvbiBLQShyLGksbyl7dmFyIHQ9dGhpcyxhPW5ldyBDVDtyZXR1cm4gci5hc3luY1F1ZXVlLmVucXVldWUoZnVuY3Rpb24oKXtyZXR1cm4gJGkodCx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdC50cnlzLnB1c2goWzAsMywsNF0pLFs0LFVOKHIsbyldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksWzQsak4ocixpKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSxhLnJlc29sdmUoKSxbMyw0XTtjYXNlIDM6aWYoIShcIkZpcmViYXNlRXJyb3JcIj09PShlPW49dC5zZW50KCkpLm5hbWU/ZS5jb2RlPT09ZWIuRkFJTEVEX1BSRUNPTkRJVElPTnx8ZS5jb2RlPT09ZWIuVU5JTVBMRU1FTlRFRDohKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBET01FeGNlcHRpb24mJmUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pfHwyMj09PWUuY29kZXx8MjA9PT1lLmNvZGV8fDExPT09ZS5jb2RlKSl0aHJvdyBuO3JldHVybiBjb25zb2xlLndhcm4oXCJFcnJvciBlbmFibGluZyBvZmZsaW5lIHBlcnNpc3RlbmNlLiBGYWxsaW5nIGJhY2sgdG8gcGVyc2lzdGVuY2UgZGlzYWJsZWQ6IFwiK24pLGEucmVqZWN0KG4pLFszLDRdO2Nhc2UgNDpyZXR1cm5bMl19dmFyIGV9KX0pfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBhLnByb21pc2V9KX1mdW5jdGlvbiBXQSh0KXtpZih0Ll9pbml0aWFsaXplZHx8dC5fdGVybWluYXRlZCl0aHJvdyBuZXcgbmIoZWIuRkFJTEVEX1BSRUNPTkRJVElPTixcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIHBlcnNpc3RlbmNlIGNhbiBubyBsb25nZXIgYmUgZW5hYmxlZC4gWW91IGNhbiBvbmx5IGVuYWJsZSBwZXJzaXN0ZW5jZSBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpfXZhciBIQT0oblIucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ludGVybmFsUGF0aC5pc0VxdWFsKHQuX2ludGVybmFsUGF0aCl9LG5SKSxHQT0oZVIuZnJvbUJhc2U2NFN0cmluZz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIG5ldyBlUihSYi5mcm9tQmFzZTY0U3RyaW5nKHQpKX1jYXRjaCh0KXt0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkZhaWxlZCB0byBjb25zdHJ1Y3QgZGF0YSBmcm9tIEJhc2U2NCBzdHJpbmc6IFwiK3QpfX0sZVIuZnJvbVVpbnQ4QXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlUihSYi5mcm9tVWludDhBcnJheSh0KSl9LGVSLnByb3RvdHlwZS50b0Jhc2U2ND1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvQmFzZTY0KCl9LGVSLnByb3RvdHlwZS50b1VpbnQ4QXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy50b1VpbnQ4QXJyYXkoKX0sZVIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJCeXRlcyhiYXNlNjQ6IFwiK3RoaXMudG9CYXNlNjQoKStcIilcIn0sZVIucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcuaXNFcXVhbCh0Ll9ieXRlU3RyaW5nKX0sZVIpLHpBPWZ1bmN0aW9uKHQpe3RoaXMuX21ldGhvZE5hbWU9dH0sUUE9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Ui5wcm90b3R5cGUsXCJsYXRpdHVkZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGF0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Ui5wcm90b3R5cGUsXCJsb25naXR1ZGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvbmd9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdFIucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xhdD09PXQuX2xhdCYmdGhpcy5fbG9uZz09PXQuX2xvbmd9LHRSLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57bGF0aXR1ZGU6dGhpcy5fbGF0LGxvbmdpdHVkZTp0aGlzLl9sb25nfX0sdFIucHJvdG90eXBlLl9jb21wYXJlVG89ZnVuY3Rpb24odCl7cmV0dXJuIGRiKHRoaXMuX2xhdCx0Ll9sYXQpfHxkYih0aGlzLl9sb25nLHQuX2xvbmcpfSx0UiksWUE9L15fXy4qX18kLyxYQT0oWkEucHJvdG90eXBlLnRvTXV0YXRpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbCE9PXRoaXMuZmllbGRNYXNrP25ldyBGdyh0LHRoaXMuZGF0YSx0aGlzLmZpZWxkTWFzayxlLHRoaXMuZmllbGRUcmFuc2Zvcm1zKTpuZXcgTXcodCx0aGlzLmRhdGEsZSx0aGlzLmZpZWxkVHJhbnNmb3Jtcyl9LFpBKSxKQT0oJEEucHJvdG90eXBlLnRvTXV0YXRpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IEZ3KHQsdGhpcy5kYXRhLHRoaXMuZmllbGRNYXNrLGUsdGhpcy5maWVsZFRyYW5zZm9ybXMpfSwkQSk7ZnVuY3Rpb24gJEEodCxlLG4pe3RoaXMuZGF0YT10LHRoaXMuZmllbGRNYXNrPWUsdGhpcy5maWVsZFRyYW5zZm9ybXM9bn1mdW5jdGlvbiBaQSh0LGUsbil7dGhpcy5kYXRhPXQsdGhpcy5maWVsZE1hc2s9ZSx0aGlzLmZpZWxkVHJhbnNmb3Jtcz1ufWZ1bmN0aW9uIHRSKHQsZSl7aWYoIWlzRmluaXRlKHQpfHx0PC05MHx8OTA8dCl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIit0KTtpZighaXNGaW5pdGUoZSl8fGU8LTE4MHx8MTgwPGUpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogXCIrZSk7dGhpcy5fbGF0PXQsdGhpcy5fbG9uZz1lfWZ1bmN0aW9uIGVSKHQpe3RoaXMuX2J5dGVTdHJpbmc9dH1mdW5jdGlvbiBuUigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtmb3IodmFyIG49MDtuPHQubGVuZ3RoOysrbilpZigwPT09dFtuXS5sZW5ndGgpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIEZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LlwiKTt0aGlzLl9pbnRlcm5hbFBhdGg9bmV3IE5iKHQpfWZ1bmN0aW9uIHJSKHQpe3N3aXRjaCh0KXtjYXNlIDA6Y2FzZSAyOmNhc2UgMTpyZXR1cm4gMTtjYXNlIDM6Y2FzZSA0OnJldHVybjtkZWZhdWx0OnRocm93IGhiKCl9fXZhciBpUj0oT2JqZWN0LmRlZmluZVByb3BlcnR5KHNSLnByb3RvdHlwZSxcInBhdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0dGluZ3MucGF0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoc1IucHJvdG90eXBlLFwiRGNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0dGluZ3MuRGN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksc1IucHJvdG90eXBlLkNjPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgc1IoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuc2V0dGluZ3MpLHQpLHRoaXMuZGF0YWJhc2VJZCx0aGlzLlIsdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLHRoaXMuZmllbGRUcmFuc2Zvcm1zLHRoaXMuZmllbGRNYXNrKX0sc1IucHJvdG90eXBlLk5jPWZ1bmN0aW9uKHQpe3ZhciBlPW51bGw9PT0oZT10aGlzLnBhdGgpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmNoaWxkKHQpLGU9dGhpcy5DYyh7cGF0aDplLHhjOiExfSk7cmV0dXJuIGUuRmModCksZX0sc1IucHJvdG90eXBlLmtjPWZ1bmN0aW9uKHQpe3ZhciBlLHQ9bnVsbD09PShlPXRoaXMucGF0aCl8fHZvaWQgMD09PWU/dm9pZCAwOmUuY2hpbGQodCksdD10aGlzLkNjKHtwYXRoOnQseGM6ITF9KTtyZXR1cm4gdC5TYygpLHR9LHNSLnByb3RvdHlwZS5PYz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5DYyh7cGF0aDp2b2lkIDAseGM6ITB9KX0sc1IucHJvdG90eXBlLiRjPWZ1bmN0aW9uKHQpe3JldHVybiBNUih0LHRoaXMuc2V0dGluZ3MubWV0aG9kTmFtZSx0aGlzLnNldHRpbmdzLk1jfHwhMSx0aGlzLnBhdGgsdGhpcy5zZXR0aW5ncy5MYyl9LHNSLnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5maWVsZE1hc2suZmluZChmdW5jdGlvbih0KXtyZXR1cm4gZS5pc1ByZWZpeE9mKHQpfSl8fHZvaWQgMCE9PXRoaXMuZmllbGRUcmFuc2Zvcm1zLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIGUuaXNQcmVmaXhPZih0LmZpZWxkKX0pfSxzUi5wcm90b3R5cGUuU2M9ZnVuY3Rpb24oKXtpZih0aGlzLnBhdGgpZm9yKHZhciB0PTA7dDx0aGlzLnBhdGgubGVuZ3RoO3QrKyl0aGlzLkZjKHRoaXMucGF0aC5nZXQodCkpfSxzUi5wcm90b3R5cGUuRmM9ZnVuY3Rpb24odCl7aWYoMD09PXQubGVuZ3RoKXRocm93IHRoaXMuJGMoXCJEb2N1bWVudCBmaWVsZHMgbXVzdCBub3QgYmUgZW1wdHlcIik7aWYoclIodGhpcy5EYykmJllBLnRlc3QodCkpdGhyb3cgdGhpcy4kYygnRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyl9LHNSKSxvUj0oYVIucHJvdG90eXBlLkJjPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj0hMSksbmV3IGlSKHtEYzp0LG1ldGhvZE5hbWU6ZSxMYzpuLHBhdGg6TmIuZW1wdHlQYXRoKCkseGM6ITEsTWM6cn0sdGhpcy5kYXRhYmFzZUlkLHRoaXMuUix0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpfSxhUik7ZnVuY3Rpb24gYVIodCxlLG4pe3RoaXMuZGF0YWJhc2VJZD10LHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcz1lLHRoaXMuUj1ufHxVQyh0KX1mdW5jdGlvbiBzUih0LGUsbixyLGksbyl7dGhpcy5zZXR0aW5ncz10LHRoaXMuZGF0YWJhc2VJZD1lLHRoaXMuUj1uLHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcz1yLHZvaWQgMD09PWkmJnRoaXMuU2MoKSx0aGlzLmZpZWxkVHJhbnNmb3Jtcz1pfHxbXSx0aGlzLmZpZWxkTWFzaz1vfHxbXX1mdW5jdGlvbiB1Uih0KXt2YXIgZT10Ll9mcmVlemVTZXR0aW5ncygpLG49VUModC5fZGF0YWJhc2VJZCk7cmV0dXJuIG5ldyBvUih0Ll9kYXRhYmFzZUlkLCEhZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLG4pfWZ1bmN0aW9uIGNSKHQsZSxuLHIsaSxvKXt2b2lkIDA9PT1vJiYobz17fSk7dmFyIGE9dC5CYyhvLm1lcmdlfHxvLm1lcmdlRmllbGRzPzI6MCxlLG4saSk7T1IoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLGEscik7dmFyIHMsdSxyPVJSKHIsYSk7aWYoby5tZXJnZSlzPW5ldyBBYihhLmZpZWxkTWFzayksdT1hLmZpZWxkVHJhbnNmb3JtcztlbHNlIGlmKG8ubWVyZ2VGaWVsZHMpe2Zvcih2YXIgYz1bXSxoPTAsbD1vLm1lcmdlRmllbGRzO2g8bC5sZW5ndGg7aCsrKXt2YXIgZj1EUihlLGxbaF0sbik7aWYoIWEuY29udGFpbnMoZikpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJGaWVsZCAnXCIrZitcIicgaXMgc3BlY2lmaWVkIGluIHlvdXIgZmllbGQgbWFzayBidXQgbWlzc2luZyBmcm9tIHlvdXIgaW5wdXQgZGF0YS5cIik7RlIoYyxmKXx8Yy5wdXNoKGYpfXM9bmV3IEFiKGMpLHU9YS5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBzLmNvdmVycyh0LmZpZWxkKX0pfWVsc2Ugcz1udWxsLHU9YS5maWVsZFRyYW5zZm9ybXM7cmV0dXJuIG5ldyBYQShuZXcgb18ocikscyx1KX12YXIgaFIsbFI9KFhpKGZSLGhSPXpBKSxmUi5wcm90b3R5cGUuX3RvRmllbGRUcmFuc2Zvcm09ZnVuY3Rpb24odCl7aWYoMiE9PXQuRGMpdGhyb3cgMT09PXQuRGM/dC4kYyh0aGlzLl9tZXRob2ROYW1lK1wiKCkgY2FuIG9ubHkgYXBwZWFyIGF0IHRoZSB0b3AgbGV2ZWwgb2YgeW91ciB1cGRhdGUgZGF0YVwiKTp0LiRjKHRoaXMuX21ldGhvZE5hbWUrXCIoKSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNldCgpIHVubGVzcyB5b3UgcGFzcyB7bWVyZ2U6dHJ1ZX1cIik7cmV0dXJuIHQuZmllbGRNYXNrLnB1c2godC5wYXRoKSxudWxsfSxmUi5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGZSfSxmUik7ZnVuY3Rpb24gZlIoKXtyZXR1cm4gbnVsbCE9PWhSJiZoUi5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9ZnVuY3Rpb24gcFIodCxlLG4pe3JldHVybiBuZXcgaVIoe0RjOjMsTGM6ZS5zZXR0aW5ncy5MYyxtZXRob2ROYW1lOnQuX21ldGhvZE5hbWUseGM6bn0sZS5kYXRhYmFzZUlkLGUuUixlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpfXZhciBkUix2UixnUix5UixtUj0oWGkoU1IseVI9ekEpLFNSLnByb3RvdHlwZS5fdG9GaWVsZFRyYW5zZm9ybT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGt3KHQucGF0aCxuZXcgZncpfSxTUi5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIFNSfSxTUiksYlI9KFhpKEVSLGdSPXpBKSxFUi5wcm90b3R5cGUuX3RvRmllbGRUcmFuc2Zvcm09ZnVuY3Rpb24odCl7dmFyIGU9cFIodGhpcyx0LCEwKSxuPXRoaXMucWMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBBUih0LGUpfSksbj1uZXcgcHcobik7cmV0dXJuIG5ldyBrdyh0LnBhdGgsbil9LEVSLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT09dH0sRVIpLF9SPShYaShUUix2Uj16QSksVFIucHJvdG90eXBlLl90b0ZpZWxkVHJhbnNmb3JtPWZ1bmN0aW9uKHQpe3ZhciBlPXBSKHRoaXMsdCwhMCksbj10aGlzLnFjLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gQVIodCxlKX0pLG49bmV3IG13KG4pO3JldHVybiBuZXcga3codC5wYXRoLG4pfSxUUi5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09PXR9LFRSKSx3Uj0oWGkoSVIsZFI9ekEpLElSLnByb3RvdHlwZS5fdG9GaWVsZFRyYW5zZm9ybT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgSXcodC5SLHV3KHQuUix0aGlzLlVjKSk7cmV0dXJuIG5ldyBrdyh0LnBhdGgsZSl9LElSLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT09dH0sSVIpO2Z1bmN0aW9uIElSKHQsZSl7dmFyIG49dGhpcztyZXR1cm4obj1kUi5jYWxsKHRoaXMsdCl8fHRoaXMpLlVjPWUsbn1mdW5jdGlvbiBUUih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuKG49dlIuY2FsbCh0aGlzLHQpfHx0aGlzKS5xYz1lLG59ZnVuY3Rpb24gRVIodCxlKXt2YXIgbj10aGlzO3JldHVybihuPWdSLmNhbGwodGhpcyx0KXx8dGhpcykucWM9ZSxufWZ1bmN0aW9uIFNSKCl7cmV0dXJuIG51bGwhPT15UiYmeVIuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfWZ1bmN0aW9uIENSKHQscixpLGUpe3ZhciBvPXQuQmMoMSxyLGkpO09SKFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIixvLGUpO3ZhciBhPVtdLHM9b18uZW1wdHkoKTtJYihlLGZ1bmN0aW9uKHQsZSl7dmFyIG49TFIocix0LGkpO2U9dGEoZSk7dD1vLmtjKG4pO2UgaW5zdGFuY2VvZiBsUj9hLnB1c2gobik6bnVsbCE9KHQ9QVIoZSx0KSkmJihhLnB1c2gobikscy5zZXQobix0KSl9KTtlPW5ldyBBYihhKTtyZXR1cm4gbmV3IEpBKHMsZSxvLmZpZWxkVHJhbnNmb3Jtcyl9ZnVuY3Rpb24ga1IodCxlLG4scixpLG8pe3ZhciBhPXQuQmMoMSxlLG4pLHM9W0RSKGUscixuKV0sdT1baV07aWYoby5sZW5ndGglMiE9MCl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkZ1bmN0aW9uIFwiK2UrXCIoKSBuZWVkcyB0byBiZSBjYWxsZWQgd2l0aCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMgdGhhdCBhbHRlcm5hdGUgYmV0d2VlbiBmaWVsZCBuYW1lcyBhbmQgdmFsdWVzLlwiKTtmb3IodmFyIGM9MDtjPG8ubGVuZ3RoO2MrPTIpcy5wdXNoKERSKGUsb1tjXSkpLHUucHVzaChvW2MrMV0pO2Zvcih2YXIgaCxsLGYscD1bXSxkPW9fLmVtcHR5KCksdj1zLmxlbmd0aC0xOzA8PXY7LS12KUZSKHAsc1t2XSl8fChoPXNbdl0sbD10YShsPXVbdl0pLGY9YS5rYyhoKSxsIGluc3RhbmNlb2YgbFI/cC5wdXNoKGgpOm51bGwhPShmPUFSKGwsZikpJiYocC5wdXNoKGgpLGQuc2V0KGgsZikpKTtpPW5ldyBBYihwKTtyZXR1cm4gbmV3IEpBKGQsaSxhLmZpZWxkVHJhbnNmb3Jtcyl9ZnVuY3Rpb24gTlIodCxlLG4scil7cmV0dXJuIHZvaWQgMD09PXImJihyPSExKSxBUihuLHQuQmMocj80OjMsZSkpfWZ1bmN0aW9uIEFSKGEsdCl7aWYoUFIoYT10YShhKSkpcmV0dXJuIE9SKFwiVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6XCIsdCxhKSxSUihhLHQpO2lmKGEgaW5zdGFuY2VvZiB6QSlyZXR1cm4gZnVuY3Rpb24odCxlKXtpZighclIoZS5EYykpdGhyb3cgZS4kYyh0Ll9tZXRob2ROYW1lK1wiKCkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHVwZGF0ZSgpIGFuZCBzZXQoKVwiKTtpZighZS5wYXRoKXRocm93IGUuJGModC5fbWV0aG9kTmFtZStcIigpIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluc2lkZSBhcnJheXNcIik7dD10Ll90b0ZpZWxkVHJhbnNmb3JtKGUpO3QmJmUuZmllbGRUcmFuc2Zvcm1zLnB1c2godCl9KGEsdCksbnVsbDtpZih2b2lkIDA9PT1hJiZ0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpcmV0dXJuIG51bGw7aWYodC5wYXRoJiZ0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksYSBpbnN0YW5jZW9mIEFycmF5KXtpZih0LnNldHRpbmdzLnhjJiY0IT09dC5EYyl0aHJvdyB0LiRjKFwiTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MCxyPTAsaT1hO3I8aS5sZW5ndGg7cisrKXt2YXIgbz1BUihpW3JdLHQuT2MobikpO251bGw9PW8mJihvPXtudWxsVmFsdWU6XCJOVUxMX1ZBTFVFXCJ9KSxlLnB1c2gobyksbisrfXJldHVybnthcnJheVZhbHVlOnt2YWx1ZXM6ZX19fSh0KX1yZXR1cm4gZnVuY3Rpb24odCxlKXtpZihudWxsPT09KHQ9dGEodCkpKXJldHVybntudWxsVmFsdWU6XCJOVUxMX1ZBTFVFXCJ9O2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXJldHVybiB1dyhlLlIsdCk7aWYoXCJib29sZWFuXCI9PXR5cGVvZiB0KXJldHVybntib29sZWFuVmFsdWU6dH07aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJue3N0cmluZ1ZhbHVlOnR9O2lmKHQgaW5zdGFuY2VvZiBEYXRlKXt2YXIgbj15Yi5mcm9tRGF0ZSh0KTtyZXR1cm57dGltZXN0YW1wVmFsdWU6T0koZS5SLG4pfX1pZih0IGluc3RhbmNlb2YgeWIpcmV0dXJuIG49bmV3IHliKHQuc2Vjb25kcywxZTMqTWF0aC5mbG9vcih0Lm5hbm9zZWNvbmRzLzFlMykpLHt0aW1lc3RhbXBWYWx1ZTpPSShlLlIsbil9O2lmKHQgaW5zdGFuY2VvZiBRQSlyZXR1cm57Z2VvUG9pbnRWYWx1ZTp7bGF0aXR1ZGU6dC5sYXRpdHVkZSxsb25naXR1ZGU6dC5sb25naXR1ZGV9fTtpZih0IGluc3RhbmNlb2YgR0EpcmV0dXJue2J5dGVzVmFsdWU6REkoZS5SLHQuX2J5dGVTdHJpbmcpfTtpZih0IGluc3RhbmNlb2Ygd0Epe3ZhciBuPWUuZGF0YWJhc2VJZCxyPXQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkO2lmKCFyLmlzRXF1YWwobikpdGhyb3cgZS4kYyhcIkRvY3VtZW50IHJlZmVyZW5jZSBpcyBmb3IgZGF0YWJhc2UgXCIrci5wcm9qZWN0SWQrXCIvXCIrci5kYXRhYmFzZStcIiBidXQgc2hvdWxkIGJlIGZvciBkYXRhYmFzZSBcIituLnByb2plY3RJZCtcIi9cIituLmRhdGFiYXNlKTtyZXR1cm57cmVmZXJlbmNlVmFsdWU6TEkodC5maXJlc3RvcmUuX2RhdGFiYXNlSWR8fGUuZGF0YWJhc2VJZCx0Ll9rZXkucGF0aCl9fXRocm93IGUuJGMoXCJVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTogXCIrdkEodCkpfShhLHQpfWZ1bmN0aW9uIFJSKHQsbil7dmFyIHI9e307cmV0dXJuIFRiKHQpP24ucGF0aCYmMDxuLnBhdGgubGVuZ3RoJiZuLmZpZWxkTWFzay5wdXNoKG4ucGF0aCk6SWIodCxmdW5jdGlvbih0LGUpe2U9QVIoZSxuLk5jKHQpKTtudWxsIT1lJiYoclt0XT1lKX0pLHttYXBWYWx1ZTp7ZmllbGRzOnJ9fX1mdW5jdGlvbiBQUih0KXtyZXR1cm4hKFwib2JqZWN0XCIhPXR5cGVvZiB0fHxudWxsPT09dHx8dCBpbnN0YW5jZW9mIEFycmF5fHx0IGluc3RhbmNlb2YgRGF0ZXx8dCBpbnN0YW5jZW9mIHlifHx0IGluc3RhbmNlb2YgUUF8fHQgaW5zdGFuY2VvZiBHQXx8dCBpbnN0YW5jZW9mIHdBfHx0IGluc3RhbmNlb2YgekEpfWZ1bmN0aW9uIE9SKHQsZSxuKXtpZighUFIobil8fChcIm9iamVjdFwiIT10eXBlb2Yocj1uKXx8bnVsbD09PXJ8fE9iamVjdC5nZXRQcm90b3R5cGVPZihyKSE9PU9iamVjdC5wcm90b3R5cGUmJm51bGwhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2YocikpKXtuPXZBKG4pO3Rocm93XCJhbiBvYmplY3RcIj09PW4/ZS4kYyh0K1wiIGEgY3VzdG9tIG9iamVjdFwiKTplLiRjKHQrXCIgXCIrbil9dmFyIHJ9ZnVuY3Rpb24gRFIodCxlLG4pe2lmKChlPXRhKGUpKWluc3RhbmNlb2YgSEEpcmV0dXJuIGUuX2ludGVybmFsUGF0aDtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gTFIodCxlKTt0aHJvdyBNUihcIkZpZWxkIHBhdGggYXJndW1lbnRzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcgb3IgRmllbGRQYXRoLlwiLHQsITEsdm9pZCAwLG4pfXZhciB4Uj1uZXcgUmVnRXhwKFwiW35cXFxcKi9cXFxcW1xcXFxdXVwiKTtmdW5jdGlvbiBMUihlLG4scil7aWYoMDw9bi5zZWFyY2goeFIpKXRocm93IE1SKFwiSW52YWxpZCBmaWVsZCBwYXRoIChcIituK1wiKS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAnficsICcqJywgJy8nLCAnWycsIG9yICddJ1wiLGUsITEsdm9pZCAwLHIpO3RyeXtyZXR1cm4obmV3KEhBLmJpbmQuYXBwbHkoSEEsbm8oW3ZvaWQgMF0sbi5zcGxpdChcIi5cIikpKSkpLl9pbnRlcm5hbFBhdGh9Y2F0Y2godCl7dGhyb3cgTVIoXCJJbnZhbGlkIGZpZWxkIHBhdGggKFwiK24rXCIpLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nXCIsZSwhMSx2b2lkIDAscil9fWZ1bmN0aW9uIE1SKHQsZSxuLHIsaSl7dmFyIG89ciYmIXIuaXNFbXB0eSgpLGE9dm9pZCAwIT09aSxlPVwiRnVuY3Rpb24gXCIrZStcIigpIGNhbGxlZCB3aXRoIGludmFsaWQgZGF0YVwiO24mJihlKz1cIiAodmlhIGB0b0ZpcmVzdG9yZSgpYClcIik7bj1cIlwiO3JldHVybihvfHxhKSYmKG4rPVwiIChmb3VuZFwiLG8mJihuKz1cIiBpbiBmaWVsZCBcIityKSxhJiYobis9XCIgaW4gZG9jdW1lbnQgXCIraSksbis9XCIpXCIpLG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULChlKz1cIi4gXCIpK3Qrbil9ZnVuY3Rpb24gRlIodCxlKXtyZXR1cm4gdC5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzRXF1YWwoZSl9KX12YXIgVVIsalI9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCUi5wcm90b3R5cGUsXCJpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoQlIucHJvdG90eXBlLFwicmVmXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBuZXcgd0EodGhpcy5fZmlyZXN0b3JlLHRoaXMuX2NvbnZlcnRlcix0aGlzLl9rZXkpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLEJSLnByb3RvdHlwZS5leGlzdHM9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMuX2RvY3VtZW50fSxCUi5wcm90b3R5cGUuZGF0YT1mdW5jdGlvbigpe2lmKHRoaXMuX2RvY3VtZW50KXtpZih0aGlzLl9jb252ZXJ0ZXIpe3ZhciB0PW5ldyBxUih0aGlzLl9maXJlc3RvcmUsdGhpcy5fdXNlckRhdGFXcml0ZXIsdGhpcy5fa2V5LHRoaXMuX2RvY3VtZW50LG51bGwpO3JldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZSh0KX1yZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudG9Qcm90bygpKX19LEJSLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7aWYodGhpcy5fZG9jdW1lbnQpe3Q9dGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChLUihcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsdCkpO2lmKG51bGwhPT10KXJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodCl9fSxCUikscVI9KFhpKFZSLFVSPWpSKSxWUi5wcm90b3R5cGUuZGF0YT1mdW5jdGlvbigpe3JldHVybiBVUi5wcm90b3R5cGUuZGF0YS5jYWxsKHRoaXMpfSxWUik7ZnVuY3Rpb24gVlIoKXtyZXR1cm4gbnVsbCE9PVVSJiZVUi5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9ZnVuY3Rpb24gQlIodCxlLG4scixpKXt0aGlzLl9maXJlc3RvcmU9dCx0aGlzLl91c2VyRGF0YVdyaXRlcj1lLHRoaXMuX2tleT1uLHRoaXMuX2RvY3VtZW50PXIsdGhpcy5fY29udmVydGVyPWl9ZnVuY3Rpb24gS1IodCxlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9MUih0LGUpOihlIGluc3RhbmNlb2YgSEE/ZTplLl9kZWxlZ2F0ZSkuX2ludGVybmFsUGF0aH12YXIgV1IsSFIsR1I9KFpSLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc1BlbmRpbmdXcml0ZXM9PT10Lmhhc1BlbmRpbmdXcml0ZXMmJnRoaXMuZnJvbUNhY2hlPT09dC5mcm9tQ2FjaGV9LFpSKSx6Uj0oWGkoJFIsSFI9alIpLCRSLnByb3RvdHlwZS5leGlzdHM9ZnVuY3Rpb24oKXtyZXR1cm4gSFIucHJvdG90eXBlLmV4aXN0cy5jYWxsKHRoaXMpfSwkUi5wcm90b3R5cGUuZGF0YT1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10JiYodD17fSksdGhpcy5fZG9jdW1lbnQpe2lmKHRoaXMuX2NvbnZlcnRlcil7dmFyIGU9bmV3IFFSKHRoaXMuX2ZpcmVzdG9yZSx0aGlzLl91c2VyRGF0YVdyaXRlcix0aGlzLl9rZXksdGhpcy5fZG9jdW1lbnQsdGhpcy5tZXRhZGF0YSxudWxsKTtyZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoZSx0KX1yZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudG9Qcm90bygpLHQuc2VydmVyVGltZXN0YW1wcyl9fSwkUi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9e30pLHRoaXMuX2RvY3VtZW50KXt0PXRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoS1IoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLHQpKTtpZihudWxsIT09dClyZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHQsZS5zZXJ2ZXJUaW1lc3RhbXBzKX19LCRSKSxRUj0oWGkoSlIsV1I9elIpLEpSLnByb3RvdHlwZS5kYXRhPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD17fSksV1IucHJvdG90eXBlLmRhdGEuY2FsbCh0aGlzLHQpfSxKUiksWVI9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYUi5wcm90b3R5cGUsXCJkb2NzXCIse2dldDpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUucHVzaCh0KX0pLGV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KFhSLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NuYXBzaG90LmRvY3Muc2l6ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoWFIucHJvdG90eXBlLFwiZW1wdHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLnNpemV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksWFIucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzO3RoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaChmdW5jdGlvbih0KXtlLmNhbGwobixuZXcgUVIoci5fZmlyZXN0b3JlLHIuX3VzZXJEYXRhV3JpdGVyLHQua2V5LHQsbmV3IEdSKHIuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyh0LmtleSksci5fc25hcHNob3QuZnJvbUNhY2hlKSxyLnF1ZXJ5LmNvbnZlcnRlcikpfSl9LFhSLnByb3RvdHlwZS5kb2NDaGFuZ2VzPWZ1bmN0aW9uKHQpe3Q9ISEodD12b2lkIDA9PT10P3t9OnQpLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7aWYodCYmdGhpcy5fc25hcHNob3QuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJUbyBpbmNsdWRlIG1ldGFkYXRhIGNoYW5nZXMgd2l0aCB5b3VyIGRvY3VtZW50IGNoYW5nZXMsIHlvdSBtdXN0IGFsc28gcGFzcyB7IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6dHJ1ZSB9IHRvIG9uU25hcHNob3QoKS5cIik7cmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMmJnRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzPT09dHx8KHRoaXMuX2NhY2hlZENoYW5nZXM9ZnVuY3Rpb24oaSxlKXtpZihpLl9zbmFwc2hvdC5vbGREb2NzLmlzRW1wdHkoKSl7dmFyIG49MDtyZXR1cm4gaS5fc25hcHNob3QuZG9jQ2hhbmdlcy5tYXAoZnVuY3Rpb24odCl7dmFyIGU9bmV3IFFSKGkuX2ZpcmVzdG9yZSxpLl91c2VyRGF0YVdyaXRlcix0LmRvYy5rZXksdC5kb2MsbmV3IEdSKGkuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyh0LmRvYy5rZXkpLGkuX3NuYXBzaG90LmZyb21DYWNoZSksaS5xdWVyeS5jb252ZXJ0ZXIpO3JldHVybiB0LmRvYyx7dHlwZTpcImFkZGVkXCIsZG9jOmUsb2xkSW5kZXg6LTEsbmV3SW5kZXg6bisrfX0pfXZhciBvPWkuX3NuYXBzaG90Lm9sZERvY3M7cmV0dXJuIGkuX3NuYXBzaG90LmRvY0NoYW5nZXMuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBlfHwzIT09dC50eXBlfSkubWFwKGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBRUihpLl9maXJlc3RvcmUsaS5fdXNlckRhdGFXcml0ZXIsdC5kb2Mua2V5LHQuZG9jLG5ldyBHUihpLl9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXModC5kb2Mua2V5KSxpLl9zbmFwc2hvdC5mcm9tQ2FjaGUpLGkucXVlcnkuY29udmVydGVyKSxuPS0xLHI9LTE7cmV0dXJuIDAhPT10LnR5cGUmJihuPW8uaW5kZXhPZih0LmRvYy5rZXkpLG89by5kZWxldGUodC5kb2Mua2V5KSksMSE9PXQudHlwZSYmKHI9KG89by5hZGQodC5kb2MpKS5pbmRleE9mKHQuZG9jLmtleSkpLHt0eXBlOmZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlIDA6cmV0dXJuXCJhZGRlZFwiO2Nhc2UgMjpjYXNlIDM6cmV0dXJuXCJtb2RpZmllZFwiO2Nhc2UgMTpyZXR1cm5cInJlbW92ZWRcIjtkZWZhdWx0OnJldHVybiBoYigpfX0odC50eXBlKSxkb2M6ZSxvbGRJbmRleDpuLG5ld0luZGV4OnJ9fSl9KHRoaXMsdCksdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXM9dCksdGhpcy5fY2FjaGVkQ2hhbmdlc30sWFIpO2Z1bmN0aW9uIFhSKHQsZSxuLHIpe3RoaXMuX2ZpcmVzdG9yZT10LHRoaXMuX3VzZXJEYXRhV3JpdGVyPWUsdGhpcy5fc25hcHNob3Q9cix0aGlzLm1ldGFkYXRhPW5ldyBHUihyLmhhc1BlbmRpbmdXcml0ZXMsci5mcm9tQ2FjaGUpLHRoaXMucXVlcnk9bn1mdW5jdGlvbiBKUigpe3JldHVybiBudWxsIT09V1ImJldSLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31mdW5jdGlvbiAkUih0LGUsbixyLGksbyl7dmFyIGE9dGhpcztyZXR1cm4oYT1IUi5jYWxsKHRoaXMsdCxlLG4scixvKXx8dGhpcykuX2ZpcmVzdG9yZT10LGEuX2ZpcmVzdG9yZUltcGw9dCxhLm1ldGFkYXRhPWksYX1mdW5jdGlvbiBaUih0LGUpe3RoaXMuaGFzUGVuZGluZ1dyaXRlcz10LHRoaXMuZnJvbUNhY2hlPWV9ZnVuY3Rpb24gdFAodCxlKXtyZXR1cm4gdCBpbnN0YW5jZW9mIHpSJiZlIGluc3RhbmNlb2YgelI/dC5fZmlyZXN0b3JlPT09ZS5fZmlyZXN0b3JlJiZ0Ll9rZXkuaXNFcXVhbChlLl9rZXkpJiYobnVsbD09PXQuX2RvY3VtZW50P251bGw9PT1lLl9kb2N1bWVudDp0Ll9kb2N1bWVudC5pc0VxdWFsKGUuX2RvY3VtZW50KSkmJnQuX2NvbnZlcnRlcj09PWUuX2NvbnZlcnRlcjp0IGluc3RhbmNlb2YgWVImJmUgaW5zdGFuY2VvZiBZUiYmdC5fZmlyZXN0b3JlPT09ZS5fZmlyZXN0b3JlJiZPQSh0LnF1ZXJ5LGUucXVlcnkpJiZ0Lm1ldGFkYXRhLmlzRXF1YWwoZS5tZXRhZGF0YSkmJnQuX3NuYXBzaG90LmlzRXF1YWwoZS5fc25hcHNob3QpfWZ1bmN0aW9uIGVQKHQpe2lmKFFfKHQpJiYwPT09dC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoKXRocm93IG5ldyBuYihlYi5VTklNUExFTUVOVEVELFwibGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZVwiKX1Tbj1mdW5jdGlvbigpe307ZnVuY3Rpb24gblAodCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07Zm9yKHZhciByPTAsaT1lO3I8aS5sZW5ndGg7cisrKXQ9aVtyXS5fYXBwbHkodCk7cmV0dXJuIHR9dmFyIHJQLGlQLG9QLGFQLHNQLHVQPShYaSh5UCxzUD1TbikseVAucHJvdG90eXBlLl9hcHBseT1mdW5jdGlvbih0KXt2YXIgZT11Uih0LmZpcmVzdG9yZSksZT1mdW5jdGlvbih0LGUsbixyLGksbyl7aWYoci5pc0tleUZpZWxkKCkpe2lmKFwiYXJyYXktY29udGFpbnNcIj09PWl8fFwiYXJyYXktY29udGFpbnMtYW55XCI9PT1pKXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiSW52YWxpZCBRdWVyeS4gWW91IGNhbid0IHBlcmZvcm0gJ1wiK2krXCInIHF1ZXJpZXMgb24gRmllbGRQYXRoLmRvY3VtZW50SWQoKS5cIik7aWYoXCJpblwiPT09aXx8XCJub3QtaW5cIj09PWkpe19QKG8saSk7Zm9yKHZhciBhPVtdLHM9MCx1PW87czx1Lmxlbmd0aDtzKyspe3ZhciBjPXVbc107YS5wdXNoKGJQKG4sdCxjKSl9aD17YXJyYXlWYWx1ZTp7dmFsdWVzOmF9fX1lbHNlIGg9YlAobix0LG8pfWVsc2VcImluXCIhPT1pJiZcIm5vdC1pblwiIT09aSYmXCJhcnJheS1jb250YWlucy1hbnlcIiE9PWl8fF9QKG8saSksaD1OUihlLFwid2hlcmVcIixvLFwiaW5cIj09PWl8fFwibm90LWluXCI9PT1pKTt2YXIgaD12Xy5jcmVhdGUocixpLGgpO3JldHVybiBmdW5jdGlvbih0LGUpe2lmKGUuZygpKXt2YXIgbj1YXyh0KTtpZihudWxsIT09biYmIW4uaXNFcXVhbChlLmZpZWxkKSl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkludmFsaWQgcXVlcnkuIEFsbCB3aGVyZSBmaWx0ZXJzIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBtdXN0IGJlIG9uIHRoZSBzYW1lIGZpZWxkLiBCdXQgeW91IGhhdmUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9uICdcIituLnRvU3RyaW5nKCkrXCInIGFuZCAnXCIrZS5maWVsZC50b1N0cmluZygpK1wiJ1wiKTtuPVlfKHQpO251bGwhPT1uJiZ3UCgwLGUuZmllbGQsbil9dD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wLHI9dC5maWx0ZXJzO248ci5sZW5ndGg7bisrKXt2YXIgaT1yW25dO2lmKDA8PWUuaW5kZXhPZihpLm9wKSlyZXR1cm4gaS5vcH1yZXR1cm4gbnVsbH0odCxmdW5jdGlvbigpe3N3aXRjaChlLm9wKXtjYXNlXCIhPVwiOnJldHVybltcIiE9XCIsXCJub3QtaW5cIl07Y2FzZVwiYXJyYXktY29udGFpbnNcIjpyZXR1cm5bXCJhcnJheS1jb250YWluc1wiLFwiYXJyYXktY29udGFpbnMtYW55XCIsXCJub3QtaW5cIl07Y2FzZVwiaW5cIjpyZXR1cm5bXCJhcnJheS1jb250YWlucy1hbnlcIixcImluXCIsXCJub3QtaW5cIl07Y2FzZVwiYXJyYXktY29udGFpbnMtYW55XCI6cmV0dXJuW1wiYXJyYXktY29udGFpbnNcIixcImFycmF5LWNvbnRhaW5zLWFueVwiLFwiaW5cIixcIm5vdC1pblwiXTtjYXNlXCJub3QtaW5cIjpyZXR1cm5bXCJhcnJheS1jb250YWluc1wiLFwiYXJyYXktY29udGFpbnMtYW55XCIsXCJpblwiLFwibm90LWluXCIsXCIhPVwiXTtkZWZhdWx0OnJldHVybltdfX0oKSk7aWYobnVsbCE9PXQpdGhyb3cgdD09PWUub3A/bmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lICdcIitlLm9wLnRvU3RyaW5nKCkrXCInIGZpbHRlci5cIik6bmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSAnXCIrZS5vcC50b1N0cmluZygpK1wiJyBmaWx0ZXJzIHdpdGggJ1wiK3QudG9TdHJpbmcoKStcIicgZmlsdGVycy5cIil9KHQsaCksaH0odC5fcXVlcnksZSx0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCx0aGlzLlFjLHRoaXMuS2MsdGhpcy5qYyk7cmV0dXJuIG5ldyBJQSh0LmZpcmVzdG9yZSx0LmNvbnZlcnRlciwodD10Ll9xdWVyeSxlPXQuZmlsdGVycy5jb25jYXQoW2VdKSxuZXcgV18odC5wYXRoLHQuY29sbGVjdGlvbkdyb3VwLHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksZSx0LmxpbWl0LHQubGltaXRUeXBlLHQuc3RhcnRBdCx0LmVuZEF0KSkpfSx5UCksY1A9KFhpKGdQLGFQPVNuKSxnUC5wcm90b3R5cGUuX2FwcGx5PWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT09dC5zdGFydEF0KXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgc3RhcnRBdCgpIG9yIHN0YXJ0QWZ0ZXIoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO2lmKG51bGwhPT10LmVuZEF0KXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgZW5kQXQoKSBvciBlbmRCZWZvcmUoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO3ZhciByPW5ldyBWXyhlLG4pO3JldHVybiBlPXIsbnVsbCE9PVlfKG49dCl8fG51bGwhPT0odD1YXyhuKSkmJndQKDAsdCxlLmZpZWxkKSxyfSh0Ll9xdWVyeSx0aGlzLlFjLHRoaXMuV2MpO3JldHVybiBuZXcgSUEodC5maXJlc3RvcmUsdC5jb252ZXJ0ZXIsKHQ9dC5fcXVlcnksZT10LmV4cGxpY2l0T3JkZXJCeS5jb25jYXQoW2VdKSxuZXcgV18odC5wYXRoLHQuY29sbGVjdGlvbkdyb3VwLGUsdC5maWx0ZXJzLnNsaWNlKCksdC5saW1pdCx0LmxpbWl0VHlwZSx0LnN0YXJ0QXQsdC5lbmRBdCkpKX0sZ1ApLGhQPShYaSh2UCxvUD1TbiksdlAucHJvdG90eXBlLl9hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IElBKHQuZmlyZXN0b3JlLHQuY29udmVydGVyLHR3KHQuX3F1ZXJ5LHRoaXMuR2MsdGhpcy56YykpfSx2UCksbFA9KFhpKGRQLGlQPVNuKSxkUC5wcm90b3R5cGUuX2FwcGx5PWZ1bmN0aW9uKHQpe3ZhciBlPW1QKHQsdGhpcy50eXBlLHRoaXMuSGMsdGhpcy5KYyk7cmV0dXJuIG5ldyBJQSh0LmZpcmVzdG9yZSx0LmNvbnZlcnRlciwodD10Ll9xdWVyeSxlPWUsbmV3IFdfKHQucGF0aCx0LmNvbGxlY3Rpb25Hcm91cCx0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLHQuZmlsdGVycy5zbGljZSgpLHQubGltaXQsdC5saW1pdFR5cGUsZSx0LmVuZEF0KSkpfSxkUCksZlA9KFhpKHBQLHJQPVNuKSxwUC5wcm90b3R5cGUuX2FwcGx5PWZ1bmN0aW9uKHQpe3ZhciBlPW1QKHQsdGhpcy50eXBlLHRoaXMuSGMsdGhpcy5KYyk7cmV0dXJuIG5ldyBJQSh0LmZpcmVzdG9yZSx0LmNvbnZlcnRlciwodD10Ll9xdWVyeSxlPWUsbmV3IFdfKHQucGF0aCx0LmNvbGxlY3Rpb25Hcm91cCx0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLHQuZmlsdGVycy5zbGljZSgpLHQubGltaXQsdC5saW1pdFR5cGUsdC5zdGFydEF0LGUpKSl9LHBQKTtmdW5jdGlvbiBwUCh0LGUsbil7dmFyIHI9dGhpcztyZXR1cm4ocj1yUC5jYWxsKHRoaXMpfHx0aGlzKS50eXBlPXQsci5IYz1lLHIuSmM9bixyfWZ1bmN0aW9uIGRQKHQsZSxuKXt2YXIgcj10aGlzO3JldHVybihyPWlQLmNhbGwodGhpcyl8fHRoaXMpLnR5cGU9dCxyLkhjPWUsci5KYz1uLHJ9ZnVuY3Rpb24gdlAodCxlLG4pe3ZhciByPXRoaXM7cmV0dXJuKHI9b1AuY2FsbCh0aGlzKXx8dGhpcykudHlwZT10LHIuR2M9ZSxyLnpjPW4scn1mdW5jdGlvbiBnUCh0LGUpe3ZhciBuPXRoaXM7cmV0dXJuKG49YVAuY2FsbCh0aGlzKXx8dGhpcykuUWM9dCxuLldjPWUsbi50eXBlPVwib3JkZXJCeVwiLG59ZnVuY3Rpb24geVAodCxlLG4pe3ZhciByPXRoaXM7cmV0dXJuKHI9c1AuY2FsbCh0aGlzKXx8dGhpcykuUWM9dCxyLktjPWUsci5qYz1uLHIudHlwZT1cIndoZXJlXCIscn1mdW5jdGlvbiBtUCh0LGMsZSxuKXtpZihlWzBdPXRhKGVbMF0pLGVbMF1pbnN0YW5jZW9mIGpSKXJldHVybiBmdW5jdGlvbih0LGUsbixyKXtpZighbil0aHJvdyBuZXcgbmIoZWIuTk9UX0ZPVU5ELFwiQ2FuJ3QgdXNlIGEgRG9jdW1lbnRTbmFwc2hvdCB0aGF0IGRvZXNuJ3QgZXhpc3QgZm9yIFwiK2MrXCIoKS5cIik7Zm9yKHZhciBpPVtdLG89MCxhPSRfKHQpO288YS5sZW5ndGg7bysrKXt2YXIgcz1hW29dO2lmKHMuZmllbGQuaXNLZXlGaWVsZCgpKWkucHVzaChaYihlLG4ua2V5KSk7ZWxzZXt2YXIgdT1uLmRhdGEuZmllbGQocy5maWVsZCk7aWYocWIodSkpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsJ0ludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCBcIicrcy5maWVsZCsnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7aWYobnVsbD09PXUpe3M9cy5maWVsZC5jYW5vbmljYWxTdHJpbmcoKTt0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnXCIrcytcIicgKHVzZWQgYXMgdGhlIG9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LlwiKX1pLnB1c2godSl9fXJldHVybiBuZXcgTF8oaSxyKX0odC5fcXVlcnksdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsZVswXS5fZG9jdW1lbnQsbik7dmFyIHI9dVIodC5maXJlc3RvcmUpO3JldHVybiBmdW5jdGlvbih0LGUsbixyLGksbyl7dmFyIGE9dC5leHBsaWNpdE9yZGVyQnk7aWYoaS5sZW5ndGg+YS5sZW5ndGgpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gXCIrcitcIigpLiBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG9yZGVyQnkoKSBjbGF1c2VzXCIpO2Zvcih2YXIgcz1bXSx1PTA7dTxpLmxlbmd0aDt1Kyspe3ZhciBjPWlbdV07aWYoYVt1XS5maWVsZC5pc0tleUZpZWxkKCkpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBjKXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiSW52YWxpZCBxdWVyeS4gRXhwZWN0ZWQgYSBzdHJpbmcgZm9yIGRvY3VtZW50IElEIGluIFwiK3IrXCIoKSwgYnV0IGdvdCBhIFwiK3R5cGVvZiBjKTtpZighSl8odCkmJi0xIT09Yy5pbmRleE9mKFwiL1wiKSl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGFuZCBvcmRlcmluZyBieSBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvIFwiK3IrXCIoKSBtdXN0IGJlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnXCIrYytcIicgY29udGFpbnMgYSBzbGFzaC5cIik7dmFyIGg9dC5wYXRoLmNoaWxkKENiLmZyb21TdHJpbmcoYykpO2lmKCFIYi5pc0RvY3VtZW50S2V5KGgpKXRocm93IG5ldyBuYihlYi5JTlZBTElEX0FSR1VNRU5ULFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gXCIrcitcIigpIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICdcIitoK1wiJyBpcyBub3QgYmVjYXVzZSBpdCBjb250YWlucyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLlwiKTtoPW5ldyBIYihoKTtzLnB1c2goWmIoZSxoKSl9ZWxzZXtjPU5SKG4scixjKTtzLnB1c2goYyl9fXJldHVybiBuZXcgTF8ocyxvKX0odC5fcXVlcnksdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQscixjLGUsbil9ZnVuY3Rpb24gYlAodCxlLG4pe2lmKFwic3RyaW5nXCI9PXR5cGVvZihuPXRhKG4pKSl7aWYoXCJcIj09PW4pdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIGRvY3VtZW50IElELCBidXQgaXQgd2FzIGFuIGVtcHR5IHN0cmluZy5cIik7aWYoIUpfKGUpJiYtMSE9PW4uaW5kZXhPZihcIi9cIikpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBieSBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnXCIrbitcIicgY29udGFpbnMgYSAnLycgY2hhcmFjdGVyLlwiKTtlPWUucGF0aC5jaGlsZChDYi5mcm9tU3RyaW5nKG4pKTtpZighSGIuaXNEb2N1bWVudEtleShlKSl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwcm92aWRlZCBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnXCIrZStcIicgaXMgbm90IGJlY2F1c2UgaXQgaGFzIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMgKFwiK2UubGVuZ3RoK1wiKS5cIik7cmV0dXJuIFpiKHQsbmV3IEhiKGUpKX1pZihuIGluc3RhbmNlb2Ygd0EpcmV0dXJuIFpiKHQsbi5fa2V5KTt0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgc3RyaW5nIG9yIGEgRG9jdW1lbnRSZWZlcmVuY2UsIGJ1dCBpdCB3YXM6IFwiK3ZBKG4pK1wiLlwiKX1mdW5jdGlvbiBfUCh0LGUpe2lmKCFBcnJheS5pc0FycmF5KHQpfHwwPT09dC5sZW5ndGgpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJ1wiK2UudG9TdHJpbmcoKStcIicgZmlsdGVycy5cIik7aWYoMTA8dC5sZW5ndGgpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJJbnZhbGlkIFF1ZXJ5LiAnXCIrZS50b1N0cmluZygpK1wiJyBmaWx0ZXJzIHN1cHBvcnQgYSBtYXhpbXVtIG9mIDEwIGVsZW1lbnRzIGluIHRoZSB2YWx1ZSBhcnJheS5cIil9ZnVuY3Rpb24gd1AodCxlLG4pe2lmKCFuLmlzRXF1YWwoZSkpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgaGF2ZSBhIHdoZXJlIGZpbHRlciB3aXRoIGFuIGluZXF1YWxpdHkgKDwsIDw9LCAhPSwgbm90LWluLCA+LCBvciA+PSkgb24gZmllbGQgJ1wiK2UudG9TdHJpbmcoKStcIicgYW5kIHNvIHlvdSBtdXN0IGFsc28gdXNlICdcIitlLnRvU3RyaW5nKCkrXCInIGFzIHlvdXIgZmlyc3QgYXJndW1lbnQgdG8gb3JkZXJCeSgpLCBidXQgeW91ciBmaXJzdCBvcmRlckJ5KCkgaXMgb24gZmllbGQgJ1wiK24udG9TdHJpbmcoKStcIicgaW5zdGVhZC5cIil9SVAucHJvdG90eXBlLmNvbnZlcnRWYWx1ZT1mdW5jdGlvbih0LGUpe3N3aXRjaCh2b2lkIDA9PT1lJiYoZT1cIm5vbmVcIiksemIodCkpe2Nhc2UgMDpyZXR1cm4gbnVsbDtjYXNlIDE6cmV0dXJuIHQuYm9vbGVhblZhbHVlO2Nhc2UgMjpyZXR1cm4gVWIodC5pbnRlZ2VyVmFsdWV8fHQuZG91YmxlVmFsdWUpO2Nhc2UgMzpyZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKHQudGltZXN0YW1wVmFsdWUpO2Nhc2UgNDpyZXR1cm4gdGhpcy5jb252ZXJ0U2VydmVyVGltZXN0YW1wKHQsZSk7Y2FzZSA1OnJldHVybiB0LnN0cmluZ1ZhbHVlO2Nhc2UgNjpyZXR1cm4gdGhpcy5jb252ZXJ0Qnl0ZXMoamIodC5ieXRlc1ZhbHVlKSk7Y2FzZSA3OnJldHVybiB0aGlzLmNvbnZlcnRSZWZlcmVuY2UodC5yZWZlcmVuY2VWYWx1ZSk7Y2FzZSA4OnJldHVybiB0aGlzLmNvbnZlcnRHZW9Qb2ludCh0Lmdlb1BvaW50VmFsdWUpO2Nhc2UgOTpyZXR1cm4gdGhpcy5jb252ZXJ0QXJyYXkodC5hcnJheVZhbHVlLGUpO2Nhc2UgMTA6cmV0dXJuIHRoaXMuY29udmVydE9iamVjdCh0Lm1hcFZhbHVlLGUpO2RlZmF1bHQ6dGhyb3cgaGIoKX19LElQLnByb3RvdHlwZS5jb252ZXJ0T2JqZWN0PWZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpcyxpPXt9O3JldHVybiBJYih0LmZpZWxkc3x8e30sZnVuY3Rpb24odCxlKXtpW3RdPXIuY29udmVydFZhbHVlKGUsbil9KSxpfSxJUC5wcm90b3R5cGUuY29udmVydEdlb1BvaW50PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUUEoVWIodC5sYXRpdHVkZSksVWIodC5sb25naXR1ZGUpKX0sSVAucHJvdG90eXBlLmNvbnZlcnRBcnJheT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuKHQudmFsdWVzfHxbXSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuLmNvbnZlcnRWYWx1ZSh0LGUpfSl9LElQLnByb3RvdHlwZS5jb252ZXJ0U2VydmVyVGltZXN0YW1wPWZ1bmN0aW9uKHQsZSl7c3dpdGNoKGUpe2Nhc2VcInByZXZpb3VzXCI6dmFyIG49ZnVuY3Rpb24gdChlKXtlPWUubWFwVmFsdWUuZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXztyZXR1cm4gcWIoZSk/dChlKTplfSh0KTtyZXR1cm4gbnVsbD09bj9udWxsOnRoaXMuY29udmVydFZhbHVlKG4sZSk7Y2FzZVwiZXN0aW1hdGVcIjpyZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKFZiKHQpKTtkZWZhdWx0OnJldHVybiBudWxsfX0sSVAucHJvdG90eXBlLmNvbnZlcnRUaW1lc3RhbXA9ZnVuY3Rpb24odCl7dD1GYih0KTtyZXR1cm4gbmV3IHliKHQuc2Vjb25kcyx0Lm5hbm9zKX0sSVAucHJvdG90eXBlLmNvbnZlcnREb2N1bWVudEtleT1mdW5jdGlvbih0LGUpe3ZhciBuPUNiLmZyb21TdHJpbmcodCk7bGIoblQobikpO3Q9bmV3IEpOKG4uZ2V0KDEpLG4uZ2V0KDMpKSxuPW5ldyBIYihuLnBvcEZpcnN0KDUpKTtyZXR1cm4gdC5pc0VxdWFsKGUpfHxzYihcIkRvY3VtZW50IFwiK24rXCIgY29udGFpbnMgYSBkb2N1bWVudCByZWZlcmVuY2Ugd2l0aGluIGEgZGlmZmVyZW50IGRhdGFiYXNlIChcIit0LnByb2plY3RJZCtcIi9cIit0LmRhdGFiYXNlK1wiKSB3aGljaCBpcyBub3Qgc3VwcG9ydGVkLiBJdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSByZWZlcmVuY2UgaW4gdGhlIGN1cnJlbnQgZGF0YWJhc2UgKFwiK2UucHJvamVjdElkK1wiL1wiK2UuZGF0YWJhc2UrXCIpIGluc3RlYWQuXCIpLG59LEc9SVA7ZnVuY3Rpb24gSVAoKXt9ZnVuY3Rpb24gVFAodCxlLG4pe3JldHVybiB0P24mJihuLm1lcmdlfHxuLm1lcmdlRmllbGRzKT90LnRvRmlyZXN0b3JlKGUsbik6dC50b0ZpcmVzdG9yZShlKTplfXZhciBFUCxTUD0oWGkoTlAsRVA9RyksTlAucHJvdG90eXBlLmNvbnZlcnRCeXRlcz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEdBKHQpfSxOUC5wcm90b3R5cGUuY29udmVydFJlZmVyZW5jZT1mdW5jdGlvbih0KXt0PXRoaXMuY29udmVydERvY3VtZW50S2V5KHQsdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO3JldHVybiBuZXcgd0EodGhpcy5maXJlc3RvcmUsbnVsbCx0KX0sTlApLENQPShrUC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTt0PUFQKHQsdGhpcy5fZmlyZXN0b3JlKSxlPVRQKHQuY29udmVydGVyLGUsbiksbj1jUih0aGlzLl9kYXRhUmVhZGVyLFwiV3JpdGVCYXRjaC5zZXRcIix0Ll9rZXksZSxudWxsIT09dC5jb252ZXJ0ZXIsbik7cmV0dXJuIHRoaXMuX211dGF0aW9ucy5wdXNoKG4udG9NdXRhdGlvbih0Ll9rZXksTncubm9uZSgpKSksdGhpc30sa1AucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPVtdLGk9MztpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXJbaS0zXT1hcmd1bWVudHNbaV07dGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7dD1BUCh0LHRoaXMuX2ZpcmVzdG9yZSksZT1cInN0cmluZ1wiPT10eXBlb2YoZT10YShlKSl8fGUgaW5zdGFuY2VvZiBIQT9rUih0aGlzLl9kYXRhUmVhZGVyLFwiV3JpdGVCYXRjaC51cGRhdGVcIix0Ll9rZXksZSxuLHIpOkNSKHRoaXMuX2RhdGFSZWFkZXIsXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLHQuX2tleSxlKTtyZXR1cm4gdGhpcy5fbXV0YXRpb25zLnB1c2goZS50b011dGF0aW9uKHQuX2tleSxOdy5leGlzdHMoITApKSksdGhpc30sa1AucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTt0PUFQKHQsdGhpcy5fZmlyZXN0b3JlKTtyZXR1cm4gdGhpcy5fbXV0YXRpb25zPXRoaXMuX211dGF0aW9ucy5jb25jYXQobmV3IHp3KHQuX2tleSxOdy5ub25lKCkpKSx0aGlzfSxrUC5wcm90b3R5cGUuY29tbWl0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpLHRoaXMuX2NvbW1pdHRlZD0hMCwwPHRoaXMuX211dGF0aW9ucy5sZW5ndGg/dGhpcy5fY29tbWl0SGFuZGxlcih0aGlzLl9tdXRhdGlvbnMpOlByb21pc2UucmVzb2x2ZSgpfSxrUC5wcm90b3R5cGUuX3ZlcmlmeU5vdENvbW1pdHRlZD1mdW5jdGlvbigpe2lmKHRoaXMuX2NvbW1pdHRlZCl0aHJvdyBuZXcgbmIoZWIuRkFJTEVEX1BSRUNPTkRJVElPTixcIkEgd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpIGhhcyBiZWVuIGNhbGxlZC5cIil9LGtQKTtmdW5jdGlvbiBrUCh0LGUpe3RoaXMuX2ZpcmVzdG9yZT10LHRoaXMuX2NvbW1pdEhhbmRsZXI9ZSx0aGlzLl9tdXRhdGlvbnM9W10sdGhpcy5fY29tbWl0dGVkPSExLHRoaXMuX2RhdGFSZWFkZXI9dVIodCl9ZnVuY3Rpb24gTlAodCl7dmFyIGU9dGhpcztyZXR1cm4oZT1FUC5jYWxsKHRoaXMpfHx0aGlzKS5maXJlc3RvcmU9dCxlfWZ1bmN0aW9uIEFQKHQsZSl7aWYoKHQ9dGEodCkpLmZpcmVzdG9yZSE9PWUpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJQcm92aWRlZCBkb2N1bWVudCByZWZlcmVuY2UgaXMgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgaW5zdGFuY2UuXCIpO3JldHVybiB0fXZhciBSUCxQUD0oWGkoT1AsUlA9RyksT1AucHJvdG90eXBlLmNvbnZlcnRCeXRlcz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEdBKHQpfSxPUC5wcm90b3R5cGUuY29udmVydFJlZmVyZW5jZT1mdW5jdGlvbih0KXt0PXRoaXMuY29udmVydERvY3VtZW50S2V5KHQsdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO3JldHVybiBuZXcgd0EodGhpcy5maXJlc3RvcmUsbnVsbCx0KX0sT1ApO2Z1bmN0aW9uIE9QKHQpe3ZhciBlPXRoaXM7cmV0dXJuKGU9UlAuY2FsbCh0aGlzKXx8dGhpcykuZmlyZXN0b3JlPXQsZX1mdW5jdGlvbiBEUCh0LGUsbil7Zm9yKHZhciByPVtdLGk9MztpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXJbaS0zXT1hcmd1bWVudHNbaV07dD1nQSh0LHdBKTt2YXIgbz1nQSh0LmZpcmVzdG9yZSxVQSksYT11UihvKTtyZXR1cm4gTFAobyxbKFwic3RyaW5nXCI9PXR5cGVvZihlPXRhKGUpKXx8ZSBpbnN0YW5jZW9mIEhBP2tSKGEsXCJ1cGRhdGVEb2NcIix0Ll9rZXksZSxuLHIpOkNSKGEsXCJ1cGRhdGVEb2NcIix0Ll9rZXksZSkpLnRvTXV0YXRpb24odC5fa2V5LE53LmV4aXN0cyghMCkpXSl9ZnVuY3Rpb24geFAoZSl7Zm9yKHZhciBuPVtdLHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKW5bdC0xXT1hcmd1bWVudHNbdF07ZT10YShlKTt2YXIgcj17aW5jbHVkZU1ldGFkYXRhQ2hhbmdlczohMX0saT0wO1wib2JqZWN0XCIhPXR5cGVvZiBuW2ldfHxMQShuW2ldKXx8KHI9bltpXSxpKyspO3ZhciBvLGEscyx1LGMsaCxsPXtpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOnIuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlc307cmV0dXJuIExBKG5baV0pJiYobz1uW2ldLG5baV09bnVsbD09PShyPW8ubmV4dCl8fHZvaWQgMD09PXI/dm9pZCAwOnIuYmluZChvKSxuW2krMV09bnVsbD09PShyPW8uZXJyb3IpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmJpbmQobyksbltpKzJdPW51bGw9PT0ocj1vLmNvbXBsZXRlKXx8dm9pZCAwPT09cj92b2lkIDA6ci5iaW5kKG8pKSxlIGluc3RhbmNlb2Ygd0E/KHM9Z0EoZS5maXJlc3RvcmUsVUEpLHU9R18oZS5fa2V5LnBhdGgpLGg9e25leHQ6ZnVuY3Rpb24odCl7bltpXSYmbltpXShNUChzLGUsdCkpfSxlcnJvcjpuW2krMV0sY29tcGxldGU6bltpKzJdfSk6KGE9Z0EoZSxJQSkscz1nQShhLmZpcmVzdG9yZSxVQSksdT1hLl9xdWVyeSxjPW5ldyBQUChzKSxoPXtuZXh0OmZ1bmN0aW9uKHQpe25baV0mJm5baV0obmV3IFlSKHMsYyxhLHQpKX0sZXJyb3I6bltpKzFdLGNvbXBsZXRlOm5baSsyXX0sZVAoZS5fcXVlcnkpKSxmdW5jdGlvbihuLHQsZSl7dmFyIHI9dGhpcyxpPW5ldyBOTihoKSxvPW5ldyBEayh0LGksZSk7cmV0dXJuIG4uYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uKCl7cmV0dXJuICRpKHIsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9UmssWzQsR04obildO2Nhc2UgMTpyZXR1cm5bMixlLmFwcGx5KHZvaWQgMCxbdC5zZW50KCksb10pXX19KX0pfSksZnVuY3Rpb24oKXtpLldvKCksbi5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24oKXtyZXR1cm4gJGkocix2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1QayxbNCxHTihuKV07Y2FzZSAxOnJldHVyblsyLGUuYXBwbHkodm9pZCAwLFt0LnNlbnQoKSxvXSldfX0pfSl9KX19KFZBKHMpLHUsbCl9ZnVuY3Rpb24gTFAodCxlKXtyZXR1cm4gZnVuY3Rpb24obixyKXt2YXIgdD10aGlzLGk9bmV3IENUO3JldHVybiBuLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbigpe3JldHVybiAkaSh0LHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPUprLFs0LEhOKG4pXTtjYXNlIDE6cmV0dXJuWzIsZS5hcHBseSh2b2lkIDAsW3Quc2VudCgpLHIsaV0pXX19KX0pfSksaS5wcm9taXNlfShWQSh0KSxlKX1mdW5jdGlvbiBNUCh0LGUsbil7dmFyIHI9bi5kb2NzLmdldChlLl9rZXkpLGk9bmV3IFBQKHQpO3JldHVybiBuZXcgelIodCxpLGUuX2tleSxyLG5ldyBHUihuLmhhc1BlbmRpbmdXcml0ZXMsbi5mcm9tQ2FjaGUpLGUuY29udmVydGVyKX12YXIgRlAsVVA9KHFQLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPUFQKHQsdGhpcy5fZmlyZXN0b3JlKSxyPW5ldyBTUCh0aGlzLl9maXJlc3RvcmUpO3JldHVybiB0aGlzLl90cmFuc2FjdGlvbi5sb29rdXAoW24uX2tleV0pLnRoZW4oZnVuY3Rpb24odCl7aWYoIXR8fDEhPT10Lmxlbmd0aClyZXR1cm4gaGIoKTt0PXRbMF07aWYodC5pc0ZvdW5kRG9jdW1lbnQoKSlyZXR1cm4gbmV3IGpSKGUuX2ZpcmVzdG9yZSxyLHQua2V5LHQsbi5jb252ZXJ0ZXIpO2lmKHQuaXNOb0RvY3VtZW50KCkpcmV0dXJuIG5ldyBqUihlLl9maXJlc3RvcmUscixuLl9rZXksbnVsbCxuLmNvbnZlcnRlcik7dGhyb3cgaGIoKX0pfSxxUC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSxuKXt0PUFQKHQsdGhpcy5fZmlyZXN0b3JlKSxlPVRQKHQuY29udmVydGVyLGUsbiksbj1jUih0aGlzLl9kYXRhUmVhZGVyLFwiVHJhbnNhY3Rpb24uc2V0XCIsdC5fa2V5LGUsbnVsbCE9PXQuY29udmVydGVyLG4pO3JldHVybiB0aGlzLl90cmFuc2FjdGlvbi5zZXQodC5fa2V5LG4pLHRoaXN9LHFQLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj1bXSxpPTM7aTxhcmd1bWVudHMubGVuZ3RoO2krKylyW2ktM109YXJndW1lbnRzW2ldO3Q9QVAodCx0aGlzLl9maXJlc3RvcmUpLGU9XCJzdHJpbmdcIj09dHlwZW9mKGU9dGEoZSkpfHxlIGluc3RhbmNlb2YgSEE/a1IodGhpcy5fZGF0YVJlYWRlcixcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLHQuX2tleSxlLG4scik6Q1IodGhpcy5fZGF0YVJlYWRlcixcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLHQuX2tleSxlKTtyZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24udXBkYXRlKHQuX2tleSxlKSx0aGlzfSxxUC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3Q9QVAodCx0aGlzLl9maXJlc3RvcmUpO3JldHVybiB0aGlzLl90cmFuc2FjdGlvbi5kZWxldGUodC5fa2V5KSx0aGlzfSxYaShqUCxGUD1xUCksalAucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49QVAodCx0aGlzLl9maXJlc3RvcmUpLHI9bmV3IFBQKHRoaXMuX2ZpcmVzdG9yZSk7cmV0dXJuIEZQLnByb3RvdHlwZS5nZXQuY2FsbCh0aGlzLHQpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB6UihlLl9maXJlc3RvcmUscixuLl9rZXksdC5fZG9jdW1lbnQsbmV3IEdSKCExLCExKSxuLmNvbnZlcnRlcil9KX0salApO2Z1bmN0aW9uIGpQKHQsZSl7dmFyIG49dGhpcztyZXR1cm4obj1GUC5jYWxsKHRoaXMsdCxlKXx8dGhpcykuX2ZpcmVzdG9yZT10LG59ZnVuY3Rpb24gcVAodCxlKXt0aGlzLl9maXJlc3RvcmU9dCx0aGlzLl90cmFuc2FjdGlvbj1lLHRoaXMuX2RhdGFSZWFkZXI9dVIodCl9ZnVuY3Rpb24gVlAoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgVWludDhBcnJheSl0aHJvdyBuZXcgbmIoZWIuVU5JTVBMRU1FTlRFRCxcIlVpbnQ4QXJyYXlzIGFyZSBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQuXCIpfWZ1bmN0aW9uIEJQKCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGF0b2IpdGhyb3cgbmV3IG5iKGViLlVOSU1QTEVNRU5URUQsXCJCbG9icyBhcmUgdW5hdmFpbGFibGUgaW4gRmlyZXN0b3JlIGluIHRoaXMgZW52aXJvbm1lbnQuXCIpfXZhciBLUCxXUD0oSlAuZnJvbUJhc2U2NFN0cmluZz1mdW5jdGlvbih0KXtyZXR1cm4gQlAoKSxuZXcgSlAoR0EuZnJvbUJhc2U2NFN0cmluZyh0KSl9LEpQLmZyb21VaW50OEFycmF5PWZ1bmN0aW9uKHQpe3JldHVybiBWUCgpLG5ldyBKUChHQS5mcm9tVWludDhBcnJheSh0KSl9LEpQLnByb3RvdHlwZS50b0Jhc2U2ND1mdW5jdGlvbigpe3JldHVybiBCUCgpLHRoaXMuX2RlbGVnYXRlLnRvQmFzZTY0KCl9LEpQLnByb3RvdHlwZS50b1VpbnQ4QXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gVlAoKSx0aGlzLl9kZWxlZ2F0ZS50b1VpbnQ4QXJyYXkoKX0sSlAucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlzRXF1YWwodC5fZGVsZWdhdGUpfSxKUC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIkJsb2IoYmFzZTY0OiBcIit0aGlzLnRvQmFzZTY0KCkrXCIpXCJ9LEpQKSxIUD0oWFAucHJvdG90eXBlLmVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7V0EodD1nQSh0LFVBKSk7dmFyIG49VkEodCkscj10Ll9mcmVlemVTZXR0aW5ncygpLHQ9bmV3IElOO3JldHVybiBLQShuLHQsbmV3IF9OKHQsci5jYWNoZVNpemVCeXRlcyxudWxsPT1lP3ZvaWQgMDplLmZvcmNlT3duZXJzaGlwKSl9KHQuX2RlbGVnYXRlLHtmb3JjZU93bmVyc2hpcDplfSl9LFhQLnByb3RvdHlwZS5lbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0KXtXQSh0PWdBKHQsVUEpKTt2YXIgZT1WQSh0KSxuPXQuX2ZyZWV6ZVNldHRpbmdzKCksdD1uZXcgSU47cmV0dXJuIEtBKGUsdCxuZXcgd04odCxuLmNhY2hlU2l6ZUJ5dGVzKSl9KHQuX2RlbGVnYXRlKX0sWFAucHJvdG90eXBlLmNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2U9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciB0PXRoaXM7aWYobi5faW5pdGlhbGl6ZWQmJiFuLl90ZXJtaW5hdGVkKXRocm93IG5ldyBuYihlYi5GQUlMRURfUFJFQ09ORElUSU9OLFwiUGVyc2lzdGVuY2UgY2FuIG9ubHkgYmUgY2xlYXJlZCBiZWZvcmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQgb3IgYWZ0ZXIgaXQgaXMgdGVybWluYXRlZC5cIik7dmFyIHI9bmV3IENUO3JldHVybiBuLl9xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZChmdW5jdGlvbigpe3JldHVybiAkaSh0LHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0LnRyeXMucHVzaChbMCwyLCwzXSksWzQsZnVuY3Rpb24obil7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIEFULnl0KCk/KGU9bitcIm1haW5cIixbNCxBVC5kZWxldGUoZSldKTpbMixQcm9taXNlLnJlc29sdmUoKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxbMl19fSl9KX0oZ1Mobi5fZGF0YWJhc2VJZCxuLl9wZXJzaXN0ZW5jZUtleSkpXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLHIucmVzb2x2ZSgpLFszLDNdO2Nhc2UgMjpyZXR1cm4gZT10LnNlbnQoKSxyLnJlamVjdChlKSxbMywzXTtjYXNlIDM6cmV0dXJuWzJdfX0pfSl9KSxyLnByb21pc2V9KHQuX2RlbGVnYXRlKX0sWFApLEdQPShPYmplY3QuZGVmaW5lUHJvcGVydHkoWVAucHJvdG90eXBlLFwiX2RhdGFiYXNlSWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLl9kYXRhYmFzZUlkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLFlQLnByb3RvdHlwZS5zZXR0aW5ncz1mdW5jdGlvbih0KXt0Lm1lcmdlJiZkZWxldGUodD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5fZGVsZWdhdGUuX2dldFNldHRpbmdzKCkpLHQpKS5tZXJnZSx0aGlzLl9kZWxlZ2F0ZS5fc2V0U2V0dGluZ3ModCl9LFlQLnByb3RvdHlwZS51c2VFbXVsYXRvcj1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pLGZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPXt9KTt2YXIgaT0odD1nQSh0LF9BKSkuX2dldFNldHRpbmdzKCk7aWYoXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiE9PWkuaG9zdCYmaS5ob3N0IT09ZSYmdWIoXCJIb3N0IGhhcyBiZWVuIHNldCBpbiBib3RoIHNldHRpbmdzKCkgYW5kIHVzZUVtdWxhdG9yKCksIGVtdWxhdG9yIGhvc3Qgd2lsbCBiZSB1c2VkXCIpLHQuX3NldFNldHRpbmdzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpKSx7aG9zdDplK1wiOlwiK24sc3NsOiExfSkpLHIubW9ja1VzZXJUb2tlbil7bj1wbyhyLm1vY2tVc2VyVG9rZW4pLHI9ci5tb2NrVXNlclRva2VuLnN1Ynx8ci5tb2NrVXNlclRva2VuLnVzZXJfaWQ7aWYoIXIpdGhyb3cgbmV3IG5iKGViLklOVkFMSURfQVJHVU1FTlQsXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO3QuX2NyZWRlbnRpYWxzPW5ldyB0QShuZXcgWU4obixuZXcgWFMocikpKX19KHRoaXMuX2RlbGVnYXRlLHQsZSxuKX0sWVAucHJvdG90eXBlLmVuYWJsZU5ldHdvcms9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oaSl7dmFyIHQ9dGhpcztyZXR1cm4gaS5hc3luY1F1ZXVlLmVucXVldWUoZnVuY3Rpb24oKXtyZXR1cm4gJGkodCx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIG4scjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LEJOKGkpXTtjYXNlIDE6cmV0dXJuIG49dC5zZW50KCksWzQsV04oaSldO2Nhc2UgMjpyZXR1cm4gcj10LnNlbnQoKSxbMiwobi5zZXROZXR3b3JrRW5hYmxlZCghMCksKGU9cikuJHIuZGVsZXRlKDApLHRrKGUpKV19dmFyIGV9KX0pfSl9KFZBKGdBKHRoaXMuX2RlbGVnYXRlLFVBKSkpfSxZUC5wcm90b3R5cGUuZGlzYWJsZU5ldHdvcms9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIHQ9dGhpcztyZXR1cm4gci5hc3luY1F1ZXVlLmVucXVldWUoZnVuY3Rpb24oKXtyZXR1cm4gJGkodCx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LEJOKHIpXTtjYXNlIDE6cmV0dXJuIGU9dC5zZW50KCksWzQsV04ocildO2Nhc2UgMjpyZXR1cm4gbj10LnNlbnQoKSxbMiwoZS5zZXROZXR3b3JrRW5hYmxlZCghMSksZnVuY3Rpb24obil7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuKGU9bikuJHIuYWRkKDApLFs0LGVrKGUpXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLGUuQnIuc2V0KFwiT2ZmbGluZVwiKSxbMl19fSl9KX0obikpXX19KX0pfSl9KFZBKGdBKHRoaXMuX2RlbGVnYXRlLFVBKSkpfSxZUC5wcm90b3R5cGUuZW5hYmxlUGVyc2lzdGVuY2U9ZnVuY3Rpb24odCl7dmFyIGU9ITEsbj0hMTtyZXR1cm4gdCYmZkEoXCJzeW5jaHJvbml6ZVRhYnNcIixlPSEhdC5zeW5jaHJvbml6ZVRhYnMsXCJleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYlwiLG49ISF0LmV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiKSxlP3RoaXMuWWMuZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSh0aGlzKTp0aGlzLlljLmVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKHRoaXMsbil9LFlQLnByb3RvdHlwZS5jbGVhclBlcnNpc3RlbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWWMuY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSh0aGlzKX0sWVAucHJvdG90eXBlLnRlcm1pbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLlhjJiYodGhpcy5YYy5fcmVtb3ZlU2VydmljZUluc3RhbmNlKFwiZmlyZXN0b3JlXCIpLHRoaXMuWGMuX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShcImZpcmVzdG9yZS1leHBcIikpLHRoaXMuX2RlbGVnYXRlLl9kZWxldGUoKX0sWVAucHJvdG90eXBlLndhaXRGb3JQZW5kaW5nV3JpdGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciB0PXRoaXMscj1uZXcgQ1Q7cmV0dXJuIG4uYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uKCl7cmV0dXJuICRpKHQsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9ZU4sWzQsSE4obildO2Nhc2UgMTpyZXR1cm5bMixlLmFwcGx5KHZvaWQgMCxbdC5zZW50KCkscl0pXX19KX0pfSksci5wcm9taXNlfShWQShnQSh0aGlzLl9kZWxlZ2F0ZSxVQSkpKX0sWVAucHJvdG90eXBlLm9uU25hcHNob3RzSW5TeW5jPWZ1bmN0aW9uKHQpe3JldHVybiBlPXRoaXMuX2RlbGVnYXRlLHQ9dCxmdW5jdGlvbihuLHQpe3ZhciBlPXRoaXMscj1uZXcgTk4odCk7cmV0dXJuIG4uYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uKCl7cmV0dXJuICRpKGUsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9ZnVuY3Rpb24odCxlKXt0LkdyLmFkZChlKSxlLm5leHQoKX0sWzQsR04obildO2Nhc2UgMTpyZXR1cm5bMixlLmFwcGx5KHZvaWQgMCxbdC5zZW50KCkscl0pXX19KX0pfSksZnVuY3Rpb24oKXtyLldvKCksbi5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24oKXtyZXR1cm4gJGkoZSx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1mdW5jdGlvbih0LGUpe3QuR3IuZGVsZXRlKGUpfSxbNCxHTihuKV07Y2FzZSAxOnJldHVyblsyLGUuYXBwbHkodm9pZCAwLFt0LnNlbnQoKSxyXSldfX0pfSl9KX19KFZBKGdBKGUsVUEpKSxMQSh0KT90OntuZXh0OnR9KTt2YXIgZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFlQLnByb3RvdHlwZSxcImFwcFwiLHtnZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5YYyl0aHJvdyBuZXcgbmIoZWIuRkFJTEVEX1BSRUNPTkRJVElPTixcIkZpcmVzdG9yZSB3YXMgbm90IGluaXRpYWxpemVkIHVzaW5nIHRoZSBGaXJlYmFzZSBTREsuICdhcHAnIGlzIG5vdCBhdmFpbGFibGVcIik7cmV0dXJuIHRoaXMuWGN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksWVAucHJvdG90eXBlLmNvbGxlY3Rpb249ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBuZXcgZ08odGhpcyxBQSh0aGlzLl9kZWxlZ2F0ZSx0KSl9Y2F0Y2godCl7dGhyb3cgYU8odCxcImNvbGxlY3Rpb24oKVwiLFwiRmlyZXN0b3JlLmNvbGxlY3Rpb24oKVwiKX19LFlQLnByb3RvdHlwZS5kb2M9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBuZXcgaU8odGhpcyxSQSh0aGlzLl9kZWxlZ2F0ZSx0KSl9Y2F0Y2godCl7dGhyb3cgYU8odCxcImRvYygpXCIsXCJGaXJlc3RvcmUuZG9jKClcIil9fSxZUC5wcm90b3R5cGUuY29sbGVjdGlvbkdyb3VwPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gbmV3IHBPKHRoaXMsZnVuY3Rpb24odCxlKXtpZih0PWdBKHQsX0EpLGhBKFwiY29sbGVjdGlvbkdyb3VwXCIsXCJjb2xsZWN0aW9uIGlkXCIsZSksMDw9ZS5pbmRleE9mKFwiL1wiKSl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkludmFsaWQgY29sbGVjdGlvbiBJRCAnXCIrZStcIicgcGFzc2VkIHRvIGZ1bmN0aW9uIGNvbGxlY3Rpb25Hcm91cCgpLiBDb2xsZWN0aW9uIElEcyBtdXN0IG5vdCBjb250YWluICcvJy5cIik7cmV0dXJuIG5ldyBJQSh0LG51bGwsKGU9ZSxuZXcgV18oQ2IuZW1wdHlQYXRoKCksZSkpKX0odGhpcy5fZGVsZWdhdGUsdCkpfWNhdGNoKHQpe3Rocm93IGFPKHQsXCJjb2xsZWN0aW9uR3JvdXAoKVwiLFwiRmlyZXN0b3JlLmNvbGxlY3Rpb25Hcm91cCgpXCIpfX0sWVAucHJvdG90eXBlLnJ1blRyYW5zYWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciBuLHI9dGhpcztyZXR1cm4gZnVuY3Rpb24obixyKXt2YXIgdD10aGlzLGk9bmV3IENUO3JldHVybiBuLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbigpe3JldHVybiAkaSh0LHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LFZOKG4pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuZGF0YXN0b3JlfSldO2Nhc2UgMTpyZXR1cm4gZT10LnNlbnQoKSxuZXcgUE4obi5hc3luY1F1ZXVlLGUscixpKS5ydW4oKSxbMl19fSl9KX0pLGkucHJvbWlzZX0oVkEobj10aGlzLl9kZWxlZ2F0ZSksZnVuY3Rpb24odCl7cmV0dXJuIHQ9bmV3IFVQKG4sdCksZShuZXcgJFAocix0KSl9KX0sWVAucHJvdG90eXBlLmJhdGNoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gVkEodGhpcy5fZGVsZWdhdGUpLG5ldyBaUChuZXcgQ1AodGhpcy5fZGVsZWdhdGUsZnVuY3Rpb24odCl7cmV0dXJuIExQKGUuX2RlbGVnYXRlLHQpfSkpfSxZUC5wcm90b3R5cGUubG9hZEJ1bmRsZT1mdW5jdGlvbih0KXt0aHJvdyBuZXcgbmIoZWIuRkFJTEVEX1BSRUNPTkRJVElPTiwnXCJsb2FkQnVuZGxlKClcIiBkb2VzIG5vdCBleGlzdCwgaGF2ZSB5b3UgaW1wb3J0ZWQgXCJmaXJlYmFzZS9maXJlc3RvcmUvYnVuZGxlXCI/Jyl9LFlQLnByb3RvdHlwZS5uYW1lZFF1ZXJ5PWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBuYihlYi5GQUlMRURfUFJFQ09ORElUSU9OLCdcIm5hbWVkUXVlcnkoKVwiIGRvZXMgbm90IGV4aXN0LCBoYXZlIHlvdSBpbXBvcnRlZCBcImZpcmViYXNlL2ZpcmVzdG9yZS9idW5kbGVcIj8nKX0sWVApLHpQPShYaShRUCxLUD1HKSxRUC5wcm90b3R5cGUuY29udmVydEJ5dGVzPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgV1AobmV3IEdBKHQpKX0sUVAucHJvdG90eXBlLmNvbnZlcnRSZWZlcmVuY2U9ZnVuY3Rpb24odCl7dD10aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtyZXR1cm4gaU8uWmModCx0aGlzLmZpcmVzdG9yZSxudWxsKX0sUVApO2Z1bmN0aW9uIFFQKHQpe3ZhciBlPXRoaXM7cmV0dXJuKGU9S1AuY2FsbCh0aGlzKXx8dGhpcykuZmlyZXN0b3JlPXQsZX1mdW5jdGlvbiBZUCh0LGUsbil7dmFyIHI9dGhpczt0aGlzLl9kZWxlZ2F0ZT1lLHRoaXMuWWM9bix0aGlzLklOVEVSTkFMPXtkZWxldGU6ZnVuY3Rpb24oKXtyZXR1cm4gci50ZXJtaW5hdGUoKX19LHQgaW5zdGFuY2VvZiBKTnx8KHRoaXMuWGM9dCl9ZnVuY3Rpb24gWFAoKXt9ZnVuY3Rpb24gSlAodCl7dGhpcy5fZGVsZWdhdGU9dH12YXIgJFA9KHJPLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPVRPKHQpO3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5nZXQobikudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGxPKGUuX2ZpcmVzdG9yZSxuZXcgelIoZS5fZmlyZXN0b3JlLl9kZWxlZ2F0ZSxlLl91c2VyRGF0YVdyaXRlcix0Ll9rZXksdC5fZG9jdW1lbnQsdC5tZXRhZGF0YSxuLmNvbnZlcnRlcikpfSl9LHJPLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlLG4pe3Q9VE8odCk7cmV0dXJuIG4/KGxBKFwiVHJhbnNhY3Rpb24uc2V0XCIsbiksdGhpcy5fZGVsZWdhdGUuc2V0KHQsZSxuKSk6dGhpcy5fZGVsZWdhdGUuc2V0KHQsZSksdGhpc30sck8ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPVtdLGk9MztpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXJbaS0zXT1hcmd1bWVudHNbaV07dmFyIG89VE8odCk7cmV0dXJuIDI9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuX2RlbGVnYXRlLnVwZGF0ZShvLGUpOih0PXRoaXMuX2RlbGVnYXRlKS51cGRhdGUuYXBwbHkodCxubyhbbyxlLG5dLHIpKSx0aGlzfSxyTy5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3Q9VE8odCk7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLmRlbGV0ZSh0KSx0aGlzfSxyTyksWlA9KG5PLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlLG4pe3Q9VE8odCk7cmV0dXJuIG4/KGxBKFwiV3JpdGVCYXRjaC5zZXRcIixuKSx0aGlzLl9kZWxlZ2F0ZS5zZXQodCxlLG4pKTp0aGlzLl9kZWxlZ2F0ZS5zZXQodCxlKSx0aGlzfSxuTy5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9W10saT0zO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspcltpLTNdPWFyZ3VtZW50c1tpXTt2YXIgbz1UTyh0KTtyZXR1cm4gMj09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fZGVsZWdhdGUudXBkYXRlKG8sZSk6KHQ9dGhpcy5fZGVsZWdhdGUpLnVwZGF0ZS5hcHBseSh0LG5vKFtvLGUsbl0scikpLHRoaXN9LG5PLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dD1UTyh0KTtyZXR1cm4gdGhpcy5fZGVsZWdhdGUuZGVsZXRlKHQpLHRoaXN9LG5PLnByb3RvdHlwZS5jb21taXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUuY29tbWl0KCl9LG5PKSx0Tz0oZU8ucHJvdG90eXBlLmZyb21GaXJlc3RvcmU9ZnVuY3Rpb24odCxlKXt0PW5ldyBRUih0aGlzLl9maXJlc3RvcmUuX2RlbGVnYXRlLHRoaXMuX3VzZXJEYXRhV3JpdGVyLHQuX2tleSx0Ll9kb2N1bWVudCx0Lm1ldGFkYXRhLG51bGwpO3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5mcm9tRmlyZXN0b3JlKG5ldyBmTyh0aGlzLl9maXJlc3RvcmUsdCksbnVsbCE9ZT9lOnt9KX0sZU8ucHJvdG90eXBlLnRvRmlyZXN0b3JlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU/dGhpcy5fZGVsZWdhdGUudG9GaXJlc3RvcmUodCxlKTp0aGlzLl9kZWxlZ2F0ZS50b0ZpcmVzdG9yZSh0KX0sZU8udHU9ZnVuY3Rpb24odCxlKXt2YXIgbj1lTy5ldSxyPW4uZ2V0KHQpO3J8fChyPW5ldyBXZWFrTWFwLG4uc2V0KHQscikpO249ci5nZXQoZSk7cmV0dXJuIG58fChuPW5ldyBlTyh0LG5ldyB6UCh0KSxlKSxyLnNldChlLG4pKSxufSxlTyk7ZnVuY3Rpb24gZU8odCxlLG4pe3RoaXMuX2ZpcmVzdG9yZT10LHRoaXMuX3VzZXJEYXRhV3JpdGVyPWUsdGhpcy5fZGVsZWdhdGU9bn1mdW5jdGlvbiBuTyh0KXt0aGlzLl9kZWxlZ2F0ZT10fWZ1bmN0aW9uIHJPKHQsZSl7dGhpcy5fZmlyZXN0b3JlPXQsdGhpcy5fZGVsZWdhdGU9ZSx0aGlzLl91c2VyRGF0YVdyaXRlcj1uZXcgelAodCl9dE8uZXU9bmV3IFdlYWtNYXA7dmFyIGlPPShvTy5udT1mdW5jdGlvbih0LGUsbil7aWYodC5sZW5ndGglMiE9MCl0aHJvdyBuZXcgbmIoZWIuSU5WQUxJRF9BUkdVTUVOVCxcIkludmFsaWQgZG9jdW1lbnQgcmVmZXJlbmNlLiBEb2N1bWVudCByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBzZWdtZW50cywgYnV0IFwiK3QuY2Fub25pY2FsU3RyaW5nKCkrXCIgaGFzIFwiK3QubGVuZ3RoKTtyZXR1cm4gbmV3IG9PKGUsbmV3IHdBKGUuX2RlbGVnYXRlLG4sbmV3IEhiKHQpKSl9LG9PLlpjPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IG9PKGUsbmV3IHdBKGUuX2RlbGVnYXRlLG4sdCkpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkob08ucHJvdG90eXBlLFwiaWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvTy5wcm90b3R5cGUsXCJwYXJlbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBnTyh0aGlzLmZpcmVzdG9yZSx0aGlzLl9kZWxlZ2F0ZS5wYXJlbnQpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvTy5wcm90b3R5cGUsXCJwYXRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5wYXRofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLG9PLnByb3RvdHlwZS5jb2xsZWN0aW9uPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gbmV3IGdPKHRoaXMuZmlyZXN0b3JlLEFBKHRoaXMuX2RlbGVnYXRlLHQpKX1jYXRjaCh0KXt0aHJvdyBhTyh0LFwiY29sbGVjdGlvbigpXCIsXCJEb2N1bWVudFJlZmVyZW5jZS5jb2xsZWN0aW9uKClcIil9fSxvTy5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4odD10YSh0KSlpbnN0YW5jZW9mIHdBJiZQQSh0aGlzLl9kZWxlZ2F0ZSx0KX0sb08ucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe2U9bEEoXCJEb2N1bWVudFJlZmVyZW5jZS5zZXRcIixlKTt0cnl7cmV0dXJuIGZ1bmN0aW9uKHQsZSxuKXt0PWdBKHQsd0EpO3ZhciByPWdBKHQuZmlyZXN0b3JlLFVBKSxlPVRQKHQuY29udmVydGVyLGUsbik7cmV0dXJuIExQKHIsW2NSKHVSKHIpLFwic2V0RG9jXCIsdC5fa2V5LGUsbnVsbCE9PXQuY29udmVydGVyLG4pLnRvTXV0YXRpb24odC5fa2V5LE53Lm5vbmUoKSldKX0odGhpcy5fZGVsZWdhdGUsdCxlKX1jYXRjaCh0KXt0aHJvdyBhTyh0LFwic2V0RG9jKClcIixcIkRvY3VtZW50UmVmZXJlbmNlLnNldCgpXCIpfX0sb08ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1bXSxyPTI7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyluW3ItMl09YXJndW1lbnRzW3JdO3RyeXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/RFAodGhpcy5fZGVsZWdhdGUsdCk6RFAuYXBwbHkodm9pZCAwLG5vKFt0aGlzLl9kZWxlZ2F0ZSx0LGVdLG4pKX1jYXRjaCh0KXt0aHJvdyBhTyh0LFwidXBkYXRlRG9jKClcIixcIkRvY3VtZW50UmVmZXJlbmNlLnVwZGF0ZSgpXCIpfX0sb08ucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbigpe3JldHVybiBMUChnQSgodD10aGlzLl9kZWxlZ2F0ZSkuZmlyZXN0b3JlLFVBKSxbbmV3IHp3KHQuX2tleSxOdy5ub25lKCkpXSk7dmFyIHR9LG9PLnByb3RvdHlwZS5vblNuYXBzaG90PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMsdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt2YXIgcj1zTyh0KSxpPXVPKHQsZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBsTyhlLmZpcmVzdG9yZSxuZXcgelIoZS5maXJlc3RvcmUuX2RlbGVnYXRlLGUuX3VzZXJEYXRhV3JpdGVyLHQuX2tleSx0Ll9kb2N1bWVudCx0Lm1ldGFkYXRhLGUuX2RlbGVnYXRlLmNvbnZlcnRlcikpfSk7cmV0dXJuIHhQKHRoaXMuX2RlbGVnYXRlLHIsaSl9LG9PLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4oXCJjYWNoZVwiPT09KG51bGw9PXQ/dm9pZCAwOnQuc291cmNlKT9mdW5jdGlvbihlKXtlPWdBKGUsd0EpO3ZhciBuPWdBKGUuZmlyZXN0b3JlLFVBKSx0PVZBKG4pLHI9bmV3IFBQKG4pO3JldHVybiBmdW5jdGlvbihuLHIpe3ZhciB0PXRoaXMsaT1uZXcgQ1Q7cmV0dXJuIG4uYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uKCl7cmV0dXJuICRpKHQsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9ZnVuY3Rpb24obyxhLHMpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgcixpO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHQudHJ5cy5wdXNoKFswLDIsLDNdKSxbNCwoZT1hLChuPW8pLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwicmVhZCBkb2N1bWVudFwiLFwicmVhZG9ubHlcIixmdW5jdGlvbih0KXtyZXR1cm4gbi5Nbi5tbih0LGUpfSkpXTtjYXNlIDE6cmV0dXJuKGk9dC5zZW50KCkpLmlzRm91bmREb2N1bWVudCgpP3MucmVzb2x2ZShpKTppLmlzTm9Eb2N1bWVudCgpP3MucmVzb2x2ZShudWxsKTpzLnJlamVjdChuZXcgbmIoZWIuVU5BVkFJTEFCTEUsXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gY2FjaGUuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IG1heSBleGlzdCBvbiB0aGUgc2VydmVyLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nICdzb3VyY2UnIGluIHRoZSBHZXRPcHRpb25zIHRvIGF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGRvY3VtZW50IGZyb20gdGhlIHNlcnZlci4pXCIpKSxbMywzXTtjYXNlIDI6cmV0dXJuIHI9dC5zZW50KCksaT13ayhyLFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCAnXCIrYStcIiBmcm9tIGNhY2hlXCIpLHMucmVqZWN0KGkpLFszLDNdO2Nhc2UgMzpyZXR1cm5bMl19dmFyIGUsbn0pfSl9LFs0LEtOKG4pXTtjYXNlIDE6cmV0dXJuWzIsZS5hcHBseSh2b2lkIDAsW3Quc2VudCgpLHIsaV0pXX19KX0pfSksaS5wcm9taXNlfSh0LGUuX2tleSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbmV3IHpSKG4scixlLl9rZXksdCxuZXcgR1IobnVsbCE9PXQmJnQuaGFzTG9jYWxNdXRhdGlvbnMsITApLGUuY29udmVydGVyKX0pfTpcInNlcnZlclwiPT09KG51bGw9PXQ/dm9pZCAwOnQuc291cmNlKT9mdW5jdGlvbihlKXtlPWdBKGUsd0EpO3ZhciBuPWdBKGUuZmlyZXN0b3JlLFVBKTtyZXR1cm4gek4oVkEobiksZS5fa2V5LHtzb3VyY2U6XCJzZXJ2ZXJcIn0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIE1QKG4sZSx0KX0pfTpmdW5jdGlvbihlKXtlPWdBKGUsd0EpO3ZhciBuPWdBKGUuZmlyZXN0b3JlLFVBKTtyZXR1cm4gek4oVkEobiksZS5fa2V5KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBNUChuLGUsdCl9KX0pKHRoaXMuX2RlbGVnYXRlKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgbE8oZS5maXJlc3RvcmUsbmV3IHpSKGUuZmlyZXN0b3JlLl9kZWxlZ2F0ZSxlLl91c2VyRGF0YVdyaXRlcix0Ll9rZXksdC5fZG9jdW1lbnQsdC5tZXRhZGF0YSxlLl9kZWxlZ2F0ZS5jb252ZXJ0ZXIpKX0pfSxvTy5wcm90b3R5cGUud2l0aENvbnZlcnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG9PKHRoaXMuZmlyZXN0b3JlLHQ/dGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcih0Ty50dSh0aGlzLmZpcmVzdG9yZSx0KSk6dGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcihudWxsKSl9LG9PKTtmdW5jdGlvbiBvTyh0LGUpe3RoaXMuZmlyZXN0b3JlPXQsdGhpcy5fZGVsZWdhdGU9ZSx0aGlzLl91c2VyRGF0YVdyaXRlcj1uZXcgelAodCl9ZnVuY3Rpb24gYU8odCxlLG4pe3JldHVybiB0Lm1lc3NhZ2U9dC5tZXNzYWdlLnJlcGxhY2UoZSxuKSx0fWZ1bmN0aW9uIHNPKHQpe2Zvcih2YXIgZT0wLG49dDtlPG4ubGVuZ3RoO2UrKyl7dmFyIHI9bltlXTtpZihcIm9iamVjdFwiPT10eXBlb2YgciYmIUxBKHIpKXJldHVybiByfXJldHVybnt9fWZ1bmN0aW9uIHVPKHQsZSl7dmFyIG47cmV0dXJue25leHQ6ZnVuY3Rpb24odCl7bi5uZXh0JiZuLm5leHQoZSh0KSl9LGVycm9yOm51bGw9PT0odD0obj1MQSh0WzBdKT90WzBdOkxBKHRbMV0pP3RbMV06XCJmdW5jdGlvblwiPT10eXBlb2YgdFswXT97bmV4dDp0WzBdLGVycm9yOnRbMV0sY29tcGxldGU6dFsyXX06e25leHQ6dFsxXSxlcnJvcjp0WzJdLGNvbXBsZXRlOnRbM119KS5lcnJvcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuYmluZChuKSxjb21wbGV0ZTpudWxsPT09KHQ9bi5jb21wbGV0ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuYmluZChuKX19dmFyIGNPLGhPLGxPPShPYmplY3QuZGVmaW5lUHJvcGVydHkoSU8ucHJvdG90eXBlLFwicmVmXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBuZXcgaU8odGhpcy5fZmlyZXN0b3JlLHRoaXMuX2RlbGVnYXRlLnJlZil9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KElPLnByb3RvdHlwZSxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5pZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoSU8ucHJvdG90eXBlLFwibWV0YWRhdGFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLm1ldGFkYXRhfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJTy5wcm90b3R5cGUsXCJleGlzdHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLmV4aXN0cygpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLElPLnByb3RvdHlwZS5kYXRhPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5kYXRhKHQpfSxJTy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLmdldCh0LGUpfSxJTy5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gdFAodGhpcy5fZGVsZWdhdGUsdC5fZGVsZWdhdGUpfSxJTyksZk89KFhpKHdPLGhPPWxPKSx3Ty5wcm90b3R5cGUuZGF0YT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUuZGF0YSh0KX0sd08pLHBPPShfTy5wcm90b3R5cGUud2hlcmU9ZnVuY3Rpb24odCxlLG4pe3RyeXtyZXR1cm4gbmV3IF9PKHRoaXMuZmlyZXN0b3JlLG5QKHRoaXMuX2RlbGVnYXRlLChyPW4saT1lLG89S1IoXCJ3aGVyZVwiLHQpLG5ldyB1UChvLGkscikpKSl9Y2F0Y2godCl7dGhyb3cgYU8odCwvKG9yZGVyQnl8d2hlcmUpXFwoXFwpLyxcIlF1ZXJ5LiQxKClcIil9dmFyIHIsaSxvfSxfTy5wcm90b3R5cGUub3JkZXJCeT1mdW5jdGlvbih0LGUpe3RyeXtyZXR1cm4gbmV3IF9PKHRoaXMuZmlyZXN0b3JlLG5QKHRoaXMuX2RlbGVnYXRlLChuPXZvaWQgMD09PWU/XCJhc2NcIjplLHI9S1IoXCJvcmRlckJ5XCIsdCksbmV3IGNQKHIsbikpKSl9Y2F0Y2godCl7dGhyb3cgYU8odCwvKG9yZGVyQnl8d2hlcmUpXFwoXFwpLyxcIlF1ZXJ5LiQxKClcIil9dmFyIG4scn0sX08ucHJvdG90eXBlLmxpbWl0PWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gbmV3IF9PKHRoaXMuZmlyZXN0b3JlLG5QKHRoaXMuX2RlbGVnYXRlLCh5QShcImxpbWl0XCIsZT10KSxuZXcgaFAoXCJsaW1pdFwiLGUsXCJGXCIpKSkpfWNhdGNoKHQpe3Rocm93IGFPKHQsXCJsaW1pdCgpXCIsXCJRdWVyeS5saW1pdCgpXCIpfXZhciBlfSxfTy5wcm90b3R5cGUubGltaXRUb0xhc3Q9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBuZXcgX08odGhpcy5maXJlc3RvcmUsblAodGhpcy5fZGVsZWdhdGUsKHlBKFwibGltaXRUb0xhc3RcIixlPXQpLG5ldyBoUChcImxpbWl0VG9MYXN0XCIsZSxcIkxcIikpKSl9Y2F0Y2godCl7dGhyb3cgYU8odCxcImxpbWl0VG9MYXN0KClcIixcIlF1ZXJ5LmxpbWl0VG9MYXN0KClcIil9dmFyIGV9LF9PLnByb3RvdHlwZS5zdGFydEF0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RyeXtyZXR1cm4gbmV3IF9PKHRoaXMuZmlyZXN0b3JlLG5QKHRoaXMuX2RlbGVnYXRlLGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBuZXcgbFAoXCJzdGFydEF0XCIsdCwhMCl9LmFwcGx5KHZvaWQgMCx0KSkpfWNhdGNoKHQpe3Rocm93IGFPKHQsXCJzdGFydEF0KClcIixcIlF1ZXJ5LnN0YXJ0QXQoKVwiKX19LF9PLnByb3RvdHlwZS5zdGFydEFmdGVyPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RyeXtyZXR1cm4gbmV3IF9PKHRoaXMuZmlyZXN0b3JlLG5QKHRoaXMuX2RlbGVnYXRlLGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBuZXcgbFAoXCJzdGFydEFmdGVyXCIsdCwhMSl9LmFwcGx5KHZvaWQgMCx0KSkpfWNhdGNoKHQpe3Rocm93IGFPKHQsXCJzdGFydEFmdGVyKClcIixcIlF1ZXJ5LnN0YXJ0QWZ0ZXIoKVwiKX19LF9PLnByb3RvdHlwZS5lbmRCZWZvcmU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dHJ5e3JldHVybiBuZXcgX08odGhpcy5maXJlc3RvcmUsblAodGhpcy5fZGVsZWdhdGUsZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07cmV0dXJuIG5ldyBmUChcImVuZEJlZm9yZVwiLHQsITApfS5hcHBseSh2b2lkIDAsdCkpKX1jYXRjaCh0KXt0aHJvdyBhTyh0LFwiZW5kQmVmb3JlKClcIixcIlF1ZXJ5LmVuZEJlZm9yZSgpXCIpfX0sX08ucHJvdG90eXBlLmVuZEF0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RyeXtyZXR1cm4gbmV3IF9PKHRoaXMuZmlyZXN0b3JlLG5QKHRoaXMuX2RlbGVnYXRlLGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBuZXcgZlAoXCJlbmRBdFwiLHQsITEpfS5hcHBseSh2b2lkIDAsdCkpKX1jYXRjaCh0KXt0aHJvdyBhTyh0LFwiZW5kQXQoKVwiLFwiUXVlcnkuZW5kQXQoKVwiKX19LF9PLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiBPQSh0aGlzLl9kZWxlZ2F0ZSx0Ll9kZWxlZ2F0ZSl9LF9PLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4oXCJjYWNoZVwiPT09KG51bGw9PXQ/dm9pZCAwOnQuc291cmNlKT9mdW5jdGlvbihlKXtlPWdBKGUsSUEpO3ZhciBuPWdBKGUuZmlyZXN0b3JlLFVBKSx0PVZBKG4pLHI9bmV3IFBQKG4pO3JldHVybiBmdW5jdGlvbihuLHIpe3ZhciB0PXRoaXMsaT1uZXcgQ1Q7cmV0dXJuIG4uYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uKCl7cmV0dXJuICRpKHQsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9ZnVuY3Rpb24oaSxvLGEpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdC50cnlzLnB1c2goWzAsMiwsM10pLFs0LHhTKGksbywhMCldO2Nhc2UgMTpyZXR1cm4gcj10LnNlbnQoKSxlPW5ldyBXayhvLHIuQm4pLG49ZS5fbyhyLmRvY3VtZW50cyksbj1lLmFwcGx5Q2hhbmdlcyhuLCExKSxhLnJlc29sdmUobi5zbmFwc2hvdCksWzMsM107Y2FzZSAyOnJldHVybiBuPXQuc2VudCgpLHI9d2sobixcIkZhaWxlZCB0byBleGVjdXRlIHF1ZXJ5ICdcIitvK1wiIGFnYWluc3QgY2FjaGVcIiksYS5yZWplY3QociksWzMsM107Y2FzZSAzOnJldHVyblsyXX19KX0pfSxbNCxLTihuKV07Y2FzZSAxOnJldHVyblsyLGUuYXBwbHkodm9pZCAwLFt0LnNlbnQoKSxyLGldKV19fSl9KX0pLGkucHJvbWlzZX0odCxlLl9xdWVyeSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFlSKG4scixlLHQpfSl9Olwic2VydmVyXCI9PT0obnVsbD09dD92b2lkIDA6dC5zb3VyY2UpP2Z1bmN0aW9uKGUpe2U9Z0EoZSxJQSk7dmFyIG49Z0EoZS5maXJlc3RvcmUsVUEpLHQ9VkEobikscj1uZXcgUFAobik7cmV0dXJuIFFOKHQsZS5fcXVlcnkse3NvdXJjZTpcInNlcnZlclwifSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFlSKG4scixlLHQpfSl9OmZ1bmN0aW9uKGUpe2U9Z0EoZSxJQSk7dmFyIG49Z0EoZS5maXJlc3RvcmUsVUEpLHQ9VkEobikscj1uZXcgUFAobik7cmV0dXJuIGVQKGUuX3F1ZXJ5KSxRTih0LGUuX3F1ZXJ5KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgWVIobixyLGUsdCl9KX0pKHRoaXMuX2RlbGVnYXRlKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdk8oZS5maXJlc3RvcmUsbmV3IFlSKGUuZmlyZXN0b3JlLl9kZWxlZ2F0ZSxlLl91c2VyRGF0YVdyaXRlcixlLl9kZWxlZ2F0ZSx0Ll9zbmFwc2hvdCkpfSl9LF9PLnByb3RvdHlwZS5vblNuYXBzaG90PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMsdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt2YXIgcj1zTyh0KSxpPXVPKHQsZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB2TyhlLmZpcmVzdG9yZSxuZXcgWVIoZS5maXJlc3RvcmUuX2RlbGVnYXRlLGUuX3VzZXJEYXRhV3JpdGVyLGUuX2RlbGVnYXRlLHQuX3NuYXBzaG90KSl9KTtyZXR1cm4geFAodGhpcy5fZGVsZWdhdGUscixpKX0sX08ucHJvdG90eXBlLndpdGhDb252ZXJ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBfTyh0aGlzLmZpcmVzdG9yZSx0P3RoaXMuX2RlbGVnYXRlLndpdGhDb252ZXJ0ZXIodE8udHUodGhpcy5maXJlc3RvcmUsdCkpOnRoaXMuX2RlbGVnYXRlLndpdGhDb252ZXJ0ZXIobnVsbCkpfSxfTyksZE89KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiTy5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWxlZ2F0ZS50eXBlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiTy5wcm90b3R5cGUsXCJkb2NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBmTyh0aGlzLl9maXJlc3RvcmUsdGhpcy5fZGVsZWdhdGUuZG9jKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYk8ucHJvdG90eXBlLFwib2xkSW5kZXhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLm9sZEluZGV4fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiTy5wcm90b3R5cGUsXCJuZXdJbmRleFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUubmV3SW5kZXh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksYk8pLHZPPShPYmplY3QuZGVmaW5lUHJvcGVydHkobU8ucHJvdG90eXBlLFwicXVlcnlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwTyh0aGlzLl9maXJlc3RvcmUsdGhpcy5fZGVsZWdhdGUucXVlcnkpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtTy5wcm90b3R5cGUsXCJtZXRhZGF0YVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUubWV0YWRhdGF9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG1PLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLnNpemV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG1PLnByb3RvdHlwZSxcImVtcHR5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5lbXB0eX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobU8ucHJvdG90eXBlLFwiZG9jc1wiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5kb2NzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGZPKGUuX2ZpcmVzdG9yZSx0KX0pfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLG1PLnByb3RvdHlwZS5kb2NDaGFuZ2VzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLmRvY0NoYW5nZXModCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZE8oZS5fZmlyZXN0b3JlLHQpfSl9LG1PLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpczt0aGlzLl9kZWxlZ2F0ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuY2FsbChuLG5ldyBmTyhyLl9maXJlc3RvcmUsdCkpfSl9LG1PLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0UCh0aGlzLl9kZWxlZ2F0ZSx0Ll9kZWxlZ2F0ZSl9LG1PKSxnTz0oWGkoeU8sY089cE8pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh5Ty5wcm90b3R5cGUsXCJpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUuaWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHlPLnByb3RvdHlwZSxcInBhdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLnBhdGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHlPLnByb3RvdHlwZSxcInBhcmVudFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kZWxlZ2F0ZS5wYXJlbnQ7cmV0dXJuIHQ/bmV3IGlPKHRoaXMuZmlyZXN0b3JlLHQpOm51bGx9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSkseU8ucHJvdG90eXBlLmRvYz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIG5ldyBpTyh0aGlzLmZpcmVzdG9yZSx2b2lkIDA9PT10P1JBKHRoaXMuX2RlbGVnYXRlKTpSQSh0aGlzLl9kZWxlZ2F0ZSx0KSl9Y2F0Y2godCl7dGhyb3cgYU8odCxcImRvYygpXCIsXCJDb2xsZWN0aW9uUmVmZXJlbmNlLmRvYygpXCIpfX0seU8ucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt2YXIgZSxuLHIsaT10aGlzO3JldHVybiBlPXRoaXMuX2RlbGVnYXRlLG49dCx0PWdBKGUuZmlyZXN0b3JlLFVBKSxyPVJBKGUpLG49VFAoZS5jb252ZXJ0ZXIsbiksTFAodCxbY1IodVIoZS5maXJlc3RvcmUpLFwiYWRkRG9jXCIsci5fa2V5LG4sbnVsbCE9PWUuY29udmVydGVyLHt9KS50b011dGF0aW9uKHIuX2tleSxOdy5leGlzdHMoITEpKV0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcn0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBpTyhpLmZpcmVzdG9yZSx0KX0pfSx5Ty5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gUEEodGhpcy5fZGVsZWdhdGUsdC5fZGVsZWdhdGUpfSx5Ty5wcm90b3R5cGUud2l0aENvbnZlcnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHlPKHRoaXMuZmlyZXN0b3JlLHQ/dGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcih0Ty50dSh0aGlzLmZpcmVzdG9yZSx0KSk6dGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcihudWxsKSl9LHlPKTtmdW5jdGlvbiB5Tyh0LGUpe3ZhciBuPXRoaXM7cmV0dXJuKG49Y08uY2FsbCh0aGlzLHQsZSl8fHRoaXMpLmZpcmVzdG9yZT10LG4uX2RlbGVnYXRlPWUsbn1mdW5jdGlvbiBtTyh0LGUpe3RoaXMuX2ZpcmVzdG9yZT10LHRoaXMuX2RlbGVnYXRlPWV9ZnVuY3Rpb24gYk8odCxlKXt0aGlzLl9maXJlc3RvcmU9dCx0aGlzLl9kZWxlZ2F0ZT1lfWZ1bmN0aW9uIF9PKHQsZSl7dGhpcy5maXJlc3RvcmU9dCx0aGlzLl9kZWxlZ2F0ZT1lLHRoaXMuX3VzZXJEYXRhV3JpdGVyPW5ldyB6UCh0KX1mdW5jdGlvbiB3Tygpe3JldHVybiBudWxsIT09aE8mJmhPLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31mdW5jdGlvbiBJTyh0LGUpe3RoaXMuX2ZpcmVzdG9yZT10LHRoaXMuX2RlbGVnYXRlPWV9ZnVuY3Rpb24gVE8odCl7cmV0dXJuIGdBKHQsd0EpfVNPLmRvY3VtZW50SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFNPKE5iLmtleUZpZWxkKCkuY2Fub25pY2FsU3RyaW5nKCkpfSxTTy5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4odD10YSh0KSlpbnN0YW5jZW9mIEhBJiZ0aGlzLl9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoLmlzRXF1YWwodC5faW50ZXJuYWxQYXRoKX0sU249U08sRU8uc2VydmVyVGltZXN0YW1wPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG1SKFwic2VydmVyVGltZXN0YW1wXCIpO3JldHVybiB0Ll9tZXRob2ROYW1lPVwiRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXBcIixuZXcgRU8odCl9LEVPLmRlbGV0ZT1mdW5jdGlvbigpe3ZhciB0PW5ldyBsUihcImRlbGV0ZUZpZWxkXCIpO3JldHVybiB0Ll9tZXRob2ROYW1lPVwiRmllbGRWYWx1ZS5kZWxldGVcIixuZXcgRU8odCl9LEVPLmFycmF5VW5pb249ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dmFyIG49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07cmV0dXJuIG5ldyBiUihcImFycmF5VW5pb25cIix0KX0uYXBwbHkodm9pZCAwLHQpO3JldHVybiBuLl9tZXRob2ROYW1lPVwiRmllbGRWYWx1ZS5hcnJheVVuaW9uXCIsbmV3IEVPKG4pfSxFTy5hcnJheVJlbW92ZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt2YXIgbj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gbmV3IF9SKFwiYXJyYXlSZW1vdmVcIix0KX0uYXBwbHkodm9pZCAwLHQpO3JldHVybiBuLl9tZXRob2ROYW1lPVwiRmllbGRWYWx1ZS5hcnJheVJlbW92ZVwiLG5ldyBFTyhuKX0sRU8uaW5jcmVtZW50PWZ1bmN0aW9uKHQpe3Q9bmV3IHdSKFwiaW5jcmVtZW50XCIsdCk7cmV0dXJuIHQuX21ldGhvZE5hbWU9XCJGaWVsZFZhbHVlLmluY3JlbWVudFwiLG5ldyBFTyh0KX0sRU8ucHJvdG90eXBlLmlzRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlzRXF1YWwodC5fZGVsZWdhdGUpfSxHPUVPO2Z1bmN0aW9uIEVPKHQpe3RoaXMuX2RlbGVnYXRlPXR9ZnVuY3Rpb24gU08oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dGhpcy5fZGVsZWdhdGU9bmV3KEhBLmJpbmQuYXBwbHkoSEEsbm8oW3ZvaWQgMF0sdCkpKX1mdW5jdGlvbiBDTyh0KXtyZXR1cm4gZT10aGlzLl9kZWxlZ2F0ZSxhPXQsbj1WQShlPWdBKGUsVUEpKSx0PW5ldyBGQSxmdW5jdGlvbihuLHQscil7dmFyIGUsaT10aGlzLG89KGU9YSx0PVVDKHQpLGU9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpcmV0dXJuIGtOKHQsdm9pZCAwKTtpZih0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpcmV0dXJuIGtOKG5ldyBVaW50OEFycmF5KHQpLHZvaWQgMCk7aWYodCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKXJldHVybiB0LmdldFJlYWRlcigpO3Rocm93IG5ldyBFcnJvcihcIlNvdXJjZSBvZiBgdG9CeXRlU3RyZWFtUmVhZGVyYCBoYXMgdG8gYmUgYSBBcnJheUJ1ZmZlciBvciBSZWFkYWJsZVN0cmVhbVwiKX0oXCJzdHJpbmdcIj09dHlwZW9mIGU/KG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKGUpOmUpLG5ldyBBTihlLHQpKTtuLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbigpe3JldHVybiAkaShpLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPWdOLFs0LEhOKG4pXTtjYXNlIDE6cmV0dXJuIGUuYXBwbHkodm9pZCAwLFt0LnNlbnQoKSxvLHJdKSxbMl19fSl9KX0pfShuLGUuX2RhdGFiYXNlSWQsdCksdDt2YXIgZSxhLG59ZnVuY3Rpb24ga08odCl7dmFyIGU9dGhpcyxuPXRoaXMuX2RlbGVnYXRlLHQ9dDtyZXR1cm4gZnVuY3Rpb24obixyKXt2YXIgdD10aGlzO3JldHVybiBuLmFzeW5jUXVldWUuZW5xdWV1ZShmdW5jdGlvbigpe3JldHVybiAkaSh0LHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dDtyZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuYW1lZCBxdWVyeVwiLFwicmVhZG9ubHlcIixmdW5jdGlvbih0KXtyZXR1cm4gbi5RZS5nZXROYW1lZFF1ZXJ5KHQsZSl9KX0sWzQsS04obildO2Nhc2UgMTpyZXR1cm5bMixlLmFwcGx5KHZvaWQgMCxbdC5zZW50KCkscl0pXX19KX0pfSl9KFZBKG49Z0EobixVQSkpLHQpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQ/bmV3IElBKG4sbnVsbCx0LnF1ZXJ5KTpudWxsfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdD9uZXcgcE8oZSx0KTpudWxsfSl9dmFyIE5PLEFPLFJPPXtGaXJlc3RvcmU6R1AsR2VvUG9pbnQ6UUEsVGltZXN0YW1wOnliLEJsb2I6V1AsVHJhbnNhY3Rpb246JFAsV3JpdGVCYXRjaDpaUCxEb2N1bWVudFJlZmVyZW5jZTppTyxEb2N1bWVudFNuYXBzaG90OmxPLFF1ZXJ5OnBPLFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdDpmTyxRdWVyeVNuYXBzaG90OnZPLENvbGxlY3Rpb25SZWZlcmVuY2U6Z08sRmllbGRQYXRoOlNuLEZpZWxkVmFsdWU6RyxzZXRMb2dMZXZlbDpmdW5jdGlvbih0KXtyYi5zZXRMb2dMZXZlbCh0KX0sQ0FDSEVfU0laRV9VTkxJTUlURUQ6LTF9OyhOTz1YbCkuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IGVhKFwiZmlyZXN0b3JlXCIsZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRQcm92aWRlcihcImFwcFwiKS5nZXRJbW1lZGlhdGUoKTtyZXR1cm4gZT1lLHQ9dC5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIiksbmV3IEdQKGUsbmV3IFVBKGUsdCksbmV3IEhQKX0sXCJQVUJMSUNcIikuc2V0U2VydmljZVByb3BzKE9iamVjdC5hc3NpZ24oe30sUk8pKSksTk8ucmVnaXN0ZXJWZXJzaW9uKFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiLFwiMi4zLjBcIiksKEFPPUdQKS5wcm90b3R5cGUubG9hZEJ1bmRsZT1DTyxBTy5wcm90b3R5cGUubmFtZWRRdWVyeT1rTzt2YXIgUE8sT089e09LOlwib2tcIixDQU5DRUxMRUQ6XCJjYW5jZWxsZWRcIixVTktOT1dOOlwidW5rbm93blwiLElOVkFMSURfQVJHVU1FTlQ6XCJpbnZhbGlkLWFyZ3VtZW50XCIsREVBRExJTkVfRVhDRUVERUQ6XCJkZWFkbGluZS1leGNlZWRlZFwiLE5PVF9GT1VORDpcIm5vdC1mb3VuZFwiLEFMUkVBRFlfRVhJU1RTOlwiYWxyZWFkeS1leGlzdHNcIixQRVJNSVNTSU9OX0RFTklFRDpcInBlcm1pc3Npb24tZGVuaWVkXCIsVU5BVVRIRU5USUNBVEVEOlwidW5hdXRoZW50aWNhdGVkXCIsUkVTT1VSQ0VfRVhIQVVTVEVEOlwicmVzb3VyY2UtZXhoYXVzdGVkXCIsRkFJTEVEX1BSRUNPTkRJVElPTjpcImZhaWxlZC1wcmVjb25kaXRpb25cIixBQk9SVEVEOlwiYWJvcnRlZFwiLE9VVF9PRl9SQU5HRTpcIm91dC1vZi1yYW5nZVwiLFVOSU1QTEVNRU5URUQ6XCJ1bmltcGxlbWVudGVkXCIsSU5URVJOQUw6XCJpbnRlcm5hbFwiLFVOQVZBSUxBQkxFOlwidW5hdmFpbGFibGVcIixEQVRBX0xPU1M6XCJkYXRhLWxvc3NcIn0sRE89KFhpKHhPLFBPPUVycm9yKSx4Tyk7ZnVuY3Rpb24geE8odCxlLG4pe2U9UE8uY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSx4Ty5wcm90b3R5cGUpLGUuY29kZT10LGUuZGV0YWlscz1uLGV9ZnVuY3Rpb24gTE8odCxlLG4pe3ZhciByPWZ1bmN0aW9uKHQpe2lmKDIwMDw9dCYmdDwzMDApcmV0dXJuXCJva1wiO3N3aXRjaCh0KXtjYXNlIDA6cmV0dXJuXCJpbnRlcm5hbFwiO2Nhc2UgNDAwOnJldHVyblwiaW52YWxpZC1hcmd1bWVudFwiO2Nhc2UgNDAxOnJldHVyblwidW5hdXRoZW50aWNhdGVkXCI7Y2FzZSA0MDM6cmV0dXJuXCJwZXJtaXNzaW9uLWRlbmllZFwiO2Nhc2UgNDA0OnJldHVyblwibm90LWZvdW5kXCI7Y2FzZSA0MDk6cmV0dXJuXCJhYm9ydGVkXCI7Y2FzZSA0Mjk6cmV0dXJuXCJyZXNvdXJjZS1leGhhdXN0ZWRcIjtjYXNlIDQ5OTpyZXR1cm5cImNhbmNlbGxlZFwiO2Nhc2UgNTAwOnJldHVyblwiaW50ZXJuYWxcIjtjYXNlIDUwMTpyZXR1cm5cInVuaW1wbGVtZW50ZWRcIjtjYXNlIDUwMzpyZXR1cm5cInVuYXZhaWxhYmxlXCI7Y2FzZSA1MDQ6cmV0dXJuXCJkZWFkbGluZS1leGNlZWRlZFwifXJldHVyblwidW5rbm93blwifSh0KSxpPXIsbz12b2lkIDA7dHJ5e3ZhciBhPWUmJmUuZXJyb3I7aWYoYSl7dmFyIHM9YS5zdGF0dXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHMpe2lmKCFPT1tzXSlyZXR1cm4gbmV3IERPKFwiaW50ZXJuYWxcIixcImludGVybmFsXCIpO3I9T09bc10saT1zfXM9YS5tZXNzYWdlO1wic3RyaW5nXCI9PXR5cGVvZiBzJiYoaT1zKSx2b2lkIDAhPT0obz1hLmRldGFpbHMpJiYobz1uLmRlY29kZShvKSl9fWNhdGNoKHQpe31yZXR1cm5cIm9rXCI9PT1yP251bGw6bmV3IERPKHIsaSxvKX12YXIgTU89KEZPLnByb3RvdHlwZS5nZXRBdXRoVG9rZW49ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDppZighdGhpcy5hdXRoKXJldHVyblsyLHZvaWQgMF07dC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsMywsNF0pLFs0LHRoaXMuYXV0aC5nZXRUb2tlbigpXTtjYXNlIDI6cmV0dXJuKGU9dC5zZW50KCkpP1syLGUuYWNjZXNzVG9rZW5dOlsyLHZvaWQgMF07Y2FzZSAzOnJldHVybiB0LnNlbnQoKSxbMix2b2lkIDBdO2Nhc2UgNDpyZXR1cm5bMl19fSl9KX0sRk8ucHJvdG90eXBlLmdldEluc3RhbmNlSWRUb2tlbj1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtpZighKHRoaXMubWVzc2FnaW5nJiZcIk5vdGlmaWNhdGlvblwiaW4gc2VsZiYmXCJncmFudGVkXCI9PT1Ob3RpZmljYXRpb24ucGVybWlzc2lvbikpcmV0dXJuWzIsdm9pZCAwXTt0cnl7cmV0dXJuWzIsdGhpcy5tZXNzYWdpbmcuZ2V0VG9rZW4oKV19Y2F0Y2godCl7cmV0dXJuWzIsdm9pZCAwXX1yZXR1cm5bMl19KX0pfSxGTy5wcm90b3R5cGUuZ2V0Q29udGV4dD1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGhpcy5nZXRBdXRoVG9rZW4oKV07Y2FzZSAxOnJldHVybiBlPXQuc2VudCgpLFs0LHRoaXMuZ2V0SW5zdGFuY2VJZFRva2VuKCldO2Nhc2UgMjpyZXR1cm4gbj10LnNlbnQoKSxbMix7YXV0aFRva2VuOmUsaW5zdGFuY2VJZFRva2VuOm59XX19KX0pfSxGTyk7ZnVuY3Rpb24gRk8odCxlKXt2YXIgbj10aGlzO3RoaXMuYXV0aD1udWxsLHRoaXMubWVzc2FnaW5nPW51bGwsdGhpcy5hdXRoPXQuZ2V0SW1tZWRpYXRlKHtvcHRpb25hbDohMH0pLHRoaXMubWVzc2FnaW5nPWUuZ2V0SW1tZWRpYXRlKHtvcHRpb25hbDohMH0pLHRoaXMuYXV0aHx8dC5nZXQoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuLmF1dGg9dH0sZnVuY3Rpb24oKXt9KSx0aGlzLm1lc3NhZ2luZ3x8ZS5nZXQoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuLm1lc3NhZ2luZz10fSxmdW5jdGlvbigpe30pfWZ1bmN0aW9uIFVPKHQsZSl7dmFyIG4scj17fTtmb3IobiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihyW25dPWUodFtuXSkpO3JldHVybiByfXZhciBqTz0ocU8ucHJvdG90eXBlLmVuY29kZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKG51bGw9PXQpcmV0dXJuIG51bGw7aWYoXCJudW1iZXJcIj09dHlwZW9mKHQ9dCBpbnN0YW5jZW9mIE51bWJlcj90LnZhbHVlT2YoKTp0KSYmaXNGaW5pdGUodCkpcmV0dXJuIHQ7aWYoITA9PT10fHwhMT09PXQpcmV0dXJuIHQ7aWYoXCJbb2JqZWN0IFN0cmluZ11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSlyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZS5lbmNvZGUodCl9KTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0fHxcIm9iamVjdFwiPT10eXBlb2YgdClyZXR1cm4gVU8odCxmdW5jdGlvbih0KXtyZXR1cm4gZS5lbmNvZGUodCl9KTt0aHJvdyBuZXcgRXJyb3IoXCJEYXRhIGNhbm5vdCBiZSBlbmNvZGVkIGluIEpTT046IFwiK3QpfSxxTy5wcm90b3R5cGUuZGVjb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYobnVsbD09dClyZXR1cm4gdDtpZih0W1wiQHR5cGVcIl0pc3dpdGNoKHRbXCJAdHlwZVwiXSl7Y2FzZVwidHlwZS5nb29nbGVhcGlzLmNvbS9nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZVwiOmNhc2VcInR5cGUuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLnByb3RvYnVmLlVJbnQ2NFZhbHVlXCI6dmFyIG49TnVtYmVyKHQudmFsdWUpO2lmKGlzTmFOKG4pKXRocm93IG5ldyBFcnJvcihcIkRhdGEgY2Fubm90IGJlIGRlY29kZWQgZnJvbSBKU09OOiBcIit0KTtyZXR1cm4gbjtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIkRhdGEgY2Fubm90IGJlIGRlY29kZWQgZnJvbSBKU09OOiBcIit0KX1yZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZS5kZWNvZGUodCl9KTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0fHxcIm9iamVjdFwiPT10eXBlb2YgdD9VTyh0LGZ1bmN0aW9uKHQpe3JldHVybiBlLmRlY29kZSh0KX0pOnR9LHFPKTtmdW5jdGlvbiBxTygpe312YXIgVk89KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCTy5wcm90b3R5cGUsXCJhcHBcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXBwX30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxCTy5wcm90b3R5cGUuX3VybD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmFwcF8ub3B0aW9ucy5wcm9qZWN0SWQ7cmV0dXJuIG51bGw9PT10aGlzLmVtdWxhdG9yT3JpZ2luP251bGwhPT10aGlzLmN1c3RvbURvbWFpbj90aGlzLmN1c3RvbURvbWFpbitcIi9cIit0OlwiaHR0cHM6Ly9cIit0aGlzLnJlZ2lvbitcIi1cIitlK1wiLmNsb3VkZnVuY3Rpb25zLm5ldC9cIit0OnRoaXMuZW11bGF0b3JPcmlnaW4rXCIvXCIrZStcIi9cIit0aGlzLnJlZ2lvbitcIi9cIit0fSxCTy5wcm90b3R5cGUudXNlRW11bGF0b3I9ZnVuY3Rpb24odCxlKXt0aGlzLmVtdWxhdG9yT3JpZ2luPVwiaHR0cDovL1wiK3QrXCI6XCIrZX0sQk8ucHJvdG90eXBlLnVzZUZ1bmN0aW9uc0VtdWxhdG9yPWZ1bmN0aW9uKHQpe3RoaXMuZW11bGF0b3JPcmlnaW49dH0sQk8ucHJvdG90eXBlLmh0dHBzQ2FsbGFibGU9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gci5jYWxsKGUsdCxufHx7fSl9fSxCTy5wcm90b3R5cGUucG9zdEpTT049ZnVuY3Rpb24oaSxvLGEpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gYVtcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL2pzb25cIixbNCx0aGlzLmdldEFwcENoZWNrVG9rZW4oKV07Y2FzZSAxOm51bGwhPT0oZT10LnNlbnQoKSkmJihhW1wiWC1GaXJlYmFzZS1BcHBDaGVja1wiXT1lKSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVybiB0LnRyeXMucHVzaChbMiw0LCw1XSksWzQsdGhpcy5mZXRjaEltcGwoaSx7bWV0aG9kOlwiUE9TVFwiLGJvZHk6SlNPTi5zdHJpbmdpZnkobyksaGVhZGVyczphfSldO2Nhc2UgMzpyZXR1cm4gbj10LnNlbnQoKSxbMyw1XTtjYXNlIDQ6cmV0dXJuIHQuc2VudCgpLFsyLHtzdGF0dXM6MCxqc29uOm51bGx9XTtjYXNlIDU6cj1udWxsLHQubGFiZWw9NjtjYXNlIDY6cmV0dXJuIHQudHJ5cy5wdXNoKFs2LDgsLDldKSxbNCxuLmpzb24oKV07Y2FzZSA3OnJldHVybiByPXQuc2VudCgpLFszLDldO2Nhc2UgODpyZXR1cm4gdC5zZW50KCksWzMsOV07Y2FzZSA5OnJldHVyblsyLHtzdGF0dXM6bi5zdGF0dXMsanNvbjpyfV19fSl9KX0sQk8ucHJvdG90eXBlLmdldEFwcENoZWNrVG9rZW49ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4oZT10aGlzLmFwcENoZWNrUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtvcHRpb25hbDohMH0pKT9bNCxlLmdldFRva2VuKCldOlszLDJdO2Nhc2UgMTpyZXR1cm5bMix0LnNlbnQoKS50b2tlbl07Y2FzZSAyOnJldHVyblsyLG51bGxdfX0pfSl9LEJPLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGMsaCxsKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGksbyxhLHMsdTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBpPXRoaXMuX3VybChjKSxoPXRoaXMuc2VyaWFsaXplci5lbmNvZGUoaCksbz17ZGF0YTpofSxhPXt9LFs0LHRoaXMuY29udGV4dFByb3ZpZGVyLmdldENvbnRleHQoKV07Y2FzZSAxOnJldHVybihzPXQuc2VudCgpKS5hdXRoVG9rZW4mJihhLkF1dGhvcml6YXRpb249XCJCZWFyZXIgXCIrcy5hdXRoVG9rZW4pLHMuaW5zdGFuY2VJZFRva2VuJiYoYVtcIkZpcmViYXNlLUluc3RhbmNlLUlELVRva2VuXCJdPXMuaW5zdGFuY2VJZFRva2VuKSx1PWwudGltZW91dHx8N2U0LG49dSxlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsZSl7cj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZShuZXcgRE8oXCJkZWFkbGluZS1leGNlZWRlZFwiLFwiZGVhZGxpbmUtZXhjZWVkZWRcIikpfSxuKX0pLHU9KHM9e3RpbWVyOnIscHJvbWlzZTplfSkudGltZXIscz1zLnByb21pc2UsWzQsUHJvbWlzZS5yYWNlKFtLTyh1LHRoaXMucG9zdEpTT04oaSxvLGEpKSxzLEtPKHUsdGhpcy5jYW5jZWxBbGxSZXF1ZXN0cyldKV07Y2FzZSAyOmlmKCEocz10LnNlbnQoKSkpdGhyb3cgbmV3IERPKFwiY2FuY2VsbGVkXCIsXCJGaXJlYmFzZSBGdW5jdGlvbnMgaW5zdGFuY2Ugd2FzIGRlbGV0ZWQuXCIpO2lmKHU9TE8ocy5zdGF0dXMscy5qc29uLHRoaXMuc2VyaWFsaXplcikpdGhyb3cgdTtpZighcy5qc29uKXRocm93IG5ldyBETyhcImludGVybmFsXCIsXCJSZXNwb25zZSBpcyBub3QgdmFsaWQgSlNPTiBvYmplY3QuXCIpO2lmKHZvaWQgMD09PSh1PXZvaWQgMD09PSh1PXMuanNvbi5kYXRhKT9zLmpzb24ucmVzdWx0OnUpKXRocm93IG5ldyBETyhcImludGVybmFsXCIsXCJSZXNwb25zZSBpcyBtaXNzaW5nIGRhdGEgZmllbGQuXCIpO3JldHVyblsyLHtkYXRhOnRoaXMuc2VyaWFsaXplci5kZWNvZGUodSl9XX12YXIgbixyLGV9KX0pfSxCTyk7ZnVuY3Rpb24gQk8odCxlLG4scixpLG8pe3ZhciBhPXRoaXM7dm9pZCAwPT09aSYmKGk9XCJ1cy1jZW50cmFsMVwiKSx0aGlzLmFwcF89dCx0aGlzLmFwcENoZWNrUHJvdmlkZXI9cix0aGlzLmZldGNoSW1wbD1vLHRoaXMuc2VyaWFsaXplcj1uZXcgak8sdGhpcy5lbXVsYXRvck9yaWdpbj1udWxsLHRoaXMuSU5URVJOQUw9e2RlbGV0ZTpmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoYS5kZWxldGVTZXJ2aWNlKCkpfX0sdGhpcy5jb250ZXh0UHJvdmlkZXI9bmV3IE1PKGUsbiksdGhpcy5jYW5jZWxBbGxSZXF1ZXN0cz1uZXcgUHJvbWlzZShmdW5jdGlvbih0KXthLmRlbGV0ZVNlcnZpY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdCgpfX0pO3RyeXt2YXIgcz1uZXcgVVJMKGkpO3RoaXMuY3VzdG9tRG9tYWluPXMub3JpZ2luLHRoaXMucmVnaW9uPVwidXMtY2VudHJhbDFcIn1jYXRjaCh0KXt0aGlzLmN1c3RvbURvbWFpbj1udWxsLHRoaXMucmVnaW9uPWl9fWZ1bmN0aW9uIEtPKG4scil7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQscl07Y2FzZSAxOnJldHVybiBlPXQuc2VudCgpLGNsZWFyVGltZW91dChuKSxbMixlXX19KX0pfXZhciBXTyxITyxHTztmdW5jdGlvbiB6TyhuKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCxlKXtuLm9uc3VjY2Vzcz1mdW5jdGlvbigpe3Qobi5yZXN1bHQpfSxuLm9uZXJyb3I9ZnVuY3Rpb24oKXtlKG4uZXJyb3IpfX0pfWZ1bmN0aW9uIFFPKG4scixpKXt2YXIgbyx0PW5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsZSl7ek8obz1uW3JdLmFwcGx5KG4saSkpLnRoZW4odCxlKX0pO3JldHVybiB0LnJlcXVlc3Q9byx0fWZ1bmN0aW9uIFlPKHQsbixlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLGUse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzW25dW2VdfSxzZXQ6ZnVuY3Rpb24odCl7dGhpc1tuXVtlXT10fX0pfSl9ZnVuY3Rpb24gWE8oZSxuLHIsdCl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QgaW4gci5wcm90b3R5cGUmJihlLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybiBRTyh0aGlzW25dLHQsYXJndW1lbnRzKX0pfSl9ZnVuY3Rpb24gSk8oZSxuLHIsdCl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QgaW4gci5wcm90b3R5cGUmJihlLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybiB0aGlzW25dW3RdLmFwcGx5KHRoaXNbbl0sYXJndW1lbnRzKX0pfSl9ZnVuY3Rpb24gJE8odCxyLGUsbil7bi5mb3JFYWNoKGZ1bmN0aW9uKG4pe24gaW4gZS5wcm90b3R5cGUmJih0LnByb3RvdHlwZVtuXT1mdW5jdGlvbigpe3JldHVybiB0PXRoaXNbcl0sKGU9UU8odCxuLGFyZ3VtZW50cykpLnRoZW4oZnVuY3Rpb24odCl7aWYodClyZXR1cm4gbmV3IHREKHQsZS5yZXF1ZXN0KX0pO3ZhciB0LGV9KX0pfWZ1bmN0aW9uIFpPKHQpe3RoaXMuX2luZGV4PXR9ZnVuY3Rpb24gdEQodCxlKXt0aGlzLl9jdXJzb3I9dCx0aGlzLl9yZXF1ZXN0PWV9ZnVuY3Rpb24gZUQodCl7dGhpcy5fc3RvcmU9dH1mdW5jdGlvbiBuRChuKXt0aGlzLl90eD1uLHRoaXMuY29tcGxldGU9bmV3IFByb21pc2UoZnVuY3Rpb24odCxlKXtuLm9uY29tcGxldGU9ZnVuY3Rpb24oKXt0KCl9LG4ub25lcnJvcj1mdW5jdGlvbigpe2Uobi5lcnJvcil9LG4ub25hYm9ydD1mdW5jdGlvbigpe2Uobi5lcnJvcil9fSl9ZnVuY3Rpb24gckQodCxlLG4pe3RoaXMuX2RiPXQsdGhpcy5vbGRWZXJzaW9uPWUsdGhpcy50cmFuc2FjdGlvbj1uZXcgbkQobil9ZnVuY3Rpb24gaUQodCl7dGhpcy5fZGI9dH1mdW5jdGlvbiBvRCh0LGUsbil7dmFyIGU9UU8oaW5kZXhlZERCLFwib3BlblwiLFt0LGVdKSxyPWUucmVxdWVzdDtyZXR1cm4gciYmKHIub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKHQpe24mJm4obmV3IHJEKHIucmVzdWx0LHQub2xkVmVyc2lvbixyLnRyYW5zYWN0aW9uKSl9KSxlLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBpRCh0KX0pfWZ1bmN0aW9uIGFEKHQpe3JldHVybiBRTyhpbmRleGVkREIsXCJkZWxldGVEYXRhYmFzZVwiLFt0XSl9V089WGwsSE89ZmV0Y2guYmluZChzZWxmKSxHTz17RnVuY3Rpb25zOlZPfSxXTy5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgZWEoXCJmdW5jdGlvbnNcIixmdW5jdGlvbih0LGUpe3ZhciBuPWUuaW5zdGFuY2VJZGVudGlmaWVyLHI9dC5nZXRQcm92aWRlcihcImFwcFwiKS5nZXRJbW1lZGlhdGUoKSxpPXQuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIpLGU9dC5nZXRQcm92aWRlcihcImFwcC1jaGVjay1pbnRlcm5hbFwiKSx0PXQuZ2V0UHJvdmlkZXIoXCJtZXNzYWdpbmdcIik7cmV0dXJuIG5ldyBWTyhyLGksdCxlLG4sSE8pfSxcIlBVQkxJQ1wiKS5zZXRTZXJ2aWNlUHJvcHMoR08pLnNldE11bHRpcGxlSW5zdGFuY2VzKCEwKSksWGwucmVnaXN0ZXJWZXJzaW9uKFwiQGZpcmViYXNlL2Z1bmN0aW9uc1wiLFwiMC42LjhcIiksWU8oWk8sXCJfaW5kZXhcIixbXCJuYW1lXCIsXCJrZXlQYXRoXCIsXCJtdWx0aUVudHJ5XCIsXCJ1bmlxdWVcIl0pLFhPKFpPLFwiX2luZGV4XCIsSURCSW5kZXgsW1wiZ2V0XCIsXCJnZXRLZXlcIixcImdldEFsbFwiLFwiZ2V0QWxsS2V5c1wiLFwiY291bnRcIl0pLCRPKFpPLFwiX2luZGV4XCIsSURCSW5kZXgsW1wib3BlbkN1cnNvclwiLFwib3BlbktleUN1cnNvclwiXSksWU8odEQsXCJfY3Vyc29yXCIsW1wiZGlyZWN0aW9uXCIsXCJrZXlcIixcInByaW1hcnlLZXlcIixcInZhbHVlXCJdKSxYTyh0RCxcIl9jdXJzb3JcIixJREJDdXJzb3IsW1widXBkYXRlXCIsXCJkZWxldGVcIl0pLFtcImFkdmFuY2VcIixcImNvbnRpbnVlXCIsXCJjb250aW51ZVByaW1hcnlLZXlcIl0uZm9yRWFjaChmdW5jdGlvbihuKXtuIGluIElEQkN1cnNvci5wcm90b3R5cGUmJih0RC5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzO3JldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2N1cnNvcltuXS5hcHBseShlLl9jdXJzb3IsdCksek8oZS5fcmVxdWVzdCkudGhlbihmdW5jdGlvbih0KXtpZih0KXJldHVybiBuZXcgdEQodCxlLl9yZXF1ZXN0KX0pfSl9KX0pLGVELnByb3RvdHlwZS5jcmVhdGVJbmRleD1mdW5jdGlvbigpe3JldHVybiBuZXcgWk8odGhpcy5fc3RvcmUuY3JlYXRlSW5kZXguYXBwbHkodGhpcy5fc3RvcmUsYXJndW1lbnRzKSl9LGVELnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbigpe3JldHVybiBuZXcgWk8odGhpcy5fc3RvcmUuaW5kZXguYXBwbHkodGhpcy5fc3RvcmUsYXJndW1lbnRzKSl9LFlPKGVELFwiX3N0b3JlXCIsW1wibmFtZVwiLFwia2V5UGF0aFwiLFwiaW5kZXhOYW1lc1wiLFwiYXV0b0luY3JlbWVudFwiXSksWE8oZUQsXCJfc3RvcmVcIixJREJPYmplY3RTdG9yZSxbXCJwdXRcIixcImFkZFwiLFwiZGVsZXRlXCIsXCJjbGVhclwiLFwiZ2V0XCIsXCJnZXRBbGxcIixcImdldEtleVwiLFwiZ2V0QWxsS2V5c1wiLFwiY291bnRcIl0pLCRPKGVELFwiX3N0b3JlXCIsSURCT2JqZWN0U3RvcmUsW1wib3BlbkN1cnNvclwiLFwib3BlbktleUN1cnNvclwiXSksSk8oZUQsXCJfc3RvcmVcIixJREJPYmplY3RTdG9yZSxbXCJkZWxldGVJbmRleFwiXSksbkQucHJvdG90eXBlLm9iamVjdFN0b3JlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlRCh0aGlzLl90eC5vYmplY3RTdG9yZS5hcHBseSh0aGlzLl90eCxhcmd1bWVudHMpKX0sWU8obkQsXCJfdHhcIixbXCJvYmplY3RTdG9yZU5hbWVzXCIsXCJtb2RlXCJdKSxKTyhuRCxcIl90eFwiLElEQlRyYW5zYWN0aW9uLFtcImFib3J0XCJdKSxyRC5wcm90b3R5cGUuY3JlYXRlT2JqZWN0U3RvcmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGVEKHRoaXMuX2RiLmNyZWF0ZU9iamVjdFN0b3JlLmFwcGx5KHRoaXMuX2RiLGFyZ3VtZW50cykpfSxZTyhyRCxcIl9kYlwiLFtcIm5hbWVcIixcInZlcnNpb25cIixcIm9iamVjdFN0b3JlTmFtZXNcIl0pLEpPKHJELFwiX2RiXCIsSURCRGF0YWJhc2UsW1wiZGVsZXRlT2JqZWN0U3RvcmVcIixcImNsb3NlXCJdKSxpRC5wcm90b3R5cGUudHJhbnNhY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG5EKHRoaXMuX2RiLnRyYW5zYWN0aW9uLmFwcGx5KHRoaXMuX2RiLGFyZ3VtZW50cykpfSxZTyhpRCxcIl9kYlwiLFtcIm5hbWVcIixcInZlcnNpb25cIixcIm9iamVjdFN0b3JlTmFtZXNcIl0pLEpPKGlELFwiX2RiXCIsSURCRGF0YWJhc2UsW1wiY2xvc2VcIl0pLFtcIm9wZW5DdXJzb3JcIixcIm9wZW5LZXlDdXJzb3JcIl0uZm9yRWFjaChmdW5jdGlvbihpKXtbZUQsWk9dLmZvckVhY2goZnVuY3Rpb24odCl7aSBpbiB0LnByb3RvdHlwZSYmKHQucHJvdG90eXBlW2kucmVwbGFjZShcIm9wZW5cIixcIml0ZXJhdGVcIildPWZ1bmN0aW9uKCl7dmFyIHQ9KG49YXJndW1lbnRzLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG4pKSxlPXRbdC5sZW5ndGgtMV0sbj10aGlzLl9zdG9yZXx8dGhpcy5faW5kZXgscj1uW2ldLmFwcGx5KG4sdC5zbGljZSgwLC0xKSk7ci5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXtlKHIucmVzdWx0KX19KX0pfSksW1pPLGVEXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QucHJvdG90eXBlLmdldEFsbHx8KHQucHJvdG90eXBlLmdldEFsbD1mdW5jdGlvbih0LG4pe3ZhciByPXRoaXMsaT1bXTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7ci5pdGVyYXRlQ3Vyc29yKHQsZnVuY3Rpb24odCl7dD8oaS5wdXNoKHQudmFsdWUpLHZvaWQgMD09PW58fGkubGVuZ3RoIT1uP3QuY29udGludWUoKTplKGkpKTplKGkpfSl9KX0pfSk7dmFyIHNEPTFlNCx1RD1cInc6MC40LjI2XCIsY0Q9XCJGSVNfdjJcIixoRD1cImh0dHBzOi8vZmlyZWJhc2VpbnN0YWxsYXRpb25zLmdvb2dsZWFwaXMuY29tL3YxXCIsbEQ9MzZlNSxHPSgoU249e30pW1wibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiXT0nTWlzc2luZyBBcHAgY29uZmlndXJhdGlvbiB2YWx1ZTogXCJ7JHZhbHVlTmFtZX1cIicsU25bXCJub3QtcmVnaXN0ZXJlZFwiXT1cIkZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyBub3QgcmVnaXN0ZXJlZC5cIixTbltcImluc3RhbGxhdGlvbi1ub3QtZm91bmRcIl09XCJGaXJlYmFzZSBJbnN0YWxsYXRpb24gbm90IGZvdW5kLlwiLFNuW1wicmVxdWVzdC1mYWlsZWRcIl09J3skcmVxdWVzdE5hbWV9IHJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgXCJ7JHNlcnZlckNvZGV9IHskc2VydmVyU3RhdHVzfTogeyRzZXJ2ZXJNZXNzYWdlfVwiJyxTbltcImFwcC1vZmZsaW5lXCJdPVwiQ291bGQgbm90IHByb2Nlc3MgcmVxdWVzdC4gQXBwbGljYXRpb24gb2ZmbGluZS5cIixTbltcImRlbGV0ZS1wZW5kaW5nLXJlZ2lzdHJhdGlvblwiXT1cIkNhbid0IGRlbGV0ZSBpbnN0YWxsYXRpb24gd2hpbGUgdGhlcmUgaXMgYSBwZW5kaW5nIHJlZ2lzdHJhdGlvbiByZXF1ZXN0LlwiLFNuKSxmRD1uZXcga28oXCJpbnN0YWxsYXRpb25zXCIsXCJJbnN0YWxsYXRpb25zXCIsRyk7ZnVuY3Rpb24gcEQodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBTbyYmdC5jb2RlLmluY2x1ZGVzKFwicmVxdWVzdC1mYWlsZWRcIil9ZnVuY3Rpb24gZEQodCl7dD10LnByb2plY3RJZDtyZXR1cm4gaEQrXCIvcHJvamVjdHMvXCIrdCtcIi9pbnN0YWxsYXRpb25zXCJ9ZnVuY3Rpb24gdkQodCl7cmV0dXJue3Rva2VuOnQudG9rZW4scmVxdWVzdFN0YXR1czoyLGV4cGlyZXNJbjoodD10LmV4cGlyZXNJbixOdW1iZXIodC5yZXBsYWNlKFwic1wiLFwiMDAwXCIpKSksY3JlYXRpb25UaW1lOkRhdGUubm93KCl9fWZ1bmN0aW9uIGdEKG4scil7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsci5qc29uKCldO2Nhc2UgMTpyZXR1cm4gZT10LnNlbnQoKSxlPWUuZXJyb3IsWzIsZkQuY3JlYXRlKFwicmVxdWVzdC1mYWlsZWRcIix7cmVxdWVzdE5hbWU6bixzZXJ2ZXJDb2RlOmUuY29kZSxzZXJ2ZXJNZXNzYWdlOmUubWVzc2FnZSxzZXJ2ZXJTdGF0dXM6ZS5zdGF0dXN9KV19fSl9KX1mdW5jdGlvbiB5RCh0KXt0PXQuYXBpS2V5O3JldHVybiBuZXcgSGVhZGVycyh7XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIixBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCIsXCJ4LWdvb2ctYXBpLWtleVwiOnR9KX1mdW5jdGlvbiBtRCh0LGUpe2U9ZS5yZWZyZXNoVG9rZW4sdD15RCh0KTtyZXR1cm4gdC5hcHBlbmQoXCJBdXRob3JpemF0aW9uXCIsY0QrXCIgXCIrZSksdH1mdW5jdGlvbiBiRChuKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxuKCldO2Nhc2UgMTpyZXR1cm4gNTAwPD0oZT10LnNlbnQoKSkuc3RhdHVzJiZlLnN0YXR1czw2MDA/WzIsbigpXTpbMixlXX19KX0pfWZ1bmN0aW9uIF9EKGUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXtzZXRUaW1lb3V0KHQsZSl9KX12YXIgd0Q9L15bY2RlZl1bXFx3LV17MjF9JC8sSUQ9XCJcIjtmdW5jdGlvbiBURCgpe3RyeXt2YXIgdD1uZXcgVWludDhBcnJheSgxNyk7KHNlbGYuY3J5cHRvfHxzZWxmLm1zQ3J5cHRvKS5nZXRSYW5kb21WYWx1ZXModCksdFswXT0xMTIrdFswXSUxNjt0PWZ1bmN0aW9uKHQpe3JldHVybiBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLG5vKFtdLGVvKHQpKSkpLnJlcGxhY2UoL1xcKy9nLFwiLVwiKS5yZXBsYWNlKC9cXC8vZyxcIl9cIil9KHQpLnN1YnN0cigwLDIyKTtyZXR1cm4gd0QudGVzdCh0KT90OklEfWNhdGNoKHQpe3JldHVybiBJRH19ZnVuY3Rpb24gRUQodCl7cmV0dXJuIHQuYXBwTmFtZStcIiFcIit0LmFwcElkfXZhciBTRD1uZXcgTWFwO2Z1bmN0aW9uIENEKHQsZSl7dD1FRCh0KTtrRCh0LGUpLGZ1bmN0aW9uKHQsZSl7dmFyIG49QUQoKTtuJiZuLnBvc3RNZXNzYWdlKHtrZXk6dCxmaWQ6ZX0pO1JEKCl9KHQsZSl9ZnVuY3Rpb24ga0QodCxlKXt2YXIgbixyLGk9U0QuZ2V0KHQpO2lmKGkpdHJ5e2Zvcih2YXIgbz10byhpKSxhPW8ubmV4dCgpOyFhLmRvbmU7YT1vLm5leHQoKSkoMCxhLnZhbHVlKShlKX1jYXRjaCh0KXtuPXtlcnJvcjp0fX1maW5hbGx5e3RyeXthJiYhYS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19fXZhciBORD1udWxsO2Z1bmN0aW9uIEFEKCl7cmV0dXJuIU5EJiZcIkJyb2FkY2FzdENoYW5uZWxcImluIHNlbGYmJigoTkQ9bmV3IEJyb2FkY2FzdENoYW5uZWwoXCJbRmlyZWJhc2VdIEZJRCBDaGFuZ2VcIikpLm9ubWVzc2FnZT1mdW5jdGlvbih0KXtrRCh0LmRhdGEua2V5LHQuZGF0YS5maWQpfSksTkR9ZnVuY3Rpb24gUkQoKXswPT09U0Quc2l6ZSYmTkQmJihORC5jbG9zZSgpLE5EPW51bGwpfXZhciBQRCxPRD1cImZpcmViYXNlLWluc3RhbGxhdGlvbnMtZGF0YWJhc2VcIixERD0xLHhEPVwiZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1zdG9yZVwiLExEPW51bGw7ZnVuY3Rpb24gTUQoKXtyZXR1cm4gTEQ9TER8fG9EKE9ELERELGZ1bmN0aW9uKHQpezA9PT10Lm9sZFZlcnNpb24mJnQuY3JlYXRlT2JqZWN0U3RvcmUoeEQpfSl9ZnVuY3Rpb24gRkQobyxhKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyLGk7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1FRChvKSxbNCxNRCgpXTtjYXNlIDE6cmV0dXJuIHI9dC5zZW50KCksbj1yLnRyYW5zYWN0aW9uKHhELFwicmVhZHdyaXRlXCIpLFs0LChyPW4ub2JqZWN0U3RvcmUoeEQpKS5nZXQoZSldO2Nhc2UgMjpyZXR1cm4gaT10LnNlbnQoKSxbNCxyLnB1dChhLGUpXTtjYXNlIDM6cmV0dXJuIHQuc2VudCgpLFs0LG4uY29tcGxldGVdO2Nhc2UgNDpyZXR1cm4gdC5zZW50KCksaSYmaS5maWQ9PT1hLmZpZHx8Q0QobyxhLmZpZCksWzIsYV19fSl9KX1mdW5jdGlvbiBVRChyKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPUVEKHIpLFs0LE1EKCldO2Nhc2UgMTpyZXR1cm4gbj10LnNlbnQoKSxbNCwobj1uLnRyYW5zYWN0aW9uKHhELFwicmVhZHdyaXRlXCIpKS5vYmplY3RTdG9yZSh4RCkuZGVsZXRlKGUpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFs0LG4uY29tcGxldGVdO2Nhc2UgMzpyZXR1cm4gdC5zZW50KCksWzJdfX0pfSl9ZnVuY3Rpb24gakQoYSxzKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyLGksbztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPUVEKGEpLFs0LE1EKCldO2Nhc2UgMTpyZXR1cm4gcj10LnNlbnQoKSxuPXIudHJhbnNhY3Rpb24oeEQsXCJyZWFkd3JpdGVcIiksWzQsKHI9bi5vYmplY3RTdG9yZSh4RCkpLmdldChlKV07Y2FzZSAyOnJldHVybiBpPXQuc2VudCgpLHZvaWQgMCE9PShvPXMoaSkpP1szLDRdOls0LHIuZGVsZXRlKGUpXTtjYXNlIDM6cmV0dXJuIHQuc2VudCgpLFszLDZdO2Nhc2UgNDpyZXR1cm5bNCxyLnB1dChvLGUpXTtjYXNlIDU6dC5zZW50KCksdC5sYWJlbD02O2Nhc2UgNjpyZXR1cm5bNCxuLmNvbXBsZXRlXTtjYXNlIDc6cmV0dXJuIHQuc2VudCgpLCFvfHxpJiZpLmZpZD09PW8uZmlkfHxDRChhLG8uZmlkKSxbMixvXX19KX0pfWZ1bmN0aW9uIHFEKGkpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxqRChpLGZ1bmN0aW9uKHQpe3Q9QkQodHx8e2ZpZDpURCgpLHJlZ2lzdHJhdGlvblN0YXR1czowfSksdD1mdW5jdGlvbih0LGUpe3tpZigwIT09ZS5yZWdpc3RyYXRpb25TdGF0dXMpcmV0dXJuIDE9PT1lLnJlZ2lzdHJhdGlvblN0YXR1cz97aW5zdGFsbGF0aW9uRW50cnk6ZSxyZWdpc3RyYXRpb25Qcm9taXNlOmZ1bmN0aW9uKGkpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxWRChpKV07Y2FzZSAxOmU9dC5zZW50KCksdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gMSE9PWUucmVnaXN0cmF0aW9uU3RhdHVzP1szLDVdOls0LF9EKDEwMCldO2Nhc2UgMzpyZXR1cm4gdC5zZW50KCksWzQsVkQoaSldO2Nhc2UgNDpyZXR1cm4gZT10LnNlbnQoKSxbMywyXTtjYXNlIDU6cmV0dXJuIDAhPT1lLnJlZ2lzdHJhdGlvblN0YXR1cz9bMyw3XTpbNCxxRChpKV07Y2FzZSA2OnJldHVybiByPXQuc2VudCgpLG49ci5pbnN0YWxsYXRpb25FbnRyeSwocj1yLnJlZ2lzdHJhdGlvblByb21pc2UpP1syLHJdOlsyLG5dO2Nhc2UgNzpyZXR1cm5bMixlXX19KX0pfSh0KX06e2luc3RhbGxhdGlvbkVudHJ5OmV9O2lmKCFuYXZpZ2F0b3Iub25MaW5lKXt2YXIgbj1Qcm9taXNlLnJlamVjdChmRC5jcmVhdGUoXCJhcHAtb2ZmbGluZVwiKSk7cmV0dXJue2luc3RhbGxhdGlvbkVudHJ5OmUscmVnaXN0cmF0aW9uUHJvbWlzZTpufX1lPXtmaWQ6ZS5maWQscmVnaXN0cmF0aW9uU3RhdHVzOjEscmVnaXN0cmF0aW9uVGltZTpEYXRlLm5vdygpfSx0PWZ1bmN0aW9uKHIsaSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdC50cnlzLnB1c2goWzAsMiwsN10pLFs0LGZ1bmN0aW9uKGEsdCl7dmFyIHM9dC5maWQ7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpLG87cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1kRChhKSxuPXlEKGEpLG89e2ZpZDpzLGF1dGhWZXJzaW9uOmNELGFwcElkOmEuYXBwSWQsc2RrVmVyc2lvbjp1RH0scj17bWV0aG9kOlwiUE9TVFwiLGhlYWRlcnM6bixib2R5OkpTT04uc3RyaW5naWZ5KG8pfSxbNCxiRChmdW5jdGlvbigpe3JldHVybiBmZXRjaChlLHIpfSldO2Nhc2UgMTpyZXR1cm4oaT10LnNlbnQoKSkub2s/WzQsaS5qc29uKCldOlszLDNdO2Nhc2UgMjpyZXR1cm4gbz10LnNlbnQoKSxbMix7ZmlkOm8uZmlkfHxzLHJlZ2lzdHJhdGlvblN0YXR1czoyLHJlZnJlc2hUb2tlbjpvLnJlZnJlc2hUb2tlbixhdXRoVG9rZW46dkQoby5hdXRoVG9rZW4pfV07Y2FzZSAzOnJldHVybls0LGdEKFwiQ3JlYXRlIEluc3RhbGxhdGlvblwiLGkpXTtjYXNlIDQ6dGhyb3cgdC5zZW50KCl9fSl9KX0ocixpKV07Y2FzZSAxOnJldHVybiBlPXQuc2VudCgpLFsyLEZEKHIsZSldO2Nhc2UgMjpyZXR1cm4gcEQobj10LnNlbnQoKSkmJjQwOT09PW4uY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlP1s0LFVEKHIpXTpbMyw0XTtjYXNlIDM6cmV0dXJuIHQuc2VudCgpLFszLDZdO2Nhc2UgNDpyZXR1cm5bNCxGRChyLHtmaWQ6aS5maWQscmVnaXN0cmF0aW9uU3RhdHVzOjB9KV07Y2FzZSA1OnQuc2VudCgpLHQubGFiZWw9NjtjYXNlIDY6dGhyb3cgbjtjYXNlIDc6cmV0dXJuWzJdfX0pfSl9KHQsZSk7cmV0dXJue2luc3RhbGxhdGlvbkVudHJ5OmUscmVnaXN0cmF0aW9uUHJvbWlzZTp0fX19KGksdCk7cmV0dXJuIGU9dC5yZWdpc3RyYXRpb25Qcm9taXNlLHQuaW5zdGFsbGF0aW9uRW50cnl9KV07Y2FzZSAxOnJldHVybihuPXQuc2VudCgpKS5maWQhPT1JRD9bMywzXToocj17fSxbNCxlXSk7Y2FzZSAyOnJldHVyblsyLChyLmluc3RhbGxhdGlvbkVudHJ5PXQuc2VudCgpLHIpXTtjYXNlIDM6cmV0dXJuWzIse2luc3RhbGxhdGlvbkVudHJ5Om4scmVnaXN0cmF0aW9uUHJvbWlzZTplfV19fSl9KX1mdW5jdGlvbiBWRCh0KXtyZXR1cm4gakQodCxmdW5jdGlvbih0KXtpZighdCl0aHJvdyBmRC5jcmVhdGUoXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIpO3JldHVybiBCRCh0KX0pfWZ1bmN0aW9uIEJEKHQpe3JldHVybiAxPT09KGU9dCkucmVnaXN0cmF0aW9uU3RhdHVzJiZlLnJlZ2lzdHJhdGlvblRpbWUrc0Q8RGF0ZS5ub3coKT97ZmlkOnQuZmlkLHJlZ2lzdHJhdGlvblN0YXR1czowfTp0O3ZhciBlfWZ1bmN0aW9uIEtEKHQsYSl7dmFyIHM9dC5hcHBDb25maWcsdT10LnBsYXRmb3JtTG9nZ2VyUHJvdmlkZXI7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpLG87cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1mdW5jdGlvbih0LGUpe2U9ZS5maWQ7cmV0dXJuIGREKHQpK1wiL1wiK2UrXCIvYXV0aFRva2VuczpnZW5lcmF0ZVwifShzLGEpLG49bUQocyxhKSwobz11LmdldEltbWVkaWF0ZSh7b3B0aW9uYWw6ITB9KSkmJm4uYXBwZW5kKFwieC1maXJlYmFzZS1jbGllbnRcIixvLmdldFBsYXRmb3JtSW5mb1N0cmluZygpKSxvPXtpbnN0YWxsYXRpb246e3Nka1ZlcnNpb246dUR9fSxyPXttZXRob2Q6XCJQT1NUXCIsaGVhZGVyczpuLGJvZHk6SlNPTi5zdHJpbmdpZnkobyl9LFs0LGJEKGZ1bmN0aW9uKCl7cmV0dXJuIGZldGNoKGUscil9KV07Y2FzZSAxOnJldHVybihpPXQuc2VudCgpKS5vaz9bNCxpLmpzb24oKV06WzMsM107Y2FzZSAyOnJldHVybiBvPXQuc2VudCgpLFsyLHZEKG8pXTtjYXNlIDM6cmV0dXJuWzQsZ0QoXCJHZW5lcmF0ZSBBdXRoIFRva2VuXCIsaSldO2Nhc2UgNDp0aHJvdyB0LnNlbnQoKX19KX0pfWZ1bmN0aW9uIFdEKGksbyl7cmV0dXJuIHZvaWQgMD09PW8mJihvPSExKSwkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgcixlLG47cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxqRChpLmFwcENvbmZpZyxmdW5jdGlvbih0KXtpZighR0QodCkpdGhyb3cgZkQuY3JlYXRlKFwibm90LXJlZ2lzdGVyZWRcIik7dmFyIGUsbj10LmF1dGhUb2tlbjtpZihvfHwyIT09KGU9bikucmVxdWVzdFN0YXR1c3x8ZnVuY3Rpb24odCl7dmFyIGU9RGF0ZS5ub3coKTtyZXR1cm4gZTx0LmNyZWF0aW9uVGltZXx8dC5jcmVhdGlvblRpbWUrdC5leHBpcmVzSW48ZStsRH0oZSkpe2lmKDE9PT1uLnJlcXVlc3RTdGF0dXMpcmV0dXJuIHI9ZnVuY3Rpb24obixyKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxIRChuLmFwcENvbmZpZyldO2Nhc2UgMTplPXQuc2VudCgpLHQubGFiZWw9MjtjYXNlIDI6cmV0dXJuIDEhPT1lLmF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzP1szLDVdOls0LF9EKDEwMCldO2Nhc2UgMzpyZXR1cm4gdC5zZW50KCksWzQsSEQobi5hcHBDb25maWcpXTtjYXNlIDQ6cmV0dXJuIGU9dC5zZW50KCksWzMsMl07Y2FzZSA1OnJldHVybiAwPT09KGU9ZS5hdXRoVG9rZW4pLnJlcXVlc3RTdGF0dXM/WzIsV0QobixyKV06WzIsZV19fSl9KX0oaSxvKSx0O2lmKCFuYXZpZ2F0b3Iub25MaW5lKXRocm93IGZELmNyZWF0ZShcImFwcC1vZmZsaW5lXCIpO249KGU9dCxuPXtyZXF1ZXN0U3RhdHVzOjEscmVxdWVzdFRpbWU6RGF0ZS5ub3coKX0sSmkoSmkoe30sZSkse2F1dGhUb2tlbjpufSkpO3JldHVybiByPWZ1bmN0aW9uKGksbyl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0LnRyeXMucHVzaChbMCwzLCw4XSksWzQsS0QoaSxvKV07Y2FzZSAxOnJldHVybiBlPXQuc2VudCgpLHI9SmkoSmkoe30sbykse2F1dGhUb2tlbjplfSksWzQsRkQoaS5hcHBDb25maWcscildO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksWzIsZV07Y2FzZSAzOnJldHVybiFwRChuPXQuc2VudCgpKXx8NDAxIT09bi5jdXN0b21EYXRhLnNlcnZlckNvZGUmJjQwNCE9PW4uY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlP1szLDVdOls0LFVEKGkuYXBwQ29uZmlnKV07Y2FzZSA0OnJldHVybiB0LnNlbnQoKSxbMyw3XTtjYXNlIDU6cmV0dXJuIHI9SmkoSmkoe30sbykse2F1dGhUb2tlbjp7cmVxdWVzdFN0YXR1czowfX0pLFs0LEZEKGkuYXBwQ29uZmlnLHIpXTtjYXNlIDY6dC5zZW50KCksdC5sYWJlbD03O2Nhc2UgNzp0aHJvdyBuO2Nhc2UgODpyZXR1cm5bMl19fSl9KX0oaSxuKSxufXJldHVybiB0fSldO2Nhc2UgMTpyZXR1cm4gZT10LnNlbnQoKSxyP1s0LHJdOlszLDNdO2Nhc2UgMjpyZXR1cm4gbj10LnNlbnQoKSxbMyw0XTtjYXNlIDM6bj1lLmF1dGhUb2tlbix0LmxhYmVsPTQ7Y2FzZSA0OnJldHVyblsyLG5dfX0pfSl9ZnVuY3Rpb24gSEQodCl7cmV0dXJuIGpEKHQsZnVuY3Rpb24odCl7aWYoIUdEKHQpKXRocm93IGZELmNyZWF0ZShcIm5vdC1yZWdpc3RlcmVkXCIpO3ZhciBlPXQuYXV0aFRva2VuO3JldHVybiAxPT09KGU9ZSkucmVxdWVzdFN0YXR1cyYmZS5yZXF1ZXN0VGltZStzRDxEYXRlLm5vdygpP0ppKEppKHt9LHQpLHthdXRoVG9rZW46e3JlcXVlc3RTdGF0dXM6MH19KTp0fSl9ZnVuY3Rpb24gR0QodCl7cmV0dXJuIHZvaWQgMCE9PXQmJjI9PT10LnJlZ2lzdHJhdGlvblN0YXR1c31mdW5jdGlvbiB6RChlLG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj0hMSksJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxmdW5jdGlvbihuKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxxRChuKV07Y2FzZSAxOnJldHVybihlPXQuc2VudCgpLnJlZ2lzdHJhdGlvblByb21pc2UpP1s0LGVdOlszLDNdO2Nhc2UgMjp0LnNlbnQoKSx0LmxhYmVsPTM7Y2FzZSAzOnJldHVyblsyXX19KX0pfShlLmFwcENvbmZpZyldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksWzQsV0QoZSxuKV07Y2FzZSAyOnJldHVyblsyLHQuc2VudCgpLnRva2VuXX19KX0pfWZ1bmN0aW9uIFFEKGksbyl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPWZ1bmN0aW9uKHQsZSl7ZT1lLmZpZDtyZXR1cm4gZEQodCkrXCIvXCIrZX0oaSxvKSxyPW1EKGksbyksbj17bWV0aG9kOlwiREVMRVRFXCIsaGVhZGVyczpyfSxbNCxiRChmdW5jdGlvbigpe3JldHVybiBmZXRjaChlLG4pfSldO2Nhc2UgMTpyZXR1cm4ocj10LnNlbnQoKSkub2s/WzMsM106WzQsZ0QoXCJEZWxldGUgSW5zdGFsbGF0aW9uXCIscildO2Nhc2UgMjp0aHJvdyB0LnNlbnQoKTtjYXNlIDM6cmV0dXJuWzJdfX0pfSl9ZnVuY3Rpb24gWUQodCxyKXt2YXIgaT10LmFwcENvbmZpZztyZXR1cm4gZnVuY3Rpb24odCxlKXtBRCgpO3ZhciBuPUVEKHQpOyh0PVNELmdldChuKSl8fCh0PW5ldyBTZXQsU0Quc2V0KG4sdCkpLHQuYWRkKGUpfShpLHIpLGZ1bmN0aW9uKCl7dmFyIHQsZSxuO2U9cixuPUVEKHQ9aSksKHQ9U0QuZ2V0KG4pKSYmKHQuZGVsZXRlKGUpLDA9PT10LnNpemUmJlNELmRlbGV0ZShuKSxSRCgpKX19ZnVuY3Rpb24gWEQodCl7cmV0dXJuIGZELmNyZWF0ZShcIm1pc3NpbmctYXBwLWNvbmZpZy12YWx1ZXNcIix7dmFsdWVOYW1lOnR9KX0oUEQ9WGwpLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBlYShcImluc3RhbGxhdGlvbnNcIixmdW5jdGlvbih0KXt2YXIgZT10LmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLG49e2FwcENvbmZpZzpmdW5jdGlvbih0KXt2YXIgZSxuO2lmKCF0fHwhdC5vcHRpb25zKXRocm93IFhEKFwiQXBwIENvbmZpZ3VyYXRpb25cIik7aWYoIXQubmFtZSl0aHJvdyBYRChcIkFwcCBOYW1lXCIpO3RyeXtmb3IodmFyIHI9dG8oW1wicHJvamVjdElkXCIsXCJhcGlLZXlcIixcImFwcElkXCJdKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSl7dmFyIG89aS52YWx1ZTtpZighdC5vcHRpb25zW29dKXRocm93IFhEKG8pfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYobj1yLnJldHVybikmJm4uY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19cmV0dXJue2FwcE5hbWU6dC5uYW1lLHByb2plY3RJZDp0Lm9wdGlvbnMucHJvamVjdElkLGFwaUtleTp0Lm9wdGlvbnMuYXBpS2V5LGFwcElkOnQub3B0aW9ucy5hcHBJZH19KGUpLHBsYXRmb3JtTG9nZ2VyUHJvdmlkZXI6dC5nZXRQcm92aWRlcihcInBsYXRmb3JtLWxvZ2dlclwiKX07cmV0dXJue2FwcDplLGdldElkOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQscUQoci5hcHBDb25maWcpXTtjYXNlIDE6cmV0dXJuIGU9dC5zZW50KCksbj1lLmluc3RhbGxhdGlvbkVudHJ5LChlLnJlZ2lzdHJhdGlvblByb21pc2V8fFdEKHIpKS5jYXRjaChjb25zb2xlLmVycm9yKSxbMixuLmZpZF19fSl9KX0obil9LGdldFRva2VuOmZ1bmN0aW9uKHQpe3JldHVybiB6RChuLHQpfSxkZWxldGU6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxqRChlPXIuYXBwQ29uZmlnLGZ1bmN0aW9uKHQpe2lmKCF0fHwwIT09dC5yZWdpc3RyYXRpb25TdGF0dXMpcmV0dXJuIHR9KV07Y2FzZSAxOmlmKCEobj10LnNlbnQoKSkpcmV0dXJuWzMsNl07aWYoMSE9PW4ucmVnaXN0cmF0aW9uU3RhdHVzKXJldHVyblszLDJdO3Rocm93IGZELmNyZWF0ZShcImRlbGV0ZS1wZW5kaW5nLXJlZ2lzdHJhdGlvblwiKTtjYXNlIDI6aWYoMiE9PW4ucmVnaXN0cmF0aW9uU3RhdHVzKXJldHVyblszLDZdO2lmKG5hdmlnYXRvci5vbkxpbmUpcmV0dXJuWzMsM107dGhyb3cgZkQuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIik7Y2FzZSAzOnJldHVybls0LFFEKGUsbildO2Nhc2UgNDpyZXR1cm4gdC5zZW50KCksWzQsVUQoZSldO2Nhc2UgNTp0LnNlbnQoKSx0LmxhYmVsPTY7Y2FzZSA2OnJldHVyblsyXX19KX0pfShuKX0sb25JZENoYW5nZTpmdW5jdGlvbih0KXtyZXR1cm4gWUQobix0KX19fSxcIlBVQkxJQ1wiKSksUEQucmVnaXN0ZXJWZXJzaW9uKFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIixcIjAuNC4yNlwiKTt2YXIgSkQsRz0oKFNuPXt9KVtcIm1pc3NpbmctYXBwLWNvbmZpZy12YWx1ZXNcIl09J01pc3NpbmcgQXBwIGNvbmZpZ3VyYXRpb24gdmFsdWU6IFwieyR2YWx1ZU5hbWV9XCInLFNuW1wib25seS1hdmFpbGFibGUtaW4td2luZG93XCJdPVwiVGhpcyBtZXRob2QgaXMgYXZhaWxhYmxlIGluIGEgV2luZG93IGNvbnRleHQuXCIsU25bXCJvbmx5LWF2YWlsYWJsZS1pbi1zd1wiXT1cIlRoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBpbiBhIHNlcnZpY2Ugd29ya2VyIGNvbnRleHQuXCIsU25bXCJwZXJtaXNzaW9uLWRlZmF1bHRcIl09XCJUaGUgbm90aWZpY2F0aW9uIHBlcm1pc3Npb24gd2FzIG5vdCBncmFudGVkIGFuZCBkaXNtaXNzZWQgaW5zdGVhZC5cIixTbltcInBlcm1pc3Npb24tYmxvY2tlZFwiXT1cIlRoZSBub3RpZmljYXRpb24gcGVybWlzc2lvbiB3YXMgbm90IGdyYW50ZWQgYW5kIGJsb2NrZWQgaW5zdGVhZC5cIixTbltcInVuc3VwcG9ydGVkLWJyb3dzZXJcIl09XCJUaGlzIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSBBUEkncyByZXF1aXJlZCB0byB1c2UgdGhlIGZpcmViYXNlIFNESy5cIixTbltcImZhaWxlZC1zZXJ2aWNlLXdvcmtlci1yZWdpc3RyYXRpb25cIl09XCJXZSBhcmUgdW5hYmxlIHRvIHJlZ2lzdGVyIHRoZSBkZWZhdWx0IHNlcnZpY2Ugd29ya2VyLiB7JGJyb3dzZXJFcnJvck1lc3NhZ2V9XCIsU25bXCJ0b2tlbi1zdWJzY3JpYmUtZmFpbGVkXCJdPVwiQSBwcm9ibGVtIG9jY3VycmVkIHdoaWxlIHN1YnNjcmliaW5nIHRoZSB1c2VyIHRvIEZDTTogeyRlcnJvckluZm99XCIsU25bXCJ0b2tlbi1zdWJzY3JpYmUtbm8tdG9rZW5cIl09XCJGQ00gcmV0dXJuZWQgbm8gdG9rZW4gd2hlbiBzdWJzY3JpYmluZyB0aGUgdXNlciB0byBwdXNoLlwiLFNuW1widG9rZW4tdW5zdWJzY3JpYmUtZmFpbGVkXCJdPVwiQSBwcm9ibGVtIG9jY3VycmVkIHdoaWxlIHVuc3Vic2NyaWJpbmcgdGhlIHVzZXIgZnJvbSBGQ006IHskZXJyb3JJbmZvfVwiLFNuW1widG9rZW4tdXBkYXRlLWZhaWxlZFwiXT1cIkEgcHJvYmxlbSBvY2N1cnJlZCB3aGlsZSB1cGRhdGluZyB0aGUgdXNlciBmcm9tIEZDTTogeyRlcnJvckluZm99XCIsU25bXCJ0b2tlbi11cGRhdGUtbm8tdG9rZW5cIl09XCJGQ00gcmV0dXJuZWQgbm8gdG9rZW4gd2hlbiB1cGRhdGluZyB0aGUgdXNlciB0byBwdXNoLlwiLFNuW1widXNlLXN3LWFmdGVyLWdldC10b2tlblwiXT1cIlRoZSB1c2VTZXJ2aWNlV29ya2VyKCkgbWV0aG9kIG1heSBvbmx5IGJlIGNhbGxlZCBvbmNlIGFuZCBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBnZXRUb2tlbigpIHRvIGVuc3VyZSB5b3VyIHNlcnZpY2Ugd29ya2VyIGlzIHVzZWQuXCIsU25bXCJpbnZhbGlkLXN3LXJlZ2lzdHJhdGlvblwiXT1cIlRoZSBpbnB1dCB0byB1c2VTZXJ2aWNlV29ya2VyKCkgbXVzdCBiZSBhIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24uXCIsU25bXCJpbnZhbGlkLWJnLWhhbmRsZXJcIl09XCJUaGUgaW5wdXQgdG8gc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyKCkgbXVzdCBiZSBhIGZ1bmN0aW9uLlwiLFNuW1wiaW52YWxpZC12YXBpZC1rZXlcIl09XCJUaGUgcHVibGljIFZBUElEIGtleSBtdXN0IGJlIGEgc3RyaW5nLlwiLFNuW1widXNlLXZhcGlkLWtleS1hZnRlci1nZXQtdG9rZW5cIl09XCJUaGUgdXNlUHVibGljVmFwaWRLZXkoKSBtZXRob2QgbWF5IG9ubHkgYmUgY2FsbGVkIG9uY2UgYW5kIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGdldFRva2VuKCkgdG8gZW5zdXJlIHlvdXIgVkFQSUQga2V5IGlzIHVzZWQuXCIsU24pLCREPW5ldyBrbyhcIm1lc3NhZ2luZ1wiLFwiTWVzc2FnaW5nXCIsRyksWkQ9XCJCRE9VOTktaDY3SGNBNkplRlhIYlNOTXU3ZTJ5Tk51M1J6b01qOFRNNFc4OGpJVGZxN1ptUHZJTTFJdi00X2wyTHhRY1l3aHFieTJ4R3BXd3pqZkFuRzRcIix0eD1cImh0dHBzOi8vZmNtcmVnaXN0cmF0aW9ucy5nb29nbGVhcGlzLmNvbS92MVwiLGV4PVwiRkNNX01TR1wiLG54PVwiZ29vZ2xlLmMuYS5jX2lkXCI7ZnVuY3Rpb24gcngodCl7dD1uZXcgVWludDhBcnJheSh0KTtyZXR1cm4gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxubyhbXSxlbyh0KSkpKS5yZXBsYWNlKC89L2csXCJcIikucmVwbGFjZSgvXFwrL2csXCItXCIpLnJlcGxhY2UoL1xcLy9nLFwiX1wiKX0oU249SkQ9SkR8fHt9KS5QVVNIX1JFQ0VJVkVEPVwicHVzaC1yZWNlaXZlZFwiLFNuLk5PVElGSUNBVElPTl9DTElDS0VEPVwibm90aWZpY2F0aW9uLWNsaWNrZWRcIjt2YXIgaXg9XCJmY21fdG9rZW5fZGV0YWlsc19kYlwiLG94PTUsYXg9XCJmY21fdG9rZW5fb2JqZWN0X1N0b3JlXCI7ZnVuY3Rpb24gc3goYSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG8sbj10aGlzO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuXCJkYXRhYmFzZXNcImluIGluZGV4ZWREQj9bNCxpbmRleGVkREIuZGF0YWJhc2VzKCldOlszLDJdO2Nhc2UgMTppZihlPXQuc2VudCgpLCFlLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5uYW1lfSkuaW5jbHVkZXMoaXgpKXJldHVyblsyLG51bGxdO3QubGFiZWw9MjtjYXNlIDI6cmV0dXJuIG89bnVsbCxbNCxvRChpeCxveCxmdW5jdGlvbihpKXtyZXR1cm4gJGkobix2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGkub2xkVmVyc2lvbjwyP1syXTppLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoYXgpP1s0LChyPWkudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoYXgpKS5pbmRleChcImZjbVNlbmRlcklkXCIpLmdldChhKV06WzJdO2Nhc2UgMTpyZXR1cm4gZT10LnNlbnQoKSxbNCxyLmNsZWFyKCldO2Nhc2UgMjppZih0LnNlbnQoKSwhZSlyZXR1cm5bMl07aWYoMj09PWkub2xkVmVyc2lvbil7aWYoIShuPWUpLmF1dGh8fCFuLnAyNTZkaHx8IW4uZW5kcG9pbnQpcmV0dXJuWzJdO289e3Rva2VuOm4uZmNtVG9rZW4sY3JlYXRlVGltZTpudWxsIT09KHI9bi5jcmVhdGVUaW1lKSYmdm9pZCAwIT09cj9yOkRhdGUubm93KCksc3Vic2NyaXB0aW9uT3B0aW9uczp7YXV0aDpuLmF1dGgscDI1NmRoOm4ucDI1NmRoLGVuZHBvaW50Om4uZW5kcG9pbnQsc3dTY29wZTpuLnN3U2NvcGUsdmFwaWRLZXk6XCJzdHJpbmdcIj09dHlwZW9mIG4udmFwaWRLZXk/bi52YXBpZEtleTpyeChuLnZhcGlkS2V5KX19fWVsc2UoMz09PWkub2xkVmVyc2lvbnx8ND09PWkub2xkVmVyc2lvbikmJihvPXt0b2tlbjoobj1lKS5mY21Ub2tlbixjcmVhdGVUaW1lOm4uY3JlYXRlVGltZSxzdWJzY3JpcHRpb25PcHRpb25zOnthdXRoOnJ4KG4uYXV0aCkscDI1NmRoOnJ4KG4ucDI1NmRoKSxlbmRwb2ludDpuLmVuZHBvaW50LHN3U2NvcGU6bi5zd1Njb3BlLHZhcGlkS2V5OnJ4KG4udmFwaWRLZXkpfX0pO3JldHVyblsyXX19KX0pfSldO2Nhc2UgMzpyZXR1cm4gdC5zZW50KCkuY2xvc2UoKSxbNCxhRChpeCldO2Nhc2UgNDpyZXR1cm4gdC5zZW50KCksWzQsYUQoXCJmY21fdmFwaWRfZGV0YWlsc19kYlwiKV07Y2FzZSA1OnJldHVybiB0LnNlbnQoKSxbNCxhRChcInVuZGVmaW5lZFwiKV07Y2FzZSA2OnJldHVybiB0LnNlbnQoKSxbMixmdW5jdGlvbih0KXtpZighdHx8IXQuc3Vic2NyaXB0aW9uT3B0aW9ucylyZXR1cm4hMTt2YXIgZT10LnN1YnNjcmlwdGlvbk9wdGlvbnM7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQuY3JlYXRlVGltZSYmMDx0LmNyZWF0ZVRpbWUmJlwic3RyaW5nXCI9PXR5cGVvZiB0LnRva2VuJiYwPHQudG9rZW4ubGVuZ3RoJiZcInN0cmluZ1wiPT10eXBlb2YgZS5hdXRoJiYwPGUuYXV0aC5sZW5ndGgmJlwic3RyaW5nXCI9PXR5cGVvZiBlLnAyNTZkaCYmMDxlLnAyNTZkaC5sZW5ndGgmJlwic3RyaW5nXCI9PXR5cGVvZiBlLmVuZHBvaW50JiYwPGUuZW5kcG9pbnQubGVuZ3RoJiZcInN0cmluZ1wiPT10eXBlb2YgZS5zd1Njb3BlJiYwPGUuc3dTY29wZS5sZW5ndGgmJlwic3RyaW5nXCI9PXR5cGVvZiBlLnZhcGlkS2V5JiYwPGUudmFwaWRLZXkubGVuZ3RofShvKT9vOm51bGxdfX0pfSl9dmFyIHV4PVwiZmlyZWJhc2UtbWVzc2FnaW5nLWRhdGFiYXNlXCIsY3g9MSxoeD1cImZpcmViYXNlLW1lc3NhZ2luZy1zdG9yZVwiLGx4PW51bGw7ZnVuY3Rpb24gZngoKXtyZXR1cm4gbHg9bHh8fG9EKHV4LGN4LGZ1bmN0aW9uKHQpezA9PT10Lm9sZFZlcnNpb24mJnQuY3JlYXRlT2JqZWN0U3RvcmUoaHgpfSl9ZnVuY3Rpb24gcHgocil7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT12eChyKSxbNCxmeCgpXTtjYXNlIDE6cmV0dXJuWzQsdC5zZW50KCkudHJhbnNhY3Rpb24oaHgpLm9iamVjdFN0b3JlKGh4KS5nZXQoZSldO2Nhc2UgMjpyZXR1cm4oZT10LnNlbnQoKSk/WzIsZV06WzMsM107Y2FzZSAzOnJldHVybls0LHN4KHIuYXBwQ29uZmlnLnNlbmRlcklkKV07Y2FzZSA0OnJldHVybihuPXQuc2VudCgpKT9bNCxkeChyLG4pXTpbMyw2XTtjYXNlIDU6cmV0dXJuIHQuc2VudCgpLFsyLG5dO2Nhc2UgNjpyZXR1cm5bMl19fSl9KX1mdW5jdGlvbiBkeChyLGkpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9dngociksWzQsZngoKV07Y2FzZSAxOnJldHVybiBuPXQuc2VudCgpLFs0LChuPW4udHJhbnNhY3Rpb24oaHgsXCJyZWFkd3JpdGVcIikpLm9iamVjdFN0b3JlKGh4KS5wdXQoaSxlKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSxbNCxuLmNvbXBsZXRlXTtjYXNlIDM6cmV0dXJuIHQuc2VudCgpLFsyLGldfX0pfSl9ZnVuY3Rpb24gdngodCl7cmV0dXJuIHQuYXBwQ29uZmlnLmFwcElkfWZ1bmN0aW9uIGd4KHIsaSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxteChyKV07Y2FzZSAxOmU9dC5zZW50KCksZT17bWV0aG9kOlwiREVMRVRFXCIsaGVhZGVyczplfSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVybiB0LnRyeXMucHVzaChbMiw1LCw2XSksWzQsZmV0Y2goeXgoci5hcHBDb25maWcpK1wiL1wiK2ksZSldO2Nhc2UgMzpyZXR1cm5bNCx0LnNlbnQoKS5qc29uKCldO2Nhc2UgNDppZigoZT10LnNlbnQoKSkuZXJyb3IpdGhyb3cgbj1lLmVycm9yLm1lc3NhZ2UsJEQuY3JlYXRlKFwidG9rZW4tdW5zdWJzY3JpYmUtZmFpbGVkXCIse2Vycm9ySW5mbzpufSk7cmV0dXJuWzMsNl07Y2FzZSA1OnRocm93IG49dC5zZW50KCksJEQuY3JlYXRlKFwidG9rZW4tdW5zdWJzY3JpYmUtZmFpbGVkXCIse2Vycm9ySW5mbzpufSk7Y2FzZSA2OnJldHVyblsyXX19KX0pfWZ1bmN0aW9uIHl4KHQpe3Q9dC5wcm9qZWN0SWQ7cmV0dXJuIHR4K1wiL3Byb2plY3RzL1wiK3QrXCIvcmVnaXN0cmF0aW9uc1wifWZ1bmN0aW9uIG14KHQpe3ZhciBuPXQuYXBwQ29uZmlnLHI9dC5pbnN0YWxsYXRpb25zO3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHIuZ2V0VG9rZW4oKV07Y2FzZSAxOnJldHVybiBlPXQuc2VudCgpLFsyLG5ldyBIZWFkZXJzKHtcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwiLEFjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIixcIngtZ29vZy1hcGkta2V5XCI6bi5hcGlLZXksXCJ4LWdvb2ctZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1hdXRoXCI6XCJGSVMgXCIrZX0pXX19KX0pfWZ1bmN0aW9uIGJ4KHQpe3ZhciBlPXQucDI1NmRoLG49dC5hdXRoLHI9dC5lbmRwb2ludCx0PXQudmFwaWRLZXksZT17d2ViOntlbmRwb2ludDpyLGF1dGg6bixwMjU2ZGg6ZX19O3JldHVybiB0IT09WkQmJihlLndlYi5hcHBsaWNhdGlvblB1YktleT10KSxlfWZ1bmN0aW9uIF94KGMsaCxsKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGEscyx1O3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6aWYoXCJncmFudGVkXCIhPT1Ob3RpZmljYXRpb24ucGVybWlzc2lvbil0aHJvdyAkRC5jcmVhdGUoXCJwZXJtaXNzaW9uLWJsb2NrZWRcIik7cmV0dXJuWzQsZnVuY3Rpb24obixyKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxuLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpXTtjYXNlIDE6cmV0dXJuKGU9dC5zZW50KCkpP1syLGVdOlsyLG4ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKHt1c2VyVmlzaWJsZU9ubHk6ITAsYXBwbGljYXRpb25TZXJ2ZXJLZXk6ZnVuY3Rpb24odCl7Zm9yKHZhciB0PSh0K1wiPVwiLnJlcGVhdCgoNC10Lmxlbmd0aCU0KSU0KSkucmVwbGFjZSgvXFwtL2csXCIrXCIpLnJlcGxhY2UoL18vZyxcIi9cIiksZT1hdG9iKHQpLG49bmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgpLHI9MDtyPGUubGVuZ3RoOysrciluW3JdPWUuY2hhckNvZGVBdChyKTtyZXR1cm4gbn0ocil9KV19fSl9KX0oaCxsKV07Y2FzZSAxOnJldHVybiB1PXQuc2VudCgpLFs0LHB4KGMpXTtjYXNlIDI6cmV0dXJuIGE9dC5zZW50KCkscz17dmFwaWRLZXk6bCxzd1Njb3BlOmguc2NvcGUsZW5kcG9pbnQ6dS5lbmRwb2ludCxhdXRoOnJ4KHUuZ2V0S2V5KFwiYXV0aFwiKSkscDI1NmRoOnJ4KHUuZ2V0S2V5KFwicDI1NmRoXCIpKX0sYT9bMywzXTpbMixJeChjLHMpXTtjYXNlIDM6aWYoZT1hLnN1YnNjcmlwdGlvbk9wdGlvbnMscj0obj1zKS52YXBpZEtleT09PWUudmFwaWRLZXksaT1uLmVuZHBvaW50PT09ZS5lbmRwb2ludCxvPW4uYXV0aD09PWUuYXV0aCxlPW4ucDI1NmRoPT09ZS5wMjU2ZGgsciYmaSYmbyYmZSlyZXR1cm5bMyw4XTt0LmxhYmVsPTQ7Y2FzZSA0OnJldHVybiB0LnRyeXMucHVzaChbNCw2LCw3XSksWzQsZ3goYyxhLnRva2VuKV07Y2FzZSA1OnJldHVybiB0LnNlbnQoKSxbMyw3XTtjYXNlIDY6cmV0dXJuIHU9dC5zZW50KCksY29uc29sZS53YXJuKHUpLFszLDddO2Nhc2UgNzpyZXR1cm5bMixJeChjLHMpXTtjYXNlIDg6cmV0dXJuIERhdGUubm93KCk+PWEuY3JlYXRlVGltZSs2MDQ4ZTU/WzIsZnVuY3Rpb24oaSxvLGEpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdC50cnlzLnB1c2goWzAsMywsNV0pLFs0LGZ1bmN0aW9uKG8sYSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsbXgobyldO2Nhc2UgMTplPXQuc2VudCgpLG49YngoYS5zdWJzY3JpcHRpb25PcHRpb25zKSxuPXttZXRob2Q6XCJQQVRDSFwiLGhlYWRlcnM6ZSxib2R5OkpTT04uc3RyaW5naWZ5KG4pfSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVybiB0LnRyeXMucHVzaChbMiw1LCw2XSksWzQsZmV0Y2goeXgoby5hcHBDb25maWcpK1wiL1wiK2EudG9rZW4sbildO2Nhc2UgMzpyZXR1cm5bNCx0LnNlbnQoKS5qc29uKCldO2Nhc2UgNDpyZXR1cm4gcj10LnNlbnQoKSxbMyw2XTtjYXNlIDU6dGhyb3cgaT10LnNlbnQoKSwkRC5jcmVhdGUoXCJ0b2tlbi11cGRhdGUtZmFpbGVkXCIse2Vycm9ySW5mbzppfSk7Y2FzZSA2OmlmKHIuZXJyb3IpdGhyb3cgaT1yLmVycm9yLm1lc3NhZ2UsJEQuY3JlYXRlKFwidG9rZW4tdXBkYXRlLWZhaWxlZFwiLHtlcnJvckluZm86aX0pO2lmKCFyLnRva2VuKXRocm93ICRELmNyZWF0ZShcInRva2VuLXVwZGF0ZS1uby10b2tlblwiKTtyZXR1cm5bMixyLnRva2VuXX19KX0pfShvLGkpXTtjYXNlIDE6cmV0dXJuIGU9dC5zZW50KCksbj1KaShKaSh7fSxpKSx7dG9rZW46ZSxjcmVhdGVUaW1lOkRhdGUubm93KCl9KSxbNCxkeChvLG4pXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFsyLGVdO2Nhc2UgMzpyZXR1cm4gcj10LnNlbnQoKSxbNCx3eChvLGEpXTtjYXNlIDQ6dGhyb3cgdC5zZW50KCkscjtjYXNlIDU6cmV0dXJuWzJdfX0pfSl9KHt0b2tlbjphLnRva2VuLGNyZWF0ZVRpbWU6RGF0ZS5ub3coKSxzdWJzY3JpcHRpb25PcHRpb25zOnN9LGMsaCldOlsyLGEudG9rZW5dO2Nhc2UgOTpyZXR1cm5bMl19dmFyIGUsbixyLGksb30pfSl9ZnVuY3Rpb24gd3gobixyKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxweChuKV07Y2FzZSAxOnJldHVybihlPXQuc2VudCgpKT9bNCxneChuLGUudG9rZW4pXTpbMyw0XTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFs0LGZ1bmN0aW9uKHIpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9dngociksWzQsZngoKV07Y2FzZSAxOnJldHVybiBuPXQuc2VudCgpLFs0LChuPW4udHJhbnNhY3Rpb24oaHgsXCJyZWFkd3JpdGVcIikpLm9iamVjdFN0b3JlKGh4KS5kZWxldGUoZSldO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksWzQsbi5jb21wbGV0ZV07Y2FzZSAzOnJldHVybiB0LnNlbnQoKSxbMl19fSl9KX0obildO2Nhc2UgMzp0LnNlbnQoKSx0LmxhYmVsPTQ7Y2FzZSA0OnJldHVybls0LHIucHVzaE1hbmFnZXIuZ2V0U3Vic2NyaXB0aW9uKCldO2Nhc2UgNTpyZXR1cm4oZT10LnNlbnQoKSk/WzIsZS51bnN1YnNjcmliZSgpXTpbMiwhMF19fSl9KX1mdW5jdGlvbiBJeChuLHIpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LGZ1bmN0aW9uKG8sYSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsbXgobyldO2Nhc2UgMTplPXQuc2VudCgpLG49YngoYSksbj17bWV0aG9kOlwiUE9TVFwiLGhlYWRlcnM6ZSxib2R5OkpTT04uc3RyaW5naWZ5KG4pfSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVybiB0LnRyeXMucHVzaChbMiw1LCw2XSksWzQsZmV0Y2goeXgoby5hcHBDb25maWcpLG4pXTtjYXNlIDM6cmV0dXJuWzQsdC5zZW50KCkuanNvbigpXTtjYXNlIDQ6cmV0dXJuIHI9dC5zZW50KCksWzMsNl07Y2FzZSA1OnRocm93IGk9dC5zZW50KCksJEQuY3JlYXRlKFwidG9rZW4tc3Vic2NyaWJlLWZhaWxlZFwiLHtlcnJvckluZm86aX0pO2Nhc2UgNjppZihyLmVycm9yKXRocm93IGk9ci5lcnJvci5tZXNzYWdlLCRELmNyZWF0ZShcInRva2VuLXN1YnNjcmliZS1mYWlsZWRcIix7ZXJyb3JJbmZvOml9KTtpZighci50b2tlbil0aHJvdyAkRC5jcmVhdGUoXCJ0b2tlbi1zdWJzY3JpYmUtbm8tdG9rZW5cIik7cmV0dXJuWzIsci50b2tlbl19fSl9KX0obixyKV07Y2FzZSAxOnJldHVybiBlPXQuc2VudCgpLGU9e3Rva2VuOmUsY3JlYXRlVGltZTpEYXRlLm5vdygpLHN1YnNjcmlwdGlvbk9wdGlvbnM6cn0sWzQsZHgobixlKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSxbMixlLnRva2VuXX19KX0pfWZ1bmN0aW9uIFR4KHQpe3ZhciBlPXtmcm9tOnQuZnJvbSxjb2xsYXBzZUtleTp0LmNvbGxhcHNlX2tleX07cmV0dXJuIGZ1bmN0aW9uKHQsZSl7aWYoIWUubm90aWZpY2F0aW9uKXJldHVybjt0Lm5vdGlmaWNhdGlvbj17fTt2YXIgbj1lLm5vdGlmaWNhdGlvbi50aXRsZTtuJiYodC5ub3RpZmljYXRpb24udGl0bGU9bik7bj1lLm5vdGlmaWNhdGlvbi5ib2R5O24mJih0Lm5vdGlmaWNhdGlvbi5ib2R5PW4pO2U9ZS5ub3RpZmljYXRpb24uaW1hZ2U7ZSYmKHQubm90aWZpY2F0aW9uLmltYWdlPWUpfShlLHQpLGZ1bmN0aW9uKHQsZSl7aWYoIWUuZGF0YSlyZXR1cm47dC5kYXRhPWUuZGF0YX0oZSx0KSxmdW5jdGlvbih0LGUpe2lmKCFlLmZjbU9wdGlvbnMpcmV0dXJuO3QuZmNtT3B0aW9ucz17fTt2YXIgbj1lLmZjbU9wdGlvbnMubGluaztuJiYodC5mY21PcHRpb25zLmxpbms9bik7ZT1lLmZjbU9wdGlvbnMuYW5hbHl0aWNzX2xhYmVsO2UmJih0LmZjbU9wdGlvbnMuYW5hbHl0aWNzTGFiZWw9ZSl9KGUsdCksZX1mdW5jdGlvbiBFeCh0KXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdCYmdCYmbnggaW4gdH1mdW5jdGlvbiBTeChlKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCl7c2V0VGltZW91dCh0LGUpfSl9dmFyIEN4PShPYmplY3QuZGVmaW5lUHJvcGVydHkoa3gucHJvdG90eXBlLFwiYXBwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpcmViYXNlRGVwZW5kZW5jaWVzLmFwcH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxreC5wcm90b3R5cGUuc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyPWZ1bmN0aW9uKHQpe2lmKHRoaXMuaXNPbkJhY2tncm91bmRNZXNzYWdlVXNlZD0hMSwhdHx8XCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyAkRC5jcmVhdGUoXCJpbnZhbGlkLWJnLWhhbmRsZXJcIik7dGhpcy5iZ01lc3NhZ2VIYW5kbGVyPXR9LGt4LnByb3RvdHlwZS5vbkJhY2tncm91bmRNZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuaXNPbkJhY2tncm91bmRNZXNzYWdlVXNlZD0hMCx0aGlzLmJnTWVzc2FnZUhhbmRsZXI9dCxmdW5jdGlvbigpe2UuYmdNZXNzYWdlSGFuZGxlcj1udWxsfX0sa3gucHJvdG90eXBlLmdldFRva2VuPWZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMudmFwaWRLZXk/WzMsMl06WzQscHgodGhpcy5maXJlYmFzZURlcGVuZGVuY2llcyldO2Nhc2UgMTplPXQuc2VudCgpLHRoaXMudmFwaWRLZXk9bnVsbCE9PShuPW51bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLnN1YnNjcmlwdGlvbk9wdGlvbnMpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnZhcGlkS2V5KSYmdm9pZCAwIT09bj9uOlpELHQubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzIsX3godGhpcy5maXJlYmFzZURlcGVuZGVuY2llcyxzZWxmLnJlZ2lzdHJhdGlvbix0aGlzLnZhcGlkS2V5KV19fSl9KX0sa3gucHJvdG90eXBlLmRlbGV0ZVRva2VuPWZ1bmN0aW9uKCl7cmV0dXJuIHd4KHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMsc2VsZi5yZWdpc3RyYXRpb24pfSxreC5wcm90b3R5cGUucmVxdWVzdFBlcm1pc3Npb249ZnVuY3Rpb24oKXt0aHJvdyAkRC5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIil9LGt4LnByb3RvdHlwZS51c2VQdWJsaWNWYXBpZEtleT1mdW5jdGlvbih0KXtpZihudWxsIT09dGhpcy52YXBpZEtleSl0aHJvdyAkRC5jcmVhdGUoXCJ1c2UtdmFwaWQta2V5LWFmdGVyLWdldC10b2tlblwiKTtpZihcInN0cmluZ1wiIT10eXBlb2YgdHx8MD09PXQubGVuZ3RoKXRocm93ICRELmNyZWF0ZShcImludmFsaWQtdmFwaWQta2V5XCIpO3RoaXMudmFwaWRLZXk9dH0sa3gucHJvdG90eXBlLnVzZVNlcnZpY2VXb3JrZXI9ZnVuY3Rpb24oKXt0aHJvdyAkRC5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIil9LGt4LnByb3RvdHlwZS5vbk1lc3NhZ2U9ZnVuY3Rpb24oKXt0aHJvdyAkRC5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIil9LGt4LnByb3RvdHlwZS5vblRva2VuUmVmcmVzaD1mdW5jdGlvbigpe3Rocm93ICRELmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiKX0sa3gucHJvdG90eXBlLm9uUHVzaD1mdW5jdGlvbihzKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGksbyxhO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuKGE9ZnVuY3Rpb24odCl7dmFyIGU9dC5kYXRhO2lmKCFlKXJldHVybiBudWxsO3RyeXtyZXR1cm4gZS5qc29uKCl9Y2F0Y2godCl7cmV0dXJuIG51bGx9fShzKSk/WzQsTngoKV06KGNvbnNvbGUuZGVidWcoXCJGaXJlYmFzZU1lc3NhZ2luZzogZmFpbGVkIHRvIGdldCBwYXJzZWQgTWVzc2FnZVBheWxvYWQgZnJvbSB0aGUgUHVzaEV2ZW50LiBTa2lwIGhhbmRsaW5nIHRoZSBwdXNoLlwiKSxbMl0pO2Nhc2UgMTpyZXR1cm4oaT10LnNlbnQoKSxpLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuXCJ2aXNpYmxlXCI9PT10LnZpc2liaWxpdHlTdGF0ZSYmIXQudXJsLnN0YXJ0c1dpdGgoXCJjaHJvbWUtZXh0ZW5zaW9uOi8vXCIpfSkpP1syLGZ1bmN0aW9uKHQsZSl7dmFyIG4scjtlLmlzRmlyZWJhc2VNZXNzYWdpbmc9ITAsZS5tZXNzYWdlVHlwZT1KRC5QVVNIX1JFQ0VJVkVEO3RyeXtmb3IodmFyIGk9dG8odCksbz1pLm5leHQoKTshby5kb25lO289aS5uZXh0KCkpby52YWx1ZS5wb3N0TWVzc2FnZShlKX1jYXRjaCh0KXtuPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtvJiYhby5kb25lJiYocj1pLnJldHVybikmJnIuY2FsbChpKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19fShpLGEpXToobz0hMSxhLm5vdGlmaWNhdGlvbj9bNCxmdW5jdGlvbih0KXt2YXIgZT10LmFjdGlvbnMsbj1Ob3RpZmljYXRpb24ubWF4QWN0aW9ucztlJiZuJiZlLmxlbmd0aD5uJiZjb25zb2xlLndhcm4oXCJUaGlzIGJyb3dzZXIgb25seSBzdXBwb3J0cyBcIituK1wiIGFjdGlvbnMuIFRoZSByZW1haW5pbmcgYWN0aW9ucyB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuXCIpO3JldHVybiBzZWxmLnJlZ2lzdHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKG51bGwhPT0obj10LnRpdGxlKSYmdm9pZCAwIT09bj9uOlwiXCIsdCl9KCgocj1KaSh7fSwoZT1hKS5ub3RpZmljYXRpb24pKS5kYXRhPSgobj17fSlbZXhdPWUsbikscikpXTpbMywzXSk7Y2FzZSAyOnQuc2VudCgpLG89ITAsdC5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4hMD09PW8mJiExPT09dGhpcy5pc09uQmFja2dyb3VuZE1lc3NhZ2VVc2VkP1syXToodGhpcy5iZ01lc3NhZ2VIYW5kbGVyJiYoYT1UeChhKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLmJnTWVzc2FnZUhhbmRsZXI/dGhpcy5iZ01lc3NhZ2VIYW5kbGVyKGEpOnRoaXMuYmdNZXNzYWdlSGFuZGxlci5uZXh0KGEpKSxbNCxTeCgxZTMpXSk7Y2FzZSA0OnJldHVybiB0LnNlbnQoKSxbMl19dmFyIGUsbixyfSl9KX0sa3gucHJvdG90eXBlLm9uU3ViQ2hhbmdlPWZ1bmN0aW9uKG4pe3ZhciByO3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBuLm5ld1N1YnNjcmlwdGlvbj9bMywyXTpbNCx3eCh0aGlzLmZpcmViYXNlRGVwZW5kZW5jaWVzLHNlbGYucmVnaXN0cmF0aW9uKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxbMl07Y2FzZSAyOnJldHVybls0LHB4KHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMpXTtjYXNlIDM6cmV0dXJuIGU9dC5zZW50KCksWzQsd3godGhpcy5maXJlYmFzZURlcGVuZGVuY2llcyxzZWxmLnJlZ2lzdHJhdGlvbildO2Nhc2UgNDpyZXR1cm4gdC5zZW50KCksWzQsX3godGhpcy5maXJlYmFzZURlcGVuZGVuY2llcyxzZWxmLnJlZ2lzdHJhdGlvbixudWxsIT09KHI9bnVsbD09PShyPW51bGw9PWU/dm9pZCAwOmUuc3Vic2NyaXB0aW9uT3B0aW9ucyl8fHZvaWQgMD09PXI/dm9pZCAwOnIudmFwaWRLZXkpJiZ2b2lkIDAhPT1yP3I6WkQpXTtjYXNlIDU6cmV0dXJuIHQuc2VudCgpLFsyXX19KX0pfSxreC5wcm90b3R5cGUub25Ob3RpZmljYXRpb25DbGljaz1mdW5jdGlvbihhKXt2YXIgcztyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyLGksbztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybihlPW51bGw9PT0ocz1udWxsPT09KHM9YS5ub3RpZmljYXRpb24pfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmRhdGEpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzW2V4XSk/YS5hY3Rpb24/WzJdOihhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGEubm90aWZpY2F0aW9uLmNsb3NlKCksKG49ZnVuY3Rpb24odCl7dmFyIGUsbj1udWxsIT09KGU9bnVsbD09PShlPXQuZmNtT3B0aW9ucyl8fHZvaWQgMD09PWU/dm9pZCAwOmUubGluaykmJnZvaWQgMCE9PWU/ZTpudWxsPT09KG49dC5ub3RpZmljYXRpb24pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNsaWNrX2FjdGlvbjtpZihuKXJldHVybiBuO3JldHVybiBFeCh0LmRhdGEpP3NlbGYubG9jYXRpb24ub3JpZ2luOm51bGx9KGUpKT8ocj1uZXcgVVJMKG4sc2VsZi5sb2NhdGlvbi5ocmVmKSxpPW5ldyBVUkwoc2VsZi5sb2NhdGlvbi5vcmlnaW4pLHIuaG9zdCE9PWkuaG9zdD9bMl06WzQsZnVuY3Rpb24odSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpLG8sYSxzO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsTngoKV07Y2FzZSAxOmU9dC5zZW50KCk7dHJ5e2ZvcihuPXRvKGUpLHI9bi5uZXh0KCk7IXIuZG9uZTtyPW4ubmV4dCgpKWlmKGk9ci52YWx1ZSxvPW5ldyBVUkwoaS51cmwsc2VsZi5sb2NhdGlvbi5ocmVmKSx1Lmhvc3Q9PT1vLmhvc3QpcmV0dXJuWzIsaV19Y2F0Y2godCl7YT17ZXJyb3I6dH19ZmluYWxseXt0cnl7ciYmIXIuZG9uZSYmKHM9bi5yZXR1cm4pJiZzLmNhbGwobil9ZmluYWxseXtpZihhKXRocm93IGEuZXJyb3J9fXJldHVyblsyLG51bGxdfX0pfSl9KHIpXSk6WzJdKTpbMl07Y2FzZSAxOnJldHVybihvPXQuc2VudCgpKT9bMyw0XTpbNCxzZWxmLmNsaWVudHMub3BlbldpbmRvdyhuKV07Y2FzZSAyOnJldHVybiBvPXQuc2VudCgpLFs0LFN4KDNlMyldO2Nhc2UgMzpyZXR1cm4gdC5zZW50KCksWzMsNl07Y2FzZSA0OnJldHVybls0LG8uZm9jdXMoKV07Y2FzZSA1Om89dC5zZW50KCksdC5sYWJlbD02O2Nhc2UgNjpyZXR1cm4gbz8oZS5tZXNzYWdlVHlwZT1KRC5OT1RJRklDQVRJT05fQ0xJQ0tFRCxlLmlzRmlyZWJhc2VNZXNzYWdpbmc9ITAsWzIsby5wb3N0TWVzc2FnZShlKV0pOlsyXX19KX0pfSxreCk7ZnVuY3Rpb24ga3godCl7dmFyIGU9dGhpczt0aGlzLmZpcmViYXNlRGVwZW5kZW5jaWVzPXQsdGhpcy5pc09uQmFja2dyb3VuZE1lc3NhZ2VVc2VkPW51bGwsdGhpcy52YXBpZEtleT1udWxsLHRoaXMuYmdNZXNzYWdlSGFuZGxlcj1udWxsLHNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcInB1c2hcIixmdW5jdGlvbih0KXt0LndhaXRVbnRpbChlLm9uUHVzaCh0KSl9KSxzZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJwdXNoc3Vic2NyaXB0aW9uY2hhbmdlXCIsZnVuY3Rpb24odCl7dC53YWl0VW50aWwoZS5vblN1YkNoYW5nZSh0KSl9KSxzZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJub3RpZmljYXRpb25jbGlja1wiLGZ1bmN0aW9uKHQpe3Qud2FpdFVudGlsKGUub25Ob3RpZmljYXRpb25DbGljayh0KSl9KX1mdW5jdGlvbiBOeCgpe3JldHVybiBzZWxmLmNsaWVudHMubWF0Y2hBbGwoe3R5cGU6XCJ3aW5kb3dcIixpbmNsdWRlVW5jb250cm9sbGVkOiEwfSl9dmFyIEF4PShPYmplY3QuZGVmaW5lUHJvcGVydHkoUngucHJvdG90eXBlLFwiYXBwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpcmViYXNlRGVwZW5kZW5jaWVzLmFwcH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxSeC5wcm90b3R5cGUubWVzc2FnZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oaSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4obj1pLmRhdGEpLmlzRmlyZWJhc2VNZXNzYWdpbmc/KHRoaXMub25NZXNzYWdlQ2FsbGJhY2smJm4ubWVzc2FnZVR5cGU9PT1KRC5QVVNIX1JFQ0VJVkVEJiYoXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vbk1lc3NhZ2VDYWxsYmFjaz90aGlzLm9uTWVzc2FnZUNhbGxiYWNrKChkZWxldGUoZT1PYmplY3QuYXNzaWduKHt9LG4pKS5tZXNzYWdlVHlwZSxkZWxldGUgZS5pc0ZpcmViYXNlTWVzc2FnaW5nLGUpKTp0aGlzLm9uTWVzc2FnZUNhbGxiYWNrLm5leHQoT2JqZWN0LmFzc2lnbih7fSxuKSkpLEV4KHI9bi5kYXRhKSYmXCIxXCI9PT1yW1wiZ29vZ2xlLmMuYS5lXCJdP1s0LHRoaXMubG9nRXZlbnQobi5tZXNzYWdlVHlwZSxyKV06WzMsMl0pOlsyXTtjYXNlIDE6dC5zZW50KCksdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm5bMl19dmFyIGV9KX0pfSxSeC5wcm90b3R5cGUuZ2V0VmFwaWRLZXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YXBpZEtleX0sUngucHJvdG90eXBlLmdldFN3UmVnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3dSZWdpc3RyYXRpb259LFJ4LnByb3RvdHlwZS5nZXRUb2tlbj1mdW5jdGlvbihlKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5cImRlZmF1bHRcIiE9PU5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uP1szLDJdOls0LE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpXTtjYXNlIDE6dC5zZW50KCksdC5sYWJlbD0yO2Nhc2UgMjppZihcImdyYW50ZWRcIiE9PU5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uKXRocm93ICRELmNyZWF0ZShcInBlcm1pc3Npb24tYmxvY2tlZFwiKTtyZXR1cm5bNCx0aGlzLnVwZGF0ZVZhcGlkS2V5KG51bGw9PWU/dm9pZCAwOmUudmFwaWRLZXkpXTtjYXNlIDM6cmV0dXJuIHQuc2VudCgpLFs0LHRoaXMudXBkYXRlU3dSZWcobnVsbD09ZT92b2lkIDA6ZS5zZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uKV07Y2FzZSA0OnJldHVybiB0LnNlbnQoKSxbMixfeCh0aGlzLmZpcmViYXNlRGVwZW5kZW5jaWVzLHRoaXMuc3dSZWdpc3RyYXRpb24sdGhpcy52YXBpZEtleSldfX0pfSl9LFJ4LnByb3RvdHlwZS51cGRhdGVWYXBpZEtleT1mdW5jdGlvbihlKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7cmV0dXJuIGU/dGhpcy52YXBpZEtleT1lOnRoaXMudmFwaWRLZXl8fCh0aGlzLnZhcGlkS2V5PVpEKSxbMl19KX0pfSxSeC5wcm90b3R5cGUudXBkYXRlU3dSZWc9ZnVuY3Rpb24oZSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGV8fHRoaXMuc3dSZWdpc3RyYXRpb24/WzMsMl06WzQsdGhpcy5yZWdpc3RlckRlZmF1bHRTdygpXTtjYXNlIDE6dC5zZW50KCksdC5sYWJlbD0yO2Nhc2UgMjppZighZSYmdGhpcy5zd1JlZ2lzdHJhdGlvbilyZXR1cm5bMl07aWYoIShlIGluc3RhbmNlb2YgU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbikpdGhyb3cgJEQuY3JlYXRlKFwiaW52YWxpZC1zdy1yZWdpc3RyYXRpb25cIik7cmV0dXJuIHRoaXMuc3dSZWdpc3RyYXRpb249ZSxbMl19fSl9KX0sUngucHJvdG90eXBlLnJlZ2lzdGVyRGVmYXVsdFN3PWZ1bmN0aW9uKCl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHQudHJ5cy5wdXNoKFswLDIsLDNdKSxlPXRoaXMsWzQsbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoXCIvZmlyZWJhc2UtbWVzc2FnaW5nLXN3LmpzXCIse3Njb3BlOlwiL2ZpcmViYXNlLWNsb3VkLW1lc3NhZ2luZy1wdXNoLXNjb3BlXCJ9KV07Y2FzZSAxOnJldHVybiBlLnN3UmVnaXN0cmF0aW9uPXQuc2VudCgpLHRoaXMuc3dSZWdpc3RyYXRpb24udXBkYXRlKCkuY2F0Y2goZnVuY3Rpb24oKXt9KSxbMywzXTtjYXNlIDI6dGhyb3cgZT10LnNlbnQoKSwkRC5jcmVhdGUoXCJmYWlsZWQtc2VydmljZS13b3JrZXItcmVnaXN0cmF0aW9uXCIse2Jyb3dzZXJFcnJvck1lc3NhZ2U6ZS5tZXNzYWdlfSk7Y2FzZSAzOnJldHVyblsyXX19KX0pfSxSeC5wcm90b3R5cGUuZGVsZXRlVG9rZW49ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5zd1JlZ2lzdHJhdGlvbj9bMywyXTpbNCx0aGlzLnJlZ2lzdGVyRGVmYXVsdFN3KCldO2Nhc2UgMTp0LnNlbnQoKSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVyblsyLHd4KHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMsdGhpcy5zd1JlZ2lzdHJhdGlvbildfX0pfSl9LFJ4LnByb3RvdHlwZS5yZXF1ZXN0UGVybWlzc2lvbj1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVyblwiZ3JhbnRlZFwiPT09Tm90aWZpY2F0aW9uLnBlcm1pc3Npb24/WzJdOls0LE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpXTtjYXNlIDE6aWYoXCJncmFudGVkXCI9PT0oZT10LnNlbnQoKSkpcmV0dXJuWzJdO3Rocm93XCJkZW5pZWRcIj09PWU/JEQuY3JlYXRlKFwicGVybWlzc2lvbi1ibG9ja2VkXCIpOiRELmNyZWF0ZShcInBlcm1pc3Npb24tZGVmYXVsdFwiKX19KX0pfSxSeC5wcm90b3R5cGUudXNlUHVibGljVmFwaWRLZXk9ZnVuY3Rpb24odCl7aWYobnVsbCE9PXRoaXMudmFwaWRLZXkpdGhyb3cgJEQuY3JlYXRlKFwidXNlLXZhcGlkLWtleS1hZnRlci1nZXQtdG9rZW5cIik7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHR8fDA9PT10Lmxlbmd0aCl0aHJvdyAkRC5jcmVhdGUoXCJpbnZhbGlkLXZhcGlkLWtleVwiKTt0aGlzLnZhcGlkS2V5PXR9LFJ4LnByb3RvdHlwZS51c2VTZXJ2aWNlV29ya2VyPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24pKXRocm93ICRELmNyZWF0ZShcImludmFsaWQtc3ctcmVnaXN0cmF0aW9uXCIpO2lmKHRoaXMuc3dSZWdpc3RyYXRpb24pdGhyb3cgJEQuY3JlYXRlKFwidXNlLXN3LWFmdGVyLWdldC10b2tlblwiKTt0aGlzLnN3UmVnaXN0cmF0aW9uPXR9LFJ4LnByb3RvdHlwZS5vbk1lc3NhZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5vbk1lc3NhZ2VDYWxsYmFjaz10LGZ1bmN0aW9uKCl7ZS5vbk1lc3NhZ2VDYWxsYmFjaz1udWxsfX0sUngucHJvdG90eXBlLnNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlcj1mdW5jdGlvbigpe3Rocm93ICRELmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXN3XCIpfSxSeC5wcm90b3R5cGUub25CYWNrZ3JvdW5kTWVzc2FnZT1mdW5jdGlvbigpe3Rocm93ICRELmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXN3XCIpfSxSeC5wcm90b3R5cGUub25Ub2tlblJlZnJlc2g9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt9fSxSeC5wcm90b3R5cGUubG9nRXZlbnQ9ZnVuY3Rpb24obixyKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1mdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZSBKRC5OT1RJRklDQVRJT05fQ0xJQ0tFRDpyZXR1cm5cIm5vdGlmaWNhdGlvbl9vcGVuXCI7Y2FzZSBKRC5QVVNIX1JFQ0VJVkVEOnJldHVyblwibm90aWZpY2F0aW9uX2ZvcmVncm91bmRcIjtkZWZhdWx0OnRocm93IG5ldyBFcnJvcn19KG4pLFs0LHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMuYW5hbHl0aWNzUHJvdmlkZXIuZ2V0KCldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCkubG9nRXZlbnQoZSx7bWVzc2FnZV9pZDpyW254XSxtZXNzYWdlX25hbWU6cltcImdvb2dsZS5jLmEuY19sXCJdLG1lc3NhZ2VfdGltZTpyW1wiZ29vZ2xlLmMuYS50c1wiXSxtZXNzYWdlX2RldmljZV90aW1lOk1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpfSksWzJdfX0pfSl9LFJ4KTtmdW5jdGlvbiBSeCh0KXt2YXIgZT10aGlzO3RoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXM9dCx0aGlzLnZhcGlkS2V5PW51bGwsdGhpcy5vbk1lc3NhZ2VDYWxsYmFjaz1udWxsLG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZnVuY3Rpb24odCl7cmV0dXJuIGUubWVzc2FnZUV2ZW50TGlzdGVuZXIodCl9KX1mdW5jdGlvbiBQeCh0KXtyZXR1cm4gJEQuY3JlYXRlKFwibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiLHt2YWx1ZU5hbWU6dH0pfUc9e2lzU3VwcG9ydGVkOk94fTtmdW5jdGlvbiBPeCgpe3JldHVybiBzZWxmJiZcIlNlcnZpY2VXb3JrZXJHbG9iYWxTY29wZVwiaW4gc2VsZj9cImluZGV4ZWREQlwiaW4gc2VsZiYmbnVsbCE9PWluZGV4ZWREQiYmXCJQdXNoTWFuYWdlclwiaW4gc2VsZiYmXCJOb3RpZmljYXRpb25cImluIHNlbGYmJlNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KFwic2hvd05vdGlmaWNhdGlvblwiKSYmUHVzaFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXCJnZXRLZXlcIik6XCJpbmRleGVkREJcImluIHdpbmRvdyYmbnVsbCE9PWluZGV4ZWREQiYmbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQmJlwic2VydmljZVdvcmtlclwiaW4gbmF2aWdhdG9yJiZcIlB1c2hNYW5hZ2VyXCJpbiB3aW5kb3cmJlwiTm90aWZpY2F0aW9uXCJpbiB3aW5kb3cmJlwiZmV0Y2hcImluIHdpbmRvdyYmU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXCJzaG93Tm90aWZpY2F0aW9uXCIpJiZQdXNoU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShcImdldEtleVwiKX1YbC5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgZWEoXCJtZXNzYWdpbmdcIixmdW5jdGlvbih0KXt2YXIgZT10LmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLHQ9e2FwcDplLGFwcENvbmZpZzpmdW5jdGlvbih0KXt2YXIgZSxuO2lmKCF0fHwhdC5vcHRpb25zKXRocm93IFB4KFwiQXBwIENvbmZpZ3VyYXRpb24gT2JqZWN0XCIpO2lmKCF0Lm5hbWUpdGhyb3cgUHgoXCJBcHAgTmFtZVwiKTt2YXIgcj10Lm9wdGlvbnM7dHJ5e2Zvcih2YXIgaT10byhbXCJwcm9qZWN0SWRcIixcImFwaUtleVwiLFwiYXBwSWRcIixcIm1lc3NhZ2luZ1NlbmRlcklkXCJdKSxvPWkubmV4dCgpOyFvLmRvbmU7bz1pLm5leHQoKSl7dmFyIGE9by52YWx1ZTtpZighclthXSl0aHJvdyBQeChhKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKG49aS5yZXR1cm4pJiZuLmNhbGwoaSl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXJldHVybnthcHBOYW1lOnQubmFtZSxwcm9qZWN0SWQ6ci5wcm9qZWN0SWQsYXBpS2V5OnIuYXBpS2V5LGFwcElkOnIuYXBwSWQsc2VuZGVySWQ6ci5tZXNzYWdpbmdTZW5kZXJJZH19KGUpLGluc3RhbGxhdGlvbnM6dC5nZXRQcm92aWRlcihcImluc3RhbGxhdGlvbnNcIikuZ2V0SW1tZWRpYXRlKCksYW5hbHl0aWNzUHJvdmlkZXI6dC5nZXRQcm92aWRlcihcImFuYWx5dGljcy1pbnRlcm5hbFwiKX07aWYoIU94KCkpdGhyb3cgJEQuY3JlYXRlKFwidW5zdXBwb3J0ZWQtYnJvd3NlclwiKTtyZXR1cm4gbmV3KHNlbGYmJlwiU2VydmljZVdvcmtlckdsb2JhbFNjb3BlXCJpbiBzZWxmP0N4OkF4KSh0KX0sXCJQVUJMSUNcIikuc2V0U2VydmljZVByb3BzKEcpKTt2YXIgRHgseHg9XCJmaXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb21cIixMeD1cInN0b3JhZ2VCdWNrZXRcIixNeD0oWGkoRngsRHg9U28pLEZ4LnByb3RvdHlwZS5fY29kZUVxdWFscz1mdW5jdGlvbih0KXtyZXR1cm4gVXgodCk9PT10aGlzLmNvZGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGeC5wcm90b3R5cGUsXCJzZXJ2ZXJSZXNwb25zZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXN0b21EYXRhLnNlcnZlclJlc3BvbnNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5jdXN0b21EYXRhLnNlcnZlclJlc3BvbnNlPXQsdGhpcy5jdXN0b21EYXRhLnNlcnZlclJlc3BvbnNlP3RoaXMubWVzc2FnZT10aGlzLl9iYXNlTWVzc2FnZStcIlxcblwiK3RoaXMuY3VzdG9tRGF0YS5zZXJ2ZXJSZXNwb25zZTp0aGlzLm1lc3NhZ2U9dGhpcy5fYmFzZU1lc3NhZ2V9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksRngpO2Z1bmN0aW9uIEZ4KHQsZSl7dD1EeC5jYWxsKHRoaXMsVXgodCksXCJGaXJlYmFzZSBTdG9yYWdlOiBcIitlK1wiIChcIitVeCh0KStcIilcIil8fHRoaXM7cmV0dXJuIHQuY3VzdG9tRGF0YT17c2VydmVyUmVzcG9uc2U6bnVsbH0sdC5fYmFzZU1lc3NhZ2U9dC5tZXNzYWdlLE9iamVjdC5zZXRQcm90b3R5cGVPZih0LEZ4LnByb3RvdHlwZSksdH1mdW5jdGlvbiBVeCh0KXtyZXR1cm5cInN0b3JhZ2UvXCIrdH1mdW5jdGlvbiBqeCgpe3JldHVybiBuZXcgTXgoXCJ1bmtub3duXCIsXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLCBwbGVhc2UgY2hlY2sgdGhlIGVycm9yIHBheWxvYWQgZm9yIHNlcnZlciByZXNwb25zZS5cIil9ZnVuY3Rpb24gcXgoKXtyZXR1cm4gbmV3IE14KFwiY2FuY2VsZWRcIixcIlVzZXIgY2FuY2VsZWQgdGhlIHVwbG9hZC9kb3dubG9hZC5cIil9ZnVuY3Rpb24gVngoKXtyZXR1cm4gbmV3IE14KFwiY2Fubm90LXNsaWNlLWJsb2JcIixcIkNhbm5vdCBzbGljZSBibG9iIGZvciB1cGxvYWQuIFBsZWFzZSByZXRyeSB0aGUgdXBsb2FkLlwiKX1mdW5jdGlvbiBCeCh0KXtyZXR1cm4gbmV3IE14KFwiaW52YWxpZC1hcmd1bWVudFwiLHQpfWZ1bmN0aW9uIEt4KCl7cmV0dXJuIG5ldyBNeChcImFwcC1kZWxldGVkXCIsXCJUaGUgRmlyZWJhc2UgYXBwIHdhcyBkZWxldGVkLlwiKX1mdW5jdGlvbiBXeCh0KXtyZXR1cm4gbmV3IE14KFwiaW52YWxpZC1yb290LW9wZXJhdGlvblwiLFwiVGhlIG9wZXJhdGlvbiAnXCIrdCtcIicgY2Fubm90IGJlIHBlcmZvcm1lZCBvbiBhIHJvb3QgcmVmZXJlbmNlLCBjcmVhdGUgYSBub24tcm9vdCByZWZlcmVuY2UgdXNpbmcgY2hpbGQsIHN1Y2ggYXMgLmNoaWxkKCdmaWxlLnBuZycpLlwiKX1mdW5jdGlvbiBIeCh0LGUpe3JldHVybiBuZXcgTXgoXCJpbnZhbGlkLWZvcm1hdFwiLFwiU3RyaW5nIGRvZXMgbm90IG1hdGNoIGZvcm1hdCAnXCIrdCtcIic6IFwiK2UpfWZ1bmN0aW9uIEd4KHQpe3Rocm93IG5ldyBNeChcImludGVybmFsLWVycm9yXCIsXCJJbnRlcm5hbCBlcnJvcjogXCIrdCl9dmFyIHp4PXtSQVc6XCJyYXdcIixCQVNFNjQ6XCJiYXNlNjRcIixCQVNFNjRVUkw6XCJiYXNlNjR1cmxcIixEQVRBX1VSTDpcImRhdGFfdXJsXCJ9LFF4PWZ1bmN0aW9uKHQsZSl7dGhpcy5kYXRhPXQsdGhpcy5jb250ZW50VHlwZT1lfHxudWxsfTtmdW5jdGlvbiBZeCh0LGUpe3N3aXRjaCh0KXtjYXNlIHp4LlJBVzpyZXR1cm4gbmV3IFF4KFh4KGUpKTtjYXNlIHp4LkJBU0U2NDpjYXNlIHp4LkJBU0U2NFVSTDpyZXR1cm4gbmV3IFF4KEp4KHQsZSkpO2Nhc2UgenguREFUQV9VUkw6cmV0dXJuIG5ldyBReChmdW5jdGlvbih0KXt0PW5ldyAkeCh0KTtyZXR1cm4gdC5iYXNlNjQ/SngoenguQkFTRTY0LHQucmVzdCk6ZnVuY3Rpb24odCl7dmFyIGU7dHJ5e2U9ZGVjb2RlVVJJQ29tcG9uZW50KHQpfWNhdGNoKHQpe3Rocm93IEh4KHp4LkRBVEFfVVJMLFwiTWFsZm9ybWVkIGRhdGEgVVJMLlwiKX1yZXR1cm4gWHgoZSl9KHQucmVzdCl9KGUpLG5ldyAkeChlKS5jb250ZW50VHlwZSl9dGhyb3cgangoKX1mdW5jdGlvbiBYeCh0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10LmNoYXJDb2RlQXQobik7cjw9MTI3P2UucHVzaChyKTpyPD0yMDQ3P2UucHVzaCgxOTJ8cj4+NiwxMjh8NjMmcik6NTUyOTY9PSg2NDUxMiZyKT9uPHQubGVuZ3RoLTEmJjU2MzIwPT0oNjQ1MTImdC5jaGFyQ29kZUF0KG4rMSkpPyhyPTY1NTM2fCgxMDIzJnIpPDwxMHwxMDIzJnQuY2hhckNvZGVBdCgrK24pLGUucHVzaCgyNDB8cj4+MTgsMTI4fHI+PjEyJjYzLDEyOHxyPj42JjYzLDEyOHw2MyZyKSk6ZS5wdXNoKDIzOSwxOTEsMTg5KTo1NjMyMD09KDY0NTEyJnIpP2UucHVzaCgyMzksMTkxLDE4OSk6ZS5wdXNoKDIyNHxyPj4xMiwxMjh8cj4+NiY2MywxMjh8NjMmcil9cmV0dXJuIG5ldyBVaW50OEFycmF5KGUpfWZ1bmN0aW9uIEp4KGUsdCl7c3dpdGNoKGUpe2Nhc2UgenguQkFTRTY0OnZhciBuPS0xIT09dC5pbmRleE9mKFwiLVwiKSxyPS0xIT09dC5pbmRleE9mKFwiX1wiKTtpZihufHxyKXRocm93IEh4KGUsXCJJbnZhbGlkIGNoYXJhY3RlciAnXCIrKG4/XCItXCI6XCJfXCIpK1wiJyBmb3VuZDogaXMgaXQgYmFzZTY0dXJsIGVuY29kZWQ/XCIpO2JyZWFrO2Nhc2UgenguQkFTRTY0VVJMOnI9LTEhPT10LmluZGV4T2YoXCIrXCIpLG49LTEhPT10LmluZGV4T2YoXCIvXCIpO2lmKHJ8fG4pdGhyb3cgSHgoZSxcIkludmFsaWQgY2hhcmFjdGVyICdcIisocj9cIitcIjpcIi9cIikrXCInIGZvdW5kOiBpcyBpdCBiYXNlNjQgZW5jb2RlZD9cIik7dD10LnJlcGxhY2UoLy0vZyxcIitcIikucmVwbGFjZSgvXy9nLFwiL1wiKX12YXIgaTt0cnl7aT1hdG9iKHQpfWNhdGNoKHQpe3Rocm93IEh4KGUsXCJJbnZhbGlkIGNoYXJhY3RlciBmb3VuZFwiKX1mb3IodmFyIG89bmV3IFVpbnQ4QXJyYXkoaS5sZW5ndGgpLGE9MDthPGkubGVuZ3RoO2ErKylvW2FdPWkuY2hhckNvZGVBdChhKTtyZXR1cm4gb312YXIgJHg9ZnVuY3Rpb24odCl7dmFyIGU7aWYodGhpcy5iYXNlNjQ9ITEsKHRoaXMuY29udGVudFR5cGU9bnVsbCk9PT0oZT10Lm1hdGNoKC9eZGF0YTooW14sXSspPywvKSkpdGhyb3cgSHgoenguREFUQV9VUkwsXCJNdXN0IGJlIGZvcm1hdHRlZCAnZGF0YTpbPG1lZGlhdHlwZT5dWztiYXNlNjRdLDxkYXRhPlwiKTt2YXIgbixyPWVbMV18fG51bGw7bnVsbCE9ciYmKHRoaXMuYmFzZTY0PShuPVwiO2Jhc2U2NFwiLChlPXIpLmxlbmd0aD49bi5sZW5ndGgmJmUuc3Vic3RyaW5nKGUubGVuZ3RoLW4ubGVuZ3RoKT09PW4pLHRoaXMuY29udGVudFR5cGU9dGhpcy5iYXNlNjQ/ci5zdWJzdHJpbmcoMCxyLmxlbmd0aC1cIjtiYXNlNjRcIi5sZW5ndGgpOnIpLHRoaXMucmVzdD10LnN1YnN0cmluZyh0LmluZGV4T2YoXCIsXCIpKzEpfTt2YXIgWngsdEw9e1NUQVRFX0NIQU5HRUQ6XCJzdGF0ZV9jaGFuZ2VkXCJ9LGVMPXtSVU5OSU5HOlwicnVubmluZ1wiLFBBVVNFRDpcInBhdXNlZFwiLFNVQ0NFU1M6XCJzdWNjZXNzXCIsQ0FOQ0VMRUQ6XCJjYW5jZWxlZFwiLEVSUk9SOlwiZXJyb3JcIn07ZnVuY3Rpb24gbkwodCl7c3dpdGNoKHQpe2Nhc2VcInJ1bm5pbmdcIjpjYXNlXCJwYXVzaW5nXCI6Y2FzZVwiY2FuY2VsaW5nXCI6cmV0dXJuIGVMLlJVTk5JTkc7Y2FzZVwicGF1c2VkXCI6cmV0dXJuIGVMLlBBVVNFRDtjYXNlXCJzdWNjZXNzXCI6cmV0dXJuIGVMLlNVQ0NFU1M7Y2FzZVwiY2FuY2VsZWRcIjpyZXR1cm4gZUwuQ0FOQ0VMRUQ7Y2FzZVwiZXJyb3JcIjpkZWZhdWx0OnJldHVybiBlTC5FUlJPUn19KFNuPVp4PVp4fHx7fSlbU24uTk9fRVJST1I9MF09XCJOT19FUlJPUlwiLFNuW1NuLk5FVFdPUktfRVJST1I9MV09XCJORVRXT1JLX0VSUk9SXCIsU25bU24uQUJPUlQ9Ml09XCJBQk9SVFwiO3ZhciByTD0oaUwucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24odCxlLG4scil7aWYodGhpcy5zZW50Xyl0aHJvdyBHeChcImNhbm5vdCAuc2VuZCgpIG1vcmUgdGhhbiBvbmNlXCIpO2lmKHRoaXMuc2VudF89ITAsdGhpcy54aHJfLm9wZW4oZSx0LCEwKSx2b2lkIDAhPT1yKWZvcih2YXIgaSBpbiByKXIuaGFzT3duUHJvcGVydHkoaSkmJnRoaXMueGhyXy5zZXRSZXF1ZXN0SGVhZGVyKGkscltpXS50b1N0cmluZygpKTtyZXR1cm4gdm9pZCAwIT09bj90aGlzLnhocl8uc2VuZChuKTp0aGlzLnhocl8uc2VuZCgpLHRoaXMuc2VuZFByb21pc2VffSxpTC5wcm90b3R5cGUuZ2V0RXJyb3JDb2RlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VudF8pdGhyb3cgR3goXCJjYW5ub3QgLmdldEVycm9yQ29kZSgpIGJlZm9yZSBzZW5kaW5nXCIpO3JldHVybiB0aGlzLmVycm9yQ29kZV99LGlMLnByb3RvdHlwZS5nZXRTdGF0dXM9ZnVuY3Rpb24oKXtpZighdGhpcy5zZW50Xyl0aHJvdyBHeChcImNhbm5vdCAuZ2V0U3RhdHVzKCkgYmVmb3JlIHNlbmRpbmdcIik7dHJ5e3JldHVybiB0aGlzLnhocl8uc3RhdHVzfWNhdGNoKHQpe3JldHVybi0xfX0saUwucHJvdG90eXBlLmdldFJlc3BvbnNlVGV4dD1mdW5jdGlvbigpe2lmKCF0aGlzLnNlbnRfKXRocm93IEd4KFwiY2Fubm90IC5nZXRSZXNwb25zZVRleHQoKSBiZWZvcmUgc2VuZGluZ1wiKTtyZXR1cm4gdGhpcy54aHJfLnJlc3BvbnNlVGV4dH0saUwucHJvdG90eXBlLmFib3J0PWZ1bmN0aW9uKCl7dGhpcy54aHJfLmFib3J0KCl9LGlMLnByb3RvdHlwZS5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54aHJfLmdldFJlc3BvbnNlSGVhZGVyKHQpfSxpTC5wcm90b3R5cGUuYWRkVXBsb2FkUHJvZ3Jlc3NMaXN0ZW5lcj1mdW5jdGlvbih0KXtudWxsIT10aGlzLnhocl8udXBsb2FkJiZ0aGlzLnhocl8udXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLHQpfSxpTC5wcm90b3R5cGUucmVtb3ZlVXBsb2FkUHJvZ3Jlc3NMaXN0ZW5lcj1mdW5jdGlvbih0KXtudWxsIT10aGlzLnhocl8udXBsb2FkJiZ0aGlzLnhocl8udXBsb2FkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLHQpfSxpTCk7ZnVuY3Rpb24gaUwoKXt2YXIgZT10aGlzO3RoaXMuc2VudF89ITEsdGhpcy54aHJfPW5ldyBYTUxIdHRwUmVxdWVzdCx0aGlzLmVycm9yQ29kZV89WnguTk9fRVJST1IsdGhpcy5zZW5kUHJvbWlzZV89bmV3IFByb21pc2UoZnVuY3Rpb24odCl7ZS54aHJfLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLGZ1bmN0aW9uKCl7ZS5lcnJvckNvZGVfPVp4LkFCT1JULHQoZSl9KSxlLnhocl8uYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsZnVuY3Rpb24oKXtlLmVycm9yQ29kZV89WnguTkVUV09SS19FUlJPUix0KGUpfSksZS54aHJfLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXt0KGUpfSl9KX12YXIgb0w9KGFMLnByb3RvdHlwZS5jcmVhdGVYaHJJbz1mdW5jdGlvbigpe3JldHVybiBuZXcgckx9LGFMKTtmdW5jdGlvbiBhTCgpe312YXIgc0w9KE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1TC5wcm90b3R5cGUsXCJwYXRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhdGhffSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1TC5wcm90b3R5cGUsXCJpc1Jvb3RcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLnBhdGgubGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHVMLnByb3RvdHlwZS5mdWxsU2VydmVyVXJsPWZ1bmN0aW9uKCl7dmFyIHQ9ZW5jb2RlVVJJQ29tcG9uZW50O3JldHVyblwiL2IvXCIrdCh0aGlzLmJ1Y2tldCkrXCIvby9cIit0KHRoaXMucGF0aCl9LHVMLnByb3RvdHlwZS5idWNrZXRPbmx5U2VydmVyVXJsPWZ1bmN0aW9uKCl7cmV0dXJuXCIvYi9cIitlbmNvZGVVUklDb21wb25lbnQodGhpcy5idWNrZXQpK1wiL29cIn0sdUwubWFrZUZyb21CdWNrZXRTcGVjPWZ1bmN0aW9uKGUsdCl7dmFyIG47dHJ5e249dUwubWFrZUZyb21VcmwoZSx0KX1jYXRjaCh0KXtyZXR1cm4gbmV3IHVMKGUsXCJcIil9aWYoXCJcIj09PW4ucGF0aClyZXR1cm4gbjt0aHJvdyBuZXcgTXgoXCJpbnZhbGlkLWRlZmF1bHQtYnVja2V0XCIsXCJJbnZhbGlkIGRlZmF1bHQgYnVja2V0ICdcIitlK1wiJy5cIil9LHVMLm1ha2VGcm9tVXJsPWZ1bmN0aW9uKHQsZSl7dmFyIG49bnVsbCxyPVwiKFtBLVphLXowLTkuXFxcXC1fXSspXCI7dmFyIGk9bmV3IFJlZ0V4cChcIl5nczovL1wiK3IrXCIoLyguKikpPyRcIixcImlcIik7ZnVuY3Rpb24gbyh0KXt0LnBhdGhfPWRlY29kZVVSSUNvbXBvbmVudCh0LnBhdGgpfWZvcih2YXIgYT1lLnJlcGxhY2UoL1suXS9nLFwiXFxcXC5cIikscz1be3JlZ2V4OmksaW5kaWNlczp7YnVja2V0OjEscGF0aDozfSxwb3N0TW9kaWZ5OmZ1bmN0aW9uKHQpe1wiL1wiPT09dC5wYXRoLmNoYXJBdCh0LnBhdGgubGVuZ3RoLTEpJiYodC5wYXRoXz10LnBhdGhfLnNsaWNlKDAsLTEpKX19LHtyZWdleDpuZXcgUmVnRXhwKFwiXmh0dHBzPzovL1wiK2ErXCIvdltBLVphLXowLTlfXSsvYi9cIityK1wiL28oLyhbXj8jXSopLiopPyRcIixcImlcIiksaW5kaWNlczp7YnVja2V0OjEscGF0aDozfSxwb3N0TW9kaWZ5Om99LHtyZWdleDpuZXcgUmVnRXhwKFwiXmh0dHBzPzovL1wiKyhlPT09eHg/XCIoPzpzdG9yYWdlLmdvb2dsZWFwaXMuY29tfHN0b3JhZ2UuY2xvdWQuZ29vZ2xlLmNvbSlcIjplKStcIi9cIityK1wiLyhbXj8jXSopXCIsXCJpXCIpLGluZGljZXM6e2J1Y2tldDoxLHBhdGg6Mn0scG9zdE1vZGlmeTpvfV0sdT0wO3U8cy5sZW5ndGg7dSsrKXt2YXIgYz1zW3VdLGg9Yy5yZWdleC5leGVjKHQpO2lmKGgpe249bmV3IHVMKGhbYy5pbmRpY2VzLmJ1Y2tldF0saFtjLmluZGljZXMucGF0aF18fFwiXCIpO2MucG9zdE1vZGlmeShuKTticmVha319aWYobnVsbD09bil0aHJvdyBuZXcgTXgoXCJpbnZhbGlkLXVybFwiLFwiSW52YWxpZCBVUkwgJ1wiK3QrXCInLlwiKTtyZXR1cm4gbn0sdUwpO2Z1bmN0aW9uIHVMKHQsZSl7dGhpcy5idWNrZXQ9dCx0aGlzLnBhdGhfPWV9dmFyIGNMPShoTC5wcm90b3R5cGUuZ2V0UHJvbWlzZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb21pc2VffSxoTC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe30saEwpO2Z1bmN0aW9uIGhMKHQpe3RoaXMucHJvbWlzZV89UHJvbWlzZS5yZWplY3QodCl9ZnVuY3Rpb24gbEwodCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBTdHJpbmd9ZnVuY3Rpb24gZkwodCl7cmV0dXJuIHBMKCkmJnQgaW5zdGFuY2VvZiBCbG9ifWZ1bmN0aW9uIHBMKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJsb2J9ZnVuY3Rpb24gZEwodCxlLG4scil7aWYocjxlKXRocm93IEJ4KFwiSW52YWxpZCB2YWx1ZSBmb3IgJ1wiK3QrXCInLiBFeHBlY3RlZCBcIitlK1wiIG9yIGdyZWF0ZXIuXCIpO2lmKG48cil0aHJvdyBCeChcIkludmFsaWQgdmFsdWUgZm9yICdcIit0K1wiJy4gRXhwZWN0ZWQgXCIrbitcIiBvciBsZXNzLlwiKX1mdW5jdGlvbiB2TCh0LGUpe3ZhciBuPWUubWF0Y2goL14oXFx3Kyk6XFwvXFwvLisvKTtyZXR1cm4obnVsbD09KG51bGw9PW4/dm9pZCAwOm5bMV0pP1wiaHR0cHM6Ly9cIitlOmUpK1wiL3YwXCIrdH1mdW5jdGlvbiBnTCh0KXt2YXIgZSxuPWVuY29kZVVSSUNvbXBvbmVudCxyPVwiP1wiO2ZvcihlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKHI9cisobihlKStcIj1cIituKHRbZV0pKStcIiZcIik7cmV0dXJuIHI9ci5zbGljZSgwLC0xKX12YXIgeUw9KG1MLnByb3RvdHlwZS5zdGFydF89ZnVuY3Rpb24oKXt2YXIgZSxuLHQscixpLG8sYSxzLHUsYz10aGlzO2Z1bmN0aW9uIGgodCxlKXt2YXIgbixyPWMucmVzb2x2ZV8saT1jLnJlamVjdF8sbz1lLnhocjtpZihlLndhc1N1Y2Nlc3NDb2RlKXRyeXt2YXIgYT1jLmNhbGxiYWNrXyhvLG8uZ2V0UmVzcG9uc2VUZXh0KCkpO3ZvaWQgMCE9PWE/cihhKTpyKCl9Y2F0Y2godCl7aSh0KX1lbHNlIG51bGwhPT1vPygobj1qeCgpKS5zZXJ2ZXJSZXNwb25zZT1vLmdldFJlc3BvbnNlVGV4dCgpLGMuZXJyb3JDYWxsYmFja18/aShjLmVycm9yQ2FsbGJhY2tfKG8sbikpOmkobikpOmUuY2FuY2VsZWQ/aShuPShjLmFwcERlbGV0ZV8/S3g6cXgpKCkpOmkobj1uZXcgTXgoXCJyZXRyeS1saW1pdC1leGNlZWRlZFwiLFwiTWF4IHJldHJ5IHRpbWUgZm9yIG9wZXJhdGlvbiBleGNlZWRlZCwgcGxlYXNlIHRyeSBhZ2Fpbi5cIikpfWZ1bmN0aW9uIGwoKXtyZXR1cm4gMj09PWF9ZnVuY3Rpb24gZigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtzfHwocz0hMCxuLmFwcGx5KG51bGwsdCkpfWZ1bmN0aW9uIHAodCl7aT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aT1udWxsLGUoZCxsKCkpfSx0KX1mdW5jdGlvbiBkKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3N8fCh0fHxsKCl8fG8/Zi5jYWxsLmFwcGx5KGYsbm8oW251bGwsdF0sZSkpOihyPDY0JiYocio9MikscCgxPT09YT8oYT0yLDApOjFlMyoocitNYXRoLnJhbmRvbSgpKSkpKX1mdW5jdGlvbiB2KHQpe3V8fCh1PSEwLHN8fChudWxsIT09aT8odHx8KGE9MiksY2xlYXJUaW1lb3V0KGkpLHAoMCkpOnR8fChhPTEpKSl9dGhpcy5jYW5jZWxlZF8/aCgwLG5ldyBiTCghMSxudWxsLCEwKSk6dGhpcy5iYWNrb2ZmSWRfPShlPWZ1bmN0aW9uKHIsdCl7ZnVuY3Rpb24gaSh0KXt2YXIgZT10LmxvYWRlZCx0PXQubGVuZ3RoQ29tcHV0YWJsZT90LnRvdGFsOi0xO251bGwhPT1jLnByb2dyZXNzQ2FsbGJhY2tfJiZjLnByb2dyZXNzQ2FsbGJhY2tfKGUsdCl9dD9yKCExLG5ldyBiTCghMSxudWxsLCEwKSk6KHQ9Yy5wb29sXy5jcmVhdGVYaHJJbygpLGMucGVuZGluZ1hocl89dCxudWxsIT09Yy5wcm9ncmVzc0NhbGxiYWNrXyYmdC5hZGRVcGxvYWRQcm9ncmVzc0xpc3RlbmVyKGkpLHQuc2VuZChjLnVybF8sYy5tZXRob2RfLGMuYm9keV8sYy5oZWFkZXJzXykudGhlbihmdW5jdGlvbih0KXtudWxsIT09Yy5wcm9ncmVzc0NhbGxiYWNrXyYmdC5yZW1vdmVVcGxvYWRQcm9ncmVzc0xpc3RlbmVyKGkpLGMucGVuZGluZ1hocl89bnVsbDt2YXIgZT10LmdldEVycm9yQ29kZSgpPT09WnguTk9fRVJST1Isbj10LmdldFN0YXR1cygpO2UmJiFjLmlzUmV0cnlTdGF0dXNDb2RlXyhuKT8obj0tMSE9PWMuc3VjY2Vzc0NvZGVzXy5pbmRleE9mKG4pLHIoITAsbmV3IGJMKG4sdCkpKToodD10LmdldEVycm9yQ29kZSgpPT09WnguQUJPUlQscighMSxuZXcgYkwoITEsbnVsbCx0KSkpfSkpfSxuPWgsdD10aGlzLnRpbWVvdXRfLGk9bnVsbCx1PXM9bz0hKHI9MSkscChhPTApLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtvPSEwLHYoITApfSx0KSx2KX0sbUwucHJvdG90eXBlLmdldFByb21pc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9taXNlX30sbUwucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbih0KXt0aGlzLmNhbmNlbGVkXz0hMCx0aGlzLmFwcERlbGV0ZV89dHx8ITEsbnVsbCE9PXRoaXMuYmFja29mZklkXyYmKDAsdGhpcy5iYWNrb2ZmSWRfKSghMSksbnVsbCE9PXRoaXMucGVuZGluZ1hocl8mJnRoaXMucGVuZGluZ1hocl8uYWJvcnQoKX0sbUwucHJvdG90eXBlLmlzUmV0cnlTdGF0dXNDb2RlXz1mdW5jdGlvbih0KXt2YXIgZT01MDA8PXQmJnQ8NjAwLG49LTEhPT1bNDA4LDQyOV0uaW5kZXhPZih0KSx0PS0xIT09dGhpcy5hZGRpdGlvbmFsUmV0cnlDb2Rlc18uaW5kZXhPZih0KTtyZXR1cm4gZXx8bnx8dH0sbUwpO2Z1bmN0aW9uIG1MKHQsZSxuLHIsaSxvLGEscyx1LGMsaCl7dmFyIGw9dGhpczt0aGlzLnBlbmRpbmdYaHJfPW51bGwsdGhpcy5iYWNrb2ZmSWRfPW51bGwsdGhpcy5jYW5jZWxlZF89ITEsdGhpcy5hcHBEZWxldGVfPSExLHRoaXMudXJsXz10LHRoaXMubWV0aG9kXz1lLHRoaXMuaGVhZGVyc189bix0aGlzLmJvZHlfPXIsdGhpcy5zdWNjZXNzQ29kZXNfPWkuc2xpY2UoKSx0aGlzLmFkZGl0aW9uYWxSZXRyeUNvZGVzXz1vLnNsaWNlKCksdGhpcy5jYWxsYmFja189YSx0aGlzLmVycm9yQ2FsbGJhY2tfPXMsdGhpcy5wcm9ncmVzc0NhbGxiYWNrXz1jLHRoaXMudGltZW91dF89dSx0aGlzLnBvb2xfPWgsdGhpcy5wcm9taXNlXz1uZXcgUHJvbWlzZShmdW5jdGlvbih0LGUpe2wucmVzb2x2ZV89dCxsLnJlamVjdF89ZSxsLnN0YXJ0XygpfSl9dmFyIGJMPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLndhc1N1Y2Nlc3NDb2RlPXQsdGhpcy54aHI9ZSx0aGlzLmNhbmNlbGVkPSEhbn07ZnVuY3Rpb24gX0woKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dmFyIG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJsb2JCdWlsZGVyP0Jsb2JCdWlsZGVyOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBXZWJLaXRCbG9iQnVpbGRlcj9XZWJLaXRCbG9iQnVpbGRlcjp2b2lkIDA7aWYodm9pZCAwIT09bil7Zm9yKHZhciByPW5ldyBuLGk9MDtpPHQubGVuZ3RoO2krKylyLmFwcGVuZCh0W2ldKTtyZXR1cm4gci5nZXRCbG9iKCl9aWYocEwoKSlyZXR1cm4gbmV3IEJsb2IodCk7dGhyb3cgbmV3IE14KFwidW5zdXBwb3J0ZWQtZW52aXJvbm1lbnRcIixcIlRoaXMgYnJvd3NlciBkb2Vzbid0IHNlZW0gdG8gc3VwcG9ydCBjcmVhdGluZyBCbG9ic1wiKX12YXIgd0w9KElMLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZV99LElMLnByb3RvdHlwZS50eXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZV99LElMLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUpe2lmKGZMKHRoaXMuZGF0YV8pKXt2YXIgbj10aGlzLmRhdGFfLHI9KGk9dCxyPWUsKG49bikud2Via2l0U2xpY2U/bi53ZWJraXRTbGljZShpLHIpOm4ubW96U2xpY2U/bi5tb3pTbGljZShpLHIpOm4uc2xpY2U/bi5zbGljZShpLHIpOm51bGwpO3JldHVybiBudWxsPT09cj9udWxsOm5ldyBJTChyKX12YXIgaSxyO3JldHVybiBuZXcgSUwobmV3IFVpbnQ4QXJyYXkodGhpcy5kYXRhXy5idWZmZXIsdCxlLXQpLCEwKX0sSUwuZ2V0QmxvYj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtpZihwTCgpKXt2YXIgbj10Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIElMP3QuZGF0YV86dH0pO3JldHVybiBuZXcgSUwoX0wuYXBwbHkobnVsbCxuKSl9dmFyIG49dC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGxMKHQpP1l4KHp4LlJBVyx0KS5kYXRhOnQuZGF0YV99KSxyPTA7bi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IrPXQuYnl0ZUxlbmd0aH0pO3ZhciBpPW5ldyBVaW50OEFycmF5KHIpLG89MDtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlbbysrXT10W2VdfSksbmV3IElMKGksITApfSxJTC5wcm90b3R5cGUudXBsb2FkRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGFffSxJTCk7ZnVuY3Rpb24gSUwodCxlKXt2YXIgbj0wLHI9XCJcIjtmTCh0KT8obj0odGhpcy5kYXRhXz10KS5zaXplLHI9dC50eXBlKTp0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/KGU/dGhpcy5kYXRhXz1uZXcgVWludDhBcnJheSh0KToodGhpcy5kYXRhXz1uZXcgVWludDhBcnJheSh0LmJ5dGVMZW5ndGgpLHRoaXMuZGF0YV8uc2V0KG5ldyBVaW50OEFycmF5KHQpKSksbj10aGlzLmRhdGFfLmxlbmd0aCk6dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJihlP3RoaXMuZGF0YV89dDoodGhpcy5kYXRhXz1uZXcgVWludDhBcnJheSh0Lmxlbmd0aCksdGhpcy5kYXRhXy5zZXQodCkpLG49dC5sZW5ndGgpLHRoaXMuc2l6ZV89bix0aGlzLnR5cGVfPXJ9ZnVuY3Rpb24gVEwodCl7dmFyIGUsbjt0cnl7ZT1KU09OLnBhcnNlKHQpfWNhdGNoKHQpe3JldHVybiBudWxsfXJldHVyblwib2JqZWN0XCIhPXR5cGVvZihuPWUpfHxBcnJheS5pc0FycmF5KG4pP251bGw6ZX1mdW5jdGlvbiBFTCh0KXt2YXIgZT10Lmxhc3RJbmRleE9mKFwiL1wiLHQubGVuZ3RoLTIpO3JldHVybi0xPT09ZT90OnQuc2xpY2UoZSsxKX1mdW5jdGlvbiBTTCh0LGUpe3JldHVybiBlfXZhciBDTD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnNlcnZlcj10LHRoaXMubG9jYWw9ZXx8dCx0aGlzLndyaXRhYmxlPSEhbix0aGlzLnhmb3JtPXJ8fFNMfSxrTD1udWxsO2Z1bmN0aW9uIE5MKCl7aWYoa0wpcmV0dXJuIGtMO3ZhciB0PVtdO3QucHVzaChuZXcgQ0woXCJidWNrZXRcIikpLHQucHVzaChuZXcgQ0woXCJnZW5lcmF0aW9uXCIpKSx0LnB1c2gobmV3IENMKFwibWV0YWdlbmVyYXRpb25cIikpLHQucHVzaChuZXcgQ0woXCJuYW1lXCIsXCJmdWxsUGF0aFwiLCEwKSk7dmFyIGU9bmV3IENMKFwibmFtZVwiKTtlLnhmb3JtPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIWxMKGU9ZSl8fGUubGVuZ3RoPDI/ZTpFTChlKX0sdC5wdXNoKGUpO2U9bmV3IENMKFwic2l6ZVwiKTtyZXR1cm4gZS54Zm9ybT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDAhPT1lP051bWJlcihlKTplfSx0LnB1c2goZSksdC5wdXNoKG5ldyBDTChcInRpbWVDcmVhdGVkXCIpKSx0LnB1c2gobmV3IENMKFwidXBkYXRlZFwiKSksdC5wdXNoKG5ldyBDTChcIm1kNUhhc2hcIixudWxsLCEwKSksdC5wdXNoKG5ldyBDTChcImNhY2hlQ29udHJvbFwiLG51bGwsITApKSx0LnB1c2gobmV3IENMKFwiY29udGVudERpc3Bvc2l0aW9uXCIsbnVsbCwhMCkpLHQucHVzaChuZXcgQ0woXCJjb250ZW50RW5jb2RpbmdcIixudWxsLCEwKSksdC5wdXNoKG5ldyBDTChcImNvbnRlbnRMYW5ndWFnZVwiLG51bGwsITApKSx0LnB1c2gobmV3IENMKFwiY29udGVudFR5cGVcIixudWxsLCEwKSksdC5wdXNoKG5ldyBDTChcIm1ldGFkYXRhXCIsXCJjdXN0b21NZXRhZGF0YVwiLCEwKSksa0w9dH1mdW5jdGlvbiBBTChuLHIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwicmVmXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PW4uYnVja2V0LGU9bi5mdWxsUGF0aCxlPW5ldyBzTCh0LGUpO3JldHVybiByLl9tYWtlU3RvcmFnZVJlZmVyZW5jZShlKX19KX1mdW5jdGlvbiBSTCh0LGUsbil7ZT1UTChlKTtpZihudWxsPT09ZSlyZXR1cm4gbnVsbDtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj17dHlwZTpcImZpbGVcIn0saT1uLmxlbmd0aCxvPTA7bzxpO28rKyl7dmFyIGE9bltvXTtyW2EubG9jYWxdPWEueGZvcm0ocixlW2Euc2VydmVyXSl9cmV0dXJuIEFMKHIsdCkscn0odCxlLG4pfWZ1bmN0aW9uIFBMKHQsZSl7Zm9yKHZhciBuPXt9LHI9ZS5sZW5ndGgsaT0wO2k8cjtpKyspe3ZhciBvPWVbaV07by53cml0YWJsZSYmKG5bby5zZXJ2ZXJdPXRbby5sb2NhbF0pfXJldHVybiBKU09OLnN0cmluZ2lmeShuKX12YXIgT0w9XCJwcmVmaXhlc1wiLERMPVwiaXRlbXNcIjtmdW5jdGlvbiB4TCh0LGUsbil7bj1UTChuKTtpZihudWxsPT09bilyZXR1cm4gbnVsbDtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe3ZhciByPXtwcmVmaXhlczpbXSxpdGVtczpbXSxuZXh0UGFnZVRva2VuOm4ubmV4dFBhZ2VUb2tlbn07aWYobltPTF0pZm9yKHZhciBpPTAsbz1uW09MXTtpPG8ubGVuZ3RoO2krKyl7dmFyIGE9b1tpXS5yZXBsYWNlKC9cXC8kLyxcIlwiKSxzPXQuX21ha2VTdG9yYWdlUmVmZXJlbmNlKG5ldyBzTChlLGEpKTtyLnByZWZpeGVzLnB1c2gocyl9aWYobltETF0pZm9yKHZhciB1PTAsYz1uW0RMXTt1PGMubGVuZ3RoO3UrKyl7dmFyIGg9Y1t1XSxzPXQuX21ha2VTdG9yYWdlUmVmZXJlbmNlKG5ldyBzTChlLGgubmFtZSkpO3IuaXRlbXMucHVzaChzKX1yZXR1cm4gcn0odCxlLG4pfXZhciBMTD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnVybD10LHRoaXMubWV0aG9kPWUsdGhpcy5oYW5kbGVyPW4sdGhpcy50aW1lb3V0PXIsdGhpcy51cmxQYXJhbXM9e30sdGhpcy5oZWFkZXJzPXt9LHRoaXMuYm9keT1udWxsLHRoaXMuZXJyb3JIYW5kbGVyPW51bGwsdGhpcy5wcm9ncmVzc0NhbGxiYWNrPW51bGwsdGhpcy5zdWNjZXNzQ29kZXM9WzIwMF0sdGhpcy5hZGRpdGlvbmFsUmV0cnlDb2Rlcz1bXX07ZnVuY3Rpb24gTUwodCl7aWYoIXQpdGhyb3cgangoKX1mdW5jdGlvbiBGTChuLHIpe3JldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiBNTChudWxsIT09KGU9UkwobixlLHIpKSksZX19ZnVuY3Rpb24gVUwobixyKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gTUwobnVsbCE9PShlPXhMKG4scixlKSkpLGV9fWZ1bmN0aW9uIGpMKHIsaSl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIG49UkwocixlLGkpO3JldHVybiBNTChudWxsIT09biksZnVuY3Rpb24ocix0LGkpe2lmKG51bGw9PT0odD1UTCh0KSkpcmV0dXJuIG51bGw7aWYoIWxMKHQuZG93bmxvYWRUb2tlbnMpKXJldHVybiBudWxsO2lmKDA9PT0odD10LmRvd25sb2FkVG9rZW5zKS5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIG89ZW5jb2RlVVJJQ29tcG9uZW50O3JldHVybiB0LnNwbGl0KFwiLFwiKS5tYXAoZnVuY3Rpb24odCl7dmFyIGU9ci5idWNrZXQsbj1yLmZ1bGxQYXRoO3JldHVybiB2TChcIi9iL1wiK28oZSkrXCIvby9cIitvKG4pLGkpK2dMKHthbHQ6XCJtZWRpYVwiLHRva2VuOnR9KX0pWzBdfShuLGUsci5ob3N0KX19ZnVuY3Rpb24gcUwoaSl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIG4scj00MDE9PT10LmdldFN0YXR1cygpP3QuZ2V0UmVzcG9uc2VUZXh0KCkuaW5jbHVkZXMoXCJGaXJlYmFzZSBBcHAgQ2hlY2sgdG9rZW4gaXMgaW52YWxpZFwiKT9uZXcgTXgoXCJ1bmF1dGhvcml6ZWQtYXBwXCIsXCJUaGlzIGFwcCBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIEZpcmViYXNlIFN0b3JhZ2Ugb24gdGhpcyBwcm9qZWN0LlwiKTpuZXcgTXgoXCJ1bmF1dGhlbnRpY2F0ZWRcIixcIlVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQsIHBsZWFzZSBhdXRoZW50aWNhdGUgdXNpbmcgRmlyZWJhc2UgQXV0aGVudGljYXRpb24gYW5kIHRyeSBhZ2Fpbi5cIik6NDAyPT09dC5nZXRTdGF0dXMoKT8obj1pLmJ1Y2tldCxuZXcgTXgoXCJxdW90YS1leGNlZWRlZFwiLFwiUXVvdGEgZm9yIGJ1Y2tldCAnXCIrbitcIicgZXhjZWVkZWQsIHBsZWFzZSB2aWV3IHF1b3RhIG9uIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9wcmljaW5nLy5cIikpOjQwMz09PXQuZ2V0U3RhdHVzKCk/KHI9aS5wYXRoLG5ldyBNeChcInVuYXV0aG9yaXplZFwiLFwiVXNlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzICdcIityK1wiJy5cIikpOmU7cmV0dXJuIHIuc2VydmVyUmVzcG9uc2U9ZS5zZXJ2ZXJSZXNwb25zZSxyfX1mdW5jdGlvbiBWTChyKXt2YXIgaT1xTChyKTtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbj1pKHQsZSk7cmV0dXJuIDQwND09PXQuZ2V0U3RhdHVzKCkmJih0PXIucGF0aCxuPW5ldyBNeChcIm9iamVjdC1ub3QtZm91bmRcIixcIk9iamVjdCAnXCIrdCtcIicgZG9lcyBub3QgZXhpc3QuXCIpKSxuLnNlcnZlclJlc3BvbnNlPWUuc2VydmVyUmVzcG9uc2Usbn19ZnVuY3Rpb24gQkwodCxlLG4pe3ZhciByPXZMKGUuZnVsbFNlcnZlclVybCgpLHQuaG9zdCksaT10Lm1heE9wZXJhdGlvblJldHJ5VGltZSxpPW5ldyBMTChyLFwiR0VUXCIsRkwodCxuKSxpKTtyZXR1cm4gaS5lcnJvckhhbmRsZXI9VkwoZSksaX1mdW5jdGlvbiBLTCh0LGUsbil7bj1PYmplY3QuYXNzaWduKHt9LG4pO3JldHVybiBuLmZ1bGxQYXRoPXQucGF0aCxuLnNpemU9ZS5zaXplKCksbi5jb250ZW50VHlwZXx8KG4uY29udGVudFR5cGU9KHQ9ZSwoZT1udWxsKSYmZS5jb250ZW50VHlwZXx8dCYmdC50eXBlKCl8fFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIpKSxufWZ1bmN0aW9uIFdMKHQsZSxuLHIsaSl7dmFyIG89ZS5idWNrZXRPbmx5U2VydmVyVXJsKCksYT17XCJYLUdvb2ctVXBsb2FkLVByb3RvY29sXCI6XCJtdWx0aXBhcnRcIn07dmFyIHM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9XCJcIixlPTA7ZTwyO2UrKyl0Kz1NYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc2xpY2UoMik7cmV0dXJuIHR9KCk7YVtcIkNvbnRlbnQtVHlwZVwiXT1cIm11bHRpcGFydC9yZWxhdGVkOyBib3VuZGFyeT1cIitzO3ZhciB1PUtMKGUscixpKSxpPVwiLS1cIitzK1wiXFxyXFxuQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XFxyXFxuXFxyXFxuXCIrUEwodSxuKStcIlxcclxcbi0tXCIrcytcIlxcclxcbkNvbnRlbnQtVHlwZTogXCIrdS5jb250ZW50VHlwZStcIlxcclxcblxcclxcblwiLHM9XCJcXHJcXG4tLVwiK3MrXCItLVwiLHI9d0wuZ2V0QmxvYihpLHIscyk7aWYobnVsbD09PXIpdGhyb3cgVngoKTtzPXtuYW1lOnUuZnVsbFBhdGh9LHU9dkwobyx0Lmhvc3QpLG89dC5tYXhVcGxvYWRSZXRyeVRpbWUsbz1uZXcgTEwodSxcIlBPU1RcIixGTCh0LG4pLG8pO3JldHVybiBvLnVybFBhcmFtcz1zLG8uaGVhZGVycz1hLG8uYm9keT1yLnVwbG9hZERhdGEoKSxvLmVycm9ySGFuZGxlcj1xTChlKSxvfXZhciBITD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmN1cnJlbnQ9dCx0aGlzLnRvdGFsPWUsdGhpcy5maW5hbGl6ZWQ9ISFuLHRoaXMubWV0YWRhdGE9cnx8bnVsbH07ZnVuY3Rpb24gR0wodCxlKXt2YXIgbj1udWxsO3RyeXtuPXQuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUdvb2ctVXBsb2FkLVN0YXR1c1wiKX1jYXRjaCh0KXtNTCghMSl9cmV0dXJuIE1MKCEhbiYmLTEhPT0oZXx8W1wiYWN0aXZlXCJdKS5pbmRleE9mKG4pKSxufWZ1bmN0aW9uIHpMKHQsZSxuLHIsaSl7dmFyIG89ZS5idWNrZXRPbmx5U2VydmVyVXJsKCksYT1LTChlLHIsaSksaT17bmFtZTphLmZ1bGxQYXRofSxvPXZMKG8sdC5ob3N0KSxyPXtcIlgtR29vZy1VcGxvYWQtUHJvdG9jb2xcIjpcInJlc3VtYWJsZVwiLFwiWC1Hb29nLVVwbG9hZC1Db21tYW5kXCI6XCJzdGFydFwiLFwiWC1Hb29nLVVwbG9hZC1IZWFkZXItQ29udGVudC1MZW5ndGhcIjpyLnNpemUoKSxcIlgtR29vZy1VcGxvYWQtSGVhZGVyLUNvbnRlbnQtVHlwZVwiOmEuY29udGVudFR5cGUsXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIn0sbj1QTChhLG4pLHQ9dC5tYXhVcGxvYWRSZXRyeVRpbWU7dD1uZXcgTEwobyxcIlBPU1RcIixmdW5jdGlvbih0KXt2YXIgZTtHTCh0KTt0cnl7ZT10LmdldFJlc3BvbnNlSGVhZGVyKFwiWC1Hb29nLVVwbG9hZC1VUkxcIil9Y2F0Y2godCl7TUwoITEpfXJldHVybiBNTChsTChlKSksZX0sdCk7cmV0dXJuIHQudXJsUGFyYW1zPWksdC5oZWFkZXJzPXIsdC5ib2R5PW4sdC5lcnJvckhhbmRsZXI9cUwoZSksdH1mdW5jdGlvbiBRTCh0LGUsbixpKXt0PXQubWF4VXBsb2FkUmV0cnlUaW1lLHQ9bmV3IExMKG4sXCJQT1NUXCIsZnVuY3Rpb24odCl7dmFyIGU9R0wodCxbXCJhY3RpdmVcIixcImZpbmFsXCJdKSxuPW51bGw7dHJ5e249dC5nZXRSZXNwb25zZUhlYWRlcihcIlgtR29vZy1VcGxvYWQtU2l6ZS1SZWNlaXZlZFwiKX1jYXRjaCh0KXtNTCghMSl9bnx8TUwoITEpO3ZhciByPU51bWJlcihuKTtyZXR1cm4gTUwoIWlzTmFOKHIpKSxuZXcgSEwocixpLnNpemUoKSxcImZpbmFsXCI9PT1lKX0sdCk7cmV0dXJuIHQuaGVhZGVycz17XCJYLUdvb2ctVXBsb2FkLUNvbW1hbmRcIjpcInF1ZXJ5XCJ9LHQuZXJyb3JIYW5kbGVyPXFMKGUpLHR9ZnVuY3Rpb24gWUwodCxvLGUsYSxuLHMscixpKXt2YXIgdT1uZXcgSEwoMCwwKTtpZihyPyh1LmN1cnJlbnQ9ci5jdXJyZW50LHUudG90YWw9ci50b3RhbCk6KHUuY3VycmVudD0wLHUudG90YWw9YS5zaXplKCkpLGEuc2l6ZSgpIT09dS50b3RhbCl0aHJvdyBuZXcgTXgoXCJzZXJ2ZXItZmlsZS13cm9uZy1zaXplXCIsXCJTZXJ2ZXIgcmVjb3JkZWQgaW5jb3JyZWN0IHVwbG9hZCBmaWxlIHNpemUsIHBsZWFzZSByZXRyeSB0aGUgdXBsb2FkLlwiKTt2YXIgYz11LnRvdGFsLXUuY3VycmVudCxoPWM7MDxuJiYoaD1NYXRoLm1pbihoLG4pKTtyPXUuY3VycmVudCxuPXIraCxjPXtcIlgtR29vZy1VcGxvYWQtQ29tbWFuZFwiOmg9PT1jP1widXBsb2FkLCBmaW5hbGl6ZVwiOlwidXBsb2FkXCIsXCJYLUdvb2ctVXBsb2FkLU9mZnNldFwiOnUuY3VycmVudH0scj1hLnNsaWNlKHIsbik7aWYobnVsbD09PXIpdGhyb3cgVngoKTtuPW8ubWF4VXBsb2FkUmV0cnlUaW1lLG49bmV3IExMKGUsXCJQT1NUXCIsZnVuY3Rpb24odCxlKXt2YXIgbj1HTCh0LFtcImFjdGl2ZVwiLFwiZmluYWxcIl0pLHI9dS5jdXJyZW50K2gsaT1hLnNpemUoKSxlPVwiZmluYWxcIj09PW4/RkwobyxzKSh0LGUpOm51bGw7cmV0dXJuIG5ldyBITChyLGksXCJmaW5hbFwiPT09bixlKX0sbik7cmV0dXJuIG4uaGVhZGVycz1jLG4uYm9keT1yLnVwbG9hZERhdGEoKSxuLnByb2dyZXNzQ2FsbGJhY2s9aXx8bnVsbCxuLmVycm9ySGFuZGxlcj1xTCh0KSxufXZhciBYTD1mdW5jdGlvbih0LGUsbil7XCJmdW5jdGlvblwiPT10eXBlb2YgdHx8bnVsbCE9ZXx8bnVsbCE9bj8odGhpcy5uZXh0PXQsdGhpcy5lcnJvcj1lLHRoaXMuY29tcGxldGU9bik6KHQ9dCx0aGlzLm5leHQ9dC5uZXh0LHRoaXMuZXJyb3I9dC5lcnJvcix0aGlzLmNvbXBsZXRlPXQuY29tcGxldGUpfTtmdW5jdGlvbiBKTChuKXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHZvaWQgMCx0KX0pfX12YXIgJEw9KFpMLnByb3RvdHlwZS5fbWFrZVByb2dyZXNzQ2FsbGJhY2s9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49dGhpcy5fdHJhbnNmZXJyZWQ7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLl91cGRhdGVQcm9ncmVzcyhuK3QpfX0sWkwucHJvdG90eXBlLl9zaG91bGREb1Jlc3VtYWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gMjYyMTQ0PHQuc2l6ZSgpfSxaTC5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKCl7XCJydW5uaW5nXCI9PT10aGlzLl9zdGF0ZSYmdm9pZCAwPT09dGhpcy5fcmVxdWVzdCYmKHRoaXMuX3Jlc3VtYWJsZT92b2lkIDA9PT10aGlzLl91cGxvYWRVcmw/dGhpcy5fY3JlYXRlUmVzdW1hYmxlKCk6dGhpcy5fbmVlZFRvRmV0Y2hTdGF0dXM/dGhpcy5fZmV0Y2hTdGF0dXMoKTp0aGlzLl9uZWVkVG9GZXRjaE1ldGFkYXRhP3RoaXMuX2ZldGNoTWV0YWRhdGEoKTp0aGlzLl9jb250aW51ZVVwbG9hZCgpOnRoaXMuX29uZVNob3RVcGxvYWQoKSl9LFpMLnByb3RvdHlwZS5fcmVzb2x2ZVRva2VuPWZ1bmN0aW9uKHIpe3ZhciBpPXRoaXM7UHJvbWlzZS5hbGwoW3RoaXMuX3JlZi5zdG9yYWdlLl9nZXRBdXRoVG9rZW4oKSx0aGlzLl9yZWYuc3RvcmFnZS5fZ2V0QXBwQ2hlY2tUb2tlbigpXSkudGhlbihmdW5jdGlvbih0KXt2YXIgZT10WzBdLG49dFsxXTtzd2l0Y2goaS5fc3RhdGUpe2Nhc2VcInJ1bm5pbmdcIjpyKGUsbik7YnJlYWs7Y2FzZVwiY2FuY2VsaW5nXCI6aS5fdHJhbnNpdGlvbihcImNhbmNlbGVkXCIpO2JyZWFrO2Nhc2VcInBhdXNpbmdcIjppLl90cmFuc2l0aW9uKFwicGF1c2VkXCIpfX0pfSxaTC5wcm90b3R5cGUuX2NyZWF0ZVJlc3VtYWJsZT1mdW5jdGlvbigpe3ZhciByPXRoaXM7dGhpcy5fcmVzb2x2ZVRva2VuKGZ1bmN0aW9uKHQsZSl7dmFyIG49ekwoci5fcmVmLnN0b3JhZ2Usci5fcmVmLl9sb2NhdGlvbixyLl9tYXBwaW5ncyxyLl9ibG9iLHIuX21ldGFkYXRhKSxlPXIuX3JlZi5zdG9yYWdlLl9tYWtlUmVxdWVzdChuLHQsZSk7KHIuX3JlcXVlc3Q9ZSkuZ2V0UHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24odCl7ci5fcmVxdWVzdD12b2lkIDAsci5fdXBsb2FkVXJsPXQsci5fbmVlZFRvRmV0Y2hTdGF0dXM9ITEsci5jb21wbGV0ZVRyYW5zaXRpb25zXygpfSxyLl9lcnJvckhhbmRsZXIpfSl9LFpMLnByb3RvdHlwZS5fZmV0Y2hTdGF0dXM9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLGk9dGhpcy5fdXBsb2FkVXJsO3RoaXMuX3Jlc29sdmVUb2tlbihmdW5jdGlvbih0LGUpe3ZhciBuPVFMKHIuX3JlZi5zdG9yYWdlLHIuX3JlZi5fbG9jYXRpb24saSxyLl9ibG9iKSxlPXIuX3JlZi5zdG9yYWdlLl9tYWtlUmVxdWVzdChuLHQsZSk7KHIuX3JlcXVlc3Q9ZSkuZ2V0UHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24odCl7ci5fcmVxdWVzdD12b2lkIDAsci5fdXBkYXRlUHJvZ3Jlc3ModC5jdXJyZW50KSxyLl9uZWVkVG9GZXRjaFN0YXR1cz0hMSx0LmZpbmFsaXplZCYmKHIuX25lZWRUb0ZldGNoTWV0YWRhdGE9ITApLHIuY29tcGxldGVUcmFuc2l0aW9uc18oKX0sci5fZXJyb3JIYW5kbGVyKX0pfSxaTC5wcm90b3R5cGUuX2NvbnRpbnVlVXBsb2FkPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcyxpPTI2MjE0NCp0aGlzLl9jaHVua011bHRpcGxpZXIsbz1uZXcgSEwodGhpcy5fdHJhbnNmZXJyZWQsdGhpcy5fYmxvYi5zaXplKCkpLGE9dGhpcy5fdXBsb2FkVXJsO3RoaXMuX3Jlc29sdmVUb2tlbihmdW5jdGlvbih0LGUpe3ZhciBuO3RyeXtuPVlMKHIuX3JlZi5fbG9jYXRpb24sci5fcmVmLnN0b3JhZ2UsYSxyLl9ibG9iLGksci5fbWFwcGluZ3MsbyxyLl9tYWtlUHJvZ3Jlc3NDYWxsYmFjaygpKX1jYXRjaCh0KXtyZXR1cm4gci5fZXJyb3I9dCx2b2lkIHIuX3RyYW5zaXRpb24oXCJlcnJvclwiKX1lPXIuX3JlZi5zdG9yYWdlLl9tYWtlUmVxdWVzdChuLHQsZSk7KHIuX3JlcXVlc3Q9ZSkuZ2V0UHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24odCl7ci5faW5jcmVhc2VNdWx0aXBsaWVyKCksci5fcmVxdWVzdD12b2lkIDAsci5fdXBkYXRlUHJvZ3Jlc3ModC5jdXJyZW50KSx0LmZpbmFsaXplZD8oci5fbWV0YWRhdGE9dC5tZXRhZGF0YSxyLl90cmFuc2l0aW9uKFwic3VjY2Vzc1wiKSk6ci5jb21wbGV0ZVRyYW5zaXRpb25zXygpfSxyLl9lcnJvckhhbmRsZXIpfSl9LFpMLnByb3RvdHlwZS5faW5jcmVhc2VNdWx0aXBsaWVyPWZ1bmN0aW9uKCl7MjYyMTQ0KnRoaXMuX2NodW5rTXVsdGlwbGllcjwzMzU1NDQzMiYmKHRoaXMuX2NodW5rTXVsdGlwbGllcio9Mil9LFpMLnByb3RvdHlwZS5fZmV0Y2hNZXRhZGF0YT1mdW5jdGlvbigpe3ZhciByPXRoaXM7dGhpcy5fcmVzb2x2ZVRva2VuKGZ1bmN0aW9uKHQsZSl7dmFyIG49Qkwoci5fcmVmLnN0b3JhZ2Usci5fcmVmLl9sb2NhdGlvbixyLl9tYXBwaW5ncyksZT1yLl9yZWYuc3RvcmFnZS5fbWFrZVJlcXVlc3Qobix0LGUpOyhyLl9yZXF1ZXN0PWUpLmdldFByb21pc2UoKS50aGVuKGZ1bmN0aW9uKHQpe3IuX3JlcXVlc3Q9dm9pZCAwLHIuX21ldGFkYXRhPXQsci5fdHJhbnNpdGlvbihcInN1Y2Nlc3NcIil9LHIuX21ldGFkYXRhRXJyb3JIYW5kbGVyKX0pfSxaTC5wcm90b3R5cGUuX29uZVNob3RVcGxvYWQ9ZnVuY3Rpb24oKXt2YXIgcj10aGlzO3RoaXMuX3Jlc29sdmVUb2tlbihmdW5jdGlvbih0LGUpe3ZhciBuPVdMKHIuX3JlZi5zdG9yYWdlLHIuX3JlZi5fbG9jYXRpb24sci5fbWFwcGluZ3Msci5fYmxvYixyLl9tZXRhZGF0YSksZT1yLl9yZWYuc3RvcmFnZS5fbWFrZVJlcXVlc3Qobix0LGUpOyhyLl9yZXF1ZXN0PWUpLmdldFByb21pc2UoKS50aGVuKGZ1bmN0aW9uKHQpe3IuX3JlcXVlc3Q9dm9pZCAwLHIuX21ldGFkYXRhPXQsci5fdXBkYXRlUHJvZ3Jlc3Moci5fYmxvYi5zaXplKCkpLHIuX3RyYW5zaXRpb24oXCJzdWNjZXNzXCIpfSxyLl9lcnJvckhhbmRsZXIpfSl9LFpMLnByb3RvdHlwZS5fdXBkYXRlUHJvZ3Jlc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdHJhbnNmZXJyZWQ7dGhpcy5fdHJhbnNmZXJyZWQ9dCx0aGlzLl90cmFuc2ZlcnJlZCE9PWUmJnRoaXMuX25vdGlmeU9ic2VydmVycygpfSxaTC5wcm90b3R5cGUuX3RyYW5zaXRpb249ZnVuY3Rpb24odCl7aWYodGhpcy5fc3RhdGUhPT10KXN3aXRjaCh0KXtjYXNlXCJjYW5jZWxpbmdcIjpjYXNlXCJwYXVzaW5nXCI6dGhpcy5fc3RhdGU9dCx2b2lkIDAhPT10aGlzLl9yZXF1ZXN0JiZ0aGlzLl9yZXF1ZXN0LmNhbmNlbCgpO2JyZWFrO2Nhc2VcInJ1bm5pbmdcIjp2YXIgZT1cInBhdXNlZFwiPT09dGhpcy5fc3RhdGU7dGhpcy5fc3RhdGU9dCxlJiYodGhpcy5fbm90aWZ5T2JzZXJ2ZXJzKCksdGhpcy5fc3RhcnQoKSk7YnJlYWs7Y2FzZVwicGF1c2VkXCI6dGhpcy5fc3RhdGU9dCx0aGlzLl9ub3RpZnlPYnNlcnZlcnMoKTticmVhaztjYXNlXCJjYW5jZWxlZFwiOnRoaXMuX2Vycm9yPXF4KCksdGhpcy5fc3RhdGU9dCx0aGlzLl9ub3RpZnlPYnNlcnZlcnMoKTticmVhaztjYXNlXCJlcnJvclwiOmNhc2VcInN1Y2Nlc3NcIjp0aGlzLl9zdGF0ZT10LHRoaXMuX25vdGlmeU9ic2VydmVycygpfX0sWkwucHJvdG90eXBlLmNvbXBsZXRlVHJhbnNpdGlvbnNfPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuX3N0YXRlKXtjYXNlXCJwYXVzaW5nXCI6dGhpcy5fdHJhbnNpdGlvbihcInBhdXNlZFwiKTticmVhaztjYXNlXCJjYW5jZWxpbmdcIjp0aGlzLl90cmFuc2l0aW9uKFwiY2FuY2VsZWRcIik7YnJlYWs7Y2FzZVwicnVubmluZ1wiOnRoaXMuX3N0YXJ0KCl9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoWkwucHJvdG90eXBlLFwic25hcHNob3RcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9bkwodGhpcy5fc3RhdGUpO3JldHVybntieXRlc1RyYW5zZmVycmVkOnRoaXMuX3RyYW5zZmVycmVkLHRvdGFsQnl0ZXM6dGhpcy5fYmxvYi5zaXplKCksc3RhdGU6dCxtZXRhZGF0YTp0aGlzLl9tZXRhZGF0YSx0YXNrOnRoaXMscmVmOnRoaXMuX3JlZn19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksWkwucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPXRoaXMsbz1uZXcgWEwoZSxuLHIpO3JldHVybiB0aGlzLl9hZGRPYnNlcnZlcihvKSxmdW5jdGlvbigpe2kuX3JlbW92ZU9ic2VydmVyKG8pfX0sWkwucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fcHJvbWlzZS50aGVuKHQsZSl9LFpMLnByb3RvdHlwZS5jYXRjaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKG51bGwsdCl9LFpMLnByb3RvdHlwZS5fYWRkT2JzZXJ2ZXI9ZnVuY3Rpb24odCl7dGhpcy5fb2JzZXJ2ZXJzLnB1c2godCksdGhpcy5fbm90aWZ5T2JzZXJ2ZXIodCl9LFpMLnByb3RvdHlwZS5fcmVtb3ZlT2JzZXJ2ZXI9ZnVuY3Rpb24odCl7dD10aGlzLl9vYnNlcnZlcnMuaW5kZXhPZih0KTstMSE9PXQmJnRoaXMuX29ic2VydmVycy5zcGxpY2UodCwxKX0sWkwucHJvdG90eXBlLl9ub3RpZnlPYnNlcnZlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2ZpbmlzaFByb21pc2UoKSx0aGlzLl9vYnNlcnZlcnMuc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX25vdGlmeU9ic2VydmVyKHQpfSl9LFpMLnByb3RvdHlwZS5fZmluaXNoUHJvbWlzZT1mdW5jdGlvbigpe2lmKHZvaWQgMCE9PXRoaXMuX3Jlc29sdmUpe3ZhciB0PSEwO3N3aXRjaChuTCh0aGlzLl9zdGF0ZSkpe2Nhc2UgZUwuU1VDQ0VTUzpKTCh0aGlzLl9yZXNvbHZlLmJpbmQobnVsbCx0aGlzLnNuYXBzaG90KSkoKTticmVhaztjYXNlIGVMLkNBTkNFTEVEOmNhc2UgZUwuRVJST1I6SkwodGhpcy5fcmVqZWN0LmJpbmQobnVsbCx0aGlzLl9lcnJvcikpKCk7YnJlYWs7ZGVmYXVsdDp0PSExfXQmJih0aGlzLl9yZXNvbHZlPXZvaWQgMCx0aGlzLl9yZWplY3Q9dm9pZCAwKX19LFpMLnByb3RvdHlwZS5fbm90aWZ5T2JzZXJ2ZXI9ZnVuY3Rpb24odCl7c3dpdGNoKG5MKHRoaXMuX3N0YXRlKSl7Y2FzZSBlTC5SVU5OSU5HOmNhc2UgZUwuUEFVU0VEOnQubmV4dCYmSkwodC5uZXh0LmJpbmQodCx0aGlzLnNuYXBzaG90KSkoKTticmVhaztjYXNlIGVMLlNVQ0NFU1M6dC5jb21wbGV0ZSYmSkwodC5jb21wbGV0ZS5iaW5kKHQpKSgpO2JyZWFrO2Nhc2UgZUwuQ0FOQ0VMRUQ6Y2FzZSBlTC5FUlJPUjp0LmVycm9yJiZKTCh0LmVycm9yLmJpbmQodCx0aGlzLl9lcnJvcikpKCk7YnJlYWs7ZGVmYXVsdDp0LmVycm9yJiZKTCh0LmVycm9yLmJpbmQodCx0aGlzLl9lcnJvcikpKCl9fSxaTC5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7dmFyIHQ9XCJwYXVzZWRcIj09PXRoaXMuX3N0YXRlfHxcInBhdXNpbmdcIj09PXRoaXMuX3N0YXRlO3JldHVybiB0JiZ0aGlzLl90cmFuc2l0aW9uKFwicnVubmluZ1wiKSx0fSxaTC5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt2YXIgdD1cInJ1bm5pbmdcIj09PXRoaXMuX3N0YXRlO3JldHVybiB0JiZ0aGlzLl90cmFuc2l0aW9uKFwicGF1c2luZ1wiKSx0fSxaTC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dmFyIHQ9XCJydW5uaW5nXCI9PT10aGlzLl9zdGF0ZXx8XCJwYXVzaW5nXCI9PT10aGlzLl9zdGF0ZTtyZXR1cm4gdCYmdGhpcy5fdHJhbnNpdGlvbihcImNhbmNlbGluZ1wiKSx0fSxaTCk7ZnVuY3Rpb24gWkwodCxlLG4pe3ZhciByPXRoaXM7dm9pZCAwPT09biYmKG49bnVsbCksdGhpcy5fdHJhbnNmZXJyZWQ9MCx0aGlzLl9uZWVkVG9GZXRjaFN0YXR1cz0hMSx0aGlzLl9uZWVkVG9GZXRjaE1ldGFkYXRhPSExLHRoaXMuX29ic2VydmVycz1bXSx0aGlzLl9lcnJvcj12b2lkIDAsdGhpcy5fdXBsb2FkVXJsPXZvaWQgMCx0aGlzLl9yZXF1ZXN0PXZvaWQgMCx0aGlzLl9jaHVua011bHRpcGxpZXI9MSx0aGlzLl9yZXNvbHZlPXZvaWQgMCx0aGlzLl9yZWplY3Q9dm9pZCAwLHRoaXMuX3JlZj10LHRoaXMuX2Jsb2I9ZSx0aGlzLl9tZXRhZGF0YT1uLHRoaXMuX21hcHBpbmdzPU5MKCksdGhpcy5fcmVzdW1hYmxlPXRoaXMuX3Nob3VsZERvUmVzdW1hYmxlKHRoaXMuX2Jsb2IpLHRoaXMuX3N0YXRlPVwicnVubmluZ1wiLHRoaXMuX2Vycm9ySGFuZGxlcj1mdW5jdGlvbih0KXtyLl9yZXF1ZXN0PXZvaWQgMCxyLl9jaHVua011bHRpcGxpZXI9MSx0Ll9jb2RlRXF1YWxzKFwiY2FuY2VsZWRcIik/KHIuX25lZWRUb0ZldGNoU3RhdHVzPSEwLHIuY29tcGxldGVUcmFuc2l0aW9uc18oKSk6KHIuX2Vycm9yPXQsci5fdHJhbnNpdGlvbihcImVycm9yXCIpKX0sdGhpcy5fbWV0YWRhdGFFcnJvckhhbmRsZXI9ZnVuY3Rpb24odCl7ci5fcmVxdWVzdD12b2lkIDAsdC5fY29kZUVxdWFscyhcImNhbmNlbGVkXCIpP3IuY29tcGxldGVUcmFuc2l0aW9uc18oKTooci5fZXJyb3I9dCxyLl90cmFuc2l0aW9uKFwiZXJyb3JcIikpfSx0aGlzLl9wcm9taXNlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsZSl7ci5fcmVzb2x2ZT10LHIuX3JlamVjdD1lLHIuX3N0YXJ0KCl9KSx0aGlzLl9wcm9taXNlLnRoZW4obnVsbCxmdW5jdGlvbigpe30pfXZhciB0TT0oZU0ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJnczovL1wiK3RoaXMuX2xvY2F0aW9uLmJ1Y2tldCtcIi9cIit0aGlzLl9sb2NhdGlvbi5wYXRofSxlTS5wcm90b3R5cGUuX25ld1JlZj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgZU0odCxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGVNLnByb3RvdHlwZSxcInJvb3RcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHNMKHRoaXMuX2xvY2F0aW9uLmJ1Y2tldCxcIlwiKTtyZXR1cm4gdGhpcy5fbmV3UmVmKHRoaXMuX3NlcnZpY2UsdCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGVNLnByb3RvdHlwZSxcImJ1Y2tldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYXRpb24uYnVja2V0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlTS5wcm90b3R5cGUsXCJmdWxsUGF0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYXRpb24ucGF0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZU0ucHJvdG90eXBlLFwibmFtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gRUwodGhpcy5fbG9jYXRpb24ucGF0aCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGVNLnByb3RvdHlwZSxcInN0b3JhZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlcnZpY2V9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGVNLnByb3RvdHlwZSxcInBhcmVudFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbih0KXtpZigwPT09dC5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIGU9dC5sYXN0SW5kZXhPZihcIi9cIik7cmV0dXJuLTE9PT1lP1wiXCI6dC5zbGljZSgwLGUpfSh0aGlzLl9sb2NhdGlvbi5wYXRoKTtpZihudWxsPT09dClyZXR1cm4gbnVsbDt0PW5ldyBzTCh0aGlzLl9sb2NhdGlvbi5idWNrZXQsdCk7cmV0dXJuIG5ldyBlTSh0aGlzLl9zZXJ2aWNlLHQpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGVNLnByb3RvdHlwZS5fdGhyb3dJZlJvb3Q9ZnVuY3Rpb24odCl7aWYoXCJcIj09PXRoaXMuX2xvY2F0aW9uLnBhdGgpdGhyb3cgV3godCl9LGVNKTtmdW5jdGlvbiBlTSh0LGUpe3RoaXMuX3NlcnZpY2U9dCx0aGlzLl9sb2NhdGlvbj1lIGluc3RhbmNlb2Ygc0w/ZTpzTC5tYWtlRnJvbVVybChlLHQuaG9zdCl9ZnVuY3Rpb24gbk0odCl7dmFyIGU9e3ByZWZpeGVzOltdLGl0ZW1zOltdfTtyZXR1cm4gZnVuY3Rpb24gcihpLG8sYSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxyTShpLHtwYWdlVG9rZW46YX0pXTtjYXNlIDE6cmV0dXJuIGU9dC5zZW50KCksKG49by5wcmVmaXhlcykucHVzaC5hcHBseShuLGUucHJlZml4ZXMpLChuPW8uaXRlbXMpLnB1c2guYXBwbHkobixlLml0ZW1zKSxudWxsPT1lLm5leHRQYWdlVG9rZW4/WzMsM106WzQscihpLG8sZS5uZXh0UGFnZVRva2VuKV07Y2FzZSAyOnQuc2VudCgpLHQubGFiZWw9MztjYXNlIDM6cmV0dXJuWzJdfX0pfSl9KHQsZSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlfSl9ZnVuY3Rpb24gck0odSxjKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIHM7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbnVsbCE9YyYmXCJudW1iZXJcIj09dHlwZW9mIGMubWF4UmVzdWx0cyYmZEwoXCJvcHRpb25zLm1heFJlc3VsdHNcIiwxLDFlMyxjLm1heFJlc3VsdHMpLHM9Y3x8e30sZT11LnN0b3JhZ2Usbj11Ll9sb2NhdGlvbixyPVwiL1wiLGk9cy5wYWdlVG9rZW4sbz1zLm1heFJlc3VsdHMsYT17fSxuLmlzUm9vdD9hLnByZWZpeD1cIlwiOmEucHJlZml4PW4ucGF0aCtcIi9cIixyJiYwPHIubGVuZ3RoJiYoYS5kZWxpbWl0ZXI9ciksaSYmKGEucGFnZVRva2VuPWkpLG8mJihhLm1heFJlc3VsdHM9byksaT12TChuLmJ1Y2tldE9ubHlTZXJ2ZXJVcmwoKSxlLmhvc3QpLG89ZS5tYXhPcGVyYXRpb25SZXRyeVRpbWUsKG89bmV3IExMKGksXCJHRVRcIixVTChlLG4uYnVja2V0KSxvKSkudXJsUGFyYW1zPWEsby5lcnJvckhhbmRsZXI9cUwobiksWzQsdS5zdG9yYWdlLm1ha2VSZXF1ZXN0V2l0aFRva2VucyhvKV07Y2FzZSAxOnJldHVyblsyLHQuc2VudCgpLmdldFByb21pc2UoKV19dmFyIGUsbixyLGksbyxhfSl9KX1mdW5jdGlvbiBpTShzLHUpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBzLl90aHJvd0lmUm9vdChcInVwZGF0ZU1ldGFkYXRhXCIpLGU9cy5zdG9yYWdlLG49cy5fbG9jYXRpb24scj11LGk9TkwoKSxvPXZMKG4uZnVsbFNlcnZlclVybCgpLGUuaG9zdCksYT1QTChyLGkpLHI9ZS5tYXhPcGVyYXRpb25SZXRyeVRpbWUsKHI9bmV3IExMKG8sXCJQQVRDSFwiLEZMKGUsaSkscikpLmhlYWRlcnM9e1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCJ9LHIuYm9keT1hLHIuZXJyb3JIYW5kbGVyPVZMKG4pLFs0LHMuc3RvcmFnZS5tYWtlUmVxdWVzdFdpdGhUb2tlbnMocildO2Nhc2UgMTpyZXR1cm5bMix0LnNlbnQoKS5nZXRQcm9taXNlKCldfXZhciBlLG4scixpLG8sYX0pfSl9ZnVuY3Rpb24gb00oYSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGEuX3Rocm93SWZSb290KFwiZ2V0RG93bmxvYWRVUkxcIiksZT1hLnN0b3JhZ2Usbj1hLl9sb2NhdGlvbixyPU5MKCksaT12TChuLmZ1bGxTZXJ2ZXJVcmwoKSxlLmhvc3QpLG89ZS5tYXhPcGVyYXRpb25SZXRyeVRpbWUsKG89bmV3IExMKGksXCJHRVRcIixqTChlLHIpLG8pKS5lcnJvckhhbmRsZXI9VkwobiksWzQsYS5zdG9yYWdlLm1ha2VSZXF1ZXN0V2l0aFRva2VucyhvKV07Y2FzZSAxOnJldHVyblsyLHQuc2VudCgpLmdldFByb21pc2UoKS50aGVuKGZ1bmN0aW9uKHQpe2lmKG51bGw9PT10KXRocm93IG5ldyBNeChcIm5vLWRvd25sb2FkLXVybFwiLFwiVGhlIGdpdmVuIGZpbGUgZG9lcyBub3QgaGF2ZSBhbnkgZG93bmxvYWQgVVJMcy5cIik7cmV0dXJuIHR9KV19dmFyIGUsbixyLGksb30pfSl9ZnVuY3Rpb24gYU0oaSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGkuX3Rocm93SWZSb290KFwiZGVsZXRlT2JqZWN0XCIpLGU9aS5zdG9yYWdlLG49aS5fbG9jYXRpb24scj12TChuLmZ1bGxTZXJ2ZXJVcmwoKSxlLmhvc3QpLGU9ZS5tYXhPcGVyYXRpb25SZXRyeVRpbWUsKGU9bmV3IExMKHIsXCJERUxFVEVcIixmdW5jdGlvbih0LGUpe30sZSkpLnN1Y2Nlc3NDb2Rlcz1bMjAwLDIwNF0sZS5lcnJvckhhbmRsZXI9VkwobiksWzQsaS5zdG9yYWdlLm1ha2VSZXF1ZXN0V2l0aFRva2VucyhlKV07Y2FzZSAxOnJldHVyblsyLHQuc2VudCgpLmdldFByb21pc2UoKV19dmFyIGUsbixyfSl9KX1mdW5jdGlvbiBzTSh0LGUpe3ZhciBuLGU9KG49dC5fbG9jYXRpb24ucGF0aCxlPShlPWUpLnNwbGl0KFwiL1wiKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIDA8dC5sZW5ndGh9KS5qb2luKFwiL1wiKSwwPT09bi5sZW5ndGg/ZTpuK1wiL1wiK2UpLGU9bmV3IHNMKHQuX2xvY2F0aW9uLmJ1Y2tldCxlKTtyZXR1cm4gbmV3IHRNKHQuc3RvcmFnZSxlKX1mdW5jdGlvbiB1TSh0KXtyZXR1cm4vXltBLVphLXpdKzpcXC9cXC8vLnRlc3QodCl9ZnVuY3Rpb24gY00odCxlKXtpZih0IGluc3RhbmNlb2YgZk0pe3ZhciBuPXQ7aWYobnVsbD09bi5fYnVja2V0KXRocm93IG5ldyBNeChcIm5vLWRlZmF1bHQtYnVja2V0XCIsXCJObyBkZWZhdWx0IGJ1Y2tldCBmb3VuZC4gRGlkIHlvdSBzZXQgdGhlICdcIitMeCtcIicgcHJvcGVydHkgd2hlbiBpbml0aWFsaXppbmcgdGhlIGFwcD9cIik7bj1uZXcgdE0obixuLl9idWNrZXQpO3JldHVybiBudWxsIT1lP2NNKG4sZSk6bn1pZih2b2lkIDA9PT1lKXJldHVybiB0O2lmKGUuaW5jbHVkZXMoXCIuLlwiKSl0aHJvdyBCeCgnYHBhdGhgIHBhcmFtIGNhbm5vdCBjb250YWluIFwiLi5cIicpO3JldHVybiBzTSh0LGUpfWZ1bmN0aW9uIGhNKHQsZSl7aWYoZSYmdU0oZSkpe2lmKHQgaW5zdGFuY2VvZiBmTSlyZXR1cm4gbmV3IHRNKHQsZSk7dGhyb3cgQngoXCJUbyB1c2UgcmVmKHNlcnZpY2UsIHVybCksIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgU3RvcmFnZSBpbnN0YW5jZS5cIil9cmV0dXJuIGNNKHQsZSl9ZnVuY3Rpb24gbE0odCxlKXtlPW51bGw9PWU/dm9pZCAwOmVbTHhdO3JldHVybiBudWxsPT1lP251bGw6c0wubWFrZUZyb21CdWNrZXRTcGVjKGUsdCl9dmFyIGZNPShPYmplY3QuZGVmaW5lUHJvcGVydHkocE0ucHJvdG90eXBlLFwiaG9zdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faG9zdH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2hvc3Q9dCxudWxsIT10aGlzLl91cmw/dGhpcy5fYnVja2V0PXNMLm1ha2VGcm9tQnVja2V0U3BlYyh0aGlzLl91cmwsdCk6dGhpcy5fYnVja2V0PWxNKHQsdGhpcy5hcHAub3B0aW9ucyl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHBNLnByb3RvdHlwZSxcIm1heFVwbG9hZFJldHJ5VGltZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4VXBsb2FkUmV0cnlUaW1lfSxzZXQ6ZnVuY3Rpb24odCl7ZEwoXCJ0aW1lXCIsMCxOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksdCksdGhpcy5fbWF4VXBsb2FkUmV0cnlUaW1lPXR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHBNLnByb3RvdHlwZSxcIm1heE9wZXJhdGlvblJldHJ5VGltZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4T3BlcmF0aW9uUmV0cnlUaW1lfSxzZXQ6ZnVuY3Rpb24odCl7ZEwoXCJ0aW1lXCIsMCxOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksdCksdGhpcy5fbWF4T3BlcmF0aW9uUmV0cnlUaW1lPXR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSkscE0ucHJvdG90eXBlLl9nZXRBdXRoVG9rZW49ZnVuY3Rpb24oKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4oZT10aGlzLl9hdXRoUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtvcHRpb25hbDohMH0pKT9bNCxlLmdldFRva2VuKCldOlszLDJdO2Nhc2UgMTppZihudWxsIT09KGU9dC5zZW50KCkpKXJldHVyblsyLGUuYWNjZXNzVG9rZW5dO3QubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzIsbnVsbF19fSl9KX0scE0ucHJvdG90eXBlLl9nZXRBcHBDaGVja1Rva2VuPWZ1bmN0aW9uKCl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuKGU9dGhpcy5fYXBwQ2hlY2tQcm92aWRlci5nZXRJbW1lZGlhdGUoe29wdGlvbmFsOiEwfSkpP1s0LGUuZ2V0VG9rZW4oKV06WzMsMl07Y2FzZSAxOnJldHVyblsyLHQuc2VudCgpLnRva2VuXTtjYXNlIDI6cmV0dXJuWzIsbnVsbF19fSl9KX0scE0ucHJvdG90eXBlLl9kZWxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZXRlZD0hMCx0aGlzLl9yZXF1ZXN0cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNhbmNlbCgpfSksdGhpcy5fcmVxdWVzdHMuY2xlYXIoKSxQcm9taXNlLnJlc29sdmUoKX0scE0ucHJvdG90eXBlLl9tYWtlU3RvcmFnZVJlZmVyZW5jZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHRNKHRoaXMsdCl9LHBNLnByb3RvdHlwZS5fbWFrZVJlcXVlc3Q9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7aWYodGhpcy5fZGVsZXRlZClyZXR1cm4gbmV3IGNMKEt4KCkpO3ZhciBpLG8sYSxzLHUsYyxoPShpPXQsbz10aGlzLl9hcHBJZCxhPWUscz1uLHU9dGhpcy5fcG9vbCxjPXRoaXMuX2ZpcmViYXNlVmVyc2lvbix0PWdMKGkudXJsUGFyYW1zKSxlPWkudXJsK3Qsbj1PYmplY3QuYXNzaWduKHt9LGkuaGVhZGVycyksdD1uLChvPW8pJiYodFtcIlgtRmlyZWJhc2UtR01QSURcIl09byksbz1uLG51bGwhPT0oYT1hKSYmMDxhLmxlbmd0aCYmKG8uQXV0aG9yaXphdGlvbj1cIkZpcmViYXNlIFwiK2EpLGM9YyxuW1wiWC1GaXJlYmFzZS1TdG9yYWdlLVZlcnNpb25cIl09XCJ3ZWJqcy9cIisobnVsbCE9Yz9jOlwiQXBwTWFuYWdlclwiKSxjPW4sbnVsbCE9PShzPXMpJiYoY1tcIlgtRmlyZWJhc2UtQXBwQ2hlY2tcIl09cyksbmV3IHlMKGUsaS5tZXRob2QsbixpLmJvZHksaS5zdWNjZXNzQ29kZXMsaS5hZGRpdGlvbmFsUmV0cnlDb2RlcyxpLmhhbmRsZXIsaS5lcnJvckhhbmRsZXIsaS50aW1lb3V0LGkucHJvZ3Jlc3NDYWxsYmFjayx1KSk7cmV0dXJuIHRoaXMuX3JlcXVlc3RzLmFkZChoKSxoLmdldFByb21pc2UoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHIuX3JlcXVlc3RzLmRlbGV0ZShoKX0sZnVuY3Rpb24oKXtyZXR1cm4gci5fcmVxdWVzdHMuZGVsZXRlKGgpfSksaH0scE0ucHJvdG90eXBlLm1ha2VSZXF1ZXN0V2l0aFRva2Vucz1mdW5jdGlvbihyKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LFByb21pc2UuYWxsKFt0aGlzLl9nZXRBdXRoVG9rZW4oKSx0aGlzLl9nZXRBcHBDaGVja1Rva2VuKCldKV07Y2FzZSAxOnJldHVybiBuPXQuc2VudCgpLGU9blswXSxuPW5bMV0sWzIsdGhpcy5fbWFrZVJlcXVlc3QocixlLG4pXX19KX0pfSxwTSk7ZnVuY3Rpb24gcE0odCxlLG4scixpLG8pe3RoaXMuYXBwPXQsdGhpcy5fYXV0aFByb3ZpZGVyPWUsdGhpcy5fYXBwQ2hlY2tQcm92aWRlcj1uLHRoaXMuX3Bvb2w9cix0aGlzLl91cmw9aSx0aGlzLl9maXJlYmFzZVZlcnNpb249byx0aGlzLl9idWNrZXQ9bnVsbCx0aGlzLl9ob3N0PXh4LHRoaXMuX2FwcElkPW51bGwsdGhpcy5fZGVsZXRlZD0hMSx0aGlzLl9tYXhPcGVyYXRpb25SZXRyeVRpbWU9MTJlNCx0aGlzLl9tYXhVcGxvYWRSZXRyeVRpbWU9NmU1LHRoaXMuX3JlcXVlc3RzPW5ldyBTZXQsdGhpcy5fYnVja2V0PW51bGwhPWk/c0wubWFrZUZyb21CdWNrZXRTcGVjKGksdGhpcy5faG9zdCk6bE0odGhpcy5faG9zdCx0aGlzLmFwcC5vcHRpb25zKX1mdW5jdGlvbiBkTSh0LGUsbil7cmV0dXJuIHQ9dGEodCksZT1lLG49biwodD10KS5fdGhyb3dJZlJvb3QoXCJ1cGxvYWRCeXRlc1Jlc3VtYWJsZVwiKSxuZXcgJEwodCxuZXcgd0woZSksbil9ZnVuY3Rpb24gdk0odCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBuLl90aHJvd0lmUm9vdChcImdldE1ldGFkYXRhXCIpLGU9Qkwobi5zdG9yYWdlLG4uX2xvY2F0aW9uLE5MKCkpLFs0LG4uc3RvcmFnZS5tYWtlUmVxdWVzdFdpdGhUb2tlbnMoZSldO2Nhc2UgMTpyZXR1cm5bMix0LnNlbnQoKS5nZXRQcm9taXNlKCldfX0pfSl9KHQ9dGEodCkpfWZ1bmN0aW9uIGdNKHQsZSl7cmV0dXJuIGhNKHQ9dGEodCksZSl9dmFyIHlNPShPYmplY3QuZGVmaW5lUHJvcGVydHkobU0ucHJvdG90eXBlLFwiYnl0ZXNUcmFuc2ZlcnJlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUuYnl0ZXNUcmFuc2ZlcnJlZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobU0ucHJvdG90eXBlLFwibWV0YWRhdGFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLm1ldGFkYXRhfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtTS5wcm90b3R5cGUsXCJzdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUuc3RhdGV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG1NLnByb3RvdHlwZSxcInRvdGFsQnl0ZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRvdGFsQnl0ZXN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksbU0pO2Z1bmN0aW9uIG1NKHQsZSxuKXt0aGlzLl9kZWxlZ2F0ZT10LHRoaXMudGFzaz1lLHRoaXMucmVmPW59dmFyIGJNPShPYmplY3QuZGVmaW5lUHJvcGVydHkoX00ucHJvdG90eXBlLFwic25hcHNob3RcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB5TSh0aGlzLl9kZWxlZ2F0ZS5zbmFwc2hvdCx0aGlzLHRoaXMuX3JlZil9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksX00ucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3JldHVybiB0aGlzLl9kZWxlZ2F0ZS50aGVuKGZ1bmN0aW9uKHQpe2lmKGUpcmV0dXJuIGUobmV3IHlNKHQsbixuLl9yZWYpKX0sdCl9LF9NLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgaT10aGlzLG89dm9pZCAwO3JldHVybiBlJiYobz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2Z1bmN0aW9uKHQpe3JldHVybiBlKG5ldyB5TSh0LGksaS5fcmVmKSl9OntuZXh0OmUubmV4dD9mdW5jdGlvbih0KXtyZXR1cm4gZS5uZXh0KG5ldyB5TSh0LGksaS5fcmVmKSl9OnZvaWQgMCxjb21wbGV0ZTplLmNvbXBsZXRlfHx2b2lkIDAsZXJyb3I6ZS5lcnJvcnx8dm9pZCAwfSksdGhpcy5fZGVsZWdhdGUub24odCxvLG58fHZvaWQgMCxyfHx2b2lkIDApfSxfTSk7ZnVuY3Rpb24gX00odCxlKXt0aGlzLl9kZWxlZ2F0ZT10LHRoaXMuX3JlZj1lLHRoaXMuY2FuY2VsPXRoaXMuX2RlbGVnYXRlLmNhbmNlbC5iaW5kKHRoaXMuX2RlbGVnYXRlKSx0aGlzLmNhdGNoPXRoaXMuX2RlbGVnYXRlLmNhdGNoLmJpbmQodGhpcy5fZGVsZWdhdGUpLHRoaXMucGF1c2U9dGhpcy5fZGVsZWdhdGUucGF1c2UuYmluZCh0aGlzLl9kZWxlZ2F0ZSksdGhpcy5yZXN1bWU9dGhpcy5fZGVsZWdhdGUucmVzdW1lLmJpbmQodGhpcy5fZGVsZWdhdGUpfXZhciB3TT0oT2JqZWN0LmRlZmluZVByb3BlcnR5KElNLnByb3RvdHlwZSxcInByZWZpeGVzXCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLnByZWZpeGVzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFRNKHQsZS5fc2VydmljZSl9KX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoSU0ucHJvdG90eXBlLFwiaXRlbXNcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fZGVsZWdhdGUuaXRlbXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgVE0odCxlLl9zZXJ2aWNlKX0pfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJTS5wcm90b3R5cGUsXCJuZXh0UGFnZVRva2VuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5uZXh0UGFnZVRva2VufHxudWxsfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLElNKTtmdW5jdGlvbiBJTSh0LGUpe3RoaXMuX2RlbGVnYXRlPXQsdGhpcy5fc2VydmljZT1lfXZhciBUTT0oT2JqZWN0LmRlZmluZVByb3BlcnR5KEVNLnByb3RvdHlwZSxcIm5hbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLm5hbWV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEVNLnByb3RvdHlwZSxcImJ1Y2tldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUuYnVja2V0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFTS5wcm90b3R5cGUsXCJmdWxsUGF0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUuZnVsbFBhdGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksRU0ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRvU3RyaW5nKCl9LEVNLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEVNKHNNKHRoaXMuX2RlbGVnYXRlLHQpLHRoaXMuc3RvcmFnZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFTS5wcm90b3R5cGUsXCJyb290XCIse2dldDpmdW5jdGlvbigpe3JldHVybiBuZXcgRU0odGhpcy5fZGVsZWdhdGUucm9vdCx0aGlzLnN0b3JhZ2UpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFTS5wcm90b3R5cGUsXCJwYXJlbnRcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGVsZWdhdGUucGFyZW50O3JldHVybiBudWxsPT10P251bGw6bmV3IEVNKHQsdGhpcy5zdG9yYWdlKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxFTS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3Rocm93SWZSb290KFwicHV0XCIpLG5ldyBiTShkTSh0aGlzLl9kZWxlZ2F0ZSx0LGUpLHRoaXMpfSxFTS5wcm90b3R5cGUucHV0U3RyaW5nPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT16eC5SQVcpLHRoaXMuX3Rocm93SWZSb290KFwicHV0U3RyaW5nXCIpO3Q9WXgoZSx0KSxuPUppKHt9LG4pO3JldHVybiBudWxsPT1uLmNvbnRlbnRUeXBlJiZudWxsIT10LmNvbnRlbnRUeXBlJiYobi5jb250ZW50VHlwZT10LmNvbnRlbnRUeXBlKSxuZXcgYk0obmV3ICRMKHRoaXMuX2RlbGVnYXRlLG5ldyB3TCh0LmRhdGEsITApLG4pLHRoaXMpfSxFTS5wcm90b3R5cGUubGlzdEFsbD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5NKHRhKHRoaXMuX2RlbGVnYXRlKSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbmV3IHdNKHQsZS5zdG9yYWdlKX0pfSxFTS5wcm90b3R5cGUubGlzdD1mdW5jdGlvbih0KXt2YXIgZSxuPXRoaXM7cmV0dXJuIGU9dGhpcy5fZGVsZWdhdGUsdD10fHx2b2lkIDAsck0oZT10YShlKSx0KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgd00odCxuLnN0b3JhZ2UpfSl9LEVNLnByb3RvdHlwZS5nZXRNZXRhZGF0YT1mdW5jdGlvbigpe3JldHVybiB2TSh0aGlzLl9kZWxlZ2F0ZSl9LEVNLnByb3RvdHlwZS51cGRhdGVNZXRhZGF0YT1mdW5jdGlvbih0KXtyZXR1cm4gZT10aGlzLl9kZWxlZ2F0ZSx0PXQsaU0oZT10YShlKSx0KTt2YXIgZX0sRU0ucHJvdG90eXBlLmdldERvd25sb2FkVVJMPWZ1bmN0aW9uKCl7cmV0dXJuIG9NKHRhKHRoaXMuX2RlbGVnYXRlKSl9LEVNLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGhyb3dJZlJvb3QoXCJkZWxldGVcIiksYU0odGEodGhpcy5fZGVsZWdhdGUpKX0sRU0ucHJvdG90eXBlLl90aHJvd0lmUm9vdD1mdW5jdGlvbih0KXtpZihcIlwiPT09dGhpcy5fZGVsZWdhdGUuX2xvY2F0aW9uLnBhdGgpdGhyb3cgV3godCl9LEVNKTtmdW5jdGlvbiBFTSh0LGUpe3RoaXMuX2RlbGVnYXRlPXQsdGhpcy5zdG9yYWdlPWV9dmFyIFNNPShPYmplY3QuZGVmaW5lUHJvcGVydHkoQ00ucHJvdG90eXBlLFwibWF4T3BlcmF0aW9uUmV0cnlUaW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5tYXhPcGVyYXRpb25SZXRyeVRpbWV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KENNLnByb3RvdHlwZSxcIm1heFVwbG9hZFJldHJ5VGltZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUubWF4VXBsb2FkUmV0cnlUaW1lfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLENNLnByb3RvdHlwZS5yZWY9ZnVuY3Rpb24odCl7aWYodU0odCkpdGhyb3cgQngoXCJyZWYoKSBleHBlY3RlZCBhIGNoaWxkIHBhdGggYnV0IGdvdCBhIFVSTCwgdXNlIHJlZkZyb21VUkwgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBUTShnTSh0aGlzLl9kZWxlZ2F0ZSx0KSx0aGlzKX0sQ00ucHJvdG90eXBlLnJlZkZyb21VUkw9ZnVuY3Rpb24odCl7aWYoIXVNKHQpKXRocm93IEJ4KFwicmVmRnJvbVVSTCgpIGV4cGVjdGVkIGEgZnVsbCBVUkwgYnV0IGdvdCBhIGNoaWxkIHBhdGgsIHVzZSByZWYoKSBpbnN0ZWFkLlwiKTt0cnl7c0wubWFrZUZyb21VcmwodCx0aGlzLl9kZWxlZ2F0ZS5ob3N0KX1jYXRjaCh0KXt0aHJvdyBCeChcInJlZkZyb21VcmwoKSBleHBlY3RlZCBhIHZhbGlkIGZ1bGwgVVJMIGJ1dCBnb3QgYW4gaW52YWxpZCBvbmUuXCIpfXJldHVybiBuZXcgVE0oZ00odGhpcy5fZGVsZWdhdGUsdCksdGhpcyl9LENNLnByb3RvdHlwZS5zZXRNYXhVcGxvYWRSZXRyeVRpbWU9ZnVuY3Rpb24odCl7dGhpcy5fZGVsZWdhdGUubWF4VXBsb2FkUmV0cnlUaW1lPXR9LENNLnByb3RvdHlwZS5zZXRNYXhPcGVyYXRpb25SZXRyeVRpbWU9ZnVuY3Rpb24odCl7dGhpcy5fZGVsZWdhdGUubWF4T3BlcmF0aW9uUmV0cnlUaW1lPXR9LENNLnByb3RvdHlwZS51c2VFbXVsYXRvcj1mdW5jdGlvbih0LGUpe3ZhciBuO249dGhpcy5fZGVsZWdhdGUsdD10LGU9ZSxuLmhvc3Q9XCJodHRwOi8vXCIrdCtcIjpcIitlfSxDTSk7ZnVuY3Rpb24gQ00odCxlKXt2YXIgbj10aGlzO3RoaXMuYXBwPXQsdGhpcy5fZGVsZWdhdGU9ZSx0aGlzLklOVEVSTkFMPXtkZWxldGU6ZnVuY3Rpb24oKXtyZXR1cm4gbi5fZGVsZWdhdGUuX2RlbGV0ZSgpfX19dmFyIGtNLE5NO2Z1bmN0aW9uIEFNKHQsZSl7dmFyIG49ZS5pbnN0YW5jZUlkZW50aWZpZXIscj10LmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLGU9dC5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIiksdD10LmdldFByb3ZpZGVyKFwiYXBwLWNoZWNrLWludGVybmFsXCIpO3JldHVybiBuZXcgU00ocixuZXcgZk0ocixlLHQsbmV3IG9MLG4sWGwuU0RLX1ZFUlNJT04pKX1OTT17VGFza1N0YXRlOmVMLFRhc2tFdmVudDp0TCxTdHJpbmdGb3JtYXQ6engsU3RvcmFnZTpmTSxSZWZlcmVuY2U6VE19LChrTT1YbCkuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IGVhKFwic3RvcmFnZVwiLEFNLFwiUFVCTElDXCIpLnNldFNlcnZpY2VQcm9wcyhOTSkuc2V0TXVsdGlwbGVJbnN0YW5jZXMoITApKSxrTS5yZWdpc3RlclZlcnNpb24oXCJAZmlyZWJhc2Uvc3RvcmFnZVwiLFwiMC41LjJcIik7dmFyIFJNLFBNLE9NPVwiMC40LjEyXCIsRE09XCJGQi1QRVJGLVRSQUNFLU1FQVNVUkVcIix4TT1cIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS9jb25maWdcIixMTT1cIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS9jb25maWdleHBpcmVcIixHPVwiUGVyZm9ybWFuY2VcIixTbj0oKFNuPXt9KVtcInRyYWNlIHN0YXJ0ZWRcIl09XCJUcmFjZSB7JHRyYWNlTmFtZX0gd2FzIHN0YXJ0ZWQgYmVmb3JlLlwiLFNuW1widHJhY2Ugc3RvcHBlZFwiXT1cIlRyYWNlIHskdHJhY2VOYW1lfSBpcyBub3QgcnVubmluZy5cIixTbltcIm5vbnBvc2l0aXZlIHRyYWNlIHN0YXJ0VGltZVwiXT1cIlRyYWNlIHskdHJhY2VOYW1lfSBzdGFydFRpbWUgc2hvdWxkIGJlIHBvc2l0aXZlLlwiLFNuW1wibm9ucG9zaXRpdmUgdHJhY2UgZHVyYXRpb25cIl09XCJUcmFjZSB7JHRyYWNlTmFtZX0gZHVyYXRpb24gc2hvdWxkIGJlIHBvc2l0aXZlLlwiLFNuW1wibm8gd2luZG93XCJdPVwiV2luZG93IGlzIG5vdCBhdmFpbGFibGUuXCIsU25bXCJubyBhcHAgaWRcIl09XCJBcHAgaWQgaXMgbm90IGF2YWlsYWJsZS5cIixTbltcIm5vIHByb2plY3QgaWRcIl09XCJQcm9qZWN0IGlkIGlzIG5vdCBhdmFpbGFibGUuXCIsU25bXCJubyBhcGkga2V5XCJdPVwiQXBpIGtleSBpcyBub3QgYXZhaWxhYmxlLlwiLFNuW1wiaW52YWxpZCBjYyBsb2dcIl09XCJBdHRlbXB0ZWQgdG8gcXVldWUgaW52YWxpZCBjYyBldmVudFwiLFNuW1wiRkIgbm90IGRlZmF1bHRcIl09XCJQZXJmb3JtYW5jZSBjYW4gb25seSBzdGFydCB3aGVuIEZpcmViYXNlIGFwcCBpbnN0YW5jZSBpcyB0aGUgZGVmYXVsdCBvbmUuXCIsU25bXCJSQyByZXNwb25zZSBub3Qgb2tcIl09XCJSQyByZXNwb25zZSBpcyBub3Qgb2tcIixTbltcImludmFsaWQgYXR0cmlidXRlIG5hbWVcIl09XCJBdHRyaWJ1dGUgbmFtZSB7JGF0dHJpYnV0ZU5hbWV9IGlzIGludmFsaWQuXCIsU25bXCJpbnZhbGlkIGF0dHJpYnV0ZSB2YWx1ZVwiXT1cIkF0dHJpYnV0ZSB2YWx1ZSB7JGF0dHJpYnV0ZVZhbHVlfSBpcyBpbnZhbGlkLlwiLFNuW1wiaW52YWxpZCBjdXN0b20gbWV0cmljIG5hbWVcIl09XCJDdXN0b20gbWV0cmljIG5hbWUgeyRjdXN0b21NZXRyaWNOYW1lfSBpcyBpbnZhbGlkXCIsU25bXCJpbnZhbGlkIFN0cmluZyBtZXJnZXIgaW5wdXRcIl09XCJJbnB1dCBmb3IgU3RyaW5nIG1lcmdlciBpcyBpbnZhbGlkLCBjb250YWN0IHN1cHBvcnQgdGVhbSB0byByZXNvbHZlLlwiLFNuKSxNTT1uZXcga28oXCJwZXJmb3JtYW5jZVwiLEcsU24pLEZNPW5ldyBkYShHKTtGTS5sb2dMZXZlbD11YS5JTkZPO3ZhciBVTSxqTT0ocU0ucHJvdG90eXBlLmdldFVybD1mdW5jdGlvbigpe3JldHVybiB0aGlzLndpbmRvd0xvY2F0aW9uLmhyZWYuc3BsaXQoXCI/XCIpWzBdfSxxTS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXt0aGlzLnBlcmZvcm1hbmNlJiZ0aGlzLnBlcmZvcm1hbmNlLm1hcmsmJnRoaXMucGVyZm9ybWFuY2UubWFyayh0KX0scU0ucHJvdG90eXBlLm1lYXN1cmU9ZnVuY3Rpb24odCxlLG4pe3RoaXMucGVyZm9ybWFuY2UmJnRoaXMucGVyZm9ybWFuY2UubWVhc3VyZSYmdGhpcy5wZXJmb3JtYW5jZS5tZWFzdXJlKHQsZSxuKX0scU0ucHJvdG90eXBlLmdldEVudHJpZXNCeVR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGVyZm9ybWFuY2UmJnRoaXMucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZT90aGlzLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUodCk6W119LHFNLnByb3RvdHlwZS5nZXRFbnRyaWVzQnlOYW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBlcmZvcm1hbmNlJiZ0aGlzLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeU5hbWU/dGhpcy5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlOYW1lKHQpOltdfSxxTS5wcm90b3R5cGUuZ2V0VGltZU9yaWdpbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBlcmZvcm1hbmNlJiYodGhpcy5wZXJmb3JtYW5jZS50aW1lT3JpZ2lufHx0aGlzLnBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQpfSxxTS5wcm90b3R5cGUucmVxdWlyZWRBcGlzQXZhaWxhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIGZldGNoJiZQcm9taXNlJiZ0aGlzLm5hdmlnYXRvciYmdGhpcy5uYXZpZ2F0b3IuY29va2llRW5hYmxlZD8hIV9vKCl8fChGTS5pbmZvKFwiSW5kZXhlZERCIGlzIG5vdCBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c3dlclwiKSwhMSk6KEZNLmluZm8oXCJGaXJlYmFzZSBQZXJmb3JtYW5jZSBjYW5ub3Qgc3RhcnQgaWYgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGZldGNoIGFuZCBQcm9taXNlIG9yIGNvb2tpZSBpcyBkaXNhYmxlZC5cIiksITEpfSxxTS5wcm90b3R5cGUuc2V0dXBPYnNlcnZlcj1mdW5jdGlvbih0LGkpe3RoaXMuUGVyZm9ybWFuY2VPYnNlcnZlciYmbmV3IHRoaXMuUGVyZm9ybWFuY2VPYnNlcnZlcihmdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXQuZ2V0RW50cmllcygpO2U8bi5sZW5ndGg7ZSsrKXt2YXIgcj1uW2VdO2kocil9fSkub2JzZXJ2ZSh7ZW50cnlUeXBlczpbdF19KX0scU0uZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gUk09dm9pZCAwPT09Uk0/bmV3IHFNKFBNKTpSTX0scU0pO2Z1bmN0aW9uIHFNKHQpe2lmKCEodGhpcy53aW5kb3c9dCkpdGhyb3cgTU0uY3JlYXRlKFwibm8gd2luZG93XCIpO3RoaXMucGVyZm9ybWFuY2U9dC5wZXJmb3JtYW5jZSx0aGlzLlBlcmZvcm1hbmNlT2JzZXJ2ZXI9dC5QZXJmb3JtYW5jZU9ic2VydmVyLHRoaXMud2luZG93TG9jYXRpb249dC5sb2NhdGlvbix0aGlzLm5hdmlnYXRvcj10Lm5hdmlnYXRvcix0aGlzLmRvY3VtZW50PXQuZG9jdW1lbnQsdGhpcy5uYXZpZ2F0b3ImJnRoaXMubmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQmJih0aGlzLmxvY2FsU3RvcmFnZT10LmxvY2FsU3RvcmFnZSksdC5wZXJmTWV0cmljcyYmdC5wZXJmTWV0cmljcy5vbkZpcnN0SW5wdXREZWxheSYmKHRoaXMub25GaXJzdElucHV0RGVsYXk9dC5wZXJmTWV0cmljcy5vbkZpcnN0SW5wdXREZWxheSl9ZnVuY3Rpb24gVk0odCxlKXt2YXIgbj10Lmxlbmd0aC1lLmxlbmd0aDtpZihuPDB8fDE8bil0aHJvdyBNTS5jcmVhdGUoXCJpbnZhbGlkIFN0cmluZyBtZXJnZXIgaW5wdXRcIik7Zm9yKHZhciByPVtdLGk9MDtpPHQubGVuZ3RoO2krKylyLnB1c2godC5jaGFyQXQoaSkpLGUubGVuZ3RoPmkmJnIucHVzaChlLmNoYXJBdChpKSk7cmV0dXJuIHIuam9pbihcIlwiKX12YXIgQk0sS00sV009KEhNLnByb3RvdHlwZS5nZXRBcHBJZD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZmlyZWJhc2VBcHBJbnN0YW5jZSYmdGhpcy5maXJlYmFzZUFwcEluc3RhbmNlLm9wdGlvbnMmJnRoaXMuZmlyZWJhc2VBcHBJbnN0YW5jZS5vcHRpb25zLmFwcElkO2lmKCF0KXRocm93IE1NLmNyZWF0ZShcIm5vIGFwcCBpZFwiKTtyZXR1cm4gdH0sSE0ucHJvdG90eXBlLmdldFByb2plY3RJZD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZmlyZWJhc2VBcHBJbnN0YW5jZSYmdGhpcy5maXJlYmFzZUFwcEluc3RhbmNlLm9wdGlvbnMmJnRoaXMuZmlyZWJhc2VBcHBJbnN0YW5jZS5vcHRpb25zLnByb2plY3RJZDtpZighdCl0aHJvdyBNTS5jcmVhdGUoXCJubyBwcm9qZWN0IGlkXCIpO3JldHVybiB0fSxITS5wcm90b3R5cGUuZ2V0QXBpS2V5PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5maXJlYmFzZUFwcEluc3RhbmNlJiZ0aGlzLmZpcmViYXNlQXBwSW5zdGFuY2Uub3B0aW9ucyYmdGhpcy5maXJlYmFzZUFwcEluc3RhbmNlLm9wdGlvbnMuYXBpS2V5O2lmKCF0KXRocm93IE1NLmNyZWF0ZShcIm5vIGFwaSBrZXlcIik7cmV0dXJuIHR9LEhNLnByb3RvdHlwZS5nZXRGbFRyYW5zcG9ydEZ1bGxVcmw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mbFRyYW5zcG9ydEVuZHBvaW50VXJsLmNvbmNhdChcIj9rZXk9XCIsdGhpcy50cmFuc3BvcnRLZXkpfSxITS5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3JldHVybiBVTT12b2lkIDA9PT1VTT9uZXcgSE06VU19LEhNKTtmdW5jdGlvbiBITSgpe3RoaXMuaW5zdHJ1bWVudGF0aW9uRW5hYmxlZD0hMCx0aGlzLmRhdGFDb2xsZWN0aW9uRW5hYmxlZD0hMCx0aGlzLmxvZ2dpbmdFbmFibGVkPSExLHRoaXMudHJhY2VzU2FtcGxpbmdSYXRlPTEsdGhpcy5uZXR3b3JrUmVxdWVzdHNTYW1wbGluZ1JhdGU9MSx0aGlzLmxvZ0VuZFBvaW50VXJsPVwiaHR0cHM6Ly9maXJlYmFzZWxvZ2dpbmcuZ29vZ2xlYXBpcy5jb20vdjBjYy9sb2c/Zm9ybWF0PWpzb25fcHJvdG9cIix0aGlzLmZsVHJhbnNwb3J0RW5kcG9pbnRVcmw9Vk0oXCJodHMvZnJic2xnaWdwLm9nZXBzY212L2llby9lYXlsZ1wiLFwidHA6L2llYWVvZ24tYWdvbGFpLm8vMWZybGdsZ2Mvb1wiKSx0aGlzLnRyYW5zcG9ydEtleT1WTShcIkF6U0M4cjZSZWlHcUZNeWZ2Z293XCIsXCJJYXl4MHUtWFQzdmtzVk0tcElWXCIpLHRoaXMubG9nU291cmNlPTQ2Mix0aGlzLmxvZ1RyYWNlQWZ0ZXJTYW1wbGluZz0hMSx0aGlzLmxvZ05ldHdvcmtBZnRlclNhbXBsaW5nPSExLHRoaXMuY29uZmlnVGltZVRvTGl2ZT0xMn0oRz1LTT1LTXx8e30pW0cuVU5LTk9XTj0wXT1cIlVOS05PV05cIixHW0cuVklTSUJMRT0xXT1cIlZJU0lCTEVcIixHW0cuSElEREVOPTJdPVwiSElEREVOXCI7dmFyIEdNPVtcImZpcmViYXNlX1wiLFwiZ29vZ2xlX1wiLFwiZ2FfXCJdLHpNPW5ldyBSZWdFeHAoXCJeW2EtekEtWl1cXFxcdyokXCIpO2Z1bmN0aW9uIFFNKCl7c3dpdGNoKGpNLmdldEluc3RhbmNlKCkuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKXtjYXNlXCJ2aXNpYmxlXCI6cmV0dXJuIEtNLlZJU0lCTEU7Y2FzZVwiaGlkZGVuXCI6cmV0dXJuIEtNLkhJRERFTjtkZWZhdWx0OnJldHVybiBLTS5VTktOT1dOfX12YXIgWU09XCIwLjAuMVwiLFhNPXtsb2dnaW5nRW5hYmxlZDohMH0sSk09XCJGSVJFQkFTRV9JTlNUQUxMQVRJT05TX0FVVEhcIjtmdW5jdGlvbiAkTSh0KXt2YXIgbixlPWZ1bmN0aW9uKCl7dmFyIHQ9ak0uZ2V0SW5zdGFuY2UoKS5sb2NhbFN0b3JhZ2U7aWYoIXQpcmV0dXJuO3ZhciBlPXQuZ2V0SXRlbShMTSk7aWYoIWV8fCFmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQpPkRhdGUubm93KCl9KGUpKXJldHVybjt2YXIgbj10LmdldEl0ZW0oeE0pO2lmKCFuKXJldHVybjt0cnl7cmV0dXJuIEpTT04ucGFyc2Uobil9Y2F0Y2godCl7cmV0dXJufX0oKTtyZXR1cm4gZT8odEYoZSksUHJvbWlzZS5yZXNvbHZlKCkpOihuPXQsZnVuY3Rpb24oKXt2YXIgdD1XTS5nZXRJbnN0YW5jZSgpLmluc3RhbGxhdGlvbnNTZXJ2aWNlLmdldFRva2VuKCk7cmV0dXJuIHQudGhlbihmdW5jdGlvbih0KXt9KSx0fSgpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGU9XCJodHRwczovL2ZpcmViYXNlcmVtb3RlY29uZmlnLmdvb2dsZWFwaXMuY29tL3YxL3Byb2plY3RzL1wiK1dNLmdldEluc3RhbmNlKCkuZ2V0UHJvamVjdElkKCkrXCIvbmFtZXNwYWNlcy9maXJlcGVyZjpmZXRjaD9rZXk9XCIrV00uZ2V0SW5zdGFuY2UoKS5nZXRBcGlLZXkoKSx0PW5ldyBSZXF1ZXN0KGUse21ldGhvZDpcIlBPU1RcIixoZWFkZXJzOntBdXRob3JpemF0aW9uOkpNK1wiIFwiK3R9LGJvZHk6SlNPTi5zdHJpbmdpZnkoe2FwcF9pbnN0YW5jZV9pZDpuLGFwcF9pbnN0YW5jZV9pZF90b2tlbjp0LGFwcF9pZDpXTS5nZXRJbnN0YW5jZSgpLmdldEFwcElkKCksYXBwX3ZlcnNpb246T00sc2RrX3ZlcnNpb246WU19KX0pO3JldHVybiBmZXRjaCh0KS50aGVuKGZ1bmN0aW9uKHQpe2lmKHQub2spcmV0dXJuIHQuanNvbigpO3Rocm93IE1NLmNyZWF0ZShcIlJDIHJlc3BvbnNlIG5vdCBva1wiKX0pfSkuY2F0Y2goZnVuY3Rpb24oKXtGTS5pbmZvKFpNKX0pLnRoZW4odEYpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGU9ak0uZ2V0SW5zdGFuY2UoKS5sb2NhbFN0b3JhZ2U7aWYoIXR8fCFlKXJldHVybjtlLnNldEl0ZW0oeE0sSlNPTi5zdHJpbmdpZnkodCkpLGUuc2V0SXRlbShMTSxTdHJpbmcoRGF0ZS5ub3coKSs2MCpXTS5nZXRJbnN0YW5jZSgpLmNvbmZpZ1RpbWVUb0xpdmUqNjAqMWUzKSl9LGZ1bmN0aW9uKCl7fSkpfXZhciBaTT1cIkNvdWxkIG5vdCBmZXRjaCBjb25maWcsIHdpbGwgdXNlIGRlZmF1bHQgY29uZmlnc1wiO2Z1bmN0aW9uIHRGKHQpe2lmKCF0KXJldHVybiB0O3ZhciBlPVdNLmdldEluc3RhbmNlKCksbj10LmVudHJpZXN8fHt9O3JldHVybiBlLmxvZ2dpbmdFbmFibGVkPXZvaWQgMCE9PW4uZnByX2VuYWJsZWQ/XCJ0cnVlXCI9PT1TdHJpbmcobi5mcHJfZW5hYmxlZCk6WE0ubG9nZ2luZ0VuYWJsZWQsbi5mcHJfbG9nX3NvdXJjZSYmKGUubG9nU291cmNlPU51bWJlcihuLmZwcl9sb2dfc291cmNlKSksbi5mcHJfbG9nX2VuZHBvaW50X3VybCYmKGUubG9nRW5kUG9pbnRVcmw9bi5mcHJfbG9nX2VuZHBvaW50X3VybCksbi5mcHJfbG9nX3RyYW5zcG9ydF9rZXkmJihlLnRyYW5zcG9ydEtleT1uLmZwcl9sb2dfdHJhbnNwb3J0X2tleSksdm9pZCAwIT09bi5mcHJfdmNfbmV0d29ya19yZXF1ZXN0X3NhbXBsaW5nX3JhdGUmJihlLm5ldHdvcmtSZXF1ZXN0c1NhbXBsaW5nUmF0ZT1OdW1iZXIobi5mcHJfdmNfbmV0d29ya19yZXF1ZXN0X3NhbXBsaW5nX3JhdGUpKSx2b2lkIDAhPT1uLmZwcl92Y190cmFjZV9zYW1wbGluZ19yYXRlJiYoZS50cmFjZXNTYW1wbGluZ1JhdGU9TnVtYmVyKG4uZnByX3ZjX3RyYWNlX3NhbXBsaW5nX3JhdGUpKSxlLmxvZ1RyYWNlQWZ0ZXJTYW1wbGluZz1lRihlLnRyYWNlc1NhbXBsaW5nUmF0ZSksZS5sb2dOZXR3b3JrQWZ0ZXJTYW1wbGluZz1lRihlLm5ldHdvcmtSZXF1ZXN0c1NhbXBsaW5nUmF0ZSksdH1mdW5jdGlvbiBlRih0KXtyZXR1cm4gTWF0aC5yYW5kb20oKTw9dH12YXIgbkYsckY9MTtmdW5jdGlvbiBpRigpe3JldHVybiByRj0yLG5GPW5GfHxmdW5jdGlvbigpe3ZhciBuPWpNLmdldEluc3RhbmNlKCkuZG9jdW1lbnQ7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe3ZhciBlO24mJlwiY29tcGxldGVcIiE9PW4ucmVhZHlTdGF0ZT8oZT1mdW5jdGlvbigpe1wiY29tcGxldGVcIj09PW4ucmVhZHlTdGF0ZSYmKG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIixlKSx0KCkpfSxuLmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsZSkpOnQoKX0pfSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4odD1XTS5nZXRJbnN0YW5jZSgpLmluc3RhbGxhdGlvbnNTZXJ2aWNlLmdldElkKCkpLnRoZW4oZnVuY3Rpb24odCl7Qk09dH0pLHQ7dmFyIHR9KS50aGVuKCRNKS50aGVuKG9GLG9GKX1mdW5jdGlvbiBvRigpe3JGPTN9dmFyIGFGLHNGPTFlNCx1Rj01NTAwLGNGPTMsaEY9MWUzLGxGPWNGLGZGPVtdLHBGPSExO2Z1bmN0aW9uIGRGKHQpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxlO2lmKDAhPT1sRilyZXR1cm4gZkYubGVuZ3RoPyh0PWZGLnNwbGljZSgwLGhGKSxlPXQubWFwKGZ1bmN0aW9uKHQpe3JldHVybntzb3VyY2VfZXh0ZW5zaW9uX2pzb25fcHJvdG8zOnQubWVzc2FnZSxldmVudF90aW1lX21zOlN0cmluZyh0LmV2ZW50VGltZSl9fSksdm9pZCBmdW5jdGlvbih0LHIpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT1XTS5nZXRJbnN0YW5jZSgpLmdldEZsVHJhbnNwb3J0RnVsbFVybCgpO3JldHVybiBmZXRjaChlLHttZXRob2Q6XCJQT1NUXCIsYm9keTpKU09OLnN0cmluZ2lmeSh0KX0pfSh0KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0Lm9rfHxGTS5pbmZvKFwiQ2FsbCB0byBGaXJlYmFzZSBiYWNrZW5kIGZhaWxlZC5cIiksdC5qc29uKCl9KS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPU51bWJlcih0Lm5leHRSZXF1ZXN0V2FpdE1pbGxpcyksbj1zRjtpc05hTihlKXx8KG49TWF0aC5tYXgoZSxuKSk7dD10LmxvZ1Jlc3BvbnNlRGV0YWlscztBcnJheS5pc0FycmF5KHQpJiYwPHQubGVuZ3RoJiZcIlJFVFJZX1JFUVVFU1RfTEFURVJcIj09PXRbMF0ucmVzcG9uc2VBY3Rpb24mJihmRj1ubyhubyhbXSxyKSxmRiksRk0uaW5mbyhcIlJldHJ5IHRyYW5zcG9ydCByZXF1ZXN0IGxhdGVyLlwiKSksbEY9Y0YsZEYobil9KX0oe3JlcXVlc3RfdGltZV9tczpTdHJpbmcoRGF0ZS5ub3coKSksY2xpZW50X2luZm86e2NsaWVudF90eXBlOjEsanNfY2xpZW50X2luZm86e319LGxvZ19zb3VyY2U6V00uZ2V0SW5zdGFuY2UoKS5sb2dTb3VyY2UsbG9nX2V2ZW50OmV9LHQpLmNhdGNoKGZ1bmN0aW9uKCl7ZkY9bm8obm8oW10sdCksZkYpLGxGLS0sRk0uaW5mbyhcIlRyaWVzIGxlZnQ6IFwiK2xGK1wiLlwiKSxkRihzRil9KSk6ZEYoc0YpfSx0KX1mdW5jdGlvbiB2RihuKXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07IWZ1bmN0aW9uKHQpe2lmKCF0LmV2ZW50VGltZXx8IXQubWVzc2FnZSl0aHJvdyBNTS5jcmVhdGUoXCJpbnZhbGlkIGNjIGxvZ1wiKTtmRj1ubyhubyhbXSxmRiksW3RdKX0oe21lc3NhZ2U6bi5hcHBseSh2b2lkIDAsdCksZXZlbnRUaW1lOkRhdGUubm93KCl9KX19ZnVuY3Rpb24gZ0YodCxlKXsoYUY9YUZ8fHZGKGJGKSkodCxlKX1mdW5jdGlvbiB5Rih0KXt2YXIgZT1XTS5nZXRJbnN0YW5jZSgpOyFlLmluc3RydW1lbnRhdGlvbkVuYWJsZWQmJnQuaXNBdXRvfHwoZS5kYXRhQ29sbGVjdGlvbkVuYWJsZWR8fHQuaXNBdXRvKSYmak0uZ2V0SW5zdGFuY2UoKS5yZXF1aXJlZEFwaXNBdmFpbGFibGUoKSYmKHQuaXNBdXRvJiZRTSgpIT09S00uVklTSUJMRXx8KDM9PT1yRj9tRih0KTppRigpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbUYodCl9LGZ1bmN0aW9uKCl7cmV0dXJuIG1GKHQpfSkpKX1mdW5jdGlvbiBtRih0KXt2YXIgZTshQk18fChlPVdNLmdldEluc3RhbmNlKCkpLmxvZ2dpbmdFbmFibGVkJiZlLmxvZ1RyYWNlQWZ0ZXJTYW1wbGluZyYmc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBnRih0LDEpfSwwKX1mdW5jdGlvbiBiRih0LGUpe3JldHVybigwPT09ZT9mdW5jdGlvbih0KXt0PXt1cmw6dC51cmwsaHR0cF9tZXRob2Q6dC5odHRwTWV0aG9kfHwwLGh0dHBfcmVzcG9uc2VfY29kZToyMDAscmVzcG9uc2VfcGF5bG9hZF9ieXRlczp0LnJlc3BvbnNlUGF5bG9hZEJ5dGVzLGNsaWVudF9zdGFydF90aW1lX3VzOnQuc3RhcnRUaW1lVXMsdGltZV90b19yZXNwb25zZV9pbml0aWF0ZWRfdXM6dC50aW1lVG9SZXNwb25zZUluaXRpYXRlZFVzLHRpbWVfdG9fcmVzcG9uc2VfY29tcGxldGVkX3VzOnQudGltZVRvUmVzcG9uc2VDb21wbGV0ZWRVc30sdD17YXBwbGljYXRpb25faW5mbzpfRigpLG5ldHdvcmtfcmVxdWVzdF9tZXRyaWM6dH07cmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpfTpmdW5jdGlvbih0KXt2YXIgZT17bmFtZTp0Lm5hbWUsaXNfYXV0bzp0LmlzQXV0byxjbGllbnRfc3RhcnRfdGltZV91czp0LnN0YXJ0VGltZVVzLGR1cmF0aW9uX3VzOnQuZHVyYXRpb25Vc307MCE9PU9iamVjdC5rZXlzKHQuY291bnRlcnMpLmxlbmd0aCYmKGUuY291bnRlcnM9dC5jb3VudGVycyk7dD10LmdldEF0dHJpYnV0ZXMoKTswIT09T2JqZWN0LmtleXModCkubGVuZ3RoJiYoZS5jdXN0b21fYXR0cmlidXRlcz10KTtlPXthcHBsaWNhdGlvbl9pbmZvOl9GKCksdHJhY2VfbWV0cmljOmV9O3JldHVybiBKU09OLnN0cmluZ2lmeShlKX0pKHQpfWZ1bmN0aW9uIF9GKCl7cmV0dXJue2dvb2dsZV9hcHBfaWQ6V00uZ2V0SW5zdGFuY2UoKS5nZXRBcHBJZCgpLGFwcF9pbnN0YW5jZV9pZDpCTSx3ZWJfYXBwX2luZm86e3Nka192ZXJzaW9uOk9NLHBhZ2VfdXJsOmpNLmdldEluc3RhbmNlKCkuZ2V0VXJsKCksc2VydmljZV93b3JrZXJfc3RhdHVzOlwic2VydmljZVdvcmtlclwiaW4odD1qTS5nZXRJbnN0YW5jZSgpLm5hdmlnYXRvcik/dC5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXI/MjozOjEsdmlzaWJpbGl0eV9zdGF0ZTpRTSgpLGVmZmVjdGl2ZV9jb25uZWN0aW9uX3R5cGU6ZnVuY3Rpb24oKXt2YXIgdD1qTS5nZXRJbnN0YW5jZSgpLm5hdmlnYXRvci5jb25uZWN0aW9uO3N3aXRjaCh0JiZ0LmVmZmVjdGl2ZVR5cGUpe2Nhc2VcInNsb3ctMmdcIjpyZXR1cm4gMTtjYXNlXCIyZ1wiOnJldHVybiAyO2Nhc2VcIjNnXCI6cmV0dXJuIDM7Y2FzZVwiNGdcIjpyZXR1cm4gNDtkZWZhdWx0OnJldHVybiAwfX0oKX0sYXBwbGljYXRpb25fcHJvY2Vzc19zdGF0ZTowfTt2YXIgdH12YXIgd0Y9W1wiX2ZwXCIsXCJfZmNwXCIsXCJfZmlkXCJdO3ZhciBJRj0oVEYucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7aWYoMSE9PXRoaXMuc3RhdGUpdGhyb3cgTU0uY3JlYXRlKFwidHJhY2Ugc3RhcnRlZFwiLHt0cmFjZU5hbWU6dGhpcy5uYW1lfSk7dGhpcy5hcGkubWFyayh0aGlzLnRyYWNlU3RhcnRNYXJrKSx0aGlzLnN0YXRlPTJ9LFRGLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7aWYoMiE9PXRoaXMuc3RhdGUpdGhyb3cgTU0uY3JlYXRlKFwidHJhY2Ugc3RvcHBlZFwiLHt0cmFjZU5hbWU6dGhpcy5uYW1lfSk7dGhpcy5zdGF0ZT0zLHRoaXMuYXBpLm1hcmsodGhpcy50cmFjZVN0b3BNYXJrKSx0aGlzLmFwaS5tZWFzdXJlKHRoaXMudHJhY2VNZWFzdXJlLHRoaXMudHJhY2VTdGFydE1hcmssdGhpcy50cmFjZVN0b3BNYXJrKSx0aGlzLmNhbGN1bGF0ZVRyYWNlTWV0cmljcygpLHlGKHRoaXMpfSxURi5wcm90b3R5cGUucmVjb3JkPWZ1bmN0aW9uKHQsZSxuKXtpZih0PD0wKXRocm93IE1NLmNyZWF0ZShcIm5vbnBvc2l0aXZlIHRyYWNlIHN0YXJ0VGltZVwiLHt0cmFjZU5hbWU6dGhpcy5uYW1lfSk7aWYoZTw9MCl0aHJvdyBNTS5jcmVhdGUoXCJub25wb3NpdGl2ZSB0cmFjZSBkdXJhdGlvblwiLHt0cmFjZU5hbWU6dGhpcy5uYW1lfSk7aWYodGhpcy5kdXJhdGlvblVzPU1hdGguZmxvb3IoMWUzKmUpLHRoaXMuc3RhcnRUaW1lVXM9TWF0aC5mbG9vcigxZTMqdCksbiYmbi5hdHRyaWJ1dGVzJiYodGhpcy5jdXN0b21BdHRyaWJ1dGVzPUppKHt9LG4uYXR0cmlidXRlcykpLG4mJm4ubWV0cmljcylmb3IodmFyIHI9MCxpPU9iamVjdC5rZXlzKG4ubWV0cmljcyk7cjxpLmxlbmd0aDtyKyspe3ZhciBvPWlbcl07aXNOYU4oTnVtYmVyKG4ubWV0cmljc1tvXSkpfHwodGhpcy5jb3VudGVyc1tvXT1OdW1iZXIoTWF0aC5mbG9vcihuLm1ldHJpY3Nbb10pKSl9eUYodGhpcyl9LFRGLnByb3RvdHlwZS5pbmNyZW1lbnRNZXRyaWM9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0xKSx2b2lkIDA9PT10aGlzLmNvdW50ZXJzW3RdP3RoaXMucHV0TWV0cmljKHQsZSk6dGhpcy5wdXRNZXRyaWModCx0aGlzLmNvdW50ZXJzW3RdK2UpfSxURi5wcm90b3R5cGUucHV0TWV0cmljPWZ1bmN0aW9uKHQsZSl7aWYobj10LHI9dGhpcy5uYW1lLDA9PT1uLmxlbmd0aHx8MTAwPG4ubGVuZ3RofHwhKHImJnIuc3RhcnRzV2l0aChcIl93dF9cIikmJi0xPHdGLmluZGV4T2YobikpJiZuLnN0YXJ0c1dpdGgoXCJfXCIpKXRocm93IE1NLmNyZWF0ZShcImludmFsaWQgY3VzdG9tIG1ldHJpYyBuYW1lXCIse2N1c3RvbU1ldHJpY05hbWU6dH0pO3ZhciBuLHI7dGhpcy5jb3VudGVyc1t0XT0odD1lLChlPU1hdGguZmxvb3IodCkpPHQmJkZNLmluZm8oXCJNZXRyaWMgdmFsdWUgc2hvdWxkIGJlIGFuIEludGVnZXIsIHNldHRpbmcgdGhlIHZhbHVlIGFzIDogXCIrZStcIi5cIiksZSl9LFRGLnByb3RvdHlwZS5nZXRNZXRyaWM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY291bnRlcnNbdF18fDB9LFRGLnByb3RvdHlwZS5wdXRBdHRyaWJ1dGU9ZnVuY3Rpb24odCxlKXt2YXIgbixyLGk9ISgwPT09KG49dCkubGVuZ3RofHw0MDxuLmxlbmd0aCkmJighR00uc29tZShmdW5jdGlvbih0KXtyZXR1cm4gbi5zdGFydHNXaXRoKHQpfSkmJiEhbi5tYXRjaCh6TSkpLHI9MCE9PShyPWUpLmxlbmd0aCYmci5sZW5ndGg8PTEwMDtpZihpJiZyKXRoaXMuY3VzdG9tQXR0cmlidXRlc1t0XT1lO2Vsc2V7aWYoIWkpdGhyb3cgTU0uY3JlYXRlKFwiaW52YWxpZCBhdHRyaWJ1dGUgbmFtZVwiLHthdHRyaWJ1dGVOYW1lOnR9KTtpZighcil0aHJvdyBNTS5jcmVhdGUoXCJpbnZhbGlkIGF0dHJpYnV0ZSB2YWx1ZVwiLHthdHRyaWJ1dGVWYWx1ZTplfSl9fSxURi5wcm90b3R5cGUuZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmN1c3RvbUF0dHJpYnV0ZXNbdF19LFRGLnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGU9ZnVuY3Rpb24odCl7dm9pZCAwIT09dGhpcy5jdXN0b21BdHRyaWJ1dGVzW3RdJiZkZWxldGUgdGhpcy5jdXN0b21BdHRyaWJ1dGVzW3RdfSxURi5wcm90b3R5cGUuZ2V0QXR0cmlidXRlcz1mdW5jdGlvbigpe3JldHVybiBKaSh7fSx0aGlzLmN1c3RvbUF0dHJpYnV0ZXMpfSxURi5wcm90b3R5cGUuc2V0U3RhcnRUaW1lPWZ1bmN0aW9uKHQpe3RoaXMuc3RhcnRUaW1lVXM9dH0sVEYucHJvdG90eXBlLnNldER1cmF0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuZHVyYXRpb25Vcz10fSxURi5wcm90b3R5cGUuY2FsY3VsYXRlVHJhY2VNZXRyaWNzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5hcGkuZ2V0RW50cmllc0J5TmFtZSh0aGlzLnRyYWNlTWVhc3VyZSksdD10JiZ0WzBdO3QmJih0aGlzLmR1cmF0aW9uVXM9TWF0aC5mbG9vcigxZTMqdC5kdXJhdGlvbiksdGhpcy5zdGFydFRpbWVVcz1NYXRoLmZsb29yKDFlMyoodC5zdGFydFRpbWUrdGhpcy5hcGkuZ2V0VGltZU9yaWdpbigpKSkpfSxURi5jcmVhdGVPb2JUcmFjZT1mdW5jdGlvbih0LGUsbil7dmFyIHIsaT1qTS5nZXRJbnN0YW5jZSgpLmdldFVybCgpO2kmJihyPW5ldyBURihcIl93dF9cIitpLCEwKSxpPU1hdGguZmxvb3IoMWUzKmpNLmdldEluc3RhbmNlKCkuZ2V0VGltZU9yaWdpbigpKSxyLnNldFN0YXJ0VGltZShpKSx0JiZ0WzBdJiYoci5zZXREdXJhdGlvbihNYXRoLmZsb29yKDFlMyp0WzBdLmR1cmF0aW9uKSksci5wdXRNZXRyaWMoXCJkb21JbnRlcmFjdGl2ZVwiLE1hdGguZmxvb3IoMWUzKnRbMF0uZG9tSW50ZXJhY3RpdmUpKSxyLnB1dE1ldHJpYyhcImRvbUNvbnRlbnRMb2FkZWRFdmVudEVuZFwiLE1hdGguZmxvb3IoMWUzKnRbMF0uZG9tQ29udGVudExvYWRlZEV2ZW50RW5kKSksci5wdXRNZXRyaWMoXCJsb2FkRXZlbnRFbmRcIixNYXRoLmZsb29yKDFlMyp0WzBdLmxvYWRFdmVudEVuZCkpKSxlJiYoKHQ9ZS5maW5kKGZ1bmN0aW9uKHQpe3JldHVyblwiZmlyc3QtcGFpbnRcIj09PXQubmFtZX0pKSYmdC5zdGFydFRpbWUmJnIucHV0TWV0cmljKFwiX2ZwXCIsTWF0aC5mbG9vcigxZTMqdC5zdGFydFRpbWUpKSwoZT1lLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuXCJmaXJzdC1jb250ZW50ZnVsLXBhaW50XCI9PT10Lm5hbWV9KSkmJmUuc3RhcnRUaW1lJiZyLnB1dE1ldHJpYyhcIl9mY3BcIixNYXRoLmZsb29yKDFlMyplLnN0YXJ0VGltZSkpLG4mJnIucHV0TWV0cmljKFwiX2ZpZFwiLE1hdGguZmxvb3IoMWUzKm4pKSkseUYocikpfSxURi5jcmVhdGVVc2VyVGltaW5nVHJhY2U9ZnVuY3Rpb24odCl7eUYobmV3IFRGKHQsITEsdCkpfSxURik7ZnVuY3Rpb24gVEYodCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx0aGlzLm5hbWU9dCx0aGlzLmlzQXV0bz1lLHRoaXMuc3RhdGU9MSx0aGlzLmN1c3RvbUF0dHJpYnV0ZXM9e30sdGhpcy5jb3VudGVycz17fSx0aGlzLmFwaT1qTS5nZXRJbnN0YW5jZSgpLHRoaXMucmFuZG9tSWQ9TWF0aC5mbG9vcigxZTYqTWF0aC5yYW5kb20oKSksdGhpcy5pc0F1dG98fCh0aGlzLnRyYWNlU3RhcnRNYXJrPVwiRkItUEVSRi1UUkFDRS1TVEFSVC1cIit0aGlzLnJhbmRvbUlkK1wiLVwiK3RoaXMubmFtZSx0aGlzLnRyYWNlU3RvcE1hcms9XCJGQi1QRVJGLVRSQUNFLVNUT1AtXCIrdGhpcy5yYW5kb21JZCtcIi1cIit0aGlzLm5hbWUsdGhpcy50cmFjZU1lYXN1cmU9bnx8RE0rXCItXCIrdGhpcy5yYW5kb21JZCtcIi1cIit0aGlzLm5hbWUsbiYmdGhpcy5jYWxjdWxhdGVUcmFjZU1ldHJpY3MoKSl9ZnVuY3Rpb24gRUYodCl7dmFyIGUsbixyLGk9dDtpJiZ2b2lkIDAhPT1pLnJlc3BvbnNlU3RhcnQmJihuPWpNLmdldEluc3RhbmNlKCkuZ2V0VGltZU9yaWdpbigpLHI9TWF0aC5mbG9vcigxZTMqKGkuc3RhcnRUaW1lK24pKSx0PWkucmVzcG9uc2VTdGFydD9NYXRoLmZsb29yKDFlMyooaS5yZXNwb25zZVN0YXJ0LWkuc3RhcnRUaW1lKSk6dm9pZCAwLG49TWF0aC5mbG9vcigxZTMqKGkucmVzcG9uc2VFbmQtaS5zdGFydFRpbWUpKSxpPXt1cmw6aS5uYW1lJiZpLm5hbWUuc3BsaXQoXCI/XCIpWzBdLHJlc3BvbnNlUGF5bG9hZEJ5dGVzOmkudHJhbnNmZXJTaXplLHN0YXJ0VGltZVVzOnIsdGltZVRvUmVzcG9uc2VJbml0aWF0ZWRVczp0LHRpbWVUb1Jlc3BvbnNlQ29tcGxldGVkVXM6bn0sZT1pLChyPVdNLmdldEluc3RhbmNlKCkpLmluc3RydW1lbnRhdGlvbkVuYWJsZWQmJih0PWUudXJsLG49ci5sb2dFbmRQb2ludFVybC5zcGxpdChcIj9cIilbMF0saT1yLmZsVHJhbnNwb3J0RW5kcG9pbnRVcmwuc3BsaXQoXCI/XCIpWzBdLHQhPT1uJiZ0IT09aSYmci5sb2dnaW5nRW5hYmxlZCYmci5sb2dOZXR3b3JrQWZ0ZXJTYW1wbGluZyYmc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBnRihlLDApfSwwKSkpfXZhciBTRj01ZTM7ZnVuY3Rpb24gQ0YoKXtCTSYmKHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdD1qTS5nZXRJbnN0YW5jZSgpLGU9dC5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKSxuPXQuZ2V0RW50cmllc0J5VHlwZShcInBhaW50XCIpO3t2YXIgcjt0Lm9uRmlyc3RJbnB1dERlbGF5PyhyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtJRi5jcmVhdGVPb2JUcmFjZShlLG4pLHI9dm9pZCAwfSxTRiksdC5vbkZpcnN0SW5wdXREZWxheShmdW5jdGlvbih0KXtyJiYoY2xlYXJUaW1lb3V0KHIpLElGLmNyZWF0ZU9vYlRyYWNlKGUsbix0KSl9KSk6SUYuY3JlYXRlT29iVHJhY2UoZSxuKX19LDApLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtmb3IodmFyIHQ9ak0uZ2V0SW5zdGFuY2UoKSxlPXQuZ2V0RW50cmllc0J5VHlwZShcInJlc291cmNlXCIpLG49MCxyPWU7bjxyLmxlbmd0aDtuKyspRUYocltuXSk7dC5zZXR1cE9ic2VydmVyKFwicmVzb3VyY2VcIixFRil9LDApLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtmb3IodmFyIHQ9ak0uZ2V0SW5zdGFuY2UoKSxlPXQuZ2V0RW50cmllc0J5VHlwZShcIm1lYXN1cmVcIiksbj0wLHI9ZTtuPHIubGVuZ3RoO24rKylrRihyW25dKTt0LnNldHVwT2JzZXJ2ZXIoXCJtZWFzdXJlXCIsa0YpfSwwKSl9ZnVuY3Rpb24ga0YodCl7dD10Lm5hbWU7dC5zdWJzdHJpbmcoMCxETS5sZW5ndGgpIT09RE0mJklGLmNyZWF0ZVVzZXJUaW1pbmdUcmFjZSh0KX12YXIgTkY9KEFGLnByb3RvdHlwZS50cmFjZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IElGKHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoQUYucHJvdG90eXBlLFwiaW5zdHJ1bWVudGF0aW9uRW5hYmxlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gV00uZ2V0SW5zdGFuY2UoKS5pbnN0cnVtZW50YXRpb25FbmFibGVkfSxzZXQ6ZnVuY3Rpb24odCl7V00uZ2V0SW5zdGFuY2UoKS5pbnN0cnVtZW50YXRpb25FbmFibGVkPXR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEFGLnByb3RvdHlwZSxcImRhdGFDb2xsZWN0aW9uRW5hYmxlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gV00uZ2V0SW5zdGFuY2UoKS5kYXRhQ29sbGVjdGlvbkVuYWJsZWR9LHNldDpmdW5jdGlvbih0KXtXTS5nZXRJbnN0YW5jZSgpLmRhdGFDb2xsZWN0aW9uRW5hYmxlZD10fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLEFGKTtmdW5jdGlvbiBBRih0KXt0aGlzLmFwcD10LGpNLmdldEluc3RhbmNlKCkucmVxdWlyZWRBcGlzQXZhaWxhYmxlKCkmJndvKCkudGhlbihmdW5jdGlvbih0KXt0JiYocEZ8fChkRih1RikscEY9ITApLGlGKCkudGhlbihDRixDRikpfSkuY2F0Y2goZnVuY3Rpb24odCl7Rk0uaW5mbyhcIkVudmlyb25tZW50IGRvZXNuJ3Qgc3VwcG9ydCBJbmRleGVkREI6IFwiK3QpfSl9dmFyIFJGO2Z1bmN0aW9uIFBGKHQsZSl7aWYoXCJbREVGQVVMVF1cIiE9PXQubmFtZSl0aHJvdyBNTS5jcmVhdGUoXCJGQiBub3QgZGVmYXVsdFwiKTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93KXRocm93IE1NLmNyZWF0ZShcIm5vIHdpbmRvd1wiKTtyZXR1cm4gUE09d2luZG93LFdNLmdldEluc3RhbmNlKCkuZmlyZWJhc2VBcHBJbnN0YW5jZT10LFdNLmdldEluc3RhbmNlKCkuaW5zdGFsbGF0aW9uc1NlcnZpY2U9ZSxuZXcgTkYodCl9KFJGPVhsKS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgZWEoXCJwZXJmb3JtYW5jZVwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0UHJvdmlkZXIoXCJhcHBcIikuZ2V0SW1tZWRpYXRlKCksdD10LmdldFByb3ZpZGVyKFwiaW5zdGFsbGF0aW9uc1wiKS5nZXRJbW1lZGlhdGUoKTtyZXR1cm4gUEYoZSx0KX0sXCJQVUJMSUNcIikpLFJGLnJlZ2lzdGVyVmVyc2lvbihcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiLFwiMC40LjEyXCIpO3ZhciBPRixERix4Rj1cImZpcmViYXNlX2lkXCIsTEY9XCJvcmlnaW5cIixNRj02ZTQsRkY9XCJodHRwczovL2ZpcmViYXNlLmdvb2dsZWFwaXMuY29tL3YxYWxwaGEvcHJvamVjdHMvLS9hcHBzL3thcHAtaWR9L3dlYkNvbmZpZ1wiLFVGPVwiaHR0cHM6Ly93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RhZy9qc1wiOyhHPU9GPU9GfHx7fSkuRVZFTlQ9XCJldmVudFwiLEcuU0VUPVwic2V0XCIsRy5DT05GSUc9XCJjb25maWdcIiwoRz1ERj1ERnx8e30pLkFERF9TSElQUElOR19JTkZPPVwiYWRkX3NoaXBwaW5nX2luZm9cIixHLkFERF9QQVlNRU5UX0lORk89XCJhZGRfcGF5bWVudF9pbmZvXCIsRy5BRERfVE9fQ0FSVD1cImFkZF90b19jYXJ0XCIsRy5BRERfVE9fV0lTSExJU1Q9XCJhZGRfdG9fd2lzaGxpc3RcIixHLkJFR0lOX0NIRUNLT1VUPVwiYmVnaW5fY2hlY2tvdXRcIixHLkNIRUNLT1VUX1BST0dSRVNTPVwiY2hlY2tvdXRfcHJvZ3Jlc3NcIixHLkVYQ0VQVElPTj1cImV4Y2VwdGlvblwiLEcuR0VORVJBVEVfTEVBRD1cImdlbmVyYXRlX2xlYWRcIixHLkxPR0lOPVwibG9naW5cIixHLlBBR0VfVklFVz1cInBhZ2Vfdmlld1wiLEcuUFVSQ0hBU0U9XCJwdXJjaGFzZVwiLEcuUkVGVU5EPVwicmVmdW5kXCIsRy5SRU1PVkVfRlJPTV9DQVJUPVwicmVtb3ZlX2Zyb21fY2FydFwiLEcuU0NSRUVOX1ZJRVc9XCJzY3JlZW5fdmlld1wiLEcuU0VBUkNIPVwic2VhcmNoXCIsRy5TRUxFQ1RfQ09OVEVOVD1cInNlbGVjdF9jb250ZW50XCIsRy5TRUxFQ1RfSVRFTT1cInNlbGVjdF9pdGVtXCIsRy5TRUxFQ1RfUFJPTU9USU9OPVwic2VsZWN0X3Byb21vdGlvblwiLEcuU0VUX0NIRUNLT1VUX09QVElPTj1cInNldF9jaGVja291dF9vcHRpb25cIixHLlNIQVJFPVwic2hhcmVcIixHLlNJR05fVVA9XCJzaWduX3VwXCIsRy5USU1JTkdfQ09NUExFVEU9XCJ0aW1pbmdfY29tcGxldGVcIixHLlZJRVdfQ0FSVD1cInZpZXdfY2FydFwiLEcuVklFV19JVEVNPVwidmlld19pdGVtXCIsRy5WSUVXX0lURU1fTElTVD1cInZpZXdfaXRlbV9saXN0XCIsRy5WSUVXX1BST01PVElPTj1cInZpZXdfcHJvbW90aW9uXCIsRy5WSUVXX1NFQVJDSF9SRVNVTFRTPVwidmlld19zZWFyY2hfcmVzdWx0c1wiO3ZhciBqRj1uZXcgZGEoXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCIpO2Z1bmN0aW9uIHFGKG8sYSxzLHUpe3JldHVybiBmdW5jdGlvbihuLHIsaSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHQudHJ5cy5wdXNoKFswLDYsLDddKSxuIT09T0YuRVZFTlQ/WzMsMl06WzQsZnVuY3Rpb24odSxjLGgsbCxmKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIG4scixlLGksbyxhLHM7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4odC50cnlzLnB1c2goWzAsNCwsNV0pLG49W10sZiYmZi5zZW5kX3RvKT8ocz1mLnNlbmRfdG8sQXJyYXkuaXNBcnJheShzKXx8KHM9W3NdKSxbNCxQcm9taXNlLmFsbChoKV0pOlszLDJdO2Nhc2UgMTpmb3Iocj10LnNlbnQoKSxlPWZ1bmN0aW9uKGUpe3ZhciB0PXIuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC5tZWFzdXJlbWVudElkPT09ZX0pLHQ9dCYmY1t0LmFwcElkXTtpZighdClyZXR1cm4gbj1bXSxcImJyZWFrXCI7bi5wdXNoKHQpfSxpPTAsbz1zO2k8by5sZW5ndGgmJihhPW9baV0sXCJicmVha1wiIT09ZShhKSk7aSsrKTt0LmxhYmVsPTI7Y2FzZSAyOnJldHVybiAwPT09bi5sZW5ndGgmJihuPU9iamVjdC52YWx1ZXMoYykpLFs0LFByb21pc2UuYWxsKG4pXTtjYXNlIDM6cmV0dXJuIHQuc2VudCgpLHUoT0YuRVZFTlQsbCxmfHx7fSksWzMsNV07Y2FzZSA0OnJldHVybiBzPXQuc2VudCgpLGpGLmVycm9yKHMpLFszLDVdO2Nhc2UgNTpyZXR1cm5bMl19fSl9KX0obyxhLHMscixpKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxbMyw1XTtjYXNlIDI6cmV0dXJuIG4hPT1PRi5DT05GSUc/WzMsNF06WzQsZnVuY3Rpb24ocixpLG8sYSxzLHUpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6ZT1hW3NdLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDcsLDhdKSxlP1s0LGlbZV1dOlszLDNdO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksWzMsNl07Y2FzZSAzOnJldHVybls0LFByb21pc2UuYWxsKG8pXTtjYXNlIDQ6cmV0dXJuIG49dC5zZW50KCksKG49bi5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0Lm1lYXN1cmVtZW50SWQ9PT1zfSkpP1s0LGlbbi5hcHBJZF1dOlszLDZdO2Nhc2UgNTp0LnNlbnQoKSx0LmxhYmVsPTY7Y2FzZSA2OnJldHVyblszLDhdO2Nhc2UgNzpyZXR1cm4gbj10LnNlbnQoKSxqRi5lcnJvcihuKSxbMyw4XTtjYXNlIDg6cmV0dXJuIHIoT0YuQ09ORklHLHMsdSksWzJdfX0pfSl9KG8sYSxzLHUscixpKV07Y2FzZSAzOnJldHVybiB0LnNlbnQoKSxbMyw1XTtjYXNlIDQ6byhPRi5TRVQsciksdC5sYWJlbD01O2Nhc2UgNTpyZXR1cm5bMyw3XTtjYXNlIDY6cmV0dXJuIGU9dC5zZW50KCksakYuZXJyb3IoZSksWzMsN107Y2FzZSA3OnJldHVyblsyXX19KX0pfX12YXIgRz0oKEc9e30pW1wiYWxyZWFkeS1leGlzdHNcIl09XCJBIEZpcmViYXNlIEFuYWx5dGljcyBpbnN0YW5jZSB3aXRoIHRoZSBhcHBJZCB7JGlkfSAgYWxyZWFkeSBleGlzdHMuIE9ubHkgb25lIEZpcmViYXNlIEFuYWx5dGljcyBpbnN0YW5jZSBjYW4gYmUgY3JlYXRlZCBmb3IgZWFjaCBhcHBJZC5cIixHW1wiYWxyZWFkeS1pbml0aWFsaXplZFwiXT1cIkZpcmViYXNlIEFuYWx5dGljcyBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkLnNldHRpbmdzKCkgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGluaXRpYWxpemluZyBhbnkgQW5hbHl0aWNzIGluc3RhbmNlb3IgaXQgd2lsbCBoYXZlIG5vIGVmZmVjdC5cIixHW1wiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiXT1cIkZpcmViYXNlIEFuYWx5dGljcyBJbnRlcm9wIENvbXBvbmVudCBmYWlsZWQgdG8gaW5zdGFudGlhdGU6IHskcmVhc29ufVwiLEdbXCJpbnZhbGlkLWFuYWx5dGljcy1jb250ZXh0XCJdPVwiRmlyZWJhc2UgQW5hbHl0aWNzIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudC4gV3JhcCBpbml0aWFsaXphdGlvbiBvZiBhbmFseXRpY3MgaW4gYW5hbHl0aWNzLmlzU3VwcG9ydGVkKCkgdG8gcHJldmVudCBpbml0aWFsaXphdGlvbiBpbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudHMuIERldGFpbHM6IHskZXJyb3JJbmZvfVwiLEdbXCJpbmRleGVkZGItdW5hdmFpbGFibGVcIl09XCJJbmRleGVkREIgdW5hdmFpbGFibGUgb3IgcmVzdHJpY3RlZCBpbiB0aGlzIGVudmlyb25tZW50LiBXcmFwIGluaXRpYWxpemF0aW9uIG9mIGFuYWx5dGljcyBpbiBhbmFseXRpY3MuaXNTdXBwb3J0ZWQoKSB0byBwcmV2ZW50IGluaXRpYWxpemF0aW9uIGluIHVuc3VwcG9ydGVkIGVudmlyb25tZW50cy4gRGV0YWlsczogeyRlcnJvckluZm99XCIsR1tcImZldGNoLXRocm90dGxlXCJdPVwiVGhlIGNvbmZpZyBmZXRjaCByZXF1ZXN0IHRpbWVkIG91dCB3aGlsZSBpbiBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIHN0YXRlLiBVbml4IHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHMgd2hlbiBmZXRjaCByZXF1ZXN0IHRocm90dGxpbmcgZW5kczogeyR0aHJvdHRsZUVuZFRpbWVNaWxsaXN9LlwiLEdbXCJjb25maWctZmV0Y2gtZmFpbGVkXCJdPVwiRHluYW1pYyBjb25maWcgZmV0Y2ggZmFpbGVkOiBbeyRodHRwU3RhdHVzfV0geyRyZXNwb25zZU1lc3NhZ2V9XCIsR1tcIm5vLWFwaS1rZXlcIl09J1RoZSBcImFwaUtleVwiIGZpZWxkIGlzIGVtcHR5IGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIEZpcmViYXNlIEFuYWx5dGljcyByZXF1aXJlcyB0aGlzIGZpZWxkIHRvY29udGFpbiBhIHZhbGlkIEFQSSBrZXkuJyxHW1wibm8tYXBwLWlkXCJdPSdUaGUgXCJhcHBJZFwiIGZpZWxkIGlzIGVtcHR5IGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIEZpcmViYXNlIEFuYWx5dGljcyByZXF1aXJlcyB0aGlzIGZpZWxkIHRvY29udGFpbiBhIHZhbGlkIGFwcCBJRC4nLEcpLFZGPW5ldyBrbyhcImFuYWx5dGljc1wiLFwiQW5hbHl0aWNzXCIsRyksQkY9MzA7ZnVuY3Rpb24gS0YodCxlKXt2b2lkIDA9PT10JiYodD17fSksdm9pZCAwPT09ZSYmKGU9MWUzKSx0aGlzLnRocm90dGxlTWV0YWRhdGE9dCx0aGlzLmludGVydmFsTWlsbGlzPWV9dmFyIFdGPW5ldyhLRi5wcm90b3R5cGUuZ2V0VGhyb3R0bGVNZXRhZGF0YT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aHJvdHRsZU1ldGFkYXRhW3RdfSxLRi5wcm90b3R5cGUuc2V0VGhyb3R0bGVNZXRhZGF0YT1mdW5jdGlvbih0LGUpe3RoaXMudGhyb3R0bGVNZXRhZGF0YVt0XT1lfSxLRi5wcm90b3R5cGUuZGVsZXRlVGhyb3R0bGVNZXRhZGF0YT1mdW5jdGlvbih0KXtkZWxldGUgdGhpcy50aHJvdHRsZU1ldGFkYXRhW3RdfSxLRik7ZnVuY3Rpb24gSEYobyl7dmFyIGE7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9by5hcHBJZCxpPW8uYXBpS2V5LGk9e21ldGhvZDpcIkdFVFwiLGhlYWRlcnM6bmV3IEhlYWRlcnMoe0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIixcIngtZ29vZy1hcGkta2V5XCI6aX0pfSxlPUZGLnJlcGxhY2UoXCJ7YXBwLWlkfVwiLGUpLFs0LGZldGNoKGUsaSldO2Nhc2UgMTppZigyMDA9PT0obj10LnNlbnQoKSkuc3RhdHVzfHwzMDQ9PT1uLnN0YXR1cylyZXR1cm5bMyw2XTtyPVwiXCIsdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdC50cnlzLnB1c2goWzIsNCwsNV0pLFs0LG4uanNvbigpXTtjYXNlIDM6cmV0dXJuIGk9dC5zZW50KCksbnVsbCE9PShhPWkuZXJyb3IpJiZ2b2lkIDAhPT1hJiZhLm1lc3NhZ2UmJihyPWkuZXJyb3IubWVzc2FnZSksWzMsNV07Y2FzZSA0OnJldHVybiB0LnNlbnQoKSxbMyw1XTtjYXNlIDU6dGhyb3cgVkYuY3JlYXRlKFwiY29uZmlnLWZldGNoLWZhaWxlZFwiLHtodHRwU3RhdHVzOm4uc3RhdHVzLHJlc3BvbnNlTWVzc2FnZTpyfSk7Y2FzZSA2OnJldHVyblsyLG4uanNvbigpXX19KX0pfWZ1bmN0aW9uIEdGKHMsdSxjKXtyZXR1cm4gdm9pZCAwPT09dSYmKHU9V0YpLCRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpLG8sYT10aGlzO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe2lmKGk9cy5vcHRpb25zLGU9aS5hcHBJZCxuPWkuYXBpS2V5LHI9aS5tZWFzdXJlbWVudElkLCFlKXRocm93IFZGLmNyZWF0ZShcIm5vLWFwcC1pZFwiKTtpZihuKXJldHVybiBpPXUuZ2V0VGhyb3R0bGVNZXRhZGF0YShlKXx8e2JhY2tvZmZDb3VudDowLHRocm90dGxlRW5kVGltZU1pbGxpczpEYXRlLm5vdygpfSxvPW5ldyBZRixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuICRpKGEsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3JldHVybiBvLmFib3J0KCksWzJdfSl9KX0sdm9pZCAwIT09Yz9jOk1GKSxbMixmdW5jdGlvbiBhKHMsdCx1LGMpe3ZhciBoPXQudGhyb3R0bGVFbmRUaW1lTWlsbGlzLGw9dC5iYWNrb2ZmQ291bnQ7dm9pZCAwPT09YyYmKGM9V0YpO3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxvO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6ZT1zLmFwcElkLG49cy5tZWFzdXJlbWVudElkLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCx6Rih1LGgpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFszLDRdO2Nhc2UgMzppZihpPXQuc2VudCgpLG4pcmV0dXJuIGpGLndhcm4oXCJUaW1lZCBvdXQgZmV0Y2hpbmcgdGhpcyBGaXJlYmFzZSBhcHAncyBtZWFzdXJlbWVudCBJRCBmcm9tIHRoZSBzZXJ2ZXIuIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgXCIrbisnIHByb3ZpZGVkIGluIHRoZSBcIm1lYXN1cmVtZW50SWRcIiBmaWVsZCBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBbJytpLm1lc3NhZ2UrXCJdXCIpLFsyLHthcHBJZDplLG1lYXN1cmVtZW50SWQ6bn1dO3Rocm93IGk7Y2FzZSA0OnJldHVybiB0LnRyeXMucHVzaChbNCw2LCw3XSksWzQsSEYocyldO2Nhc2UgNTpyZXR1cm4gbz10LnNlbnQoKSxjLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoZSksWzIsb107Y2FzZSA2OmlmKFFGKHI9dC5zZW50KCkpKXJldHVybiBpPTUwMz09PU51bWJlcihyLmN1c3RvbURhdGEuaHR0cFN0YXR1cyk/Wm8obCxjLmludGVydmFsTWlsbGlzLEJGKTpabyhsLGMuaW50ZXJ2YWxNaWxsaXMpLG89e3Rocm90dGxlRW5kVGltZU1pbGxpczpEYXRlLm5vdygpK2ksYmFja29mZkNvdW50OmwrMX0sYy5zZXRUaHJvdHRsZU1ldGFkYXRhKGUsbyksakYuZGVidWcoXCJDYWxsaW5nIGF0dGVtcHRGZXRjaCBhZ2FpbiBpbiBcIitpK1wiIG1pbGxpc1wiKSxbMixhKHMsbyx1LGMpXTtpZihjLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoZSksbilyZXR1cm4gakYud2FybihcIkZhaWxlZCB0byBmZXRjaCB0aGlzIEZpcmViYXNlIGFwcCdzIG1lYXN1cmVtZW50IElEIGZyb20gdGhlIHNlcnZlci4gRmFsbGluZyBiYWNrIHRvIHRoZSBtZWFzdXJlbWVudCBJRCBcIituKycgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIFsnK3IubWVzc2FnZStcIl1cIiksWzIse2FwcElkOmUsbWVhc3VyZW1lbnRJZDpufV07dGhyb3cgcjtjYXNlIDc6cmV0dXJuWzJdfX0pfSl9KHthcHBJZDplLGFwaUtleTpuLG1lYXN1cmVtZW50SWQ6cn0saSxvLHUpXTtpZihyKXJldHVyblsyLHttZWFzdXJlbWVudElkOnIsYXBwSWQ6ZX1dO3Rocm93IFZGLmNyZWF0ZShcIm5vLWFwaS1rZXlcIil9KX0pfWZ1bmN0aW9uIHpGKGksbyl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsZSl7dmFyIG49TWF0aC5tYXgoby1EYXRlLm5vdygpLDApLHI9c2V0VGltZW91dCh0LG4pO2kuYWRkRXZlbnRMaXN0ZW5lcihmdW5jdGlvbigpe2NsZWFyVGltZW91dChyKSxlKFZGLmNyZWF0ZShcImZldGNoLXRocm90dGxlXCIse3Rocm90dGxlRW5kVGltZU1pbGxpczpvfSkpfSl9KX1mdW5jdGlvbiBRRih0KXtpZih0IGluc3RhbmNlb2YgU28mJnQuY3VzdG9tRGF0YSl7dD1OdW1iZXIodC5jdXN0b21EYXRhLmh0dHBTdGF0dXMpO3JldHVybiA0Mjk9PT10fHw1MDA9PT10fHw1MDM9PT10fHw1MDQ9PT10fX12YXIgWUY9KFhGLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQpe3RoaXMubGlzdGVuZXJzLnB1c2godCl9LFhGLnByb3RvdHlwZS5hYm9ydD1mdW5jdGlvbigpe3RoaXMubGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pfSxYRik7ZnVuY3Rpb24gWEYoKXt0aGlzLmxpc3RlbmVycz1bXX1mdW5jdGlvbiBKRihzLHUsYyxoLGwsZil7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBpLG8sYTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybihpPUdGKHMpKS50aGVuKGZ1bmN0aW9uKHQpe2NbdC5tZWFzdXJlbWVudElkXT10LmFwcElkLHMub3B0aW9ucy5tZWFzdXJlbWVudElkJiZ0Lm1lYXN1cmVtZW50SWQhPT1zLm9wdGlvbnMubWVhc3VyZW1lbnRJZCYmakYud2FybihcIlRoZSBtZWFzdXJlbWVudCBJRCBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnIChcIitzLm9wdGlvbnMubWVhc3VyZW1lbnRJZCtcIikgZG9lcyBub3QgbWF0Y2ggdGhlIG1lYXN1cmVtZW50IElEIGZldGNoZWQgZnJvbSB0aGUgc2VydmVyIChcIit0Lm1lYXN1cmVtZW50SWQrXCIpLiBUbyBlbnN1cmUgYW5hbHl0aWNzIGV2ZW50cyBhcmUgYWx3YXlzIHNlbnQgdG8gdGhlIGNvcnJlY3QgQW5hbHl0aWNzIHByb3BlcnR5LCB1cGRhdGUgdGhlIG1lYXN1cmVtZW50IElEIGZpZWxkIGluIHRoZSBsb2NhbCBjb25maWcgb3IgcmVtb3ZlIGl0IGZyb20gdGhlIGxvY2FsIGNvbmZpZy5cIil9KS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gakYuZXJyb3IodCl9KSx1LnB1c2goaSksbz1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBfbygpP1szLDFdOihqRi53YXJuKFZGLmNyZWF0ZShcImluZGV4ZWRkYi11bmF2YWlsYWJsZVwiLHtlcnJvckluZm86XCJJbmRleGVkREIgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LlwifSkubWVzc2FnZSksWzIsITFdKTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCx3bygpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFszLDRdO2Nhc2UgMzpyZXR1cm4gZT10LnNlbnQoKSxqRi53YXJuKFZGLmNyZWF0ZShcImluZGV4ZWRkYi11bmF2YWlsYWJsZVwiLHtlcnJvckluZm86ZX0pLm1lc3NhZ2UpLFsyLCExXTtjYXNlIDQ6cmV0dXJuWzIsITBdfX0pfSl9KCkudGhlbihmdW5jdGlvbih0KXtpZih0KXJldHVybiBoLmdldElkKCl9KSxbNCxQcm9taXNlLmFsbChbaSxvXSldO2Nhc2UgMTpyZXR1cm4gYT10LnNlbnQoKSxpPWFbMF0sbz1hWzFdLGZ1bmN0aW9uKCl7Zm9yKHZhciB0PXdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSxlPTAsbj1PYmplY3QudmFsdWVzKHQpO2U8bi5sZW5ndGg7ZSsrKXt2YXIgcj1uW2VdO2lmKHIuc3JjJiZyLnNyYy5pbmNsdWRlcyhVRikpcmV0dXJuIHJ9fSgpfHwoZT1mLG49aS5tZWFzdXJlbWVudElkLChyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpLnNyYz1VRitcIj9sPVwiK2UrXCImaWQ9XCIrbixyLmFzeW5jPSEwLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocikpLGwoXCJqc1wiLG5ldyBEYXRlKSwoYT17fSlbTEZdPVwiZmlyZWJhc2VcIixhLnVwZGF0ZT0hMCxhPWEsbnVsbCE9byYmKGFbeEZdPW8pLGwoT0YuQ09ORklHLGkubWVhc3VyZW1lbnRJZCxhKSxbMixpLm1lYXN1cmVtZW50SWRdfXZhciBlLG4scn0pfSl9dmFyICRGLFpGLHRVPXt9LGVVPVtdLG5VPXt9LHJVPVwiZGF0YUxheWVyXCIsaVU9XCJndGFnXCIsb1U9ITE7ZnVuY3Rpb24gYVUodCl7aWYob1UpdGhyb3cgVkYuY3JlYXRlKFwiYWxyZWFkeS1pbml0aWFsaXplZFwiKTt0LmRhdGFMYXllck5hbWUmJihyVT10LmRhdGFMYXllck5hbWUpLHQuZ3RhZ05hbWUmJihpVT10Lmd0YWdOYW1lKX1mdW5jdGlvbiBzVSh0LGUpe2k9W10seW8oKSYmaS5wdXNoKFwiVGhpcyBpcyBhIGJyb3dzZXIgZXh0ZW5zaW9uIGVudmlyb25tZW50LlwiKSxJbygpfHxpLnB1c2goXCJDb29raWVzIGFyZSBub3QgYXZhaWxhYmxlLlwiKSwwPGkubGVuZ3RoJiYoaT1pLm1hcChmdW5jdGlvbih0LGUpe3JldHVyblwiKFwiKyhlKzEpK1wiKSBcIit0fSkuam9pbihcIiBcIiksaT1WRi5jcmVhdGUoXCJpbnZhbGlkLWFuYWx5dGljcy1jb250ZXh0XCIse2Vycm9ySW5mbzppfSksakYud2FybihpLm1lc3NhZ2UpKTt2YXIgbixyLGksbyxhLHMsdT10Lm9wdGlvbnMuYXBwSWQ7aWYoIXUpdGhyb3cgVkYuY3JlYXRlKFwibm8tYXBwLWlkXCIpO2lmKCF0Lm9wdGlvbnMuYXBpS2V5KXtpZighdC5vcHRpb25zLm1lYXN1cmVtZW50SWQpdGhyb3cgVkYuY3JlYXRlKFwibm8tYXBpLWtleVwiKTtqRi53YXJuKCdUaGUgXCJhcGlLZXlcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBUaGlzIGlzIG5lZWRlZCB0byBmZXRjaCB0aGUgbGF0ZXN0IG1lYXN1cmVtZW50IElEIGZvciB0aGlzIEZpcmViYXNlIGFwcC4gRmFsbGluZyBiYWNrIHRvIHRoZSBtZWFzdXJlbWVudCBJRCAnK3Qub3B0aW9ucy5tZWFzdXJlbWVudElkKycgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuJyl9aWYobnVsbCE9dFVbdV0pdGhyb3cgVkYuY3JlYXRlKFwiYWxyZWFkeS1leGlzdHNcIix7aWQ6dX0pO3JldHVybiBvVXx8KGE9clUscz1bXSxBcnJheS5pc0FycmF5KHdpbmRvd1thXSk/cz13aW5kb3dbYV06d2luZG93W2FdPXMsbj10VSxyPWVVLGk9blUsbz1yVSxhPWlVLHM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07d2luZG93W29dLnB1c2goYXJndW1lbnRzKX0sd2luZG93W2FdJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB3aW5kb3dbYV0mJihzPXdpbmRvd1thXSksd2luZG93W2FdPXFGKHMsbixyLGkpLGE9e2d0YWdDb3JlOnMsd3JhcHBlZEd0YWc6d2luZG93W2FdfSxaRj1hLndyYXBwZWRHdGFnLCRGPWEuZ3RhZ0NvcmUsb1U9ITApLHRVW3VdPUpGKHQsZVUsblUsZSwkRixyVSkse2FwcDp0LGxvZ0V2ZW50OmZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24obixyLGksbyxhKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gYSYmYS5nbG9iYWw/KG4oT0YuRVZFTlQsaSxvKSxbMl0pOlszLDFdO2Nhc2UgMTpyZXR1cm5bNCxyXTtjYXNlIDI6ZT10LnNlbnQoKSxlPUppKEppKHt9LG8pLHtzZW5kX3RvOmV9KSxuKE9GLkVWRU5ULGksZSksdC5sYWJlbD0zO2Nhc2UgMzpyZXR1cm5bMl19fSl9KX0oWkYsdFVbdV0sdCxlLG4pLmNhdGNoKGZ1bmN0aW9uKHQpe3JldHVybiBqRi5lcnJvcih0KX0pfSxzZXRDdXJyZW50U2NyZWVuOmZ1bmN0aW9uKHQsZSl7IWZ1bmN0aW9uKG4scixpLG8pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiBvJiZvLmdsb2JhbD8obihPRi5TRVQse3NjcmVlbl9uYW1lOml9KSxbMixQcm9taXNlLnJlc29sdmUoKV0pOlszLDFdO2Nhc2UgMTpyZXR1cm5bNCxyXTtjYXNlIDI6ZT10LnNlbnQoKSxuKE9GLkNPTkZJRyxlLHt1cGRhdGU6ITAsc2NyZWVuX25hbWU6aX0pLHQubGFiZWw9MztjYXNlIDM6cmV0dXJuWzJdfX0pfSl9KFpGLHRVW3VdLHQsZSkuY2F0Y2goZnVuY3Rpb24odCl7cmV0dXJuIGpGLmVycm9yKHQpfSl9LHNldFVzZXJJZDpmdW5jdGlvbih0LGUpeyFmdW5jdGlvbihuLHIsaSxvKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbyYmby5nbG9iYWw/KG4oT0YuU0VULHt1c2VyX2lkOml9KSxbMixQcm9taXNlLnJlc29sdmUoKV0pOlszLDFdO2Nhc2UgMTpyZXR1cm5bNCxyXTtjYXNlIDI6ZT10LnNlbnQoKSxuKE9GLkNPTkZJRyxlLHt1cGRhdGU6ITAsdXNlcl9pZDppfSksdC5sYWJlbD0zO2Nhc2UgMzpyZXR1cm5bMl19fSl9KX0oWkYsdFVbdV0sdCxlKS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gakYuZXJyb3IodCl9KX0sc2V0VXNlclByb3BlcnRpZXM6ZnVuY3Rpb24odCxlKXshZnVuY3Rpb24oYSxzLHUsYyl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlLG4scixpLG87cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDppZighY3x8IWMuZ2xvYmFsKXJldHVyblszLDFdO2ZvcihlPXt9LG49MCxyPU9iamVjdC5rZXlzKHUpO248ci5sZW5ndGg7bisrKWk9cltuXSxlW1widXNlcl9wcm9wZXJ0aWVzLlwiK2ldPXVbaV07cmV0dXJuIGEoT0YuU0VULGUpLFsyLFByb21pc2UucmVzb2x2ZSgpXTtjYXNlIDE6cmV0dXJuWzQsc107Y2FzZSAyOm89dC5zZW50KCksYShPRi5DT05GSUcsbyx7dXBkYXRlOiEwLHVzZXJfcHJvcGVydGllczp1fSksdC5sYWJlbD0zO2Nhc2UgMzpyZXR1cm5bMl19fSl9KX0oWkYsdFVbdV0sdCxlKS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gakYuZXJyb3IodCl9KX0sc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQ6ZnVuY3Rpb24odCl7IWZ1bmN0aW9uKG4scil7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsbl07Y2FzZSAxOnJldHVybiBlPXQuc2VudCgpLHdpbmRvd1tcImdhLWRpc2FibGUtXCIrZV09IXIsWzJdfX0pfSl9KHRVW3VdLHQpLmNhdGNoKGZ1bmN0aW9uKHQpe3JldHVybiBqRi5lcnJvcih0KX0pfSxJTlRFUk5BTDp7ZGVsZXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGRlbGV0ZSB0VVt1XSxQcm9taXNlLnJlc29sdmUoKX19fX12YXIgdVUsY1U9XCJhbmFseXRpY3NcIjtmdW5jdGlvbiBoVSgpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOmlmKHlvKCkpcmV0dXJuWzIsITFdO2lmKCFJbygpKXJldHVyblsyLCExXTtpZighX28oKSlyZXR1cm5bMiwhMV07dC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsMywsNF0pLFs0LHdvKCldO2Nhc2UgMjpyZXR1cm5bMix0LnNlbnQoKV07Y2FzZSAzOnJldHVybiB0LnNlbnQoKSxbMiwhMV07Y2FzZSA0OnJldHVyblsyXX19KX0pfSh1VT1YbCkuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IGVhKGNVLGZ1bmN0aW9uKHQpe3JldHVybiBzVSh0LmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLHQuZ2V0UHJvdmlkZXIoXCJpbnN0YWxsYXRpb25zXCIpLmdldEltbWVkaWF0ZSgpKX0sXCJQVUJMSUNcIikuc2V0U2VydmljZVByb3BzKHtzZXR0aW5nczphVSxFdmVudE5hbWU6REYsaXNTdXBwb3J0ZWQ6aFV9KSksdVUuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IGVhKFwiYW5hbHl0aWNzLWludGVybmFsXCIsZnVuY3Rpb24odCl7dHJ5e3JldHVybntsb2dFdmVudDp0LmdldFByb3ZpZGVyKGNVKS5nZXRJbW1lZGlhdGUoKS5sb2dFdmVudH19Y2F0Y2godCl7dGhyb3cgVkYuY3JlYXRlKFwiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiLHtyZWFzb246dH0pfX0sXCJQUklWQVRFXCIpKSx1VS5yZWdpc3RlclZlcnNpb24oXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCIsXCIwLjYuMTBcIik7dmFyIGxVPShmVS5wcm90b3R5cGUuaXNDYWNoZWREYXRhRnJlc2g9ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gdGhpcy5sb2dnZXIuZGVidWcoXCJDb25maWcgZmV0Y2ggY2FjaGUgY2hlY2suIENhY2hlIHVucG9wdWxhdGVkLlwiKSwhMTt2YXIgbj1EYXRlLm5vdygpLWUsZT1uPD10O3JldHVybiB0aGlzLmxvZ2dlci5kZWJ1ZyhcIkNvbmZpZyBmZXRjaCBjYWNoZSBjaGVjay4gQ2FjaGUgYWdlIG1pbGxpczogXCIrbitcIi4gQ2FjaGUgbWF4IGFnZSBtaWxsaXMgKG1pbmltdW1GZXRjaEludGVydmFsTWlsbGlzIHNldHRpbmcpOiBcIit0K1wiLiBJcyBjYWNoZSBoaXQ6IFwiK2UrXCIuXCIpLGV9LGZVLnByb3RvdHlwZS5mZXRjaD1mdW5jdGlvbihpKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbixyO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsUHJvbWlzZS5hbGwoW3RoaXMuc3RvcmFnZS5nZXRMYXN0U3VjY2Vzc2Z1bEZldGNoVGltZXN0YW1wTWlsbGlzKCksdGhpcy5zdG9yYWdlLmdldExhc3RTdWNjZXNzZnVsRmV0Y2hSZXNwb25zZSgpXSldO2Nhc2UgMTpyZXR1cm4ocj10LnNlbnQoKSxlPXJbMF0sKHI9clsxXSkmJnRoaXMuaXNDYWNoZWREYXRhRnJlc2goaS5jYWNoZU1heEFnZU1pbGxpcyxlKSk/WzIscl06KGkuZVRhZz1yJiZyLmVUYWcsWzQsdGhpcy5jbGllbnQuZmV0Y2goaSldKTtjYXNlIDI6cmV0dXJuIG49dC5zZW50KCkscj1bdGhpcy5zdG9yYWdlQ2FjaGUuc2V0TGFzdFN1Y2Nlc3NmdWxGZXRjaFRpbWVzdGFtcE1pbGxpcyhEYXRlLm5vdygpKV0sMjAwPT09bi5zdGF0dXMmJnIucHVzaCh0aGlzLnN0b3JhZ2Uuc2V0TGFzdFN1Y2Nlc3NmdWxGZXRjaFJlc3BvbnNlKG4pKSxbNCxQcm9taXNlLmFsbChyKV07Y2FzZSAzOnJldHVybiB0LnNlbnQoKSxbMixuXX19KX0pfSxmVSk7ZnVuY3Rpb24gZlUodCxlLG4scil7dGhpcy5jbGllbnQ9dCx0aGlzLnN0b3JhZ2U9ZSx0aGlzLnN0b3JhZ2VDYWNoZT1uLHRoaXMubG9nZ2VyPXJ9dmFyIEc9KChHPXt9KVtcInJlZ2lzdHJhdGlvbi13aW5kb3dcIl09XCJVbmRlZmluZWQgd2luZG93IG9iamVjdC4gVGhpcyBTREsgb25seSBzdXBwb3J0cyB1c2FnZSBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQuXCIsR1tcInJlZ2lzdHJhdGlvbi1wcm9qZWN0LWlkXCJdPVwiVW5kZWZpbmVkIHByb2plY3QgaWRlbnRpZmllci4gQ2hlY2sgRmlyZWJhc2UgYXBwIGluaXRpYWxpemF0aW9uLlwiLEdbXCJyZWdpc3RyYXRpb24tYXBpLWtleVwiXT1cIlVuZGVmaW5lZCBBUEkga2V5LiBDaGVjayBGaXJlYmFzZSBhcHAgaW5pdGlhbGl6YXRpb24uXCIsR1tcInJlZ2lzdHJhdGlvbi1hcHAtaWRcIl09XCJVbmRlZmluZWQgYXBwIGlkZW50aWZpZXIuIENoZWNrIEZpcmViYXNlIGFwcCBpbml0aWFsaXphdGlvbi5cIixHW1wic3RvcmFnZS1vcGVuXCJdPVwiRXJyb3IgdGhyb3duIHdoZW4gb3BlbmluZyBzdG9yYWdlLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uXCIsR1tcInN0b3JhZ2UtZ2V0XCJdPVwiRXJyb3IgdGhyb3duIHdoZW4gcmVhZGluZyBmcm9tIHN0b3JhZ2UuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS5cIixHW1wic3RvcmFnZS1zZXRcIl09XCJFcnJvciB0aHJvd24gd2hlbiB3cml0aW5nIHRvIHN0b3JhZ2UuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS5cIixHW1wic3RvcmFnZS1kZWxldGVcIl09XCJFcnJvciB0aHJvd24gd2hlbiBkZWxldGluZyBmcm9tIHN0b3JhZ2UuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS5cIixHW1wiZmV0Y2gtY2xpZW50LW5ldHdvcmtcIl09XCJGZXRjaCBjbGllbnQgZmFpbGVkIHRvIGNvbm5lY3QgdG8gYSBuZXR3b3JrLiBDaGVjayBJbnRlcm5ldCBjb25uZWN0aW9uLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uXCIsR1tcImZldGNoLXRpbWVvdXRcIl09J1RoZSBjb25maWcgZmV0Y2ggcmVxdWVzdCB0aW1lZCBvdXQuICBDb25maWd1cmUgdGltZW91dCB1c2luZyBcImZldGNoVGltZW91dE1pbGxpc1wiIFNESyBzZXR0aW5nLicsR1tcImZldGNoLXRocm90dGxlXCJdPSdUaGUgY29uZmlnIGZldGNoIHJlcXVlc3QgdGltZWQgb3V0IHdoaWxlIGluIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgc3RhdGUuIENvbmZpZ3VyZSB0aW1lb3V0IHVzaW5nIFwiZmV0Y2hUaW1lb3V0TWlsbGlzXCIgU0RLIHNldHRpbmcuIFVuaXggdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kcyB3aGVuIGZldGNoIHJlcXVlc3QgdGhyb3R0bGluZyBlbmRzOiB7JHRocm90dGxlRW5kVGltZU1pbGxpc30uJyxHW1wiZmV0Y2gtY2xpZW50LXBhcnNlXCJdPVwiRmV0Y2ggY2xpZW50IGNvdWxkIG5vdCBwYXJzZSByZXNwb25zZS4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LlwiLEdbXCJmZXRjaC1zdGF0dXNcIl09XCJGZXRjaCBzZXJ2ZXIgcmV0dXJuZWQgYW4gSFRUUCBlcnJvciBzdGF0dXMuIEhUVFAgc3RhdHVzOiB7JGh0dHBTdGF0dXN9LlwiLEcpLHBVPW5ldyBrbyhcInJlbW90ZWNvbmZpZ1wiLFwiUmVtb3RlIENvbmZpZ1wiLEcpO3ZhciBkVT0odlUucHJvdG90eXBlLmZldGNoPWZ1bmN0aW9uKGYpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgbixyLGksbyxhLHMsdSxjLGgsbDtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LFByb21pc2UuYWxsKFt0aGlzLmZpcmViYXNlSW5zdGFsbGF0aW9ucy5nZXRJZCgpLHRoaXMuZmlyZWJhc2VJbnN0YWxsYXRpb25zLmdldFRva2VuKCldKV07Y2FzZSAxOm89dC5zZW50KCksbj1vWzBdLGk9b1sxXSxyPXdpbmRvdy5GSVJFQkFTRV9SRU1PVEVfQ09ORklHX1VSTF9CQVNFfHxcImh0dHBzOi8vZmlyZWJhc2VyZW1vdGVjb25maWcuZ29vZ2xlYXBpcy5jb21cIixvPXIrXCIvdjEvcHJvamVjdHMvXCIrdGhpcy5wcm9qZWN0SWQrXCIvbmFtZXNwYWNlcy9cIit0aGlzLm5hbWVzcGFjZStcIjpmZXRjaD9rZXk9XCIrdGhpcy5hcGlLZXkscj17XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIixcIkNvbnRlbnQtRW5jb2RpbmdcIjpcImd6aXBcIixcIklmLU5vbmUtTWF0Y2hcIjpmLmVUYWd8fFwiKlwifSxpPXtzZGtfdmVyc2lvbjp0aGlzLnNka1ZlcnNpb24sYXBwX2luc3RhbmNlX2lkOm4sYXBwX2luc3RhbmNlX2lkX3Rva2VuOmksYXBwX2lkOnRoaXMuYXBwSWQsbGFuZ3VhZ2VfY29kZTooZT12b2lkIDA9PT1lP25hdmlnYXRvcjplKS5sYW5ndWFnZXMmJmUubGFuZ3VhZ2VzWzBdfHxlLmxhbmd1YWdlfSxpPXttZXRob2Q6XCJQT1NUXCIsaGVhZGVyczpyLGJvZHk6SlNPTi5zdHJpbmdpZnkoaSl9LG89ZmV0Y2gobyxpKSxpPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsZSl7Zi5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihmdW5jdGlvbigpe3ZhciB0PW5ldyBFcnJvcihcIlRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQuXCIpO3QubmFtZT1cIkFib3J0RXJyb3JcIixlKHQpfSl9KSx0LmxhYmVsPTI7Y2FzZSAyOnJldHVybiB0LnRyeXMucHVzaChbMiw1LCw2XSksWzQsUHJvbWlzZS5yYWNlKFtvLGldKV07Y2FzZSAzOnJldHVybiB0LnNlbnQoKSxbNCxvXTtjYXNlIDQ6cmV0dXJuIGw9dC5zZW50KCksWzMsNl07Y2FzZSA1OnRocm93IGk9dC5zZW50KCksbz1cImZldGNoLWNsaWVudC1uZXR3b3JrXCIsXCJBYm9ydEVycm9yXCI9PT1pLm5hbWUmJihvPVwiZmV0Y2gtdGltZW91dFwiKSxwVS5jcmVhdGUobyx7b3JpZ2luYWxFcnJvck1lc3NhZ2U6aS5tZXNzYWdlfSk7Y2FzZSA2OmlmKGE9bC5zdGF0dXMscz1sLmhlYWRlcnMuZ2V0KFwiRVRhZ1wiKXx8dm9pZCAwLDIwMCE9PWwuc3RhdHVzKXJldHVyblszLDExXTtoPXZvaWQgMCx0LmxhYmVsPTc7Y2FzZSA3OnJldHVybiB0LnRyeXMucHVzaChbNyw5LCwxMF0pLFs0LGwuanNvbigpXTtjYXNlIDg6cmV0dXJuIGg9dC5zZW50KCksWzMsMTBdO2Nhc2UgOTp0aHJvdyBsPXQuc2VudCgpLHBVLmNyZWF0ZShcImZldGNoLWNsaWVudC1wYXJzZVwiLHtvcmlnaW5hbEVycm9yTWVzc2FnZTpsLm1lc3NhZ2V9KTtjYXNlIDEwOnU9aC5lbnRyaWVzLGM9aC5zdGF0ZSx0LmxhYmVsPTExO2Nhc2UgMTE6aWYoXCJJTlNUQU5DRV9TVEFURV9VTlNQRUNJRklFRFwiPT09Yz9hPTUwMDpcIk5PX0NIQU5HRVwiPT09Yz9hPTMwNDpcIk5PX1RFTVBMQVRFXCIhPT1jJiZcIkVNUFRZX0NPTkZJR1wiIT09Y3x8KHU9e30pLDMwNCE9PWEmJjIwMCE9PWEpdGhyb3cgcFUuY3JlYXRlKFwiZmV0Y2gtc3RhdHVzXCIse2h0dHBTdGF0dXM6YX0pO3JldHVyblsyLHtzdGF0dXM6YSxlVGFnOnMsY29uZmlnOnV9XX12YXIgZX0pfSl9LHZVKTtmdW5jdGlvbiB2VSh0LGUsbixyLGksbyl7dGhpcy5maXJlYmFzZUluc3RhbGxhdGlvbnM9dCx0aGlzLnNka1ZlcnNpb249ZSx0aGlzLm5hbWVzcGFjZT1uLHRoaXMucHJvamVjdElkPXIsdGhpcy5hcGlLZXk9aSx0aGlzLmFwcElkPW99dmFyIGdVPSh5VS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0KXt0aGlzLmxpc3RlbmVycy5wdXNoKHQpfSx5VS5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oKXt0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KX0seVUpO2Z1bmN0aW9uIHlVKCl7dGhpcy5saXN0ZW5lcnM9W119dmFyIG1VPVtcIjFcIixcInRydWVcIixcInRcIixcInllc1wiLFwieVwiLFwib25cIl0sYlU9KF9VLnByb3RvdHlwZS5hc1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl92YWx1ZX0sX1UucHJvdG90eXBlLmFzQm9vbGVhbj1mdW5jdGlvbigpe3JldHVyblwic3RhdGljXCIhPT10aGlzLl9zb3VyY2UmJjA8PW1VLmluZGV4T2YodGhpcy5fdmFsdWUudG9Mb3dlckNhc2UoKSl9LF9VLnByb3RvdHlwZS5hc051bWJlcj1mdW5jdGlvbigpe2lmKFwic3RhdGljXCI9PT10aGlzLl9zb3VyY2UpcmV0dXJuIDA7dmFyIHQ9TnVtYmVyKHRoaXMuX3ZhbHVlKTtyZXR1cm4gdD1pc05hTih0KT8wOnR9LF9VLnByb3RvdHlwZS5nZXRTb3VyY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlfSxfVSk7ZnVuY3Rpb24gX1UodCxlKXt2b2lkIDA9PT1lJiYoZT1cIlwiKSx0aGlzLl9zb3VyY2U9dCx0aGlzLl92YWx1ZT1lfXZhciB3VT0oSVUucHJvdG90eXBlLnNldExvZ0xldmVsPWZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlXCJkZWJ1Z1wiOnRoaXMuX2xvZ2dlci5sb2dMZXZlbD11YS5ERUJVRzticmVhaztjYXNlXCJzaWxlbnRcIjp0aGlzLl9sb2dnZXIubG9nTGV2ZWw9dWEuU0lMRU5UO2JyZWFrO2RlZmF1bHQ6dGhpcy5fbG9nZ2VyLmxvZ0xldmVsPXVhLkVSUk9SfX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KElVLnByb3RvdHlwZSxcImZldGNoVGltZU1pbGxpc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmFnZUNhY2hlLmdldExhc3RTdWNjZXNzZnVsRmV0Y2hUaW1lc3RhbXBNaWxsaXMoKXx8LTF9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KElVLnByb3RvdHlwZSxcImxhc3RGZXRjaFN0YXR1c1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmFnZUNhY2hlLmdldExhc3RGZXRjaFN0YXR1cygpfHxcIm5vLWZldGNoLXlldFwifSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLElVLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsUHJvbWlzZS5hbGwoW3RoaXMuX3N0b3JhZ2UuZ2V0TGFzdFN1Y2Nlc3NmdWxGZXRjaFJlc3BvbnNlKCksdGhpcy5fc3RvcmFnZS5nZXRBY3RpdmVDb25maWdFdGFnKCldKV07Y2FzZSAxOnJldHVybiBuPXQuc2VudCgpLGU9blswXSxuPW5bMV0sZSYmZS5jb25maWcmJmUuZVRhZyYmZS5lVGFnIT09bj9bNCxQcm9taXNlLmFsbChbdGhpcy5fc3RvcmFnZUNhY2hlLnNldEFjdGl2ZUNvbmZpZyhlLmNvbmZpZyksdGhpcy5fc3RvcmFnZS5zZXRBY3RpdmVDb25maWdFdGFnKGUuZVRhZyldKV06WzIsITFdO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksWzIsITBdfX0pfSl9LElVLnByb3RvdHlwZS5lbnN1cmVJbml0aWFsaXplZD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX2luaXRpYWxpemVQcm9taXNlfHwodGhpcy5faW5pdGlhbGl6ZVByb21pc2U9dGhpcy5fc3RvcmFnZUNhY2hlLmxvYWRGcm9tU3RvcmFnZSgpLnRoZW4oZnVuY3Rpb24oKXt0Ll9pc0luaXRpYWxpemF0aW9uQ29tcGxldGU9ITB9KSksdGhpcy5faW5pdGlhbGl6ZVByb21pc2V9LElVLnByb3RvdHlwZS5mZXRjaD1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgcixpLG8sYT10aGlzO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cj1uZXcgZ1Usc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiAkaShhLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gci5hYm9ydCgpLFsyXX0pfSl9LHRoaXMuc2V0dGluZ3MuZmV0Y2hUaW1lb3V0TWlsbGlzKSx0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSw0LCw2XSksWzQsdGhpcy5fY2xpZW50LmZldGNoKHtjYWNoZU1heEFnZU1pbGxpczp0aGlzLnNldHRpbmdzLm1pbmltdW1GZXRjaEludGVydmFsTWlsbGlzLHNpZ25hbDpyfSldO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksWzQsdGhpcy5fc3RvcmFnZUNhY2hlLnNldExhc3RGZXRjaFN0YXR1cyhcInN1Y2Nlc3NcIildO2Nhc2UgMzpyZXR1cm4gdC5zZW50KCksWzMsNl07Y2FzZSA0OnJldHVybiBpPXQuc2VudCgpLG49XCJmZXRjaC10aHJvdHRsZVwiLG89KGU9aSlpbnN0YW5jZW9mIFNvJiYtMSE9PWUuY29kZS5pbmRleE9mKG4pP1widGhyb3R0bGVcIjpcImZhaWx1cmVcIixbNCx0aGlzLl9zdG9yYWdlQ2FjaGUuc2V0TGFzdEZldGNoU3RhdHVzKG8pXTtjYXNlIDU6dGhyb3cgdC5zZW50KCksaTtjYXNlIDY6cmV0dXJuWzJdfXZhciBlLG59KX0pfSxJVS5wcm90b3R5cGUuZmV0Y2hBbmRBY3RpdmF0ZT1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMuZmV0Y2goKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSxbMix0aGlzLmFjdGl2YXRlKCldfX0pfSl9LElVLnByb3RvdHlwZS5nZXRBbGw9ZnVuY3Rpb24oKXt2YXIgbj10aGlzO3JldHVybiBmdW5jdGlvbih0LGUpe3ZvaWQgMD09PXQmJih0PXt9KTt2b2lkIDA9PT1lJiYoZT17fSk7cmV0dXJuIE9iamVjdC5rZXlzKEppKEppKHt9LHQpLGUpKX0odGhpcy5fc3RvcmFnZUNhY2hlLmdldEFjdGl2ZUNvbmZpZygpLHRoaXMuZGVmYXVsdENvbmZpZykucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbZV09bi5nZXRWYWx1ZShlKSx0fSx7fSl9LElVLnByb3RvdHlwZS5nZXRCb29sZWFuPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldFZhbHVlKHQpLmFzQm9vbGVhbigpfSxJVS5wcm90b3R5cGUuZ2V0TnVtYmVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldFZhbHVlKHQpLmFzTnVtYmVyKCl9LElVLnByb3RvdHlwZS5nZXRTdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0VmFsdWUodCkuYXNTdHJpbmcoKX0sSVUucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKHQpe3RoaXMuX2lzSW5pdGlhbGl6YXRpb25Db21wbGV0ZXx8dGhpcy5fbG9nZ2VyLmRlYnVnKCdBIHZhbHVlIHdhcyByZXF1ZXN0ZWQgZm9yIGtleSBcIicrdCsnXCIgYmVmb3JlIFNESyBpbml0aWFsaXphdGlvbiBjb21wbGV0ZWQuIEF3YWl0IG9uIGVuc3VyZUluaXRpYWxpemVkIGlmIHRoZSBpbnRlbnQgd2FzIHRvIGdldCBhIHByZXZpb3VzbHkgYWN0aXZhdGVkIHZhbHVlLicpO3ZhciBlPXRoaXMuX3N0b3JhZ2VDYWNoZS5nZXRBY3RpdmVDb25maWcoKTtyZXR1cm4gZSYmdm9pZCAwIT09ZVt0XT9uZXcgYlUoXCJyZW1vdGVcIixlW3RdKTp0aGlzLmRlZmF1bHRDb25maWcmJnZvaWQgMCE9PXRoaXMuZGVmYXVsdENvbmZpZ1t0XT9uZXcgYlUoXCJkZWZhdWx0XCIsU3RyaW5nKHRoaXMuZGVmYXVsdENvbmZpZ1t0XSkpOih0aGlzLl9sb2dnZXIuZGVidWcoJ1JldHVybmluZyBzdGF0aWMgdmFsdWUgZm9yIGtleSBcIicrdCsnXCIuIERlZmluZSBhIGRlZmF1bHQgb3IgcmVtb3RlIHZhbHVlIGlmIHRoaXMgaXMgdW5pbnRlbnRpb25hbC4nKSxuZXcgYlUoXCJzdGF0aWNcIikpfSxJVSk7ZnVuY3Rpb24gSVUodCxlLG4scixpKXt0aGlzLmFwcD10LHRoaXMuX2NsaWVudD1lLHRoaXMuX3N0b3JhZ2VDYWNoZT1uLHRoaXMuX3N0b3JhZ2U9cix0aGlzLl9sb2dnZXI9aSx0aGlzLl9pc0luaXRpYWxpemF0aW9uQ29tcGxldGU9ITEsdGhpcy5zZXR0aW5ncz17ZmV0Y2hUaW1lb3V0TWlsbGlzOjZlNCxtaW5pbXVtRmV0Y2hJbnRlcnZhbE1pbGxpczo0MzJlNX0sdGhpcy5kZWZhdWx0Q29uZmlnPXt9fWZ1bmN0aW9uIFRVKHQsZSl7dD10LnRhcmdldC5lcnJvcnx8dm9pZCAwO3JldHVybiBwVS5jcmVhdGUoZSx7b3JpZ2luYWxFcnJvck1lc3NhZ2U6dCYmdC5tZXNzYWdlfSl9dmFyIEVVPVwiYXBwX25hbWVzcGFjZV9zdG9yZVwiLFNVPVwiZmlyZWJhc2VfcmVtb3RlX2NvbmZpZ1wiLENVPTE7dmFyIGtVPShOVS5wcm90b3R5cGUuZ2V0TGFzdEZldGNoU3RhdHVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwibGFzdF9mZXRjaF9zdGF0dXNcIil9LE5VLnByb3RvdHlwZS5zZXRMYXN0RmV0Y2hTdGF0dXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2V0KFwibGFzdF9mZXRjaF9zdGF0dXNcIix0KX0sTlUucHJvdG90eXBlLmdldExhc3RTdWNjZXNzZnVsRmV0Y2hUaW1lc3RhbXBNaWxsaXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJsYXN0X3N1Y2Nlc3NmdWxfZmV0Y2hfdGltZXN0YW1wX21pbGxpc1wiKX0sTlUucHJvdG90eXBlLnNldExhc3RTdWNjZXNzZnVsRmV0Y2hUaW1lc3RhbXBNaWxsaXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2V0KFwibGFzdF9zdWNjZXNzZnVsX2ZldGNoX3RpbWVzdGFtcF9taWxsaXNcIix0KX0sTlUucHJvdG90eXBlLmdldExhc3RTdWNjZXNzZnVsRmV0Y2hSZXNwb25zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImxhc3Rfc3VjY2Vzc2Z1bF9mZXRjaF9yZXNwb25zZVwiKX0sTlUucHJvdG90eXBlLnNldExhc3RTdWNjZXNzZnVsRmV0Y2hSZXNwb25zZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXQoXCJsYXN0X3N1Y2Nlc3NmdWxfZmV0Y2hfcmVzcG9uc2VcIix0KX0sTlUucHJvdG90eXBlLmdldEFjdGl2ZUNvbmZpZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImFjdGl2ZV9jb25maWdcIil9LE5VLnByb3RvdHlwZS5zZXRBY3RpdmVDb25maWc9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2V0KFwiYWN0aXZlX2NvbmZpZ1wiLHQpfSxOVS5wcm90b3R5cGUuZ2V0QWN0aXZlQ29uZmlnRXRhZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImFjdGl2ZV9jb25maWdfZXRhZ1wiKX0sTlUucHJvdG90eXBlLnNldEFjdGl2ZUNvbmZpZ0V0YWc9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2V0KFwiYWN0aXZlX2NvbmZpZ19ldGFnXCIsdCl9LE5VLnByb3RvdHlwZS5nZXRUaHJvdHRsZU1ldGFkYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwidGhyb3R0bGVfbWV0YWRhdGFcIil9LE5VLnByb3RvdHlwZS5zZXRUaHJvdHRsZU1ldGFkYXRhPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldChcInRocm90dGxlX21ldGFkYXRhXCIsdCl9LE5VLnByb3RvdHlwZS5kZWxldGVUaHJvdHRsZU1ldGFkYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVsZXRlKFwidGhyb3R0bGVfbWV0YWRhdGFcIil9LE5VLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24ocyl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBvLGE9dGhpcztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMub3BlbkRiUHJvbWlzZV07Y2FzZSAxOnJldHVybiBvPXQuc2VudCgpLFsyLG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsbil7dmFyIHQ9by50cmFuc2FjdGlvbihbRVVdLFwicmVhZG9ubHlcIikub2JqZWN0U3RvcmUoRVUpLHI9YS5jcmVhdGVDb21wb3NpdGVLZXkocyk7dHJ5e3ZhciBpPXQuZ2V0KHIpO2kub25lcnJvcj1mdW5jdGlvbih0KXtuKFRVKHQsXCJzdG9yYWdlLWdldFwiKSl9LGkub25zdWNjZXNzPWZ1bmN0aW9uKHQpe3Q9dC50YXJnZXQucmVzdWx0O2UodD90LnZhbHVlOnZvaWQgMCl9fWNhdGNoKHQpe24ocFUuY3JlYXRlKFwic3RvcmFnZS1nZXRcIix7b3JpZ2luYWxFcnJvck1lc3NhZ2U6dCYmdC5tZXNzYWdlfSkpfX0pXX19KX0pfSxOVS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHMsdSl7cmV0dXJuICRpKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBvLGE9dGhpcztyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMub3BlbkRiUHJvbWlzZV07Y2FzZSAxOnJldHVybiBvPXQuc2VudCgpLFsyLG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsZSl7dmFyIG49by50cmFuc2FjdGlvbihbRVVdLFwicmVhZHdyaXRlXCIpLm9iamVjdFN0b3JlKEVVKSxyPWEuY3JlYXRlQ29tcG9zaXRlS2V5KHMpO3RyeXt2YXIgaT1uLnB1dCh7Y29tcG9zaXRlS2V5OnIsdmFsdWU6dX0pO2kub25lcnJvcj1mdW5jdGlvbih0KXtlKFRVKHQsXCJzdG9yYWdlLXNldFwiKSl9LGkub25zdWNjZXNzPWZ1bmN0aW9uKCl7dCgpfX1jYXRjaCh0KXtlKHBVLmNyZWF0ZShcInN0b3JhZ2Utc2V0XCIse29yaWdpbmFsRXJyb3JNZXNzYWdlOnQmJnQubWVzc2FnZX0pKX19KV19fSl9KX0sTlUucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihzKXtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIG8sYT10aGlzO3JldHVybiBaaSh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGhpcy5vcGVuRGJQcm9taXNlXTtjYXNlIDE6cmV0dXJuIG89dC5zZW50KCksWzIsbmV3IFByb21pc2UoZnVuY3Rpb24odCxlKXt2YXIgbj1vLnRyYW5zYWN0aW9uKFtFVV0sXCJyZWFkd3JpdGVcIikub2JqZWN0U3RvcmUoRVUpLHI9YS5jcmVhdGVDb21wb3NpdGVLZXkocyk7dHJ5e3ZhciBpPW4uZGVsZXRlKHIpO2kub25lcnJvcj1mdW5jdGlvbih0KXtlKFRVKHQsXCJzdG9yYWdlLWRlbGV0ZVwiKSl9LGkub25zdWNjZXNzPWZ1bmN0aW9uKCl7dCgpfX1jYXRjaCh0KXtlKHBVLmNyZWF0ZShcInN0b3JhZ2UtZGVsZXRlXCIse29yaWdpbmFsRXJyb3JNZXNzYWdlOnQmJnQubWVzc2FnZX0pKX19KV19fSl9KX0sTlUucHJvdG90eXBlLmNyZWF0ZUNvbXBvc2l0ZUtleT1mdW5jdGlvbih0KXtyZXR1cm5bdGhpcy5hcHBJZCx0aGlzLmFwcE5hbWUsdGhpcy5uYW1lc3BhY2UsdF0uam9pbigpfSxOVSk7ZnVuY3Rpb24gTlUodCxlLG4scil7dm9pZCAwPT09ciYmKHI9bmV3IFByb21pc2UoZnVuY3Rpb24oZSxuKXt2YXIgdD1pbmRleGVkREIub3BlbihTVSxDVSk7dC5vbmVycm9yPWZ1bmN0aW9uKHQpe24oVFUodCxcInN0b3JhZ2Utb3BlblwiKSl9LHQub25zdWNjZXNzPWZ1bmN0aW9uKHQpe2UodC50YXJnZXQucmVzdWx0KX0sdC5vbnVwZ3JhZGVuZWVkZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dC50YXJnZXQucmVzdWx0OzA9PT10Lm9sZFZlcnNpb24mJmUuY3JlYXRlT2JqZWN0U3RvcmUoRVUse2tleVBhdGg6XCJjb21wb3NpdGVLZXlcIn0pfX0pKSx0aGlzLmFwcElkPXQsdGhpcy5hcHBOYW1lPWUsdGhpcy5uYW1lc3BhY2U9bix0aGlzLm9wZW5EYlByb21pc2U9cn12YXIgQVU9KFJVLnByb3RvdHlwZS5nZXRMYXN0RmV0Y2hTdGF0dXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXN0RmV0Y2hTdGF0dXN9LFJVLnByb3RvdHlwZS5nZXRMYXN0U3VjY2Vzc2Z1bEZldGNoVGltZXN0YW1wTWlsbGlzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFzdFN1Y2Nlc3NmdWxGZXRjaFRpbWVzdGFtcE1pbGxpc30sUlUucHJvdG90eXBlLmdldEFjdGl2ZUNvbmZpZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFjdGl2ZUNvbmZpZ30sUlUucHJvdG90eXBlLmxvYWRGcm9tU3RvcmFnZT1mdW5jdGlvbigpe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZSxuLHI7cmV0dXJuIFppKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT10aGlzLnN0b3JhZ2UuZ2V0TGFzdEZldGNoU3RhdHVzKCksbj10aGlzLnN0b3JhZ2UuZ2V0TGFzdFN1Y2Nlc3NmdWxGZXRjaFRpbWVzdGFtcE1pbGxpcygpLHI9dGhpcy5zdG9yYWdlLmdldEFjdGl2ZUNvbmZpZygpLFs0LGVdO2Nhc2UgMTpyZXR1cm4oZT10LnNlbnQoKSkmJih0aGlzLmxhc3RGZXRjaFN0YXR1cz1lKSxbNCxuXTtjYXNlIDI6cmV0dXJuKG49dC5zZW50KCkpJiYodGhpcy5sYXN0U3VjY2Vzc2Z1bEZldGNoVGltZXN0YW1wTWlsbGlzPW4pLFs0LHJdO2Nhc2UgMzpyZXR1cm4ocj10LnNlbnQoKSkmJih0aGlzLmFjdGl2ZUNvbmZpZz1yKSxbMl19fSl9KX0sUlUucHJvdG90eXBlLnNldExhc3RGZXRjaFN0YXR1cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sYXN0RmV0Y2hTdGF0dXM9dCx0aGlzLnN0b3JhZ2Uuc2V0TGFzdEZldGNoU3RhdHVzKHQpfSxSVS5wcm90b3R5cGUuc2V0TGFzdFN1Y2Nlc3NmdWxGZXRjaFRpbWVzdGFtcE1pbGxpcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sYXN0U3VjY2Vzc2Z1bEZldGNoVGltZXN0YW1wTWlsbGlzPXQsdGhpcy5zdG9yYWdlLnNldExhc3RTdWNjZXNzZnVsRmV0Y2hUaW1lc3RhbXBNaWxsaXModCl9LFJVLnByb3RvdHlwZS5zZXRBY3RpdmVDb25maWc9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYWN0aXZlQ29uZmlnPXQsdGhpcy5zdG9yYWdlLnNldEFjdGl2ZUNvbmZpZyh0KX0sUlUpO2Z1bmN0aW9uIFJVKHQpe3RoaXMuc3RvcmFnZT10fXZhciBQVT0oT1UucHJvdG90eXBlLmZldGNoPWZ1bmN0aW9uKG4pe3JldHVybiAkaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMuc3RvcmFnZS5nZXRUaHJvdHRsZU1ldGFkYXRhKCldO2Nhc2UgMTpyZXR1cm4gZT10LnNlbnQoKXx8e2JhY2tvZmZDb3VudDowLHRocm90dGxlRW5kVGltZU1pbGxpczpEYXRlLm5vdygpfSxbMix0aGlzLmF0dGVtcHRGZXRjaChuLGUpXX19KX0pfSxPVS5wcm90b3R5cGUuYXR0ZW1wdEZldGNoPWZ1bmN0aW9uKHIsdCl7dmFyIGE9dC50aHJvdHRsZUVuZFRpbWVNaWxsaXMscz10LmJhY2tvZmZDb3VudDtyZXR1cm4gJGkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gWmkodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LChpPXIuc2lnbmFsLG89YSxuZXcgUHJvbWlzZShmdW5jdGlvbih0LGUpe3ZhciBuPU1hdGgubWF4KG8tRGF0ZS5ub3coKSwwKSxyPXNldFRpbWVvdXQodCxuKTtpLmFkZEV2ZW50TGlzdGVuZXIoZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQociksZShwVS5jcmVhdGUoXCJmZXRjaC10aHJvdHRsZVwiLHt0aHJvdHRsZUVuZFRpbWVNaWxsaXM6b30pKX0pfSkpXTtjYXNlIDE6dC5zZW50KCksdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdC50cnlzLnB1c2goWzIsNSwsN10pLFs0LHRoaXMuY2xpZW50LmZldGNoKHIpXTtjYXNlIDM6cmV0dXJuIGU9dC5zZW50KCksWzQsdGhpcy5zdG9yYWdlLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoKV07Y2FzZSA0OnJldHVybiB0LnNlbnQoKSxbMixlXTtjYXNlIDU6aWYoIWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBTbyYmdC5jdXN0b21EYXRhKXt0PU51bWJlcih0LmN1c3RvbURhdGEuaHR0cFN0YXR1cyk7cmV0dXJuIDQyOT09PXR8fDUwMD09PXR8fDUwMz09PXR8fDUwND09PXR9fShuPXQuc2VudCgpKSl0aHJvdyBuO3JldHVybiBuPXt0aHJvdHRsZUVuZFRpbWVNaWxsaXM6RGF0ZS5ub3coKStabyhzKSxiYWNrb2ZmQ291bnQ6cysxfSxbNCx0aGlzLnN0b3JhZ2Uuc2V0VGhyb3R0bGVNZXRhZGF0YShuKV07Y2FzZSA2OnJldHVybiB0LnNlbnQoKSxbMix0aGlzLmF0dGVtcHRGZXRjaChyLG4pXTtjYXNlIDc6cmV0dXJuWzJdfXZhciBpLG99KX0pfSxPVSk7ZnVuY3Rpb24gT1UodCxlKXt0aGlzLmNsaWVudD10LHRoaXMuc3RvcmFnZT1lfXZhciBEVSx4VT1cIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7cmV0dXJuKERVPVhsKS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgZWEoXCJyZW1vdGVDb25maWdcIixmdW5jdGlvbih0LGUpe3ZhciBuPWUuaW5zdGFuY2VJZGVudGlmaWVyLHI9dC5nZXRQcm92aWRlcihcImFwcFwiKS5nZXRJbW1lZGlhdGUoKSxpPXQuZ2V0UHJvdmlkZXIoXCJpbnN0YWxsYXRpb25zXCIpLmdldEltbWVkaWF0ZSgpO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3cpdGhyb3cgcFUuY3JlYXRlKFwicmVnaXN0cmF0aW9uLXdpbmRvd1wiKTt2YXIgbz1yLm9wdGlvbnMsYT1vLnByb2plY3RJZCxzPW8uYXBpS2V5LHU9by5hcHBJZDtpZighYSl0aHJvdyBwVS5jcmVhdGUoXCJyZWdpc3RyYXRpb24tcHJvamVjdC1pZFwiKTtpZighcyl0aHJvdyBwVS5jcmVhdGUoXCJyZWdpc3RyYXRpb24tYXBpLWtleVwiKTtpZighdSl0aHJvdyBwVS5jcmVhdGUoXCJyZWdpc3RyYXRpb24tYXBwLWlkXCIpO249bnx8XCJmaXJlYmFzZVwiO2U9bmV3IGtVKHUsci5uYW1lLG4pLHQ9bmV3IEFVKGUpLG89bmV3IGRhKHhVKTtvLmxvZ0xldmVsPXVhLkVSUk9SO3U9bmV3IGRVKGksRFUuU0RLX1ZFUlNJT04sbixhLHMsdSksdT1uZXcgUFUodSxlKSx1PW5ldyBsVSh1LGUsdCxvKSxvPW5ldyB3VShyLHUsdCxlLG8pO3JldHVybiBvLmVuc3VyZUluaXRpYWxpemVkKCksb30sXCJQVUJMSUNcIikuc2V0TXVsdGlwbGVJbnN0YW5jZXMoITApKSxEVS5yZWdpc3RlclZlcnNpb24oeFUsXCIwLjEuMzdcIiksY29uc29sZS53YXJuKFwiXFxuSXQgbG9va3MgbGlrZSB5b3UncmUgdXNpbmcgdGhlIGRldmVsb3BtZW50IGJ1aWxkIG9mIHRoZSBGaXJlYmFzZSBKUyBTREsuXFxuV2hlbiBkZXBsb3lpbmcgRmlyZWJhc2UgYXBwcyB0byBwcm9kdWN0aW9uLCBpdCBpcyBhZHZpc2FibGUgdG8gb25seSBpbXBvcnRcXG50aGUgaW5kaXZpZHVhbCBTREsgY29tcG9uZW50cyB5b3UgaW50ZW5kIHRvIHVzZS5cXG5cXG5Gb3IgdGhlIENETiBidWlsZHMsIHRoZXNlIGFyZSBhdmFpbGFibGUgaW4gdGhlIGZvbGxvd2luZyBtYW5uZXJcXG4ocmVwbGFjZSA8UEFDS0FHRT4gd2l0aCB0aGUgbmFtZSBvZiBhIGNvbXBvbmVudCAtIGkuZS4gYXV0aCwgZGF0YWJhc2UsIGV0Yyk6XFxuXFxuaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy81LjAuMC9maXJlYmFzZS08UEFDS0FHRT4uanNcXG5cIiksWGwucmVnaXN0ZXJWZXJzaW9uKFwiZmlyZWJhc2VcIixcIjguNS4wXCIsXCJjZG5cIiksWGx9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpcmViYXNlLmpzLm1hcFxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsInZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlL2ZpcmViYXNlJylcclxudmFyIGZpcmViYXNlQ29uZmlnID0ge1xyXG4gICAgYXBpS2V5OiBcIkFJemFTeUMyNlREMHBvcF9vSXdEUG1Xb3p1SHN6eFdBOWc1ampYSVwiLFxyXG4gICAgYXV0aERvbWFpbjogXCJtb25pdG9ydmEuZmlyZWJhc2VhcHAuY29tXCIsXHJcbiAgICBwcm9qZWN0SWQ6IFwibW9uaXRvcnZhXCIsXHJcbiAgICBzdG9yYWdlQnVja2V0OiBcIm1vbml0b3J2YS5hcHBzcG90LmNvbVwiLFxyXG4gICAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiNzY1NzI5Nzk1NTE0XCIsXHJcbiAgICBhcHBJZDogXCIxOjc2NTcyOTc5NTUxNDp3ZWI6M2UyZmI0ZDFlMWVlYjA1MTdhNDE4M1wiXHJcbn1cclxudmFyIHVzZXJpZCA9IFwiXCJcclxuLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZVxyXG5maXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuZnVuY3Rpb24gQXV0aCgpe1xyXG4gICAgaWYodmFsaWRhdGVFbWFpbCgkKCcjZW1haWwnKS52YWwoKSkgJiYgJCgnI3BzdycpLnZhbCgpLmxlbmd0aD41KSB7XHJcblxyXG4gICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCgkKCcjZW1haWwnKS52YWwoKSwgJCgnI3BzdycpLnZhbCgpKVxyXG4gICAgICAgICAgICAudGhlbih1c2VyQ3JlZGVudGlhbCA9PntcclxuICAgICAgICAgICAgICAgIHNldFVzZXJJZCh1c2VyQ3JlZGVudGlhbC51c2VyLnVpZClcclxuICAgICAgICAgICAgICAgIGdldExpc3QodHJ1ZSlcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5TdGFydFN0b3AnKS5zdHlsZS5kaXNwbGF5ID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bkFkZCcpLnN0eWxlLmRpc3BsYXkgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuRWRpdCcpLnN0eWxlLmRpc3BsYXkgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuTGlzdCcpLnN0eWxlLmRpc3BsYXkgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuTW9uaXQnKS5zdHlsZS5kaXNwbGF5ID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bk1vbml0Jykuc3R5bGUuZGlzcGxheSA9IFwiXCJcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXR0aW5ncycpLnN0eWxlLmRpc3BsYXkgPSBcIlwiXHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JDb2RlID0gZXJyb3IuY29kZTtcclxuICAgICAgICAgICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yTGFiZWwnKS5pbm5lclRleHQ9ZXJyb3JNZXNzYWdlK1wiIChcIitlcnJvckNvZGUrXCIpXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgLyogICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hdXRoJyxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGpzb246IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IHtlbWFpbDokKCcjZW1haWwnKS52YWwoKSwgcGFzc3dvcmQ6JCgnI3BzdycpLnZhbCgpfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBnZXRMaXN0KClcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5TdGFydFN0b3AnKS5zdHlsZS5kaXNwbGF5ID0gXCJcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkqL1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlRW1haWwoZW1haWwpIHtcclxuICAgIGNvbnN0IHJlID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcclxuICAgIHJldHVybiByZS50ZXN0KFN0cmluZyhlbWFpbCkudG9Mb3dlckNhc2UoKSk7XHJcbn1cclxuZ2xvYmFsLkF1dGggPSBBdXRoXHJcbmdsb2JhbC51c2VyaWQgPSB1c2VyaWQiXX0=
